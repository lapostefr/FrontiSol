(self.webpackChunkfrontify=self.webpackChunkfrontify||[]).push([[2076],{77260:function(ve,$,r){"use strict";r.d($,{H3:function(){return T},Im:function(){return y},Z2:function(){return c},e$:function(){return u},fM:function(){return p},nF:function(){return o},pn:function(){return m},qY:function(){return g},rm:function(){return E},rw:function(){return l},yl:function(){return w}});var s=r(584),b=r.n(s),t=r(89256),_=r.n(t),C=_()(b());C.push([ve.id,`.Stepper-module__stepper--ML75fQY9 {
    pointer-events: none; /* Allow elements below like video controls to be clicked */
}

.Stepper-module__stepperDetails--gQmKQb5W {
    position: relative;
    display: flex;
}

.Stepper-module__stepperNav--vIMR1tfQ {
    z-index: 20;
    display: flex;
    margin: auto;
    background: var(--f-black-opacity-high);
    border-radius: var(--f-corner-4px);
    opacity: 1;
    pointer-events: none;
    transition: opacity 0.3s 0.1s ease-in-out;
}

.Stepper-module__stepperNavLight--uzvaVz6h {
    background: var(--f-black-05);
}

.Stepper-module__stepperControl--hNY7djlB {
    display: inline-block;
    padding: 7px 13px 6px 13px;
    border: 1px solid transparent;
    margin: 0;
    background-color: transparent;
    background-image: none;
    color: var(--f-white);
    cursor: pointer;
    font-family: var(--f-font-standard);
    font-size: var(--f-font-13-size);
    font-weight: normal;
    line-height: 20px;
    opacity: 0.8;
    text-align: center;
    -webkit-text-decoration: none;
    text-decoration: none;
    touch-action: manipulation;
    transition: background-color 0.15s linear, color 0.15s linear;
    -webkit-user-select: none;
       -moz-user-select: none;
            user-select: none;
    vertical-align: middle;
    white-space: nowrap;
}

.Stepper-module__stepperControlPrev--QbkyYgoS {
    border-right: 0;
    pointer-events: initial;
}

.Stepper-module__stepperControlPrev--QbkyYgoS:hover {
    opacity: 1;
}

.Stepper-module__stepperControlPrev--QbkyYgoS:disabled {
    cursor: not-allowed;
    opacity: 0.4;
}

.Stepper-module__stepperControlNext--Gh22O1m1 {
    border-left: 0;
    pointer-events: initial;
}

.Stepper-module__stepperControlNext--Gh22O1m1:hover {
    opacity: 1;
}

.Stepper-module__stepperControlNext--Gh22O1m1:disabled {
    cursor: not-allowed;
    opacity: 0.4;
}

.Stepper-module__stepperControlLight--HGbLCH1p {
    color: var(--f-black-60);
}

.Stepper-module__stepperCount--BQ9JY0pC {
    min-width: 75px;
    box-sizing: border-box;
    padding: 7px 13px;
    color: var(--f-white);
    font-family: var(--f-font-standard);
    font-size: var(--f-font-14-size);
    font-weight: normal;
    text-align: center;
    -webkit-user-select: none;
       -moz-user-select: none;
            user-select: none;
}

.Stepper-module__stepperCountLight--KzDjLAI4 {
    color: var(--f-black-60);
}

.Stepper-module__stepperCountInput--teygqaHa {
    width: 25px;
    border: 1px solid var(--f-black-40);
    background-color: inherit;
    border-radius: 4px;
    color: inherit;
    cursor: text;
    outline: none;
    pointer-events: initial;
    text-align: center;
}

.Stepper-module__stepperCountInput--teygqaHa::-webkit-outer-spin-button,
.Stepper-module__stepperCountInput--teygqaHa::-webkit-inner-spin-button {
    margin: 0;
    -webkit-appearance: none;
}

.Stepper-module__stepperCountInput--teygqaHa[type='number'] {
    -moz-appearance: textfield;
}
`,"",{version:3,sources:["webpack://./application/client/Common/Stepper/Stepper.module.css"],names:[],mappings:"AAAA;IACI,oBAAoB,EAAE,2DAA2D;AACrF;;AAEA;IACI,kBAAkB;IAClB,aAAa;AACjB;;AAEA;IACI,WAAW;IACX,aAAa;IACb,YAAY;IACZ,uCAAuC;IACvC,kCAAkC;IAClC,UAAU;IACV,oBAAoB;IACpB,yCAAyC;AAC7C;;AAEA;IACI,6BAA6B;AACjC;;AAEA;IACI,qBAAqB;IACrB,0BAA0B;IAC1B,6BAA6B;IAC7B,SAAS;IACT,6BAA6B;IAC7B,sBAAsB;IACtB,qBAAqB;IACrB,eAAe;IACf,mCAAmC;IACnC,gCAAgC;IAChC,mBAAmB;IACnB,iBAAiB;IACjB,YAAY;IACZ,kBAAkB;IAClB,6BAAqB;IAArB,qBAAqB;IACrB,0BAA0B;IAC1B,6DAA6D;IAC7D,yBAAiB;OAAjB,sBAAiB;YAAjB,iBAAiB;IACjB,sBAAsB;IACtB,mBAAmB;AACvB;;AAEA;IACI,eAAe;IACf,uBAAuB;AAC3B;;AAEA;IACI,UAAU;AACd;;AAEA;IACI,mBAAmB;IACnB,YAAY;AAChB;;AAEA;IACI,cAAc;IACd,uBAAuB;AAC3B;;AAEA;IACI,UAAU;AACd;;AAEA;IACI,mBAAmB;IACnB,YAAY;AAChB;;AAEA;IACI,wBAAwB;AAC5B;;AAEA;IACI,eAAe;IACf,sBAAsB;IACtB,iBAAiB;IACjB,qBAAqB;IACrB,mCAAmC;IACnC,gCAAgC;IAChC,mBAAmB;IACnB,kBAAkB;IAClB,yBAAiB;OAAjB,sBAAiB;YAAjB,iBAAiB;AACrB;;AAEA;IACI,wBAAwB;AAC5B;;AAEA;IACI,WAAW;IACX,mCAAmC;IACnC,yBAAyB;IACzB,kBAAkB;IAClB,cAAc;IACd,YAAY;IACZ,aAAa;IACb,uBAAuB;IACvB,kBAAkB;AACtB;;AAEA;;IAEI,SAAS;IACT,wBAAwB;AAC5B;;AAEA;IACI,0BAA0B;AAC9B",sourcesContent:[`.stepper {
    pointer-events: none; /* Allow elements below like video controls to be clicked */
}

.stepperDetails {
    position: relative;
    display: flex;
}

.stepperNav {
    z-index: 20;
    display: flex;
    margin: auto;
    background: var(--f-black-opacity-high);
    border-radius: var(--f-corner-4px);
    opacity: 1;
    pointer-events: none;
    transition: opacity 0.3s 0.1s ease-in-out;
}

.stepperNavLight {
    background: var(--f-black-05);
}

.stepperControl {
    display: inline-block;
    padding: 7px 13px 6px 13px;
    border: 1px solid transparent;
    margin: 0;
    background-color: transparent;
    background-image: none;
    color: var(--f-white);
    cursor: pointer;
    font-family: var(--f-font-standard);
    font-size: var(--f-font-13-size);
    font-weight: normal;
    line-height: 20px;
    opacity: 0.8;
    text-align: center;
    text-decoration: none;
    touch-action: manipulation;
    transition: background-color 0.15s linear, color 0.15s linear;
    user-select: none;
    vertical-align: middle;
    white-space: nowrap;
}

.stepperControlPrev {
    border-right: 0;
    pointer-events: initial;
}

.stepperControlPrev:hover {
    opacity: 1;
}

.stepperControlPrev:disabled {
    cursor: not-allowed;
    opacity: 0.4;
}

.stepperControlNext {
    border-left: 0;
    pointer-events: initial;
}

.stepperControlNext:hover {
    opacity: 1;
}

.stepperControlNext:disabled {
    cursor: not-allowed;
    opacity: 0.4;
}

.stepperControlLight {
    color: var(--f-black-60);
}

.stepperCount {
    min-width: 75px;
    box-sizing: border-box;
    padding: 7px 13px;
    color: var(--f-white);
    font-family: var(--f-font-standard);
    font-size: var(--f-font-14-size);
    font-weight: normal;
    text-align: center;
    user-select: none;
}

.stepperCountLight {
    color: var(--f-black-60);
}

.stepperCountInput {
    width: 25px;
    border: 1px solid var(--f-black-40);
    background-color: inherit;
    border-radius: 4px;
    color: inherit;
    cursor: text;
    outline: none;
    pointer-events: initial;
    text-align: center;
}

.stepperCountInput::-webkit-outer-spin-button,
.stepperCountInput::-webkit-inner-spin-button {
    margin: 0;
    -webkit-appearance: none;
}

.stepperCountInput[type='number'] {
    -moz-appearance: textfield;
}
`],sourceRoot:""}]);var y="Stepper-module__stepper--ML75fQY9",g="Stepper-module__stepperDetails--gQmKQb5W",m="Stepper-module__stepperNav--vIMR1tfQ",T="Stepper-module__stepperNavLight--uzvaVz6h",E="Stepper-module__stepperControl--hNY7djlB",w="Stepper-module__stepperControlPrev--QbkyYgoS",u="Stepper-module__stepperControlNext--Gh22O1m1",c="Stepper-module__stepperControlLight--HGbLCH1p",o="Stepper-module__stepperCount--BQ9JY0pC",l="Stepper-module__stepperCountLight--KzDjLAI4",p="Stepper-module__stepperCountInput--teygqaHa";$.Ay=C},39335:function(ve,$,r){"use strict";r.d($,{IC:function(){return m},ZS:function(){return g},im:function(){return y}});var s=r(584),b=r.n(s),t=r(89256),_=r.n(t),C=_()(b());C.push([ve.id,`/* (c) Copyright Frontify Ltd., all rights reserved. */

.CollectionTile-module__collectionTileContainer--np9oqln9 {
    transition: var(--f-border-transition);
    margin: 10px;
}

.CollectionTile-module__collectionTileContainer--np9oqln9:hover {
    border: 1px solid var(--f-black-100)
}

.CollectionTile-module__imageContainer--jjdUSEdY {
    grid-template-columns: 50% 50%;
    grid-template-rows: 50% 50%;
    grid-template-areas:
        'image-1 image-2'
        'image-3 image-4';
    grid-gap: 1px;
    width: 102px;
    height: 102px;
}

.CollectionTile-module__imageContainer--jjdUSEdY .CollectionTile-module__imageWrap--EjS5eZON {
    height: 50px;
    background: var(--f-black-05);
}

.CollectionTile-module__imageContainer--jjdUSEdY .CollectionTile-module__imageWrap--EjS5eZON:nth-child(1) {
    grid-area: image-1;
    border-top-left-radius: var(--f-corner-4px);
}

.CollectionTile-module__imageContainer--jjdUSEdY .CollectionTile-module__imageWrap--EjS5eZON:nth-child(1) img {
    border-top-left-radius: var(--f-corner-4px);
}

.CollectionTile-module__imageContainer--jjdUSEdY .CollectionTile-module__imageWrap--EjS5eZON:nth-child(2) {
    grid-area: image-2;
}

.CollectionTile-module__imageContainer--jjdUSEdY .CollectionTile-module__imageWrap--EjS5eZON:nth-child(3) {
    grid-area: image-3;
    border-bottom-left-radius: var(--f-corner-4px);
}

.CollectionTile-module__imageContainer--jjdUSEdY .CollectionTile-module__imageWrap--EjS5eZON:nth-child(3) img {
    border-bottom-left-radius: var(--f-corner-4px);
}

.CollectionTile-module__imageContainer--jjdUSEdY .CollectionTile-module__imageWrap--EjS5eZON:nth-child(4) {
    grid-area: image-4;
}

.CollectionTile-module__imageWrap--EjS5eZON img {
    -o-object-fit: cover;
       object-fit: cover;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
}

.CollectionTile-module__imageContainer--jjdUSEdY svg {
    color: var(--f-white);
}

@media (min-width: 600px) {
    .CollectionTile-module__collectionTileContainer--np9oqln9 {
        width: calc(50% - 20px);
    }
}

@media (min-width: 900px) {
    .CollectionTile-module__collectionTileContainer--np9oqln9 {
        width: calc(33.333333% - 20px);
    }
}

@media (min-width: 1180px) {
    .CollectionTile-module__collectionTileContainer--np9oqln9 {
        width: calc(25% - 20px);
    }
}

@media (min-width: 1440px) {
    .CollectionTile-module__collectionTileContainer--np9oqln9 {
        width: calc(20% - 20px);
    }
}

@media (min-width: 1740px) {
    .CollectionTile-module__collectionTileContainer--np9oqln9 {
        width: calc(16.666666% - 20px);
    }
}

@media (min-width: 1960px) {
    .CollectionTile-module__collectionTileContainer--np9oqln9 {
        width: calc(14.2857142% - 20px);
    }
}
`,"",{version:3,sources:["webpack://./application/client/Feature/Library/Collection/CollectionList/CollectionTile/CollectionTile.module.css"],names:[],mappings:"AAAA,sDAAsD;;AAEtD;IACI,sCAAsC;IACtC,YAAY;AAChB;;AAEA;IACI;AACJ;;AAEA;IACI,8BAA8B;IAC9B,2BAA2B;IAC3B;;yBAEqB;IACrB,aAAa;IACb,YAAY;IACZ,aAAa;AACjB;;AAEA;IACI,YAAY;IACZ,6BAA6B;AACjC;;AAEA;IACI,kBAAkB;IAClB,2CAA2C;AAC/C;;AAEA;IACI,2CAA2C;AAC/C;;AAEA;IACI,kBAAkB;AACtB;;AAEA;IACI,kBAAkB;IAClB,8CAA8C;AAClD;;AAEA;IACI,8CAA8C;AAClD;;AAEA;IACI,kBAAkB;AACtB;;AAEA;IACI,oBAAiB;OAAjB,iBAAiB;IACjB,WAAW;IACX,YAAY;IACZ,eAAe;IACf,gBAAgB;AACpB;;AAEA;IACI,qBAAqB;AACzB;;AAEA;IACI;QACI,uBAAuB;IAC3B;AACJ;;AAEA;IACI;QACI,8BAA8B;IAClC;AACJ;;AAEA;IACI;QACI,uBAAuB;IAC3B;AACJ;;AAEA;IACI;QACI,uBAAuB;IAC3B;AACJ;;AAEA;IACI;QACI,8BAA8B;IAClC;AACJ;;AAEA;IACI;QACI,+BAA+B;IACnC;AACJ",sourcesContent:[`/* (c) Copyright Frontify Ltd., all rights reserved. */

.collectionTileContainer {
    transition: var(--f-border-transition);
    margin: 10px;
}

.collectionTileContainer:hover {
    border: 1px solid var(--f-black-100)
}

.imageContainer {
    grid-template-columns: 50% 50%;
    grid-template-rows: 50% 50%;
    grid-template-areas:
        'image-1 image-2'
        'image-3 image-4';
    grid-gap: 1px;
    width: 102px;
    height: 102px;
}

.imageContainer .imageWrap {
    height: 50px;
    background: var(--f-black-05);
}

.imageContainer .imageWrap:nth-child(1) {
    grid-area: image-1;
    border-top-left-radius: var(--f-corner-4px);
}

.imageContainer .imageWrap:nth-child(1) img {
    border-top-left-radius: var(--f-corner-4px);
}

.imageContainer .imageWrap:nth-child(2) {
    grid-area: image-2;
}

.imageContainer .imageWrap:nth-child(3) {
    grid-area: image-3;
    border-bottom-left-radius: var(--f-corner-4px);
}

.imageContainer .imageWrap:nth-child(3) img {
    border-bottom-left-radius: var(--f-corner-4px);
}

.imageContainer .imageWrap:nth-child(4) {
    grid-area: image-4;
}

.imageWrap img {
    object-fit: cover;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
}

.imageContainer svg {
    color: var(--f-white);
}

@media (min-width: 600px) {
    .collectionTileContainer {
        width: calc(50% - 20px);
    }
}

@media (min-width: 900px) {
    .collectionTileContainer {
        width: calc(33.333333% - 20px);
    }
}

@media (min-width: 1180px) {
    .collectionTileContainer {
        width: calc(25% - 20px);
    }
}

@media (min-width: 1440px) {
    .collectionTileContainer {
        width: calc(20% - 20px);
    }
}

@media (min-width: 1740px) {
    .collectionTileContainer {
        width: calc(16.666666% - 20px);
    }
}

@media (min-width: 1960px) {
    .collectionTileContainer {
        width: calc(14.2857142% - 20px);
    }
}
`],sourceRoot:""}]);var y="CollectionTile-module__collectionTileContainer--np9oqln9",g="CollectionTile-module__imageContainer--jjdUSEdY",m="CollectionTile-module__imageWrap--EjS5eZON";$.Ay=C},27712:function(ve,$,r){"use strict";r.d($,{S:function(){return s}});class s{constructor(t="id"){this.isFirstRun=!0,this.lastKeys=[],this.lastRecordPositionMapping={},this.identifierName=t}update(t){const _=this._getNextKeys(t),C=this._getRecordsToDelete(t,_),{moveRecords:y,addRecords:g,keepRecords:m}=this._getRecordsToMoveOrAdd(t);return this.isFirstRun=!1,this.lastKeys=_,{deleteRecords:C,moveRecords:y,addRecords:g,keepRecords:m}}_getNextKeys(t){const _=[];for(let C=0;C<t.length;C++){const y=t[C][this.identifierName];_.push(y)}return _}_getRecordsToDelete(t,_){return this.isFirstRun?[]:this.lastKeys.filter(C=>!_.includes(C))}_getRecordsToMoveOrAdd(t){const _={},C=[],y=[],g=[];let m=0,T=1;for(let E=0;E<t.length;E++){const w=t[E],u=w[this.identifierName];_[T]=u,this.lastRecordPositionMapping[T]===u?g.push({record:w,position:T,afterRecordId:m}):this.lastKeys.includes(u)?C.push({record:w,position:T,afterRecordId:m}):y.push({record:w,position:T,afterRecordId:m}),m=u,++T}return this.lastRecordPositionMapping=_,{moveRecords:C,addRecords:y,keepRecords:g}}}},77345:function(ve,$,r){"use strict";r.d($,{Z:function(){return R}});var s=r(86070),b=r(23245),t=r(14154);const _=(0,t.I)(U=>(0,s.jsx)("div",{className:"ca-avatar-simple__card-container js-ca-avatar-simple__card-container",tabIndex:-1,children:(0,s.jsxs)("div",{className:"ca-avatar-simple__card",children:[(0,s.jsx)("div",{className:"ca-avatar-simple__card-header",children:(0,s.jsx)("div",{className:"ca-avatar-simple__card-avatar",children:(0,s.jsx)(b.p,{imageUrl:U.imageUrl,gravatarHash:U.gravatarHash,name:U.name||U.email,size:R.SIZE_80,border:R.BORDER_WHITE})})}),(0,s.jsx)("div",{className:"ca-avatar-simple__card-name",children:U.name||U.email}),U.role?(0,s.jsx)("div",{className:"ca-avatar-simple__card-role",children:U.role}):null,U.organization?(0,s.jsx)("div",{className:"ca-avatar-simple__card-organization",children:U.organization}):null]})}));var C=r(46223),y=Object.defineProperty,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=(U,B,M)=>B in U?y(U,B,{enumerable:!0,configurable:!0,writable:!0,value:M}):U[B]=M,w=(U,B)=>{for(var M in B||(B={}))m.call(B,M)&&E(U,M,B[M]);if(g)for(var M of g(B))T.call(B,M)&&E(U,M,B[M]);return U};const u=(0,t.I)(U=>(0,s.jsx)("img",w({className:(0,C.h)(["ca-avatar-simple__image js-ca-avatar-simple__image",U.lazyLoad?"lazyload":"not-lazyloaded",U.hasBorder?`ca-avatar-simple__image--size-${U.size}-with-border`:`ca-avatar-simple__image--size-${U.size}`]),alt:U.name,title:U.name},U.lazyLoad?{"data-src":U.imageUrl}:{src:U.imageUrl})));var c=r(78149);const o=(0,t.I)(U=>(0,s.jsx)("div",{className:(0,C.h)(["ca-avatar-simple__no-image js-ca-avatar-simple__no-image",U.backgroundColor?`ca-avatar-simple__no-image--background-color-${U.backgroundColor}`:"",U.hasBorder?`ca-avatar-simple__no-image--size-${U.size}-with-border`:`ca-avatar-simple__no-image--size-${U.size}`]),title:U.name,children:(0,s.jsx)(c.V,{size:U.size==="80"?"xl":"md",icon:"user"})})),l=(0,t.I)(U=>(0,s.jsx)("div",{className:`ca-avatar-simple__overlay ${U.hasBorder?`ca-avatar-simple__overlay--size-${U.size}-with-border`:`ca-avatar-simple__overlay--size-${U.size}`}`})),p=(0,t.I)(U=>U.state===R.STATE_DISABLED?(0,s.jsx)("div",{className:"ca-avatar-simple__state ca-avatar-simple__state--disabled"}):null),f=(0,t.I)(U=>(0,s.jsx)("div",{className:`ca-avatar-simple__status js-ca-avatar-simple__status ca-avatar-simple__status--${U.status} ca-avatar-simple__status--size-${U.size} `,children:U.status===R.STATUS_DECLINED?(0,s.jsx)("svg",{width:"6",height:"6",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M5.525.575a.5.5 0 010 .708L3.817 2.99 5.525 4.7a.5.5 0 010 .706l-.118.118a.5.5 0 01-.707 0l-1.709-1.71-1.708 1.71a.5.5 0 01-.708 0l-.117-.118a.5.5 0 010-.707l1.708-1.71L.458 1.284a.5.5 0 010-.708L.575.458a.5.5 0 01.708 0L2.99 2.166 4.701.458a.5.5 0 01.706 0l.118.117z",fill:"#FFF",fillRule:"evenodd"})}):U.status===R.STATUS_APPROVED?(0,s.jsx)("svg",{width:"8",height:"6",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M6.063.266a.583.583 0 01.914.718l-.065.083-4.294 4.548-1.68-1.901a.583.583 0 01.798-.845l.076.072.835.943L6.063.266z",fill:"#FFF",fillRule:"nonzero"})}):U.status===R.STATUS_PENDING?(0,s.jsx)("svg",{width:"4",height:"8",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M2.01 5.727c.181 0 .339.066.47.198a.66.66 0 01.199.486.683.683 0 01-.198.492.634.634 0 01-.472.205.649.649 0 01-.485-.205.683.683 0 01-.198-.492.66.66 0 01.198-.486.66.66 0 01.485-.198zM2.022.792c.61 0 1.089.16 1.435.478.347.32.52.752.52 1.299 0 .374-.112.697-.335.97-.223.274-.454.53-.69.766-.174.183-.288.335-.342.458a.835.835 0 00-.082.335h-.971c.01-.273.057-.496.143-.67.087-.173.24-.378.459-.615.173-.191.348-.378.526-.56a.923.923 0 00.266-.67.852.852 0 00-.246-.63c-.164-.163-.392-.245-.683-.245-.31 0-.545.098-.704.294-.16.196-.253.44-.28.731h-1.08c.063-.574.28-1.041.649-1.401.369-.36.84-.54 1.415-.54z",fill:"#7A7F88",fillRule:"evenodd"})}):null}));var O=r(50427),L=r(81178),P=r(18216),N=r(77007),S=r(5181);class R extends P.j{static get SIZES(){return[R.SIZE_16,R.SIZE_22,R.SIZE_24,R.SIZE_28,R.SIZE_32,R.SIZE_40,R.SIZE_80]}static get SIZE_16(){return 16}static get SIZE_22(){return 22}static get SIZE_24(){return 24}static get SIZE_28(){return 28}static get SIZE_32(){return 32}static get SIZE_40(){return 40}static get SIZE_80(){return 80}static get STATUS(){return[R.STATUS_NO,R.STATUS_APPROVED,R.STATUS_DECLINED,R.STATUS_PENDING]}static get STATUS_NO(){return"no"}static get STATUS_DECLINED(){return"declined"}static get STATUS_APPROVED(){return"approved"}static get STATUS_PENDING(){return"pending"}static get STATE(){return[R.STATE_DEFAULT,R.STATE_DISABLED]}static get STATE_DEFAULT(){return"default"}static get STATE_DISABLED(){return"disabled"}static get TIMEOUT_DURATION(){return 1}static get GRAVATAR_BASE_URL(){return"https://secure.gravatar.com/avatar/"}static get BACKGROUND_COLOR_BLACK_100(){return"black-100"}static get BACKGROUND_COLOR_BLACK_10(){return"black-10"}static get BACKGROUND_COLOR_GREEN(){return"green"}static get BACKGROUND_COLOR_YELLOW(){return"yellow"}static get BACKGROUND_COLOR_RED(){return"red"}static get BACKGROUND_COLOR_BLUE_DARK(){return"blue-dark"}static get BORDER_NONE(){return"none"}static get BORDER_WHITE(){return"white"}static get BORDER_BLUE_DARK(){return"blue-dark"}static get BORDERS(){return[R.BORDER_NONE,R.BORDER_WHITE,R.BORDER_BLUE_DARK]}static get BACKGROUND_COLORS(){return[R.BACKGROUND_COLOR_BLUE_DARK,R.BACKGROUND_COLOR_RED,R.BACKGROUND_COLOR_YELLOW,R.BACKGROUND_COLOR_GREEN,R.BACKGROUND_COLOR_BLACK_100,R.BACKGROUND_COLOR_BLACK_10]}static get THEME_LIGHT(){return"light"}static get THEME_DARK(){return"dark"}static get THEMES(){return[R.THEME_LIGHT,R.THEME_DARK]}on(B){this.sandbox.subscribe("avatar",this),this.tpl.bindDataAttributes(this,{imageUrl:{type:String,changed:()=>this.updateImageUrl()},gravatarHash:{type:String,changed:()=>this.updateGravatarHash()},name:{type:String,changed:()=>this.updateName()},size:{type:Number,allowed:R.SIZES,default:R.SIZE_32},border:{type:String,allowed:R.BORDERS,default:R.BORDER_NONE,changed:M=>this.updateBorderColor(M)},showOverlay:{type:Boolean,changed:()=>this.renderOverlay()},status:{type:String,allowed:R.STATUS,default:R.STATUS_NO,changed:()=>this.updateStatus()},state:{type:String,allowed:R.STATE,default:R.STATE_DEFAULT},userId:{type:Number},lazyLoad:{type:Boolean,default:!0},showPopup:{type:Boolean},backgroundColor:{type:String,allowed:R.BACKGROUND_COLORS,default:R.BACKGROUND_COLOR_BLACK_10},theme:{type:String,allowed:R.THEMES,default:R.THEME_LIGHT}}),this.renderStaticClasses(),this.renderImage(),this.renderNoImage(),this.renderGravatar(),this.renderStatus(),this.renderState(),this.renderPopup(),this.renderOverlay(),B()}renderStaticClasses(){this.border!==R.BORDER_NONE?this.$ctx.addClass(`ca-avatar-simple--border
                     ca-avatar-simple--border-${this.border}
                     ca-avatar-simple--size-${this.size}-with-border`):this.$ctx.addClass(`ca-avatar-simple--size-${this.size}`)}renderNoImage(B=!1){const M=this.backgroundColor,I=(0,O.EY)(o,{name:this.name,backgroundColor:M,size:this.size,hasBorder:this.border!==R.BORDER_NONE});if(B){const F=this.$ctx.find(".js-ca-avatar-simple__no-image");this.tpl.replaceAndActivate(F,S(I))}else this.$ctx.append(I)}renderOverlay(){var B;if(!this.showOverlay){(B=this.$overlay)==null||B.addClass("ca-avatar-simple__overlay--hidden");return}this.$overlay||(this.$overlay=S((0,O.EY)(l,{size:this.size,hasBorder:this.border!==R.BORDER_NONE})),this.$ctx.append(this.$overlay)),this.$overlay.removeClass("ca-avatar-simple__overlay--hidden")}renderImage(B=!1){if(!N.y.isString(this.imageUrl)||this.imageUrl.length===0)return;const M=(0,O.EY)(u,{imageUrl:this.imageUrl,name:this.name,lazyLoad:this.lazyLoad,size:this.size,hasBorder:this.border!==R.BORDER_NONE});if(B){const I=this.$ctx.find(".js-ca-avatar-simple__image");this.tpl.replaceAndActivate(I,S(M))}else this.$ctx.append(M);this.handleImageError()}handleImageError(){const B=this.$ctx.find(".js-ca-avatar-simple__image");B.on("error",()=>{B.remove()})}renderGravatar(B=!1){if(N.y.isStringAndNotEmpty(this.imageUrl)||!N.y.isString(this.gravatarHash)||this.gravatarHash.length===0)return;const M=`${R.GRAVATAR_BASE_URL}${this.gravatarHash}?d=404&s=${this.size}`;M.length!==0&&(B||this.$ctx.prepend('<div class="js-ca-avatar-simple__image"></div>'),S.ajax({url:M}).done(()=>{const I=(0,O.EY)(u,{imageUrl:M,name:this.name,lazyLoad:this.lazyLoad,size:this.size,hasBorder:this.border!==R.BORDER_NONE}),F=this.$ctx.find(".js-ca-avatar-simple__image");this.tpl.replaceAndActivate(F,S(I))}))}renderStatus(B=!1){if(!R.STATUS.includes(this.status)||this.size===R.SIZE_80)return;const M=(0,O.EY)(f,{status:this.status,size:this.size});if(B){const I=this.$ctx.find(".js-ca-avatar-simple__status");this.tpl.replaceAndActivate(I,S(M))}else this.$ctx.append(M)}renderState(){this.$ctx.append((0,O.EY)(p,{state:this.state}))}renderPopup(){if(!this.showPopup||!N.y.isNumber(this.userId)||this.userId<1||this.isIdOfCurrentUser(this.userId))return;this.$ctx.find(".js-ca-avatar-simple__image, .js-ca-avatar-simple__no-image").removeAttr("title"),this.$ctx.on("mouseenter focusin",()=>{this.clearCurrentTimeout(),this.timeout=setTimeout(()=>{this.data.get(`/api/user/info/${this.userId}`).then(M=>{if(typeof M!="object")return;const I=S((0,O.EY)(_,{imageUrl:M.preview_url_without_placeholder,gravatarHash:M.gravatar_hash,name:M.name,email:M.email,role:M.role,organization:M.organization}));this.tpl.addAndActivate(this.$ctx,I,!1);const F=I.offset().left+I.width(),te=I.offset().top+I.height(),fe=S(window).width(),Ie=S(window).height();te>Ie&&this.$ctx.addClass("ca-avatar-simple--hover-top"),F>fe&&this.$ctx.addClass("ca-avatar-simple--hover-left"),this.$ctx.off("mouseenter focusin mouseleave focusout")})},R.TIMEOUT_DURATION)}),this.$ctx.on("mouseleave focusout",()=>{this.clearCurrentTimeout()})}updateImageUrl(){this.renderImage(!0),this.renderGravatar(!0)}updateGravatarHash(){this.renderGravatar(!0)}updateName(){this.renderNoImage(!0),this.renderImage(!0),this.renderGravatar(!0)}updateBorderColor(B){this.$ctx.removeClass(`ca-avatar-simple--border-${B.previousValue}`),this.$ctx.addClass(`ca-avatar-simple--border-${this.border}`)}updateStatus(){this.renderStatus(!0)}isIdOfCurrentUser(B){return(0,L.F6)()===B}clearCurrentTimeout(){clearTimeout(this.timeout)}onAvatarUpdate({userId:B,imageUrl:M=null,name:I=null,gravatarHash:F=null}){this.userId===B&&(this.$ctx.dataAsString("imageUrl",M),this.$ctx.dataAsString("name",I),this.$ctx.dataAsString("gravatarHash",F))}}},23245:function(ve,$,r){"use strict";r.d($,{p:function(){return T}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(E,w,u)=>w in E?t(E,w,{enumerable:!0,configurable:!0,writable:!0,value:u}):E[w]=u,m=(E,w)=>{for(var u in w||(w={}))C.call(w,u)&&g(E,u,w[u]);if(_)for(var u of _(w))y.call(w,u)&&g(E,u,w[u]);return E};const T=(0,b.I)(E=>(0,s.jsx)("div",m({className:"mod mod-c-avatar-simple ca-avatar-simple",tabIndex:E.interactive?0:-1},E.tpl.renderDataAttributesAsObject(E))))},58848:function(ve,$,r){"use strict";r.d($,{$:function(){return t}});var s=r(18216),b=r(93791);class t extends s.j{static get THEMES(){return[t.THEME_DARK,t.THEME_LIGHT,t.THEME_DEFAULT]}static get THEME_DARK(){return"dark"}static get THEME_LIGHT(){return"light"}static get THEME_DEFAULT(){return"default"}static get BUBBLE_STATUS(){return[t.BUBBLE_STATUS_NONE,t.BUBBLE_STATUS_SUCCESS,t.BUBBLE_STATUS_PROGRESS,t.BUBBLE_STATUS_WARNING,t.BUBBLE_STATUS_DANGER,t.BUBBLE_STATUS_CUSTOM]}static get BUBBLE_STATUS_NONE(){return""}static get BUBBLE_STATUS_SUCCESS(){return"success"}static get BUBBLE_STATUS_PROGRESS(){return"progress"}static get BUBBLE_STATUS_WARNING(){return"warning"}static get BUBBLE_STATUS_DANGER(){return"danger"}static get BUBBLE_STATUS_CUSTOM(){return"custom"}static get ICONS(){return["",...b.l.ICONS]}}},82387:function(ve,$,r){"use strict";r.d($,{b:function(){return u}});var s=r(86070),b=r(78149),t=r(14154),_=r(93791),C=r(58848),y=Object.defineProperty,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=(c,o,l)=>o in c?y(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,w=(c,o)=>{for(var l in o||(o={}))m.call(o,l)&&E(c,l,o[l]);if(g)for(var l of g(o))T.call(o,l)&&E(c,l,o[l]);return c};const u=(0,t.I)(c=>{let o;switch(c.theme){case C.$.THEME_LIGHT:o="ca-badge--light";break;case C.$.THEME_DARK:o="ca-badge--dark";break;case C.$.THEME_DEFAULT:o="ca-badge--default";break;default:o="ca-badge--dark"}let l;if(c.bubbleStatus)switch(c.bubbleStatus){case C.$.BUBBLE_STATUS_SUCCESS:l="ca-badge__bubble--success";break;case C.$.BUBBLE_STATUS_PROGRESS:l="ca-badge__bubble--progress";break;case C.$.BUBBLE_STATUS_WARNING:l="ca-badge__bubble--warning";break;case C.$.BUBBLE_STATUS_DANGER:l="ca-badge__bubble--danger";break;case C.$.BUBBLE_STATUS_CUSTOM:l="";break;default:l=""}return(0,s.jsxs)("span",{className:`ca-badge ${o}`,children:[c.icon?(0,s.jsx)("span",{className:"ca-badge__icon",children:(0,s.jsx)(b.V,{icon:c.icon,size:_.l.SIZE_EXTRA_SMALL})}):null,c.bubbleStatus?(0,s.jsx)("i",w({className:`ca-badge__bubble ${l}`},c.bubbleStatus===C.$.BUBBLE_STATUS_CUSTOM&&c.bubbleCustomColor?{style:{backgroundColor:`${c.bubbleCustomColor}`}}:{})):null,c.text]})})},47929:function(ve,$,r){"use strict";r.d($,{I:function(){return T}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(E,w,u)=>w in E?t(E,w,{enumerable:!0,configurable:!0,writable:!0,value:u}):E[w]=u,m=(E,w)=>{for(var u in w||(w={}))C.call(w,u)&&g(E,u,w[u]);if(_)for(var u of _(w))y.call(w,u)&&g(E,u,w[u]);return E};const T=(0,b.I)(E=>(0,s.jsx)("div",m({className:"mod mod-c-button-group ca-button-group"},E.tpl.renderDataAttributesAsObject(E))))},93277:function(ve,$,r){"use strict";r.d($,{Q:function(){return u}});var s=r(86070),b=r(78149),t=r(14154);const _=(0,t.I)(c=>(0,s.jsx)("span",{className:`ca-button__segment ca-button__dropdown-indicator ca-button__dropdown-indicator--size-${c.size}`,children:(0,s.jsx)(b.V,{icon:"caret-down",size:c.iconSize})}));var C=r(93791);const y=(0,t.I)(c=>(0,s.jsx)("div",{className:`ca-button__segment ca-button__segment--icon js-ca-button__segment--icon ${c.isInProgress?"ca-button__segment--icon-in-progress":""}`,children:c.isInProgress?(0,s.jsx)("span",{className:`ca-button__spinner ca-button__spinner--size-${c.size}`,children:(0,s.jsx)(b.V,{icon:C.l.ICON_SPINNER,size:c.iconSize,classes:"anim-spin"})}):(0,s.jsx)("span",{className:`ca-button__icon ca-button__icon--size-${c.size}`,children:(0,s.jsx)(b.V,{icon:c.icon,size:c.iconSize})})})),g=(0,t.I)(c=>(0,s.jsx)("span",{className:`ca-button__segment ca-button__text ca-button__text--size-${c.size} js-ca-button__text`,children:c.label}));var m=r(77007),T=r(50427),E=r(18216),w=r(5181);class u extends E.j{static get TYPE_BUTTON(){return"button"}static get TYPE_SUBMIT(){return"submit"}static get TYPE_RESET(){return"reset"}static get TYPES(){return[u.TYPE_BUTTON,u.TYPE_SUBMIT,u.TYPE_RESET]}static get SIZE_SMALL(){return"small"}static get SIZE_MEDIUM(){return"medium"}static get SIZE_LARGE(){return"large"}static get SIZES(){return[u.SIZE_SMALL,u.SIZE_MEDIUM,u.SIZE_LARGE]}static get STYLE_PRIMARY(){return"primary"}static get STYLE_SECONDARY(){return"secondary"}static get STYLE_DANGER(){return"danger"}static get STYLES(){return[u.STYLE_PRIMARY,u.STYLE_SECONDARY,u.STYLE_DANGER]}static get ICON_STYLE_DEFAULT(){return""}static get ICON_STYLE_SUCCESS(){return"success"}static get ICON_STYLE_DANGER(){return"danger"}static get ICON_STYLES(){return[u.ICON_STYLE_DEFAULT,u.ICON_STYLE_SUCCESS,u.ICON_STYLE_DANGER]}static get BACKGROUND_WHITE(){return"white"}static get BACKGROUND_BLACK_05(){return"black-05"}static get BACKGROUND_BLACK_90(){return"black-90"}static get BACKGROUND_BLACK_100(){return"black-100"}static get BACKGROUNDS(){return[u.BACKGROUND_WHITE,u.BACKGROUND_BLACK_05,u.BACKGROUND_BLACK_90,u.BACKGROUND_BLACK_100]}static get ICONS(){return["",...C.l.ICONS]}static get ICON_DEFAULT(){return""}static get FOCUSED_BY_MOUSE_CLASS(){return"ca-button--focused-by-mouse"}on(o){switch(this.tpl.bindDataAttributes(this,{label:{type:String,changed:()=>this.updateLabel()},type:{type:String,allowed:u.TYPES,default:u.TYPE_BUTTON},size:{type:String,allowed:u.SIZES,default:u.SIZE_MEDIUM},style:{type:String,allowed:u.STYLES,default:u.STYLE_PRIMARY},background:{type:String,allowed:u.BACKGROUNDS,default:u.BACKGROUND_WHITE},icon:{type:String,allowed:u.ICONS,default:u.ICON_DEFAULT},iconStyle:{type:String,allowed:u.ICON_STYLES,default:u.ICON_STYLE_DEFAULT},dropdownIndicator:{type:Boolean},noRoundedCornersLeft:{type:Boolean},noRoundedCornersRight:{type:Boolean},isDisabled:{type:Boolean,changed:()=>this.updateIsDisabled()},isInProgress:{type:Boolean,changed:()=>this.updateIsInProgress()}}),this.size){case u.SIZE_SMALL:this.iconSize=C.l.SIZE_SMALL;break;case u.SIZE_MEDIUM:this.iconSize=C.l.SIZE_MEDIUM;break;case u.SIZE_LARGE:this.iconSize=C.l.SIZE_MEDIUM;break}this.renderButtonType(),this.renderStaticClasses(),this.renderIcon(),this.renderLabel(),this.renderDropdownIndicator(),this.updateIsDisabled(),this.bindClicked(),this.bindFocusedByMouse(),o()}renderButtonType(){this.$ctx.attr("type",this.type)}renderStaticClasses(){this.$ctx.addClass(`
                ca-button--style-${this.style}
                ca-button--background-${this.background}
                ca-button--size-${this.size}
                ca-button--style-${this.style}-background-${this.background}
                ca-button--disabled
            `),this.noRoundedCornersLeft&&this.$ctx.addClass("ca-button--no-rounded-corners-left"),this.noRoundedCornersRight&&this.$ctx.addClass("ca-button--no-rounded-corners-right"),this.iconStyle!==u.ICON_STYLE_DEFAULT&&this.$ctx.addClass(`ca-button--icon-style-${this.iconStyle}`)}renderIcon(o=!1){if(!m.y.isStringAndNotEmpty(this.icon))return;const l=(0,T.EY)(y,{icon:this.icon,size:this.size,iconSize:this.iconSize,iconStyle:this.iconStyle,isInProgress:this.isInProgress});if(o){const p=this.$ctx.find(".js-ca-button__segment--icon");this.tpl.replaceAndActivate(p,w(l))}else this.$ctx.append(l)}renderLabel(){m.y.isStringAndNotEmpty(this.label)&&this.$ctx.append((0,T.EY)(g,{label:this.label,size:this.size}))}renderDropdownIndicator(){this.dropdownIndicator&&this.$ctx.append((0,T.EY)(_,{size:this.size,iconSize:this.iconSize}))}bindFocusedByMouse(){this.$ctx.on("mousedown",()=>{this.$ctx.addClass(u.FOCUSED_BY_MOUSE_CLASS)}),this.$ctx.on("focusout",()=>{this.$ctx.removeClass(u.FOCUSED_BY_MOUSE_CLASS)})}bindClicked(){this.type===u.TYPE_BUTTON&&this.$ctx.on("click",o=>{o.preventDefault(),o.stopPropagation(),!(this.isDisabled||this.isInProgress)&&this.tpl.fireCustomEvent(this.$ctx,"clicked")})}updateIsDisabled(){this.isDisabled?this.$ctx.prop("disabled",!0):this.$ctx.prop("disabled",!1)}updateIsInProgress(){this.renderIcon(!0)}updateLabel(){const l=this.$ctx.find(".js-ca-button__text").get(0);if(!l)throw new Error("Element not found.");l.innerHTML=this.label}}},87053:function(ve,$,r){"use strict";r.d($,{S:function(){return T}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(E,w,u)=>w in E?t(E,w,{enumerable:!0,configurable:!0,writable:!0,value:u}):E[w]=u,m=(E,w)=>{for(var u in w||(w={}))C.call(w,u)&&g(E,u,w[u]);if(_)for(var u of _(w))y.call(w,u)&&g(E,u,w[u]);return E};const T=(0,b.I)(E=>(0,s.jsx)("button",m({className:"mod mod-c-button ca-button"},E.tpl.renderDataAttributesAsObject(E))))},75573:function(ve,$,r){"use strict";r.d($,{z:function(){return E}});var s=r(86070),b=r(95376),t=r(14154),_=Object.defineProperty,C=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,m=(w,u,c)=>u in w?_(w,u,{enumerable:!0,configurable:!0,writable:!0,value:c}):w[u]=c,T=(w,u)=>{for(var c in u||(u={}))y.call(u,c)&&m(w,c,u[c]);if(C)for(var c of C(u))g.call(u,c)&&m(w,c,u[c]);return w};const E=(0,t.I)(w=>{var u;return(0,s.jsxs)("label",{className:`ca-checkbox ${w.modifier?`ca-checkbox--${w.modifier}`:""} ${w.label_classes||""}`,title:w.label,children:[(0,s.jsx)("input",T(T(T({type:"checkbox",id:w.id,name:w.name,className:`ca-checkbox__checkbox ca-checkbox__checkbox--hidden ${w.classes||""}`,value:w.value,"data-indeterminate":!!w.indeterminate},w.checked&&!w.indeterminate?{checked:!0}:{}),w.disabled||w.readonly?{disabled:!0}:{}),w.tpl.renderDataAttributesAsObject((u=w.data)!=null?u:{}))),(0,s.jsx)("span",{className:"ca-checkbox__bubble",children:(0,s.jsx)("i",{className:"ca-icon--check"})}),w.label?(0,s.jsx)("span",{className:`ca-checkbox__label ${w.disable_label&&w.disabled?"ca-checkbox__label--disabled":""} js-ca-checkbox__label ${w.multilineLabel?"ca-checkbox__label--multiline":""}`,children:w.label}):null,w.htmlLabel?(0,s.jsx)("span",{className:`ca-checkbox__label ca-checkbox__label--html ${w.disable_label&&w.disabled?"ca-checkbox__label--disabled":""}`,children:(0,b.Ay)(w.htmlLabel)}):null]})})},19194:function(ve,$,r){"use strict";r.d($,{J:function(){return y}});var s=r(86070),b=r(14154);const t=(0,b.I)(g=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{viewBox:"0 0 64 64",children:[(0,s.jsx)("circle",{pathLength:"100",className:`ca-circle-loader__track ca-circle-loader__track--${g.theme}`,cx:"32",cy:"32",r:"30",fill:"none",strokeWidth:"4"}),(0,s.jsx)("circle",{pathLength:"100",className:` ca-circle-loader__fill js-ca-circle-loader__fill js-ca-circle-loader__fill--${g.type} ca-circle-loader__fill--${g.type} ca-circle-loader__fill--${g.theme} `,strokeDasharray:"0, 100",strokeDashoffset:"0",cx:"32",cy:"32",r:"30",fill:"none",strokeWidth:"4"})]}),(0,s.jsx)("div",{className:` ca-circle-loader__ie11 ca-circle-loader__ie11--${g.type} ca-circle-loader__ie11--${g.theme} ca-circle-loader__ie11--${g.size} `})]}));var _=r(50427),C=r(18216);class y extends C.j{static get SIZES(){return[y.SIZE_TINY,y.SIZE_SMALL,y.SIZE_MEDIUM,y.SIZE_LARGE]}static get SIZE_TINY(){return"tiny"}static get SIZE_SMALL(){return"small"}static get SIZE_MEDIUM(){return"medium"}static get SIZE_LARGE(){return"large"}static get TYPES(){return[y.TYPE_DETERMINATE,y.TYPE_INDETERMINATE]}static get TYPE_DETERMINATE(){return"determinate"}static get TYPE_INDETERMINATE(){return"indeterminate"}static get THEMES(){return[y.THEME_DARK,y.THEME_LIGHT]}static get THEME_LIGHT(){return"light"}static get THEME_DARK(){return"dark"}static get STATES(){return[y.STATE_LOADING,y.STATE_SUCCESS,y.STATE_FAILED]}static get STATE_LOADING(){return"loading"}static get STATE_SUCCESS(){return"success"}static get STATE_FAILED(){return"failed"}on(m){this.tpl.bindDataAttributes(this,{size:{type:String,allowed:y.SIZES,default:y.SIZE_MEDIUM},theme:{type:String,allowed:y.THEMES,default:y.THEME_DARK},state:{type:String,allowed:y.STATES,default:y.STATE_LOADING,changed:()=>this.updateState()},type:{type:String,allowed:y.TYPES,default:y.TYPE_INDETERMINATE},progress:{type:Number,default:0,changed:()=>this.updateProgress()}}),this.$container=this.$ctx.find(".js-ca-circle-loader__container"),this.renderCircles(),this.renderCssClasses(),this.updateState(),this.type===y.TYPE_DETERMINATE&&this.updateProgress(),m()}renderCircles(){const m=(0,_.EY)(t,{type:this.type,theme:this.theme,size:this.size});this.$container.html(m)}renderCssClasses(){this.$container.addClass(`ca-circle-loader__container--${this.size} ca-circle-loader__container--${this.theme} ca-circle-loader__container--${this.type}`)}updateProgress(){this.$ctx.find(".js-ca-circle-loader__fill--determinate").css({"stroke-dasharray":`${this.progress} 100`})}updateState(){const m=this.$ctx.find(".js-ca-circle-loader__fill"),T=this.$ctx.find(".ca-circle-loader__ie11");this.$ctx.removeClass("ca-circle-loader--state-failed"),this.$ctx.removeClass("ca-circle-loader--success"),m.removeClass("ca-circle-loader__fill--state-failed"),m.removeClass("ca-circle-loader__fill--state-success"),T.removeClass(".ca-circle-loader__ie11--state-failed"),T.removeClass(".ca-circle-loader__ie11--state-success"),this.state==="failed"&&(this.$ctx.addClass("ca-circle-loader--state-failed"),m.addClass("ca-circle-loader__fill--state-failed"),T.addClass(".ca-circle-loader__ie11--state-failed")),this.state==="success"&&(this.progress=100,this.updateProgress(),this.$ctx.addClass("ca-circle-loader--state-success"),m.addClass("ca-circle-loader__fill--state-success"),T.addClass(".ca-circle-loader__ie11--state-success"))}}},89045:function(ve,$,r){"use strict";r.d($,{R:function(){return u}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.defineProperties,C=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,T=(c,o,l)=>o in c?t(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,E=(c,o)=>{for(var l in o||(o={}))g.call(o,l)&&T(c,l,o[l]);if(y)for(var l of y(o))m.call(o,l)&&T(c,l,o[l]);return c},w=(c,o)=>_(c,C(o));const u=(0,b.I)(c=>(0,s.jsx)("div",w(E({className:"mod mod-c-circle-loader ca-circle-loader"},c.tpl.renderDataAttributesAsObject(c)),{children:(0,s.jsx)("div",{className:"ca-circle-loader__container js-ca-circle-loader__container"})})))},68712:function(ve,$,r){"use strict";r.d($,{m:function(){return b}});var s=r(18216);class b extends s.j{static get STYLE_BLOCK_CLASS_FONT_GOOGLE(){return"css-style-font-google"}static get STYLE_BLOCK_CLASS_FONT_SELF_HOSTED(){return"css-style-font-self-hosted"}static get STYLE_BLOCK_CLASS_PORTAL_APPEARANCE(){return"css-style-portal-appearance"}static get STYLE_BLOCK_CLASSES(){return[b.STYLE_BLOCK_CLASS_FONT_GOOGLE,b.STYLE_BLOCK_CLASS_FONT_SELF_HOSTED,b.STYLE_BLOCK_CLASS_PORTAL_APPEARANCE]}static get DEFAULT_FONT_FAMILY_LIST(){return"'Mier B', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif,'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'"}}},61055:function(ve,$,r){"use strict";r.r($),r.d($,{TplCDropdownTypeface:function(){return t}});var s=r(86070),b=r(14154);const t=(0,b.I)(_=>{var C;return(0,s.jsxs)("div",{className:"ca-dropdown ca-dropdown--typeface",tabIndex:0,children:[(0,s.jsx)("div",{className:"selected",children:(0,s.jsxs)("span",{children:[_.selected?_.selected.label:"Multiple",(0,s.jsx)("i",{className:"ca-dropdown__arrow icon-angle-down"})]})}),(0,s.jsx)("ul",{className:"js-ca-dropdown__list",children:(C=_.items)==null?void 0:C.map((y,g)=>(0,s.jsx)("li",{"data-index":g,children:(0,s.jsx)("span",{children:y.label})},g))})]})})},50448:function(ve,$,r){"use strict";r.d($,{t:function(){return u}});var s=r(86070),b=r(89045),t=r(78149),_=r(14154),C=r(19194);const y=(0,_.I)(c=>(0,s.jsx)("div",{className:"ca-icon-button__icon js-ca-icon-button__icon",children:c.isInProgress?(0,s.jsx)(b.R,{size:C.J.SIZE_SMALL}):(0,s.jsx)(t.V,{icon:c.icon,size:c.size})})),g=(0,_.I)(c=>(0,s.jsx)("div",{className:"ca-icon-button__label js-ca-icon-button__label",children:c.label}));var m=r(50427),T=r(18216),E=r(93791),w=r(5181);class u extends T.j{static get ICONS(){return E.l.ICONS}static get ICON_DEFAULT(){return E.l.ICON_ADD}static get ICON_BUTTON_SIZE_SMALL(){return E.l.SIZE_SMALL}static get ICON_BUTTON_SIZE_MEDIUM(){return E.l.SIZE_MEDIUM}static get ICON_BUTTON_SIZE_LARGE(){return E.l.SIZE_LARGE}static get ICON_BUTTON_SIZES(){return[u.ICON_BUTTON_SIZE_SMALL,u.ICON_BUTTON_SIZE_MEDIUM,u.ICON_BUTTON_SIZE_LARGE]}static get BACKGROUND_WHITE(){return"white"}static get BACKGROUND_TRANSPARENT(){return"transparent"}static get BACKGROUND_BLACK_05(){return"black-05"}static get BACKGROUND_BLACK_90(){return"black-90"}static get BACKGROUND_BLACK_100(){return"black-100"}static get BACKGROUNDS(){return[u.BACKGROUND_WHITE,u.BACKGROUND_TRANSPARENT,u.BACKGROUND_BLACK_05,u.BACKGROUND_BLACK_90,u.BACKGROUND_BLACK_100]}static get STYLE_SUCCESS(){return"success"}static get STYLE_DANGER(){return"danger"}static get STYLE_DEFAULT(){return"default"}static get STYLES(){return[u.STYLE_SUCCESS,u.STYLE_DANGER,u.STYLE_DEFAULT]}static get FOCUSED_BY_MOUSE_CLASS(){return"ca-icon-button--focused-by-mouse"}on(o){this.tpl.bindDataAttributes(this,{icon:{type:String,allowed:u.ICONS,default:u.ICON_DEFAULT},label:{type:String,changed:()=>this.updateLabel()},size:{type:String,allowed:u.ICON_BUTTON_SIZES,default:u.ICON_BUTTON_SIZE_MEDIUM},style:{type:String,allowed:u.STYLES,default:u.STYLE_DEFAULT},background:{type:String,allowed:u.BACKGROUNDS,default:u.BACKGROUND_WHITE},isDisabled:{type:Boolean,changed:()=>this.updateIsDisabled()},isInProgress:{type:Boolean,changed:()=>this.renderIcon(!0)}}),this.renderStaticClasses(),this.renderIcon(),this.renderLabel(),this.updateIsDisabled(),this.bindClicked(),this.bindFocusedByMouse(),o()}renderStaticClasses(){this.$ctx.addClass(`
                ca-icon-button--size-${this.size}
                ca-icon-button--style-${this.style}--background-${this.background}
            `)}renderIcon(o=!1){const l=w((0,m.EY)(y,{icon:this.icon,size:this.size,isInProgress:this.isInProgress}));o?this.$ctx.find(".js-ca-icon-button__icon").replaceWith(w(l)):this.$ctx.append(l),window.application.sandbox.addModules(l)}renderLabel(){if(!this.label)return;const o=w((0,m.EY)(g,{label:this.label}));this.$ctx.append(o)}updateIsDisabled(){this.isDisabled?this.$ctx.prop("disabled",!0):this.$ctx.prop("disabled",!1)}bindClicked(){this.$ctx.on("click",o=>{o.preventDefault(),o.stopPropagation(),!this.isDisabled&&this.tpl.fireCustomEvent(this.$ctx,"iconButtonClicked")})}bindFocusedByMouse(){this.$ctx.on("mousedown",()=>{this.$ctx.addClass(u.FOCUSED_BY_MOUSE_CLASS)}),this.$ctx.on("focusout",()=>{this.$ctx.removeClass(u.FOCUSED_BY_MOUSE_CLASS)})}updateLabel(){const l=this.$ctx.find(".js-ca-icon-button__label").get(0);if(!l)throw new Error("Element not found.");l.innerHTML=this.label}}},26725:function(ve,$,r){"use strict";r.d($,{t:function(){return T}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(E,w,u)=>w in E?t(E,w,{enumerable:!0,configurable:!0,writable:!0,value:u}):E[w]=u,m=(E,w)=>{for(var u in w||(w={}))C.call(w,u)&&g(E,u,w[u]);if(_)for(var u of _(w))y.call(w,u)&&g(E,u,w[u]);return E};const T=(0,b.I)(E=>(0,s.jsx)("button",m({className:"mod mod-c-icon-button ca-icon-button"},E.tpl.renderDataAttributesAsObject(E))))},93791:function(ve,$,r){"use strict";r.d($,{l:function(){return Re}});var s=r(88804),b=r(50427),t=r(35717),_=r(9715),C=r(20220),y=r(91095),g=r(83545),m=r(67957),T=r(28700),E=r(3104),w=r(93789),u=r(76743),c=r(82116),o=r(42232),l=r(79094),p=r(59717),f=r(46160),O=r(37607),L=r(52191),P=r(47956),N=r(10765),S=r(1498),R=r(78633),U=r(97622),B=r(44411),M=r(35530),I=r(56978),F=r(93937),te=r(26834),fe=r(14161),Ie=r(62753),de=r(99185),q=r(32529),re=r(72269),me=r(43919),ie=r(6764),ee=r(82499),pe=r(81348),je=r(1997),Be=r(56464),Ne=r(55694),ce=r(34241),se=r(86370),ge=r(72817),$e=r(55339),et=r(20035),rt=r(16328),Qe=r(75947),it=r(88531),ct=r(98172),ft=r(27551),_s=r(29914),Bt=r(74450),gt=r(42441),Ct=r(87007),at=r(53578),Ht=r(49952),Vt=r(47400),Fs=r(93688),Hs=r(81498),Us=r(17711),ys=r(18734),Vs=r(7414),Oa=r(26215),nn=r(32237),Va=r(62707),hn=r(95387),Bs=r(99543),os=r(82764),ha=r(4353),Qn=r(61166),wn=r(33501),$s=r(35105),Ta=r(59721),Vn=r(56927),Xn=r(92700),Br=r(89543),Yr=r(25590),Rt=r(48755),Ze=r(69372),vt=r(88615),Et=r(55190),Ra=r(12980),qs=r(97838),gs=r(47497),xs=r(6580),Ye=r(20277),lt=r(41726),nt=r(46954),za=r(70773),kn=r(10721),Bn=r(77765),On=r(80072),jr=r(48326),Ln=r(85531),Er=r(24064),Si=r(49874),Ui=r(80745),fi=r(96303),As=r(88206),Zr=r(5793),Gt=r(31277),Qi=r(7807),Vi=r(66594),Fr=r(10120),Sa=r(27245),_r=r(74227),bn=r(80788),ji=r(32209),vn=r(70535),Yn=r(44302),$i=r(12389),Ur=r(5029),Vr=r(64171),Ei=r(81688),or=r(14319),En=r(54866),sa=r(61731),Qa=r(96094),vi=r(36613),Sr=r(65116),ua=r(57420),Wr=r(48274),$a=r(30224),rn=r(56792),In=r(28898),gr=r(73377),fn=r(37536),Ir=r(83255),fr=r(72390),Ii=r(51374),vr=r(49139),Pr=r(64729),Ee=r(41041),le=r(19229),he=r(8537),Oe=r(41109),St=r(87751),ma=r(60319),oa=r(58181),tn=r(27730),dn=r(1862),tr=r(72917),wi=r(63797),Pi=r(3813),ci=r(46261),zr=r(57432),sr=r(74123),ui=r(25196),Jr=r(64461),Yi=r(45045),ya=r(81710),yt=r(95498),We=r(14217),pt=r(82604),Es=r(28978),Ws=r(94701),Na=r(77352),on=r(82796),Gn=r(27853),Ci=r(36530),Qr=r(75068),rs=r(4212),wr=r(6808),Nr=r(50330),Xr=r(86943),Oi=r(93788),Ni=r(82895),Xi=r(1493),Zn=r(98880),pi=r(52400),xa=r(31663),br=r(70575),bi=r(59483),ki=r(78379),Lr=r(88102),Fn=r(72297),jo=r(88266),co=r(4265),Oo=r(84668),Ao=r(58845),To=r(88696),uo=r(31458),So=r(99949),Ai=r(277),hi=r(67096),si=r(27959),Li=r(93811),Me=r(70692),ue=r(40035),xe=r(19089),Pe=r(17290),Ge=r(83934),wt=r(59021),xt=r(55013),Tt=r(53396),Je=r(72212),tt=r(12386),ke=r(88433),Ft=r(52757),Wt=r(27305),qt=r(45379),Pt=r(2516),ls=r(71423),cs=r(13479),Ha=r(33690),Ya=r(31180),ca=r(57399),Js=r(17685),aa=r(29405),Fa=r(66431),_a=r(79487),zs=r(12923),Jt=r(3029),Ss=r(44335),hs=r(49400),fs=r(2988),js=r(52193),Wa=r(11865),Pn=r(36856),Cn=r(89278),Xa=r(90426),An=r(20454),qr=r(28400),Cr=r(67213),Or=r(36903),Di=r(23590),ai=r(19630),Bi=r(60119),mi=r(39123),_i=r(93662),Ys=r(30887),Ga=r(41761),Qs=r(5771),ga=r(47058),Kn=r(64177),lr=r(48293);const ln={academy:{component:t.default,filled:!1},actions:{component:_.default,filled:!1},activities:{component:C.default,filled:!1},activity:{component:y.default,filled:!1},add:{component:g.default,filled:!1},"add-simple":{component:m.default,filled:!1},"add-to-collection":{component:T.default,filled:!1},adobecreativecloud:{component:E.default,filled:!1},alert:{component:w.default,filled:!1},"align-bottom":{component:u.default,filled:!1},"align-center":{component:c.default,filled:!1},"align-left":{component:o.default,filled:!1},"align-middle":{component:l.default,filled:!1},"align-right":{component:p.default,filled:!1},"align-top":{component:f.default,filled:!1},analytics:{component:O.default,filled:!1},"analytics-bar":{component:L.default,filled:!1},"angle-down":{component:P.default,filled:!1},"animals-nature":{component:N.default,filled:!1},annotations:{component:S.default,filled:!1},appearance:{component:R.default,filled:!1},approve:{component:U.default,filled:!1},archive:{component:B.default,filled:!1},arrow:{component:M.default,filled:!1},"arrow-down":{component:I.default,filled:!1},"arrow-left":{component:F.default,filled:!1},"arrow-right":{component:te.default,filled:!1},"arrow-up":{component:fe.default,filled:!1},"arrow-up-and-down":{component:Ie.default,filled:!1},assets:{component:de.default,filled:!1},attachment:{component:q.default,filled:!1},"attention-filled":{component:re.default,filled:!0},attributes:{component:me.default,filled:!1},audio:{component:ie.default,filled:!1},"backward-5-seconds":{component:ee.default,filled:!1},bold:{component:pe.default,filled:!1},bookmark:{component:je.default,filled:!1},brand:{component:Be.default,filled:!1},briefing:{component:Ne.default,filled:!1},builder:{component:ce.default,filled:!1},buildings:{component:se.default,filled:!1},button:{component:ge.default,filled:!1},"button-filled":{component:ge.default,filled:!0},calendar:{component:$e.default,filled:!1},callout:{component:w.default,filled:!1},campaign:{component:et.default,filled:!1},"campaign-activity":{component:rt.default,filled:!1},cards:{component:Qe.default,filled:!1},"caret-down":{component:P.default,filled:!1},"caret-left":{component:it.default,filled:!1},"caret-right":{component:ct.default,filled:!1},"caret-up":{component:ft.default,filled:!1},center:{component:_s.default,filled:!1},check:{component:Bt.default,filled:!1},"check-filled":{component:U.default,filled:!0},circle:{component:gt.default,filled:!1},clockList:{component:Ct.default,filled:!1},collapse:{component:at.default,filled:!1},"collection-large":{component:Ht.default,filled:!1},"collection-medium":{component:Vt.default,filled:!1},"collection-small":{component:Fs.default,filled:!1},"color-scale":{component:Hs.default,filled:!1},"color-scale-small":{component:Us.default,filled:!1},"color-scall-tall":{component:ys.default,filled:!1},"color-swatch":{component:Vs.default,filled:!1},color:{component:Oa.default,filled:!1},"column-break":{component:nn.default,filled:!1},"copy-to-clipboard":{component:Va.default,filled:!1},crop:{component:hn.default,filled:!1},"cursor-clip":{component:Bs.default,filled:!1},cut:{component:os.default,filled:!1},dedent:{component:ha.default,filled:!1},"diagram-tree":{component:Qn.default,filled:!1},divider:{component:wn.default,filled:!1},"do-donts-strikethrough":{component:$s.default,filled:!1},"do-donts-underline":{component:Ta.default,filled:!1},document:{component:Vn.default,filled:!1},"document-library":{component:Xn.default,filled:!1},"dos-images":{component:Br.default,filled:!1},"dos-text":{component:Yr.default,filled:!1},"double-chevron-right":{component:Rt.default,filled:!1},"double-chevron-left":{component:Ze.default,filled:!1},download:{component:vt.default,filled:!1},"download-alternative":{component:Et.default,filled:!1},drop:{component:Oa.default,filled:!1},duplicate:{component:Ra.default,filled:!1},"emoji-happy":{component:qs.default,filled:!1},"emoji-happy-filled":{component:qs.default,filled:!0},"emoji-neutral":{component:gs.default,filled:!1},"emoji-neutral-filled":{component:gs.default,filled:!0},"emoji-unhappy":{component:xs.default,filled:!1},"emoji-unhappy-filled":{component:xs.default,filled:!0},eraser:{component:Ye.default,filled:!1},"eraser-filled":{component:Ye.default,filled:!1},expand:{component:lt.default,filled:!1},"external-asset":{component:nt.default,filled:!1},"external-link":{component:za.default,filled:!1},failed:{component:kn.default,filled:!1},feedback:{component:Bn.default,filled:!1},"figure-text-bottom":{component:On.default,filled:!1},"figure-text-left":{component:jr.default,filled:!1},"figure-text-right":{component:Ln.default,filled:!1},"figure-text-top":{component:Er.default,filled:!1},file:{component:Si.default,filled:!1},filetype:{component:Ui.default,filled:!1},"fit-to-screen":{component:_s.default,filled:!1},flags:{component:fi.default,filled:!1},"focal-point":{component:As.default,filled:!1},folder:{component:Zr.default,filled:!1},"folder-up":{component:Gt.default,filled:!1},font:{component:Qi.default,filled:!1},"font-kit":{component:Vi.default,filled:!1},"food-drink":{component:Fr.default,filled:!1},"forward-5-seconds":{component:Sa.default,filled:!1},"frequently-used":{component:_r.default,filled:!1},"full-width":{component:bn.default,filled:!1},filter:{component:ji.default,filled:!1},general:{component:vn.default,filled:!1},"generic-post":{component:Yn.default,filled:!1},guidelines:{component:$i.default,filled:!1},h:{component:Ur.default,filled:!1},header:{component:Vr.default,filled:!1},highlight:{component:Ei.default,filled:!1},"icon-and-text":{component:or.default,filled:!1},icons:{component:En.default,filled:!1},iframe:{component:sa.default,filled:!1},image:{component:Qa.default,filled:!1},"image-and-text":{component:vi.default,filled:!1},"image-figure":{component:Sr.default,filled:!1},"image-grid-2":{component:ua.default,filled:!1},"image-grid-3":{component:Wr.default,filled:!1},"image-grid-4":{component:$a.default,filled:!1},"image-library":{component:rn.default,filled:!1},"image-text-ratio-25":{component:In.default,filled:!1},"image-text-ratio-33":{component:gr.default,filled:!1},"image-text-ratio-50":{component:fn.default,filled:!1},"image-text-ratio-66":{component:Ir.default,filled:!1},"image-text-ratio-75":{component:fr.default,filled:!1},indent:{component:Ii.default,filled:!1},indesign:{component:vr.default,filled:!1},info:{component:Pr.default,filled:!1},integration:{component:Ee.default,filled:!1},interactions:{component:Bs.default,filled:!1},italic:{component:le.default,filled:!1},"layout-grid":{component:he.default,filled:!1},"layout-horizontal":{component:Oe.default,filled:!1},"layout-vertical":{component:St.default,filled:!1},lightning:{component:ma.default,filled:!1},"lightning-filled":{component:ma.default,filled:!0},"line-dashes":{component:oa.default,filled:!1},"line-dotted":{component:tn.default,filled:!1},"line-solid":{component:wn.default,filled:!1},"line-spacer":{component:dn.default,filled:!1},link:{component:tr.default,filled:!1},"link-alternative":{component:tr.default,filled:!1},"link-box":{component:nt.default,filled:!1},"link-open":{component:wi.default,filled:!1},"list-bullets":{component:Pi.default,filled:!1},"list-checklist":{component:ci.default,filled:!1},"list-indented":{component:zr.default,filled:!1},"list-numbers":{component:sr.default,filled:!1},lock:{component:ui.default,filled:!1},logo:{component:Jr.default,filled:!1},"logo-grid":{component:Yi.default,filled:!1},logout:{component:ya.default,filled:!1},"mark-area":{component:yt.default,filled:!1},measurements:{component:We.default,filled:!1},media:{component:pt.default,filled:!1},megamenu:{component:Es.default,filled:!1},metadata:{component:Pr.default,filled:!1},minus:{component:Ws.default,filled:!1},modules:{component:Na.default,filled:!1},more:{component:_.default,filled:!1},move:{component:on.default,filled:!1},"move-page":{component:Gn.default,filled:!1},none:{component:$s.default,filled:!1},notifications:{component:Ci.default,filled:!1},objects:{component:Qr.default,filled:!1},"open-lock":{component:rs.default,filled:!1},"open-lock-filled":{component:rs.default,filled:!0},orientation:{component:wr.default,filled:!1},"pattern-library":{component:Nr.default,filled:!1},pause:{component:Xr.default,filled:!1},pen:{component:Oi.default,filled:!1},"person-lock":{component:Ni.default,filled:!1},pills:{component:Xi.default,filled:!1},pin:{component:Zn.default,filled:!1},"pin-filled":{component:Zn.default,filled:!0},planning:{component:pi.default,filled:!1},play:{component:xa.default,filled:!1},plus:{component:m.default,filled:!1},"point-out":{component:br.default,filled:!1},polygon:{component:bi.default,filled:!1},processing:{component:ki.default,filled:!1},projects:{component:Lr.default,filled:!1},publication:{component:Fn.default,filled:!1},question:{component:jo.default,filled:!1},quote:{component:co.default,filled:!1},rectangle:{component:vn.default,filled:!1},refresh:{component:Oo.default,filled:!1},reject:{component:Ao.default,filled:!1},"reject-circle":{component:kn.default,filled:!1},"reject-filled":{component:kn.default,filled:!0},revert:{component:To.default,filled:!1},revisions:{component:uo.default,filled:!1},rocket:{component:So.default,filled:!1},search:{component:Ai.default,filled:!1},section:{component:Vr.default,filled:!1},settings:{component:hi.default,filled:!1},share:{component:si.default,filled:!1},"sidebar-right":{component:Li.default,filled:!1},"sidebar-right-show":{component:Me.default,filled:!1},"sidebar-right-hide-filled":{component:ue.default,filled:!0},"single-chevron-left":{component:it.default,filled:!1},"single-chevron-right":{component:ct.default,filled:!1},sketch:{component:xe.default,filled:!1},"smileys-people":{component:Pe.default,filled:!1},snippet:{component:Ge.default,filled:!1},spinner:{component:ki.default,filled:!1},star:{component:wt.default,filled:!1},"star-filled":{component:wt.default,filled:!0},storybook:{component:xt.default,filled:!1},strikethrough:{component:Tt.default,filled:!1},submit:{component:Je.default,filled:!1},subscript:{component:tt.default,filled:!1},superscript:{component:ke.default,filled:!1},symbols:{component:Ft.default,filled:!1},table:{component:Wt.default,filled:!1},tag:{component:qt.default,filled:!1},target:{component:M.default,filled:!1},team:{component:Pt.default,filled:!1},"team-o":{component:Pt.default,filled:!1},template:{component:ls.default,filled:!1},templates:{component:cs.default,filled:!1},text:{component:Ha.default,filled:!1},"text-align-center":{component:Ya.default,filled:!1},"text-align-left":{component:Ha.default,filled:!1},"text-align-right":{component:ca.default,filled:!1},"text-align-justify":{component:Js.default,filled:!1},"text-library":{component:aa.default,filled:!1},"text-multi-column":{component:Fa.default,filled:!1},"text-on-image":{component:_a.default,filled:!1},"text-snippet":{component:zs.default,filled:!1},timeline:{component:Jt.default,filled:!1},transfer:{component:Ss.default,filled:!1},trash:{component:hs.default,filled:!1},"travel-places":{component:fs.default,filled:!1},triangle:{component:js.default,filled:!1},truck:{component:Wa.default,filled:!1},twitter:{component:Pn.default,filled:!1},typography:{component:Cn.default,filled:!1},typostyles:{component:Xa.default,filled:!1},"ui-pattern":{component:sa.default,filled:!1},underline:{component:Ta.default,filled:!1},unknown:{component:jo.default,filled:!1},"unknown-simple":{component:An.default,filled:!1},upload:{component:qr.default,filled:!1},"upload-alternative":{component:Cr.default,filled:!1},"upload-do-image":{component:Or.default,filled:!1},"upload-dont-image":{component:Di.default,filled:!1},user:{component:ai.default,filled:!1},"user-o":{component:ai.default,filled:!1},video:{component:Bi.default,filled:!1},"video-and-text":{component:mi.default,filled:!1},"video-fullscreen":{component:lt.default,filled:!1},view:{component:_i.default,filled:!1},"view-slash":{component:Ys.default,filled:!1},vimeo:{component:Ga.default,filled:!1},"volume-off":{component:Qs.default,filled:!1},"volume-on":{component:ga.default,filled:!1},workflow:{component:Kn.default,filled:!1},zoom:{component:lr.default,filled:!1}},ss={xs:s.l.Size12,sm:s.l.Size16,md:s.l.Size20,lg:s.l.Size24,xl:s.l.Size32};class Re{static get SIZE_EXTRA_SMALL(){return"xs"}static get SIZE_SMALL(){return"sm"}static get SIZE_MEDIUM(){return"md"}static get SIZE_LARGE(){return"lg"}static get SIZE_EXTRA_LARGE(){return"xl"}static get ICONS(){return[Re.ICON_ACADEMY,Re.ICON_ACTIONS,Re.ICON_ACTIVITIES,Re.ICON_ACTIVITY,Re.ICON_ADD_SIMPLE,Re.ICON_ADD_TO_COLLECTION,Re.ICON_ADD,Re.ICON_ADOBECREATIVECLOUD,Re.ICON_ALIGN_BOTTOM,Re.ICON_ALIGN_CENTER,Re.ICON_ALIGN_LEFT,Re.ICON_ALIGN_MIDDLE,Re.ICON_ALIGN_RIGHT,Re.ICON_ALIGN_TOP,Re.ICON_ANALYTICS_BAR,Re.ICON_ANALYTICS,Re.ICON_ANGLE_DOWN,Re.ICON_ANIMALS_NATURE,Re.ICON_ANNOTATIONS,Re.ICON_APPEARANCE,Re.ICON_APPROVE,Re.ICON_ARCHIVE,Re.ICON_ARROW_DOWN,Re.ICON_ARROW_LEFT,Re.ICON_ARROW_RIGHT,Re.ICON_ARROW_UP,Re.ICON_ASSETS,Re.ICON_ATTACHMENT,Re.ICON_ATTENTION_FILLED,Re.ICON_ATTRIBUTES,Re.ICON_AUDIO,Re.ICON_BACKWARD_5_SECONDS,Re.ICON_BOOKMARK,Re.ICON_BRAND,Re.ICON_BRIEFING,Re.ICON_BUILDER,Re.ICON_CALENDAR,Re.ICON_CALLOUT,Re.ICON_CAMPAIGN_ACTIVITY,Re.ICON_CAMPAIGN,Re.ICON_CARDS,Re.ICON_CARET_DOWN,Re.ICON_CARET_LEFT,Re.ICON_CARET_RIGHT,Re.ICON_CARET_UP,Re.ICON_CENTER,Re.ICON_CHECK_FILLED,Re.ICON_CHECK,Re.ICON_CIRCLE,Re.ICON_COLLAPSE,Re.ICON_COLLECTION_LARGE,Re.ICON_COLLECTION_MEDIUM,Re.ICON_COLLECTION_SMALL,Re.ICON_COLOR_SCALE_SMALL,Re.ICON_COLOR_SCALE_TALL,Re.ICON_COLOR_SCALE,Re.ICON_COLOR_SWATCH,Re.ICON_COLORS,Re.ICON_COLUMN_BREAK,Re.ICON_COPY_TO_CLIPBOARD,Re.ICON_CROP,Re.ICON_CUT,Re.ICON_DIAGRAM_TREE,Re.ICON_DIVIDER,Re.ICON_DO_DONTS_STRIKETHROUGH,Re.ICON_DO_DONTS_UNDERLINE,Re.ICON_DOCUMENT_LIBRARY,Re.ICON_DOCUMENT,Re.ICON_DOS_IMAGES,Re.ICON_DOS_TEXT,Re.ICON_DOWNLOAD_ALTERNATIVE,Re.ICON_DOWNLOAD,Re.ICON_DROPS,Re.ICON_DUPLICATE_DETECTION,Re.ICON_DUPLICATE,Re.ICON_EMOJI_HAPPY_FILLED,Re.ICON_EMOJI_HAPPY,Re.ICON_EMOJI_NEUTRAL,Re.ICON_EMOJI_UNHAPPY_FILLED,Re.ICON_EMOJI_UNHAPPY,Re.ICON_EMPJI_NEUTRAL_FILLED,Re.ICON_EXCLAMATION_TRIANGLE_OUTLINE,Re.ICON_EXPAND,Re.ICON_EXTERNAL_ASSET,Re.ICON_EXTERNAL_LINK,Re.ICON_FEEDBACK,Re.ICON_FIGURE_TEXT_BOTTOM,Re.ICON_FIGURE_TEXT_LEFT,Re.ICON_FIGURE_TEXT_RIGHT,Re.ICON_FIGURE_TEXT_TOP,Re.ICON_FILE,Re.ICON_FILETYPE,Re.ICON_FILTER,Re.ICON_FIT_TO_SCREEN,Re.ICON_FLAGS,Re.ICON_FOCAL_POINT,Re.ICON_FOLDER_UP,Re.ICON_FOLDER,Re.ICON_FONT_KIT,Re.ICON_FONT,Re.ICON_FOOD_DRINK,Re.ICON_FORWARD_5_SECONDS,Re.ICON_FREQUENTLY_USED,Re.ICON_FULLWIDTH,Re.ICON_GENERAL,Re.ICON_GENERIC_POST,Re.ICON_GUIDELINES,Re.ICON_ICONS,Re.ICON_IFRAME,Re.ICON_IMAGE_FIGURE,Re.ICON_IMAGE_GRID_2,Re.ICON_IMAGE_GRID_3,Re.ICON_IMAGE_GRID_4,Re.ICON_IMAGE_LIBRARY,Re.ICON_IMAGE_TEXT_RATIO_25,Re.ICON_IMAGE_TEXT_RATIO_50,Re.ICON_IMAGE_TEXT_RATIO_75,Re.ICON_IMAGE,Re.ICON_INDESIGN,Re.ICON_INFO,Re.ICON_INTEGRATION,Re.ICON_INTEGRATIONS,Re.ICON_INTERACTIONS,Re.ICON_LIGHTNING_FILLED,Re.ICON_LIGHTNING,Re.ICON_LINK_ALTERNATIVE,Re.ICON_LINK_BOX,Re.ICON_LINK,Re.ICON_LIST,Re.ICON_LOCK,Re.ICON_LOGO_GRID,Re.ICON_LOGO,Re.ICON_LOGOUT,Re.ICON_MARK_AREA,Re.ICON_MEASUREMENTS,Re.ICON_MEDIA,Re.ICON_MEGAMENU,Re.ICON_METADATA,Re.ICON_MODULES,Re.ICON_MORE,Re.ICON_MOVE_PAGE,Re.ICON_MOVE,Re.ICON_NOTIFICATIONS,Re.ICON_OBJECTS,Re.ICON_OPEN_LOCK_FILLED,Re.ICON_OPEN_LOCK,Re.ICON_ORIENTATION,Re.ICON_PAINT_BRUSH,Re.ICON_PATTERN_LIBRARY,Re.ICON_PAUSE,Re.ICON_PEN,Re.ICON_PERSON_LOCK,Re.ICON_PILLS,Re.ICON_PIN_FILLED,Re.ICON_PIN,Re.ICON_PLANNING,Re.ICON_PLAY,Re.ICON_PLUS,Re.ICON_POINT_OUT,Re.ICON_POLYGON,Re.ICON_PROCESSING,Re.ICON_PROJECTS,Re.ICON_PUBLICATION,Re.ICON_QUOTE,Re.ICON_RECTANGLE,Re.ICON_REFRESH,Re.ICON_REJECT_CIRCLE,Re.ICON_REJECT_FILLED,Re.ICON_REJECT,Re.ICON_REVERT,Re.ICON_REVISIONS,Re.ICON_ROCKET,Re.ICON_SEARCH,Re.ICON_SECTION,Re.ICON_SETTINGS,Re.ICON_SHARE,Re.ICON_SIDE,Re.ICON_SKETCH,Re.ICON_SMILEYS_PEOPLE,Re.ICON_SNIPPET,Re.ICON_SPINNER,Re.ICON_STAR_FILLED,Re.ICON_STAR,Re.ICON_STORYBOOK,Re.ICON_SUBMIT,Re.ICON_SYMBOLS,Re.ICON_TABLE,Re.ICON_TAG,Re.ICON_TARGET,Re.ICON_TEAM_O,Re.ICON_TEAM,Re.ICON_TEMPLATE,Re.ICON_TEMPLATES,Re.ICON_TEXT_ALIGN_CENTER,Re.ICON_TEXT_ALIGN_JUSTIFY,Re.ICON_TEXT_ALIGN_RIGHT,Re.ICON_TEXT_LIBRARY,Re.ICON_TEXT_MULTI_COLUMN,Re.ICON_TEXT,Re.ICON_TEXTSNIPPET,Re.ICON_TIMELINE,Re.ICON_TRANSFER,Re.ICON_TRASH_OPEN,Re.ICON_TRASH,Re.ICON_TRAVEL_PLACES,Re.ICON_TRIANGLE,Re.ICON_TRUCK,Re.ICON_TYPOGRAPHY,Re.ICON_TYPOSTYLES,Re.ICON_UI_PATTERN,Re.ICON_UNKNOWN_SIMPLE,Re.ICON_UNKNOWN,Re.ICON_UPLOAD_ALTERNATIVE,Re.ICON_UPLOAD_DO_IMAGES,Re.ICON_UPLOAD_DONT_IMAGES,Re.ICON_UPLOAD,Re.ICON_USER_O,Re.ICON_USER,Re.ICON_VIDEO_FULLSCREEN,Re.ICON_VIDEO,Re.ICON_VIEW_SLASH,Re.ICON_VIEW,Re.ICON_VIMEO,Re.ICON_VOLUME_OFF,Re.ICON_VOLUME_ON,Re.ICON_WORKFLOW,Re.ICON_ZOOM]}static get ICON_ACADEMY(){return"academy"}static get ICON_ACTIONS(){return"actions"}static get ICON_ACTIVITIES(){return"activities"}static get ICON_ACTIVITY(){return"activity"}static get ICON_ADD_SIMPLE(){return"add-simple"}static get ICON_ADD_TO_COLLECTION(){return"add-to-collection"}static get ICON_ADD(){return"add"}static get ICON_ADOBECREATIVECLOUD(){return"adobecreativecloud"}static get ICON_ALIGN_BOTTOM(){return"align-bottom"}static get ICON_ALIGN_CENTER(){return"align-center"}static get ICON_ALIGN_LEFT(){return"align-left"}static get ICON_ALIGN_MIDDLE(){return"align-middle"}static get ICON_ALIGN_RIGHT(){return"align-right"}static get ICON_ALIGN_TOP(){return"align-top"}static get ICON_ANALYTICS_BAR(){return"analytics-bar"}static get ICON_ANALYTICS(){return"analytics"}static get ICON_ANGLE_DOWN(){return"angle-down"}static get ICON_ANIMALS_NATURE(){return"animals-nature"}static get ICON_ANNOTATIONS(){return"annotations"}static get ICON_APPEARANCE(){return"appearance"}static get ICON_APPROVE(){return"approve"}static get ICON_ARCHIVE(){return"archive"}static get ICON_ARROW_DOWN(){return"arrow-down"}static get ICON_ARROW_LEFT(){return"arrow-left"}static get ICON_ARROW_RIGHT(){return"arrow-right"}static get ICON_ARROW_UP(){return"arrow-up"}static get ICON_ASSETS(){return"assets"}static get ICON_ATTACHMENT(){return"attachment"}static get ICON_ATTENTION_FILLED(){return"attention-filled"}static get ICON_ATTRIBUTES(){return"attributes"}static get ICON_AUDIO(){return"audio"}static get ICON_BACKWARD_5_SECONDS(){return"backward-5-seconds"}static get ICON_BOOKMARK(){return"bookmark"}static get ICON_BRAND(){return"brand"}static get ICON_BRIEFING(){return"briefing"}static get ICON_BUILDER(){return"builder"}static get ICON_CALENDAR(){return"calendar"}static get ICON_CALLOUT(){return"callout"}static get ICON_CAMPAIGN_ACTIVITY(){return"campaign-activity"}static get ICON_CAMPAIGN(){return"campaign"}static get ICON_CARDS(){return"cards"}static get ICON_CARET_DOWN(){return"caret-down"}static get ICON_CARET_LEFT(){return"caret-left"}static get ICON_CARET_RIGHT(){return"caret-right"}static get ICON_CARET_UP(){return"caret-up"}static get ICON_CENTER(){return"center"}static get ICON_CHECK_FILLED(){return"check-filled"}static get ICON_CHECK(){return"check"}static get ICON_CIRCLE(){return"circle"}static get ICON_COLLAPSE(){return"collapse"}static get ICON_COLLECTION_LARGE(){return"collection-large"}static get ICON_COLLECTION_MEDIUM(){return"collection-medium"}static get ICON_COLLECTION_SMALL(){return"collection-small"}static get ICON_COLOR_SCALE_SMALL(){return"color-scale-small"}static get ICON_COLOR_SCALE_TALL(){return"color-scale-tall"}static get ICON_COLOR_SCALE(){return"color-scale"}static get ICON_COLOR_SWATCH(){return"color-swatch"}static get ICON_COLORS(){return"colors"}static get ICON_COLUMN_BREAK(){return"column-break"}static get ICON_COPY_TO_CLIPBOARD(){return"copy-to-clipboard"}static get ICON_CROP(){return"crop"}static get ICON_CUT(){return"cut"}static get ICON_DIAGRAM_TREE(){return"diagram-tree"}static get ICON_DIVIDER(){return"divider"}static get ICON_DO_DONTS_STRIKETHROUGH(){return"do-donts-strikethrough"}static get ICON_DO_DONTS_UNDERLINE(){return"do-donts-underline"}static get ICON_DOCUMENT_LIBRARY(){return"document-library"}static get ICON_DOCUMENT(){return"document"}static get ICON_DOS_IMAGES(){return"dos-images"}static get ICON_DOS_TEXT(){return"dos-text"}static get ICON_DOWNLOAD_ALTERNATIVE(){return"download-alternative"}static get ICON_DOWNLOAD(){return"download"}static get ICON_DROPS(){return"drops"}static get ICON_DUPLICATE_DETECTION(){return"duplicate-detection"}static get ICON_DUPLICATE(){return"duplicate"}static get ICON_EMOJI_HAPPY_FILLED(){return"emoji-happy-filled"}static get ICON_EMOJI_HAPPY(){return"emoji-happy"}static get ICON_EMOJI_NEUTRAL(){return"emoji-neutral"}static get ICON_EMOJI_UNHAPPY_FILLED(){return"emoji-unhappy-filled"}static get ICON_EMOJI_UNHAPPY(){return"emoji-unhappy"}static get ICON_EMPJI_NEUTRAL_FILLED(){return"empji-neutral-filled"}static get ICON_EXCLAMATION_TRIANGLE_OUTLINE(){return"exclamation-triangle-outline"}static get ICON_EXPAND(){return"expand"}static get ICON_EXTERNAL_ASSET(){return"external-asset"}static get ICON_EXTERNAL_LINK(){return"external-link"}static get ICON_FEEDBACK(){return"feedback"}static get ICON_FIGURE_TEXT_BOTTOM(){return"figure-text-bottom"}static get ICON_FIGURE_TEXT_LEFT(){return"figure-text-left"}static get ICON_FIGURE_TEXT_RIGHT(){return"figure-text-right"}static get ICON_FIGURE_TEXT_TOP(){return"figure-text-top"}static get ICON_FILE(){return"file"}static get ICON_FILETYPE(){return"filetype"}static get ICON_FILTER(){return"filter"}static get ICON_FIT_TO_SCREEN(){return"fit-to-screen"}static get ICON_FLAGS(){return"flags"}static get ICON_FOCAL_POINT(){return"focal-point"}static get ICON_FOLDER_UP(){return"folder-up"}static get ICON_FOLDER(){return"folder"}static get ICON_FONT_KIT(){return"font-kit"}static get ICON_FONT(){return"font"}static get ICON_FOOD_DRINK(){return"food-drink"}static get ICON_FORWARD_5_SECONDS(){return"forward-5-seconds"}static get ICON_FREQUENTLY_USED(){return"frequently-used"}static get ICON_FULLWIDTH(){return"fullwidth"}static get ICON_GENERAL(){return"general"}static get ICON_GENERIC_POST(){return"generic-post"}static get ICON_GUIDELINES(){return"guidelines"}static get ICON_ICONS(){return"icons"}static get ICON_IFRAME(){return"iframe"}static get ICON_IMAGE_FIGURE(){return"image-figure"}static get ICON_IMAGE_GRID_2(){return"image-grid-2"}static get ICON_IMAGE_GRID_3(){return"image-grid-3"}static get ICON_IMAGE_GRID_4(){return"image-grid-4"}static get ICON_IMAGE_LIBRARY(){return"image-library"}static get ICON_IMAGE_TEXT_RATIO_25(){return"image-text-ratio-25"}static get ICON_IMAGE_TEXT_RATIO_50(){return"image-text-ratio-50"}static get ICON_IMAGE_TEXT_RATIO_75(){return"image-text-ratio-75"}static get ICON_IMAGE(){return"image"}static get ICON_INDESIGN(){return"indesign"}static get ICON_INFO(){return"info"}static get ICON_INTEGRATION(){return"integration"}static get ICON_INTEGRATIONS(){return"integrations"}static get ICON_INTERACTIONS(){return"interactions"}static get ICON_LIGHTNING_FILLED(){return"lightning-filled"}static get ICON_LIGHTNING(){return"lightning"}static get ICON_LINK_ALTERNATIVE(){return"link-alternative"}static get ICON_LINK_BOX(){return"link-box"}static get ICON_LINK(){return"link"}static get ICON_LIST(){return"list"}static get ICON_LOCK(){return"lock"}static get ICON_LOGO_GRID(){return"logo-grid"}static get ICON_LOGO(){return"logo"}static get ICON_LOGOUT(){return"logout"}static get ICON_MARK_AREA(){return"mark-area"}static get ICON_MEASUREMENTS(){return"measurements"}static get ICON_MEDIA(){return"media"}static get ICON_MEGAMENU(){return"megamenu"}static get ICON_METADATA(){return"metadata"}static get ICON_MODULES(){return"modules"}static get ICON_MORE(){return"more"}static get ICON_MOVE_PAGE(){return"move-page"}static get ICON_MOVE(){return"move"}static get ICON_NOTIFICATIONS(){return"notifications"}static get ICON_OBJECTS(){return"objects"}static get ICON_OPEN_LOCK_FILLED(){return"open-lock-filled"}static get ICON_OPEN_LOCK(){return"open-lock"}static get ICON_ORIENTATION(){return"orientation"}static get ICON_PAINT_BRUSH(){return"paint-brush"}static get ICON_PATTERN_LIBRARY(){return"pattern-library"}static get ICON_PAUSE(){return"pause"}static get ICON_PEN(){return"pen"}static get ICON_PERSON_LOCK(){return"person-lock"}static get ICON_PILLS(){return"pills"}static get ICON_PIN_FILLED(){return"pin-filled"}static get ICON_PIN(){return"pin"}static get ICON_PLANNING(){return"planning"}static get ICON_PLAY(){return"play"}static get ICON_PLUS(){return"plus"}static get ICON_POINT_OUT(){return"point-out"}static get ICON_POLYGON(){return"polygon"}static get ICON_PROCESSING(){return"processing"}static get ICON_PROJECTS(){return"projects"}static get ICON_PUBLICATION(){return"publication"}static get ICON_QUOTE(){return"quote"}static get ICON_RECTANGLE(){return"rectangle"}static get ICON_REFRESH(){return"refresh"}static get ICON_REJECT_CIRCLE(){return"reject-circle"}static get ICON_REJECT_FILLED(){return"reject-filled"}static get ICON_REJECT(){return"reject"}static get ICON_REVERT(){return"revert"}static get ICON_REVISIONS(){return"revisions"}static get ICON_ROCKET(){return"rocket"}static get ICON_SEARCH(){return"search"}static get ICON_SECTION(){return"section"}static get ICON_SETTINGS(){return"settings"}static get ICON_SHARE(){return"share"}static get ICON_SIDE(){return"side"}static get ICON_SKETCH(){return"sketch"}static get ICON_SMILEYS_PEOPLE(){return"smileys-people"}static get ICON_SNIPPET(){return"snippet"}static get ICON_SPINNER(){return"spinner"}static get ICON_STAR_FILLED(){return"star-filled"}static get ICON_STAR(){return"star"}static get ICON_STORYBOOK(){return"storybook"}static get ICON_SUBMIT(){return"submit"}static get ICON_SYMBOLS(){return"symbols"}static get ICON_TABLE(){return"table"}static get ICON_TAG(){return"tag"}static get ICON_TARGET(){return"target"}static get ICON_TEAM_O(){return"team-o"}static get ICON_TEAM(){return"team"}static get ICON_TEMPLATE(){return"template"}static get ICON_TEMPLATES(){return"templates"}static get ICON_TEXT_ALIGN_CENTER(){return"text-align-center"}static get ICON_TEXT_ALIGN_JUSTIFY(){return"text-align-justify"}static get ICON_TEXT_ALIGN_RIGHT(){return"text-align-right"}static get ICON_TEXT_LIBRARY(){return"text-library"}static get ICON_TEXT_MULTI_COLUMN(){return"text-multi-column"}static get ICON_TEXT(){return"text"}static get ICON_TEXTSNIPPET(){return"textsnippet"}static get ICON_TIMELINE(){return"timeline"}static get ICON_TRANSFER(){return"transfer"}static get ICON_TRASH_OPEN(){return"trash-open"}static get ICON_TRASH(){return"trash"}static get ICON_TRAVEL_PLACES(){return"travel-places"}static get ICON_TRIANGLE(){return"triangle"}static get ICON_TRUCK(){return"truck"}static get ICON_TYPOGRAPHY(){return"typography"}static get ICON_TYPOSTYLES(){return"typostyles"}static get ICON_UI_PATTERN(){return"ui-pattern"}static get ICON_UNKNOWN_SIMPLE(){return"unknown-simple"}static get ICON_UNKNOWN(){return"unknown"}static get ICON_UPLOAD_ALTERNATIVE(){return"upload-alternative"}static get ICON_UPLOAD_DO_IMAGES(){return"upload-do-images"}static get ICON_UPLOAD_DONT_IMAGES(){return"upload-dont-images"}static get ICON_UPLOAD(){return"upload"}static get ICON_USER_O(){return"user-o"}static get ICON_USER(){return"user"}static get ICON_VIDEO_FULLSCREEN(){return"video-fullscreen"}static get ICON_VIDEO(){return"video"}static get ICON_VIEW_SLASH(){return"view-slash"}static get ICON_VIEW(){return"view"}static get ICON_VIMEO(){return"vimeo"}static get ICON_VOLUME_OFF(){return"volume-off"}static get ICON_VOLUME_ON(){return"volume-on"}static get ICON_WORKFLOW(){return"workflow"}static get ICON_ZOOM(){return"zoom"}static renderIconComponent(cr,Dr){try{const Gr=ln[cr]?ln[cr].component:ln.icons.component;return(0,b.EY)(Gr,{size:Dr?ss[Dr]:ss.md,filled:ln[cr]&&ln[cr].filled?ln[cr].filled.toString():void 0})}catch(Gr){return console.error(Gr),""}}}},78149:function(ve,$,r){"use strict";r.d($,{V:function(){return C}});var s=r(86070),b=r(95376),t=r(14154),_=r(93791);const C=(0,t.I)(y=>{const g={icon:{type:String,value:y.icon},size:{type:String,value:y.size,allowed:[_.l.SIZE_EXTRA_SMALL,_.l.SIZE_SMALL,_.l.SIZE_MEDIUM,_.l.SIZE_LARGE,_.l.SIZE_EXTRA_LARGE],default:_.l.SIZE_SMALL},classes:{type:String,value:y.classes}},{icon:m,size:T,classes:E}=y.utils.data.validateParameters(g);return(0,s.jsx)("span",{"data-test-id":`icon-${m}`,className:`ca-icon ca-icon--${T} ${E||""}`,children:(0,b.Ay)(_.l.renderIconComponent(m,T))})})},11920:function(ve,$,r){"use strict";r.d($,{t:function(){return _}});var s=r(18216),b=r(12882),t=r(5181);class _ extends s.j{static get PIXEL_DENSITY_1(){return 1}static get PIXEL_DENSITY_2(){return 2}static get ALIGNMENT_CENTER(){return"center"}static get ALIGNMENT_LEFT(){return"left"}static get ALIGNMENT_RIGHT(){return"right"}on(y){this.bindAttributes(),this.updateAlignment(),this.updateRoundedCorners(),this.startInitialSrcUpdate(),this.registerResizeHandler(),this.loadedWidth=null,this.hasFallbackWith=!1,y()}stop(){this.unregisterResizeHandler()}startInitialSrcUpdate(){const y=this.$ctx.get(0);if(!y)throw new Error("Element not found.");y.onload=()=>{y.onload=null,this.updateSrc()},this.$ctx.on("error",()=>{this.updateSrc()})}bindAttributes(){this.tpl.bindDataAttributes(this,{originalWidth:{type:Number},originalHeight:{type:Number},pixelDensity:{type:Number,changed:()=>this.updatePixelDensity()},allowShrinkingToIncreaseDensity:{type:Boolean,default:!0},allowReloadingSmallerImages:{type:Boolean,default:!1},previewUrl:{type:String},alignment:{type:String,changed:()=>this.updateAlignment()},roundedCorners:{type:Boolean},forceSrcUpdate:{type:Number,changed:()=>this.updateSrc()}})}updatePixelDensity(){this.hasFallbackWith===!0&&(this.originalWidth=null),this.updateSrc()}updateSrc(){this.originalWidth||(this.hasFallbackWith=!0,this.originalWidth=798*this.pixelDensity),this.isFileTypeImage(this.previewUrl)?this.$ctx.css("width",""):this.allowShrinkingToIncreaseDensity&&this.$ctx.css("width",this.originalWidth/this.pixelDensity);const m=Math.round(this.$ctx.width())*this.pixelDensity;if(this.loadedWidth===m||this.allowReloadingSmallerImages===!1&&this.loadedWidth>m)return;const T=this.getSrcUrlByWidth(this.previewUrl,m);this.$ctx.attr("data-src",T),this.loadedWidth=m,this.$ctx.hasClass("lazyloaded")&&this.$ctx.addClass("lazyload--no-transition"),this.$ctx.removeClass("lazyloaded"),this.$ctx.addClass("lazyload")}isFileTypeImage(y){return!!y.match(/file-.*\.svg/)}getSrcUrlByWidth(y,g){if(!g)return y;const m=y.split("?");let T={};m.length>1&&(T=(0,b.j)(m[1])),T.width=g;const E=decodeURI(t.param(T));return`${m[0]}?${E}`}updateAlignment(){this.$ctx.toggleClass("c-image--alignement-left",this.alignment===_.ALIGNMENT_LEFT),this.$ctx.toggleClass("c-image--alignement-center",this.alignment===_.ALIGNMENT_CENTER),this.$ctx.toggleClass("c-image--alignement-right",this.alignment===_.ALIGNMENT_RIGHT)}updateRoundedCorners(){this.$ctx.toggleClass("c-image--rounded-corners",this.roundedCorners)}registerResizeHandler(){t(window).on("resize.cimage",t.debounce(1e3,()=>{this.updateSrc()}))}unregisterResizeHandler(){t(window).off("resize.cimage")}}},4957:function(ve,$,r){"use strict";r.d($,{T:function(){return t}});var s=r(86070),b=r(14154);const t=(0,b.I)(_=>(0,s.jsxs)("div",{className:`ca-loader ${_.classes||""}`,children:[(0,s.jsx)("img",{className:"ca-loader__spinner",src:"/img/nook-animated.png",alt:window.translate("Legacy_loader_alt_text")}),_.text?(0,s.jsx)("div",{className:"ca-loader__text",children:_.text}):null]}))},8609:function(ve,$,r){"use strict";r.d($,{$:function(){return u}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.defineProperties,C=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,T=(c,o,l)=>o in c?t(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,E=(c,o)=>{for(var l in o||(o={}))g.call(o,l)&&T(c,l,o[l]);if(y)for(var l of y(o))m.call(o,l)&&T(c,l,o[l]);return c},w=(c,o)=>_(c,C(o));const u=(0,b.I)(c=>(0,s.jsxs)("div",w(E({className:"mod mod-progress a-progress"},c.id?{"data-a-progress-id":c.id}:{}),{children:[(0,s.jsxs)("svg",{viewBox:"0 0 32 32",children:[(0,s.jsx)("circle",{className:"a-progress__progress js-a-progress__progress",r:"16",cx:"16",cy:"16"}),(0,s.jsx)("circle",{className:"a-progress__inner",r:"14",cx:"16",cy:"16"})]}),(0,s.jsx)("span",{className:"a-progress__text js-a-progress__text",children:"000"})]})))},97711:function(ve,$,r){"use strict";r.d($,{X:function(){return u}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.defineProperties,C=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,T=(c,o,l)=>o in c?t(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,E=(c,o)=>{for(var l in o||(o={}))g.call(o,l)&&T(c,l,o[l]);if(y)for(var l of y(o))m.call(o,l)&&T(c,l,o[l]);return c},w=(c,o)=>_(c,C(o));const u=(0,b.I)(c=>(0,s.jsxs)("label",{className:`ca-radio ${c.tpl.mapModifiers("ca-radio--",c.modifier)} ${c.classes||""}`,children:[(0,s.jsx)("input",w(E(E({type:"radio"},c.checked?{checked:!0}:{}),c.disabled?{disabled:!0}:{}),{name:c.name,className:`ca-radio__radio ${c.inputClasses||""}`,value:c.value})),(0,s.jsx)("span",{className:"ca-radio__bubble"}),c.label?(0,s.jsx)("span",{className:`ca-radio__label ${c.disabled?" ca-radio__label--disabled":""}`,children:c.label}):null]}))},29298:function(ve,$,r){"use strict";r.d($,{N:function(){return t}});var s=r(86070),b=r(14154);const t=(0,b.I)(_=>(0,s.jsx)("audio",{className:"cm-audio__player",src:_.generic_url,preload:"metadata",controls:!0,controlsList:"nodownload",children:window.translate("Legacy_audio_player_no_support")}))},30287:function(ve,$,r){"use strict";r.d($,{Q:function(){return L}});var s=r(86070),b=r(93791),t=r(78149),_=r(14154);const C=(0,_.I)(()=>(0,s.jsx)("div",{className:"cm-setting cm-setting--padding-4x-5x block-asset-settings__asset-chooser-container",children:(0,s.jsxs)("div",{className:"block-asset-settings__asset-chooser js-block-asset-settings__asset-chooser",children:[(0,s.jsx)(t.V,{icon:"image-library",size:b.l.SIZE_MEDIUM}),(0,s.jsx)("span",{className:"block-asset-settings__asset-choose-button-text",children:window.translate("Legacy_block_settings_image_replace")})]})}));var y=r(79485),g=r(23189),m=r(14763),T=r(14587),E=r(52939);const w=(0,_.I)(P=>(0,s.jsxs)(s.Fragment,{children:[P.show.horizontalAlignment?(0,s.jsx)(E.x,{id:P.ids.horizontalAlignment,label:window.translate("Legacy_block_settings_image_alignment"),options:[{value:m.x.HORIZONTAL_ALIGNMENT_LEFT,name:window.translate("Legacy_block_settings_image_alignment_left")},{value:m.x.HORIZONTAL_ALIGNMENT_MIDDLE,name:window.translate("Legacy_block_settings_image_alignment_middle")},{value:m.x.HORIZONTAL_ALIGNMENT_RIGHT,name:window.translate("Legacy_block_settings_image_alignment_right")}],value:P.values.horizontalAlignment}):null,P.show.backgroundColor?(0,s.jsx)(T.X,{id:P.ids.backgroundColor,picker:!0,palette:P.themeStyleguideId,label:window.translate("Legacy_block_settings_background_color"),value:P.values.backgroundColor}):null,P.show.width?(0,s.jsx)(g.t,{id:P.ids.width,label:window.translate("Legacy_block_settings_image_width"),type:"unit",placeholder:window.translate("Legacy_block_settings_image_width_placeholder"),value:P.values.width}):null,P.show.padding?(0,s.jsx)(y.l,{id:P.ids.padding,value:P.values.padding}):null]}));var u=r(37522),c=r(77007),o=r(50427),l=r(18216),p=r(34933),f=r(39232),O=r(5181);class L extends l.j{static get SETTING_PADDING(){return"padding"}static get SETTING_BACKGROUND_COLOR(){return"backgroundColor"}static get SETTING_HORIZONTAL_ALIGNMENT(){return"horizontalAlignment"}static get SETTING_WIDTH(){return"width"}static get SETTING_HEIGHT(){return"height"}static get SETTING_IMAGE_ALIGNMENT(){return"imageAlignment"}static get SETTINGS(){return[L.SETTING_IMAGE_ALIGNMENT,L.SETTING_PADDING,L.SETTING_BACKGROUND_COLOR,L.SETTING_HORIZONTAL_ALIGNMENT,L.SETTING_WIDTH,L.SETTING_HEIGHT]}on(N){this.sandbox.subscribe("events",this),this.tpl.bindDataAttributes(this,{blockId:{type:Number},themeStyleguideId:{type:Number},brandId:{type:Number},assetId:{type:Number},settingImageAlignment:{type:String},settingPadding:{type:Object},settingBackgroundColor:{type:String},settingHorizontalAlignment:{type:String},settingWidth:{type:String},settingHeight:{type:String},activateSettings:{type:Object}}),this.renderAssetChanger(),this.renderSettings(),this.settings=new f.D(this.$ctx,this.sandbox),this.bindAssetChanger(),this.isActivated(L.SETTING_IMAGE_ALIGNMENT)&&this.bindImageAlignment(),this.isActivated(L.SETTING_PADDING)&&this.bindPadding(),this.isActivated(L.SETTING_BACKGROUND_COLOR)&&this.bindBackgroundColor(),this.isActivated(L.SETTING_HORIZONTAL_ALIGNMENT)&&this.bindHorizontalAlignment(),this.isActivated(L.SETTING_WIDTH)&&this.bindWidth(),this.isActivated(L.SETTING_HEIGHT)&&this.bindHeight(),N()}renderAssetChanger(){const N=O((0,o.EY)(C));this.$ctx.append(N),window.application.sandbox.addModules(N)}renderSettings(){const N={},S={};for(const U of L.SETTINGS)this.isActivated(U)?(N[U]=!0,S[U]=this.getGenericSettingId(U)):N[U]=!1;const R=O((0,o.EY)(w,{show:N,ids:S,values:{padding:this.getPaddingsWithUnits(this.settingPadding),backgroundColor:this.settingBackgroundColor,horizontalAlignment:this.getHorizontalAlignment(),width:this.getWidth(),height:this.getHeight(),imageAlignment:this.getImageAlignment()},themeStyleguideId:this.themeStyleguideId}));this.$ctx.append(R),window.application.sandbox.addModules(R)}getPaddingsWithUnits(N){const S={};for(const R of Object.keys(N))S[R]=`${N[R]}px`;return S}bindAssetChanger(){this.bindAssetChooser()}bindAssetChooser(){this.$ctx.find(".js-block-asset-settings__asset-chooser").on("click",()=>this.openAssetChooser())}bindImageAlignment(){this.registerSaveEvent("imageAlignment")}bindPadding(){this.registerSaveEvent("padding")}bindBackgroundColor(){this.registerSaveEvent("backgroundColor")}bindHorizontalAlignment(){this.registerSaveEvent("horizontalAlignment")}bindWidth(){this.registerSaveEvent("width")}bindHeight(){this.registerSaveEvent("height")}openAssetChooser(){const N=[{key:"ext",values:(0,p.F6)()}];c.y.isNumber(this.assetId)&&N.push({key:"id",values:[this.assetId],inverted:!0}),this.fire("openModal",{modifier:"flex",$content:(0,o.EY)(u.l,{externalData:{id:this.getIdentifier()},multiSelectionAllowed:!1,brandId:this.brandId,filters:N})},["events"])}onAssetChooserAssetChosen(N){!N||!N.externalData||N.externalData.id!==this.getIdentifier()||(this.fire("closeModal",["events"]),!(!N.screenIds||N.screenIds.length===0)&&(this.tpl.fireCustomEvent(this,"blockSettingDropdownClosed"),this.tpl.fireCustomEvent(this,"blockAssetSettingsAssetChosen",{assetId:N.screenIds[0]})))}registerSaveEvent(N){const S=this.getGenericSettingId(N),R=this.settings.getSetting(S);R.saved=U=>{this.tpl.fireCustomEvent(this,"blockSettingsSaved",{name:N,value:U[S]})}}getHorizontalAlignment(){return m.x.HORIZONTAL_ALIGNMENTS.includes(this.settingHorizontalAlignment)?this.settingHorizontalAlignment:m.x.HORIZONTAL_ALIGNMENT_MIDDLE}getWidth(){return this.settingWidth?this.settingWidth:"auto"}getHeight(){return this.settingHeight?this.settingHeight:"auto"}getIdentifier(){return`block-asset-settings-${this.id}`}getGenericSettingId(N){return`settings-${N}-${this.blockId}`}getImageAlignment(){return m.x.IMAGE_ALIGNMENTS.includes(this.settingImageAlignment)?this.settingImageAlignment:m.x.IMAGE_ALIGNMENT_LEFT}isActivated(N){return this.activateSettings.includes(N)}}},14763:function(ve,$,r){"use strict";r.d($,{x:function(){return o}});var s=r(86070),b=r(14154),t=r(98134);const _=(0,b.I)(l=>(0,s.jsx)("div",{className:`cm-block-asset__asset js-cm-block-asset__asset ${l.settingImageAlignmentClass}`,children:(0,s.jsx)(t.R,{asset:l.asset,fullSize:!0,maxWidth:1200})}));var C=r(93791),y=r(78149);const g=(0,b.I)(l=>{const p=l.errorCode&&l.errorCode>=400;return(0,s.jsx)("div",{className:`cm-block-asset__asset-placeholder js-cm-block-asset__asset-placeholder ${l.editMode||p?"":"cm-block-asset__asset-placeholder--hidden"} ${l.editMode?"cm-block-asset__asset-placeholder--edit-mode":""}`,children:(0,s.jsxs)("div",{className:`cm-block-asset__asset-chooser ${l.modifier} js-cm-block-asset__asset-chooser`,children:[l.errorCode&&l.errorCode>=400?(0,s.jsx)("div",{className:"cm-block-asset__asset-chooser-warning",children:window.translate("Legacy_block_asset_warning_unavailable")}):null,(0,s.jsx)("div",{className:"cm-block-asset__asset-choose-icon",children:(0,s.jsx)(y.V,{icon:"image-library",size:C.l.SIZE_MEDIUM})}),(0,s.jsx)("span",{className:"cm-block-asset__asset-chooser-button",children:window.translate("Legacy_assetchooser_choose_button")})]})})});var m=r(37522),T=r(29835),E=r(50427),w=r(18216),u=r(34933),c=r(5181);class o extends w.j{static get HORIZONTAL_ALIGNMENT_LEFT(){return"left"}static get HORIZONTAL_ALIGNMENT_MIDDLE(){return"middle"}static get HORIZONTAL_ALIGNMENT_RIGHT(){return"right"}static get HORIZONTAL_ALIGNMENTS(){return[o.HORIZONTAL_ALIGNMENT_LEFT,o.HORIZONTAL_ALIGNMENT_MIDDLE,o.HORIZONTAL_ALIGNMENT_RIGHT]}static get IMAGE_ALIGNMENT_LEFT(){return"left"}static get IMAGE_ALIGNMENT_MIDDLE(){return"middle"}static get IMAGE_ALIGNMENT_RIGHT(){return"right"}static get IMAGE_ALIGNMENTS(){return[o.IMAGE_ALIGNMENT_LEFT,o.IMAGE_ALIGNMENT_MIDDLE,o.IMAGE_ALIGNMENT_RIGHT]}static get SIZE_MODIFIER_HEIGHT_LG(){return"SIZE_MODIFIER_HEIGHT_LG"}static get SIZE_MODIFIER_HEIGHT_XL(){return"SIZE_MODIFIER_HEIGHT_XL"}static get SIZES(){return[o.SIZE_MODIFIER_HEIGHT_LG,o.SIZE_MODIFIER_HEIGHT_XL]}on(p){this.sandbox.subscribe("events",this),this.tpl.bindDataAttributes(this,{isEditing:{type:Boolean,changed:()=>this.updateIsEditing()},size:{type:String,allowed:o.SIZES},asset:{type:Object,changed:f=>this.updateAsset(f)},error:{type:Object},brandId:{type:Number},settingImageAlignment:{type:String,changed:f=>this.updateSettingImageAlignment(f)},settingPadding:{type:Object,changed:()=>this.updateSettingPadding()},settingWidth:{type:String,changed:()=>this.updateSettingWidth()},settingHeight:{type:String,changed:()=>this.updateSettingHeight()},settingHorizontalAlignment:{type:String,changed:f=>this.updateSettingHorizontalAlignment(f)},settingBackgroundColor:{type:String,changed:()=>this.updateSettingBackgroundColor()}}),this.$box=this.$ctx.find(".js-cm-block-asset__box"),this.updateSettingPadding(),this.updateSettingWidth(),this.updateSettingHeight(),this.updateSettingHorizontalAlignment(),this.updateSettingBackgroundColor(),this.hasAsset()?this.renderAsset():this.renderNoAsset(),p()}removeAsset(){window.application.sandbox.removeModules(this.$box.children()),this.$box.empty()}removeNoAsset(){const p=this.$ctx.find(".js-cm-block-asset__asset-placeholder");p.length!==0&&(window.application.sandbox.removeModules(p),p.remove())}renderAsset(){const p=c((0,E.EY)(_,{asset:this.asset,settingImageAlignmentClass:this.getImageAlignmentClass(this.settingImageAlignment)}));this.$box.append(p),window.application.sandbox.addModules(p)}renderNoAsset(){this.renderAssetChanger(),this.bindAssetChanger()}renderAssetChanger(){let p;switch(this.size){case o.SIZE_MODIFIER_HEIGHT_XL:p="cm-block-asset__asset-chooser--xl";break;default:p="cm-block-asset__asset-chooser--lg"}const f=c((0,E.EY)(g,{modifier:p,editMode:this.isEditing,errorCode:this.error&&this.error.code?this.error.code:null}));this.$ctx.append(f),window.application.sandbox.addModules(f)}bindAssetChanger(){this.$ctx.find(".js-cm-block-asset__asset-chooser").on("click",()=>this.openAssetChooser())}updateIsEditing(){this.updateAssetChanger()}updateAsset({previousValue:p,currentValue:f}){if(p&&f){const O=this.$box.find(".js-cm-block-asset__asset");T.u.getFirstChildModule(O).$ctx.dataAsObject("asset",this.asset)}else!p&&f?(this.removeNoAsset(),this.removeAsset(),this.renderAsset()):(this.removeAsset(),this.renderNoAsset())}updateAssetChanger(){const p=this.$ctx.find(".js-cm-block-asset__asset-placeholder"),f="cm-block-asset__asset-placeholder--hidden",O="cm-block-asset__asset-placeholder--edit-mode";if(this.isEditing){p.addClass(O),p.removeClass(f);return}if(p.removeClass(O),this.error&&this.error.code>=400){p.removeClass(f);return}p.addClass(f)}updateSettingPadding(){this.hasAsset()&&this.$box.css("padding",this.getPadding())}updateSettingWidth(){this.hasAsset()&&this.$box.css("flex",this.getWidth())}updateSettingHeight(){this.hasAsset()&&this.$box.css("height",this.getHeight())}updateSettingHorizontalAlignment({previousValue:p=null}={}){if(this.hasAsset()){if(p){const f=this.getHorizontalAlignmentClass(p);this.$ctx.removeClass(f)}this.$ctx.addClass(this.getHorizontalAlignmentClass(this.settingHorizontalAlignment))}}updateSettingImageAlignment({previousValue:p=null}={}){if(!this.hasAsset())return;const f=this.$ctx.find(".js-cm-block-asset__asset");if(p){const O=this.getImageAlignmentClass(p);f.removeClass(O)}f.addClass(this.getImageAlignmentClass(this.settingImageAlignment))}updateSettingBackgroundColor(){this.hasAsset()&&this.$box.css("background-color",this.getBackgroundColor())}openAssetChooser(){this.isEditing&&this.fire("openModal",{modifier:"flex",$content:(0,E.EY)(m.l,{externalData:{id:this.getIdentifier()},multiSelectionAllowed:!1,brandId:this.brandId,filters:[{key:"ext",values:(0,u.F6)()}]})},["events"])}onAssetChooserAssetChosen(p){!p||!p.externalData||p.externalData.id!==this.getIdentifier()||(this.fire("closeModal",["events"]),!(!p.screenIds||p.screenIds.length===0)&&this.tpl.fireCustomEvent(this,"blockAssetAssetChosen",{assetId:p.screenIds[0]}))}hasAsset(){return!!this.asset}getIdentifier(){return`block-asset-${this.id}`}getPadding(){const{top:p,right:f,bottom:O,left:L}=this.settingPadding;return`${this.tpl.unit(p)} ${this.tpl.unit(f)} ${this.tpl.unit(O)} ${this.tpl.unit(L)}`}getWidth(){const p=this.tpl.unit(this.settingWidth);let f=this.tpl.unit(this.settingPadding.left),O=this.tpl.unit(this.settingPadding.right);return p==="auto"||p===0?"1 1 auto":(f===0&&(f="0px"),O===0&&(O="0px"),`0 1 calc(${p} - ${f} - ${O})`)}getHeight(){const p=this.tpl.unit(this.settingHeight);let f=this.tpl.unit(this.settingPadding.top),O=this.tpl.unit(this.settingPadding.bottom);return p==="auto"||p===0?"auto":(f===0&&(f="0px"),O===0&&(O="0px"),`calc(${p} - ${f} - ${O})`)}getHorizontalAlignmentClass(p){switch(p){case o.HORIZONTAL_ALIGNMENT_LEFT:return"cm-block-asset--horizontal-alignment-left";case o.HORIZONTAL_ALIGNMENT_RIGHT:return"cm-block-asset--horizontal-alignment-right";default:return"cm-block-asset--horizontal-alignment-middle"}}getImageAlignmentClass(p){switch(p){case o.IMAGE_ALIGNMENT_MIDDLE:return"cm-block-asset__asset--image-alignment-middle";case o.IMAGE_ALIGNMENT_RIGHT:return"cm-block-asset__asset--image-alignment-right";default:return"cm-block-asset__asset--image-alignment-left"}}getBackgroundColor(){return this.settingBackgroundColor}}},29270:function(ve,$,r){"use strict";r.d($,{M:function(){return t}});var s=r(86070),b=r(14154);const t=(0,b.I)(_=>(0,s.jsx)("div",{className:"mod mod-m-block-asset cm-block-asset","data-is-editing":_.isEditing,"data-asset":_.asset?JSON.stringify(_.asset):void 0,"data-error":_.error?JSON.stringify(_.error):void 0,"data-brand-id":_.brandId,"data-setting-image-alignment":_.settingImageAlignment,"data-setting-padding":_.settingPadding?JSON.stringify(_.settingPadding):void 0,"data-setting-width":_.settingWidth,"data-setting-height":_.settingHeight,"data-setting-horizontal-alignment":_.settingHorizontalAlignment,"data-setting-background-color":_.settingBackgroundColor,children:(0,s.jsx)("div",{className:"cm-block-asset__box js-cm-block-asset__box"})}))},46142:function(ve,$,r){"use strict";r.d($,{u:function(){return c}});var s=r(86070),b=r(14587),t=r(52939),_=r(79485),C=r(23189),y=r(14154),g=r(20420);const m=(0,y.I)(o=>(0,s.jsxs)(s.Fragment,{children:[o.show.style?(0,s.jsx)(t.x,{id:o.ids.style,label:window.translate("Legacy_block_divider_settings_style"),options:[{value:"noline",name:window.translate("Legacy_block_divider_settings_style_no_line")},{value:"solid",name:window.translate("Legacy_block_divider_settings_style_solid")},{value:"dashed",name:window.translate("Legacy_block_divider_settings_style_dashed")},{value:"dotted",name:window.translate("Legacy_block_divider_settings_style_dotted")}],value:o.values.style}):null,o.show.color?(0,s.jsx)(b.X,{id:o.ids.color,picker:!0,palette:o.themeStyleguideId,label:window.translate("Legacy_block_divider_settings_color"),value:o.values.color}):null,o.show.backgroundColor?(0,s.jsx)(b.X,{id:o.ids.backgroundColor,picker:!0,palette:o.themeStyleguideId,label:window.translate("Legacy_block_settings_background_color"),value:o.values.backgroundColor}):null,o.show.horizontalAlignment?(0,s.jsx)(t.x,{id:o.ids.horizontalAlignment,label:window.translate("Legacy_block_settings_horizontal_alignment"),options:[{value:g.I.HORIZONTAL_ALIGNMENT_LEFT,name:window.translate("Legacy_block_settings_horizontal_alignment_left")},{value:g.I.HORIZONTAL_ALIGNMENT_MIDDLE,name:window.translate("Legacy_block_settings_horizontal_alignment_middle")},{value:g.I.HORIZONTAL_ALIGNMENT_RIGHT,name:window.translate("Legacy_block_settings_horizontal_alignment_right")}],value:o.values.horizontalAlignment}):null,o.show.width?(0,s.jsx)(C.t,{id:o.ids.width,label:window.translate("Legacy_block_settings_width"),type:"unit",placeholder:window.translate("Legacy_block_settings_width_placeholder"),value:o.values.width}):null,o.show.height?(0,s.jsx)(C.t,{id:o.ids.height,label:window.translate("Legacy_block_settings_height"),type:"unit",placeholder:window.translate("Legacy_block_settings_height_placeholder"),value:o.values.height}):null,o.show.padding?(0,s.jsx)(_.l,{id:o.ids.padding,value:o.values.padding}):null]}));var T=r(50427),E=r(18216),w=r(39232),u=r(5181);class c extends E.j{static get SETTING_COLOR(){return"color"}static get SETTING_STYLE(){return"style"}static get SETTING_PADDING(){return"padding"}static get SETTING_BACKGROUND_COLOR(){return"backgroundColor"}static get SETTING_HORIZONTAL_ALIGNMENT(){return"horizontalAlignment"}static get SETTING_WIDTH(){return"width"}static get SETTING_HEIGHT(){return"height"}static get SETTINGS(){return[c.SETTING_COLOR,c.SETTING_STYLE,c.SETTING_PADDING,c.SETTING_BACKGROUND_COLOR,c.SETTING_HORIZONTAL_ALIGNMENT,c.SETTING_WIDTH,c.SETTING_HEIGHT]}on(l){this.tpl.bindDataAttributes(this,{blockId:{type:Number},themeStyleguideId:{type:Number},settingColor:{type:String},settingStyle:{type:String},settingPadding:{type:Object},settingBackgroundColor:{type:String},settingHorizontalAlignment:{type:String},settingWidth:{type:String},settingHeight:{type:String},activateSettings:{type:Object}}),this.renderSettings(),this.settings=new w.D(this.$ctx,this.sandbox),this.isActivated(c.SETTING_COLOR)&&this.bindColor(),this.isActivated(c.SETTING_STYLE)&&this.bindStyle(),this.isActivated(c.SETTING_PADDING)&&this.bindPadding(),this.isActivated(c.SETTING_BACKGROUND_COLOR)&&this.bindBackgroundColor(),this.isActivated(c.SETTING_HORIZONTAL_ALIGNMENT)&&this.bindHorizontalAlignment(),this.isActivated(c.SETTING_WIDTH)&&this.bindWidth(),this.isActivated(c.SETTING_HEIGHT)&&this.bindHeight(),l()}renderSettings(){const l={},p={};for(const O of c.SETTINGS)this.isActivated(O)?(l[O]=!0,p[O]=this.getGenericSettingId(O)):l[O]=!1;const f=u((0,T.EY)(m,{show:l,ids:p,values:{color:this.settingColor,style:this.getStyle(),padding:this.getPaddingsWithUnits(this.settingPadding),backgroundColor:this.settingBackgroundColor,horizontalAlignment:this.getHorizontalAlignment(),width:this.getWidth(),height:this.getHeight()},themeStyleguideId:this.themeStyleguideId}));this.$ctx.append(f),window.application.sandbox.addModules(f)}getPaddingsWithUnits(l){const p={};for(const f of Object.keys(l))p[f]=`${l[f]}px`;return p}bindStyle(){this.registerSaveEvent("style")}bindColor(){this.registerSaveEvent("color")}bindPadding(){this.registerSaveEvent("padding")}bindBackgroundColor(){this.registerSaveEvent("backgroundColor")}bindHorizontalAlignment(){this.registerSaveEvent("horizontalAlignment")}bindWidth(){this.registerSaveEvent("width")}bindHeight(){this.registerSaveEvent("height")}registerSaveEvent(l){const p=this.getGenericSettingId(l),f=this.settings.getSetting(p);f.saved=O=>{this.tpl.fireCustomEvent(this,"blockSettingsSaved",{name:l,value:O[p]})}}getStyle(){return g.I.STYLES.includes(this.settingStyle)?this.settingStyle:g.I.STYLE_SOLID}getWidth(){return this.settingWidth?this.settingWidth:"auto"}getHeight(){return this.settingHeight?this.settingHeight:"auto"}getHorizontalAlignment(){return g.I.HORIZONTAL_ALIGNMENTS.includes(this.settingHorizontalAlignment)?this.settingHorizontalAlignment:g.I.HORIZONTAL_ALIGNMENT_MIDDLE}getGenericSettingId(l){return`settings-${l}-${this.blockId}`}isActivated(l){return this.activateSettings.includes(l)}}},20420:function(ve,$,r){"use strict";r.d($,{I:function(){return c}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(o,l,p)=>l in o?t(o,l,{enumerable:!0,configurable:!0,writable:!0,value:p}):o[l]=p,m=(o,l)=>{for(var p in l||(l={}))C.call(l,p)&&g(o,p,l[p]);if(_)for(var p of _(l))y.call(l,p)&&g(o,p,l[p]);return o};const T=(0,b.I)(o=>(0,s.jsx)("div",{className:"cm-block-divider__horizontal-line js-cm-block-divider__horizontal-line",children:(0,s.jsx)("hr",m({className:`cm-block-divider__horizontal-line-hr cm-block-divider__horizontal-line-hr-style-${o.style} js-cm-block-divider__horizontal-line-hr`},o.color?{style:{color:`${o.color}`}}:{}))}));var E=r(50427),w=r(18216),u=r(5181);class c extends w.j{static get STYLE_NO_LINE(){return"no-line"}static get STYLE_SOLID(){return"solid"}static get STYLE_DASHED(){return"dashed"}static get STYLE_DOTTED(){return"dotted"}static get STYLES(){return[c.STYLE_NO_LINE,c.STYLE_SOLID,c.STYLE_DASHED,c.STYLE_DOTTED]}static get HORIZONTAL_ALIGNMENT_LEFT(){return"left"}static get HORIZONTAL_ALIGNMENT_MIDDLE(){return"middle"}static get HORIZONTAL_ALIGNMENT_RIGHT(){return"right"}static get HORIZONTAL_ALIGNMENTS(){return[c.HORIZONTAL_ALIGNMENT_LEFT,c.HORIZONTAL_ALIGNMENT_MIDDLE,c.HORIZONTAL_ALIGNMENT_RIGHT]}on(l){this.tpl.bindDataAttributes(this,{isEditing:{type:Boolean},settingColor:{type:String,changed:()=>this.updateSettingColor()},settingStyle:{type:String,changed:p=>this.updateSettingStyle(p)},settingPadding:{type:Object,changed:()=>this.updateSettingPadding()},settingWidth:{type:String,changed:()=>this.updateSettingWidth()},settingHeight:{type:String,changed:()=>this.updateSettingHeight()},settingHorizontalAlignment:{type:String,changed:p=>this.updateSettingHorizontalAlignment(p)},settingBackgroundColor:{type:String,changed:()=>this.updateSettingBackgroundColor()}}),this.$box=this.$ctx.find(".js-cm-block-divider__box"),this.updateSettingPadding(),this.updateSettingWidth(),this.updateSettingHeight(),this.updateSettingHorizontalAlignment(),this.updateSettingBackgroundColor(),this.renderHorizontalLine(),l()}renderHorizontalLine(){const l=u((0,E.EY)(T,{style:this.getStyle(),color:this.getColor()}));this.$box.append(l),window.application.sandbox.addModules(l)}updateSettingColor(){this.$box.find(".js-cm-block-divider__horizontal-line-hr").css("color",this.getColor())}updateSettingStyle({previousValue:l,currentValue:p}){const f=this.$box.find(".js-cm-block-divider__horizontal-line-hr"),O=`cm-block-divider__horizontal-line-hr-style-${l}`,L=`cm-block-divider__horizontal-line-hr-style-${p}`;f.removeClass(O),f.addClass(L)}updateSettingPadding(){this.$box.css("padding",this.getPadding())}updateSettingWidth(){this.$box.css("flex",this.getWidth())}updateSettingHeight(){this.$box.css("height",this.getHeight())}updateSettingHorizontalAlignment({previousValue:l=null}={}){if(l){const p=this.getHorizontalAlignmentClass(l);this.$ctx.removeClass(p)}this.$ctx.addClass(this.getHorizontalAlignmentClass(this.settingHorizontalAlignment))}updateSettingBackgroundColor(){this.$box.css("background-color",this.getBackgroundColor())}getStyle(){return c.STYLES.includes(this.settingStyle)?this.settingStyle:c.STYLE_SOLID}getColor(){return this.settingColor}getPadding(){const{top:l,right:p,bottom:f,left:O}=this.settingPadding;return`${this.tpl.unit(l)} ${this.tpl.unit(p)} ${this.tpl.unit(f)} ${this.tpl.unit(O)}`}getWidth(){const l=this.tpl.unit(this.settingWidth);let p=this.tpl.unit(this.settingPadding.left),f=this.tpl.unit(this.settingPadding.right);return l==="auto"||l===0?"1 1 auto":(p===0&&(p="0px"),f===0&&(f="0px"),`0 1 calc(${l} - ${p} - ${f})`)}getHeight(){const l=this.tpl.unit(this.settingHeight);let p=this.tpl.unit(this.settingPadding.top),f=this.tpl.unit(this.settingPadding.bottom);return l==="auto"||l===0?"auto":(p===0&&(p="0px"),f===0&&(f="0px"),`calc(${l} - ${p} - ${f})`)}getHorizontalAlignmentClass(l){switch(l){case c.HORIZONTAL_ALIGNMENT_LEFT:return"cm-block-divider--horizontal-alignment-left";case c.HORIZONTAL_ALIGNMENT_RIGHT:return"cm-block-divider--horizontal-alignment-right";default:return"cm-block-divider--horizontal-alignment-middle"}}getBackgroundColor(){return this.settingBackgroundColor}}},96983:function(ve,$,r){"use strict";r.d($,{y:function(){return S}});var s=r(86070),b=r(29928),t=r(14154),_=r(50427),C=r(93791),y=r(78149),g=r(14587),m=r(79485);const T=(0,t.I)(R=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"cm-setting cm-setting--padding-4x-5x block-text-asset-settings__asset-chooser-container",children:(0,s.jsxs)("div",{className:"block-text-asset-settings__asset-chooser js-block-text-asset-settings__asset-chooser",children:[(0,s.jsx)(y.V,{icon:"image-library",size:C.l.SIZE_MEDIUM}),(0,s.jsx)("span",{className:"block-text-asset-settings__asset-choose-button-text",children:window.translate("Legacy_block_settings_image_replace")})]})}),R.show[S.SETTING_ASSET_BACKGROUND_COLOR]?(0,s.jsx)(g.X,{id:R.ids[S.SETTING_ASSET_BACKGROUND_COLOR],picker:!0,palette:R.themeStyleguideId,label:window.translate("Legacy_block_settings_background_color"),value:R.values[S.SETTING_ASSET_BACKGROUND_COLOR]}):null,R.show[S.SETTING_ASSET_PADDING]?(0,s.jsx)(m.l,{id:R.ids[S.SETTING_ASSET_PADDING],value:R.values[S.SETTING_ASSET_PADDING]}):null]}));var E=r(52939),w=r(23189),u=r(63729);const c=(0,t.I)(R=>(0,s.jsxs)(s.Fragment,{children:[R.show[S.SETTING_GENERAL_LAYOUT]?(0,s.jsx)(E.x,{id:R.ids[S.SETTING_GENERAL_LAYOUT],label:window.translate("Legacy_block_settings_layout"),options:[{value:u.S.LAYOUT_ASSET_LEFT,name:window.translate("Legacy_block_settings_image_left")},{value:u.S.LAYOUT_ASSET_RIGHT,name:window.translate("Legacy_block_settings_image_right")}],value:R.values[S.SETTING_GENERAL_LAYOUT]}):null,R.show[S.SETTING_GENERAL_BACKGROUND_COLOR]?(0,s.jsx)(g.X,{id:R.ids[S.SETTING_GENERAL_BACKGROUND_COLOR],picker:!0,palette:R.themeStyleguideId,label:window.translate("Legacy_block_settings_background_color"),value:R.values[S.SETTING_GENERAL_BACKGROUND_COLOR]}):null,R.show[S.SETTING_GENERAL_MARGIN_TOP]?(0,s.jsx)(w.t,{id:R.ids[S.SETTING_GENERAL_MARGIN_TOP],label:window.translate("Legacy_block_settings_margin_top"),type:"unit",placeholder:window.translate("Legacy_block_settings_width_placeholder"),value:R.values[S.SETTING_GENERAL_MARGIN_TOP]}):null,R.show[S.SETTING_GENERAL_MARGIN_BOTTOM]?(0,s.jsx)(w.t,{id:R.ids[S.SETTING_GENERAL_MARGIN_BOTTOM],label:window.translate("Legacy_block_settings_margin_bottom"),type:"unit",placeholder:window.translate("Legacy_block_settings_width_placeholder"),value:R.values[S.SETTING_GENERAL_MARGIN_BOTTOM]}):null]})),o=(0,t.I)(R=>(0,s.jsxs)(s.Fragment,{children:[R.show[S.SETTING_TEXT_BACKGROUND_COLOR]?(0,s.jsx)(g.X,{id:R.ids[S.SETTING_TEXT_BACKGROUND_COLOR],picker:!0,palette:R.themeStyleguideId,label:window.translate("Legacy_block_settings_background_color"),value:R.values[S.SETTING_TEXT_BACKGROUND_COLOR]}):null,R.show[S.SETTING_TEXT_HORIZONTAL_ALIGNMENT]?(0,s.jsx)(E.x,{id:R.ids[S.SETTING_TEXT_HORIZONTAL_ALIGNMENT],label:window.translate("Legacy_block_settings_horizontal_alignment"),options:[{value:u.S.HORIZONTAL_ALIGNMENT_LEFT,name:window.translate("Legacy_block_settings_horizontal_alignment_left")},{value:u.S.HORIZONTAL_ALIGNMENT_MIDDLE,name:window.translate("Legacy_block_settings_horizontal_alignment_middle")},{value:u.S.HORIZONTAL_ALIGNMENT_RIGHT,name:window.translate("Legacy_block_settings_horizontal_alignment_right")}],value:R.values[S.SETTING_TEXT_HORIZONTAL_ALIGNMENT]}):null,R.show[S.SETTING_TEXT_WIDTH]?(0,s.jsx)(w.t,{id:R.ids[S.SETTING_TEXT_WIDTH],label:window.translate("Legacy_block_settings_width"),type:"unit",placeholder:window.translate("Legacy_block_settings_width_placeholder"),value:R.values[S.SETTING_TEXT_WIDTH]}):null,R.show[S.SETTING_TEXT_HEIGHT]?(0,s.jsx)(w.t,{id:R.ids[S.SETTING_TEXT_HEIGHT],label:window.translate("Legacy_block_settings_height"),type:"unit",placeholder:window.translate("Legacy_block_settings_height_placeholder"),value:R.values[S.SETTING_TEXT_HEIGHT]}):null,R.show[S.SETTING_TEXT_PADDING]?(0,s.jsx)(m.l,{id:R.ids[S.SETTING_TEXT_PADDING],value:R.values[S.SETTING_TEXT_PADDING]}):null]})),l=(0,t.I)(R=>(0,s.jsx)(b.y,{items:[{id:"general",active:!0,title:window.translate("Legacy_block_settings_tab_general"),content:(0,_.EY)(c,R)},{id:"text",active:!1,title:window.translate("Legacy_block_settings_tab_text"),content:(0,_.EY)(o,R)},{id:"asset",active:!1,title:window.translate("Legacy_block_settings_tab_image"),content:(0,_.EY)(T,R)}],border:{bottom:!0},shadow:!0}));var p=r(37522),f=r(77007),O=r(18216),L=r(34933),P=r(39232),N=r(5181);class S extends O.j{static get SETTING_GENERAL_LAYOUT(){return"generalLayout"}static get SETTING_GENERAL_BACKGROUND_COLOR(){return"generalBackgroundColor"}static get SETTING_GENERAL_MARGIN_TOP(){return"generalMarginTop"}static get SETTING_GENERAL_MARGIN_BOTTOM(){return"generalMarginBottom"}static get SETTING_TEXT_BACKGROUND_COLOR(){return"textBackgroundColor"}static get SETTING_TEXT_HORIZONTAL_ALIGNMENT(){return"textHorizontalAlignment"}static get SETTING_TEXT_WIDTH(){return"textWidth"}static get SETTING_TEXT_HEIGHT(){return"textHeight"}static get SETTING_TEXT_PADDING(){return"textPadding"}static get SETTING_ASSET_BACKGROUND_COLOR(){return"assetBackgroundColor"}static get SETTING_ASSET_PADDING(){return"assetPadding"}static get SETTINGS(){return[S.SETTING_GENERAL_LAYOUT,S.SETTING_GENERAL_BACKGROUND_COLOR,S.SETTING_GENERAL_MARGIN_TOP,S.SETTING_GENERAL_MARGIN_BOTTOM,S.SETTING_TEXT_BACKGROUND_COLOR,S.SETTING_TEXT_HORIZONTAL_ALIGNMENT,S.SETTING_TEXT_WIDTH,S.SETTING_TEXT_HEIGHT,S.SETTING_TEXT_PADDING,S.SETTING_ASSET_BACKGROUND_COLOR,S.SETTING_ASSET_PADDING]}on(U){this.sandbox.subscribe("events",this),this.tpl.bindDataAttributes(this,{blockId:{type:Number},themeStyleguideId:{type:Number},activateSettings:{type:Object},settingGeneralLayout:{type:String},settingGeneralBackgroundColor:{type:String},settingGeneralMarginTop:{type:String},settingGeneralMarginBottom:{type:String},settingTextBackgroundColor:{type:String},settingTextHorizontalAlignment:{type:String},settingTextWidth:{type:String},settingTextHeight:{type:String},settingTextPadding:{type:Object},settingAssetBackgroundColor:{type:String},settingAssetPadding:{type:Object}}),this.renderSettings(),this.bindAssetChooser(),this.settings=new P.D(this.$ctx,this.sandbox);for(const B of S.SETTINGS)this.isActivated(B)&&this.registerSaveEvent(B);U()}renderSettings(){const U={},B={};for(const I of S.SETTINGS)this.isActivated(I)?(U[I]=!0,B[I]=this.getGenericSettingId(I)):U[I]=!1;const M=N((0,_.EY)(l,{show:U,ids:B,values:{[S.SETTING_GENERAL_LAYOUT]:this.getLayout(),[S.SETTING_GENERAL_BACKGROUND_COLOR]:this.settingGeneralBackgroundColor,[S.SETTING_GENERAL_MARGIN_TOP]:this.settingGeneralMarginTop,[S.SETTING_GENERAL_MARGIN_BOTTOM]:this.settingGeneralMarginBottom,[S.SETTING_TEXT_BACKGROUND_COLOR]:this.settingTextBackgroundColor,[S.SETTING_TEXT_HORIZONTAL_ALIGNMENT]:this.getHorizontalAlignment(this.settingTextHorizontalAlignment),[S.SETTING_TEXT_WIDTH]:this.getDimensionValue(this.settingTextWidth),[S.SETTING_TEXT_HEIGHT]:this.getDimensionValue(this.settingTextHeight),[S.SETTING_TEXT_PADDING]:this.settingTextPadding,[S.SETTING_ASSET_BACKGROUND_COLOR]:this.settingAssetBackgroundColor,[S.SETTING_ASSET_PADDING]:this.getPaddingWithUnits(this.settingAssetPadding)},themeStyleguideId:this.themeStyleguideId}));this.$ctx.append(M),window.application.sandbox.addModules(M)}bindAssetChooser(){this.$ctx.find(".js-block-text-asset-settings__asset-chooser").on("click",()=>this.openAssetChooser())}openAssetChooser(){const U=[{key:"ext",values:(0,L.F6)()}];f.y.isNumber(this.assetId)&&U.push({key:"id",values:[this.assetId],inverted:!0}),this.fire("openModal",{modifier:"flex",$content:(0,_.EY)(p.l,{externalData:{id:this.getIdentifier()},multiSelectionAllowed:!1,brandId:this.brandId,filters:U})},["events"])}registerSaveEvent(U){const B=this.getGenericSettingId(U),M=this.settings.getSetting(B);M.saved=I=>{this.tpl.fireCustomEvent(this,"blockSettingsSaved",{name:U,value:I[B]})}}getPaddingWithUnits(U){const B={};for(const M of Object.keys(U))B[M]=`${U[M]}px`;return B}getDimensionValue(U){return U||"auto"}getHorizontalAlignment(U){return u.S.HORIZONTAL_ALIGNMENTS.includes(U)?U:u.S.HORIZONTAL_ALIGNMENT_LEFT}getLayout(){return u.S.LAYOUTS.includes(this.settingGeneralLayout)?this.settingGeneralLayout:u.S.LAYOUT_ASSET_RIGHT}getGenericSettingId(U){return`settings-${U}-${this.blockId}`}isActivated(U){return this.activateSettings.includes(U)}getIdentifier(){return`block-text-asset-settings-${this.blockId}`}onAssetChooserAssetChosen(U){!U||!U.externalData||U.externalData.id!==this.getIdentifier()||(this.fire("closeModal",["events"]),!(!U.screenIds||U.screenIds.length===0)&&(this.tpl.fireCustomEvent(this,"blockSettingDropdownClosed"),this.tpl.fireCustomEvent(this,"blockTextAssetSettingsAssetChosen",{assetId:U.screenIds[0]})))}}},63729:function(ve,$,r){"use strict";r.d($,{S:function(){return y}});var s=r(29270),b=r(85506),t=r(29835),_=r(50427),C=r(18216);class y extends C.j{static get LAYOUT_ASSET_LEFT(){return"left"}static get LAYOUT_ASSET_RIGHT(){return"right"}static get LAYOUTS(){return[y.LAYOUT_ASSET_LEFT,y.LAYOUT_ASSET_RIGHT]}static get HORIZONTAL_ALIGNMENT_LEFT(){return"left"}static get HORIZONTAL_ALIGNMENT_MIDDLE(){return"middle"}static get HORIZONTAL_ALIGNMENT_RIGHT(){return"right"}static get HORIZONTAL_ALIGNMENTS(){return[y.HORIZONTAL_ALIGNMENT_LEFT,y.HORIZONTAL_ALIGNMENT_MIDDLE,y.HORIZONTAL_ALIGNMENT_RIGHT]}on(m){this.sandbox.subscribe("events",this),this.tpl.bindDataAttributes(this,{isEditing:{type:Boolean,changed:()=>this.updateIsEditing()},asset:{type:Object,changed:()=>this.updateAsset()},error:{type:Object},brandId:{type:Number},settingGeneralLayout:{type:String,changed:()=>this.updateSettingLayout()},settingGeneralBackgroundColor:{type:String,changed:()=>this.updateSettingGeneralBackgroundColor()},settingGeneralMarginTop:{type:String,changed:()=>this.updateSettingMarginTop()},settingGeneralMarginBottom:{type:String,changed:()=>this.updateSettingMarginBottom()},settingTextBackgroundColor:{type:String,changed:()=>this.updateSettingTextBackgroundColor()},settingTextHorizontalAlignment:{type:String,changed:()=>this.updateSettingTextHorizontalAlignment()},settingTextWidth:{type:String,changed:()=>this.updateSettingTextWidth()},settingTextHeight:{type:String,changed:()=>this.updateSettingTextHeight()},settingTextPadding:{type:Object,changed:()=>this.updateSettingTextPadding()},settingAssetBackgroundColor:{type:String,changed:()=>this.updateSettingAssetBackgroundColor()},settingAssetPadding:{type:Object,changed:()=>this.updateSettingAssetPadding()},text:{type:String,changed:()=>this.updateText()},themeStyleguideId:{type:Number},portalId:{type:Number},isReferenced:{type:Boolean},mainFontFamily:{type:String}}),this.editor=null,this.$box=this.$ctx.find(".js-cm-block-text-asset__box"),this.$assetBox=this.$ctx.find(".js-cm-block-text-asset__asset-box"),this.$textBox=this.$ctx.find(".js-cm-block-text-asset__text-box"),this.updateSettingLayout(),this.updateSettingGeneralBackgroundColor(),this.updateSettingMarginTop(),this.updateSettingMarginBottom(),this.updateSettingTextBackgroundColor(),this.updateSettingTextHorizontalAlignment(),this.updateSettingTextWidth(),this.updateSettingTextHeight(),this.updateSettingTextPadding(),this.updateSettingAssetBackgroundColor(),this.updateSettingAssetPadding(),this.updateMainFontFamily(),this.renderTextAsset(),m()}updateIsEditing(){const m=this.getModule(this.$textBox),T=this.getModule(this.$assetBox);m.$ctx.dataAsBoolean("isEditing",this.isEditing),T.$ctx.dataAsBoolean("isEditing",this.isEditing)}updateAsset(){var m;(m=this.getModule(this.$assetBox))==null||m.$ctx.dataAsObject("asset",this.asset)}updateText(){var m;(m=this.getModule(this.$textBox))==null||m.$ctx.dataAsObject("text",this.text)}updateSettingLayout(){this.$box.css("flex-direction",this.settingGeneralLayout===y.LAYOUT_ASSET_LEFT?"row":"row-reverse")}updateSettingGeneralBackgroundColor(){this.$box.css("background-color",this.settingGeneralBackgroundColor)}updateSettingMarginTop(){this.$box.css("margin-top",this.tpl.unit(this.settingGeneralMarginTop))}updateSettingMarginBottom(){this.$box.css("margin-bottom",this.tpl.unit(this.settingGeneralMarginBottom))}updateSettingTextBackgroundColor(){var m;(m=this.getModule(this.$textBox))==null||m.$ctx.dataAsString("settingBackgroundColor",this.settingTextBackgroundColor)}updateSettingTextHorizontalAlignment(){var m;(m=this.getModule(this.$textBox))==null||m.$ctx.dataAsString("settingHorizontalAlignment",this.settingTextHorizontalAlignment)}updateSettingTextWidth(){var m;(m=this.getModule(this.$textBox))==null||m.$ctx.dataAsString("settingWidth",this.settingTextWidth)}updateSettingTextHeight(){var m;(m=this.getModule(this.$textBox))==null||m.$ctx.dataAsString("settingHeight",this.settingTextHeight)}updateSettingTextPadding(){var m;(m=this.getModule(this.$textBox))==null||m.$ctx.dataAsObject("settingPadding",this.settingTextPadding)}updateSettingAssetBackgroundColor(){var m;(m=this.getModule(this.$assetBox))==null||m.$ctx.dataAsObject("settingBackgroundColor",this.settingAssetBackgroundColor)}updateSettingAssetPadding(){var m;(m=this.getModule(this.$assetBox))==null||m.$ctx.dataAsObject("settingPadding",this.settingAssetPadding)}updateMainFontFamily(){var m;(m=this.getModule(this.$textBox))==null||m.$ctx.dataAsString("mainFontFamily",this.mainFontFamily)}renderTextAsset(){const m=(0,_.EY)(s.M,{isEditing:this.isEditing,asset:this.asset||void 0,error:this.error||{},brandId:this.brandId,settingImageAlignment:this.settingAssetHorizontalAlignment,settingPadding:this.settingAssetPadding,settingWidth:this.settingAssetWidth,settingHeight:this.settingAssetHeight,settingHorizontalAlignment:this.settingAssetHorizontalAlignment,settingBackgroundColor:this.settingAssetBackgroundColor}),T=(0,_.EY)(b.V,{text:this.text||"",isEditing:this.isEditing,settingPadding:this.settingTextPadding,settingWidth:this.settingTextWidth,settingHeight:this.settingTextHeight,settingHorizontalAlignment:this.settingTextHorizontalAlignment,settingBackgroundColor:this.settingTextBackgroundColor,themeStyleguideId:this.themeStyleguideId,portalId:this.portalId,mainFontFamily:this.mainFontFamily});this.$assetBox.html(m),this.$textBox.html(T),this.sandbox.addModules(this.$box)}getModule(m){return t.u.getFirstChildModule(m)}getIdentifier(){return`block-text-asset-${this.id}`}onAssetChooserAssetChosen(m){!m||!m.externalData||m.externalData.id!==this.getIdentifier()||(this.fire("closeModal",["events"]),!(!m.screenIds||m.screenIds.length===0)&&this.tpl.fireCustomEvent(this,"blockTextAssetAssetChosen",{assetId:m.screenIds[0]}))}}},58440:function(ve,$,r){"use strict";r.d($,{G:function(){return c}});var s=r(86070),b=r(14587),t=r(52939),_=r(79485),C=r(23189),y=r(14154),g=r(19204);const m=(0,y.I)(o=>(0,s.jsxs)(s.Fragment,{children:[o.show.backgroundColor?(0,s.jsx)(b.X,{id:o.ids.backgroundColor,picker:!0,palette:o.themeStyleguideId,label:window.translate("Legacy_block_settings_background_color"),value:o.values.backgroundColor}):null,o.show.horizontalAlignment?(0,s.jsx)(t.x,{id:o.ids.horizontalAlignment,label:window.translate("Legacy_block_settings_horizontal_alignment"),options:[{value:g.c.HORIZONTAL_ALIGNMENT_MIDDLE,name:window.translate("Legacy_block_settings_horizontal_alignment_middle")},{value:g.c.HORIZONTAL_ALIGNMENT_LEFT,name:window.translate("Legacy_block_settings_horizontal_alignment_left")},{value:g.c.HORIZONTAL_ALIGNMENT_RIGHT,name:window.translate("Legacy_block_settings_horizontal_alignment_right")}],value:o.values.horizontalAlignment}):null,o.show.width?(0,s.jsx)(C.t,{id:o.ids.width,label:window.translate("Legacy_block_settings_width"),type:"unit",placeholder:window.translate("Legacy_block_settings_width_placeholder"),value:o.values.width}):null,o.show.height?(0,s.jsx)(C.t,{id:o.ids.height,label:window.translate("Legacy_block_settings_height"),type:"unit",placeholder:window.translate("Legacy_block_settings_height_placeholder"),value:o.values.height}):null,o.show.padding?(0,s.jsx)(_.l,{id:o.ids.padding,value:o.values.padding}):null]}));var T=r(50427),E=r(18216),w=r(39232),u=r(5181);class c extends E.j{static get SETTING_PADDING(){return"padding"}static get SETTING_BACKGROUND_COLOR(){return"backgroundColor"}static get SETTING_HORIZONTAL_ALIGNMENT(){return"horizontalAlignment"}static get SETTING_WIDTH(){return"width"}static get SETTING_HEIGHT(){return"height"}static get SETTINGS(){return[c.SETTING_PADDING,c.SETTING_BACKGROUND_COLOR,c.SETTING_HORIZONTAL_ALIGNMENT,c.SETTING_WIDTH,c.SETTING_HEIGHT]}on(l){this.tpl.bindDataAttributes(this,{blockId:{type:Number},themeStyleguideId:{type:Number},settingPadding:{type:Object},settingBackgroundColor:{type:String},settingHorizontalAlignment:{type:String},settingWidth:{type:String},settingHeight:{type:String},activateSettings:{type:Object}}),this.renderSettings(),this.settings=new w.D(this.$ctx,this.sandbox),this.isActivated(c.SETTING_PADDING)&&this.bindPadding(),this.isActivated(c.SETTING_BACKGROUND_COLOR)&&this.bindBackgroundColor(),this.isActivated(c.SETTING_HORIZONTAL_ALIGNMENT)&&this.bindHorizontalAlignment(),this.isActivated(c.SETTING_WIDTH)&&this.bindWidth(),this.isActivated(c.SETTING_HEIGHT)&&this.bindHeight(),l()}renderSettings(){const l={},p={};for(const O of c.SETTINGS)this.isActivated(O)?(l[O]=!0,p[O]=this.getGenericSettingId(O)):l[O]=!1;const f=u((0,T.EY)(m,{show:l,ids:p,values:{padding:this.getPaddingsWithUnits(this.settingPadding),backgroundColor:this.settingBackgroundColor,width:this.getWidth(),height:this.getHeight()},themeStyleguideId:this.themeStyleguideId,horizontalAlignment:this.getHorizontalAlignment()}));this.$ctx.append(f),window.application.sandbox.addModules(f)}getPaddingsWithUnits(l){const p={};for(const f of Object.keys(l))p[f]=`${l[f]}px`;return p}bindPadding(){this.registerSaveEvent("padding")}bindBackgroundColor(){this.registerSaveEvent("backgroundColor")}bindHorizontalAlignment(){this.registerSaveEvent("horizontalAlignment")}bindWidth(){this.registerSaveEvent("width")}bindHeight(){this.registerSaveEvent("height")}registerSaveEvent(l){const p=this.getGenericSettingId(l),f=this.settings.getSetting(p);f.saved=O=>{this.tpl.fireCustomEvent(this,"blockSettingsSaved",{name:l,value:O[p]})}}getHorizontalAlignment(){return g.c.HORIZONTAL_ALIGNMENTS.includes(this.settingHorizontalAlignment)?this.settingHorizontalAlignment:g.c.HORIZONTAL_ALIGNMENT_MIDDLE}getWidth(){return this.settingWidth?this.settingWidth:"auto"}getHeight(){return this.settingHeight?this.settingHeight:"auto"}getGenericSettingId(l){return`settings-${l}-${this.blockId}`}isActivated(l){return this.activateSettings.includes(l)}}},19204:function(ve,$,r){"use strict";r.d($,{c:function(){return E}});var s=r(86070),b=r(14154);const t=(0,b.I)(w=>(0,s.jsx)("div",{className:`cm-block-text__placeholder js-cm-block-text__placeholder ${w.show?"":"cm-block-text__placeholder--hidden"}`,children:w.placeholderText}));var _=r(95376);const C=(0,b.I)(w=>(0,s.jsx)("div",{className:`cm-block-text__text js-cm-block-text__text ${w.isEditing?"cm-block-text__text--is-editing":""}`,children:(0,_.Ay)(w.text)}));var y=r(50427),g=r(18216),m=r(23847),T=r(5181);class E extends g.j{static get BLACKLIST_SELECTORS(){return["img","table",'[style*="background"]','[style*="background-color"]','[style*="display"]','[style*="font-family"]','[style*="font-weight"]','[style*="line-height"]','[style*="text-decoration"]']}static get EDITOR_PLACEHOLDER_TEXT(){return"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."}static get HORIZONTAL_ALIGNMENT_LEFT(){return"left"}static get HORIZONTAL_ALIGNMENT_MIDDLE(){return"middle"}static get HORIZONTAL_ALIGNMENT_RIGHT(){return"right"}static get HORIZONTAL_ALIGNMENTS(){return[E.HORIZONTAL_ALIGNMENT_LEFT,E.HORIZONTAL_ALIGNMENT_MIDDLE,E.HORIZONTAL_ALIGNMENT_RIGHT]}on(u){this.tpl.bindDataAttributes(this,{text:{type:String,changed:()=>this.updateText()},themeStyleguideId:{type:Number},portalId:{type:Number},isReferenced:{type:Boolean},isEditing:{type:Boolean,changed:()=>this.updateIsEditing()},settingPadding:{type:Object,changed:()=>this.updateSettingPadding()},settingWidth:{type:String,changed:()=>this.updateSettingWidth()},settingHeight:{type:String,changed:()=>this.updateSettingHeight()},settingHorizontalAlignment:{type:String,changed:c=>this.updateSettingHorizontalAlignment(c)},settingBackgroundColor:{type:String,changed:()=>this.updateSettingBackgroundColor()},mainFontFamily:{type:String}}),this.editor=null,this.$box=this.$ctx.find(".js-cm-block-text__box"),this.updateSettingPadding(),this.updateSettingWidth(),this.updateSettingHeight(),this.updateSettingHorizontalAlignment(),this.updateSettingBackgroundColor(),this.updateMainFontFamily(),this.renderText(),this.renderPlaceholder(),this.bindEditor(),this.updateText(),u()}renderText(){const u=(0,y.EY)(C,{text:this.text,isEditing:this.isEditing});this.tpl.addOrReplaceAndActivate(this.$box,".js-cm-block-text__text",u)}renderPlaceholder(){const u=T((0,y.EY)(t,{placeholderText:E.EDITOR_PLACEHOLDER_TEXT,show:!1}));this.$box.append(u),window.application.sandbox.addModules(u)}bindEditor(){const u=this.$box.find(".js-cm-block-text__text");if(this.isReferenced){u.addClass("co-editor co-editor--default");return}this.editor&&this.editor.destroy(),this.editor=new m.j(u,this.sandbox,{set:"blockText",removeExtraneous:!1,placeholder:E.EDITOR_PLACEHOLDER_TEXT,portalId:this.portalId,project:this.themeStyleguideId,saveDelay:500,toolbar:{ordered_list:!0,bullet_list:!0}}),this.editor.saved=c=>this.saveBlock(c)}saveBlock(u){this.tpl.fireCustomEvent(this.$box,"blockTextSaved",{text:u})}updateText(){this.updateTextText(),this.updatePlaceholder()}updateIsEditing(){this.isReferenced||(this.updateTextText(),this.updatePlaceholder())}updateTextText(){const u=this.$box.find(".js-cm-block-text__text"),c="cm-block-text__text--is-editing",o="cm-block-text__text--hidden",l="block-empty";this.isPlaceholderShown()?u.addClass(o):u.removeClass(o),u.text().length===0?u.addClass(l):u.removeClass(l),this.isEditing?(u.addClass(c),this.editor.enable()):(u.removeClass(c),this.editor.disable())}updatePlaceholder(){const u=this.isPlaceholderShown(),c=this.$box.find(".js-cm-block-text__placeholder"),o="cm-block-text__placeholder--hidden";u?c.removeClass(o):c.addClass(o)}updateSettingPadding(){this.$box.css("padding",this.getPadding())}updateSettingWidth(){this.$box.css("flex",this.getWidth())}updateSettingHeight(){this.$box.css("min-height",this.getHeight())}updateMainFontFamily(){this.$box.css("font-family",this.mainFontFamily)}updateSettingHorizontalAlignment({previousValue:u=null}={}){if(u){const c=this.getHorizontalAlignmentClass(u);this.$ctx.removeClass(c)}this.$ctx.addClass(this.getHorizontalAlignmentClass(this.settingHorizontalAlignment))}updateSettingBackgroundColor(){this.$box.css("background-color",this.getBackgroundColor())}getPadding(){const{top:u,right:c,bottom:o,left:l}=this.settingPadding;return`${this.tpl.unit(u)} ${this.tpl.unit(c)} ${this.tpl.unit(o)} ${this.tpl.unit(l)}`}getWidth(){const u=this.tpl.unit(this.settingWidth);let c=this.tpl.unit(this.settingPadding.left),o=this.tpl.unit(this.settingPadding.right);return u==="auto"||u===0?"1 1 auto":(c===0&&(c="0px"),o===0&&(o="0px"),`0 1 calc(${u} - ${c} - ${o})`)}getHeight(){const u=this.tpl.unit(this.settingHeight);let c=this.tpl.unit(this.settingPadding.top),o=this.tpl.unit(this.settingPadding.bottom);return u==="auto"||u===0?"auto":(c===0&&(c="0px"),o===0&&(o="0px"),`calc(${u} - ${c} - ${o})`)}getHorizontalAlignmentClass(u){switch(u){case E.HORIZONTAL_ALIGNMENT_MIDDLE:return"cm-block-text--horizontal-alignment-middle";case E.HORIZONTAL_ALIGNMENT_RIGHT:return"cm-block-text--horizontal-alignment-right";case E.HORIZONTAL_ALIGNMENT_LEFT:default:return"cm-block-text--horizontal-alignment-left"}}getBackgroundColor(){return this.settingBackgroundColor}isPlaceholderShown(){return this.isEditing?!1:this.$box.find(".js-cm-block-text__text").text().length===0}}},85506:function(ve,$,r){"use strict";r.d($,{V:function(){return u}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.defineProperties,C=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,T=(c,o,l)=>o in c?t(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,E=(c,o)=>{for(var l in o||(o={}))g.call(o,l)&&T(c,l,o[l]);if(y)for(var l of y(o))m.call(o,l)&&T(c,l,o[l]);return c},w=(c,o)=>_(c,C(o));const u=(0,b.I)(c=>(0,s.jsx)("div",w(E({className:"mod mod-m-block-text cm-block-text"},c.tpl.renderDataAttributesAsObject(c)),{children:(0,s.jsx)("div",{className:"cm-block-text__box js-cm-block-text__box"})})))},91715:function(ve,$,r){"use strict";r.d($,{l:function(){return xs}});var s=r(86070),b=r(95376),t=r(14154),_=Object.defineProperty,C=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=(Ye,lt,nt)=>lt in Ye?_(Ye,lt,{enumerable:!0,configurable:!0,writable:!0,value:nt}):Ye[lt]=nt,w=(Ye,lt)=>{for(var nt in lt||(lt={}))m.call(lt,nt)&&E(Ye,nt,lt[nt]);if(g)for(var nt of g(lt))T.call(lt,nt)&&E(Ye,nt,lt[nt]);return Ye},u=(Ye,lt)=>C(Ye,y(lt));const c=(0,t.I)(Ye=>(0,s.jsx)("div",u(w({className:"mod mod-m-block-add cm-block-add"},Ye.tpl.renderDataAttributesAsObject(Ye)),{children:(0,s.jsx)("hr",{className:"cm-block-add__hr"})}))),o=(0,t.I)(Ye=>(0,s.jsxs)("div",{className:`cm-block__block-add ${Ye.hidden?"cm-block__block-add--hidden":""} js-cm-block__block-add`,children:[(0,s.jsx)(c,{}),(0,s.jsxs)("div",{className:"cm-block__block-add-dropdown cm-btn-dropdown",children:[(0,s.jsx)("div",{className:"js-cm-btn-dropdown__toggle cm-block__block-add-toggle js-cm-block__block-add-toggle"}),(0,s.jsx)("div",{className:"cm-btn-dropdown__menu js-cm-btn-dropdown__menu cm-block__block-add-menu js-cm-block__block-add-menu","data-placement":"auto-start","data-float":"true",children:(0,b.Ay)(Ye.blockChooser)})]})]}));var l=r(29270);const p=(0,t.I)(Ye=>(0,s.jsx)("div",{className:"cm-block__block-asset js-cm-block__block-asset",children:(0,s.jsx)(l.M,{isEditing:Ye.isEditing,asset:Ye.asset,error:Ye.error,brandId:Ye.brandId,settingImageAlignment:Ye.settingImageAlignment,settingPadding:Ye.settingPadding,settingWidth:Ye.settingWidth,settingHeight:Ye.settingHeight,settingHorizontalAlignment:Ye.settingHorizontalAlignment,settingBackgroundColor:Ye.settingBackgroundColor})}));var f=r(77007),O=r(15917);const L=(0,t.I)(Ye=>{const lt=[{value:xs.BLOCK_TEXT,name:window.translate("Legacy_block_chooser_1_text"),icon:"text",size:"lg"},{value:xs.BLOCK_ASSET,name:window.translate("Legacy_block_chooser_1_image"),icon:"image",size:"lg"},{value:xs.BLOCK_TEXT_ASSET,name:window.translate("Legacy_block_chooser_1_text_image"),icon:"image-figure",size:"lg"},{value:xs.BLOCK_DIVIDER,name:window.translate("Legacy_block_chooser_divider"),icon:"divider",size:"lg"}],nt=f.y.isArray(Ye.allowedBlockTypes)?Ye.allowedBlockTypes:[],za=[];for(const Bn of lt)nt.includes(Bn.value)&&za.push(Bn);const kn=za.length<4?za.length:4;return(0,s.jsx)("div",{className:"cm-block__chooser js-cm-block__chooser",children:(0,s.jsx)(O.J,{id:"block-list-chooser-blocks",columns:kn,iconSize:"lg",options:za,modifier:"brand-update"})})});var P=Object.defineProperty,N=Object.defineProperties,S=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,U=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,M=(Ye,lt,nt)=>lt in Ye?P(Ye,lt,{enumerable:!0,configurable:!0,writable:!0,value:nt}):Ye[lt]=nt,I=(Ye,lt)=>{for(var nt in lt||(lt={}))U.call(lt,nt)&&M(Ye,nt,lt[nt]);if(R)for(var nt of R(lt))B.call(lt,nt)&&M(Ye,nt,lt[nt]);return Ye},F=(Ye,lt)=>N(Ye,S(lt));const te=(0,t.I)(Ye=>(0,s.jsx)("div",F(I({className:"mod mod-m-block-divider cm-block-divider"},Ye.tpl.renderDataAttributesAsObject(Ye)),{children:(0,s.jsx)("div",{className:"cm-block-divider__box js-cm-block-divider__box"})}))),fe=(0,t.I)(Ye=>(0,s.jsx)("div",{className:"cm-block__block-divider js-cm-block__block-divider",children:(0,s.jsx)(te,{isEditing:Ye.isEditing,settingColor:Ye.settingColor,settingStyle:Ye.settingStyle,settingHeight:Ye.settingHeight,settingPadding:Ye.settingPadding,settingWidth:Ye.settingWidth,settingHorizontalAlignment:Ye.settingHorizontalAlignment,settingBackgroundColor:Ye.settingBackgroundColor})}));var Ie=Object.defineProperty,de=Object.getOwnPropertySymbols,q=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable,me=(Ye,lt,nt)=>lt in Ye?Ie(Ye,lt,{enumerable:!0,configurable:!0,writable:!0,value:nt}):Ye[lt]=nt,ie=(Ye,lt)=>{for(var nt in lt||(lt={}))q.call(lt,nt)&&me(Ye,nt,lt[nt]);if(de)for(var nt of de(lt))re.call(lt,nt)&&me(Ye,nt,lt[nt]);return Ye};const ee=(0,t.I)(Ye=>(0,s.jsx)("div",ie({className:"mod mod-m-block-empty cm-block-empty"},Ye.tpl.renderDataAttributesAsObject(ie({labelEmptyPlaceholderTitle:window.translate("Legacy_empty_placeholder_title"),labelEmptyPlaceholderText:window.translate("Legacy_empty_placeholder_text")},Ye))))),pe=(0,t.I)(Ye=>(0,s.jsx)("div",{className:`cm-block__block-empty ${Ye.hidden?"cm-block__block-empty--hidden":""} js-cm-block__block-empty`,children:(0,s.jsx)(ee,{labelEmptyPlaceholderTitle:Ye.labelEmptyPlaceholderTitle})}));var je=r(85506);const Be=(0,t.I)(Ye=>(0,s.jsx)("div",{className:"cm-block__block-text js-cm-block__block-text",children:(0,s.jsx)(je.V,{text:Ye.blockText,isEditing:Ye.isEditing,settingPadding:Ye.settingPadding,settingWidth:Ye.settingWidth,settingHeight:Ye.settingHeight,settingHorizontalAlignment:Ye.settingHorizontalAlignment,settingBackgroundColor:Ye.settingBackgroundColor,themeStyleguideId:Ye.themeStyleguideId,portalId:Ye.portalId,mainFontFamily:Ye.mainFontFamily})})),Ne=(0,t.I)(Ye=>(0,s.jsx)("div",{className:"mod mod-m-block-text-asset cm-block-text-asset","data-asset":Ye.asset?JSON.stringify(Ye.asset):void 0,"data-error":Ye.error?JSON.stringify(Ye.asset):void 0,"data-brand-id":Ye.brandId,"data-text":Ye.text,"data-setting-general-layout":Ye.settingGeneralLayout,"data-setting-general-background-color":Ye.settingGeneralBackgroundColor,"data-setting-general-margin-top":Ye.settingGeneralMarginTop,"data-setting-general-margin-bottom":Ye.settingGeneralMarginBottom,"data-setting-text-background-color":Ye.settingTextBackgroundColor,"data-setting-text-horizontal-alignment":Ye.settingTextHorizontalAlignment,"data-setting-text-width":Ye.settingTextWidth,"data-setting-text-height":Ye.settingTextHeight,"data-setting-text-padding":Ye.settingTextPadding?JSON.stringify(Ye.settingTextPadding):void 0,"data-setting-asset-backgroundColor":Ye.settingAssetBackgroundColor,"data-setting-asset-padding":Ye.settingAssetPadding?JSON.stringify(Ye.settingAssetPadding):void 0,"data-is-editing":Ye.isEditing,"data-theme-styleguide-id":Ye.themeStyleguideId,"data-portal-id":Ye.portalId,"data-main-font-family":Ye.mainFontFamily,children:(0,s.jsxs)("div",{className:"cm-block-text-asset__box js-cm-block-text-asset__box",children:[(0,s.jsx)("div",{className:"cm-block-text-asset__asset-box js-cm-block-text-asset__asset-box"}),(0,s.jsx)("div",{className:"cm-block-text-asset__text-box js-cm-block-text-asset__text-box"})]})})),ce=(0,t.I)(Ye=>(0,s.jsx)("div",{className:"cm-block__block-text-asset js-cm-block__block-text-asset",children:(0,s.jsx)(Ne,{asset:Ye.asset,error:Ye.error,brandId:Ye.brandId,text:Ye.blockText,settingGeneralLayout:Ye.settingGeneralLayout,settingGeneralBackgroundColor:Ye.settingGeneralBackgroundColor,settingGeneralMarginTop:Ye.settingGeneralMarginTop,settingGeneralMarginBottom:Ye.settingGeneralMarginBottom,settingTextBackgroundColor:Ye.settingTextBackgroundColor,settingTextHorizontalAlignment:Ye.settingTextHorizontalAlignment,settingTextWidth:Ye.settingTextWidth,settingTextHeight:Ye.settingTextHeight,settingTextPadding:Ye.settingTextPadding,settingAssetBackgroundColor:Ye.settingAssetBackgroundColor,settingAssetPadding:Ye.settingAssetPadding,isEditing:Ye.isEditing,themeStyleguideId:Ye.themeStyleguideId,portalId:Ye.portalId,mainFontFamily:Ye.mainFontFamily})}));var se=Object.defineProperty,ge=Object.getOwnPropertySymbols,$e=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable,rt=(Ye,lt,nt)=>lt in Ye?se(Ye,lt,{enumerable:!0,configurable:!0,writable:!0,value:nt}):Ye[lt]=nt,Qe=(Ye,lt)=>{for(var nt in lt||(lt={}))$e.call(lt,nt)&&rt(Ye,nt,lt[nt]);if(ge)for(var nt of ge(lt))et.call(lt,nt)&&rt(Ye,nt,lt[nt]);return Ye};const it=(0,t.I)(Ye=>(0,s.jsx)("div",Qe({className:"mod mod-m-block-toolbar cm-block-toolbar"},Ye.tpl.renderDataAttributesAsObject(Ye)))),ct=(0,t.I)(Ye=>(0,s.jsx)("div",{className:`cm-block__block-toolbar ${Ye.hidden?"cm-block__block-toolbar--hidden":""} js-cm-block__block-toolbar`,children:(0,s.jsx)(it,{settings:Ye.settings})}));var ft=Object.defineProperty,_s=Object.getOwnPropertySymbols,Bt=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable,Ct=(Ye,lt,nt)=>lt in Ye?ft(Ye,lt,{enumerable:!0,configurable:!0,writable:!0,value:nt}):Ye[lt]=nt,at=(Ye,lt)=>{for(var nt in lt||(lt={}))Bt.call(lt,nt)&&Ct(Ye,nt,lt[nt]);if(_s)for(var nt of _s(lt))gt.call(lt,nt)&&Ct(Ye,nt,lt[nt]);return Ye};const Ht=(0,t.I)(Ye=>(0,s.jsx)("div",at({className:"mod mod-m-block-asset-settings cm-block-asset-settings"},Ye.tpl.renderDataAttributesAsObject(Ye))));var Vt=Object.defineProperty,Fs=Object.getOwnPropertySymbols,Hs=Object.prototype.hasOwnProperty,Us=Object.prototype.propertyIsEnumerable,ys=(Ye,lt,nt)=>lt in Ye?Vt(Ye,lt,{enumerable:!0,configurable:!0,writable:!0,value:nt}):Ye[lt]=nt,Vs=(Ye,lt)=>{for(var nt in lt||(lt={}))Hs.call(lt,nt)&&ys(Ye,nt,lt[nt]);if(Fs)for(var nt of Fs(lt))Us.call(lt,nt)&&ys(Ye,nt,lt[nt]);return Ye};const Oa=(0,t.I)(Ye=>(0,s.jsx)("div",Vs({className:"mod mod-block-divider-settings block-divider-settings"},Ye.tpl.renderDataAttributesAsObject(Ye))));var nn=Object.defineProperty,Va=Object.getOwnPropertySymbols,hn=Object.prototype.hasOwnProperty,Bs=Object.prototype.propertyIsEnumerable,os=(Ye,lt,nt)=>lt in Ye?nn(Ye,lt,{enumerable:!0,configurable:!0,writable:!0,value:nt}):Ye[lt]=nt,ha=(Ye,lt)=>{for(var nt in lt||(lt={}))hn.call(lt,nt)&&os(Ye,nt,lt[nt]);if(Va)for(var nt of Va(lt))Bs.call(lt,nt)&&os(Ye,nt,lt[nt]);return Ye};const Qn=(0,t.I)(Ye=>(0,s.jsx)("div",ha({className:"mod mod-block-text-asset-settings block-text-asset-settings"},Ye.tpl.renderDataAttributesAsObject(Ye))));var wn=Object.defineProperty,$s=Object.getOwnPropertySymbols,Ta=Object.prototype.hasOwnProperty,Vn=Object.prototype.propertyIsEnumerable,Xn=(Ye,lt,nt)=>lt in Ye?wn(Ye,lt,{enumerable:!0,configurable:!0,writable:!0,value:nt}):Ye[lt]=nt,Br=(Ye,lt)=>{for(var nt in lt||(lt={}))Ta.call(lt,nt)&&Xn(Ye,nt,lt[nt]);if($s)for(var nt of $s(lt))Vn.call(lt,nt)&&Xn(Ye,nt,lt[nt]);return Ye};const Yr=(0,t.I)(Ye=>(0,s.jsx)("div",Br({className:"mod mod-block-text-settings block-text-settings"},Ye.tpl.renderDataAttributesAsObject(Ye))));var Rt=r(29835),Ze=r(50427),vt=r(18216),Et=r(38291),Ra=r(39232),qs=r(96983),gs=r(5181);class xs extends vt.j{static get BLOCK_EMPTY(){return"EMPTY"}static get BLOCK_TEXT(){return"TEXT"}static get BLOCK_DIVIDER(){return"DIVIDER"}static get BLOCK_ASSET(){return"ASSET"}static get BLOCK_TEXT_ASSET(){return"TEXT_ASSET"}static get BLOCK_TYPES(){return[xs.BLOCK_EMPTY,xs.BLOCK_TEXT,xs.BLOCK_DIVIDER,xs.BLOCK_ASSET,xs.BLOCK_TEXT_ASSET]}on(lt){this.sandbox.subscribe("events",this),this.tpl.bindDataAttributes(this,{block:{type:Object,changed:()=>this.updateBlock()},allowedBlockTypes:{type:Object,default:xs.BLOCK_TYPES},isEditing:{type:Boolean,changed:()=>this.updateIsEditing()},themeStyleguideId:{type:Number},portalId:{type:Number},brandId:{type:Number},activateSettings:{type:Object},mainFontFamily:{type:String}}),this.toolbarClosable=!0,this.renderToolbar(),this.renderBlock(),this.renderBlockAdd(),this.renderBlockEmpty(),this.bindToolbar(),this.bindBlock(),this.bindBlockAdd(),lt()}renderBlock(){if(!this.isValidBlock()||!this.isAllowedBlockType(this.block.type))return;let lt;switch(this.block.type){case xs.BLOCK_TEXT:lt=(0,Ze.EY)(Be,{blockText:this.block.text,settingPadding:this.getPadding(),settingWidth:this.getSettingByName("width"),settingHeight:this.getSettingByName("height"),settingHorizontalAlignment:this.getSettingByName("horizontalAlignment"),settingBackgroundColor:this.getSettingByName("backgroundColor"),isEditing:this.isEditing,themeStyleguideId:this.themeStyleguideId,portalId:this.portalId,mainFontFamily:this.mainFontFamily});break;case xs.BLOCK_DIVIDER:lt=(0,Ze.EY)(fe,{settingColor:this.getColor(),settingStyle:this.getSettingByName("style"),settingPadding:this.getPadding(),settingWidth:this.getSettingByName("width"),settingHeight:this.getSettingByName("height"),settingHorizontalAlignment:this.getSettingByName("horizontalAlignment"),settingBackgroundColor:this.getSettingByName("backgroundColor"),isEditing:this.isEditing});break;case xs.BLOCK_ASSET:lt=(0,Ze.EY)(p,{asset:this.block.asset,error:this.block.error,brandId:this.brandId,settingImageAlignment:this.getSettingByName("imageAlignment"),settingPadding:this.getPadding(),settingWidth:this.getSettingByName("width"),settingHeight:this.getSettingByName("height"),settingHorizontalAlignment:this.getSettingByName("horizontalAlignment"),settingBackgroundColor:this.getSettingByName("backgroundColor"),isEditing:this.isEditing});break;case xs.BLOCK_TEXT_ASSET:lt=(0,Ze.EY)(ce,{asset:this.block.asset,error:this.block.error,brandId:this.brandId,blockText:this.block.text,settingGeneralLayout:this.getSettingByName(qs.y.SETTING_GENERAL_LAYOUT),settingGeneralBackgroundColor:this.getSettingByName(qs.y.SETTING_GENERAL_BACKGROUND_COLOR),settingGeneralMarginTop:this.getSettingByName(qs.y.SETTING_GENERAL_MARGIN_TOP),settingGeneralMarginBottom:this.getSettingByName(qs.y.SETTING_GENERAL_MARGIN_BOTTOM),settingTextBackgroundColor:this.getSettingByName(qs.y.SETTING_TEXT_BACKGROUND_COLOR),settingTextHorizontalAlignment:this.getSettingByName(qs.y.SETTING_TEXT_HORIZONTAL_ALIGNMENT),settingTextWidth:this.getSettingByName(qs.y.SETTING_TEXT_WIDTH),settingTextHeight:this.getSettingByName(qs.y.SETTING_TEXT_HEIGHT),settingTextPadding:this.getPadding(qs.y.SETTING_TEXT_PADDING),settingAssetBackgroundColor:this.getSettingByName(qs.y.SETTING_ASSET_BACKGROUND_COLOR),settingAssetPadding:this.getPadding(qs.y.SETTING_ASSET_PADDING),isEditing:this.isEditing,themeStyleguideId:this.themeStyleguideId,portalId:this.portalId,mainFontFamily:this.mainFontFamily});break;default:console.warn(`Unsupported block type '${this.block.type}' width id '${this.block.id}' detected`);return}const nt=gs(lt);this.$ctx.append(nt),window.application.sandbox.addModules(nt)}renderToolbar(){if(!this.isValidBlock()||this.isEmptyBlockType())return;const lt=gs((0,Ze.EY)(ct,{hidden:!this.isEditing,settings:this.renderBlockSettings()}));this.$ctx.append(lt),window.application.sandbox.addModules(lt)}renderBlockSettings(){let lt="";switch(this.block.type){case xs.BLOCK_DIVIDER:lt=this.renderBlockDividerSettings();break;case xs.BLOCK_TEXT:lt=this.renderBlockTextSettings();break;case xs.BLOCK_ASSET:lt=this.renderBlockAssetSettings();break;case xs.BLOCK_TEXT_ASSET:lt=this.renderBlockTextAssetSettings();break}return lt}renderBlockDividerSettings(){return(0,Ze.EY)(Oa,{blockId:this.block.id,themeStyleguideId:this.themeStyleguideId,settingColor:this.getColor(),settingStyle:this.getSettingByName("style"),settingPadding:this.getPadding(),settingWidth:this.getSettingByName("width"),settingHeight:this.getSettingByName("height"),settingHorizontalAlignment:this.getSettingByName("horizontalAlignment"),settingBackgroundColor:this.getSettingByName("backgroundColor"),activateSettings:this.getActivatedSettingsByBlock("divider")})}renderBlockTextSettings(){return(0,Ze.EY)(Yr,{blockId:this.block.id,themeStyleguideId:this.themeStyleguideId,settingPadding:this.getPadding(),settingWidth:this.getSettingByName("width"),settingHeight:this.getSettingByName("height"),settingHorizontalAlignment:this.getSettingByName("horizontalAlignment"),settingBackgroundColor:this.getSettingByName("backgroundColor"),activateSettings:this.getActivatedSettingsByBlock("text")})}renderBlockAssetSettings(){return(0,Ze.EY)(Ht,{blockId:this.block.id,themeStyleguideId:this.themeStyleguideId,brandId:this.brandId,assetId:this.block.asset_id,settingImageAlignment:this.getSettingByName("imageAlignment"),settingPadding:this.getPadding(),settingWidth:this.getSettingByName("width"),settingHeight:this.getSettingByName("height"),settingHorizontalAlignment:this.getSettingByName("horizontalAlignment"),settingBackgroundColor:this.getSettingByName("backgroundColor"),activateSettings:this.getActivatedSettingsByBlock("asset")})}renderBlockTextAssetSettings(){return(0,Ze.EY)(Qn,{blockId:this.block.id,themeStyleguideId:this.themeStyleguideId,brandId:this.brandId,assetId:this.block.asset_id,settingGeneralLayout:this.getSettingByName(qs.y.SETTING_GENERAL_LAYOUT),settingGeneralBackgroundColor:this.getSettingByName(qs.y.SETTING_GENERAL_BACKGROUND_COLOR),settingGeneralMarginTop:this.getSettingByName(qs.y.SETTING_GENERAL_MARGIN_TOP),settingGeneralMarginBottom:this.getSettingByName(qs.y.SETTING_GENERAL_MARGIN_BOTTOM),settingTextBackgroundColor:this.getSettingByName(qs.y.SETTING_TEXT_BACKGROUND_COLOR),settingTextHorizontalAlignment:this.getSettingByName(qs.y.SETTING_TEXT_HORIZONTAL_ALIGNMENT),settingTextWidth:this.getSettingByName(qs.y.SETTING_TEXT_WIDTH),settingTextHeight:this.getSettingByName(qs.y.SETTING_TEXT_HEIGHT),settingTextPadding:this.getPadding(qs.y.SETTING_TEXT_PADDING),settingAssetBackgroundColor:this.getSettingByName(qs.y.SETTING_ASSET_BACKGROUND_COLOR),settingAssetPadding:this.getPadding(qs.y.SETTING_ASSET_PADDING),activateSettings:this.getActivatedSettingsByBlock("textAsset")})}renderBlockAdd(){if(!this.isValidBlock())return;const lt=gs((0,Ze.EY)(o,{hidden:!this.isEditing,blockChooser:(0,Ze.EY)(L,{allowedBlockTypes:this.allowedBlockTypes})}));this.$ctx.append(lt),window.application.sandbox.addModules(lt)}renderBlockEmpty(){if(!this.isEmptyBlockType())return;const lt=gs((0,Ze.EY)(pe,{hidden:!this.block.showPlaceholder||!this.isEditing,labelEmptyPlaceholderTitle:this.block.labelEmptyPlaceholderTitle}));this.$ctx.append(lt),window.application.sandbox.addModules(lt)}bindToolbar(){const lt=this.$ctx.find(".js-cm-block__block-toolbar");switch(this.$ctx.on("mouseenter",()=>this.showToolbar()),this.$ctx.on("mouseleave",()=>this.hideToolbar()),lt.on("blockToolbarDeleted",nt=>{this.tpl.fireCustomEvent(this,"blockDeleted",{block:this.block}),(0,Et.s)("delete connect email block",{type:this.block.type}),nt.stopPropagation()}),lt.on("blockToolbarDropdownOpened",nt=>{nt.stopPropagation(),this.toolbarClosable=!1}),lt.on("blockToolbarDropdownClosed",nt=>{nt.stopPropagation(),this.toolbarClosable=!0,this.$ctx.is(":hover")||this.hideToolbar()}),this.block.type){case xs.BLOCK_EMPTY:break;case xs.BLOCK_DIVIDER:lt.on("blockSettingsSaved",nt=>{this.tpl.fireCustomEvent(this,"blockSettingsSaved",{block:this.block,settings:this.addOrReplaceSettingByName(nt.detail.name,nt.detail.value)}),nt.stopPropagation()});break;case xs.BLOCK_TEXT:lt.on("blockSettingsSaved",nt=>{this.tpl.fireCustomEvent(this,"blockSettingsSaved",{block:this.block,settings:this.addOrReplaceSettingByName(nt.detail.name,nt.detail.value)}),nt.stopPropagation()});break;case xs.BLOCK_ASSET:lt.on("blockAssetSettingsAssetChosen",nt=>{const za=nt.detail&&nt.detail.assetId||"";this.tpl.fireCustomEvent(this,"blockAssetAssetChosen",{block:this.block,assetId:za}),nt.stopPropagation()}),lt.on("blockSettingsSaved",nt=>{this.tpl.fireCustomEvent(this,"blockSettingsSaved",{block:this.block,settings:this.addOrReplaceSettingByName(nt.detail.name,nt.detail.value)}),nt.stopPropagation()});break;case xs.BLOCK_TEXT_ASSET:lt.on("blockTextAssetSettingsAssetChosen",nt=>{const za=nt.detail&&nt.detail.assetId||"";this.tpl.fireCustomEvent(this,"blockTextAssetAssetChosen",{block:this.block,assetId:za}),nt.stopPropagation()}),lt.on("blockSettingsSaved",nt=>{this.tpl.fireCustomEvent(this,"blockSettingsSaved",{block:this.block,settings:this.addOrReplaceSettingByName(nt.detail.name,nt.detail.value)}),nt.stopPropagation()});break;default:throw new Error(`Unsupported block type: ${this.block.type}. Allowed: ${xs.BLOCK_TYPES.join(", ")}.`)}}bindBlock(){if(this.isValidBlock()&&!this.isEmptyBlockType()&&this.isAllowedBlockType(this.block.type))switch(this.block.type){case xs.BLOCK_TEXT:this.bindBlockText();break;case xs.BLOCK_ASSET:this.bindBlockAsset();break;case xs.BLOCK_TEXT_ASSET:this.bindBlockTextAsset();break}}bindBlockText(){this.$ctx.find(".js-cm-block__block-text").on("blockTextSaved",nt=>{const za=nt.detail&&nt.detail.text||"";this.tpl.fireCustomEvent(this,"blockBlockTextSaved",{block:this.block,text:za}),nt.stopPropagation()})}bindBlockAsset(){this.$ctx.find(".js-cm-block__block-asset").on("blockAssetAssetChosen",nt=>{const za=nt.detail&&nt.detail.assetId||"";this.tpl.fireCustomEvent(this,"blockAssetAssetChosen",{block:this.block,assetId:za}),nt.stopPropagation()})}bindBlockTextAsset(){const lt=this.$ctx.find(".js-cm-block__block-text-asset");lt.on("blockAssetAssetChosen",nt=>{nt.stopPropagation();const za=nt.detail&&nt.detail.assetId||"";this.tpl.fireCustomEvent(this,"blockAssetAssetChosen",{block:this.block,assetId:za})}),lt.on("blockTextSaved",nt=>{const za=nt.detail&&nt.detail.text||"";this.tpl.fireCustomEvent(this,"blockBlockTextSaved",{block:this.block,text:za}),nt.stopPropagation()})}bindBlockAdd(){const lt=this.$ctx.find(".js-cm-block__block-add"),nt=this.$ctx.find(".js-cm-block__block-add-toggle"),za=this.$ctx.find(".js-cm-block__block-add-menu");lt.on("clicked",()=>nt.trigger("click"));const kn=za.children().first(),Bn=new Ra.D(kn,this.sandbox),On=Bn.getSetting("block-list-chooser-blocks");On.saved=jr=>{const Ln=jr.blockListChooserBlocks;xs.BLOCK_TYPES.includes(Ln)&&this.tpl.fireCustomEvent(this,"blockAdded",{position:this.block.position+1,blockType:Ln}),this.fire("closeDropdown",za,["events"]),Bn.destroy()}}updateIsEditing(){this.updateBlock(),this.updateBlockAdd(),this.updateToolbar()}updateBlock(){switch(this.block.type){case xs.BLOCK_TEXT:this.updateBlockText();break;case xs.BLOCK_DIVIDER:this.updateBlockDivider();break;case xs.BLOCK_ASSET:this.updateBlockAsset();break;case xs.BLOCK_TEXT_ASSET:this.updateBlockTextAsset();break;case xs.BLOCK_EMPTY:this.updateBlockEmpty()}}updateBlockText(){const lt=this.$ctx.find(".js-cm-block__block-text"),nt=Rt.u.getFirstChildModule(lt);nt.$ctx.dataAsBoolean("isEditing",this.isEditing),nt.$ctx.dataAsString("text",this.block.text),nt.$ctx.dataAsObject("settingPadding",this.getPadding("padding")),nt.$ctx.dataAsString("settingWidth",this.getSettingByName("width")),nt.$ctx.dataAsString("settingHeight",this.getSettingByName("height")),nt.$ctx.dataAsString("settingHorizontalAlignment",this.getSettingByName("horizontalAlignment")),nt.$ctx.dataAsString("settingBackgroundColor",this.getSettingByName("backgroundColor"))}updateBlockDivider(){const lt=this.$ctx.find(".js-cm-block__block-divider"),nt=Rt.u.getFirstChildModule(lt);nt.$ctx.dataAsBoolean("isEditing",this.isEditing),nt.$ctx.dataAsString("settingColor",this.getColor()),nt.$ctx.dataAsString("settingStyle",this.getSettingByName("style")),nt.$ctx.dataAsObject("settingPadding",this.getPadding("padding")),nt.$ctx.dataAsString("settingWidth",this.getSettingByName("width")),nt.$ctx.dataAsString("settingHeight",this.getSettingByName("height")),nt.$ctx.dataAsString("settingHorizontalAlignment",this.getSettingByName("horizontalAlignment")),nt.$ctx.dataAsString("settingBackgroundColor",this.getSettingByName("backgroundColor"))}updateBlockAsset(){const lt=this.$ctx.find(".js-cm-block__block-asset"),nt=Rt.u.getFirstChildModule(lt);nt.$ctx.dataAsBoolean("isEditing",this.isEditing),nt.$ctx.dataAsObject("asset",this.block.asset),nt.$ctx.dataAsString("settingImageAlignment",this.getSettingByName("imageAlignment")),nt.$ctx.dataAsObject("settingPadding",this.getPadding("padding")),nt.$ctx.dataAsString("settingWidth",this.getSettingByName("width")),nt.$ctx.dataAsString("settingHeight",this.getSettingByName("height")),nt.$ctx.dataAsString("settingHorizontalAlignment",this.getSettingByName("horizontalAlignment")),nt.$ctx.dataAsString("settingBackgroundColor",this.getSettingByName("backgroundColor"))}updateBlockTextAsset(){const lt=this.$ctx.find(".js-cm-block__block-text-asset"),nt=Rt.u.getFirstChildModule(lt);nt.$ctx.dataAsBoolean("isEditing",this.isEditing),nt.$ctx.dataAsObject("asset",this.block.asset),nt.$ctx.dataAsString("text",this.block.text),nt.$ctx.dataAsString("settingGeneralLayout",this.getSettingByName(qs.y.SETTING_GENERAL_LAYOUT)),nt.$ctx.dataAsString("settingGeneralBackgroundColor",this.getSettingByName(qs.y.SETTING_GENERAL_BACKGROUND_COLOR)),nt.$ctx.dataAsString("settingGeneralMarginTop",this.getSettingByName(qs.y.SETTING_GENERAL_MARGIN_TOP)),nt.$ctx.dataAsString("settingGeneralMarginBottom",this.getSettingByName(qs.y.SETTING_GENERAL_MARGIN_BOTTOM)),nt.$ctx.dataAsString("settingTextBackgroundColor",this.getSettingByName(qs.y.SETTING_TEXT_BACKGROUND_COLOR)),nt.$ctx.dataAsString("settingTextHorizontalAlignment",this.getSettingByName(qs.y.SETTING_TEXT_HORIZONTAL_ALIGNMENT)),nt.$ctx.dataAsString("settingTextWidth",this.getSettingByName(qs.y.SETTING_TEXT_WIDTH)),nt.$ctx.dataAsString("settingTextHeight",this.getSettingByName(qs.y.SETTING_TEXT_HEIGHT)),nt.$ctx.dataAsObject("settingTextPadding",this.getPadding(qs.y.SETTING_TEXT_PADDING)),nt.$ctx.dataAsString("settingAssetBackgroundColor",this.getSettingByName(qs.y.SETTING_ASSET_BACKGROUND_COLOR)),nt.$ctx.dataAsObject("settingAssetPadding",this.getPadding(qs.y.SETTING_ASSET_PADDING))}updateBlockAdd(){const lt=this.$ctx.find(".js-cm-block__block-add"),nt="cm-block__block-add--hidden";this.isEditing?lt.removeClass(nt):lt.addClass(nt)}updateToolbar(){const lt=this.$ctx.find(".js-cm-block__block-toolbar");this.isEditing||lt.addClass("cm-block__block-toolbar--hidden"),this.isEditing&&this.$ctx.is(":hover")&&this.showToolbar()}updateBlockEmpty(){const lt=this.$ctx.find(".js-cm-block__block-empty"),nt="cm-block__block-empty--hidden";!this.block.showPlaceholder||!this.isEditing?lt.addClass(nt):lt.removeClass(nt)}isValidBlock(){return this.block&&this.block.id>=0&&this.block.type}isEmptyBlockType(){return this.block.type===xs.BLOCK_EMPTY}isAllowedBlockType(lt){return f.y.isArray(this.allowedBlockTypes)?this.allowedBlockTypes.includes(lt):!1}getPadding(lt="padding"){const nt=this.getSettingByName(lt)||{};let za,kn,Bn,On;switch(this.block.type){case xs.BLOCK_TEXT:case xs.BLOCK_DIVIDER:({top:za=20,left:On=20,right:kn=20,bottom:Bn=20}=nt);break;case xs.BLOCK_TEXT_ASSET:lt===qs.y.SETTING_TEXT_PADDING?{top:za=20,left:On=20,right:kn=20,bottom:Bn=20}=nt:{top:za=0,left:On=0,right:kn=0,bottom:Bn=0}=nt;break;default:({top:za=0,left:On=0,right:kn=0,bottom:Bn=0}=nt)}return{top:za,left:On,right:kn,bottom:Bn}}getColor(){let lt=this.getSettingByName("color");switch(this.block.type){case xs.BLOCK_DIVIDER:lt===null&&(lt="rgb(204,204,204)");break}return lt}getSettingByName(lt){if(!this.block.settings)return null;const nt=this.block.settings;return nt[lt]?nt[lt]:null}getActivatedSettingsByBlock(lt){if(!this.activateSettings||!this.activateSettings[lt])return[];const nt=this.activateSettings[lt];return f.y.isArray(nt)?nt:[]}addOrReplaceSettingByName(lt,nt){const za=this.block.settings||{};return za[lt]=nt,za}showToolbar(){if(!this.isEditing)return;this.$ctx.find(".js-cm-block__block-toolbar").removeClass("cm-block__block-toolbar--hidden")}hideToolbar(){if(!this.isEditing||!this.toolbarClosable)return;this.$ctx.find(".js-cm-block__block-toolbar").addClass("cm-block__block-toolbar--hidden")}}},74688:function(ve,$,r){"use strict";r.d($,{i:function(){return O}});var s=r(4957),b=r(76746),t=r(96840),_=r(14860),C=r(25100),y=r(5188),g=r(95878),m=r(50427),T=r(18216),E=r(39232),w=r(64698),u=r(86070),c=r(27833),o=r(14154);const l=(0,o.I)(()=>(0,u.jsx)("div",{className:"co-settings--overlay",children:(0,u.jsx)("fieldset",{className:"co-settings__fieldset--notitle",children:(0,u.jsx)(c.H,{id:"delete_block",label:"Delete Block",description:window.translate("Legacy_confirmation_delete")})})})),p=(0,o.I)(()=>(0,u.jsx)("div",{className:"co-settings--overlay",children:(0,u.jsx)("fieldset",{className:"co-settings__fieldset--notitle",children:(0,u.jsx)(c.H,{id:"delete_section",label:"Delete Section",description:"Are you sure"})})}));var f=r(5181);class O extends T.j{static get ESCAPE_KEY_CODE(){return 27}constructor(P,N,S){super(P,N,"blockmanager"),this.sandbox.subscribe("events",this),this.config=f.extend(!0,{emptyBlockTemplate:null,cutBlockTemplate:null,copyBlockTemplate:null,cutSectionTemplate:null},S),this.$cutBlock=null,this.$copyBlock=null,this.$cutSection=null,this.$ctx.addClass("cm-blockmanager"),P.on("click",".js-cm-blockmanager__block-delete",R=>{const B=f(R.currentTarget).closest(".js-cm-blockmanager__block");this._deleteBlock(B)}),P.on("click",".js-cm-blockmanager__block-cut",R=>{const B=f(R.currentTarget).closest(".js-cm-blockmanager__block");this._cutBlock(B)}),P.on("click",".js-cm-blockmanager__cut-insert",R=>{const B=f(R.currentTarget).closest(".js-cm-blockmanager__block");this._insertCutBlock(B)}),P.on("click",".js-cm-blockmanager__block-copy",R=>{const B=f(R.currentTarget).closest(".js-cm-blockmanager__block");this._copyBlock(B)}),P.on("click",".js-cm-blockmanager__copy-insert",R=>{const B=f(R.currentTarget).closest(".js-cm-blockmanager__block");this._insertCopyBlock(B)}),P.on("click",".js-cm-blockmanager__section-delete",R=>{const B=f(R.currentTarget).closest(".js-cm-blockmanager__section");this._deleteSection(B)}),P.on("click",".js-cm-blockmanager__section-cut",R=>{const B=f(R.currentTarget).closest(".js-cm-blockmanager__section");this._cutSection(B)}),P.on("click",".js-cm-blockmanager__section-cut-insert",R=>{const B=f(R.currentTarget).closest(".js-cm-blockmanager__section");this._insertSection(B)})}_settingsBlock(P){const N=this.sandbox.getModuleById(P.data("terrificId")),S=P.find(".js-cm-blockmanager__block-settings-container"),R=f((0,m.EY)(w.I,{menu_content:(0,m.EY)(s.T),show_close_btn:!0}));this.tpl.addAndActivate(S,R);const U=S.find(".js-cm-btn-dropdown__content");typeof N.settings=="function"&&N.settings(U)}_cutBlock(P){this.$cutBlock||(this.$ctx.addClass("state-cut-block"),P.velocity({opacity:.2}),P.css({pointerEvents:"none"}),this.$cutBlock=P,this.config.cutBlockTemplate&&this.$ctx.find(".js-cm-blockmanager__block").each((S,R)=>{const U=f(R);U.is(P)||U.append(f((0,m.EY)(this.config.cutBlockTemplate)))}),f(window).on("keyup.blockmanager",N=>{N.which===O.ESCAPE_KEY_CODE&&this._resetBlocks()}))}_copyBlock(P){this.$copyBlock||(this.$ctx.addClass("state-copy-block"),P.velocity({opacity:.2}),P.css({pointerEvents:"none"}),this.$copyBlock=P,this.config.copyBlockTemplate&&this.$ctx.find(".js-cm-blockmanager__block").each((S,R)=>{const U=f(R);U.is(P)||U.append(f((0,m.EY)(this.config.copyBlockTemplate)))}),f(window).on("keyup.blockmanager",N=>{N.which===O.ESCAPE_KEY_CODE&&this._resetBlocks()}))}_insertCutBlock(P){if(this.$cutBlock){const N=this.$cutBlock.closest(".js-po-brandportal__col"),S=this.$cutBlock.data(),R=P.data();P.replaceWith(this.$cutBlock),this._resetBlocks(),this.data.put(`/api/hub/teaser/${R.block}?invocation_source=49`,{source:S.block}).then(U=>{if(this.config.emptyBlockTemplate){const B=f((0,m.EY)(this.config.emptyBlockTemplate,U));N.append(B),this.sandbox.addModules(B),this.fire("blockInserted")}})}}_insertCopyBlock(P){if(this.$copyBlock){const N=this.$copyBlock.data(),S=P.data();this.data.get(`/api/hub/teaser/${N.block}?invocation_source=50`).then(R=>{this.data.post(`/api/hub/teaser/${S.block}?invocation_source=51`,R.teaser).then(U=>{const M=(F=>{switch(F.toLocaleLowerCase()){case"divider":return b.O;case"iframe":return t.f;case"media":return _.T;case"none":return C.B;case"textimage":return y.J;case"video":return g.O;default:return null}})(N.type);if(!M)return;const I=f((0,m.EY)(M,U));P.replaceWith(I),this.sandbox.addModules(I),this.fire("blockInserted"),this._resetBlocks()})})}}_resetBlocks(){this.$cutBlock&&(this.$ctx.removeClass("state-cut-block"),this.$cutBlock.velocity({opacity:1}),this.$cutBlock.css({pointerEvents:"auto"}),this.$ctx.find(".js-cm-blockmanager__cut").remove(),this.$cutBlock=null),this.$copyBlock&&(this.$ctx.removeClass("state-copy-block"),this.$copyBlock.velocity({opacity:1}),this.$copyBlock.css({pointerEvents:"auto"}),this.$ctx.find(".js-cm-blockmanager__copy").remove(),this.$copyBlock=null),f(window).off("keyup.blockmanager")}_deleteBlock(P){const N=P.find(".js-cm-blockmanager__block-delete-container"),S=f((0,m.EY)(l));N.html(S);const U=new E.D(S,this.sandbox).getSetting("delete_block");U.focus(),U.deleted=async()=>{typeof this.deleteBlock=="function"&&await this.deleteBlock(P)},U.cancelled=()=>{this.fire("closeDropdown",N,["events"])}}_settingsSection(P){const N=P.find(".js-cm-blockmanager__section-settings-container"),S=f((0,m.EY)(w.I,{menu_content:(0,m.EY)(s.T),show_close_btn:!0}));this.tpl.addAndActivate(N,S);let R=null;if(P.data("id")&&(R=parseInt(P.data("id"))),typeof this.sectionSettings=="function"){const U=N.find(".js-cm-btn-dropdown__content");this.sectionSettings(U,R)}}_cutSection(P){this.$cutSection||(this.$ctx.addClass("state-cut-section"),P.velocity({opacity:.2}),P.css({pointerEvents:"none"}),this.$cutSection=P,this.config.cutSectionTemplate&&this.$ctx.find(".js-cm-blockmanager__section").each((S,R)=>{const U=f(R);U.is(P)||U.append((0,m.EY)(this.config.cutSectionTemplate))}),f(window).on("keyup.blockmanager",N=>{N.which===O.ESCAPE_KEY_CODE&&this._resetSections()}))}_insertSection(P){if(this.$cutSection){const N=this.$cutSection.data("row"),S=P.data("row");P.after(this.$cutSection),this._resetSections(),this.fire("sectionInserted"),this.data.put(`/api/hub/grid/${S}`,{hub_id:f(".document").data("hub"),source:N})}}_resetSections(){this.$ctx.removeClass("state-cut-section"),this.$cutSection&&(this.$cutSection.velocity({opacity:1}),this.$cutSection.css({pointerEvents:"auto"})),this.$ctx.find(".js-cm-blockmanager__cut").remove(),this.$cutSection=null,f(window).off("keyup.blockmanager")}_deleteSection(P){const N=P.find(".js-cm-blockmanager__section-delete-container"),S=f((0,m.EY)(p));N.html(S);const U=new E.D(S,this.sandbox).getSetting("delete_section");U.focus(),U.deleted=async()=>{typeof this.deleteSection=="function"&&await this.deleteSection(P)},U.cancelled=()=>{this.fire("closeDropdown",N,["events"])}}onBlockSettingsOpened(P){const S=P.$toggle.closest(".js-cm-blockmanager__block");S.addClass("state-settings-open"),this._settingsBlock(S)}onBlockSettingsClosed(P){P.$toggle.closest(".js-cm-blockmanager__block").removeClass("state-settings-open")}onSectionSettingsOpened(P){const S=P.$toggle.closest(".js-cm-blockmanager__section");S.addClass("state-settings-open"),this._settingsSection(S)}onSectionSettingsClosed(P){P.$toggle.closest(".js-cm-blockmanager__section").removeClass("state-settings-open")}onSectionDeleteMenuOpened(P){P.$toggle.closest(".js-cm-blockmanager__section").addClass("state-delete-menu-open")}onSectionDeleteMenuClosed(P){P.$toggle.closest(".js-cm-blockmanager__section").removeClass("state-delete-menu-open")}onResetBlocksAndSections(){this._resetBlocks(),this._resetSections()}}},21348:function(ve,$,r){"use strict";r.d($,{f:function(){return _}});var s=r(86070),b=r(78149),t=r(14154);const _=(0,t.I)(C=>(0,s.jsxs)("div",{className:"cm-blockmanager__toolbar",children:[!C.translation||C.type==="TEXTIMAGE"||C.type==="VIDEO"||C.type==="MEDIA"||C.type==="IFRAME"?(0,s.jsxs)("div",{className:"cm-btn-dropdown",children:[(0,s.jsx)("button",{className:"cm-blockmanager__toolbar-btn js-cm-btn-dropdown__toggle","data-event":"blockSettings",title:window.translate("Legacy_blockmanager_toolbar_settings"),"aria-label":window.translate("Legacy_blockmanager_toolbar_settings"),children:(0,s.jsx)(b.V,{icon:"settings"})}),(0,s.jsx)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--below cm-btn-dropdown__menu--fixed-width cm-btn-dropdown__menu--right js-cm-btn-dropdown__menu js-cm-blockmanager__block-settings-container"})]}):null,!C.translation&&C.utils.account.hasPermission("edit")?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"cm-blockmanager__toolbar-btn js-cm-blockmanager__block-copy",title:window.translate("Legacy_blockmanager_toolbar_copy"),"aria-label":window.translate("Legacy_blockmanager_toolbar_copy"),children:(0,s.jsx)(b.V,{icon:"duplicate"})}),(0,s.jsx)("button",{className:"cm-blockmanager__toolbar-btn js-cm-blockmanager__block-cut",title:window.translate("Legacy_blockmanager_toolbar_cut"),"aria-label":window.translate("Legacy_blockmanager_toolbar_cut"),children:(0,s.jsx)(b.V,{icon:"cut"})}),(0,s.jsxs)("div",{className:"cm-btn-dropdown",children:[(0,s.jsx)("button",{className:"cm-blockmanager__toolbar-btn js-cm-blockmanager__block-delete js-cm-btn-dropdown__toggle",title:window.translate("Legacy_blockmanager_toolbar_delete"),"aria-label":window.translate("Legacy_blockmanager_toolbar_delete"),children:(0,s.jsx)(b.V,{icon:"trash"})}),(0,s.jsx)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--below cm-btn-dropdown__menu--right js-cm-btn-dropdown__menu js-cm-blockmanager__block-delete-container"})]})]}):null]}))},57266:function(ve,$,r){"use strict";r.d($,{m:function(){return c}});var s=r(86070),b=r(78149),t=r(14154),_=Object.defineProperty,C=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=(o,l,p)=>l in o?_(o,l,{enumerable:!0,configurable:!0,writable:!0,value:p}):o[l]=p,w=(o,l)=>{for(var p in l||(l={}))m.call(l,p)&&E(o,p,l[p]);if(g)for(var p of g(l))T.call(l,p)&&E(o,p,l[p]);return o},u=(o,l)=>C(o,y(l));const c=(0,t.I)(o=>(0,s.jsxs)("button",u(w({className:`mod mod-c-btn-confirm cm-btn-confirm ${o.classes||""} ${o.stickIconRight?"cm-btn-confirm--stick-right":""}`,"data-identifier":o.identifier},o.type?{"data-type":o.type}:{}),{children:[(0,s.jsx)(b.V,{icon:o.icon||"trash",size:"sm",classes:"cm-btn-confirm__icon"}),(0,s.jsx)("span",{className:"cm-btn-confirm__text",children:window.translate("Legacy_btn_confirm")})]})))},64698:function(ve,$,r){"use strict";r.d($,{I:function(){return y}});var s=r(86070),b=r(95376),t=r(93277),_=r(87053),C=r(14154);const y=(0,C.I)(g=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"cm-btn-dropdown__content js-cm-btn-dropdown__content",children:(0,b.Ay)(g.menu_content)}),g.show_close_btn?(0,s.jsx)("div",{className:"cm-btn-bar cm-btn-bar--footer js-cm-btn-bar",children:(0,s.jsx)(_.S,{label:window.translate("Legacy_btn_close"),size:t.Q.SIZE_LARGE,style:t.Q.STYLE_PRIMARY,background:t.Q.BACKGROUND_BLACK_05})}):null]}))},68666:function(ve,$,r){"use strict";r.d($,{W:function(){return c}});var s=r(86070),b=r(95376),t=r(14154),_=Object.defineProperty,C=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=(o,l,p)=>l in o?_(o,l,{enumerable:!0,configurable:!0,writable:!0,value:p}):o[l]=p,w=(o,l)=>{for(var p in l||(l={}))m.call(l,p)&&E(o,p,l[p]);if(g)for(var p of g(l))T.call(l,p)&&E(o,p,l[p]);return o},u=(o,l)=>C(o,y(l));const c=(0,t.I)(o=>{var l;return(0,s.jsx)("div",u(w({className:`mod mod-c-btn-switch cm-btn-switch${o.classes?` ${o.classes}`:""}`,"data-event":`${o.event?`${o.event}`:"changeFilter"}`},o.ariaLabel?{"aria-label":o.ariaLabel}:{}),{children:(l=o.options)==null?void 0:l.map(p=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",w(w({className:"cm-btn-switch__radio js-cm-btn-switch__radio",type:"radio",name:o.id,value:p.value,id:p.value},o.value==p.value||p.checked?{checked:!0}:{}),p.ariaLabel?{"aria-label":p.ariaLabel}:{})),(0,s.jsx)("label",{className:"cm-btn-switch__label",htmlFor:p.value,children:(0,b.Ay)(p.label)})]}))}))})},89410:function(ve,$,r){"use strict";r.d($,{c:function(){return t}});var s=r(86070),b=r(14154);const t=(0,b.I)(({libraryDocument:_,editMode:C,layoutType:y})=>(0,s.jsx)("form",{className:"mod mod-c-facette-filter cm-facettefilter js-cm-facettefilter","data-document":_.id,"data-project-type":_.mode,"data-edit-mode":C,"data-layout-type":y,children:(0,s.jsx)("div",{className:"js-cm-facettefilter-container"})}))},14022:function(ve,$,r){"use strict";r.d($,{c:function(){return t}});var s=r(86070),b=r(14154);const t=(0,b.I)(()=>(0,s.jsx)("span",{className:"cm-feature-hook__add",children:(0,s.jsx)("svg",{viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,s.jsx)("circle",{fill:"#FAB117",fillRule:"nonzero",cx:"6",cy:"6",r:"6"}),(0,s.jsx)("path",{d:"M0 0h12v12H0z"}),(0,s.jsx)("path",{d:"M6.533 6.533v2.369a.534.534 0 0 1-.532.534.53.53 0 0 1-.532-.53l-.001-2.374H3.095a.53.53 0 0 1-.531-.533.534.534 0 0 1 .534-.533l2.37.001-.002-2.369c0-.294.239-.533.533-.534a.53.53 0 0 1 .532.53l.001 2.374h2.373a.53.53 0 0 1 .531.533.534.534 0 0 1-.534.533l-2.37-.001z",fill:"#FFF",fillRule:"nonzero"})]})})}))},69415:function(ve,$,r){"use strict";r.d($,{V:function(){return C}});var s=r(86070),b=r(14022),t=r(14154),_=r(82110);const C=(0,t.I)(y=>(0,_.Rm)()?(0,s.jsxs)("div",{className:"mod mod-c-feature-hook cm-feature-hook cm-feature-hook--setting","data-feature":y.feature,children:[(0,s.jsx)("div",{className:"cm-feature-hook__text",children:y.text}),(0,s.jsx)("div",{className:"cm-feature-hook__badge",children:(0,s.jsx)(b.c,{})})]}):null)},98134:function(ve,$,r){"use strict";r.d($,{R:function(){return T}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(E,w,u)=>w in E?t(E,w,{enumerable:!0,configurable:!0,writable:!0,value:u}):E[w]=u,m=(E,w)=>{for(var u in w||(w={}))C.call(w,u)&&g(E,u,w[u]);if(_)for(var u of _(w))y.call(w,u)&&g(E,u,w[u]);return E};const T=(0,b.I)(E=>(0,s.jsx)("div",m({className:"mod mod-c-figure cm-figure"},E.tpl.renderDataAttributesAsObject(E))))},3064:function(ve,$,r){"use strict";r.d($,{z:function(){return P},I:function(){return L}});var s=r(50427),b=r(80135),t=r(86070),_=r(64698),C=r(14154),y=r(97711),g=Object.defineProperty,m=Object.defineProperties,T=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,c=(N,S,R)=>S in N?g(N,S,{enumerable:!0,configurable:!0,writable:!0,value:R}):N[S]=R,o=(N,S)=>{for(var R in S||(S={}))w.call(S,R)&&c(N,R,S[R]);if(E)for(var R of E(S))u.call(S,R)&&c(N,R,S[R]);return N},l=(N,S)=>m(N,T(S));const p=(0,C.I)(N=>{var S;return(0,t.jsx)("div",l(o({className:`js-co-settings__elem cm-setting__elem cm-setting-radio ${N.classes||""}`,"data-id":N.id,"data-type":"radioandcheckbox"},N.group?{"data-group":N.group}:{}),{children:(0,t.jsxs)("div",{className:"cm-setting__preview",children:[N.label?(0,t.jsx)("div",{className:"cm-setting__label",children:N.label}):null,(0,t.jsx)("div",{className:`cm-setting-radio__group${N.modifier?` cm-setting-radio__group--${N.modifier}`:""}`,children:(S=N.options)==null?void 0:S.map((R,U)=>(0,t.jsx)("div",{className:`cm-setting-radio__option${N.modifier?` cm-setting-radio__option--${N.modifier}`:""}`,children:(0,t.jsx)(y.X,{modifier:N.radioModifier,inputClasses:"js-cm-setting-radio__input",label:R.label,checked:R.checked,value:R.value,disabled:R.disabled,name:N.id})},U))})]})}))}),f=(0,C.I)(N=>{const S=(0,s.EY)(p,{id:"scope",radioModifier:"md",classes:"cm-filter-scope__radios",options:[{value:"set",label:window.translate("Legacy_filters_scope_set"),checked:N.value==="set"},{value:"set_recursively",label:window.translate("Legacy_filters_scope_set_recursively"),checked:N.value==="set_recursively"},{value:"project",label:window.translate("Legacy_filters_scope_project"),checked:N.value==="project"}]});return(0,t.jsxs)("div",{className:"cm-btn-dropdown cm-actions__action-wrap",children:[(0,t.jsxs)("button",{className:"cm-btn cm-filter-scope__dropdown-button js-cm-filter-scope__dropdown-button js-cm-btn-dropdown__toggle",type:"button",children:[(0,t.jsx)("i",{className:"cm-filter-scope__button-icon ca-icon--sm ca-icon--folder"}),(0,t.jsxs)("span",{className:"cm-filter-scope__button-text",children:[N.value==="set"?window.translate("Legacy_filters_scope_set"):null,N.value==="set_recursively"?window.translate("Legacy_filters_scope_set_recursively"):null,N.value==="project"?window.translate("Legacy_filters_scope_project"):null]}),(0,t.jsx)("i",{className:"ca-icon--sm ca-icon--caret-down cm-filter-scope__caret"})]}),(0,t.jsx)("div",{className:"cm-btn-dropdown__menu js-cm-btn-dropdown__menu cm-btn-dropdown__menu--below",children:(0,t.jsx)(_.I,{menu_content:S,show_close_btn:!0})})]})});var O=r(5181),L=(N=>(N.Project="project",N.SetRecursively="set_recursively",N.Set="set",N))(L||{});class P extends b.k{on(){this.value=this.$ctx.data("value")||"set_recursively",this.$button=this.$ctx.find(".js-cm-filter-scope__button"),this.renderButton(),this.bindDropdown(),this.bindSelection()}renderButton(){this.mod.tpl.addAndActivate(this.$button,(0,s.EY)(f,{value:this.value}))}bindDropdown(){this.$ctx.on("click",".js-cm-filter-scope__dropdown-button",S=>S.preventDefault())}bindSelection(){this.$ctx.on("click",".cm-setting-radio__option",S=>{const R=O(S.currentTarget);this.setValue(R.find("input").val()),this.mod.fire("closeDropdown",this.$ctx.find(".js-cm-btn-dropdown__menu"),["events"]),this.renderButton(),this.mod.isReadyForMeaningfulSearch()&&this.mod.changed()})}serialize(){const S={[this.id]:this.mod.isReadyForMeaningfulSearch()?this.getValue():"set"};return S[this.id]?S:null}setValue(S){this.value=S}getValue(){return this.value}}},55193:function(ve,$,r){"use strict";r.d($,{m:function(){return t}});var s=r(86070),b=r(14154);const t=(0,b.I)(_=>(0,s.jsx)("div",{className:`cm-filter cm-filter-query ${_.extended?"cm-filter-query--extended":""} ${_.classes||""}`,"data-id":_.id,"data-type":"query",role:"search",children:(0,s.jsxs)("div",{className:"cm-filter-query__wrap",children:[(0,s.jsx)("input",{type:"text",className:"cm-filter-query__query js-cm-filter-query__query",placeholder:_.placeholder||"",value:_.value||""}),(0,s.jsx)("i",{className:"cm-filter-query__icon ca-icon--search ca-icon--sm"})]})}))},87395:function(ve,$,r){"use strict";r.d($,{w:function(){return U}});var s=r(4957),b=r(86070),t=r(14154),_=Object.defineProperty,C=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=(B,M,I)=>M in B?_(B,M,{enumerable:!0,configurable:!0,writable:!0,value:I}):B[M]=I,w=(B,M)=>{for(var I in M||(M={}))m.call(M,I)&&E(B,I,M[I]);if(g)for(var I of g(M))T.call(M,I)&&E(B,I,M[I]);return B},u=(B,M)=>C(B,y(M));const c=(0,t.I)(B=>(0,b.jsxs)("div",{className:"cm-image-legacy__crop js-cm-image-legacy__crop",children:[(0,b.jsx)("a",{className:"cm-image-legacy__close js-cm-image-legacy__close",children:(0,b.jsx)("i",{className:"icon-times"})}),(0,b.jsxs)("div",{className:"cm-image-legacy__crop-actions",children:[(0,b.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--xs cm-btn-bar--right",children:[(0,b.jsx)("button",{className:"cm-btn cm-btn--sm cm-btn--primary js-cm-image-legacy__save",children:"Save"}),(0,b.jsx)("button",{className:"cm-btn cm-btn--sm cm-btn--default js-cm-image-legacy__replace",children:"Replace"})]}),(0,b.jsxs)("div",{className:"cm-image-legacy__crop-actions-sub",children:[(0,b.jsx)("button",{className:"cm-image-legacy__crop-action js-cm-image-legacy__zoom-in cm-btn cm-btn--default cm-btn--xs",children:(0,b.jsx)("i",{className:"icon-search-plus"})}),(0,b.jsx)("button",{className:"cm-image-legacy__crop-action js-cm-image-legacy__zoom-out cm-btn cm-btn--default cm-btn--xs",children:(0,b.jsx)("i",{className:"icon-search-minus"})})]})]}),(0,b.jsx)("img",u(w({className:"cm-image-legacy__crop-image js-cm-image-legacy__crop-image"},B.id?{"data-id":B.id}:{}),{src:B.file_url||""}))]}));var o=r(53460),l=r(8394),p=r(47754),f=r(37522),O=r(50427),L=r(18216),P=r(34933),N=r(88398),S=r(5181);const R=class up extends L.j{constructor(M,I){super(M,I,`c-image-legacy-${up.count++}`),this.onAssetChooserAssetChosen=F=>{F&&F.externalData&&F.externalData.id===this.assetChooserIdentifier&&(this.fire("closeModal",["events"]),F.screenIds&&F.screenIds.length===1&&this.data.get(`/api/screen/styleguide/${F.screenIds[0]}/${(0,N.MJ)()}`).then(te=>{var fe;const Ie=te.data;this.tmpImageData={width:Ie.width,height:Ie.height,id:Ie.id,file_id:Ie.file_id,file_url:Ie.file_url,background_color:Ie.background_color},(fe=this.imageData)!=null&&fe.file_url&&this.$upload.data("crop")?this.showCropper():this.save()}))},this.$upload=M.find(".js-cm-image-legacy__upload"),this.$image=M.find(".js-cm-image-legacy"),this.$cropImage=null,this.imageData=null,this.tmpImageData=null,this.enabled=!1,this.assetChooserIdentifier=`coverpage-${(0,N._j)()}-${up.count}`,this.sandbox.subscribe("events",this),this.setupImageDataAndEvents(),this.bindEventHandlers()}bindEventHandlers(){this.$ctx.on("dblclick",".js-cm-image-legacy",()=>{var M;this.enabled&&((M=this.$image)!=null&&M.data("crop"))&&this.showCropper()}),this.$ctx.on("click",".js-cm-image-legacy__zoom-in",()=>{this.$cropImage&&this.$cropImage.cropper("zoom",.1)}),this.$ctx.on("click",".js-cm-image-legacy__zoom-out",()=>{this.$cropImage&&this.$cropImage.cropper("zoom",-.1)}),this.$ctx.on("click",".js-cm-image-legacy__save",()=>{this.$cropImage}),this.$ctx.on("click",".js-cm-image-legacy__replace",()=>{if(!this.imageData)return;const M=S((0,O.EY)(p.x,this.imageData));this.$ctx.append(M),this.setupImageDataAndEvents(),M.trigger("click")}),this.$ctx.on("click",".js-cm-image-legacy__assetchooser-overlay",()=>{this.openAssetchooser()}),this.$ctx.on("click",".js-cm-image-legacy__close",()=>{this.hideCropper()}),S(window).on(`resize.c-image-${this.id} orientationchange.c-image-${this.id}`,()=>{this.$cropImage&&this.zoom()})}setupImageDataAndEvents(){const M=this.$ctx;this.$upload=M.find(".js-cm-image-legacy__upload"),this.$image=M.find(".js-cm-image-legacy"),this.$upload.length===0?this.imageData=this.imageData||{name:this.$image.data("name"),type:this.$image.data("type"),acceptOnlyImages:this.$upload.data("accept-only-images"),id:this.$image.data("id"),file_id:this.$image.data("file-id"),file_url:this.$image.data("file-url"),image:this.$image.data("image"),width:this.$image.data("width"),height:this.$image.data("height"),zoom:this.$image.data("zoom"),cover:this.$image.data("cover"),x:this.$image.data("x"),y:this.$image.data("y")}:(this.imageData=this.imageData||{name:this.$upload.data("name"),type:this.$upload.data("type"),acceptOnlyImages:this.$upload.data("accept-only-images"),x:0,y:0,zoom:1},this.$upload.upload({fileType:this.imageData.type,dataType:"json",acceptOnlyImages:this.imageData.acceptOnlyImages,dropZone:M.find(".js-cm-image-legacy__dropzone"),add:function(I,F){F.formData.project_id=(0,N.MJ)(),F.formData.folder_id=this.$ctx.data("folder-id"),this.$upload.data("id")&&(F.formData.id=this.$upload.data("id")),F.submit()}.bind(this),done:function(I,F){F.result&&F.result[0]&&(this.tmpImageData={width:F.result[0].width,height:F.result[0].height,id:F.result[0].id,file_id:F.result[0].file_id,file_url:F.result[0].file_url},this.imageData.file_url&&this.$upload.data("crop")?this.showCropper():this.save())}.bind(this)}))}showCropper(){const M=this.$ctx;M.height(M.height()||0),M.html((0,O.EY)(c,S.extend(!0,{},this.imageData,this.tmpImageData))),this.$cropImage=M.find(".js-cm-image-legacy__crop-image");const I=S((0,O.EY)(s.T));this.$cropImage.before(I),this.$cropImage.cropper({viewMode:1,dragMode:"move",restore:!1,modal:!0,guides:!1,highlight:!0,background:!1,checkCrossOrigin:!1,cropBoxMovable:!1,cropBoxResizable:!0,toggleDragModeOnDblclick:!1,ready:function(){I.remove(),this.zoom(),M.find(".js-cm-image-legacy__crop").velocity({opacity:1})}.bind(this)}),S("html").off("keydown.cropper").on("keydown.cropper",F=>{switch(F.keyCode){case 27:F.preventDefault(),this.hideCropper();break;case 13:F.preventDefault();break}})}zoom(){var M;const I=this.$ctx,F=S(window),te=I.offset()||{top:0,left:0};te.top-=(F.scrollTop()||0)-parseInt(I.css("paddingTop")),te.left-=(F.scrollLeft()||0)-parseInt(I.css("paddingLeft"));const fe=I.width(),Ie=I.height(),de={top:te.top,left:te.left,width:fe,height:Ie},q={top:te.top,left:te.left};let re=!1;if((M=this.imageData)!=null&&M.width){const me=(fe||0)/(this.imageData.width*this.imageData.zoom);re=this.imageData.zoom*me,q.top=te.top-this.imageData.y*re,q.left=te.left-this.imageData.x*re,re*this.imageData.height<Ie&&(de.height=re*this.imageData.height)}else q.width=fe,q.height=Ie;this.$cropImage.cropper("setCropBoxData",{top:te.top,left:te.left,width:1,height:1}),re&&this.$cropImage.cropper("zoomTo",re),this.$cropImage.cropper("setCanvasData",q),this.$cropImage.cropper("setCropBoxData",de)}hideCropper(){const M=this.$ctx;this.$cropImage.cropper("destroy"),this.$cropImage=null,this.tmpImageData=null,M.css({height:"unset"}),this.render(this.imageData),S("html").off("keydown.cropper")}render(M){var I;const F=this.$ctx;this.imageData=S.extend(!0,{},this.imageData,M),(I=this.imageData)!=null&&I.image?F.html((0,O.EY)(l.x,this.imageData)):this.imageData&&F.html((0,O.EY)(o.B,this.imageData)),this.setupImageDataAndEvents()}save(){var M,I;const F=this.$ctx;this.imageData=S.extend(!0,{},this.imageData,this.tmpImageData),this.imageData=S.extend(!0,{},this.imageData,{file_url:(M=this.imageData)==null?void 0:M.file_url,x:0,y:0,zoom:1,background_color:(I=this.tmpImageData)==null?void 0:I.background_color}),this.tmpImageData=null,F.css({height:"unset"}),this.render(S.extend(!0,{},this.imageData,{crop:this.$upload.data("crop")})),typeof this.saved=="function"&&this.saved(this.imageData)}cover(M){var I,F;this.enabled&&this.imageData&&this.$image&&(M||!((I=this.imageData)!=null&&I.height)||!((F=this.imageData)!=null&&F.width)?this.$image.css({paddingBottom:0,height:"100%"}):this.$image.css({paddingBottom:`${this.imageData.height/this.imageData.width*100}%`,height:0}))}disable(){this.enabled=!1,this.$cropImage&&this.$cropImage.cropper("disable")}enable(){this.enabled=!0,this.$cropImage&&this.$cropImage.cropper("enable")}openAssetchooser(){const M=[{key:"ext",values:(0,P.I4)()}],I=(0,O.EY)(f.l,{externalData:{id:this.assetChooserIdentifier},multiSelectionAllowed:!1,filters:M});this.fire("openModal",{modifier:"flex",$content:I},["events"])}};R.count=0;let U=R},53460:function(ve,$,r){"use strict";r.d($,{B:function(){return E}});var s=r(86070),b=r(47754),t=r(14154),_=Object.defineProperty,C=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,m=(w,u,c)=>u in w?_(w,u,{enumerable:!0,configurable:!0,writable:!0,value:c}):w[u]=c,T=(w,u)=>{for(var c in u||(u={}))y.call(u,c)&&m(w,c,u[c]);if(C)for(var c of C(u))g.call(u,c)&&m(w,c,u[c]);return w};const E=(0,t.I)(w=>{const u=Math.floor(Math.random()*1e4);return(0,s.jsx)("div",{className:`cm-image-legacy__dropzone-wrap cm-image-legacy__dropzone-wrap--${u} ${w.enabled?"state-enabled":""}`,children:(0,s.jsxs)("div",{className:`cm-image-legacy__dropzone js-cm-image-legacy__dropzone ${w.modifier_dropzone?`cm-image-legacy__dropzone--${w.modifier_dropzone}`:""} `,children:[(0,s.jsx)("i",{className:"cm-image-legacy__dropzone-icon ca-icon--image ca-icon--lg"}),(0,s.jsx)("span",{children:w.label_dropzone?w.label_dropzone:window.translate("Legacy_image_placeholder")}),(0,s.jsx)(b.x,T({},w))]})})})},8394:function(ve,$,r){"use strict";r.d($,{x:function(){return u}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.defineProperties,C=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,T=(c,o,l)=>o in c?t(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,E=(c,o)=>{for(var l in o||(o={}))g.call(o,l)&&T(c,l,o[l]);if(y)for(var l of y(o))m.call(o,l)&&T(c,l,o[l]);return c},w=(c,o)=>_(c,C(o));const u=(0,b.I)(c=>(0,s.jsx)("div",w(E({className:`cm-image-legacy js-cm-image-legacy${c.cover?" state-cover":""}`,"data-name":c.name||"image","data-type":c.type||"OTHER","data-image":c.image,"data-file-id":c.file_id,"data-file-url":c.file_url,"data-width":c.width,"data-height":c.height,"data-x":c.x||0,"data-y":c.y||0,"data-zoom":c.zoom||1,"data-crop":c.crop!==!1},c.cover?{"data-cover":c.cover}:{}),{"data-id":c.id,style:{paddingBottom:`${c.ratio_percent?c.ratio_percent:c.height/c.width*100}%`},children:(0,s.jsx)("img",{src:c.image,className:`cm-image-legacy__image ${c.cover_mode&&c.cover_mode==="contain"?"cm-image-legacy__wrap--contain":""} lazyload`})})))},47754:function(ve,$,r){"use strict";r.d($,{x:function(){return u}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.defineProperties,C=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,T=(c,o,l)=>o in c?t(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,E=(c,o)=>{for(var l in o||(o={}))g.call(o,l)&&T(c,l,o[l]);if(y)for(var l of y(o))m.call(o,l)&&T(c,l,o[l]);return c},w=(c,o)=>_(c,C(o));const u=(0,b.I)(c=>(0,s.jsx)("input",w(E(w(E({className:"cm-image-legacy__dropzone-upload js-cm-image-legacy__upload",type:"file",name:"files[]","aria-label":window.translate("Legacy_image_upload_label")},c.acceptOnlyImages?{"data-accept-only-images":"true"}:{}),{"data-name":c.name||"image","data-type":c.type||"OTHER","data-crop":c.crop!==!1}),c.id?{"data-id":c.id}:{}),{"data-url":c.api?c.api:"/api/file/upload"})))},78242:function(ve,$,r){"use strict";r.d($,{C:function(){return u}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.defineProperties,C=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,T=(c,o,l)=>o in c?t(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,E=(c,o)=>{for(var l in o||(o={}))g.call(o,l)&&T(c,l,o[l]);if(y)for(var l of y(o))m.call(o,l)&&T(c,l,o[l]);return c},w=(c,o)=>_(c,C(o));const u=(0,b.I)(c=>(0,s.jsx)("div",w(E(E({className:`mod mod-c-limit-hook cm-limit-hook ${c.type?`cm-limit-hook--${c.type}`:""}`},c.has_tooltip?{"data-tooltip-flag":c.has_tooltip}:{}),c.type?{"data-type":c.type}:{}),{"data-feature":c.feature})))},37200:function(ve,$,r){"use strict";r.d($,{p:function(){return l}});var s=r(93791),b=r(86070),t=r(82387),_=r(78149),C=r(14154);const y=(0,C.I)(p=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"cm-menu-card__icon",children:[p.badgeIcon?(0,b.jsx)("div",{className:"cm-menu-card__badge",children:(0,b.jsx)(_.V,{icon:p.badgeIcon,size:s.l.SIZE_EXTRA_SMALL})}):null,(0,b.jsx)(_.V,{icon:p.icon,size:s.l.SIZE_LARGE})]}),(0,b.jsxs)("div",{className:"cm-menu-card__text",children:[(0,b.jsxs)("div",{className:"cm-menu-card__title",children:[p.title,p.badgeText?(0,b.jsx)(t.b,{text:p.badgeText,theme:p.badgeTheme}):null]}),p.description?(0,b.jsx)("div",{className:"cm-menu-card__description",children:p.description}):null]})]}));var g=r(50427),m=r(18216),T=Object.defineProperty,E=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,c=(p,f,O)=>f in p?T(p,f,{enumerable:!0,configurable:!0,writable:!0,value:O}):p[f]=O,o=(p,f)=>{for(var O in f||(f={}))w.call(f,O)&&c(p,O,f[O]);if(E)for(var O of E(f))u.call(f,O)&&c(p,O,f[O]);return p};class l extends m.j{static get ICONS(){return[l.ICON_NONE,...s.l.ICONS]}static get ICON_NONE(){return""}static get BACKGROUND_WHITE(){return"white"}static get BACKGROUND_BLACK_05(){return"black-05"}static get BACKGROUND_BLACK_90(){return"black-90"}static get BACKGROUND_BLACK_100(){return"black-100"}static get BACKGROUND_DEFAULT(){return l.BACKGROUND_WHITE}static get BACKGROUNDS(){return[l.BACKGROUND_WHITE,l.BACKGROUND_BLACK_05,l.BACKGROUND_BLACK_90,l.BACKGROUND_BLACK_100]}static get FOCUSED_BY_MOUSE_CLASS(){return"cm-menu-card--focused-by-mouse"}static get STATE_NONE(){return""}static get STATE_FEATURE_HOOK(){return"feature"}static get STATES(){return[l.STATE_NONE,l.STATE_FEATURE_HOOK]}static get URL_TARGET_SELF(){return"_self"}static get URL_TARGET_BLANK(){return"_blank"}static get URL_TARGETS(){return[l.URL_TARGET_SELF,l.URL_TARGET_BLANK]}on(f){this.tpl.bindDataAttributes(this,{icon:{type:String,allowed:l.ICONS,default:l.ICON_NONE},background:{type:String,allowed:l.BACKGROUNDS,default:l.BACKGROUND_DEFAULT},identifier:{type:String},title:{type:String},description:{type:String},badgeText:{type:String,default:""},badgeTheme:{type:String,default:""},state:{type:String,allowed:l.STATES,default:l.STATE_NONE},url:{type:String},urlTarget:{type:String,allowed:l.URL_TARGETS,default:l.URL_TARGET_SELF},eventData:{type:Object,default:{}}}),this.badgeIcon=null,this.prepareBadgeData(),this.addBackgroundModifierClass(),this.addStateModifierClass(),this.renderContent(),this.bindEvents(),this.bindFocusedByMouse(),f()}prepareBadgeData(){if(this.state)switch(this.state){case l.STATE_FEATURE_HOOK:this.badgeIcon=s.l.ICON_ADD_SIMPLE;break}}addBackgroundModifierClass(){this.$ctx.addClass(`cm-menu-card--background-${this.background}`)}addStateModifierClass(){this.state&&this.$ctx.addClass(`cm-menu-card--state-${this.state}`)}renderContent(){this.$ctx.append((0,g.EY)(y,{icon:this.icon,title:this.title,description:this.description,badgeIcon:this.badgeIcon,badgeText:this.badgeText,badgeTheme:this.badgeTheme}))}bindEvents(){const f=o({identifier:this.identifier},this.eventData);this.$ctx.on("click",()=>this.tpl.fireCustomEvent(this,"menuCardClicked",f))}bindFocusedByMouse(){this.$ctx.on("mousedown",()=>{this.$ctx.addClass(l.FOCUSED_BY_MOUSE_CLASS)}),this.$ctx.on("focusout",()=>{this.$ctx.removeClass(l.FOCUSED_BY_MOUSE_CLASS)})}}},69562:function(ve,$,r){"use strict";r.d($,{A:function(){return u}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.defineProperties,C=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,T=(c,o,l)=>o in c?t(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,E=(c,o)=>{for(var l in o||(o={}))g.call(o,l)&&T(c,l,o[l]);if(y)for(var l of y(o))m.call(o,l)&&T(c,l,o[l]);return c},w=(c,o)=>_(c,C(o));const u=(0,b.I)(c=>(0,s.jsxs)("div",w(E({className:"mod mod-c-metric-summary c-metric-summary__container"},c.tpl.renderDataAttributesAsObject(c)),{children:[(0,s.jsxs)("div",{className:"c-metric-summary__title-container js-c-metric-summary__title-container",children:[(0,s.jsx)("span",{className:"c-metric-summary__title-primary",children:c.title}),(0,s.jsx)("span",{className:"c-metric-summary__title-secondary",children:c.secondaryTitle}),(0,s.jsx)("span",{className:"c-metric-summary__title-icon-container js-c-metric-summary__title-icon-container","data-tooltip":c.realtimeDescription})]}),(0,s.jsx)("div",{className:"c-metric-summary__value-container js-c-metric-summary__value-container"}),(0,s.jsx)("div",{className:"c-metric-summary__bar-gauge js-c-metric-summary__bar-gauge"}),(0,s.jsx)("div",{className:"c-metric-summary__pop-metric js-c-metric-summary__pop-metric"}),c.description?(0,s.jsx)("div",{className:"c-metric-summary__description",children:c.description}):null,(0,s.jsx)("div",{className:"c-metric-summary__blank-container js-c-metric-summary__blank-container"})]})))},64409:function(ve,$,r){"use strict";r.d($,{z:function(){return _}});var s=r(18216),b=r(5181);const t=class Wc extends s.j{on(y){this.$body=b("body"),this.$overlay=b(".js-cm-modal__overlay"),this.mId=this.$ctx.data("modalId"),this.isOpen=!1,this.closeable=!0,this.sandbox.subscribe("events",this),this.observer=null,this.$body.on("click.cm-modal",".js-cm-modal__open",g=>{const m=b(g.currentTarget),T=m.data("modalId")||"modal";this.mId===T&&this.open({modifier:m.data("modalModifier")})}),this.$ctx.on("click",".js-cm-modal__close",g=>{g.stopPropagation(),this.close()}),b(document).on("keyup",g=>{g.which===27&&this.close()}),this.$body.on("keydown",g=>{this.isOpen&&g.key==="Tab"&&this.trapFocus(g)}),y()}close(y){const g=this.$ctx.find(".js-cm-modal__content");!this.isOpen||!this.closeable&&!y||(this.isOpen=!1,Wc.count--,this.$ctx.removeClass("state-visible"),this.$ctx.removeClass("cm-modal--full-page"),Wc.count===0?(this.$body.removeClass("state-cm-modal-visible"),b(".js-cm-modal__overlay").removeClass("state-visible")):this.$overlay.css({zIndex:2e3+2*Wc.count}),this.sandbox.removeModules(g),g.html(""),this.$ctx.off(`click.modal${this.id}`),this.$body.off("click.cm-modal-full"),this.fire("modalClosed",{id:this.mId},["events"]),this.lastActiveElement.focus())}open(y){this.lastActiveElement=document.activeElement,y||(y={});const g=y.modifier||null,m=y.modifierArray||[],T=this.$ctx.find(".js-cm-modal__content");if(y.fullPage&&this.$ctx.addClass("cm-modal--full-page"),this.isOpen)return;this.isOpen=!0,Wc.count++;const E=this.$ctx.find(".js-cm-modal__close");this.closeable?E.removeClass("state-hidden"):E.addClass("state-hidden"),T.attr("class",(w,u)=>u.replaceAll(/(^|\s)cm-modal__content--\S+/g,"")),g&&T.addClass(`cm-modal__content--${g}`);for(const w of m)typeof w=="string"&&w.length>0&&T.addClass(`cm-modal__content--${w}`);this.$ctx.on(`click.modal${this.id}`,w=>{const u=b(w.target),c=this.$ctx.find(".js-cm-modal__content");u.closest(".js-cm-modal__content").length===0&&u.closest(".js-cm-btn-dropdown__menu").length===0&&!b.contains(c[0],u[0])&&(w.stopPropagation(),this.close())}),this.$body.addClass("state-cm-modal-visible"),this.$overlay.css({zIndex:2e3+2*Wc.count}).addClass("state-visible"),this.$ctx.css({zIndex:2e3+2*Wc.count+1}).addClass("state-visible"),this.$body.on("click.cm-modal-full",".js-cm-modal",w=>{w.stopPropagation()}),E.trigger("focus"),setTimeout(()=>{this.fire("modalOpened",{id:this.mId,$ctx:this.$ctx},["events"])},200)}onOpenModal(y){if(this.closeable=!0,(y.id||"modal")===this.mId){if(this.close(),this.closeable=y.closeable!==!1,y.$content){const m=this.$ctx.find(".js-cm-modal__content");m.html(y.$content),y.terrific!==!1&&this.sandbox.addModules(m)}this.open({modifier:y.modifier,modifierArray:y.modifierArray,fullPage:y.fullPage})}this.setMutationObserver()}onCloseModal(y){(y.id||"modal")===this.mId&&this.close(!0),this.disconnectMutationObserver(),this.updateParameters(!0)}setMutationObserver(){const y={childList:!0,subtree:!0};this.disconnectMutationObserver(),this.observer=new MutationObserver(()=>{this.updateParameters.call(this)}),this.observer.observe(this.$ctx[0],y),this.updateParameters()}disconnectMutationObserver(){this.observer instanceof MutationObserver&&(this.observer.disconnect(),this.observer=null)}updateParameters(y){const g=this.$ctx.find(".js-cm-modal__content");this.fire("setCBtnDropdownContainerParameters",{topOffset:y?0:g.offset().top,height:y?0:g.height()})}trapFocus(y){const{firstElement:g,lastElement:m}=this.modalBoundaryFocusableElements();!y.shiftKey&&y.target===m&&(g.focus({focusVisible:!0}),y.preventDefault()),y.shiftKey&&y.target===g&&(m.focus({focusVisible:!0}),y.preventDefault())}modalBoundaryFocusableElements(){const y='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',g=b(".js-cm-modal.state-visible").first(),m=b(g).find(y).not(":hidden");return{firstElement:m[0],lastElement:m[m.length-1]}}};t.count=0;let _=t},13833:function(ve,$,r){"use strict";r.d($,{X:function(){return t}});var s=r(86070),b=r(14154);const t=(0,b.I)(_=>(0,s.jsx)("div",{className:`cm-modal__banner ${_.drops===!1&&!_.notitle?"cm-modal__banner--nodrops":""}`,children:(0,s.jsx)("div",{className:"cm-modal__color-bar"})}))},43915:function(ve,$,r){"use strict";r.d($,{b:function(){return t}});var s=r(86070),b=r(14154);const t=(0,b.I)(_=>(0,s.jsx)("div",{className:"cm-modal__overlay js-cm-modal__overlay",children:(0,s.jsxs)("div",{className:"mod mod-c-modal cm-modal js-cm-modal","data-modal-id":`${_.id?`${_.id}`:"modal"}`,children:[(0,s.jsx)("a",{href:"javascript:;",className:"cm-modal__close js-cm-modal__close",title:window.translate("Legacy_btn_close"),"aria-label":window.translate("Legacy_btn_close"),children:(0,s.jsx)("i",{className:"ca-icon--reject ca-icon--md"})}),(0,s.jsx)("div",{className:"cm-modal__content js-cm-modal__content"})]})}))},53050:function(ve,$,r){"use strict";r.d($,{q:function(){return l}});var s=r(86070),b=r(93277),t=r(87053),_=r(4957),C=r(14154),y=Object.defineProperty,g=Object.defineProperties,m=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,u=(p,f,O)=>f in p?y(p,f,{enumerable:!0,configurable:!0,writable:!0,value:O}):p[f]=O,c=(p,f)=>{for(var O in f||(f={}))E.call(f,O)&&u(p,O,f[O]);if(T)for(var O of T(f))w.call(f,O)&&u(p,O,f[O]);return p},o=(p,f)=>g(p,m(f));const l=(0,C.I)(p=>(0,s.jsxs)("div",o(c({className:"mod mod-c-notifications cm-notifications","data-project":p.project_id},p.fetchOnMount?{"data-fetch-on-mount":"true"}:{}),{children:[(0,s.jsxs)("div",{className:"co-settings__fieldset",children:[(0,s.jsx)("h4",{className:"co-settings__fieldset-title",children:window.translate("Legacy_title_notifications_all")}),(0,s.jsxs)("div",{className:"cm-notifications__list",children:[(0,s.jsx)("div",{className:"co-settings__blank js-cm-notifications__blank",children:window.translate("Legacy_txt_empty_notifications")}),(0,s.jsx)("div",{className:"cm-notifications js-cm-notifications__list",children:(0,s.jsx)("ul",{className:"cm-notifications__items js-cm-notifications__items"})})]})]}),(0,s.jsx)("div",{className:"cm-notifications__loading js-cm-notifications__loading",children:(0,s.jsx)(_.T,{})}),(0,s.jsx)("div",{className:"cm-notifications__button js-cm-notifications__button-container",children:(0,s.jsx)(t.S,{label:window.translate("Legacy_userlist_more_button"),size:b.Q.SIZE_LARGE,style:b.Q.STYLE_PRIMARY,background:b.Q.BACKGROUND_BLACK_05})})]})))},44084:function(ve,$,r){"use strict";r.d($,{w:function(){return t}});var s=r(93791),b=r(18216);class t extends b.j{static get TYPES(){return[t.TYPE_WARNING,t.TYPE_SUCCESS,t.TYPE_INFORMATION,t.TYPE_STATUS]}static get TYPE_INFORMATION(){return"information"}static get TYPE_WARNING(){return"warning"}static get TYPE_STATUS(){return"status"}static get TYPE_SUCCESS(){return"success"}static get HORIZONTAL_ALIGNMENTS(){return[t.HORIZONTAL_ALIGNMENT_LEFT,t.HORIZONTAL_ALIGNMENT_CENTER]}static get HORIZONTAL_ALIGNMENT_LEFT(){return"left"}static get HORIZONTAL_ALIGNMENT_CENTER(){return"center"}static get ICONS(){return["",...s.l.ICONS]}static get ICON_DEFAULT(){return"unknown"}on(C){this.$ctx.on("click",".js-cm-banner-intercom__button",()=>{if(Intercom.booted)return Intercom("showNewMessage");console.error("Intercom is not enabled.")}),C()}}},51297:function(ve,$,r){"use strict";r.d($,{c:function(){return g}});var s=r(86070),b=r(95376),t=r(93791),_=r(78149),C=r(14154),y=r(44084);const g=(0,C.I)(m=>{var T;let E,w;return m.horizontalAlignment===y.w.HORIZONTAL_ALIGNMENT_CENTER?E="cm-banner--centered":E="cm-banner--left",m.type===y.w.TYPE_INFORMATION?w="cm-banner--information":m.type===y.w.TYPE_SUCCESS?w="cm-banner--success":m.type===y.w.TYPE_WARNING?w="cm-banner--warning":m.type===y.w.TYPE_STATUS&&(w="cm-banner--status"),(0,s.jsx)("div",{className:`cm-banner ${E} ${w}`,children:(0,s.jsxs)("div",{className:"cm-banner__content",children:[m.imageHtml?(0,s.jsx)("div",{className:"cm-banner__image-wrapper",children:(0,b.Ay)(m.imageHtml)}):null,m.icon?(0,s.jsx)("div",{className:"cm-banner__icon-wrapper",children:(0,s.jsx)(_.V,{classes:"cm-banner__icon",icon:m.icon,size:t.l.SIZE_LARGE})}):null,m.message?(0,s.jsx)("div",{className:"cm-banner__message",children:m.message}):null,m.actions&&m.actions.length>0?(0,s.jsx)("div",{className:"cm-banner__actions",children:(T=m.actions)==null?void 0:T.map((u,c)=>u.url?(0,s.jsx)("a",{target:"_blank",href:u.url,className:`cm-banner__action ${u.modifier}`,rel:"noreferrer",children:u.text},c):(0,s.jsx)("button",{className:`cm-banner__action ${u.modifier}`,children:u.text},c))}):null,m.hasChildrenSlot?(0,s.jsx)("div",{className:"cm-banner__children-slot cm-banner__children-slot--hidden js-cm-banner__children-slot"}):null]})})})},80823:function(ve,$,r){"use strict";r.d($,{m:function(){return N}});var s=r(86070),b=r(14154),t=r(93791),_=r(78149);const C=(0,b.I)(S=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:`c-select-list__item-icon ${S.listItemLarge?" c-select-list__item-icon--large ":""}`,children:S.option.icon?(0,s.jsx)(_.V,{icon:S.option.icon,size:S.option.secondaryLabel?t.l.SIZE_MEDIUM:t.l.SIZE_SMALL}):null}),(0,s.jsxs)("span",{className:"c-select-list__item-name c-select-list__item-name--with-image",children:[(0,s.jsxs)("div",{className:"c-select-list__item-label-wrapper",children:[(0,s.jsx)("span",{className:"c-select-list__item-label js-c-select-list__item-searchable",children:S.option.label}),S.option.secondaryLabel?(0,s.jsx)("span",{className:"c-select-list__item-label-secondary js-c-select-list__item-searchable",children:S.option.secondaryLabel}):null]}),(0,s.jsx)("span",{className:`${S.isSelected?"":" c-select-list__item-check--hidden "} js-c-select-list__item-check`,children:(0,s.jsx)(_.V,{icon:t.l.ICON_CHECK})})]})]})),y=(0,b.I)(S=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:`c-select-list__item-image ${S.imageBorderRadius} ${S.listItemLarge?" c-select-list__item-image--large ":""}`,children:S.option.image?(0,s.jsx)("img",{alt:"",src:S.option.image}):null}),(0,s.jsxs)("span",{className:"c-select-list__item-name c-select-list__item-name--with-image",children:[(0,s.jsxs)("div",{className:"c-select-list__item-label-wrapper c-select-list__item-label-wrapper--with-image",children:[(0,s.jsx)("span",{className:"c-select-list__item-label js-c-select-list__item-searchable",children:S.option.label}),S.option.secondaryLabel?(0,s.jsx)("span",{className:"c-select-list__item-label-secondary js-c-select-list__item-searchable",children:S.option.secondaryLabel}):null]}),(0,s.jsx)("span",{className:`${S.isSelected?"":" c-select-list__item-check--hidden "} js-c-select-list__item-check`,children:(0,s.jsx)(_.V,{icon:t.l.ICON_CHECK})})]})]})),g=(0,b.I)(S=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:`c-select-list__item-number ${S.listItemLarge?" c-select-list__item-number--large ":""}`,children:S.option.number}),(0,s.jsxs)("span",{className:"c-select-list__item-name c-select-list__item-name--with-image",children:[(0,s.jsxs)("div",{className:"c-select-list__item-label-wrapper",children:[(0,s.jsx)("span",{className:"c-select-list__item-label js-c-select-list__item-searchable",children:S.option.label}),S.option.secondaryLabel?(0,s.jsx)("span",{className:"c-select-list__item-label-secondary js-c-select-list__item-searchable",children:S.option.secondaryLabel}):null]}),(0,s.jsx)("span",{className:`${S.isSelected?"":" c-select-list__item-check--hidden "} js-c-select-list__item-check`,children:(0,s.jsx)(_.V,{icon:t.l.ICON_CHECK})})]})]})),m=(0,b.I)(S=>(0,s.jsxs)("span",{className:"c-select-list__item-name",children:[(0,s.jsxs)("div",{className:"c-select-list__item-label-wrapper",children:[(0,s.jsx)("span",{className:"c-select-list__item-label js-c-select-list__item-searchable",children:S.option.label}),S.option.secondaryLabel?(0,s.jsx)("span",{className:"c-select-list__item-label-secondary js-c-select-list__item-searchable",children:S.option.secondaryLabel}):null]}),(0,s.jsx)("span",{className:`${S.isSelected?"":" c-select-list__item-check--hidden "} js-c-select-list__item-check`,children:(0,s.jsx)(_.V,{icon:t.l.ICON_CHECK})})]})),T=S=>{switch(S){case"c-select-list-item-text":return m;case"c-select-list-item-image":return y;case"c-select-list-item-icon":return C;case"c-select-list-item-number":return g;default:return console.error("No list item type provided or not fount:",S),()=>null}},E=(0,b.I)(S=>{var R;const U=T((R=S.listItemType)==null?void 0:R.toLowerCase());return(0,s.jsx)("div",{className:`c-select-list__item js-c-select-list__item ${S.isSelected?"c-select-list__item--selected":""} ${S.listItemLarge?"c-select-list__item--large":""} `,"data-value":S.option.value,children:(0,s.jsx)(U,{option:S.option,isSelected:S.isSelected,imageBorderRadius:S.imageBorderRadius,listItemLarge:S.listItemLarge})})});var w=Object.defineProperty,u=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(S,R,U)=>R in S?w(S,R,{enumerable:!0,configurable:!0,writable:!0,value:U}):S[R]=U,p=(S,R)=>{for(var U in R||(R={}))c.call(R,U)&&l(S,U,R[U]);if(u)for(var U of u(R))o.call(R,U)&&l(S,U,R[U]);return S};const f=(0,b.I)(S=>(0,s.jsxs)("div",{className:"c-select-list__search-box",children:[(0,s.jsx)("div",{className:"c-select-list__search-icon",children:(0,s.jsx)(_.V,{icon:"search"})}),(0,s.jsx)("input",p({className:"c-select-list__search-input js-c-select-list__search-input",type:"text",placeholder:S.placeholder,value:S.inputValue},S.autofocus?{autoFocus:!0}:{}))]}));var O=r(50427),L=r(18216),P=r(5181);class N extends L.j{static get LIST_ITEM_ALL_VALUE(){return-1}static get LIST_ITEM_TYPE_TEXT(){return"c-select-list-item-text"}static get LIST_ITEM_TYPE_IMAGE(){return"c-select-list-item-image"}static get LIST_ITEM_TYPE_ICON(){return"c-select-list-item-icon"}static get LIST_ITEM_TYPE_NUMBER(){return"c-select-list-item-number"}static get LIST_ITEM_TYPES(){return[N.LIST_ITEM_TYPE_TEXT,N.LIST_ITEM_TYPE_IMAGE,N.LIST_ITEM_TYPE_ICON,N.LIST_ITEM_TYPE_NUMBER]}static get IMAGE_RADIUS_DEFAULT(){return"c-select-list__item-image-radius--default"}static get IMAGE_RADIUS_1X(){return"c-select-list__item-image-radius--1x"}static get IMAGE_RADIUSES(){return[N.IMAGE_RADIUS_DEFAULT,N.IMAGE_RADIUS_1X]}on(R){this.tpl.bindDataAttributes(this,{placeholder:{type:String,default:""},listItemType:{type:String,default:N.LIST_ITEM_TYPE_TEXT,allowed:N.LIST_ITEM_TYPES},imageBorderRadius:{type:String,default:N.IMAGE_RADIUS_DEFAULT,allowed:N.IMAGE_RADIUSES},showSelectAll:{type:Boolean,default:!0},labelAll:{type:String},options:{type:Object,changed:()=>this.renderSelectOptions()},showSearch:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1}}),this.$searchContainer=this.$ctx.find(".js-c-select-list__search-container"),this.$selectListContainer=this.$ctx.find(".c-select-list__list-container"),this.listItemLarge=this.optionsContainSecondaryLabel(),this.render(),R()}optionsContainSecondaryLabel(){let R=!1;for(const U of this.options)U.secondaryLabel&&U.secondaryLabel.length>0&&(R=!0);return R}render(){this.renderSearch(),this.renderSelectOptions()}renderSearch(){this.showSearch?this.$searchContainer.html((0,O.EY)(f,{placeholder:this.placeholder,autofocus:this.autofocus})):this.$searchContainer.hide()}renderSelectOptions(){const R=[];if(this.showSelectAll){const U=!this.options.find(B=>B.selected===!0);R.push(P((0,O.EY)(E,{option:{label:this.labelAll,value:N.LIST_ITEM_ALL_VALUE},isSelected:U,listItemType:N.LIST_ITEM_TYPE_TEXT,listItemLarge:this.listItemLarge})))}for(const U of this.options){const B=P((0,O.EY)(E,{option:U,isSelected:U.selected,imageBorderRadius:this.imageBorderRadius,listItemType:this.listItemType,listItemLarge:this.listItemLarge}));U.selected&&(this.$selected=B),R.push(B)}this.$selectListContainer.html(R),this.bindEvents()}bindEvents(){this.bindSelectEvent(),this.bindFilter()}bindSelectEvent(){this.$selectListContainer.find(".js-c-select-list__item").each((R,U)=>{P(U).on("click",B=>{this.$searchContainer.find(".js-c-select-list__search-input").val("");const M=P(B.currentTarget).data("value"),I=B.target.textContent;this.tpl.fireCustomEvent(this.$ctx,"selectListSelected",{value:M,text:I})})})}bindFilter(){const R=this.$searchContainer.find(".js-c-select-list__search-input"),U=this.$selectListContainer.find(".js-c-select-list__item");R.on("keyup",B=>{const M=P(B.currentTarget).val().toUpperCase();U.each((I,F)=>{const te=P(F).find(".js-c-select-list__item-searchable");let fe=!1;te.each((Ie,de)=>{P(de).text().toUpperCase().includes(M)&&(fe=!0)}),fe?P(F).closest(".js-c-select-list__item").removeClass("c-select-list__item--hidden"):P(F).closest(".js-c-select-list__item").addClass("c-select-list__item--hidden")})})}}},49290:function(ve,$,r){"use strict";r.d($,{t:function(){return C}});var s=r(86070),b=r(46223),t=r(45924),_=r(14154);const C=(0,_.I)(y=>(0,s.jsx)("button",{type:"reset",className:(0,b.h)(["cm-btn cm-btn--default",y.classes,t.OA]),children:(0,s.jsx)("span",{className:"js-cm-setting__btn-label",children:y.label_cancel?y.label_cancel:window.translate("Legacy_btn_cancel")})}))},2728:function(ve,$,r){"use strict";r.d($,{b:function(){return o}});var s=r(86070),b=r(46223),t=r(45924),_=r(14154),C=Object.defineProperty,y=Object.defineProperties,g=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,w=(l,p,f)=>p in l?C(l,p,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[p]=f,u=(l,p)=>{for(var f in p||(p={}))T.call(p,f)&&w(l,f,p[f]);if(m)for(var f of m(p))E.call(p,f)&&w(l,f,p[f]);return l},c=(l,p)=>y(l,g(p));const o=(0,_.I)(l=>(0,s.jsxs)("button",c(u({tabIndex:0,type:l.type?l.type:"submit"},l.disabled?{disabled:!0}:{}),{className:(0,b.h)([t.OA,"cm-btn cm-btn--primary",l.classes]),children:[(0,s.jsx)("i",{className:"ca-icon--processing anim-spin cm-setting__btn-icon js-cm-setting__btn-icon--loading"}),(0,s.jsx)("i",{className:"ca-icon--triangle cm-setting__btn-icon js-cm-setting__btn-icon--error"}),(0,s.jsx)("i",{className:"ca-icon--check cm-setting__btn-icon js-cm-setting__btn-icon--success"}),(0,s.jsx)("span",{className:"js-cm-setting__btn-label",children:l.label_submit?l.label_submit:window.translate("Legacy_btn_save")})]})))},16021:function(ve,$,r){"use strict";r.d($,{h:function(){return C}});var s=r(86070),b=r(49290),t=r(2728),_=r(14154);const C=(0,_.I)(y=>(0,s.jsxs)("div",{className:`cm-btn-bar cm-btn-bar--footer cm-setting__actions cm-setting__actions--flyout js-cm-setting__actions ${y.classes?` ${y.classes}`:""}`,children:[(0,s.jsx)(b.t,{classes:void 0}),(0,s.jsx)(t.b,{classes:void 0})]}))},15993:function(ve,$,r){"use strict";r.d($,{W:function(){return y}});var s=r(86070),b=r(95376),t=r(49198),_=r.n(t),C=r(14154);const y=(0,C.I)(g=>{const m=_()(g.value.color).toHexString();return g.value.width?(0,s.jsxs)(s.Fragment,{children:[g.tpl.unit(g.value.width)," ",m," | r: ",g.tpl.unit(g.value.radius)]}):(0,b.Ay)(window.translate("Legacy_settings_border_none"))})},38020:function(ve,$,r){"use strict";r.d($,{k:function(){return c}});var s=r(86070),b=r(75573),t=r(14154),_=Object.defineProperty,C=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=(o,l,p)=>l in o?_(o,l,{enumerable:!0,configurable:!0,writable:!0,value:p}):o[l]=p,w=(o,l)=>{for(var p in l||(l={}))m.call(l,p)&&E(o,p,l[p]);if(g)for(var p of g(l))T.call(l,p)&&E(o,p,l[p]);return o},u=(o,l)=>C(o,y(l));const c=(0,t.I)(o=>{var l;return(0,s.jsx)("div",u(w(w(w(u(w({className:`js-co-settings__elem cm-setting__elem cm-setting-checkbox ${o.class?`${o.class}`:""}`,"data-id":o.id},o.payload?{"data-payload":o.payload}:{}),{"data-type":"radioandcheckbox"}),o.group?{"data-group":o.group}:{}),o.min?{"data-min":o.min}:{}),o.max?{"data-max":o.max}:{}),{children:(0,s.jsxs)("div",{className:"cm-setting__preview",children:[o.label?(0,s.jsx)("div",{className:"cm-setting__label",children:o.label}):null,(0,s.jsx)("div",{className:`cm-setting-checkbox__group${o.modifier?` cm-setting-checkbox__group--${o.modifier}`:""}`,children:(l=o.options)==null?void 0:l.map((p,f)=>(0,s.jsx)("div",{className:`cm-setting-checkbox__option${o.modifier?` cm-setting-checkbox__option--${o.modifier}`:""}`,children:(0,s.jsx)(b.z,{modifier:o.checkboxModifier,classes:"js-cm-setting-checkbox__input",multilineLabel:o.multilineLabel,label:p.label,checked:p.checked,value:p.value,disabled:p.disabled,disable_label:o.disable_label,name:o.id,data:p.data})},f))})]})}))})},15575:function(ve,$,r){"use strict";r.d($,{C:function(){return f}});var s=r(86070),b=r(46223),t=r(45924),_=r(93791),C=r(78149),y=r(14154),g=Object.defineProperty,m=Object.defineProperties,T=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,c=(O,L,P)=>L in O?g(O,L,{enumerable:!0,configurable:!0,writable:!0,value:P}):O[L]=P,o=(O,L)=>{for(var P in L||(L={}))w.call(L,P)&&c(O,P,L[P]);if(E)for(var P of E(L))u.call(L,P)&&c(O,P,L[P]);return O},l=(O,L)=>m(O,T(L));const p=O=>O.reduce((L,P)=>(L[P.name]=P.value,L),{}),f=(0,y.I)(O=>{var L,P;const N=[2,3,4];return O.type==="advanced"?(0,s.jsxs)("div",{className:"cm-setting__preview cm-setting-chooser__types cm-setting-chooser__types--advanced",children:[O.label?(0,s.jsx)("label",{htmlFor:O.id,className:"cm-setting__label",children:O.label}):null,(0,s.jsx)("ul",{className:"cm-setting-chooser__type-list",children:(L=O.options)==null?void 0:L.map((S,R)=>S.value==="separator"?(0,s.jsx)("li",{className:"cm-setting-chooser__type cm-setting-chooser__type--separator"},R):(0,s.jsx)("li",l(o(o({className:`cm-setting-chooser__type js-cm-setting-chooser__type ${O.noPreselection!==!0?` ${O.value&&O.value==S.value||R===0?"state-selected":""} `:""}`},S.value?{[`data-${O.id}`]:S.value}:{}),S.attachedData?O.tpl.renderDataAttributesAsObject(p(S.attachedData)):{}),{children:(0,s.jsxs)("a",l(o({className:(0,b.h)(["cm-setting-chooser__link",t.OA])},S.intercomTourSelector?{"data-intercom-tour-selector":S.intercomTourSelector}:{}),{role:"button",href:"#",children:[(0,s.jsxs)("div",{className:"cm-setting-chooser__left","aria-hidden":!0,children:[S.icon?S.icon.includes("/")?(0,s.jsx)("img",{alt:"",className:`cm-setting-chooser__icon ${O.noPreselection?"cm-setting-chooser__icon--no-transparency":""}`,src:S.icon}):(0,s.jsx)(C.V,{classes:`cm-setting-chooser__icon${O.noPreselection?" cm-setting-chooser__icon--no-transparency":""}`,icon:S.icon,size:_.l.SIZE_LARGE}):S.iconclass?(0,s.jsx)("i",{className:`cm-setting-chooser__icon--legacy ${O.noPreselection?"cm-setting-chooser__icon--no-transparency":""} ${S.iconclass}`}):null,(0,s.jsx)("i",{className:"cm-setting-chooser__selected ca-icon--check-filled ca-icon--sm"})]}),(0,s.jsxs)("div",{className:"cm-setting-chooser__main",children:[(0,s.jsx)("h4",{className:`cm-setting-chooser__title ${O.noWrap?"cm-setting-chooser__title--nowrap":""}`,children:S.name}),(0,s.jsx)("p",{className:`cm-setting-chooser__text ${O.noWrap?"cm-setting-chooser__text--nowrap":""}`,children:S.text})]})]}))}),R))})]}):(0,s.jsxs)("div",{className:"cm-setting__preview",children:[O.label?(0,s.jsx)("label",{htmlFor:O.id,className:"cm-setting__label cm-setting-chooser__title",children:O.label}):null,(0,s.jsx)("div",{className:"cm-setting-chooser__types",children:(P=O.options)==null?void 0:P.map((S,R)=>(0,s.jsxs)("button",l(o({className:(0,b.h)(["cm-setting-chooser__type js-cm-setting-chooser__type",S.modifier?`${S.modifier}`:"",O.columns&&N.includes(O.columns)?`cm-setting-chooser__type--${O.columns}columns`:"",O.value===S.value?"state-selected":"",S.name?"":"cm-setting-chooser__type--icon-only",t.OA])},{[`data-${O.id}`]:S.value}),{children:[S.icon?S.icon.includes("/")?(0,s.jsx)("img",{className:"cm-setting-chooser__icon",src:S.icon}):(0,s.jsx)(C.V,{classes:"cm-setting-chooser__icon",icon:S.icon,size:_.l.SIZE_LARGE}):S.iconclass?(0,s.jsx)("i",{className:`cm-setting-chooser__icon--legacy ${S.iconclass}`}):null,S.name?(0,s.jsx)("span",{className:"tw-block tw-mt-1 tw-mb-0.5 tw-text-center tw-text-body-x-small tw-hyphens-auto tw-line",children:S.name}):null,O.add_indicators?(0,s.jsx)("span",{className:"ca-badge ca-badge--default ca-badge--small ca-badge--icon cm-setting-chooser__badge",children:(0,s.jsx)("i",{className:"icon-plus"})}):null]}),R))})]})})},68084:function(ve,$,r){"use strict";r.d($,{K:function(){return c}});var s=r(86070),b=r(15575),t=r(14154),_=Object.defineProperty,C=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=(o,l,p)=>l in o?_(o,l,{enumerable:!0,configurable:!0,writable:!0,value:p}):o[l]=p,w=(o,l)=>{for(var p in l||(l={}))m.call(l,p)&&E(o,p,l[p]);if(g)for(var p of g(l))T.call(l,p)&&E(o,p,l[p]);return o},u=(o,l)=>C(o,y(l));const c=(0,t.I)(o=>{var l;return(0,s.jsx)("div",u(w(w(u(w({className:`js-co-settings__elem cm-setting__elem cm-setting-chooser${o.modifier?` cm-setting-chooser--${o.modifier}`:""}`},o.readonly?{"data-readonly":o.readonly}:{}),{"data-id":o.id,"data-type":"chooser"}),o.group?{"data-group":o.group}:{}),o.allow_multiple?{"data-multiple":o.allow_multiple}:{}),{children:o.templates&&o.templates.items?typeof((l=o.templates)==null?void 0:l.itemsReact)=="function"?(0,s.jsx)(o.templates.itemsReact,w({},o)):null:(0,s.jsx)(b.C,w({},o))}))})},64182:function(ve,$,r){"use strict";r.d($,{g:function(){return l}});var s=r(86070),b=r(49198),t=r.n(b),_=r(62878),C=r(14154),y=Object.defineProperty,g=Object.defineProperties,m=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,u=(p,f,O)=>f in p?y(p,f,{enumerable:!0,configurable:!0,writable:!0,value:O}):p[f]=O,c=(p,f)=>{for(var O in f||(f={}))E.call(f,O)&&u(p,O,f[O]);if(T)for(var O of T(f))w.call(f,O)&&u(p,O,f[O]);return p},o=(p,f)=>g(p,m(f));const l=(0,C.I)(p=>{let f=t()(p.value),O=null;return f.isValid()?O=f.toRgb():f=null,(0,s.jsx)("div",o(c(c(o(c({className:`js-co-settings__elem cm-setting__elem cm-setting-color ${p.modifier?`cm-setting-color--${p.modifier}`:""} lazyload`},p.readonly?{"data-readonly":p.readonly}:{}),{"data-color":`${p.value?`${p.value}`:"transparent"}`,"data-id":p.id,"data-type":"color"}),p.set?{"data-set":p.set.join(",")}:{}),p.group?{"data-group":p.group}:{}),{children:p.type==="simple"?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"cm-setting-color__hex-simple",children:(0,s.jsx)(_.A,{id:`${p.id}_input`,group:p.group,label:p.label,modifier:p.modifier,value:f==null?void 0:f.toHexString(),classes:"js-cm-setting-color__hex-simple",placeholder:window.translate("Legacy_setting_elem_color_placeholder")})}),(0,s.jsx)("span",{className:"cm-setting-color__preview cm-setting-color__bubble",children:(0,s.jsx)("span",{className:"cm-setting-color__preview-inner js-cm-setting-color__bubble",style:{backgroundColor:`${f?`${f.toRgbString()}`:"transparent"}`}})}),(0,s.jsxs)("div",{className:"cm-setting-color__tooltip cm-btn-dropdown__menu state-open js-cm-setting-color__tooltip js-cm-setting-color__chooser",children:[(0,s.jsx)("div",{className:"js-cm-setting-color__picker"}),(0,s.jsxs)("div",{className:"cm-setting-color__colors",children:[(0,s.jsxs)("div",{className:"cm-setting-color__color",children:[(0,s.jsx)("label",{className:"cm-setting-color__label",htmlFor:p.id,children:"HEX"}),(0,s.jsx)("input",{id:p.id,name:p.id,className:"cm-setting-color__input js-cm-setting-color__hex",value:f?`${f.toHexString()}`:"",type:"text","aria-label":"HEX"})]}),(0,s.jsxs)("div",{className:"cm-setting-color__color",children:[(0,s.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__r",children:"R"}),(0,s.jsx)("input",{id:"cm-setting-color__r",className:"cm-setting-color__input js-cm-setting-color__r",value:f?`${O==null?void 0:O.r}`:"",type:"text","aria-label":"R"})]}),(0,s.jsxs)("div",{className:"cm-setting-color__color",children:[(0,s.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__g",children:"G"}),(0,s.jsx)("input",{id:"cm-setting-color__g",className:"cm-setting-color__input js-cm-setting-color__g",value:f?`${O==null?void 0:O.g}`:"",type:"text","aria-label":"G"})]}),(0,s.jsxs)("div",{className:"cm-setting-color__color",children:[(0,s.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__b",children:"B"}),(0,s.jsx)("input",{id:"cm-setting-color__b",className:"cm-setting-color__input js-cm-setting-color__b",value:f?`${O==null?void 0:O.b}`:"",type:"text","aria-label":"B"})]}),(0,s.jsxs)("div",{className:"cm-setting-color__color",children:[(0,s.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__a",children:"Alpha"}),(0,s.jsx)("input",{id:"cm-setting-color__a",className:"cm-setting-color__input js-cm-setting-color__a",value:f?O!=null&&O.a?O.a:"1":"",type:"text","aria-label":"Alpha"})]})]}),p.palette?(0,s.jsx)("div",{className:"cm-setting-color__palette js-cm-setting-color__palette","data-palette":p.palette}):null,(0,s.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer cm-setting__actions cm-setting__actions--flyout",children:[p.resettable?(0,s.jsx)("button",{className:"cm-btn cm-btn--default js-cm-setting-color__reset",children:window.translate("Legacy_color_picker_reset_button")}):null,(0,s.jsx)("button",{className:"cm-btn cm-btn--default js-cm-setting-color__cancel",children:window.translate("Legacy_btn_cancel")}),(0,s.jsx)("button",{className:"cm-btn cm-btn--primary js-cm-setting-color__save",children:window.translate("Legacy_btn_save")})]})]})]}):(0,s.jsxs)("div",{className:"cm-setting__preview js-cm-setting-color__chooser",children:[p.picker?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"js-cm-setting-color__picker"}),(0,s.jsxs)("div",{className:"cm-setting-color__colors",children:[(0,s.jsxs)("div",{className:"cm-setting-color__color",children:[(0,s.jsx)("label",{className:"cm-setting-color__label",htmlFor:p.id,children:"HEX"}),(0,s.jsx)("input",{id:p.id,name:p.id,className:"cm-setting-color__input js-cm-setting-color__hex",value:f?f.toHexString():"",type:"text","aria-label":"HEX"})]}),(0,s.jsxs)("div",{className:"cm-setting-color__color",children:[(0,s.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__preview-r",children:"R"}),(0,s.jsx)("input",{id:"cm-setting-color__preview-r",className:"cm-setting-color__input js-cm-setting-color__r",value:f?O==null?void 0:O.r:"",type:"text","aria-label":"R"})]}),(0,s.jsxs)("div",{className:"cm-setting-color__color",children:[(0,s.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__preview-g",children:"G"}),(0,s.jsx)("input",{id:"cm-setting-color__preview-g",className:"cm-setting-color__input js-cm-setting-color__g",value:f?O==null?void 0:O.g:"",type:"text","aria-label":"G"})]}),(0,s.jsxs)("div",{className:"cm-setting-color__color",children:[(0,s.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__preview-b",children:"B"}),(0,s.jsx)("input",{id:"cm-setting-color__preview-b",className:"cm-setting-color__input js-cm-setting-color__b",value:f?O==null?void 0:O.b:"",type:"text","aria-label":"B"})]}),(0,s.jsxs)("div",{className:"cm-setting-color__color",children:[(0,s.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__preview-a",children:"Alpha"}),(0,s.jsx)("input",{id:"cm-setting-color__preview-a",className:"cm-setting-color__input js-cm-setting-color__a",value:f?O!=null&&O.a?O.a:"1":"",type:"text","aria-label":"Alpha"})]})]})]}):null,p.palette?(0,s.jsx)("div",{className:"cm-setting-color__palette js-cm-setting-color__palette","data-palette":p.palette}):null]})}))})},83539:function(ve,$,r){"use strict";r.d($,{F:function(){return u}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.defineProperties,C=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,T=(c,o,l)=>o in c?t(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,E=(c,o)=>{for(var l in o||(o={}))g.call(o,l)&&T(c,l,o[l]);if(y)for(var l of y(o))m.call(o,l)&&T(c,l,o[l]);return c},w=(c,o)=>_(c,C(o));const u=(0,b.I)(c=>(0,s.jsx)("div",w(E(E(E(E(E(E(E({className:`js-co-settings__elem cm-setting__elem${c.classes?` ${c.classes}`:""}`,"data-id":c.id,"data-type":"date"},c.group?{"data-group":c.group}:{}),c.no_min_date?{"data-no-min-date":c.no_min_date}:{}),c.allow_empty?{"data-allow-empty":c.allow_empty}:{}),c.format?{"data-format":c.format}:{}),c.format_value?{"data-format-value":c.format_value}:{}),c.min_date?{"data-min-date":c.min_date}:{}),c.max_date?{"data-max-date":c.max_date}:{}),{children:(0,s.jsxs)("div",{className:"cm-setting__preview cm-setting__bar js-cm-setting__bar",children:[(0,s.jsx)("label",{htmlFor:c.id,className:"cm-setting__label js-cm-setting__label",children:c.label}),(0,s.jsxs)("div",{className:"cm-setting__group",children:[(0,s.jsx)("span",{className:"cm-setting__group-prefix js-cm-setting__group-prefix",children:(0,s.jsx)("i",{className:"ca-icon--calendar"})}),(0,s.jsx)("div",{className:"cm-setting__group-wrap",children:(0,s.jsx)("input",E(E(E(E(E(w(E({spellCheck:"false",autoComplete:"off",className:"cm-setting__input js-cm-setting__input"},c.placeholder?{placeholder:c.placeholder}:{}),{value:c.value||"",id:c.id,type:"text",name:c.id}),c.mask?{"data-mask":c.mask}:{}),c.required?{required:!0}:{}),c.disabled?{disabled:!0}:{}),c.readonly?{readOnly:!0}:{}),c.msg?{"data-msg":c.msg}:{}))})]})]})})))},90166:function(ve,$,r){"use strict";r.d($,{g:function(){return u}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.defineProperties,C=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,T=(c,o,l)=>o in c?t(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,E=(c,o)=>{for(var l in o||(o={}))g.call(o,l)&&T(c,l,o[l]);if(y)for(var l of y(o))m.call(o,l)&&T(c,l,o[l]);return c},w=(c,o)=>_(c,C(o));const u=(0,b.I)(c=>{var o;return(0,s.jsxs)(s.Fragment,{children:[c.non_selection===!0?(0,s.jsx)("option",{label:" ",className:"ignored"}):null,c.allow_empty_value==!0?(0,s.jsx)("option",{value:"",children:"\u2014"}):null,(o=c.options)==null?void 0:o.map((l,p)=>(0,s.jsx)("option",w(E(E({value:l.value},l.value==c.value?{selected:!0}:{}),c.tpl.renderDataAttributesAsObject(l.data)),{children:l.name}),p))]})})},59240:function(ve,$,r){"use strict";r.d($,{U:function(){return o}});var s=r(86070),b=r(78149),t=r(90166),_=r(14154),C=Object.defineProperty,y=Object.defineProperties,g=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,w=(l,p,f)=>p in l?C(l,p,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[p]=f,u=(l,p)=>{for(var f in p||(p={}))T.call(p,f)&&w(l,f,p[f]);if(m)for(var f of m(p))E.call(p,f)&&w(l,f,p[f]);return l},c=(l,p)=>y(l,g(p));const o=(0,_.I)(l=>(0,s.jsx)("div",c(u(u({className:`js-co-settings__elem cm-setting__elem cm-setting-dropdown ${l.classes?` ${l.classes}`:""}`,"data-id":l.id,"data-type":"dropdown"},l.expand?{"data-expand":l.expand}:{}),l.float?{"data-float":"1"}:{}),{children:(0,s.jsxs)("div",{className:"cm-setting__preview cm-setting__bar js-cm-setting__bar",children:[l.label?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("label",{htmlFor:l.id,className:`cm-setting__label${l.tooltip?" cm-setting__label--float-left":""}`,children:l.label}),l.tooltip?(0,s.jsx)("span",{className:`cm-setting__tooltip tt-height-auto ${l.tooltip.position?`tt-${l.tooltip.position}`:""}`,"data-tooltip":l.tooltip.content,"aria-hidden":!0,children:(0,s.jsx)(b.V,{icon:l.tooltip.icon,size:l.tooltip.iconSize})}):null]}):null,(0,s.jsx)("select",c(u({id:l.id,className:`js-co-settings__select--${l.id}`,name:l.id},l.readonly?{readOnly:"true"}:{}),{"data-template":l.template?`${l.template}`:"c-dropdown",children:(0,s.jsx)(t.g,u({},l))}))]})})))},64584:function(ve,$,r){"use strict";r.d($,{H:function(){return _}});var s=r(86070),b=r(62878),t=r(14154);const _=(0,t.I)(C=>(0,s.jsxs)("div",{className:"co-settings__row js-cm-setting-frame__values",children:[(0,s.jsx)("div",{className:"g-col-xs-3 co-settings__col",children:(0,s.jsx)(b.A,{id:`${C.id}_top`,type:"unit",group:C.group,label:window.translate("Legacy_settings_dimensions_top"),value:C.value.top?C.tpl.unit(C.value.top,!0):0,placeholder:window.translate("Legacy_settings_dimensions_top_placeholder"),classes:C.inputClasses})}),(0,s.jsx)("div",{className:"g-col-xs-3 co-settings__col",children:(0,s.jsx)(b.A,{id:`${C.id}_right`,type:"unit",group:C.group,label:window.translate("Legacy_settings_dimensions_right"),value:C.value.right?C.tpl.unit(C.value.right,!0):0,placeholder:window.translate("Legacy_settings_dimensions_right_placeholder"),classes:C.inputClasses})}),(0,s.jsx)("div",{className:"g-col-xs-3 co-settings__col",children:(0,s.jsx)(b.A,{id:`${C.id}_bottom`,type:"unit",group:C.group,label:window.translate("Legacy_settings_dimensions_bottom"),value:C.value.bottom?C.tpl.unit(C.value.bottom,!0):0,placeholder:window.translate("Legacy_settings_dimensions_bottom_placeholder"),classes:C.inputClasses})}),(0,s.jsx)("div",{className:"g-col-xs-3 co-settings__col",children:(0,s.jsx)(b.A,{id:`${C.id}_left`,type:"unit",group:C.group,label:window.translate("Legacy_settings_dimensions_left"),value:C.value.left?C.tpl.unit(C.value.left,!0):0,placeholder:window.translate("Legacy_settings_dimensions_left_placeholder"),classes:C.inputClasses})})]}))},29083:function(ve,$,r){"use strict";r.d($,{f:function(){return u}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.defineProperties,C=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,T=(c,o,l)=>o in c?t(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,E=(c,o)=>{for(var l in o||(o={}))g.call(o,l)&&T(c,l,o[l]);if(y)for(var l of y(o))m.call(o,l)&&T(c,l,o[l]);return c},w=(c,o)=>_(c,C(o));const u=(0,b.I)(c=>(0,s.jsx)("input",w(E({type:"hidden",name:c.id,className:"js-co-settings__elem","data-id":c.id,value:c.value},c.group?{"data-group":c.group}:{}),{"data-type":"hidden"})))},92610:function(ve,$,r){"use strict";r.d($,{u:function(){return t}});var s=r(86070),b=r(14154);const t=(0,b.I)(_=>{var C;return _.items&&_.items.length>0?(C=_.items)==null?void 0:C.map(y=>(0,s.jsxs)("div",{className:"js-cm-setting-list__item cm-setting-list__item cm-setting-list__item--border","data-value":y.id,children:[(0,s.jsxs)("div",{className:"cm-setting-list__col cm-setting-list__col--value",children:[(0,s.jsx)("i",{className:"icon-bars js-cm-setting-list__move cm-setting-list__icon"}),(0,s.jsx)("div",{className:"cm-setting-list__text-value",children:y.label}),(0,s.jsx)("i",{className:"ca-badge ca-badge--neutral",children:y.type})]}),(0,s.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,s.jsx)("i",{className:"fi-settings js-cm-setting-list__edit cm-setting-list__icon"})}),y.removable!==!1&&y.removable!=="false"?(0,s.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,s.jsx)("i",{"aria-label":"Delete",role:"button",tabIndex:0,className:"ca-icon--trash js-cm-setting-list__remove cm-setting-list__icon ca-icon--sm"})}):null,(0,s.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,s.jsx)("i",{"aria-label":"Settings",role:"button",tabIndex:0,className:"ca-icon--settings js-cm-setting-list__edit cm-setting-list__icon ca-icon--sm"})})]},y.id)):(0,s.jsx)("div",{className:"co-settings__blank",children:_.label_none})})},60525:function(ve,$,r){"use strict";r.d($,{M:function(){return t}});var s=r(86070),b=r(14154);const t=(0,b.I)(_=>{var C;return _.items&&_.items.length>0?(C=_.items)==null?void 0:C.map(y=>(0,s.jsxs)("div",{className:"js-cm-setting-list__item cm-setting-list__item cm-setting-list__item--border","data-value":y.id,children:[(0,s.jsxs)("div",{className:"cm-setting-list__col cm-setting-list__col--value",children:[(0,s.jsx)("i",{className:"icon-bars js-cm-setting-list__move cm-setting-list__icon"}),(0,s.jsx)("div",{className:"cm-setting-list__text-value",children:y.label}),(0,s.jsx)("i",{className:"ca-badge ca-badge--neutral",children:y.type})]}),(0,s.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,s.jsx)("i",{className:"fi-settings js-cm-setting-list__edit cm-setting-list__icon"})}),parseInt(y.id)?(0,s.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,s.jsx)("i",{className:"ca-icon--trash js-cm-setting-list__remove cm-setting-list__icon ca-icon--sm"})}):null,(0,s.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,s.jsx)("i",{className:"ca-icon--settings js-cm-setting-list__edit cm-setting-list__icon ca-icon--sm"})})]},y.id)):(0,s.jsx)("div",{className:"co-settings__blank",children:_.label_none})})},56754:function(ve,$,r){"use strict";r.d($,{Q:function(){return T}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(E,w,u)=>w in E?t(E,w,{enumerable:!0,configurable:!0,writable:!0,value:u}):E[w]=u,m=(E,w)=>{for(var u in w||(w={}))C.call(w,u)&&g(E,u,w[u]);if(_)for(var u of _(w))y.call(w,u)&&g(E,u,w[u]);return E};const T=(0,b.I)(E=>{var w;return E.items&&E.items.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("header",{className:"cm-setting-list__header",children:[(0,s.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--value",children:" Value "}),(0,s.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--default-label",children:" Default "}),(0,s.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings"})]}),(w=E.items)==null?void 0:w.map(u=>u.value?(0,s.jsxs)("div",{className:"js-cm-setting-list__item cm-setting-list__item","data-value":u.value,"data-id":u.id,children:[(0,s.jsxs)("div",{className:"cm-setting-list__col cm-setting-list__col--value",children:[(0,s.jsx)("i",{className:"icon-bars cm-setting-list__move js-cm-setting-list__move cm-setting-list__icon"}),(0,s.jsx)("div",{className:"cm-setting-list__text-value",children:u.value})]}),(0,s.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,s.jsxs)("label",{className:"ca-radio ca-radio--sm",children:[(0,s.jsx)("input",m({type:"checkbox",value:u.default?"true":"false",name:"select_default",className:"ca-radio__radio js-cm-setting-list__actions-item","data-item-processor":"defaultValue"},u.default?{checked:!0}:{})),(0,s.jsx)("span",{className:"ca-radio__bubble"})]})}),(0,s.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,s.jsx)("i",{className:"ca-icon--trash cm-setting-list__remove js-cm-setting-list__remove cm-setting-list__icon"})})]},u.id):null)]}):(0,s.jsx)("div",{className:"co-settings__blank cm-setting-list__blank",children:window.translate("SettingsElementList_empty")})})},83147:function(ve,$,r){"use strict";r.d($,{N:function(){return _}});var s=r(86070),b=r(75573),t=r(14154);const _=(0,t.I)(C=>{var y;return(0,s.jsx)("div",{className:"cm-setting-list__no-header",children:C.items&&C.items.length>0?(y=C.items)==null?void 0:y.map((g,m)=>g.value?(0,s.jsx)("div",{className:"js-cm-setting-list__item cm-setting-list__item","data-value":g.value,children:(0,s.jsxs)("label",{className:"cm-setting-list__col",children:[(0,s.jsx)(b.z,{name:"display",disabled:C.isLast&&g.display,value:g.value,checked:g.display,classes:"js-cm-setting-list__set-display"}),(0,s.jsx)("span",{className:"cm-setting-list--label",children:g.name})]})},m):null):(0,s.jsx)("div",{className:"co-settings__blank cm-setting-list__blank",children:" No values defined "})})})},63334:function(ve,$,r){"use strict";r.d($,{J:function(){return t}});var s=r(86070),b=r(14154);const t=(0,b.I)(_=>{var C;return _.items&&_.items.length>0?(C=_.items)==null?void 0:C.map((y,g)=>y.value?(0,s.jsxs)("div",{className:"js-cm-setting-list__item cm-setting-list__item","data-value":y.value,children:[(0,s.jsxs)("div",{className:"cm-setting-list__col cm-setting-list__col--value",children:[(0,s.jsx)("i",{className:"icon-bars cm-setting-list__move js-cm-setting-list__move cm-setting-list__icon"}),(0,s.jsx)("div",{className:"cm-setting-list__text-value",children:y.name})]}),(0,s.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,s.jsx)("i",{className:"ca-icon--settings js-cm-setting-list__edit cm-setting-list__icon"})}),(0,s.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,s.jsx)("i",{className:"ca-icon--trash cm-setting-list__remove js-cm-setting-list__remove cm-setting-list__icon"})})]},g):null):(0,s.jsx)("div",{className:"co-settings__blank cm-setting-list__blank",children:_.label_none})})},97866:function(ve,$,r){"use strict";r.d($,{i:function(){return T}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(E,w,u)=>w in E?t(E,w,{enumerable:!0,configurable:!0,writable:!0,value:u}):E[w]=u,m=(E,w)=>{for(var u in w||(w={}))C.call(w,u)&&g(E,u,w[u]);if(_)for(var u of _(w))y.call(w,u)&&g(E,u,w[u]);return E};const T=(0,b.I)(E=>(0,s.jsxs)(s.Fragment,{children:[E.label?(0,s.jsx)("label",{className:"cm-setting__label cm-setting-list__label",children:E.label}):null,(0,s.jsxs)("div",{className:"cm-setting-list__wrapper",children:[(0,s.jsx)("div",{className:"cm-setting-list__add-section",children:(0,s.jsx)("input",{spellCheck:"false",autoComplete:"off",className:"cm-setting__input cm-setting-list__add-input js-cm-setting-list__add-input",placeholder:window.translate("Legacy_setting_list_wrap_default_placeholder")})}),(0,s.jsx)("div",{className:"js-cm-setting-list__items cm-setting-list__items",children:typeof E.templates.listReact=="function"?(0,s.jsx)(E.templates.listReact,m({},E)):null})]})]}))},28147:function(ve,$,r){"use strict";r.d($,{P:function(){return T}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(E,w,u)=>w in E?t(E,w,{enumerable:!0,configurable:!0,writable:!0,value:u}):E[w]=u,m=(E,w)=>{for(var u in w||(w={}))C.call(w,u)&&g(E,u,w[u]);if(_)for(var u of _(w))y.call(w,u)&&g(E,u,w[u]);return E};const T=(0,b.I)(E=>(0,s.jsxs)(s.Fragment,{children:[E.label?(0,s.jsx)("label",{className:"cm-setting__label cm-setting-list__label",children:E.label}):null,(0,s.jsx)("div",{className:"cm-setting-list__wrapper",children:(0,s.jsx)("div",{className:"js-cm-setting-list__items cm-setting-list__items",children:typeof E.templates.listReact=="function"?(0,s.jsx)(E.templates.listReact,m({},E)):null})})]}))},44318:function(ve,$,r){"use strict";r.d($,{B:function(){return l}});var s=r(86070),b=r(46223),t=r(45924),_=r(63334),C=r(14154),y=Object.defineProperty,g=Object.defineProperties,m=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,u=(p,f,O)=>f in p?y(p,f,{enumerable:!0,configurable:!0,writable:!0,value:O}):p[f]=O,c=(p,f)=>{for(var O in f||(f={}))E.call(f,O)&&u(p,O,f[O]);if(T)for(var O of T(f))w.call(f,O)&&u(p,O,f[O]);return p},o=(p,f)=>g(p,m(f));const l=(0,C.I)(p=>(0,s.jsxs)(s.Fragment,{children:[p.label?(0,s.jsx)("label",{className:"cm-setting__label cm-setting-list__label",children:p.label}):null,(0,s.jsxs)("div",{className:"cm-setting-list__wrapper",children:[(0,s.jsxs)("div",{className:"cm-setting-list__add-section",children:[(0,s.jsx)("div",{className:"cm-setting-list__btn-bar",children:(0,s.jsx)("button",o(c({type:"button"},p.disabled?{disabled:!0}:{}),{className:(0,b.h)(["cm-btn cm-btn--default js-cm-setting-list__add",t.OA]),children:p.label_add||"Add"}))}),(0,s.jsx)("div",{className:"cm-setting-list__form-container js-cm-setting-list__form-container"})]}),(0,s.jsx)("div",{className:"js-cm-setting-list__items cm-setting-list__items",children:p.templates.list?typeof p.templates.listReact=="function"?(0,s.jsx)(p.templates.listReact,c({},p)):null:(0,s.jsx)(_.J,c({},p))})]})]}))},61447:function(ve,$,r){"use strict";r.d($,{v:function(){return c}});var s=r(86070),b=r(44318),t=r(14154),_=Object.defineProperty,C=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=(o,l,p)=>l in o?_(o,l,{enumerable:!0,configurable:!0,writable:!0,value:p}):o[l]=p,w=(o,l)=>{for(var p in l||(l={}))m.call(l,p)&&E(o,p,l[p]);if(g)for(var p of g(l))T.call(l,p)&&E(o,p,l[p]);return o},u=(o,l)=>C(o,y(l));const c=(0,t.I)(o=>(0,s.jsx)("div",u(w(w(w(w(w(u(w({className:"js-co-settings__elem cm-setting__elem cm-setting-list"},o.data?{"data-data":JSON.stringify(o.data)}:{}),{"data-items":JSON.stringify({items:o.items||[]})}),o.readonly?{"data-readonly":o.readonly}:{}),o.templates.list?{"data-template-list":o.templates.list}:{}),o.templates.wrap?{"data-template-wrap":o.templates.wrap}:{}),o.templates.add?{"data-template-add":o.templates.add}:{}),o.templates.edit?{"data-template-edit":o.templates.edit}:{}),{"data-id":o.id,"data-type":"list",children:o.templates&&o.templates.wrap?typeof o.templates.wrapReact=="function"?(0,s.jsx)(o.templates.wrapReact,w({},o)):null:o.templates&&o.templates.add&&o.templates.edit?(0,s.jsx)(b.B,w({},o)):null})))},62294:function(ve,$,r){"use strict";r.d($,{_:function(){return _}});var s=r(86070),b=r(59240),t=r(14154);const _=(0,t.I)(C=>{let y=C.permission_options;switch(C.project_type){case"STYLEGUIDE":y=[{value:"VIEW",name:window.translate("Legacy_btn_team_member_invite_observer")}],C.i18n&&y.push({value:"TRANSLATE",name:window.translate("Legacy_btn_team_member_invite_translator")}),y.push({value:"EDIT",name:window.translate("Legacy_btn_team_member_invite_author")}),(C.utils.account.hasPermission("admin")||C.isOwner)&&y.push({value:"ADMIN",name:window.translate("Legacy_btn_team_member_invite_owner")});break;case"WORKSPACE":case"PATTERNLIBRARY":case"MEDIALIBRARY":case"LOGOLIBRARY":case"DOCUMENTLIBRARY":case"ICONLIBRARY":case"TEXTLIBRARY":case"TEMPLATELIBRARY":case"BRANDUPDATELIBRARY":case"CAMPAIGN":y=[{value:"VIEW",name:window.translate("Legacy_btn_team_member_invite_observer")},{value:"COMMENT",name:window.translate("Legacy_btn_team_member_invite_reviewer")},{value:"EDIT",name:window.translate("Legacy_btn_team_member_invite_author")}],(C.utils.account.hasPermission("admin")||C.isOwner)&&y.push({value:"ADMIN",name:window.translate("Legacy_btn_team_member_invite_owner")});break}return(0,s.jsx)("div",{className:"js-co-settings__elem cm-setting__elem","data-id":C.id,"data-type":"permission",children:(0,s.jsx)(b.U,{id:C.id,label:window.translate("Legacy_settings_team_role"),value:C.value,expand:!0,template:"c-dropdown-permission",options:y})})})},70402:function(ve,$,r){"use strict";r.d($,{w:function(){return u}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.defineProperties,C=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,T=(c,o,l)=>o in c?t(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,E=(c,o)=>{for(var l in o||(o={}))g.call(o,l)&&T(c,l,o[l]);if(y)for(var l of y(o))m.call(o,l)&&T(c,l,o[l]);return c},w=(c,o)=>_(c,C(o));const u=(0,b.I)(c=>(0,s.jsx)("div",w(E({className:"js-co-settings__elem cm-setting__elem cm-setting-ratio","data-id":c.id,"data-type":"ratio"},c.group?{"data-group":c.group}:{}),{children:(0,s.jsxs)("div",{className:"cm-setting__preview",children:[c.label?(0,s.jsx)("label",{htmlFor:c.id,className:"cm-setting__label",children:c.label}):null,(0,s.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--xs",children:[(0,s.jsx)("button",{type:"button","data-ratio":"original","data-test-id":"crop-ratio",className:` cm-btn cm-btn--default cm-setting-ratio__btn js-cm-setting-ratio__ratio ${c.size==="xs"?" cm-btn--xs ":""} ${!c.value||c.value==="original"?" state-active ":""}`,children:window.translate("Legacy_setting_elem_ratio_original")}),c.lockAspectRatio!==!0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{type:"button","data-ratio":"16:9","data-test-id":"crop-ratio",className:` cm-btn cm-btn--default cm-setting-ratio__btn js-cm-setting-ratio__ratio ${c.size==="xs"?" cm-btn--xs ":""} ${c.value==="16:9"?" state-active ":""}`,children:window.translate("Legacy_setting_elem_ratio_16_9")}),(0,s.jsx)("button",{type:"button","data-ratio":"4:3","data-test-id":"crop-ratio",className:` cm-btn cm-btn--default cm-setting-ratio__btn js-cm-setting-ratio__ratio ${c.size==="xs"?" cm-btn--xs ":""} ${c.value==="4:3"?" state-active ":""}`,children:window.translate("Legacy_setting_elem_ratio_4_3")}),(0,s.jsx)("button",{type:"button","data-ratio":"square","data-test-id":"crop-ratio",className:` cm-btn cm-btn--default cm-setting-ratio__btn js-cm-setting-ratio__ratio ${c.size==="xs"?" cm-btn--xs ":""} ${c.value==="square"?" state-active ":""}`,children:window.translate("Legacy_setting_elem_ratio_square")}),(0,s.jsx)("button",{type:"button","data-ratio":"custom","data-test-id":"crop-ratio",className:` cm-btn cm-btn--default cm-setting-ratio__btn js-cm-setting-ratio__ratio ${c.size==="xs"?" cm-btn--xs ":""} ${c.value==="custom"?" state-active ":""}`,children:window.translate("Legacy_setting_elem_ratio_custom")})]}):null]})]})})))},2910:function(ve,$,r){"use strict";r.d($,{p:function(){return c}});var s=r(86070),b=r(95376),t=r(14154),_=Object.defineProperty,C=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=(o,l,p)=>l in o?_(o,l,{enumerable:!0,configurable:!0,writable:!0,value:p}):o[l]=p,w=(o,l)=>{for(var p in l||(l={}))m.call(l,p)&&E(o,p,l[p]);if(g)for(var p of g(l))T.call(l,p)&&E(o,p,l[p]);return o},u=(o,l)=>C(o,y(l));const c=(0,t.I)(o=>(0,s.jsxs)("div",{className:`cm-setting__preview ${o.richtext_classes}`,children:[o.label?(0,s.jsx)("div",{className:"cm-setting__label cm-setting-richtext__label",children:o.label}):null,(0,s.jsx)("div",u(w(w({id:o.id,name:o.id,spellCheck:"false",tabIndex:-1,className:"cm-setting cm-setting__input cm-setting-richtext__editor js-cm-setting__richtext-editor"},o.disabled?{disabled:!0}:{}),o.readonly?{readOnly:!0}:{}),{children:(0,b.Ay)(o.value)}))]}))},5944:function(ve,$,r){"use strict";r.d($,{O:function(){return E}});var s=r(86070),b=r(2910),t=r(14154),_=Object.defineProperty,C=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,m=(w,u,c)=>u in w?_(w,u,{enumerable:!0,configurable:!0,writable:!0,value:c}):w[u]=c,T=(w,u)=>{for(var c in u||(u={}))y.call(u,c)&&m(w,c,u[c]);if(C)for(var c of C(u))g.call(u,c)&&m(w,c,u[c]);return w};const E=(0,t.I)(w=>(0,s.jsx)("div",{className:"js-co-settings__elem cm-setting__elem","data-id":w.id,"data-type":"richtext","data-placeholder":w.placeholder||"","data-toolbar":JSON.stringify(w.toolbar||{}),"data-set":w.set||"",children:(0,s.jsx)(b.p,T({},w))}))},85131:function(ve,$,r){"use strict";r.d($,{j:function(){return o}});var s=r(86070),b=r(93277),t=r(47929),_=r(14154),C=Object.defineProperty,y=Object.defineProperties,g=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,w=(l,p,f)=>p in l?C(l,p,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[p]=f,u=(l,p)=>{for(var f in p||(p={}))T.call(p,f)&&w(l,f,p[f]);if(m)for(var f of m(p))E.call(p,f)&&w(l,f,p[f]);return l},c=(l,p)=>y(l,g(p));const o=(0,_.I)(l=>{var p;let f;return l.create?f=[{identifier:"cancel",label:window.translate("Legacy_btn_cancel"),style:b.Q.STYLE_SECONDARY},{identifier:"create",label:window.translate("Legacy_workspace_layer_prototyping_interaction_create_template"),style:b.Q.STYLE_PRIMARY}]:f=[{identifier:"cancel",label:window.translate("Legacy_btn_cancel"),style:b.Q.STYLE_SECONDARY}],(0,s.jsxs)("div",c(u(c(u({className:"js-co-settings__elem cm-setting__elem"},l.readonly?{"data-readonly":l.readonly}:{}),{"data-template-preview":l.templates.preview,"data-id":l.id}),l.clear_search?{"data-clear-search":l.clear_search}:{}),{"data-type":"search",children:[(0,s.jsxs)("div",{className:"cm-setting__preview cm-setting-search__preview js-cm-setting-search__preview",children:[(0,s.jsx)("label",{htmlFor:l.id,className:"cm-setting__label",children:l.label}),(0,s.jsx)("div",{className:"js-cm-setting-search__preview-content cm-setting-search__preview-content",children:typeof l.templates.previewReact=="function"?(0,s.jsx)(l.templates.previewReact,u({},l.previewData)):null}),(0,s.jsx)("input",u(c(u({className:"js-cm-setting-search__value cm-setting-search__value",name:l.id,type:"text"},l.required?{required:!0}:{}),{value:""}),l.msg?{"data-msg":l.msg}:{}))]}),(0,s.jsx)("div",{className:"cm-setting__details js-cm-setting__details",children:(0,s.jsxs)("div",{className:"js-cm-setting-search__chooser",children:[(0,s.jsxs)("div",{className:"cm-setting__bar js-cm-setting__bar",children:[(0,s.jsx)("label",{htmlFor:l.id,className:"cm-setting__label",children:l.searchlabel?l.searchlabel:"Search"}),(0,s.jsx)("input",c(u({autoComplete:"off",className:"cm-setting__input js-cm-setting-search__input"},l.placeholder?{placeholder:l.placeholder}:{}),{id:`search-${l.id}-search`}))]}),(0,s.jsx)("div",{className:"cm-setting-search__items js-cm-setting-search__items",id:`search-${l.id}-content`,children:l.data?l.templates&&l.templates.content?typeof l.templates.contentReact=="function"?(0,s.jsx)(l.templates.contentReact,u({},l)):null:l.templates&&l.templates.item?(p=l.data)==null?void 0:p.map((O,L)=>typeof l.templates.itemReact=="function"?(0,s.jsx)(l.templates.itemReact,u({},O),L):null):null:null}),(0,s.jsx)("div",c(u({className:"cm-btn-bar cm-btn-bar--footer cm-setting__actions cm-setting__actions--flyout js-cm-setting__actions"},l.create?{"data-template":l.templates.create}:{}),{children:(0,s.jsx)(t.I,{buttons:f,size:b.Q.SIZE_LARGE,background:b.Q.BACKGROUND_BLACK_05})}))]})})]}))})},67620:function(ve,$,r){"use strict";r.d($,{f:function(){return _}});var s=r(86070),b=r(62878),t=r(14154);const _=(0,t.I)(C=>(0,s.jsxs)(s.Fragment,{children:[C.readonly?null:(0,s.jsx)("div",{className:"cm-setting-tags__search js-cm-setting-tags__search",children:(0,s.jsx)(b.A,{id:`${C.id}_query`,label:C.label,value:C.value,readonly:C.readonly,border:!0,msg:window.translate("Legacy_no_tag_provided_error_message"),placeholder:C.placeholder})}),(0,s.jsx)("div",{className:`cm-setting-tags__results js-cm-setting-tags__results ${C.modal?"cm-setting-tags__results--modal":""} ${C.results_overflow_scroll?"cm-setting-tags__results--overflow-scroll":""}`}),C.autoTaggingIsEnabled&&C.autoTaggingIsSupported?(0,s.jsxs)("div",{className:"cm-setting-tags__autotag-container",children:[(0,s.jsx)("div",{className:`cm-setting-tags__toggle ${C.autoTaggingIsRunning?"cm-setting-tags__toggle--in-progress":"js-cm-setting-tags__toggle"}`,children:(0,s.jsxs)("label",{className:"cm-setting-tags__label",children:["Suggested Tags"," ",C.autoTaggingIsRunning?(0,s.jsx)("div",{className:"cm-setting-tags__badge",children:"in progress"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"icon-angle-down cm-setting-tags__caret cm-setting-tags__caret--down"}),(0,s.jsx)("i",{className:"icon-angle-up cm-setting-tags__caret cm-setting-tags__caret--up"})]})]})}),C.autoTaggingFailed?(0,s.jsx)("div",{className:"cm-setting-tags__results cm-setting-tags__results--autotags",children:(0,s.jsxs)("div",{className:"cm-setting-tags__text",children:["Suggested Tag generation for this asset has failed. Please contact us:"," ","support@frontify.com."]})}):(0,s.jsx)("div",{className:"cm-setting-tags__results cm-setting-tags__results--autotags js-cm-setting-tags__results--autotags"})]}):null]}))},30543:function(ve,$,r){"use strict";r.d($,{e:function(){return c}});var s=r(86070),b=r(67620),t=r(14154),_=Object.defineProperty,C=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=(o,l,p)=>l in o?_(o,l,{enumerable:!0,configurable:!0,writable:!0,value:p}):o[l]=p,w=(o,l)=>{for(var p in l||(l={}))m.call(l,p)&&E(o,p,l[p]);if(g)for(var p of g(l))T.call(l,p)&&E(o,p,l[p]);return o},u=(o,l)=>C(o,y(l));const c=(0,t.I)(o=>(0,s.jsx)("div",u(w(u(w(w(w(w({className:`js-co-settings__elem cm-setting__elem cm-setting-tags ${o.modal?"cm-setting-tags--modal":""}`,"data-type":"tags","data-tags":JSON.stringify(o.tags||[]),"data-project-id":o.projectId,"data-screens":JSON.stringify(o.screens||[]),"data-sets":JSON.stringify(o.sets||[]),"data-id":o.id},o.group?{"data-group":o.group}:{}),o.readonly?{"data-readonly":o.readonly}:{}),o.searchApi?{"data-search-api":o.searchApi}:{}),o.searchFilteredBy?{"data-search-filtered-by":o.searchFilteredBy}:{}),{"data-include-applied-auto-tags":o.includeAppliedAutoTags||!1}),o.label_none?{"data-label-none":o.label_none}:{}),{children:(0,s.jsx)(b.f,w({},o))})))},62878:function(ve,$,r){"use strict";r.d($,{A:function(){return c}});var s=r(86070),b=r(95376),t=r(14154),_=Object.defineProperty,C=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=(o,l,p)=>l in o?_(o,l,{enumerable:!0,configurable:!0,writable:!0,value:p}):o[l]=p,w=(o,l)=>{for(var p in l||(l={}))m.call(l,p)&&E(o,p,l[p]);if(g)for(var p of g(l))T.call(l,p)&&E(o,p,l[p]);return o},u=(o,l)=>C(o,y(l));const c=(0,t.I)(o=>{var l;return(0,s.jsxs)("div",u(w(w({className:`js-co-settings__elem cm-setting__elem${o.border?" state-border":""}${o.modifier?` cm-setting-text--${o.modifier}`:""}`,"data-id":o.id,"data-type":"text"},o.group?{"data-group":o.group}:{}),o.nolive?{"data-nolive":o.nolive}:{}),{children:[(0,s.jsxs)("div",{className:"cm-setting__preview cm-setting__bar js-cm-setting__bar",children:[o.label?(0,s.jsxs)("label",{htmlFor:o.id,className:"cm-setting__label",children:[o.label,o.helperLink&&o.helperText?(0,s.jsx)("a",{className:"cm-setting__label-link",target:"_blank",href:o.helperLink,children:o.helperText}):null]}):null,(0,s.jsxs)("div",{className:"cm-setting__group",children:[(0,s.jsx)("span",{className:"cm-setting__group-prefix js-cm-setting__group-prefix",children:o.prefix?(0,b.Ay)(o.prefix):null}),(0,s.jsx)("div",{className:"cm-setting__group-wrap",children:(0,s.jsx)("input",w(w(w(w(w(w(w(w(w(w(w(w(w({id:o.id,className:`cm-setting__input js-cm-setting__input${o.classes?` ${o.classes}`:""}`,name:o.id,spellCheck:"false",autoComplete:"off",formNoValidate:!0},o.placeholder?{placeholder:o.placeholder}:{}),o.minValue?{min:o.minValue}:{}),o.maxValue?{max:o.maxValue}:{}),o.type==="number"&&o.allow_empty_number!=!0||o.type==="unit"?{value:o.value||0}:{value:o.value||""}),o.mask?{"data-mask":o.mask}:{}),o.type?{type:o.type}:{}),o.required?{required:!0}:{}),o.disabled?{disabled:!0}:{}),o.readonly?{readOnly:!0}:{}),o.maxlength?{maxLength:o.maxlength}:{}),o.minlength?{minlength:o.minlength}:{}),o.msg?{"data-msg":o.msg}:{}),o.inputData?o.tpl.renderDataAttributesAsObject((l=o.inputData)!=null?l:{}):{}))}),o.suffix?(0,s.jsx)("span",{className:"cm-setting__group-suffix",children:(0,b.Ay)(o.suffix)}):null,o.clearable?(0,s.jsx)("span",{className:"cm-setting__group-suffix cm-setting__clear-btn js-cm-setting__clear-btn",children:(0,s.jsx)("i",{className:"ca-icon--reject ca-icon--sm"})}):null]})]}),o.info?(0,s.jsx)("p",{className:"cm-setting__info",children:o.info}):null]}))})},87349:function(ve,$,r){"use strict";r.d($,{D:function(){return u}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.defineProperties,C=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,T=(c,o,l)=>o in c?t(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,E=(c,o)=>{for(var l in o||(o={}))g.call(o,l)&&T(c,l,o[l]);if(y)for(var l of y(o))m.call(o,l)&&T(c,l,o[l]);return c},w=(c,o)=>_(c,C(o));const u=(0,b.I)(c=>(0,s.jsx)("div",w(E({className:`js-co-settings__elem cm-setting__elem${c.classes?` ${c.classes}`:""}${c.modifier?` cm-setting-text--${c.modifier}`:""}`,"data-id":c.id,"data-type":"text"},c.group?{"data-group":c.group}:{}),{children:(0,s.jsxs)("div",{className:"cm-setting__preview cm-setting__bar js-cm-setting__bar",children:[(0,s.jsx)("label",{htmlFor:c.id,className:"cm-setting__label",children:c.label}),(0,s.jsxs)("div",{className:"tw-relative",style:E({},c.maxHeight?{maxHeight:`${c.maxHeight}`}:{}),children:[(0,s.jsx)("textarea",w(E(E(E(E(E(w(E({spellCheck:"false",autoComplete:"off",className:`tw-break-words tw-box-border tw-w-full !tw-leading-4 !tw-text-sm tw-overflow-hidden ${c.maxHeight?"tw-overflow-auto ":""}tw-absolute tw-h-full js-cm-setting__input cm-setting__input lazyload`},c.placeholder?{placeholder:c.placeholder}:{}),{id:c.id,name:c.id}),c.rows?{rows:c.rows}:{}),c.required?{required:!0}:{}),c.disabled?{disabled:!0}:{}),c.readonly?{readOnly:!0}:{}),c.msg?{"data-msg":c.msg}:{}),{children:c.value?c.value:null})),(0,s.jsx)("div",{className:"tw-break-words tw-box-border tw-w-full tw-leading-4 tw-text-sm tw-invisible tw-pt-1 tw-pb-2 tw-min-h-[48px] js-cm-setting__textarea--grow"})]})]})})))},90307:function(ve,$,r){"use strict";r.d($,{f:function(){return f}});var s=r(86070),b=r(46223),t=r(45924),_=r(75573),C=r(93791),y=r(78149),g=r(14154),m=Object.defineProperty,T=Object.defineProperties,E=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,o=(O,L,P)=>L in O?m(O,L,{enumerable:!0,configurable:!0,writable:!0,value:P}):O[L]=P,l=(O,L)=>{for(var P in L||(L={}))u.call(L,P)&&o(O,P,L[P]);if(w)for(var P of w(L))c.call(L,P)&&o(O,P,L[P]);return O},p=(O,L)=>T(O,E(L));const f=(0,g.I)(O=>{var L;const P={labelLocked:window.translate("Legacy_setting_toggle_lock_style_label_locked"),labelUnlocked:window.translate("Legacy_setting_toggle_lock_style_label_unlocked"),tooltipLocked:O.tooltipLocked,tooltipUnlocked:O.tooltipUnlocked};return(0,s.jsxs)("div",p(l(l(l(l({className:`js-co-settings__elem ${O.lockStyle?"":"cm-setting__elem"} ${O.classes?` ${O.classes}`:""} ${O.modifier?` cm-setting-toggle--${O.modifier}`:""}`,"data-id":O.id,"data-type":"toggle"},O.mapping?{"data-mapping-false":O.mapping[0],"data-mapping-true":O.mapping[1]}:{}),O.key?{"data-key":O.key}:{}),O.group?{"data-group":O.group}:{}),O.lockStyle?{"data-lock-style":O.lockStyle,"data-translations":JSON.stringify(P)}:{}),{children:[(0,s.jsx)("div",{className:`cm-setting__preview ${O.lockStyle?"cm-setting__preview--no-padding-top cm-setting__preview--no-padding-bottom":""}`,children:O.type==="checkbox"?(0,s.jsx)(_.z,{id:O.id,name:O.id,checked:O.checked,disabled:O.disabled,readonly:O.readonly,modifier:O.modifier,indeterminate:O.indeterminate||!1,classes:"cm-btn-toggle__input js-cm-setting-toggle",label:O.label,value:O.value,disable_label:O.disable_label,data:O.data}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("label",{className:(0,b.h)(["cm-btn-toggle cm-setting__value--inline js-cm-setting-switch",t.Lb]),children:[O.tooltip?(0,s.jsx)("div",{className:"cm-btn-toggle__tooltip tt-height-auto tt-top","data-tooltip":O.tooltip,children:(0,s.jsx)("i",{className:"cm-btn-toggle__tooltip-icon ca-icon--unknown ca-icon--sm"})}):null,(0,s.jsx)("input",l(p(l(l({id:O.id,name:O.id},O.checked?{checked:!0}:{}),O.disabled||O.readonly?{disabled:!0}:{}),{className:"cm-btn-toggle__input js-cm-setting-toggle",type:"checkbox"}),O.tpl.renderDataAttributesAsObject((L=O.data)!=null?L:{}))),O.lockStyle?O.checked?(0,s.jsx)("span",{className:`cm-setting-toggle__lock-icon js-cm-setting-toggle__lock-icon ${O.disabled?"cm-setting-toggle__lock-icon--disabled":""}`,children:(0,s.jsx)(y.V,{icon:C.l.ICON_LOCK,size:C.l.SIZE_MEDIUM})}):(0,s.jsx)("span",{className:`cm-setting-toggle__lock-icon js-cm-setting-toggle__lock-icon ${O.disabled?"cm-setting-toggle__lock-icon--disabled":""}`,children:(0,s.jsx)(y.V,{icon:C.l.ICON_OPEN_LOCK_FILLED,size:C.l.SIZE_MEDIUM,classes:"ca-icon--color-dark-blue"})}):(0,s.jsx)("i",{className:"cm-btn-toggle__toggle"})]}),(0,s.jsx)("div",{children:O.lockStyle?(0,s.jsx)("label",p(l({htmlFor:O.id,className:`cm-setting-toggle__lock-label js-cm-setting-toggle__lock-label ${O.checked?"":"cm-setting-toggle__lock-label--color-default"} ${O.disabled?"cm-setting-toggle__lock-label--disabled":""} ${P.tooltipLocked&&P.tooltipUnlocked?" cm-setting__tooltip tt-height-auto tt-left ":""}`},P.tooltipLocked&&P.tooltipUnlocked?{"data-tooltip":O.checked?P.tooltipLocked:P.tooltipUnlocked}:{}),{children:O.checked?P.labelLocked:P.labelUnlocked})):(0,s.jsxs)(s.Fragment,{children:[O.image?(0,s.jsx)("img",{className:"cm-setting__image--inline",src:O.image,alt:O.label,onError:({currentTarget:N})=>{N.onerror=null,O.imageError?N.src=O.imageError:N.style.visibility="hidden"}}):O.icon?(0,s.jsx)(y.V,{icon:O.icon.modifier,size:O.icon.size,classes:`cm-setting__image--inline ${O.icon.classes}`}):null,(0,s.jsx)("label",{htmlFor:O.id,className:"cm-setting__label--inline",children:O.label})]})})]})}),O.description?(0,s.jsx)("div",{className:"cm-setting-toggle--description",children:O.description}):null]}))})},83858:function(ve,$,r){"use strict";r.d($,{u:function(){return u}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.defineProperties,C=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,T=(c,o,l)=>o in c?t(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,E=(c,o)=>{for(var l in o||(o={}))g.call(o,l)&&T(c,l,o[l]);if(y)for(var l of y(o))m.call(o,l)&&T(c,l,o[l]);return c},w=(c,o)=>_(c,C(o));const u=(0,b.I)(c=>{c.translations||(c.translations=[]);const o={openModalButton:c.translations.openModalButton||window.translate("Legacy_settings_userlist_add_user_initial"),addUserButtonInitial:c.translations.addUserButtonInitial||window.translate("Legacy_settings_userlist_add_user_initial"),addUserButtonSingular:c.translations.addUserButtonSingular||window.translate("Legacy_settings_userlist_add_user_singular"),addUserButtonPlural:c.translations.addUserButtonPlural||window.translate("Legacy_settings_userlist_add_user_other"),cancelButton:c.translations.cancelButton||window.translate("Legacy_btn_cancel"),modalTitle:c.translations.modalTitle,notFoundLabel:c.translations.notFoundLabel||window.translate("Legacy_settings_users_not_found"),requiredError:c.translations.requiredError||window.translate("Legacy_settings_userlist_required_default_error"),blankSlateMessage:c.translations.blankSlateMessage||window.translate("Legacy_settings_userlist_default_blankslate_message")};let l;return c.value?l=c.value:l={id:{users:[],groups:[]},data:{users:[],groups:[]}},(0,s.jsx)("div",w(E({className:`js-co-settings__elem cm-setting__elem cm-setting-userlist ${c.noIndent?"cm-setting__elem--noindent":""}`,"data-id":c.id},c.group?{"data-group":c.group}:{}),{"data-exclude-current-user":c.excludeCurrentUser===!0,"data-api-all-users":c.apiAllUsers,"data-api-all-groups":c.apiAllGroups,"data-initial-selection-ids":JSON.stringify(l.id),"data-initial-selection-data":JSON.stringify(l.data),"data-translations":JSON.stringify(o),"data-type":"userlist","data-required":c.required?"true":"false","data-show-blank-slate-image":c.showBlankSlateImage?"true":"false","data-unlimited-list-height":c.unlimitedListHeight?"true":"false"}))})},87080:function(ve,$,r){"use strict";r.d($,{b:function(){return c}});var s=r(86070),b=r(75573),t=r(77345),_=r(23245),C=r(14154);const y=(0,C.I)(o=>{var l;return(0,s.jsxs)("div",{className:`cm-setting-users__list ${o.maxShowUsers?`cm-setting-users__list--max-users-height-${o.maxShowUsers}`:""} ${o.modifier?`cm-setting-users__list--${o.modifier}`:""} js-cm-setting-users__list-${o.id}`,children:[(0,s.jsx)("div",{className:`cm-setting-users__search-container js-cm-setting-users__search-container-${o.id}`,children:(l=o.users)==null?void 0:l.map(p=>{const f=p.communication_setting&&!p.communication_setting.subscribed,O=o.selectionRequired?"validate-multiselect":"";return(0,s.jsxs)("div",{className:"cm-setting-users__user js-cm-setting-users__user","data-jets":`${(p.name||"").toLowerCase()} ${(p.email||"").toLowerCase()}`,children:[(0,s.jsx)("div",{className:"cm-setting-users__avatar",children:(0,s.jsx)(_.p,{imageUrl:p.avatar_preview_url||p.preview_url_without_placeholder,gravatarHash:p.gravatar_hash,name:p.name,size:t.Z.SIZE_24,state:f?t.Z.STATE_DISABLED:t.Z.STATE_DEFAULT})}),(0,s.jsxs)("div",{className:`cm-setting-users__name-and-email ${f?"cm-setting-users__name-and-email--unsubscribed":""}`,children:[p.name?(0,s.jsxs)("div",{className:"cm-setting-users__name js-cm-setting-users__name",children:[p.name||"",o.id==="groups"&&p.users?(0,s.jsx)("span",{className:"ca-badge ca-badge--grey cm-setting-users__group-count",children:p.users.length}):null]}):null,(0,s.jsx)("div",{className:`cm-setting-users__email ${p.name?"":"cm-setting-users__email--email-only"}`,children:p.email||""})]}),p.name?null:(0,s.jsx)("span",{className:"ca-badge ca-badge--grey cm-setting-users__invitation-pending",children:window.translate("Legacy_group_add_users_invitation_pending")}),f?(0,s.jsx)("span",{className:"ca-badge ca-badge--grey cm-setting-users__invitation-pending",children:window.translate("Legacy_group_add_users_unsubscribed")}):null,(0,s.jsx)(b.z,{id:`${o.id}-${p.id}`,name:`${o.id}-${p.id}`,value:p.id,checked:p.checked,modifier:"sm",disabled:p.name===null||f,indeterminate:p.name===null,classes:`js-cm-setting-users__item-checkbox-input ${O}`,label_classes:"cm-setting-users__checkbox js-cm-setting-users__checkbox",data:{name:p.name,"user-id":p.id,msg:o.error_message||window.translate("Legacy_settings_users_validation_error")}})]},`user-${p.id}`)})}),o.searchEnabled?(0,s.jsx)("div",{className:`cm-setting-users__not-found js-cm-setting-users__not-found-${o.id}`}):null]})});var g=Object.defineProperty,m=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,w=(o,l,p)=>l in o?g(o,l,{enumerable:!0,configurable:!0,writable:!0,value:p}):o[l]=p,u=(o,l)=>{for(var p in l||(l={}))T.call(l,p)&&w(o,p,l[p]);if(m)for(var p of m(l))E.call(l,p)&&w(o,p,l[p]);return o};const c=(0,C.I)(o=>(0,s.jsx)("div",{className:`js-co-settings__elem cm-setting__elem cm-setting-users ${o.modifier?`cm-setting-users--${o.modifier}`:""}`,"data-id":o.id,"data-type":"users","data-label-selectall":window.translate("Legacy_settings_users_selectall"),"data-label-unselectall":window.translate("Legacy_settings_users_unselectall"),"data-not-found-label":o.notFoundLabel,"data-search-enabled":o.searchEnabled,children:(0,s.jsxs)("div",{className:"cm-setting__preview cm-setting__bar js-cm-setting__bar",children:[o.label?(0,s.jsx)("label",{htmlFor:"users",className:"cm-setting__label",children:o.label}):null,(0,s.jsx)("div",{className:"cm-setting-users__validation-error js-cm-setting-users__validation-error"}),o.searchEnabled?(0,s.jsxs)("div",{className:`cm-setting-users__filter ${o.modifier?`cm-setting-users__filter--${o.modifier}`:""}`,children:[(0,s.jsx)("i",{className:"cm-setting-users__filter-icon ca-icon--search ca-icon--sm"}),(0,s.jsx)("input",{className:`cm-setting-users__filter-query js-cm-setting-users__filter-query-${o.id}`,type:"text",placeholder:`${o.searchPlaceholder?`${o.searchPlaceholder}`:`${window.translate("Legacy_placeholder_search")}`}`})]}):null,o.selectAllEnabled?(0,s.jsx)("div",{className:"cm-setting-users__select",children:(0,s.jsx)(b.z,{id:`select-${o.id}`,name:`select-${o.id}`,label:window.translate("Legacy_settings_users_selectall"),modifier:"sm",disabled:!1,classes:"js-cm-setting-users__select-all-checkbox",label_classes:"cm-setting-users__select-label js-cm-setting-users__select-label"})}):null,(0,s.jsx)(y,u({},o))]})}))},2555:function(ve,$,r){"use strict";r.d($,{t:function(){return u}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.defineProperties,C=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,T=(c,o,l)=>o in c?t(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,E=(c,o)=>{for(var l in o||(o={}))g.call(o,l)&&T(c,l,o[l]);if(y)for(var l of y(o))m.call(o,l)&&T(c,l,o[l]);return c},w=(c,o)=>_(c,C(o));const u=(0,b.I)(c=>(0,s.jsxs)("li",{className:"cm-setting-attachments__item js-cm-setting-attachments__item","data-id":c.id,children:[(0,s.jsx)("div",{className:"cm-setting-attachments__filetype-icon-container",children:(0,s.jsx)("img",{alt:"",className:"ca-setting-attachments__attachment-icon",src:`/api/file-icon/file-${c.ext}.svg`})}),(0,s.jsxs)("div",{className:"ca-setting-attachments__attachment-description js-cm-settings__attachment-description",children:[(0,s.jsx)("span",w(E({title:c.name,className:"js-cm-setting-attachments__title cm-setting-attachments__title"},c.utils.account.hasPermission("edit")?{"data-editable":"true",contentEditable:"true"}:{}),{children:c.name})),(0,s.jsxs)("span",{className:"ca-setting-attachments__file-extension",children:[".",c.ext]})]}),(0,s.jsx)("div",{className:"ca-setting-attachments__attachment-size-container",children:(0,s.jsx)("span",{className:"cm-setting-attachments__size",children:c.filesize_human})}),(0,s.jsxs)("div",{className:"ca-setting-attachments__attachment-actions",children:[(0,s.jsx)("div",{className:"ca-setting-attachments__attachment-action",children:(0,s.jsx)("a",{download:c.name+(c.ext?`.${c.ext}`:""),href:`${c.link}?via-guideline=false`,className:"cm-btn cm-btn--link js-cm-btn-dropdown__toggle js-cm-setting-attachments__toggle js-cm-setting-attachments__download ca-setting-attachments__attachment-action-link","data-id":c.id,"data-attachment-extension":c.ext,children:(0,s.jsx)("i",{className:"ca-icon--download ca-icon--md"})})}),c.utils.account.hasPermission("edit")?(0,s.jsxs)("div",{className:"cm-btn-dropdown ca-setting-attachments__attachment-action",children:[(0,s.jsx)("button",{type:"button",className:"cm-btn cm-btn--link js-cm-btn-dropdown__toggle js-cm-setting-attachments__toggle ca-setting-attachments__attachment-action-link","data-id":c.id,children:(0,s.jsx)("i",{className:"ca-icon--trash ca-icon--md"})}),(0,s.jsx)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--right js-cm-btn-dropdown__menu js-cm-setting-attachments__menu"})]}):null]})]}))},91080:function(ve,$,r){"use strict";r.d($,{R:function(){return c}});var s=r(86070),b=r(75573),t=r(14154),_=Object.defineProperty,C=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=(o,l,p)=>l in o?_(o,l,{enumerable:!0,configurable:!0,writable:!0,value:p}):o[l]=p,w=(o,l)=>{for(var p in l||(l={}))m.call(l,p)&&E(o,p,l[p]);if(g)for(var p of g(l))T.call(l,p)&&E(o,p,l[p]);return o},u=(o,l)=>C(o,y(l));const c=(0,t.I)(o=>{var l;return(0,s.jsx)("form",u(w(w(w(w(w(u(w({className:`js-co-settings__setting cm-setting cm-setting-checkbox ${o.class?`${o.class}`:""}`,"data-id":o.id},o.payload?{"data-payload":o.payload}:{}),{"data-type":"radioandcheckbox"}),o.group?{"data-group":o.group}:{}),o.api?{"data-api":o.api}:{}),o.min?{"data-min":o.min}:{}),o.max?{"data-max":o.max}:{}),o.method?{"data-method":o.method}:{}),{"data-instant":"true","data-save-single":o.save_single,"data-enable-changed-hook":o.enableChangedHook,"data-value-is-number":o.valueIsNumber,children:(0,s.jsxs)("div",{className:"cm-setting__preview",children:[o.label?(0,s.jsx)("div",{className:"cm-setting__label",children:o.label}):null,(0,s.jsx)("div",{className:`cm-setting-checkbox__group${o.modifier?` cm-setting-checkbox__group--${o.modifier}`:""}`,children:(l=o.options)==null?void 0:l.map((p,f)=>(0,s.jsx)("div",{className:`cm-setting-checkbox__option${o.modifier?` cm-setting-checkbox__option--${o.modifier}`:""}`,children:(0,s.jsx)(b.z,{id:p.id||`cb-${o.id}-${p.value}`,name:o.id,modifier:o.checkboxModifier,classes:"js-cm-setting-checkbox__input",label:p.label,checked:p.checked,value:p.value,disabled:p.disabled,disable_label:o.disable_label,indeterminate:p.indeterminate})},f))})]})}))})},15917:function(ve,$,r){"use strict";r.d($,{J:function(){return c}});var s=r(86070),b=r(15575),t=r(14154),_=Object.defineProperty,C=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=(o,l,p)=>l in o?_(o,l,{enumerable:!0,configurable:!0,writable:!0,value:p}):o[l]=p,w=(o,l)=>{for(var p in l||(l={}))m.call(l,p)&&E(o,p,l[p]);if(g)for(var p of g(l))T.call(l,p)&&E(o,p,l[p]);return o},u=(o,l)=>C(o,y(l));const c=(0,t.I)(o=>(0,s.jsx)("div",u(w(w(w({className:` js-co-settings__setting cm-setting cm-setting-chooser ${o.modifier?` cm-setting-chooser--${o.modifier} `:""}`,"data-id":o.id,"data-type":"chooser","data-instant":"true"},o.readonly?{"data-readonly":o.readonly}:{}),o.api?{"data-api":o.api}:{}),o.group?{"data-group":o.group}:{}),{children:(0,s.jsx)(b.C,w({},o))})))},14587:function(ve,$,r){"use strict";r.d($,{X:function(){return o}});var s=r(86070),b=r(49198),t=r.n(b),_=r(14154),C=Object.defineProperty,y=Object.defineProperties,g=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,w=(l,p,f)=>p in l?C(l,p,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[p]=f,u=(l,p)=>{for(var f in p||(p={}))T.call(p,f)&&w(l,f,p[f]);if(m)for(var f of m(p))E.call(p,f)&&w(l,f,p[f]);return l},c=(l,p)=>y(l,g(p));const o=(0,_.I)(l=>(0,s.jsxs)("form",c(u(u(u(u(c(u(c(u({className:`js-co-settings__setting cm-setting cm-setting-color ${l.modifier?` cm-setting-color--${l.modifier}`:""}`},l.readonly?{"data-readonly":l.readonly}:{}),{"data-id":l.id}),l.api?{"data-api":l.api}:{}),{"data-color":`${l.value?`${l.value}`:"transparent"}`,"data-type":"color"}),l.set?{"data-set":l.set.join(",")}:{}),l.group?{"data-group":l.group}:{}),l.method?{"data-method":l.method}:{}),l.closeOnClickOutsidePicker?{"data-close-on-click-outside":"true"}:{}),{children:[(0,s.jsx)("div",{className:"cm-setting__preview",children:l.preview==="full"?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"cm-setting-color__preview--full",children:(0,s.jsx)("span",{className:"cm-setting-color__preview-inner-full js-cm-setting-color__preview",style:{backgroundColor:`${l.value?`${l.value}`:"transparent"}`},tabIndex:l.tabbable?0:-1})}),(0,s.jsx)("span",{className:"cm-setting-color__value cm-setting-color__value--full js-cm-setting-color__value",children:l.value?t()(l.value).toHexString():window.translate("Legacy_settings_color_picker_transparent")})]}):typeof l.preview_template=="function"?(0,s.jsx)(l.preview_template,u({},l)):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"cm-setting__value--inline",children:[(0,s.jsx)("span",{className:"cm-setting-color__value js-cm-setting-color__value",children:l.value?t()(l.value).toHexString():window.translate("Legacy_settings_color_picker_transparent")}),(0,s.jsx)("span",{className:"cm-setting-color__preview",children:(0,s.jsx)("span",{className:"cm-setting-color__preview-inner js-cm-setting-color__preview",style:{backgroundColor:`${l.value?`${l.value}`:"transparent"}`},tabIndex:l.tabbable?0:-1})})]}),(0,s.jsx)("label",{htmlFor:l.id,className:"cm-setting__label--inline js-cm-setting__label",children:l.label})]})}),(0,s.jsxs)("div",{className:`cm-setting__details js-cm-setting__details ${l.mode?`cm-setting-color__chooser--${l.mode}`:""} js-cm-setting-color__chooser lazyload`,children:[l.preview==="full"?(0,s.jsx)("label",{htmlFor:"color",className:"cm-setting__label--inline",children:window.translate("Legacy_settings_color_picker_color")}):null,l.picker?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"js-cm-setting-color__picker"}),(0,s.jsxs)("div",{className:"cm-setting-color__colors",children:[(0,s.jsxs)("div",{className:"cm-setting-color__color",children:[(0,s.jsx)("label",{className:"cm-setting-color__label",htmlFor:l.id,children:window.translate("Legacy_settings_color_picker_hex")}),(0,s.jsx)("input",{id:l.id,name:l.id,className:"cm-setting-color__input js-cm-setting-color__hex",value:`${l.value?`${t()(l.value).toHexString()}`:""}`,type:"text","aria-label":window.translate("Legacy_settings_color_picker_hex")})]}),(0,s.jsxs)("div",{className:"cm-setting-color__color",children:[(0,s.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__r",children:window.translate("Legacy_settings_color_picker_r")}),(0,s.jsx)("input",{id:"cm-setting-color__r",className:"cm-setting-color__input js-cm-setting-color__r",value:`${l.r?`${l.r}`:""}`,type:"text","aria-label":window.translate("Legacy_settings_color_picker_r")})]}),(0,s.jsxs)("div",{className:"cm-setting-color__color",children:[(0,s.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__g",children:window.translate("Legacy_settings_color_picker_g")}),(0,s.jsx)("input",{id:"cm-setting-color__g",className:"cm-setting-color__input js-cm-setting-color__g",value:`${l.g?`${l.g}`:""}`,type:"text","aria-label":window.translate("Legacy_settings_color_picker_g")})]}),(0,s.jsxs)("div",{className:"cm-setting-color__color",children:[(0,s.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__b",children:window.translate("Legacy_settings_color_picker_b")}),(0,s.jsx)("input",{id:"cm-setting-color__b",className:"cm-setting-color__input js-cm-setting-color__b",value:`${l.b?`${l.b}`:""}`,type:"text","aria-label":window.translate("Legacy_settings_color_picker_b")})]}),(0,s.jsxs)("div",{className:"cm-setting-color__color",children:[(0,s.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__a",children:window.translate("Legacy_settings_color_picker_alpha")}),(0,s.jsx)("input",{id:"cm-setting-color__a",className:"cm-setting-color__input js-cm-setting-color__a",value:`${l.a?`${l.a}`:"1"}`,type:"text","aria-label":window.translate("Legacy_settings_color_picker_alpha")})]})]})]}):null,l.palette?(0,s.jsx)("div",{className:"cm-setting-color__palette js-cm-setting-color__palette","data-palette":l.palette}):null]})]})))},43456:function(ve,$,r){"use strict";r.d($,{W:function(){return u}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.defineProperties,C=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,T=(c,o,l)=>o in c?t(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,E=(c,o)=>{for(var l in o||(o={}))g.call(o,l)&&T(c,l,o[l]);if(y)for(var l of y(o))m.call(o,l)&&T(c,l,o[l]);return c},w=(c,o)=>_(c,C(o));const u=(0,b.I)(c=>(0,s.jsx)("form",w(E(E(E(E(E(E(E(E({className:`js-co-settings__setting cm-setting ${c.classes||""}`,"data-id":c.id,"data-type":"date"},c.group?{"data-group":c.group}:{}),c.method?{"data-method":c.method}:{}),c.api?{"data-api":c.api}:{}),c.multiple_values?{"data-multiple-values":c.multiple_values}:{}),c.no_min_date?{"data-no-min-date":c.no_min_date}:{}),c.allow_empty?{"data-allow-empty":c.allow_empty}:{}),c.format?{"data-format":c.format}:{}),c.format_value?{"data-format-value":c.format_value}:{}),{children:(0,s.jsxs)("div",{className:"cm-setting__preview cm-setting__bar js-cm-setting__bar",children:[c.label?(0,s.jsx)("label",{htmlFor:c.id,className:"cm-setting__label",children:c.label}):null,(0,s.jsxs)("div",{className:"cm-setting__group",children:[(0,s.jsx)("span",{className:"cm-setting__group-prefix js-cm-setting__group-prefix",children:(0,s.jsx)("i",{className:"ca-icon--calendar"})}),(0,s.jsx)("div",{className:"cm-setting__group-wrap",children:(0,s.jsx)("input",E(E(E(E(E(E({spellCheck:"false",autoComplete:"off",className:"cm-setting__input js-cm-setting__input",value:c.value||"",id:c.id,type:"text",name:c.id},c.mask?{"data-mask":c.mask}:{}),c.placeholder?{placeholder:c.placeholder}:{}),c.required?{required:!0}:{}),c.disabled?{disabled:!0}:{}),c.readonly?{readOnly:!0}:{}),c.msg?{"data-msg":c.msg}:{}))})]})]})})))},27833:function(ve,$,r){"use strict";r.d($,{H:function(){return o}});var s=r(86070),b=r(46223),t=r(45924),_=r(14154),C=Object.defineProperty,y=Object.defineProperties,g=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,w=(l,p,f)=>p in l?C(l,p,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[p]=f,u=(l,p)=>{for(var f in p||(p={}))T.call(p,f)&&w(l,f,p[f]);if(m)for(var f of m(p))E.call(p,f)&&w(l,f,p[f]);return l},c=(l,p)=>y(l,g(p));const o=(0,_.I)(l=>{var p,f;return(0,s.jsx)("div",c(u(c(u(u({className:`cm-setting cm-setting-delete js-co-settings__setting ${l.type?`cm-setting-delete--${l.type}`:""} ${l.noborder?" cm-setting-delete--no-border ":""}`,"data-id":l.id},l.api?{"data-api":l.api}:{}),l.data?{"data-data":JSON.stringify(l.data)}:{}),{"data-instant":"true"}),l.method?{"data-method":l.method}:{}),{"data-type":"delete",children:l.type==="menu"?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"cm-btn-dropdown__item",children:(0,s.jsxs)("button",{className:(0,b.h)([t.Lb,"cm-btn-dropdown__link js-cm-setting-delete__btn"]),"data-test-id":"actions-delete",children:[(0,s.jsx)("i",{className:`ca-icon--${(p=l.label_icon)!=null?p:"trash"} cm-btn-dropdown__icon`}),(0,s.jsx)("span",{className:"cm-btn-dropdown__label",children:l.label})]})}),(0,s.jsxs)("div",{className:"cm-setting-delete__confirmation js-cm-setting-delete__confirmation","data-test-id":"delete-confirmation-dialog",children:[l.description?(0,s.jsx)("p",{className:"cm-setting-delete__desc",children:l.description}):null,(0,s.jsxs)("div",{className:"cm-setting-delete__actions cm-btn-bar cm-btn-bar--inline",children:[(0,s.jsx)("button",{type:"button",className:(0,b.h)([t.OA,"cm-btn cm-btn--sm cm-btn--danger js-cm-setting-delete__delete"]),"data-test-id":"actions-delete-confirm",children:l.delete_button_label?l.delete_button_label:window.translate("Legacy_btn_delete")}),(0,s.jsx)("button",{type:"button",className:(0,b.h)([t.OA,"cm-btn cm-btn--sm cm-btn--default js-cm-setting-delete__cancel"]),children:window.translate("Legacy_btn_cancel")})]})]}),(0,s.jsxs)("div",{className:"cm-setting-delete__error js-cm-setting-delete__error",children:[(0,s.jsx)("p",{className:"cm-setting-delete__desc cm-setting-delete__desc--error js-cm-setting-delete__error",children:l.error?l.error:null}),(0,s.jsx)("a",{className:"cm-btn cm-btn--sm cm-btn--danger cm-setting-delete-link js-cm-setting-delete-link",href:l.error_link?l.error_link.url:"",target:"_blank",children:l.error_link?l.error_link.text:""})]})]}):(0,s.jsxs)("div",{className:"cm-setting__preview",children:[(0,s.jsx)("button",{className:"cm-btn cm-btn--sm cm-setting-delete__btn js-cm-setting-delete__btn",children:l.label}),(0,s.jsxs)("div",{className:"cm-setting-delete__confirmation js-cm-setting-delete__confirmation","data-test-id":"delete-confirmation-dialog",children:[l.description?(0,s.jsx)("p",{className:"cm-setting-delete__desc",children:l.description}):null,(0,s.jsxs)("div",{className:"cm-setting-delete__actions cm-btn-bar cm-btn-bar--inline",children:[(0,s.jsx)("button",{type:"button",className:(0,b.h)([t.OA,"cm-btn cm-btn--sm",`cm-btn--${(f=l.btn_delete_class)!=null?f:"danger"}`,"js-cm-setting-delete__delete"]),"data-test-id":"actions-delete-confirm",children:l.btn_delete_label?l.btn_delete_label:window.translate("Legacy_btn_delete")}),(0,s.jsx)("button",{type:"button",className:(0,b.h)([t.OA,"cm-btn cm-btn--sm cm-btn--default js-cm-setting-delete__cancel"]),children:window.translate("Legacy_btn_cancel")})]})]}),(0,s.jsx)("div",{className:"cm-setting-delete__error js-cm-setting-delete__error",children:(0,s.jsx)("p",{className:"cm-setting-delete__desc cm-setting-delete__desc--error js-cm-setting-delete__error",children:l.error?l.error:null})})]})}))})},52939:function(ve,$,r){"use strict";r.d($,{x:function(){return c}});var s=r(86070),b=r(90166),t=r(14154),_=Object.defineProperty,C=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=(o,l,p)=>l in o?_(o,l,{enumerable:!0,configurable:!0,writable:!0,value:p}):o[l]=p,w=(o,l)=>{for(var p in l||(l={}))m.call(l,p)&&E(o,p,l[p]);if(g)for(var p of g(l))T.call(l,p)&&E(o,p,l[p]);return o},u=(o,l)=>C(o,y(l));const c=(0,t.I)(o=>(0,s.jsx)("form",u(w(w(w(w(w(w(w({className:`js-co-settings__setting cm-setting cm-setting-dropdown ${o.formModifier||""} ${o.classes||""}`,"data-id":o.id,"data-type":"dropdown"},o.api?{"data-api":o.api}:{}),o.method?{"data-method":o.method}:{}),o.group?{"data-group":o.group}:{}),o.multiple_values?{"data-multiple-values":o.multiple_values}:{}),o.non_selection?{"data-non-selection":o.non_selection}:{}),o.float?{"data-float":"1"}:{}),o.readonly?{"data-readonly":"true"}:{}),{children:(0,s.jsxs)("div",{className:"cm-setting__preview cm-setting__preview--action cm-setting__bar js-cm-setting__bar",children:[(0,s.jsx)("label",{htmlFor:o.id,className:"cm-setting__label",children:o.label}),(0,s.jsx)("select",u(w({tabIndex:-1},o.readonly?{readOnly:!0}:{}),{id:o.id,name:o.id,"data-template":o.template?o.template:"c-dropdown",children:(0,s.jsx)(b.g,w({},o))}))]})})))},79485:function(ve,$,r){"use strict";r.d($,{l:function(){return c}});var s=r(86070),b=r(64584),t=r(14154),_=Object.defineProperty,C=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=(o,l,p)=>l in o?_(o,l,{enumerable:!0,configurable:!0,writable:!0,value:p}):o[l]=p,w=(o,l)=>{for(var p in l||(l={}))m.call(l,p)&&E(o,p,l[p]);if(g)for(var p of g(l))T.call(l,p)&&E(o,p,l[p]);return o},u=(o,l)=>C(o,y(l));const c=(0,t.I)(o=>(0,s.jsx)("form",u(w(w(u(w({className:"js-co-settings__setting"},o.readonly?{"data-readonly":o.readonly}:{}),{"data-id":o.id,"data-type":"frame"}),o.api?{"data-api":o.api}:{}),o.group?u(w({},o.method?{"data-method":o.method}:{}),{"data-group":o.group}):{}),{"data-instant":"true",children:(0,s.jsx)(b.H,w({},o))})))},60435:function(ve,$,r){"use strict";r.d($,{W:function(){return t}});var s=r(86070),b=r(14154);const t=(0,b.I)(_=>(0,s.jsxs)(s.Fragment,{children:["Size ",parseInt(_.value.width),"x",parseInt(_.value.height)," | X: ",parseInt(_.value.x)," Y:"," ",parseInt(_.value.y)]}))},49204:function(ve,$,r){"use strict";r.d($,{n:function(){return y}});var s=r(86070),b=r(49290),t=r(2728),_=r(70402),C=r(14154);const y=(0,C.I)(g=>(0,s.jsxs)("div",{className:"cm-setting__details js-cm-setting__details",children:[(0,s.jsx)("div",{className:"js-cm-setting-image__cropper"}),g.ratiochooser?(0,s.jsx)("div",{className:"js-cm-setting-image__settings cm-setting-image__settings",children:(0,s.jsx)(_.w,{id:"ratio",value:g.ratio,size:"xs"})}):null,(0,s.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer cm-setting__actions cm-setting__actions--flyout js-cm-setting__actions",children:[(0,s.jsx)(b.t,{}),(0,s.jsx)(t.b,{}),g.disable_actions?null:(0,s.jsxs)("div",{className:"cm-btn-dropdown cm-btn--right",children:[(0,s.jsx)("button",{type:"button",className:"cm-btn cm-btn--default js-cm-btn-dropdown__toggle",children:(0,s.jsx)("i",{className:"icon-ellipsis-h"})}),(0,s.jsxs)("ul",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--right js-cm-btn-dropdown__menu",children:[(0,s.jsx)("li",{className:"cm-btn-dropdown__item",children:(0,s.jsx)("a",{className:"cm-btn-dropdown__link js-cm-setting-image__replace",href:"javascript:",children:"Replace"})}),(0,s.jsx)("li",{className:"cm-btn-dropdown__item cm-btn-dropdown__item--danger",children:(0,s.jsx)("a",{className:"cm-btn-dropdown__link js-cm-setting-image__delete",href:"javascript:",children:"Delete"})})]})]})]})]}))},82953:function(ve,$,r){"use strict";r.d($,{l:function(){return c}});var s=r(86070),b=r(49204),t=r(14154),_=Object.defineProperty,C=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=(o,l,p)=>l in o?_(o,l,{enumerable:!0,configurable:!0,writable:!0,value:p}):o[l]=p,w=(o,l)=>{for(var p in l||(l={}))m.call(l,p)&&E(o,p,l[p]);if(g)for(var p of g(l))T.call(l,p)&&E(o,p,l[p]);return o},u=(o,l)=>C(o,y(l));const c=(0,t.I)(o=>(0,s.jsxs)("form",u(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w({className:`js-co-settings__setting cm-setting cm-setting-image ${o.classes||""}`,"data-id":o.id,"data-type":"image","data-placeholder":o.placeholder||"/img/empty@2x.png","data-circle":`${o.circle?"true":"false"}`},o.disableCropping?{"data-disable-cropping":"true"}:{}),o.image_property?{"data-image-property":o.image_property}:{}),o.file_id?{"data-file-id":o.file_id}:{}),o.api?{"data-api":o.api}:{}),o.area?{"data-area-width":o.area.width,"data-area-height":o.area.height,"data-area-x":o.area.x,"data-area-y":o.area.y}:{}),o.acceptOnlyImages?{"data-accept-only-images":o.acceptOnlyImages}:{}),o.maxSize?{"data-max-size":o.maxSize}:{}),o.ratio?{"data-ratio":o.ratio}:{}),o.group?{"data-group":o.group}:{}),o.filetype?{"data-filetype":o.filetype}:{}),o.brand?{"data-brand":o.brand}:{}),o.project?{"data-project":o.project}:{}),o.accept?{"data-accept":o.accept}:{}),o.screen_id?{"data-screen-id":o.screen_id}:{}),o.dashboard?{"data-dashboard":o.dashboard}:{}),o.method?{"data-method":o.method}:{}),{children:[(0,s.jsxs)("div",{className:"cm-setting__preview",children:[(0,s.jsx)("div",{className:"cm-setting-image__image-wrap js-cm-setting-image__image-wrap",children:(0,s.jsx)("img",w(u(w({className:`cm-setting-image__image js-cm-setting-image__image${o.original?" state-available":""}`},o.original?{"data-original":o.original}:{}),{src:o.image||o.placeholder||"/img/empty@2x.png",tabIndex:o.tabbable?0:-1}),o.color?{style:{backgroundColor:`${o.color}`}}:{}))}),(0,s.jsxs)("div",{className:"cm-setting__label-wrap js-cm-setting__label",children:[(0,s.jsx)("h4",{className:"cm-setting__title",children:o.label}),o.description?(0,s.jsx)("p",{className:"cm-setting__desc",children:o.description}):null]}),(0,s.jsx)("input",{tabIndex:-1,type:"file",className:"cm-setting-image__input js-cm-setting-image__input",id:`image-${o.id}`,name:"files[]"})]}),(0,s.jsx)(b.n,w({},o))]})))},61872:function(ve,$,r){"use strict";r.d($,{w:function(){return l}});var s=r(86070),b=r(93791),t=r(78149),_=r(14154),C=r(9862),y=Object.defineProperty,g=Object.defineProperties,m=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,u=(p,f,O)=>f in p?y(p,f,{enumerable:!0,configurable:!0,writable:!0,value:O}):p[f]=O,c=(p,f)=>{for(var O in f||(f={}))E.call(f,O)&&u(p,O,f[O]);if(T)for(var O of T(f))w.call(f,O)&&u(p,O,f[O]);return p},o=(p,f)=>g(p,m(f));const l=(0,_.I)(p=>(0,s.jsxs)("form",o(c(c(c(c(c(c({className:`js-co-settings__setting cm-setting-link ${p.modifier?` cm-setting-link--${p.modifier}`:""}`,"data-id":p.id,"data-instant":"true","data-type":"link"},p.api?{"data-api":p.api}:{}),p.group?{"data-group":p.group}:{}),p.method?{"data-method":p.method}:{}),p.readonly?{"data-readonly":p.readonly}:{}),p.autofocus?{"data-autofocus":p.autofocus}:{}),p.value?{"data-tooltip-link-label":p.value.tooltipLinkLabel}:{}),{noValidate:!0,children:[(0,s.jsx)("div",{className:"cm-setting",children:(0,s.jsxs)("div",{className:"cm-setting__preview cm-setting__bar js-cm-setting__bar",children:[(0,s.jsx)("label",{htmlFor:p.id,className:"cm-setting__label",children:p.label}),(0,s.jsx)("input",c(c(c(o(c({spellCheck:"false",tabIndex:-1,autoComplete:"off",className:"cm-setting__input js-cm-setting__input"},p.placeholder?{placeholder:p.placeholder}:{}),{id:p.id,name:p.id}),p.required?{required:!0}:{}),p.value&&p.value.url!="javascript:;"?{value:p.value.url||""}:{}),p.msg?{"data-msg":p.msg}:{}))]})}),(0,s.jsx)("div",{className:"cm-setting cm-setting__link-addons",children:(0,s.jsxs)("div",{className:"cm-setting__link-addons-item js-cm-setting__link-addons-item-linkchooser",children:[(0,s.jsx)(t.V,{icon:b.l.ICON_GUIDELINES,classes:"cm-setting__link-addons-item-icon",size:b.l.SIZE_MEDIUM}),(0,s.jsx)("span",{className:"cm-setting__link-addons-item-text",children:"Internal link (within this guideline)"}),(0,s.jsx)(t.V,{icon:b.l.ICON_CARET_RIGHT,classes:"cm-setting__link-addons-item-iconarrow",size:b.l.SIZE_MEDIUM})]})}),(0,C.R)("LINK_TEMPLATE_CHOOSER")?(0,s.jsx)("div",{className:"cm-setting cm-setting__link-addons",children:(0,s.jsxs)("div",{className:"cm-setting__link-addons-item js-cm-setting__link-addons-item-templatechooser",children:[(0,s.jsx)(t.V,{icon:b.l.ICON_TEMPLATES,classes:"cm-setting__link-addons-item-icon",size:b.l.SIZE_MEDIUM}),(0,s.jsx)("span",{className:"cm-setting__link-addons-item-text",children:"Create a publication from template"}),(0,s.jsx)(t.V,{icon:b.l.ICON_CARET_RIGHT,classes:"cm-setting__link-addons-item-iconarrow",size:b.l.SIZE_MEDIUM})]})}):null]})))},63817:function(ve,$,r){"use strict";r.d($,{_:function(){return t}});var s=r(86070),b=r(14154);const t=(0,b.I)(_=>(0,s.jsxs)(s.Fragment,{children:["Size ",_.value.width," x ",_.value.height," | X: ",_.value.x," Y: ",_.value.y]}))},86115:function(ve,$,r){"use strict";r.d($,{$:function(){return c}});var s=r(86070),b=r(2910),t=r(14154),_=Object.defineProperty,C=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=(o,l,p)=>l in o?_(o,l,{enumerable:!0,configurable:!0,writable:!0,value:p}):o[l]=p,w=(o,l)=>{for(var p in l||(l={}))m.call(l,p)&&E(o,p,l[p]);if(g)for(var p of g(l))T.call(l,p)&&E(o,p,l[p]);return o},u=(o,l)=>C(o,y(l));const c=(0,t.I)(o=>(0,s.jsx)("form",u(w(w(w({"data-type":"richtext",className:"co-settings__richtext cm-setting js-co-settings__setting","data-id":o.id,"data-value":o.value,"data-toolbar":JSON.stringify(o.toolbar||{}),"data-set":o.set||"","data-instant":o.instant||!0,"data-style":o.style||"inline"},o.placeholder?{"data-placeholder":o.placeholder}:{}),o.api?{"data-api":o.api}:{}),o.method?{"data-method":o.method}:{}),{children:(0,s.jsx)(b.p,w({},o))})))},92960:function(ve,$,r){"use strict";r.d($,{_:function(){return o}});var s=r(86070),b=r(93277),t=r(47929),_=r(14154),C=Object.defineProperty,y=Object.defineProperties,g=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,w=(l,p,f)=>p in l?C(l,p,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[p]=f,u=(l,p)=>{for(var f in p||(p={}))T.call(p,f)&&w(l,f,p[f]);if(m)for(var f of m(p))E.call(p,f)&&w(l,f,p[f]);return l},c=(l,p)=>y(l,g(p));const o=(0,_.I)(l=>{var p;let f;return l.create?f=[{identifier:"cancel",label:window.translate("Legacy_btn_cancel"),style:b.Q.STYLE_SECONDARY},{identifier:"create",label:window.translate("Legacy_workspace_layer_prototyping_interaction_create_template"),style:b.Q.STYLE_PRIMARY}]:f=[{identifier:"cancel",label:window.translate("Legacy_btn_cancel"),style:b.Q.STYLE_SECONDARY}],(0,s.jsxs)("form",c(u(u(u(c(u(u({className:"js-co-settings__setting cm-setting"},l.readonly?{"data-readonly":l.readonly}:{}),l.api?{"data-api":l.api}:{}),{"data-id":l.id,"data-template-preview":l.templates.preview,"data-type":"search"}),l.method?{"data-method":l.method}:{}),l.clear_search?{"data-clear-search":l.clear_search}:{}),l.templates&&l.templates.item?{"data-template-item":l.templates.item}:{}),{"data-api-search":l.apiSearch,children:[(0,s.jsxs)("div",{className:"cm-setting__preview cm-setting-search__preview js-cm-setting-search__preview",children:[(0,s.jsx)("label",{htmlFor:l.id,className:"cm-setting__label",children:l.label}),(0,s.jsx)("div",{className:"js-cm-setting-search__preview-content cm-setting-search__preview-content",children:typeof l.templates.previewReact=="function"?(0,s.jsx)(l.templates.previewReact,u({},l.previewData)):null}),(0,s.jsx)("input",u(c(u({className:"js-cm-setting-search__value cm-setting-search__value",name:l.id,type:"text"},l.required?{required:!0}:{}),{value:""}),l.msg?{"data-msg":l.msg}:{}))]}),(0,s.jsx)("div",{className:"cm-setting__details js-cm-setting__details",children:(0,s.jsxs)("div",{className:"js-cm-setting-search__chooser",children:[(0,s.jsxs)("div",{className:"cm-setting__bar js-cm-setting__bar",children:[(0,s.jsx)("label",{htmlFor:l.id,className:"cm-setting__label",children:l.searchlabel?l.searchlabel:"Search"}),(0,s.jsx)("input",c(u({autoComplete:"off",className:"cm-setting__input js-cm-setting-search__input"},l.placeholder?{placeholder:l.placeholder}:{}),{id:`search-${l.id}-search`}))]}),(0,s.jsx)("div",{className:"cm-setting-search__items js-cm-setting-search__items",id:`search-${l.id}-content`,children:l.data?l.templates&&l.templates.content?typeof l.templates.contentReact=="function"?(0,s.jsx)(l.templates.contentReact,u({},l)):null:l.templates&&l.templates.item?(p=l.data)==null?void 0:p.map((O,L)=>typeof l.templates.itemReact=="function"?(0,s.jsx)(l.templates.itemReact,u({},O),L):null):null:null}),(0,s.jsx)("div",c(u({className:"cm-btn-bar cm-btn-bar--footer cm-setting__actions cm-setting__actions--flyout js-cm-setting__actions"},l.create?{"data-template":l.templates.create}:{}),{children:(0,s.jsx)(t.I,{buttons:f,size:b.Q.SIZE_LARGE,background:b.Q.BACKGROUND_BLACK_05})}))]})})]}))})},30653:function(ve,$,r){"use strict";r.d($,{_:function(){return c}});var s=r(86070),b=r(95376),t=r(14154),_=Object.defineProperty,C=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=(o,l,p)=>l in o?_(o,l,{enumerable:!0,configurable:!0,writable:!0,value:p}):o[l]=p,w=(o,l)=>{for(var p in l||(l={}))m.call(l,p)&&E(o,p,l[p]);if(g)for(var p of g(l))T.call(l,p)&&E(o,p,l[p]);return o},u=(o,l)=>C(o,y(l));const c=(0,t.I)(o=>{var l;return(0,s.jsx)("form",u(w(w(w(w(w(w(w({className:`js-co-settings__setting cm-setting${o.modifier?` cm-setting-text--${o.modifier}`:""}`,"data-id":o.id,"data-type":"snippet-value"},o.api?{"data-api":o.api}:{}),o.group?{"data-group":o.group}:{}),o.method?{"data-method":o.method}:{}),o.readonly?{"data-readonly":o.readonly}:{}),o.autosave?{"data-autosave":o.autosave}:{}),o.instant?{"data-instant":o.instant}:{}),o.mode?{"data-mode":o.mode}:{}),{noValidate:!0,children:(0,s.jsxs)("div",{className:"cm-setting__preview cm-setting__preview--action cm-setting__bar cm-setting-snippet-value__bar js-cm-setting__bar",children:[(0,s.jsxs)("label",{htmlFor:o.id,className:`cm-setting__label ${o.label_classes?`${o.label_classes}`:""}`,children:[o.label,o.languages?(0,s.jsxs)("span",{className:"ca-badge-group cm-setting-snippet-value__ca-language-badge-group",children:[o.languages.length>1?(0,s.jsx)("span",{"data-language-code":o.main_language,className:` js-cm-setting-snippet-value__ca-language-badge cm-setting-snippet-value__ca-language-badge ca-badge--large ca-badge ca-badge--uppercase ${o.current_language==o.main_language?"ca-badge--dark":"ca-badge--grey"} ca-badge--group-item`,children:o.main_language}):null,(l=o.languages)==null?void 0:l.map((p,f)=>p.default!==!0&&o.main_language!==p.language?(0,s.jsx)("span",{"data-language-code":p.language,className:` js-cm-setting-snippet-value__ca-language-badge cm-setting-snippet-value__ca-language-badge ca-badge--large ca-badge ca-badge--uppercase ${p.current===!0?"ca-badge--dark":"ca-badge--grey"} ca-badge--group-item`,children:p.language},f):null)]}):null]}),o.mode==="SOURCE"?(0,s.jsx)("textarea",{className:`cm-setting__input js-cm-setting__input ${o.editor_classes?` ${o.editor_classes}`:""}`,children:o.value?(0,b.Ay)(o.value):null}):(0,s.jsx)("div",u(w(w({className:`cm-setting-snippet-value__quill js-cm-setting__input ${o.editor_classes?` ${o.editor_classes}`:""}`},o.placeholder?{"data-placeholder":o.placeholder}:{}),o.msg?{"data-msg":o.msg}:{}),{children:o.value?(0,b.Ay)(o.value):null}))]})}))})},23189:function(ve,$,r){"use strict";r.d($,{t:function(){return u}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.defineProperties,C=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,T=(c,o,l)=>o in c?t(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,E=(c,o)=>{for(var l in o||(o={}))g.call(o,l)&&T(c,l,o[l]);if(y)for(var l of y(o))m.call(o,l)&&T(c,l,o[l]);return c},w=(c,o)=>_(c,C(o));const u=(0,b.I)(c=>(0,s.jsx)("form",w(E(E(E(E(E({className:`js-co-settings__setting cm-setting ${c.formModifier?` ${c.formModifier}`:""} ${c.formClasses||""} ${c.border===!1?"cm-setting--borderless":""} ${c.disabled?"cm-setting-text--disabled":""}`,"data-id":c.id,"data-type":"text"},c.multiple_values?{"data-multiple-values":c.multiple_values}:{}),c.api?{"data-api":c.api}:{}),c.group?{"data-group":c.group}:{}),c.method?{"data-method":c.method}:{}),c.nolive?{"data-nolive":c.nolive}:{}),{noValidate:!0,children:(0,s.jsxs)("div",{className:"cm-setting__preview cm-setting__preview--action cm-setting__bar js-cm-setting__bar",children:[(0,s.jsx)("label",{htmlFor:c.id,className:"cm-setting__label",children:c.label}),(0,s.jsxs)("div",{className:"cm-setting__group",children:[(0,s.jsx)("span",{className:"cm-setting__group-prefix js-cm-setting__group-prefix",children:c.prefix?c.prefix:null}),(0,s.jsx)("div",{className:"cm-setting__group-wrap",children:(0,s.jsx)("input",E(E(E(E(E(E(E(E(w(E({id:c.id,name:c.id,spellCheck:"false",tabIndex:c.tabbable?0:-1,autoComplete:"off",className:`cm-setting__input js-cm-setting__input${c.classes?` ${c.classes}`:""}`},c.placeholder?{placeholder:c.placeholder}:{}),{value:`${c.type==="number"&&c.allow_empty_number!=!0||c.type==="unit"?`${c.value||0}`:`${c.value||""}`}`}),c.type?{type:c.type}:{}),c.mask?{"data-mask":c.mask}:{}),c.required?{required:!0}:{}),c.maxlength?{maxLength:c.maxlength}:{}),c.disabled?{disabled:!0}:{}),c.readonly?{readOnly:!0}:{}),c.autofocus?{autoFocus:!0}:{}),c.msg?{"data-msg":c.msg}:{}))}),c.suffix?(0,s.jsx)("span",{className:"cm-setting__group-suffix",children:c.suffix}):null]})]})})))},78006:function(ve,$,r){"use strict";r.d($,{S:function(){return u}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.defineProperties,C=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,T=(c,o,l)=>o in c?t(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,E=(c,o)=>{for(var l in o||(o={}))g.call(o,l)&&T(c,l,o[l]);if(y)for(var l of y(o))m.call(o,l)&&T(c,l,o[l]);return c},w=(c,o)=>_(c,C(o));const u=(0,b.I)(c=>(0,s.jsx)("form",w(E(E(E(E({className:`js-co-settings__setting cm-setting${c.modifier?` cm-setting-text--${c.modifier}`:""}`,"data-id":c.id,"data-type":"text"},c.api?{"data-api":c.api}:{}),c.group?{"data-group":c.group}:{}),c.method?{"data-method":c.method}:{}),c.multiple_values?{"data-multiple-values":c.multiple_values}:{}),{noValidate:!0,children:(0,s.jsxs)("div",{className:"cm-setting__preview cm-setting__preview--action cm-setting__bar js-cm-setting__bar",children:[(0,s.jsx)("label",{htmlFor:c.id,className:"cm-setting__label",children:c.label}),(0,s.jsxs)("div",{className:"tw-relative",style:E({},c.maxHeight?{maxHeight:`${c.maxHeight}`}:{}),children:[(0,s.jsx)("textarea",w(E(E(E(E(E(E(E({id:c.id,name:c.id,spellCheck:"false",tabIndex:c.tabbable?0:-1,autoComplete:"off",className:`tw-break-words tw-box-border tw-w-full !tw-leading-4 tw-text-sm tw-overflow-hidden ${c.maxHeight?"tw-overflow-auto ":""}tw-absolute tw-h-full js-cm-setting__input cm-setting__input lazyload`},c.placeholder?{placeholder:c.placeholder}:{}),c.maxlength?{maxLength:c.maxlength}:{}),c.rows?{rows:c.rows}:{}),c.required?{required:!0}:{}),c.disabled?{disabled:!0}:{}),c.readonly?{readOnly:!0}:{}),c.msg?{"data-msg":c.msg}:{}),{children:c.value?c.value:null})),(0,s.jsx)("div",{className:"tw-break-words tw-box-border tw-w-full !tw-leading-4 tw-text-sm tw-invisible tw-pt-1 tw-pb-2 tw-min-h-[48px] js-cm-setting__textarea--grow"})]})]})})))},71460:function(ve,$,r){"use strict";r.d($,{I:function(){return p}});var s=r(86070),b=r(46223),t=r(45924),_=r(95376),C=r(75573),y=r(14154),g=Object.defineProperty,m=Object.defineProperties,T=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,c=(f,O,L)=>O in f?g(f,O,{enumerable:!0,configurable:!0,writable:!0,value:L}):f[O]=L,o=(f,O)=>{for(var L in O||(O={}))w.call(O,L)&&c(f,L,O[L]);if(E)for(var L of E(O))u.call(O,L)&&c(f,L,O[L]);return f},l=(f,O)=>m(f,T(O));const p=(0,y.I)(f=>{var O;return(0,s.jsx)("form",l(o(o(o(o(o(o(o({className:`js-co-settings__setting cm-setting ${f.sm?" cm-setting--sm ":""} ${f.modifier?` cm-setting-toggle--${f.modifier} `:""} ${f.classes||""}`,"data-id":f.id,"data-type":"toggle","data-instant":"true"},f.api?{"data-api":f.api}:{}),f.multiple_values?{"data-multiple-values":f.multiple_values}:{}),f.method?{"data-method":f.method}:{}),f.group?{"data-group":f.group}:{}),f.toggleKey?{"data-key":f.toggleKey}:{}),f.mapping?{"data-mapping-false":f.mapping[0]}:{}),f.mapping?{"data-mapping-true":f.mapping[1]}:{}),{children:(0,s.jsx)("div",{className:"cm-setting__preview",children:f.type==="checkbox"?(0,s.jsx)(C.z,{id:f.id,name:f.id,checked:f.checked,disabled:f.disabled,readonly:f.readonly,modifier:f.modifier,indeterminate:f.indeterminate||!1,classes:"cm-btn-toggle__input js-cm-setting-toggle",label:f.label,"aria-label":f.ariaLabel||f.label,value:f.value,disable_label:f.disable_label,data:f.data}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("label",{className:(0,b.h)(["cm-btn-toggle cm-setting__value--inline",t.Lb]),children:[(0,s.jsx)("input",o(o(o({id:f.id,name:f.id,className:"cm-btn-toggle__input js-cm-setting-toggle",type:"checkbox","aria-label":f.ariaLabel||f.label},f.checked?{defaultChecked:!0}:{}),f.disabled||f.readonly?{disabled:!0}:{}),f.tpl.renderDataAttributesAsObject((O=f.data)!=null?O:{}))),(0,s.jsx)("i",{className:"cm-btn-toggle__toggle"})]}),(0,s.jsx)("label",{htmlFor:f.id,className:"cm-setting__label--inline",children:f.label_raw?(0,_.Ay)(f.label_raw):f.label}),f.hint?(0,s.jsx)("div",{className:"cm-setting__hint",children:f.hint}):null]})})}))})},33216:function(ve,$,r){"use strict";r.d($,{U:function(){return f}});var s=r(86070),b=r(75573),t=r(77345),_=r(23245),C=r(14154),y=r(81178);const g=(0,C.I)(O=>{var L;return(0,s.jsxs)("div",{className:`cm-setting-users__list ${O.maxShowUsers?`cm-setting-users__list--max-users-height-${O.maxShowUsers}`:""} ${O.modifier?`cm-setting-users__list--${O.modifier}`:""} js-cm-setting-users__list-${O.id}`,children:[(0,s.jsx)("div",{className:`cm-setting-users__search-container js-cm-setting-users__search-container-${O.id}`,children:(L=O.users)==null?void 0:L.map((P,N)=>{var S;return O.excludeCurrentUser&&P.id==((S=(0,y.vD)())==null?void 0:S.id)?null:(0,s.jsxs)("div",{className:"cm-setting-users__user js-cm-setting-users__user","data-jets":`${(P.name||"").toLowerCase()} ${(P.email||"").toLowerCase()}`,children:[(0,s.jsx)("div",{className:"cm-setting-users__avatar",children:(0,s.jsx)(_.p,{imageUrl:P.preview_url_without_placeholder,gravatarHash:P.gravatar_hash,name:P.name,size:t.Z.SIZE_24})}),(0,s.jsxs)("div",{className:"cm-setting-users__name-and-email",children:[P.name?(0,s.jsxs)("div",{className:"cm-setting-users__name js-cm-setting-users__name",children:[P.name||"",O.id==="groups"&&P.users?(0,s.jsx)("span",{className:"ca-badge ca-badge--grey cm-setting-users__group-count",children:P.users.length}):null]}):null,(0,s.jsx)("div",{className:`cm-setting-users__email ${P.name?"":"cm-setting-users__email--email-only"}`,children:P.email||""})]}),(0,s.jsx)("div",{className:"ca-badge ca-badge--grey cm-setting-users__invitation-pending",children:P.name?null:(0,s.jsx)("span",{className:"ca-badge ca-badge--grey cm-setting-users__invitation-pending",children:window.translate("Legacy_group_add_users_invitation_pending")})}),(0,s.jsx)(b.z,{id:`${O.id}-${P.id}`,name:`${O.id}-${P.id}`,value:P.id,checked:P.checked,modifier:"sm",disabled:P.name===null,indeterminate:P.name===null,classes:`js-cm-setting-users__item-checkbox-input ${O.selectionRequired?"validate-multiselect":""}`,label_classes:"cm-setting-users__checkbox js-cm-setting-users__checkbox",data:{name:P.name,"user-id":P.id,msg:O.error_message||window.translate("Legacy_settings_users_validation_error")}})]},N)})}),O.searchEnabled?(0,s.jsx)("div",{className:`cm-setting-users__not-found js-cm-setting-users__not-found${`-${O.id}`}`}):null]})});var m=Object.defineProperty,T=Object.defineProperties,E=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,o=(O,L,P)=>L in O?m(O,L,{enumerable:!0,configurable:!0,writable:!0,value:P}):O[L]=P,l=(O,L)=>{for(var P in L||(L={}))u.call(L,P)&&o(O,P,L[P]);if(w)for(var P of w(L))c.call(L,P)&&o(O,P,L[P]);return O},p=(O,L)=>T(O,E(L));const f=(0,C.I)(O=>(0,s.jsx)("form",p(l(l({className:`js-co-settings__setting cm-setting cm-setting-users ${O.modifier?`cm-setting-users--${O.modifier}`:""}`,"data-id":O.id},O.group?{"data-group":O.group}:{}),O.api?{"data-api":O.api}:{}),{"data-type":"users","data-label-selectall":window.translate("Legacy_settings_users_selectall"),"data-label-unselectall":window.translate("Legacy_settings_users_unselectall"),"data-instant":"true","data-not-found-label":O.notFoundLabel,"data-search-enabled":O.searchEnabled,children:(0,s.jsxs)("div",{className:"cm-setting__preview cm-setting__bar js-cm-setting__bar",children:[O.label?(0,s.jsx)("label",{htmlFor:"users",className:"cm-setting__label",children:O.label}):null,(0,s.jsx)("div",{className:"cm-setting-users__validation-error js-cm-setting-users__validation-error"}),O.searchEnabled?(0,s.jsxs)("div",{className:`cm-setting-users__filter ${O.modifier?`cm-setting-users__filter--${O.modifier}`:""}`,children:[(0,s.jsx)("i",{className:"cm-setting-users__filter-icon ca-icon--search ca-icon--sm"}),(0,s.jsx)("input",{className:`cm-setting-users__filter-query js-cm-setting-users__filter-query-${O.id}`,type:"text",placeholder:`${O.searchPlaceholder?`${O.searchPlaceholder}`:`${window.translate("Legacy_placeholder_search")}`}`})]}):null,O.selectAllEnabled?(0,s.jsx)("div",{className:"cm-setting-users__select",children:(0,s.jsx)(b.z,{id:`select-${O.id}`,name:`select-${O.id}`,label:window.translate("Legacy_settings_users_selectall"),modifier:"sm",disabled:!1,classes:"js-cm-setting-users__select-all-checkbox",label_classes:"cm-setting-users__select-label js-cm-setting-users__select-label"})}):null,(0,s.jsx)(g,l({},O))]})})))},90154:function(ve,$,r){"use strict";r.d($,{F:function(){return u}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.defineProperties,C=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,T=(c,o,l)=>o in c?t(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,E=(c,o)=>{for(var l in o||(o={}))g.call(o,l)&&T(c,l,o[l]);if(y)for(var l of y(o))m.call(o,l)&&T(c,l,o[l]);return c},w=(c,o)=>_(c,C(o));const u=(0,b.I)(c=>{var o,l;return(0,s.jsxs)("div",w(E(E(E({className:`mod mod-c-slider cm-slider js-cm-slider ${c.fullWidth?"cm-slider--full-width":""}`,"data-page-scroll-width-factor":c.pageScrollWidthFactor||.7},c.dots?{"data-dots":"true"}:{}),c.fullWidth?{"data-full-width":"true"}:{}),c.postLoadedContent===!0?{"data-post-loaded-content":"true"}:{}),{children:[(0,s.jsx)("div",{className:`cm-slider__elements js-cm-slider__elements ${c.sliderBetweenButtons?"cm-slider__elements--between":""}`,children:(o=c.templates)==null?void 0:o.map((p,f)=>p&&p.nameReact?(0,s.jsx)(p.nameReact,E({},p.options),f):null)}),c.dots?(0,s.jsx)("div",{className:"cm-slider__dots",children:(l=c.templates)==null?void 0:l.map((p,f)=>(0,s.jsx)("button",{className:`cm-slider__dot js-cm-slider__dot ${f===0?"state-active":""}`,"data-index":f},f))}):null,(0,s.jsx)("div",{className:`cm-slider__arrow-left-background js-cm-slider__left ${c.leftArrowBackgroundClass||""}`,style:{display:"none"}}),(0,s.jsx)("div",{className:`cm-slider__arrow-left-wrapper js-cm-slider__left ${c.leftArrowWrapperClass||""}`,style:{display:"none"},children:(0,s.jsx)("button",{className:"cm-slider__arrow-left js-cm-slider__arrow-left js-cm-slider__left",title:window.translate("Legacy_slider_left"),"aria-label":window.translate("Legacy_slider_left"),style:{display:"none"},children:c.arrowStyle==="arrow"?(0,s.jsx)("i",{className:"ca-icon--arrow-left","aria-hidden":!0}):(0,s.jsx)("i",{className:"ca-icon--caret-left","aria-hidden":!0})})}),(0,s.jsx)("div",{className:`cm-slider__arrow-right-background js-cm-slider__right ${c.rightArrowBackgroundClass||""}`,style:{display:"none"}}),(0,s.jsx)("div",{className:`cm-slider__arrow-right-wrapper js-cm-slider__right ${c.rightArrowWrapperClass||""}`,style:{display:"none"},children:(0,s.jsx)("button",{className:"cm-slider__arrow-right js-cm-slider__arrow-right js-cm-slider__right",title:window.translate("Legacy_slider_right"),"aria-label":window.translate("Legacy_slider_right"),children:c.arrowStyle==="arrow"?(0,s.jsx)("i",{className:"ca-icon--arrow-right","aria-hidden":!0}):(0,s.jsx)("i",{className:"ca-icon--caret-right","aria-hidden":!0})})})]}))})},66159:function(ve,$,r){"use strict";r.d($,{_:function(){return _}});var s=r(29835),b=r(18216),t=r(5181);class _ extends b.j{static get SORT_DESC(){return"DESC"}static get SORT_ASC(){return"ASC"}static get COMMAND_LEFT_KEY_CODE(){return 91}static get COMMAND_RIGHT_KEY_CODE(){return 93}static get CONTROL_KEY_CODE(){return 17}static get IGNORED_KEY_CODES(){return[_.COMMAND_LEFT_KEY_CODE,_.COMMAND_RIGHT_KEY_CODE,_.CONTROL_KEY_CODE]}static get MULTISELECT_HEADER_HIDDEN_CLASS(){return"c-table__header-multiselect--hidden"}static get FULLSCREEN_MODIFIER(){return"c-table--fullscreen"}on(y){this.sandbox.subscribe("events",this),this.sandbox.subscribe("table",this),this.tpl.bindDataAttributes(this,{tableId:{type:String},title:{type:String},titleComponent:{type:String},headerItems:{type:Object},filterOptions:{type:Object},rows:{type:Object,changed:()=>this.updateRows()},enableDownload:{type:Boolean},enableSearch:{type:Boolean},displaySearchLoader:{type:Boolean,default:!1,changed:()=>this.toggleSearchLoader()},enableMultiselect:{type:Boolean,default:!1},allSelectableRowIds:{type:Object,default:[],changed:()=>this.updateMultiselectElements()},selectedRowIds:{type:Object,default:[],changed:()=>this.updateMultiselectElements()},enableLazyLoading:{type:Boolean},maximumRowsCount:{type:Number,changed:()=>this.updateMaximumRowsCount()},sticky:{type:Boolean},defaultOrderColumn:{type:String},defaultOrderDirection:{type:String},translationKeys:{type:Object,default:{selectionLabel:"Table_multiselect_defaultSelectionLabel"}}}),this.tableBodyModule=s.u.getFirstChildModule(this.$ctx,"mod-c-table-body"),this.enableMultiselect&&(this.$multiselectCheckbox=this.$ctx.find(".js-c-table__header-multiselect-checkbox"),this.$multiselectHeader=this.$ctx.find(".js-c-table__header-multiselect"),this.$multiselectSelectionCountNumber=this.$ctx.find(".js-c-table__header-multiselect-count-number"),this.$multiselectSelectionCountText=this.$ctx.find(".js-c-table__header-multiselect-count-text"),this.updateMultiselectElements()),this.$emptyMessage=this.$ctx.find(".js-c-table__empty-container"),this.bindSortEvents(),this.bindDownloadEvents(),this.bindSearchEvents(),this.bindMultiselectEvents(),this.bindLazyLoadingEvents(),this.checkEmptyMessage(),y()}updateRows(){this.$loader.show(),this.tableBodyModule.$ctx.dataAsObject("rows",this.rows),this.checkEmptyMessage(),this.updateMultiselectElements()}updateMaximumRowsCount(){this.tableBodyModule.$ctx.dataAsNumber("maximumRowsCount",this.maximumRowsCount)}bindSortEvents(){this.$ctx.find(".js-c-table__header[data-sortable=true]").click(this.handleHeaderClick.bind(this))}bindDownloadEvents(){this.$ctx.on("clicked",".js-c-table__title-container-right",this.handleDownload.bind(this))}bindSearchEvents(){this.$ctx.find(".js-cm-filter-query__query").on("keyup",t.debounce(600,this.handleSearch).bind(this))}bindMultiselectEvents(){this.enableMultiselect&&(this.$multiselectCheckbox.on("change",()=>this.handleSelectAll()),this.$ctx.on("rowSelectionChanged",y=>{const g=y.detail.rowId,m=y.detail.isSelected,T=y.detail.shiftKeyPressed?this.getSelectedRowIdsByRangeSelection(g,m):this.getSelectedRowIdsBySingleSelection(g,m);this.$ctx.dataAsObject("selectedRowIds",T),this.tpl.fireCustomEvent(this,"tableSelectionChanged",{selectedRowIds:T}),this.lastClickedRowId=g}))}getSelectedRowIdsBySingleSelection(y,g){return g?[...this.selectedRowIds,y]:this.selectedRowIds.filter(m=>m!==y)}getSelectedRowIdsByRangeSelection(y,g){const m=this.getRowIdsRange(y);if(g){const T=m.filter(E=>!this.selectedRowIds.includes(E));return[...this.selectedRowIds,...T]}return this.selectedRowIds.filter(T=>!m.includes(T))}getRowIdsRange(y){const g=this.selectedRowIds.length===1?this.selectedRowIds[0]:this.lastClickedRowId,m=this.rows.findIndex(w=>w.rowId===g),T=this.rows.findIndex(w=>w.rowId===y);return(m<T?this.rows.filter((w,u)=>u>=m&&u<=T):this.rows.filter((w,u)=>u<=m&&u>=T)).map(w=>w.rowId)}bindLazyLoadingEvents(){this.enableLazyLoading&&(this.$loader=this.$ctx.find(".js-c-table__loader"),this.$loader.show(),this.$ctx.on("allTableRowsRendered",y=>{y.detail.identifier===this.tableId&&this.$loader.hide()}))}handleSearch(y){if(y.stopPropagation(),_.IGNORED_KEY_CODES.includes(y.keyCode))return;const g=y.currentTarget.value;this.fire("search",{query:g},["table"])}handleHeaderClick(y){const g=this.$ctx.find(y.target);!g.hasClass("sort-up")&&!g.hasClass("sort-down")?this.enableDescendingSort(g):g.hasClass("sort-down")?this.enableAscendingSort(g):g.hasClass("sort-up")&&this.disableSort(g)}handleDownload(y){y.stopPropagation(),this.fire("download",null,["table"])}handleSelectAll(){const y=this.selectedRowIds.length===0?this.allSelectableRowIds:[];this.$ctx.dataAsObject("selectedRowIds",y),this.tpl.fireCustomEvent(this,"tableSelectionChanged",{selectedRowIds:y})}toggleSearchLoader(){const y=this.$ctx.find(".js-c-table__search-loader");this.displaySearchLoader?y.addClass("c-table__search-loader--visible"):y.removeClass("c-table__search-loader--visible")}updateMultiselectElements(){this.enableMultiselect&&(this.updateRowSelection(),this.updateMultiselectCheckboxState(),this.updateMultiselectHeaderVisibility(),this.updateMultiselectSelectionCount())}updateRowSelection(){this.rows=this.rows.map(y=>(y.isSelected=y.isSelectable&&this.selectedRowIds.includes(y.rowId),y)),this.tableBodyModule.$ctx.dataAsObject("rows",this.rows)}updateMultiselectCheckboxState(){const y=this.selectedRowIds.length>0&&this.selectedRowIds.length===this.allSelectableRowIds.length,g=!y&&this.selectedRowIds.length>0,m=this.allSelectableRowIds.length===0;this.$multiselectCheckbox.dataAsBoolean("indeterminate",g),this.$multiselectCheckbox.prop("disabled",m),this.$multiselectCheckbox.prop("checked",y&&!m)}updateMultiselectHeaderVisibility(){this.selectedRowIds.length>0?this.$multiselectHeader.removeClass(_.MULTISELECT_HEADER_HIDDEN_CLASS):this.$multiselectHeader.addClass(_.MULTISELECT_HEADER_HIDDEN_CLASS)}updateMultiselectSelectionCount(){this.$multiselectSelectionCountNumber.text(this.selectedRowIds.length),this.$multiselectSelectionCountText.text(window.translate(this.translationKeys.selectionLabel,{count:this.selectedRowIds.length}))}enableDescendingSort(y){this.resetOtherColumns(),y.addClass("c-table__header--bold sort-down"),this.fire("sortChanged",{active:!0,direction:_.SORT_DESC,key:y.data("key")},["table"])}enableAscendingSort(y){y.toggleClass("sort-down sort-up"),this.fire("sortChanged",{active:!0,direction:_.SORT_ASC,key:y.data("key")},["table"])}disableSort(y){if(y.toggleClass("c-table__header--bold sort-up"),this.defaultOrderColumn){const g=this.$ctx.find(`.js-c-table__header[data-key="${this.defaultOrderColumn}"]`);this.defaultOrderDirection===_.SORT_ASC?g.toggleClass("c-table__header--bold sort-up"):g.toggleClass("c-table__header--bold sort-down")}this.fire("sortChanged",null,["table"])}resetOtherColumns(){this.$ctx.find(".js-c-table__header[data-sortable=true]").removeClass("c-table__header--bold sort-down sort-up")}checkEmptyMessage(){this.rows.length===0?this.$emptyMessage.removeClass("c-table__empty-container--hidden"):this.$emptyMessage.addClass("c-table__empty-container--hidden")}onRefreshHeaders(y){y.direction===_.SORT_DESC?this.$ctx.find(`.js-c-table__header[data-key=${y.key}]`).addClass("c-table__header--bold sort-down"):y.direction===_.SORT_ASC&&this.$ctx.find(`.js-c-table__header[data-key=${y.key}]`).addClass("c-table__header--bold sort-up")}onRefreshSearchField(y){this.$ctx.find(".js-cm-filter-query__query").val(y.query).focus()}onEnterFullscreen(){this.$ctx.addClass(_.FULLSCREEN_MODIFIER)}onLeaveFullscreen(){this.$ctx.removeClass(_.FULLSCREEN_MODIFIER)}}},23211:function(ve,$,r){"use strict";r.d($,{w:function(){return re}});var s=r(86070),b=r(93277),t=r(87053),_=r(75573),C=r(89045),y=r(93791),g=r(78149),m=r(55193),T=r(14154),E=Object.defineProperty,w=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,o=(me,ie,ee)=>ie in me?E(me,ie,{enumerable:!0,configurable:!0,writable:!0,value:ee}):me[ie]=ee,l=(me,ie)=>{for(var ee in ie||(ie={}))u.call(ie,ee)&&o(me,ee,ie[ee]);if(w)for(var ee of w(ie))c.call(ie,ee)&&o(me,ee,ie[ee]);return me};const p=(0,T.I)(me=>(0,s.jsx)("div",l({className:"mod mod-c-filter-pills co-filter-pills"},me.tpl.renderDataAttributesAsObject(me))));var f=Object.defineProperty,O=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,N=(me,ie,ee)=>ie in me?f(me,ie,{enumerable:!0,configurable:!0,writable:!0,value:ee}):me[ie]=ee,S=(me,ie)=>{for(var ee in ie||(ie={}))L.call(ie,ee)&&N(me,ee,ie[ee]);if(O)for(var ee of O(ie))P.call(ie,ee)&&N(me,ee,ie[ee]);return me};const R=(0,T.I)(me=>(0,s.jsx)("tbody",S({className:"mod mod-c-table-body c-table-body"},me.tpl.renderDataAttributesAsObject(me))));var U=r(66159),B=Object.defineProperty,M=Object.defineProperties,I=Object.getOwnPropertyDescriptors,F=Object.getOwnPropertySymbols,te=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable,Ie=(me,ie,ee)=>ie in me?B(me,ie,{enumerable:!0,configurable:!0,writable:!0,value:ee}):me[ie]=ee,de=(me,ie)=>{for(var ee in ie||(ie={}))te.call(ie,ee)&&Ie(me,ee,ie[ee]);if(F)for(var ee of F(ie))fe.call(ie,ee)&&Ie(me,ee,ie[ee]);return me},q=(me,ie)=>M(me,I(ie));const re=(0,T.I)(me=>{var ie;const ee=()=>me.title?me.titleComponent?(0,s.jsx)(me.titleComponent,{title:me.title}):(0,s.jsx)("h2",{className:"c-table__title",children:me.title}):null;return(0,s.jsxs)("div",q(de({className:"mod mod-c-table c-table"},me.tpl.renderDataAttributesAsObject(me)),{children:[me.title||me.enableSearch||me.enableDownload||me.filterOptions?(0,s.jsxs)("div",{className:"c-table__title-container",children:[(0,s.jsxs)("div",{className:"c-table__title-container-left",children:[(0,s.jsx)(ee,{}),me.filterOptions?(0,s.jsx)(p,{filters:me.filterOptions}):null]}),(0,s.jsxs)("div",{className:"c-table__title-container-right js-c-table__title-container-right",children:[me.enableSearch?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"c-table__search-loader js-c-table__search-loader",children:(0,s.jsx)(C.R,{size:"tiny"})}),(0,s.jsx)(m.m,{id:"query",placeholder:window.translate("Legacy_placeholder_search")})]}):null,me.enableDownload?(0,s.jsx)("div",{className:"c-table__title-container-right-download-button",children:(0,s.jsx)(t.S,{label:window.translate("Legacy_table_download_button_label"),style:b.Q.STYLE_SECONDARY,icon:y.l.ICON_DOWNLOAD_ALTERNATIVE,isDisabled:me.rows.length<=0})}):null]})]}):null,(0,s.jsxs)("div",{className:"c-table-fullwidth-container",children:[(0,s.jsxs)("table",{className:`c-table c-table--nowrap ${me.sticky?" c-table--sticky ":""} ${me.enableMultiselect?" c-table--user-select-none ":""}`,children:[(0,s.jsx)("thead",{className:"c-table__head",children:(0,s.jsxs)("tr",{className:"c-table__row-header",children:[me.enableMultiselect?(0,s.jsxs)("th",{className:"c-table__header",width:"20",children:[(0,s.jsx)(_.z,{id:"table_multicselect_all",label_classes:"c-table__header-multiselect-checkbox",classes:"js-c-table__header-multiselect-checkbox"}),(0,s.jsxs)("div",{className:"c-table__header-multiselect js-c-table__header-multiselect c-table__header-multiselect--hidden",children:[(0,s.jsxs)("div",{className:"c-table__header-multiselect-count js-c-table__header-multiselect-count",children:[(0,s.jsx)("span",{className:"c-table__header-multiselect-count-number js-c-table__header-multiselect-count-number"}),"\xA0"," ",(0,s.jsx)("span",{className:"c-table__header-multiselect-count-text js-c-table__header-multiselect-count-text"})]}),(0,s.jsx)("div",{className:"c-table__header-multiselect-actions js-c-table__header-multiselect-actions",children:me.multiselectActionsTemplate?(0,s.jsx)(me.multiselectActionsTemplate,{}):null})]})]}):null,(ie=me.headerItems)==null?void 0:ie.map((pe,je)=>(0,s.jsxs)("th",q(de({className:`c-table__header js-c-table__header ${pe.sortable?"c-table__header--sortable":""} ${pe.sortable&&me.defaultOrderColumn===pe.key?`c-table__header--bold ${me.defaultOrderDirection===U._.SORT_ASC?"c-table__header--bold sort-up":"c-table__header--bold sort-down"} `:""}`},me.sticky?{}:{width:pe.width||50}),{"data-sortable":pe.sortable?"true":"false","data-key":pe.key,children:[pe.name,pe.sortable?(0,s.jsx)("span",{className:"c-table__sort-arrow",children:(0,s.jsx)(g.V,{icon:y.l.ICON_ARROW_DOWN,size:y.l.SIZE_EXTRA_SMALL})}):null]}),je))]})}),(0,s.jsx)(R,{tableId:me.tableId,rows:me.rows,enableMultiselect:me.enableMultiselect,enableLazyLoading:me.enableLazyLoading,maximumRowsCount:me.maximumRowsCount})]}),(0,s.jsx)("div",{className:"c-table__loader js-c-table__loader",children:(0,s.jsx)(C.R,{})}),(0,s.jsx)("div",{className:"c-table__empty-container js-c-table__empty-container c-table__empty-container--hidden",children:(0,s.jsx)("p",{className:"c-table__empty_message",children:window.translate("Legacy_table_empty_message")})})]})]}))})},42221:function(ve,$,r){"use strict";r.d($,{a:function(){return t}});var s=r(18216),b=r(5181);class t extends s.j{static get LAYOUT_DEFAULT(){return"default"}static get LAYOUT_BIG(){return"big"}static get ALIGNMENT_MIDDLE(){return"middle"}static get ALIGNMENT_LEFT(){return"left"}on(C){const y=this.$ctx;this.sandbox.subscribe("tabs",this),this.sandbox.subscribe("events",this),y.on("click",".js-cm-tabs__link",g=>{g.preventDefault();const m=b(g.currentTarget);this.showContent(m)}),y.on("click",".js-cm-tabs__feature-enable",g=>{g.preventDefault();const T=b(g.currentTarget).data("feature");this.fire("openPayment",{feature:T},["events"])}),C()}showContent(C){if(!C.hasClass("state-active")){const y=C.attr("href").substring(5),g=C.closest(".js-cm-tabs"),m=g.find(".js-cm-tabs__link"),T=g.find(".js-cm-tabs__pane"),E=g.find(".cm-tabs__header-content-item");m.removeClass("state-active"),C.addClass("state-active");const w=T.filter(`#tab-${y}`);T.removeClass("state-active"),w.addClass("state-active");const u=E.filter(`#tab-header-content-item-${y}`);E.removeClass("state-active"),u.addClass("state-active"),E.off(".tabs-content-item"),this.fire("tabSwitched",{id:y},["tabs"]),this.fire("tabContentItem",{contentItem:u},["tabs"])}}onSwitchTab(C){const y=this.$ctx;if(C.id){const g=y.find(`[href="#tab-${C.id}"]`);g.length>0&&this.showContent(g)}}onInitializeTabContentItem(){this.fire("tabContentItem",{contentItem:this.$ctx.find(".cm-tabs__header-content-item.state-active")},["tabs"])}}},29928:function(ve,$,r){"use strict";r.d($,{y:function(){return m}});var s=r(86070),b=r(95376),t=r(14022),_=r(14154),C=r(82110);const y=(0,_.I)(T=>{const E={};switch(T.feature){case"CONDITIONAL_FACETS":E.title=window.translate("Legacy_medialibrary_facette_tabs_visibility");break;case"CORE_USER_GROUPS":E.title="Groups";break;case"TARGETS":E.title=window.translate("Legacy_targets_powerbar_title");break;case"WORKSPACE_APPROVAL_REQUESTS":E.title=window.translate("Legacy_workspace_layer_feedback_requests");break;default:E.title=T.title||""}return(0,C.Rm)()?(0,s.jsx)("li",{role:"presentation",className:"cm-tabs__item cm-feature-hook--tab",children:(0,s.jsxs)("a",{href:`#tab-${T.feature.toLowerCase()}`,"data-feature":T.feature,className:"cm-tabs__link js-cm-tabs__feature-enable",role:"tab",children:[E.title,(0,s.jsx)(t.c,{})]})}):null});var g=r(42221);const m=(0,_.I)(T=>{var E,w;const u={layout:{value:T.layout,type:String,default:g.a.LAYOUT_DEFAULT,allowed:[g.a.LAYOUT_DEFAULT,g.a.LAYOUT_BIG]},alignment:{value:T.alignment,type:String,default:g.a.ALIGNMENT_MIDDLE,allowed:[g.a.ALIGNMENT_MIDDLE,g.a.ALIGNMENT_LEFT]},borderTop:{value:T.border?T.border.top:!1,type:Boolean},borderBottom:{value:T.border?T.border.bottom:!1,type:Boolean},borderLeft:{value:T.border?T.border.left:!1,type:Boolean},borderRight:{value:T.border?T.border.right:!1,type:Boolean},shadow:{value:T.shadow,type:Boolean},transparent:{value:T.transparent,type:Boolean},items:{value:T.items,type:Array}},{layout:c,alignment:o,borderTop:l,borderBottom:p,borderLeft:f,borderRight:O,shadow:L,transparent:P,items:N}=T.utils.data.validateParameters(u),S=N.filter(R=>!!R.headerContent);return(0,s.jsxs)("div",{className:`mod mod-c-tabs cm-tabs js-cm-tabs cm-tabs--${c} cm-tabs--alignment-${o} ${l?" cm-tabs--border-top ":""} ${p?" cm-tabs--border-bottom ":""} ${f?" cm-tabs--border-left ":""} ${O?" cm-tabs--border-right ":""} ${L?" cm-tabs--shadow ":""} ${P?" cm-tabs--transparent ":""}`,children:[(0,s.jsxs)("div",{className:"cm-tabs__header",children:[(0,s.jsx)("ul",{className:"cm-tabs__list",role:"tablist",children:(E=T.items)==null?void 0:E.map((R,U)=>{const B=U===0,M=U+1===T.items.length;return R.feature?(0,s.jsx)(y,{feature:R.feature}):(0,s.jsx)("li",{role:"presentation",className:`cm-tabs__item ${B?"cm-tabs__item--first":""} ${M?"cm-tabs__item--last":""}`,children:(0,s.jsxs)("a",{href:`#tab-${R.id}`,className:`cm-tabs__link ${B?"cm-tabs__link--first":""} ${M?"cm-tabs__link--last":""} js-cm-tabs__link${R.active?" state-active":""}`,role:"tab",children:[R.icon?(0,b.Ay)(R.icon):null,(0,b.Ay)(R.title)]})})})}),S.length>0?(0,s.jsx)("ul",{className:"cm-tabs__header-content",children:S==null?void 0:S.map(R=>R.headerContent?(0,s.jsx)("li",{id:`tab-header-content-item-${R.id}`,role:"presentation",className:`cm-tabs__header-content-item js-cm-tabs__header-content-item${R.active?" state-active":""}`,children:R.headerContent},`tab-header-content-item-${R.id}`):null)}):null]}),T.skip_content?null:(0,s.jsx)("div",{className:`cm-tabs__content ${T.enableScrolling?"cm-tabs__content--scrolling":""}`,children:(w=T.items)==null?void 0:w.map(R=>(0,s.jsx)("div",{id:`tab-${R.id}`,className:`cm-tabs__pane js-cm-tabs__pane${R.active?" state-active":""}`,role:"tabpanel",children:R.content?(0,b.Ay)(R.content):null},`tab-${R.id}`))})]})})},1690:function(ve,$,r){"use strict";r.d($,{R:function(){return w}});var s=r(98609),b=r.n(s),t=r(86070),_=r(58848),C=r(82387),y=r(14154);const g=(0,y.I)(u=>{let c,o;switch(u.temporaryAccess){case w.ACCESS_EXPIRED:c=_.$.BUBBLE_STATUS_DANGER,o=window.translate("Legacy_temporary_access_expired");break;case w.ACCESS_STARTS_ON:c=_.$.BUBBLE_STATUS_PROGRESS,o=u.tpl.translate(window.translate("Legacy_temporary_access_starts"),[u.validFrom.format("DD/MM/YYYY")]);break;case w.ACCESS_EXPIRES_ON:c=_.$.BUBBLE_STATUS_WARNING,o=u.tpl.translate(window.translate("Legacy_temporary_access_expires"),[u.validTo.format("DD/MM/YYYY")]);break}return(0,t.jsx)("div",{className:"co-team__user-access-badge",children:(0,t.jsx)(C.b,{theme:_.$.THEME_LIGHT,text:o,bubbleStatus:c})})});var m=r(50427),T=r(18216),E=r(5181);class w extends T.j{static get ACCESS_EXPIRED(){return"expired"}static get ACCESS_EXPIRES_ON(){return"expiresOn"}static get ACCESS_STARTS_ON(){return"startsOn"}static get ACCESS_STATUS(){return[w.ACCESS_EXPIRED,w.ACCESS_EXPIRES_ON,w.ACCESS_STARTS_ON,""]}static setTemporaryAccessStatus(c,o){return c=c?b().utc(c):null,o=o?b().utc(o):null,!c&&!o?null:b()().isAfter(o)?w.ACCESS_EXPIRED:b()().isBefore(c)?w.ACCESS_STARTS_ON:o?w.ACCESS_EXPIRES_ON:null}on(c){this.tpl.bindDataAttributes(this,{validFrom:{type:String},validTo:{type:String},temporaryAccess:{type:String,allowed:w.ACCESS_STATUS}}),this.temporaryAccess&&this.renderContent(),c()}renderContent(){const c=E((0,m.EY)(g,{validFrom:b()(this.validFrom),validTo:b()(this.validTo),temporaryAccess:this.temporaryAccess}));this.tpl.addAndActivate(this.$ctx,c,!1)}}},53666:function(ve,$,r){"use strict";r.d($,{p:function(){return T}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(E,w,u)=>w in E?t(E,w,{enumerable:!0,configurable:!0,writable:!0,value:u}):E[w]=u,m=(E,w)=>{for(var u in w||(w={}))C.call(w,u)&&g(E,u,w[u]);if(_)for(var u of _(w))y.call(w,u)&&g(E,u,w[u]);return E};const T=(0,b.I)(E=>(0,s.jsx)("div",m({className:"mod mod-c-temporary-access cm-temporary-access"},E.tpl.renderDataAttributesAsObject(E))))},40402:function(ve,$,r){"use strict";r.d($,{X:function(){return M},S:function(){return B}});var s=r(41594),b=r(59534),t=r.n(b),_=r(50427),C=r(86070),y=r(45935),g=r(1184),m=r(48459),T=r(12207),E=r(46040),w=r(31415),u=r(33446);const c=(0,C.jsxs)("svg",{width:"150",height:"114",viewBox:"0 0 150 114",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,C.jsxs)("g",{clipPath:"url(#clip0_5101_171241)",children:[(0,C.jsx)("path",{d:"M54.6432 53.5769C56.3367 53.4177 58.0849 53.6564 59.6315 54.3775C61.089 55.0497 62.3134 56.1373 63.15 57.5025C63.9846 58.8599 64.3983 60.4505 64.4318 62.0361C64.4768 63.7116 64.1111 65.4175 63.2577 66.8725C62.5201 68.1352 61.4472 69.171 60.1568 69.8662C58.6416 70.69 56.8878 71.0216 55.1715 70.946C53.5463 70.8805 51.9233 70.4255 50.551 69.5451C49.2014 68.6845 48.1406 67.4423 47.5044 65.9777C46.8421 64.4649 46.6486 62.7729 46.8302 61.1396C46.9952 59.6766 47.5121 58.2452 48.376 57.0463C49.193 55.913 50.2868 55.0061 51.5541 54.4113C52.5272 53.9563 53.5726 53.6739 54.6432 53.5769ZM55.0221 56.8257C53.9299 56.9339 52.8683 57.3855 52.0616 58.1316C51.1799 58.9351 50.6266 60.0589 50.4411 61.2283C50.2523 62.4214 50.3694 63.6816 50.8824 64.7843C51.2761 65.6342 51.9068 66.3536 52.6994 66.8569C54.0746 67.7247 55.844 67.8835 57.383 67.3922C58.622 66.9952 59.6524 66.1257 60.2489 64.9739C60.6707 64.1603 60.8658 63.2406 60.8671 62.328C60.8748 61.426 60.7004 60.516 60.3121 59.6985C59.8112 58.6265 58.9439 57.7665 57.8651 57.2723C56.9816 56.868 55.9867 56.7277 55.0221 56.8257Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M73.7338 53.5751C75.3008 53.431 76.9128 53.6254 78.3708 54.2304C79.8896 54.8513 81.1842 55.9152 82.0844 57.2823C82.9866 58.6477 83.4469 60.2759 83.5025 61.9029C83.5649 63.5349 83.245 65.2003 82.4608 66.6434C81.6892 68.0693 80.499 69.2268 79.0493 69.9615C77.2166 70.8969 75.0751 71.1406 73.0528 70.8263C71.5732 70.5927 70.1411 70.0059 68.9649 69.0756C67.88 68.2189 67.0353 67.0982 66.5123 65.8217C65.8656 64.2543 65.7065 62.51 65.9441 60.8387C66.1754 59.2282 66.8496 57.6718 67.9283 56.4433C68.8949 55.3309 70.1738 54.4999 71.5719 54.0301C72.2723 53.7953 72.9979 53.6426 73.7338 53.5751ZM74.0792 56.8273C72.788 56.9557 71.5443 57.5746 70.7046 58.5653C69.7753 59.6376 69.3616 61.0841 69.4096 62.4855C69.435 63.3984 69.6557 64.3148 70.1076 65.1137C70.7101 66.2002 71.7488 67.0274 72.9361 67.3992C74.3096 67.8306 75.858 67.7478 77.1526 67.1056C78.1081 66.6278 78.8789 65.8499 79.3459 64.8923C79.923 63.7119 80.0409 62.341 79.8046 61.0588C79.5759 59.8146 78.9165 58.6351 77.9036 57.8581C76.8343 57.0212 75.4218 56.6811 74.0792 56.8273Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M91.4754 53.9375C93.0823 53.292 94.9659 53.4263 96.496 54.2206C97.6633 54.8205 98.6193 55.7994 99.2303 56.9535C100.006 58.4085 100.239 60.1153 100.018 61.7385C99.8252 63.1449 99.2324 64.5078 98.2662 65.5589C97.3068 66.6136 96.0128 67.3084 94.6005 67.5272C93.5457 67.6864 92.4412 67.5905 91.4512 67.1841C90.2691 66.7101 89.3118 65.7659 88.7441 64.6387C88.7449 66.6328 88.7451 68.627 88.7445 70.6213C87.5547 70.6218 86.3648 70.6219 85.1747 70.6218V53.8385H88.7445C88.7441 54.7236 88.7453 55.6087 88.7436 56.4938C89.319 55.3611 90.2852 54.4135 91.4754 53.9374V53.9375ZM92.0198 56.7405C90.9527 56.8782 89.9428 57.4773 89.3623 58.3864C88.8404 59.1841 88.6651 60.1722 88.7742 61.1097C88.8565 61.8558 89.1433 62.5871 89.6351 63.1608C90.0988 63.6997 90.7118 64.0906 91.3973 64.2846C92.1464 64.494 92.9368 64.5091 93.6933 64.3285C94.4614 64.1481 95.181 63.7345 95.6868 63.1266C96.1663 62.5592 96.4433 61.8397 96.5248 61.1067C96.616 60.2648 96.4985 59.3843 96.095 58.6311C95.7789 58.0383 95.2985 57.5483 94.7108 57.2196C93.9012 56.765 92.9359 56.6209 92.0199 56.7405H92.0198Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M119.363 53.578C120.851 53.42 122.405 53.6427 123.731 54.3562C124.758 54.9042 125.616 55.7445 126.218 56.7343C126.216 55.7783 126.216 54.8221 126.218 53.8657H129.787V70.6222H126.217C126.217 69.6577 126.217 68.6934 126.218 67.7291C125.53 68.8571 124.512 69.7916 123.299 70.3316C121.788 71.0075 120.052 71.1157 118.445 70.7515C116.925 70.3966 115.544 69.6012 114.477 68.4655C113.36 67.286 112.617 65.7748 112.304 64.1876C111.983 62.5496 112.065 60.8276 112.581 59.2379C113.066 57.7419 113.962 56.3723 115.176 55.363C116.364 54.3691 117.821 53.7479 119.363 53.578ZM119.985 56.9101C118.718 57.0896 117.515 57.7601 116.758 58.796C116.202 59.5391 115.88 60.4373 115.762 61.3519C115.578 62.8166 115.827 64.3916 116.709 65.6071C117.163 66.2343 117.765 66.74 118.463 67.079C119.331 67.5073 120.318 67.6658 121.281 67.6066C122.65 67.5327 124.012 66.9514 124.921 65.9129C125.911 64.809 126.309 63.275 126.202 61.8188C126.115 60.3743 125.476 58.9358 124.338 58.0114C123.145 57.0195 121.501 56.6824 119.985 56.9101Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M32.2357 57.0072V53.8652H45.9574C45.9532 54.4871 45.9667 55.1094 45.9485 55.7313C45.8938 57.2336 45.6464 58.7701 44.9191 60.106C44.5867 60.7184 44.1486 61.2679 43.6249 61.7291C42.9901 62.2914 42.2391 62.7071 41.46 63.0362C40.7378 63.3451 39.9859 63.5757 39.2476 63.8411C38.556 64.0937 37.8622 64.3772 37.2754 64.8301C36.835 65.1628 36.4923 65.6071 36.2829 66.1165C36.1167 66.5431 36.0263 66.9953 36.0156 67.4528C39.3452 67.4532 42.675 67.4532 46.0049 67.4528V70.6217H32.1882C32.1924 69.9698 32.1772 69.318 32.1975 68.6669C32.2548 67.1946 32.4933 65.6953 33.1692 64.3696C33.509 63.6996 33.9695 63.0976 34.5279 62.5935C35.1377 62.0422 35.8581 61.6256 36.6096 61.2961C37.4485 60.9243 38.3307 60.6658 39.1925 60.354C39.8603 60.1077 40.5308 59.8255 41.0841 59.3696C41.495 59.0356 41.8053 58.5951 41.9807 58.0967C42.0984 57.7452 42.1648 57.3787 42.178 57.0084C38.864 57.006 35.55 57.0055 32.2357 57.0072Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M101.883 53.8652H105.452C105.453 58.3946 105.453 62.9237 105.452 67.4528C107.62 67.4528 109.787 67.4529 111.955 67.4532V70.6213C108.597 70.6217 105.24 70.6219 101.883 70.6217C101.882 65.0362 101.882 59.4507 101.883 53.8652Z",fill:"#2D3232"})]}),(0,C.jsx)("defs",{children:(0,C.jsx)("clipPath",{id:"clip0_5101_171241",children:(0,C.jsx)("rect",{width:"97.6004",height:"17.4286",fill:"white",transform:"translate(32.1866 53.5283)"})})})]}),o=(0,C.jsxs)("svg",{width:"150",height:"114",viewBox:"0 0 150 114",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,C.jsxs)("g",{clipPath:"url(#clip0_5101_171249)",children:[(0,C.jsx)("path",{d:"M42.9568 68.6147C43.32 69.5758 43.8229 70.3976 44.4655 71.0801C45.1081 71.7626 45.8694 72.2849 46.7494 72.6471C47.6295 73.0093 48.5863 73.1903 49.6201 73.1903C50.6259 73.1903 51.5688 73.0022 52.4488 72.6261C53.3289 72.25 54.0972 71.7207 54.7537 71.0383C55.4102 70.3557 55.9201 69.5409 56.2833 68.5938C56.6465 67.6466 56.8281 66.5881 56.8281 65.418V47.3662H61.2283V76.6167H56.87V73.9006C55.8922 74.9313 54.7397 75.7252 53.4126 76.2825C52.0855 76.8396 50.6538 77.1182 49.1172 77.1182C47.5526 77.1182 46.0929 76.8465 44.7379 76.3033C43.3829 75.7601 42.2094 74.9871 41.2177 73.9842C40.226 72.9813 39.4437 71.7766 38.871 70.3697C38.2982 68.9629 38.0118 67.3959 38.0118 65.6687V47.3662H42.4121V65.418C42.4121 66.5881 42.5936 67.6535 42.9568 68.6147Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M68.8131 47.3662V58.0217C69.7909 57.0467 70.9225 56.2738 72.2076 55.7026C73.4927 55.1315 74.8897 54.846 76.3983 54.846C77.9629 54.846 79.4295 55.1384 80.7985 55.7234C82.1674 56.3084 83.3547 57.1024 84.3605 58.1053C85.3664 59.1083 86.1626 60.2921 86.7493 61.6571C87.336 63.0222 87.6293 64.4708 87.6293 66.003C87.6293 67.5351 87.336 68.9767 86.7493 70.3278C86.1626 71.6789 85.3664 72.856 84.3605 73.8587C83.3547 74.8616 82.1674 75.6556 80.7985 76.2406C79.4295 76.8256 77.9628 77.1181 76.3983 77.1181C74.8896 77.1181 73.4858 76.8325 72.1867 76.2614C70.8876 75.6904 69.749 74.9173 68.7712 73.9423V76.6166H64.5806V47.3662H68.8131ZM69.295 68.8862C69.6722 69.7777 70.1961 70.5577 70.8666 71.2263C71.5371 71.8949 72.3194 72.4243 73.2134 72.8143C74.1074 73.2043 75.0712 73.3993 76.105 73.3993C77.1108 73.3993 78.0606 73.2043 78.9546 72.8143C79.8486 72.4243 80.6238 71.895 81.2805 71.2263C81.937 70.5578 82.4608 69.7777 82.852 68.8862C83.2431 67.9948 83.4386 67.0338 83.4386 66.003C83.4386 64.9722 83.2431 64.0042 82.852 63.0988C82.4608 62.1934 81.937 61.4065 81.2805 60.7379C80.6239 60.0694 79.8487 59.547 78.9546 59.1709C78.0605 58.7949 77.1107 58.6067 76.105 58.6067C75.0993 58.6067 74.1493 58.7948 73.2554 59.1709C72.3614 59.5471 71.5791 60.0694 70.9085 60.7379C70.2381 61.4065 69.7072 62.1934 69.3161 63.0988C68.925 64.0042 68.7294 64.9722 68.7294 66.003C68.7293 67.0338 68.9179 67.9948 69.295 68.8862Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M90.0174 61.6988C90.5761 60.3616 91.3445 59.1847 92.3223 58.1679C93.3 57.1511 94.4596 56.3502 95.8006 55.7652C97.1416 55.1802 98.5944 54.8877 100.159 54.8877C101.695 54.8877 103.12 55.1663 104.433 55.7234C105.746 56.2805 106.878 57.0536 107.828 58.0426C108.778 59.0314 109.518 60.2015 110.049 61.5526C110.58 62.9037 110.845 64.3732 110.845 65.9611V67.3401H93.4538C93.5936 68.2037 93.873 69.0046 94.292 69.7427C94.7111 70.4809 95.2349 71.1217 95.8635 71.6649C96.4921 72.2082 97.2045 72.6331 98.0007 72.9394C98.797 73.2458 99.642 73.3991 100.536 73.3991C103.079 73.3991 105.132 72.3544 106.696 70.265L109.756 72.5215C108.694 73.9422 107.381 75.0566 105.817 75.8644C104.252 76.6722 102.492 77.0762 100.536 77.0762C98.9437 77.0762 97.4561 76.7975 96.0731 76.2404C94.6902 75.6834 93.4889 74.9033 92.4692 73.9003C91.4494 72.8974 90.6462 71.7205 90.0595 70.3694C89.4728 69.0184 89.1794 67.5488 89.1794 65.961C89.1793 64.4567 89.4587 63.0359 90.0174 61.6988ZM95.9054 60.0481C94.718 61.0371 93.9288 62.3534 93.5377 63.997H106.571C106.208 62.3534 105.432 61.0371 104.245 60.0481C103.057 59.0593 101.668 58.5648 100.075 58.5648C98.4827 58.5648 97.0928 59.0593 95.9054 60.0481Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M118.765 60.5292C117.871 61.5042 117.424 62.8274 117.424 64.4989V76.6171H113.192V55.3059H117.382V57.9385C117.913 57.0749 118.605 56.3924 119.457 55.8909C120.309 55.3894 121.322 55.1387 122.495 55.1387H123.962V59.0666H122.202C120.805 59.0667 119.659 59.5542 118.765 60.5292Z",fill:"#2D3232"})]}),(0,C.jsx)("defs",{children:(0,C.jsx)("clipPath",{id:"clip0_5101_171249",children:(0,C.jsx)("rect",{width:"85.9501",height:"29.7519",fill:"white",transform:"translate(38.0118 47.3662)"})})})]}),l=(0,C.jsxs)("svg",{width:"150",height:"114",viewBox:"0 -2 150 114",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,C.jsx)("path",{d:"M31.3427 57.6828V60.6347C33.5456 60.6322 35.6576 59.7638 37.2153 58.2198C38.773 56.6758 39.6492 54.5824 39.6517 52.3989H36.6735C36.6719 53.7998 36.1097 55.1428 35.1103 56.1334C34.111 57.124 32.756 57.6812 31.3427 57.6828Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M31.3426 65.8185C29.9394 65.8185 28.5938 65.266 27.6016 64.2826C26.6094 63.2992 26.052 61.9653 26.052 60.5746C26.052 59.1838 26.6094 57.85 27.6016 56.8665C28.5938 55.8831 29.9394 55.3306 31.3426 55.3306V52.4009C30.2597 52.3993 29.1871 52.6092 28.186 53.0186C27.1849 53.4279 26.275 54.0287 25.5081 54.7866C24.7413 55.5445 24.1326 56.4447 23.7167 57.4357C23.3009 58.4268 23.086 59.4894 23.0845 60.5628C23.0829 61.6361 23.2947 62.6993 23.7077 63.6916C24.1206 64.6838 24.7267 65.5857 25.4914 66.3458C26.256 67.1059 27.1642 67.7092 28.1641 68.1214C29.164 68.5336 30.236 68.7466 31.3189 68.7481C31.3268 68.7481 31.3347 68.7481 31.3426 68.7481V65.8185Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M31.3427 65.8186V68.7483C33.5289 68.7459 35.625 67.8839 37.1709 66.3516C38.7168 64.8193 39.5864 62.7417 39.5889 60.5747H36.6332C36.6316 61.965 36.0737 63.2979 35.0819 64.281C34.0901 65.2641 32.7453 65.8171 31.3427 65.8186Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M31.3427 49.469V52.3987C33.5289 52.3962 35.625 51.5343 37.1709 50.002C38.7168 48.4697 39.5864 46.3921 39.5889 44.2251H36.6332C36.6316 45.6154 36.0737 46.9483 35.0819 47.9314C34.0901 48.9145 32.7453 49.4675 31.3427 49.469Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M39.6426 49.469V52.3987C41.8289 52.3963 43.9249 51.5343 45.4708 50.002C47.0168 48.4697 47.8864 46.3921 47.8888 44.2251H44.9332C44.9316 45.6154 44.3737 46.9483 43.3818 47.9314C42.39 48.9145 41.0452 49.4675 39.6426 49.469Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M61.6683 56.4652H63.1919L63.5505 57.2646C63.7402 57.0913 63.951 56.9422 64.1779 56.8206C64.4142 56.7002 64.66 56.5991 64.913 56.5184C65.2258 56.4198 65.5526 56.3718 65.8809 56.3763C66.3876 56.3749 66.8888 56.4809 67.3508 56.6874C67.8146 56.8932 68.2321 57.1892 68.5785 57.5578C68.9391 57.9439 69.2247 58.3927 69.421 58.8815C69.8395 59.9563 69.8395 61.147 69.421 62.2219C69.2248 62.7107 68.9392 63.1595 68.5785 63.5456C68.2322 63.9143 67.8147 64.2103 67.3508 64.416C66.8888 64.6225 66.3876 64.7285 65.8809 64.7271C65.5745 64.7327 65.269 64.6908 64.9757 64.6028C64.7451 64.5306 64.5204 64.4415 64.3033 64.336C64.096 64.2234 63.9034 64.0862 63.7296 63.9274V67.481H61.6683V56.4652ZM65.6121 62.7726C65.8859 62.7791 66.1582 62.7287 66.4112 62.6247C66.6643 62.5207 66.8927 62.3653 67.0816 62.1687C67.4762 61.7661 67.6734 61.2271 67.6733 60.5518C67.6733 59.8767 67.4761 59.3377 67.0816 58.9348C66.8889 58.7435 66.66 58.5917 66.4081 58.4881C66.1561 58.3844 65.8861 58.331 65.6133 58.3308C65.3406 58.3306 65.0704 58.3837 64.8184 58.487C64.5663 58.5902 64.3372 58.7417 64.1442 58.9328L64.1421 58.9348C63.7475 59.3378 63.5503 59.8768 63.5504 60.5518C63.5505 61.2267 63.7478 61.7657 64.1421 62.1687C64.3311 62.3654 64.5595 62.5207 64.8127 62.6247C65.0658 62.7287 65.3381 62.7791 65.6121 62.7726H65.6121Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M74.6637 64.7267C74.2804 64.7307 73.9 64.6613 73.5433 64.5223C73.2097 64.3908 72.9097 64.1875 72.6651 63.9269C72.4152 63.6589 72.2203 63.3451 72.0915 63.0032C71.9486 62.6164 71.8787 62.2068 71.8854 61.7949V58.3303H70.6306V56.6423H71.1683C71.8253 56.6423 72.154 56.3165 72.1542 55.665V54.5103H73.9466V56.4647H75.7393V58.3303H73.9466V61.706C73.9342 61.8608 73.9558 62.0165 74.01 62.1622C74.0642 62.3079 74.1496 62.4402 74.2604 62.55C74.3712 62.6598 74.5047 62.7445 74.6517 62.7982C74.7987 62.8519 74.9558 62.8734 75.1119 62.8611C75.2073 62.8611 75.2849 62.8581 75.3448 62.8522C75.3991 62.8471 75.4531 62.8382 75.5062 62.8254C75.5558 62.813 75.604 62.7952 75.6496 62.7722V64.5488C75.557 64.5874 75.461 64.6171 75.3628 64.6378C75.1352 64.7002 74.8998 64.7301 74.6637 64.7267Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M78.5177 55.488C78.2402 55.4947 77.9689 55.4054 77.7506 55.2355C77.5322 55.0655 77.3804 54.8254 77.3213 54.5565C77.2621 54.2877 77.2993 54.0068 77.4264 53.7621C77.5535 53.5174 77.7626 53.3243 78.0178 53.2159C78.273 53.1075 78.5583 53.0905 78.8248 53.168C79.0912 53.2455 79.322 53.4125 79.4777 53.6404C79.6334 53.8682 79.7041 54.1427 79.6777 54.4167C79.6513 54.6907 79.5295 54.9469 79.3332 55.1415C79.2284 55.2514 79.1019 55.3389 78.9617 55.3984C78.8214 55.458 78.6703 55.4885 78.5177 55.488ZM77.4421 56.4652H79.5033V64.6382H77.4421L77.4421 56.4652Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M81.4751 56.4652H82.9987L83.3573 57.2646C83.5261 57.0975 83.7123 56.9487 83.9129 56.8206C84.1059 56.701 84.3099 56.5998 84.5222 56.5184C84.7796 56.4205 85.0534 56.3723 85.329 56.3763C85.6948 56.3679 86.0591 56.4251 86.4044 56.5452C86.6629 56.6378 86.9096 56.76 87.1395 56.9096C87.3447 57.0535 87.521 57.2342 87.6591 57.4425C87.8558 57.2368 88.0788 57.0577 88.3225 56.9096C88.5677 56.765 88.8257 56.6431 89.0933 56.5452C89.4088 56.4298 89.743 56.3725 90.0792 56.3763C90.9755 56.3763 91.6924 56.6606 92.2302 57.2292C92.768 57.7978 93.0369 58.6387 93.037 59.752V64.6382H90.9755V59.9299C91.0002 59.5019 90.8555 59.0812 90.5723 58.7572C90.4554 58.6234 90.3109 58.516 90.1486 58.4424C89.9862 58.3688 89.8097 58.3308 89.6312 58.3308C89.4526 58.3308 89.2762 58.3688 89.1138 58.4424C88.9514 58.516 88.8069 58.6234 88.6901 58.7572C88.4067 59.0811 88.2619 59.5018 88.2865 59.9299V64.6382H86.2253V59.9299C86.25 59.5019 86.1054 59.0812 85.8221 58.7572C85.7053 58.6234 85.5608 58.516 85.3984 58.4424C85.236 58.3688 85.0596 58.3308 84.881 58.3308C84.7025 58.3308 84.526 58.3688 84.3636 58.4424C84.2012 58.516 84.0567 58.6234 83.9399 58.7572C83.6564 59.0811 83.5116 59.5018 83.5363 59.9299V64.6382H81.4751V56.4652Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M95.995 55.4875C95.7175 55.4943 95.4462 55.405 95.2278 55.235C95.0095 55.065 94.8577 54.8249 94.7986 54.5561C94.7394 54.2872 94.7766 54.0063 94.9037 53.7616C95.0308 53.5169 95.2399 53.3238 95.4951 53.2154C95.7503 53.107 96.0356 53.09 96.302 53.1675C96.5685 53.245 96.7993 53.412 96.955 53.6399C97.1107 53.8678 97.1814 54.1423 97.155 54.4162C97.1287 54.6902 97.0068 54.9465 96.8105 55.1411C96.7057 55.251 96.5792 55.3384 96.439 55.398C96.2987 55.4576 96.1476 55.488 95.995 55.4875ZM94.9194 56.4648H96.9806V64.6378H94.9194L94.9194 56.4648Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M98.5038 62.9503L102.089 58.4198H98.5038V56.4653H104.688V58.1533L101.103 62.6838H104.867V64.6383H98.5038V62.9503Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M110.066 64.7273C109.52 64.7306 108.979 64.6184 108.48 64.3983C107.99 64.1839 107.546 63.8795 107.171 63.5011C106.792 63.1188 106.488 62.6701 106.275 62.1777C106.056 61.6631 105.943 61.1103 105.943 60.5519C105.943 59.9934 106.056 59.4406 106.275 58.926C106.488 58.4337 106.792 57.985 107.171 57.6026C107.546 57.2244 107.99 56.9198 108.48 56.7051C108.969 56.4929 109.497 56.3812 110.032 56.3766C110.566 56.3721 111.096 56.4748 111.59 56.6786C112.062 56.8762 112.489 57.1663 112.845 57.5315C113.212 57.9136 113.502 58.3631 113.696 58.8549C113.91 59.3952 114.016 59.9714 114.01 60.5518C114.01 60.6439 114.004 60.7359 113.992 60.8272C113.98 60.9161 113.968 61.002 113.956 61.0847C113.944 61.1796 113.932 61.2684 113.92 61.3512H108.184C108.273 61.7444 108.487 62.0992 108.793 62.3642C109.151 62.6527 109.605 62.7984 110.066 62.7728C110.299 62.7785 110.532 62.7485 110.756 62.6838C110.923 62.633 111.083 62.5613 111.231 62.4706C111.367 62.3829 111.488 62.2751 111.59 62.1509H113.741C113.621 62.4806 113.455 62.7917 113.248 63.0749C113.021 63.3882 112.749 63.6666 112.441 63.9011C112.113 64.15 111.751 64.3504 111.366 64.4962C110.951 64.6527 110.51 64.7311 110.066 64.7273ZM112.038 59.93C111.953 59.4732 111.709 59.0604 111.349 58.7632C110.988 58.466 110.535 58.3033 110.066 58.3033C109.597 58.3033 109.144 58.466 108.783 58.7632C108.423 59.0604 108.179 59.4732 108.094 59.93H112.038Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M115.533 53.4448H117.594V64.6382H115.533V53.4448Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M120.731 67.57C120.636 67.57 120.543 67.5667 120.454 67.5611C120.378 67.5566 120.304 67.5477 120.229 67.5344C120.156 67.525 120.084 67.5071 120.014 67.4811V65.7931C120.389 65.8173 120.76 65.7105 121.063 65.4913C121.311 65.2857 121.505 65.0235 121.628 64.7273L121.807 64.2829L118.67 56.4653H120.821L122.882 61.7955L124.765 56.4653H126.916C126.33 57.9576 125.798 59.3079 125.32 60.5161C125.117 61.0378 124.917 61.5471 124.72 62.0441C124.523 62.5416 124.346 62.9948 124.191 63.4035C124.036 63.8123 123.904 64.1528 123.796 64.425C123.689 64.6975 123.623 64.8574 123.599 64.9047C123.426 65.3288 123.226 65.7412 122.999 66.1395C122.828 66.4436 122.613 66.7218 122.363 66.9657C122.152 67.1683 121.902 67.3257 121.628 67.4279C121.339 67.5266 121.036 67.5748 120.731 67.57Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M54.0327 52.4014C52.3843 52.4014 50.8035 53.0504 49.6379 54.2057C48.4723 55.361 47.8175 56.928 47.8175 58.5618C47.8175 60.1956 48.4723 61.7626 49.6379 62.9179C50.8035 64.0732 52.3843 64.7222 54.0327 64.7222C55.6811 64.7222 57.2619 64.0732 58.4275 62.9179C59.5931 61.7626 60.2479 60.1956 60.2479 58.5618C60.2479 56.928 59.5931 55.361 58.4275 54.2057C57.262 53.0504 55.6811 52.4014 54.0327 52.4014H54.0327ZM54.0327 62.5862C53.2297 62.5955 52.4419 62.3685 51.769 61.9341C51.0961 61.4996 50.5683 60.8771 50.2523 60.1453C49.9363 59.4135 49.8464 58.6053 49.9939 57.8228C50.1413 57.0403 50.5196 56.3188 51.0807 55.7494C51.6419 55.18 52.3609 54.7884 53.1466 54.6239C53.9324 54.4595 54.7497 54.5298 55.4952 54.8258C56.2406 55.1218 56.8808 55.6303 57.3348 56.2869C57.7887 56.9435 58.036 57.7188 58.0454 58.5148C58.0456 58.5305 58.0457 58.5462 58.0457 58.5618C58.0519 59.623 57.6326 60.643 56.88 61.3977C56.1274 62.1524 55.1032 62.5799 54.0327 62.5862Z",fill:"#2D3232"})]}),p=(0,C.jsxs)("svg",{width:"150",height:"114",viewBox:"0 0 150 114",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,C.jsxs)("g",{clipPath:"url(#clip0_5101_171265)",children:[(0,C.jsx)("path",{d:"M71.6525 55.2718V69.5938H69.1661V58.355H69.1329L64.6904 69.5938H63.0328L58.4909 58.355H58.4577V69.5938H56.1702V55.2718H59.7507L63.8616 65.8807H63.9279L68.2709 55.2718H71.6525ZM73.708 56.3659C73.708 55.968 73.8406 55.6365 74.139 55.3713C74.4374 55.1061 74.7689 54.9735 75.1667 54.9735C75.5977 54.9735 75.9624 55.1061 76.2276 55.3713C76.4928 55.6365 76.6586 55.968 76.6586 56.3659C76.6586 56.7637 76.526 57.0952 76.2276 57.3605C75.9292 57.6257 75.5977 57.7583 75.1667 57.7583C74.7357 57.7583 74.4042 57.6257 74.139 57.3605C73.8738 57.0621 73.708 56.7305 73.708 56.3659ZM76.3934 59.3165V69.5938H73.9732V59.3165H76.3934ZM83.7201 67.8367C84.0848 67.8367 84.4826 67.7704 84.9136 67.5715C85.3446 67.4057 85.7425 67.1737 86.1071 66.9085V69.1628C85.7093 69.3949 85.2783 69.5607 84.781 69.6601C84.2837 69.7596 83.7533 69.8259 83.1565 69.8259C81.6315 69.8259 80.4049 69.3618 79.4766 68.4003C78.5151 67.4389 78.051 66.2122 78.051 64.7535C78.051 63.0959 78.5483 61.7366 79.5097 60.6757C80.4712 59.6148 81.8304 59.0844 83.6207 59.0844C84.0848 59.0844 84.549 59.1507 84.9799 59.2502C85.4441 59.3496 85.8088 59.5154 86.074 59.648V61.9687C85.7093 61.7035 85.3115 61.4714 84.9468 61.3388C84.549 61.2062 84.1511 61.1067 83.7533 61.1067C82.7919 61.1067 82.0293 61.4051 81.4326 62.035C80.8358 62.6649 80.5706 63.4937 80.5706 64.5546C80.5706 65.5823 80.869 66.4112 81.4326 66.9748C81.9962 67.5384 82.7587 67.8367 83.7201 67.8367ZM92.9698 59.1507C93.1687 59.1507 93.3344 59.1507 93.5002 59.1839C93.666 59.217 93.7986 59.2502 93.898 59.2833V61.7366C93.7654 61.6372 93.5997 61.5377 93.3344 61.4714C93.0692 61.4051 92.804 61.3388 92.4393 61.3388C91.8426 61.3388 91.3453 61.604 90.9474 62.1013C90.5496 62.5986 90.3175 63.3611 90.3175 64.422V69.5938H87.8974V59.3165H90.3175V60.941H90.3507C90.5828 60.3774 90.9143 59.9464 91.3453 59.6148C91.8094 59.3165 92.3399 59.1507 92.9698 59.1507ZM94.0307 64.6209C94.0307 62.9301 94.5279 61.5709 95.4562 60.5763C96.4177 59.5817 97.7438 59.0844 99.4346 59.0844C101.026 59.0844 102.286 59.5485 103.181 60.51C104.076 61.4714 104.54 62.7644 104.54 64.3888C104.54 66.0465 104.043 67.3726 103.115 68.3672C102.153 69.3618 100.86 69.8591 99.2025 69.8591C97.6112 69.8591 96.3513 69.3949 95.4231 68.4666C94.4948 67.5052 94.0307 66.2122 94.0307 64.6209ZM96.5503 64.5215C96.5503 65.5823 96.7823 66.4112 97.2796 66.9748C97.7769 67.5384 98.4731 67.8367 99.3683 67.8367C100.23 67.8367 100.926 67.5715 101.391 66.9748C101.855 66.4112 102.087 65.5823 102.087 64.4551C102.087 63.3611 101.855 62.5323 101.391 61.9355C100.926 61.3719 100.23 61.0736 99.4014 61.0736C98.5063 61.0736 97.8432 61.3719 97.3459 61.9687C96.7823 62.5986 96.5503 63.4274 96.5503 64.5215ZM108.154 62.035C108.154 62.3665 108.253 62.6649 108.485 62.8638C108.717 63.0627 109.181 63.2948 109.944 63.5932C110.905 63.991 111.602 64.422 111.966 64.8861C112.364 65.3834 112.563 65.947 112.563 66.6432C112.563 67.6047 112.198 68.3672 111.436 68.9639C110.707 69.5607 109.679 69.8259 108.419 69.8259C107.988 69.8259 107.524 69.7596 106.993 69.6601C106.463 69.5607 106.032 69.4281 105.667 69.2623V66.8753C106.098 67.1737 106.596 67.4389 107.093 67.6047C107.59 67.7704 108.054 67.8699 108.485 67.8699C109.016 67.8699 109.447 67.8036 109.679 67.6378C109.944 67.4721 110.077 67.24 110.077 66.8753C110.077 66.5438 109.944 66.2786 109.679 66.0133C109.414 65.7813 108.883 65.516 108.154 65.2177C107.259 64.853 106.629 64.422 106.264 63.9579C105.899 63.4937 105.7 62.897 105.7 62.1676C105.7 61.2393 106.065 60.4768 106.794 59.8801C107.524 59.2833 108.485 58.9849 109.646 58.9849C110.01 58.9849 110.408 59.0181 110.839 59.1176C111.27 59.217 111.668 59.3165 111.966 59.4159V61.7698C111.635 61.5709 111.27 61.3719 110.839 61.2062C110.408 61.0404 109.977 60.9741 109.579 60.9741C109.115 60.9741 108.75 61.0736 108.518 61.2393C108.286 61.4714 108.154 61.7035 108.154 62.035ZM113.591 64.6209C113.591 62.9301 114.088 61.5709 115.016 60.5763C115.978 59.5817 117.304 59.0844 118.995 59.0844C120.586 59.0844 121.846 59.5485 122.741 60.51C123.636 61.4714 124.1 62.7644 124.1 64.3888C124.1 66.0465 123.603 67.3726 122.675 68.3672C121.713 69.3618 120.42 69.8591 118.763 69.8591C117.171 69.8591 115.911 69.3949 114.983 68.4666C114.088 67.5052 113.591 66.2122 113.591 64.6209ZM116.11 64.5215C116.11 65.5823 116.342 66.4112 116.84 66.9748C117.337 67.5384 118.033 67.8367 118.928 67.8367C119.79 67.8367 120.487 67.5715 120.951 66.9748C121.415 66.4112 121.647 65.5823 121.647 64.4551C121.647 63.3611 121.415 62.5323 120.951 61.9355C120.487 61.3719 119.79 61.0736 118.962 61.0736C118.066 61.0736 117.403 61.3719 116.906 61.9687C116.376 62.5986 116.11 63.4274 116.11 64.5215ZM132.156 61.3056H128.543V69.5938H126.089V61.3056H124.365V59.3165H126.089V57.8909C126.089 56.83 126.454 55.9349 127.15 55.2387C127.846 54.5425 128.742 54.2109 129.836 54.2109C130.134 54.2109 130.399 54.2441 130.631 54.2441C130.863 54.2441 131.062 54.3104 131.228 54.3767V56.4653C131.162 56.4322 130.996 56.3659 130.797 56.2996C130.598 56.2333 130.366 56.2001 130.101 56.2001C129.604 56.2001 129.206 56.3659 128.941 56.6642C128.675 56.9626 128.543 57.4599 128.543 58.0567V59.2833H132.156V56.9626L134.577 56.2333V59.2833H137.03V61.2725H134.577V66.0796C134.577 66.7095 134.709 67.1405 134.908 67.4057C135.14 67.671 135.505 67.8036 136.002 67.8036C136.135 67.8036 136.3 67.7704 136.499 67.7041C136.698 67.6378 136.864 67.5715 136.997 67.4721V69.4612C136.831 69.5607 136.599 69.627 136.234 69.6933C135.869 69.7596 135.538 69.7927 135.173 69.7927C134.146 69.7927 133.383 69.5275 132.886 68.9971C132.388 68.4666 132.123 67.6378 132.123 66.5438L132.156 61.3056Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M36.4447 50.4976H25.1064V61.8358H36.4447V50.4976Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M48.9767 50.4976H37.6384V61.8358H48.9767V50.4976Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M36.4447 63.0298H25.1064V74.368H36.4447V63.0298Z",fill:"#2D3232"}),(0,C.jsx)("path",{d:"M48.9767 63.0298H37.6384V74.368H48.9767V63.0298Z",fill:"#2D3232"})]}),(0,C.jsx)("defs",{children:(0,C.jsx)("clipPath",{id:"clip0_5101_171265",children:(0,C.jsx)("rect",{width:"111.924",height:"23.87",fill:"white",transform:"translate(25.1061 50.4985)"})})})]}),f=(0,C.jsxs)("svg",{width:"150",height:"109",viewBox:"0 -2 150 109",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,C.jsx)("path",{d:"M29.5312 61.3664C28.4066 60.3196 27.7318 58.878 27.7318 57.2305C27.7318 55.583 28.3893 54.1414 29.462 53.0946C30.3963 52.1678 30.3963 50.7263 29.462 49.7995C28.5277 48.8728 27.0744 48.8728 26.1401 49.7995C24.2888 51.7045 23.095 54.3302 23.095 57.2305C23.095 60.1308 24.2888 62.7565 26.2093 64.6615C27.1436 65.5882 28.5969 65.5882 29.5312 64.6615C30.379 63.7347 30.379 62.2932 29.5312 61.3664Z",fill:"#8B8C8B"}),(0,C.jsx)("path",{d:"M29.5313 53.095C30.5867 51.9795 32.0574 51.3273 33.701 51.3273C35.3447 51.3273 36.8153 51.9795 37.8707 53.0435C38.805 53.9702 40.2583 53.9702 41.1926 53.0435C42.1269 52.1168 42.1269 50.6752 41.1926 49.7485C39.2722 47.9122 36.625 46.728 33.701 46.728C30.777 46.728 28.1299 47.9122 26.2094 49.8171C25.2751 50.7438 25.2751 52.1854 26.2094 53.1121C27.1437 53.9359 28.597 53.9359 29.5313 53.095Z",fill:"#696A69"}),(0,C.jsx)("path",{d:"M37.8707 61.3667C36.8153 62.4822 35.3447 63.1343 33.701 63.1343C32.0574 63.1343 30.5867 62.4822 29.5313 61.4182C28.597 60.4915 27.1437 60.4915 26.2094 61.4182C25.2751 62.3449 25.2751 63.7865 26.2094 64.7132C28.1299 66.5495 30.777 67.7337 33.701 67.7337C36.625 67.7337 39.2722 66.5495 41.1926 64.6446C42.1269 63.7178 42.1269 62.2763 41.1926 61.3495C40.2583 60.5258 38.805 60.5258 37.8707 61.3667Z",fill:"#5D5E5D"}),(0,C.jsx)("path",{d:"M27.8703 53.7468C29.1507 53.7468 30.1887 52.7172 30.1887 51.4471C30.1887 50.1771 29.1507 49.1475 27.8703 49.1475C26.5899 49.1475 25.5519 50.1771 25.5519 51.4471C25.5519 52.7172 26.5899 53.7468 27.8703 53.7468Z",fill:"#444544"}),(0,C.jsx)("path",{d:"M27.8703 65.3141C29.1507 65.3141 30.1887 64.2846 30.1887 63.0145C30.1887 61.7444 29.1507 60.7148 27.8703 60.7148C26.5899 60.7148 25.5519 61.7444 25.5519 63.0145C25.5519 64.2846 26.5899 65.3141 27.8703 65.3141Z",fill:"#444544"}),(0,C.jsx)("path",{d:"M51.6082 59.393C52.2657 58.861 52.4041 59.2042 52.9405 59.7191C53.2 59.9765 53.9959 60.5085 53.4768 60.9032C52.4214 61.7613 51.4871 62.156 50.103 62.156C47.0579 62.156 44.8606 59.8564 44.999 56.8874C45.0682 55.5145 45.5872 54.2617 46.66 53.4036C47.6461 52.6142 48.84 52.2195 50.103 52.2881C50.7604 52.2881 51.2968 52.4254 51.8851 52.6142C52.283 52.7515 52.6809 52.9403 53.0097 53.1977C53.6671 53.7297 53.3384 53.9871 52.8713 54.5191C52.7328 54.6564 52.6809 54.7765 52.5425 54.8452C52.283 55.1026 52.0754 55.3086 51.7466 55.034C51.0892 54.5706 50.1549 54.3132 49.359 54.502C46.7119 55.1541 46.833 59.822 50.0857 59.822C50.6047 59.925 51.2103 59.7362 51.6082 59.393ZM125.244 61.9672C124.777 61.9672 124.448 61.6412 124.448 61.1778V50.8465C124.448 50.3832 124.777 50.0571 125.244 50.0571H126.109C126.576 50.0571 126.905 50.3832 126.905 50.8465V61.1778C126.905 61.6412 126.576 61.9672 126.109 61.9672H125.244ZM120.677 60.7831C119.742 61.6412 118.825 62.1045 117.493 62.1045C114.777 62.1045 113.514 59.8735 113.514 57.4366V53.232C113.514 52.7686 113.842 52.4426 114.31 52.4426H115.175C115.642 52.4426 115.97 52.7686 115.97 53.232V57.4366C115.97 58.8095 116.697 59.8735 118.22 59.8735C119.673 59.8735 120.607 58.6207 120.607 57.3165V53.232C120.607 52.7686 120.936 52.4426 121.403 52.4426H122.268C122.735 52.4426 123.064 52.7686 123.064 53.232V61.1778C123.064 61.6412 122.735 61.9672 122.268 61.9672H121.542C121.074 61.9672 120.815 61.5725 120.746 61.1778L120.677 60.7831ZM110.33 52.4941H111.991C112.458 52.4941 112.787 52.8888 112.787 53.2835V53.8155C112.787 54.2789 112.458 54.6049 111.991 54.6049H110.33V61.1778C110.33 61.6412 110.001 61.9672 109.534 61.9672H108.669C108.202 61.9672 107.873 61.6412 107.873 61.1778V52.168C107.873 50.1944 108.998 48.6155 111.057 48.4268H112.32C112.787 48.4268 113.116 48.8215 113.116 49.2162V49.7482C113.116 50.2116 112.787 50.5376 112.32 50.5376H111.662C110.676 50.5376 110.278 51.2584 110.278 52.1851V52.5112H110.33V52.4941ZM104.292 52.4941H106.143C106.61 52.4941 106.939 52.8201 106.939 53.2835V53.8155C106.939 54.2789 106.61 54.6049 106.143 54.6049H104.292V58.6036C104.292 59.393 104.69 59.7877 105.486 59.7877H105.884C106.351 59.7877 106.679 60.1138 106.679 60.5772V61.1607C106.679 61.624 106.351 61.9501 105.884 61.9501H104.759C102.769 61.8128 101.904 60.5772 101.904 58.6036V50.8465C101.904 50.3832 102.233 50.0571 102.7 50.0571H103.565C104.032 50.0571 104.361 50.3832 104.361 50.8465V52.4941H104.292ZM77.7165 52.4941H79.5677C80.0349 52.4941 80.3636 52.8201 80.3636 53.2835V53.8155C80.3636 54.2789 80.0349 54.6049 79.5677 54.6049H77.7165V58.6036C77.7165 59.393 78.1144 59.8564 78.9103 59.8564H79.3082C79.7754 59.8564 80.1041 60.1824 80.1041 60.6458V61.1778C80.1041 61.6412 79.7754 61.9672 79.3082 61.9672H78.7719C76.5919 61.9672 75.3288 61.0405 75.3288 58.6207V50.8637C75.3288 50.4003 75.6576 50.0743 76.1247 50.0743H76.9898C77.4569 50.0743 77.7857 50.4003 77.7857 50.8637V52.5112C77.7857 52.4941 77.7165 52.4941 77.7165 52.4941ZM66.9202 53.6096C67.7853 52.7515 68.7715 52.2881 69.9653 52.2881C72.6817 52.2881 74.0831 54.4505 74.0831 56.9561V61.1778C74.0831 61.6412 73.7544 61.9672 73.2872 61.9672H72.4221C71.955 61.9672 71.6263 61.6412 71.6263 61.1778V56.9732C71.6263 55.6003 70.8996 54.5363 69.377 54.5363C67.9237 54.5363 66.9894 55.7204 66.9894 57.0934V61.1778C66.9894 61.6412 66.6607 61.9672 66.1935 61.9672H65.3285C64.8613 61.9672 64.5326 61.6412 64.5326 61.1778V53.2148C64.5326 52.7515 64.8613 52.4254 65.3285 52.4254H66.0551C66.5223 52.4254 66.7818 52.8201 66.851 53.2148L66.9202 53.6096ZM93.5648 53.6096C94.4299 52.7515 95.4161 52.2881 96.6099 52.2881C99.3263 52.2881 100.728 54.4505 100.728 56.9561V61.1778C100.728 61.6412 100.399 61.9672 99.9318 61.9672H99.0667C98.5996 61.9672 98.2709 61.6412 98.2709 61.1778V56.9732C98.2709 55.6003 97.5442 54.5363 96.0216 54.5363C94.5683 54.5363 93.634 55.7204 93.634 57.0934V61.1778C93.634 61.6412 93.3053 61.9672 92.8381 61.9672H91.973C91.5059 61.9672 91.1772 61.6412 91.1772 61.1778V53.2148C91.1772 52.7515 91.5059 52.4254 91.973 52.4254H92.6997C93.1669 52.4254 93.4264 52.8201 93.4956 53.2148L93.5648 53.6096ZM58.7538 52.2366C55.8298 52.2366 53.7882 54.3475 53.7882 57.2306C53.7882 60.1138 55.8471 62.2247 58.7538 62.2247C61.7297 62.2247 63.7886 60.1824 63.7886 57.2306C63.7886 54.3303 61.6778 52.2366 58.7538 52.2366ZM83.0281 58.0887C83.2184 59.4102 84.5506 59.9937 85.8136 59.9937C86.4019 59.9937 87.0767 59.8564 87.5957 59.5989C87.6649 59.5303 87.786 59.5303 87.8552 59.4617C88.184 59.2729 88.4435 59.2042 88.7203 59.4617L89.1875 59.925L89.5854 60.3197C89.9833 60.8517 89.7238 60.9719 89.2567 61.2465C88.2705 61.8986 87.0075 62.2247 85.8136 62.2247C82.6301 62.2247 80.502 60.3197 80.502 57.162C80.502 54.1416 82.6301 52.168 85.606 52.168C88.7203 52.168 90.4505 53.9356 90.5197 57.0419C90.5197 57.9 90.5889 58.1574 89.7238 58.1574H83.0281V58.0887ZM58.7538 54.4676C60.2764 54.4676 61.2799 55.7891 61.2799 57.2306C61.2799 58.7409 60.3456 59.925 58.7538 59.925C57.1621 59.925 56.2278 58.7409 56.2278 57.2306C56.2278 55.7204 57.2313 54.4676 58.7538 54.4676ZM83.08 56.0465H88.0456C87.8552 54.7937 86.8517 54.3303 85.6579 54.3303C84.4122 54.3303 83.426 54.931 83.08 56.0465Z",fill:"#2D3232"})]}),O=(0,C.jsxs)("svg",{width:"150",height:"114",viewBox:"0 9 150 114",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,C.jsx)("g",{clipPath:"url(#clip0_5101_171281)",children:(0,C.jsx)("path",{d:"M65.4453 55.6619L55.3223 79.5017H48.1425L38.0638 55.6619H45.2437L51.8881 71.8801L58.7558 55.6619H65.4453ZM81.2753 79.8562C78.7482 79.8562 76.4812 79.3319 74.4742 78.2832C72.528 77.2902 70.899 75.7778 69.7699 73.9158C68.6404 72.0555 68.0756 69.9438 68.0756 67.5806C68.0756 65.2174 68.6407 63.1054 69.7709 61.2447C70.9003 59.3834 72.5293 57.8717 74.4753 56.8793C76.482 55.8304 78.749 55.3061 81.2763 55.3063C83.8037 55.3066 86.0631 55.8309 88.0547 56.8793C89.9916 57.8766 91.6124 59.3876 92.7375 61.2447C93.8672 63.1057 94.4321 65.2178 94.4321 67.5813C94.4321 69.9447 93.8672 72.057 92.7375 73.9182C91.6128 75.776 89.9921 77.2877 88.0551 78.2856C86.063 79.3327 83.8034 79.8562 81.2763 79.8562H81.2753ZM81.2753 74.1843C83.0591 74.1843 84.5233 73.5861 85.6679 72.3896C86.8125 71.1931 87.3848 69.5904 87.3848 67.5816C87.3848 65.5726 86.8125 63.9697 85.6679 62.773C84.5233 61.5763 83.0591 60.9783 81.2753 60.9793C79.4915 60.9793 78.0199 61.5775 76.8604 62.774C75.7009 63.9705 75.1212 65.5734 75.1212 67.5826C75.1212 69.5917 75.7009 71.1943 76.8604 72.3906C78.0199 73.5869 79.4919 74.1848 81.2763 74.1843H81.2753ZM101.298 55.6619H108.255V79.5017H101.299L101.298 55.6619ZM104.777 52.3385C103.499 52.3385 102.458 51.9692 101.655 51.2306C101.267 50.8858 100.959 50.4618 100.752 49.9877C100.544 49.5136 100.442 49.0005 100.452 48.4836C100.442 47.9665 100.544 47.4533 100.752 46.9791C100.96 46.505 101.268 46.081 101.656 45.7362C102.459 44.9973 103.5 44.6279 104.778 44.6279C106.056 44.6279 107.097 44.9824 107.9 45.6915C108.285 46.0187 108.594 46.4269 108.802 46.8866C109.01 47.3463 109.113 47.8461 109.104 48.3502C109.118 48.8842 109.019 49.4153 108.811 49.9081C108.604 50.4009 108.293 50.8442 107.9 51.2084C107.097 51.9623 106.056 52.3392 104.778 52.3392L104.777 52.3385ZM119.583 79.8562C119.012 79.8692 118.445 79.7658 117.915 79.5524C117.386 79.3391 116.907 79.0202 116.506 78.6156C116.096 78.2106 115.773 77.7265 115.558 77.1931C115.344 76.6596 115.241 76.0881 115.257 75.5136C115.257 74.2437 115.673 73.2171 116.505 72.4339C117.349 71.6779 118.446 71.2595 119.582 71.2595C120.719 71.2595 121.815 71.6779 122.659 72.4339C123.493 73.2166 123.91 74.2432 123.91 75.5136C123.926 76.088 123.823 76.6595 123.609 77.1929C123.394 77.7264 123.071 78.2106 122.661 78.6156C122.261 79.0201 121.782 79.3388 121.253 79.5522C120.724 79.7656 120.156 79.869 119.585 79.8562H119.583Z",fill:"#2D3232"})}),(0,C.jsx)("defs",{children:(0,C.jsx)("clipPath",{id:"clip0_5101_171281",children:(0,C.jsx)("rect",{width:"85.8461",height:"35.2293",fill:"white",transform:"translate(38.0638 44.6279)"})})})]}),L=(0,C.jsx)("svg",{width:"900",height:"79",viewBox:"0 0 900 79",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,C.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M899.58 79H1.35265e-09L125.436 6.53992C132.846 2.25562 141.253 0 149.811 0C158.369 0 166.776 2.25562 174.186 6.53992L275.431 65.0309C282.841 69.3152 291.248 71.5708 299.806 71.5708C308.364 71.5708 316.771 69.3152 324.181 65.0309L425.441 6.53992C432.851 2.25562 441.258 0 449.816 0C458.374 0 466.781 2.25562 474.191 6.53992L575.436 65.0309C582.846 69.3152 591.253 71.5708 599.811 71.5708C608.369 71.5708 616.776 69.3152 624.186 65.0309L725.431 6.53992C732.841 2.25562 741.248 0 749.806 0C758.364 0 766.771 2.25562 774.181 6.53992L899.58 79Z",fill:"#F7F7F7"})}),P=[c,o,l,p,f,O],N=["Trial_enterprise_expiration_key_feature_dam","Trial_enterprise_expiration_key_feature_brandportal","Trial_enterprise_expiration_key_feature_templates","Trial_enterprise_expiration_key_feature_analytics","Trial_enterprise_expiration_key_feature_hosting","Trial_enterprise_expiration_key_feature_security","Trial_enterprise_expiration_key_feature_sso","Trial_enterprise_expiration_key_feature_user_management","Trial_enterprise_expiration_key_feature_email_whitelabeling","Trial_enterprise_expiration_key_feature_onboarding"],S=()=>{const{t:I}=(0,w.Bd)("translation",{i18n:u.Ay});return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(y.D,{as:"h2",size:"xx-large",children:I("Trial_enterprise_expiration_right_heading")}),(0,C.jsx)("ul",{className:"tw-my-4 tw-flex tw-flex-wrap",children:N.map(F=>(0,C.jsxs)("li",{className:"tw-flex tw-items-center tw-mb-3 tw-w-1/2 md:tw-w-full",children:[(0,C.jsx)("span",{className:"tw-text-violet-60 tw-mr-3",children:(0,C.jsx)(g.default,{})}),(0,C.jsx)(m.E,{size:"medium",children:I(F)})]},F))})]})},R=()=>{const{t:I}=(0,w.Bd)("translation",{i18n:u.Ay});return(0,C.jsxs)("div",{className:"tw-full",children:[(0,C.jsxs)("div",{className:"tw-relative tw-flex tw-h-[75px] tw-items-end tw-justify-center -tw-mt-2",children:[(0,C.jsx)("div",{className:"tw-relative tw-z-[1]",children:(0,C.jsxs)("p",{className:"tw-text-s md:tw-text-l tw-text-center tw-text-text tw-mb-2 tw-px-4",children:[I("Trial_enterprise_expiration_footer_slogan"),":"]})}),(0,C.jsx)("div",{className:"tw-absolute tw-z-[0] tw-bottom-0",children:L})]}),(0,C.jsx)("div",{className:"tw-full tw-flex tw-bg-black-5 tw-h-[108px]",children:P.map((F,te)=>(0,C.jsx)("div",{className:"tw-flex tw-w-1/6 tw-items-center",children:F},te))})]})},U=({children:I,isOpen:F,mainTitle:te,introText:fe})=>{const[Ie,de]=(0,s.useState)(F);return(0,s.useEffect)(()=>{de(F)},[F]),(0,C.jsxs)(T.a,{visual:{},isDismissable:!0,shouldCloseOnInteractOutside:()=>!0,onClose:()=>de(!1),isOpen:Ie,zIndex:150,width:E.CJ.Default,children:[(0,C.jsx)("div",{className:"tw-px-14 tw-pt-14",children:(0,C.jsxs)("div",{className:"tw-flex tw-flex-col-reverse md:tw-flex-row",children:[(0,C.jsxs)("div",{className:"tw-basis-7/12 tw-pr-10",children:[(0,C.jsx)(y.D,{as:"h1",size:"xx-large",children:te}),(0,C.jsxs)("div",{className:"tw-flex tw-flex-col tw-min-w-[405px] tw-mt-6",children:[(0,C.jsx)("div",{className:"tw-leading-5 tw-mb-6",children:(0,C.jsx)(m.E,{size:"medium",children:fe})}),I]})]}),(0,C.jsx)("div",{className:"tw-basis-5/12",children:(0,C.jsx)(S,{})})]})}),(0,C.jsx)(R,{})]})},B=()=>{const I=document.createElement("div"),F={isOpen:()=>!0,mainTitle:window.translate("Trial_enterprise_expiration_trial_expired_title"),introText:window.translate("Trial_enterprise_expiration_trial_expired_intro"),children:(0,s.createElement)(t(),{formId:"97b5cf9d-bc3b-453e-a13c-9d7914406c9f",portalId:"2035494",region:"na1"})};(0,_.Cc)(U,I,F)},M=()=>{const I=document.createElement("div"),F={isOpen:()=>!0,mainTitle:window.translate("Trial_enterprise_expiration_talk_to_sales_title"),introText:window.translate("Trial_enterprise_expiration_talk_to_sales_intro"),children:(0,s.createElement)(t(),{formId:"97b5cf9d-bc3b-453e-a13c-9d7914406c9f",portalId:"2035494",region:"na1"})};(0,_.Cc)(U,I,F)}},151:function(ve,$,r){"use strict";r.d($,{s:function(){return ie}});var s=r(86070),b=r(77345),t=r(23245),_=r(14154),C=r(81178),y=r(13833);const g=(0,_.I)(()=>{var ee,pe,je;return(0,s.jsxs)("div",{className:"mod mod-c-trial cm-trial__modal",children:[(0,s.jsx)(y.X,{}),(0,s.jsxs)("div",{className:"cm-trial__modal-header",children:[(0,s.jsx)("svg",{className:"cm-trial__modal-hearts",xmlns:"http://www.w3.org/2000/svg",width:"124",height:"63",viewBox:"0 0 124 63",children:(0,s.jsxs)("g",{fill:"none",children:[(0,s.jsx)("path",{fill:"#F16651",d:"M45.6295545,18.1654118 C45.05453,18.3711896 44.4347982,18.3446905 43.8819988,18.091422 L34.263919,13.6843261 C32.9577699,13.0859057 31.9664838,12.0230264 31.4735982,10.6915712 C30.3319143,7.60748634 32.2354259,4.76524813 34.6530427,3.90008176 C36.0513264,3.39969311 37.494872,3.45798805 38.8275898,4.06858099 L40.731962,4.94108099 L41.6203865,3.06915304 C42.2421237,1.75914046 43.3098326,0.802169978 44.7081163,0.301781323 C47.1263615,-0.563609933 50.4422901,0.411503018 51.5837454,3.49497033 C52.076631,4.82642548 52.0121344,6.26712641 51.4027919,7.55102298 L46.9154889,17.0058598 C46.6586261,17.5481739 46.2018367,17.959916 45.6295545,18.1654118 Z"}),(0,s.jsx)("path",{fill:"#60C7D7",d:"M108.069429,52.6646871 C107.353498,52.5021764 106.74704,52.0770118 106.358818,51.4665225 L99.6045228,40.8441862 C98.6872336,39.4017277 98.3959456,37.6940021 98.7851964,36.0362802 C99.6868283,32.1964548 103.494175,30.5581948 106.504217,31.2414501 C108.245144,31.6366264 109.66005,32.6235115 110.595998,34.0953113 L111.933411,36.1984233 L114.073157,34.8845981 C115.570594,33.9651571 117.282313,33.6879907 119.02324,34.083167 C122.034064,34.7665999 124.724692,37.8806574 123.823241,41.7197139 C123.43399,43.3774359 122.410781,44.7867812 120.943196,45.6878926 L110.13565,52.323833 C109.516272,52.7047952 108.782412,52.8257185 108.069429,52.6646871 Z"}),(0,s.jsx)("path",{fill:"#FBB116",d:"M10.4190768,62.2477494 C9.99837358,62.390177 9.548163,62.3631718 9.14953747,62.1721323 L2.21391311,58.847889 C1.27204443,58.3965026 0.565074356,57.6113683 0.223910783,56.637193 C-0.566335453,54.380685 0.854192463,52.3380378 2.62298511,51.7392195 C3.6460066,51.3928793 4.69472947,51.4532892 5.6557569,51.9138573 L7.02900638,52.571981 L7.69904116,51.2221108 C8.16794488,50.2774447 8.95652261,49.5950234 9.9795441,49.2486832 C11.7487965,48.6497092 14.1469408,49.4000643 14.9370287,51.6561205 C15.2781923,52.6302957 15.2127237,53.6769363 14.7531679,54.6027699 L11.3689194,61.4207686 C11.1751836,61.8118444 10.8377826,62.1054927 10.4190768,62.2477494 Z"})]})}),(0,s.jsx)("div",{className:"cm-trial__modal-avatar",children:(0,s.jsx)(t.p,{imageUrl:(ee=(0,C.vD)())==null?void 0:ee.preview_url_without_placeholder,gravatarHash:(pe=(0,C.vD)())==null?void 0:pe.gravatar_hash,name:(je=(0,C.vD)())==null?void 0:je.name,size:b.Z.SIZE_80})})]}),(0,s.jsxs)("div",{className:"cm-trial__modal-content",children:[(0,s.jsx)("h2",{className:"cm-modal__title",children:window.translate("Legacy_trial_expired_title")}),(0,s.jsx)("p",{className:"cm-modal__text",children:window.translate("Legacy_trial_expired_text")}),(0,s.jsx)("div",{className:"cm-btn-bar cm-btn-bar--centered cm-btn-bar--section",children:(0,s.jsx)("button",{className:"cm-btn cm-btn--primary js-cm-trial__upgrade",children:window.translate("Legacy_payment_manage_plan")})})]})]})});var m=r(50427),T=r(18216),E=r(9786),w=r(91463),u=r(41011);const c=({onClick:ee})=>(0,s.jsx)(E.$,{hideLabel:!0,icon:(0,s.jsx)(w.default,{}),onClick:ee,rounding:u.te.Medium,size:u.Mp.Small,style:u.in.Loud,type:u.VQ.Button,children:"Show Checklist"});var o=r(92585),l=r(45935),p=r(48459),f=r(6804),O=r(55111),L=r(41594),P=r(31415),N=r(33446),S=r(11924),R=r(68354),U=r(52471),B=r(3392),M=r(8406),I=r(90173);const F=({children:ee})=>(0,s.jsx)("ul",{className:"tw-pt-2",children:ee}),te=({as:ee="a",icon:pe,label:je,url:Be,onClick:Ne})=>(0,s.jsxs)(ee,{href:Be,onClick:Ne,className:"tw-flex tw-my-2 tw-items-center tw-text-text-weak hover:tw-text-text tw-cursor-pointer",children:[(0,s.jsx)("span",{className:"tw-pr-3",children:pe}),(0,s.jsx)("span",{className:"tw-font-body tw-font-regular tw-text-body-medium",children:je})]}),fe=({currentUser:ee,onOpenChat:pe})=>{const{t:je}=(0,P.Bd)("translation",{i18n:N.Ay}),Be=(0,C.$5)()==="de"?"de":"en";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(l.D,{as:"h2",size:"x-large",children:je("HelpCenterFlyoutContent_heading_contact")}),(0,s.jsxs)(F,{children:[(0,s.jsx)(te,{icon:(0,s.jsx)(S.default,{}),label:je("HelpCenterFlyoutContent_link_contact_sales"),url:`https://www.frontify.com/${Be}/consultation?email=${ee.emailAddress}&firstname=${ee.firstName}&lastname=${ee.lastName}`}),(0,s.jsx)(te,{as:"span",icon:(0,s.jsx)(R.default,{}),label:je("HelpCenterFlyoutContent_link_contact_via_chat"),onClick:()=>pe()})]})]}),(0,s.jsxs)("div",{className:"tw-pt-7",children:[(0,s.jsx)(l.D,{as:"h2",size:"x-large",children:je("HelpCenterFlyoutContent_heading_ressources")}),(0,s.jsxs)(F,{children:[(0,s.jsx)(te,{icon:(0,s.jsx)(U.default,{}),label:je("HelpCenterFlyoutContent_link_academy"),url:"https://frontify-academy.sana.ai/group-invite/e-bJW__OdS4cWEBFxCKux"}),(0,s.jsx)(te,{icon:(0,s.jsx)(B.default,{}),label:je("HelpCenterFlyoutContent_link_knowledge_base"),url:"https://help.frontify.com"}),(0,s.jsx)(te,{icon:(0,s.jsx)(M.default,{}),label:je("HelpCenterFlyoutContent_link_brand_examples"),url:"https://www.frontify.com/brand-platform-examples"}),(0,s.jsx)(te,{icon:(0,s.jsx)(I.default,{}),label:je("HelpCenterFlyoutContent_link_dev_platform"),url:"https://developer.frontify.com"})]})]})]})},Ie=({currentUser:ee,onOpenChat:pe})=>{const[je,Be]=(0,L.useState)(!1),{t:Ne}=(0,P.Bd)("translation",{i18n:N.Ay});return(0,s.jsx)(o.mj,{fixedHeader:(0,s.jsxs)("div",{className:"tw-bg-white",children:[(0,s.jsxs)("div",{className:"tw-px-6 tw-pt-6",children:[(0,s.jsx)(l.D,{as:"h1",size:"xx-large",children:Ne("HelpCenterFlyout_heading")}),(0,s.jsx)("div",{className:"tw-pt-3 tw-max-w-[22rem]",children:(0,s.jsx)(p.E,{as:"p",size:"medium",color:"x-weak",children:Ne("HelpCenterFlyout_greeting",{name:ee.firstName})})})]}),(0,s.jsx)(f.cG,{height:"48px",color:"rgb(234, 235, 235)"})]}),trigger:(0,s.jsx)(E.$,{icon:(0,s.jsx)(O.default,{}),size:u.Mp.Small,style:u.in.Default,emphasis:u.jG.Default,onClick:()=>Be(!je),children:Ne("HelpCenterFlyout_trigger")}),isOpen:je,onOpenChange:()=>Be(!1),placement:o.FM.Bottom,legacyFooter:!1,hug:!1,children:(0,s.jsx)("div",{className:"tw-px-6 tw-pb-6",children:(0,s.jsx)(fe,{currentUser:ee,onOpenChat:pe})})})};var de=r(82110),q=r(40402),re=r(5181);const me=class pp extends T.j{constructor(pe,je,Be){super(pe,je,Be),this.sandbox.subscribe("events",this),this.isModal=this.$ctx.hasClass("cm-trial__modal")}on(pe){this.$ctx.find(".js-cm-trial__upgrade").on("click",je=>{je.preventDefault(),je.stopPropagation(),this.fire("openPayment",["events"])}),this.renderEnterpriseTrial(),pe()}after(){if((0,C.wR)()&&this.account.isTrialExpired()&&!(0,de.E0)()&&!this.isModal){if((0,de.HH)()===pp.PLAN_ENTERPRISE_TRIAL){(0,q.S)();return}const pe=re((0,m.EY)(g));this.fire("openModal",{id:"payment",modifier:"default",$content:pe},["events"])}}openIntercomChecklist(){window.Intercom("startChecklist",29839473)}openIntercomChat(){window.Intercom("showNewMessage")}getUser(){let pe="",je="",Be="";const Ne=(0,C.vD)();if(Ne!=null&&Ne.email&&(pe=Ne.email),Ne!=null&&Ne.name){const ce=Ne.name.split(" ");je=ce.length>=2?ce[0]:Ne.name,Be=ce.length>=2?ce[1]:Ne.name}return{emailAddress:pe,firstName:je,lastName:Be}}renderEnterpriseTrial(){const pe=document.querySelector(".js-cm-banner__children-slot");if(!pe||(0,de.HH)()!==pp.PLAN_ENTERPRISE_TRIAL)return;const je=document.createElement("div");je.classList.add("cm-banner__children-item");const Be=document.createElement("div");Be.classList.add("cm-banner__children-item");const{emailAddress:Ne,firstName:ce,lastName:se}=this.getUser();(0,m.Cc)(Ie,je,{onOpenChat:()=>this.openIntercomChat(),currentUser:{emailAddress:Ne,firstName:ce,lastName:se}}),(0,m.Cc)(c,Be,{onClick:this.openIntercomChecklist}),pe.replaceChildren(je,Be),pe.classList.remove("cm-banner__children-slot--hidden")}};me.PLAN_ENTERPRISE_TRIAL="enterprise_trial";let ie=me},58338:function(ve,$,r){"use strict";r.d($,{A:function(){return m}});var s=r(86070),b=r(14154),t=r(82110),_=r(81178),C=r(44084),y=r(51297),g=r(151);const m=(0,b.I)(T=>{let E,w,u=[],c=!1,o;const l=(0,t.z)();return!(0,t.kA)()&&!(0,t.PJ)()&&l!==null&&((0,_.wR)()&&T.utils.account.getTrialPlan()!=="FREE"&&!T.utils.account.isExpired()?(o="calendar",l>0?w=T.tpl.translate(window.translate("Legacy_payment_trial_expires_in_x_days"),[`${l}`]):w=window.translate("Legacy_payment_trial_expires_today")):(E='<svg class="cm-banner__image" width="24px" height="26px" viewBox="0 0 156.42 150" id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg"> <defs><style>.cls-1{fill:#2d3232;}</style></defs><path class="cls-1" d="M150.75,99.59l-16.87-9.74a4.9,4.9,0,0,1-2.45-4.23V66.14a11.36,11.36,0,0,0-5.68-9.83l-16.87-9.74a4.92,4.92,0,0,1-2.44-4.24V22.85A11.39,11.39,0,0,0,100.76,13L78.21,0,55.66,13A11.39,11.39,0,0,0,50,22.85V42.33a4.92,4.92,0,0,1-2.44,4.24L30.67,56.31A11.38,11.38,0,0,0,25,66.14V85.62a4.89,4.89,0,0,1-2.44,4.23L5.68,99.59A11.41,11.41,0,0,0,0,109.43v26l22.55,13a11.34,11.34,0,0,0,11.35,0l16.87-9.74a4.91,4.91,0,0,1,4.89,0l16.87,9.74a11.37,11.37,0,0,0,11.36,0l16.87-9.74a4.91,4.91,0,0,1,4.89,0l16.87,9.74a11.34,11.34,0,0,0,11.35,0l22.55-13v-26A11.4,11.4,0,0,0,150.75,99.59ZM100,22.85V42.33a11.39,11.39,0,0,0,5.68,9.83l16.87,9.74A4.91,4.91,0,0,1,125,66.14V85.62a11.38,11.38,0,0,0,5.67,9.83l16.87,9.74a4.9,4.9,0,0,1,2.45,4.24V128L81.44,88.44V9.33l16.09,9.29A4.89,4.89,0,0,1,100,22.85ZM8.91,105.19l16.87-9.74a11.39,11.39,0,0,0,5.68-9.83V66.14A4.9,4.9,0,0,1,33.9,61.9l16.87-9.74a11.39,11.39,0,0,0,5.68-9.83V22.85a4.91,4.91,0,0,1,2.44-4.23L75,9.33V88.44L6.47,128V109.43A4.9,4.9,0,0,1,8.91,105.19Zm121.73,37.7a4.91,4.91,0,0,1-4.89,0l-16.87-9.74a11.34,11.34,0,0,0-11.35,0l-16.87,9.74a4.91,4.91,0,0,1-4.89,0L58.9,133.15a11.36,11.36,0,0,0-11.36,0l-16.87,9.74a4.91,4.91,0,0,1-4.89,0L9.7,133.6,78.21,94l68.51,39.56Z"/> </svg> ',w="Made with Frontify"),(0,_.wR)()&&T.utils.account.getTrialPlan()===g.s.PLAN_ENTERPRISE_TRIAL?(u=[],c=!0):(0,_.wR)()?u=[{modifier:"cm-trial__upgrade js-cm-trial__upgrade",text:window.translate("Legacy_trial_btn_upgrade")}]:u=[{url:"https://frontify.com/en",text:window.translate("Legacy_trial_btn_visit")}]),!(0,t.kA)()&&!(0,t.PJ)()&&(0,t.z)()!==null?(0,s.jsx)("div",{className:"mod mod-c-trial cm-trial",children:(0,s.jsx)(y.c,{type:C.w.TYPE_INFORMATION,horizontalAlignment:C.w.HORIZONTAL_ALIGNMENT_CENTER,imageHtml:E,icon:o,message:w,actions:u,hasChildrenSlot:c})}):null})},55454:function(ve,$,r){"use strict";r.d($,{P:function(){return L}});var s=r(86070),b=r(14154);const t=(0,b.I)(P=>(0,s.jsx)("div",{className:"cm-user-listing__search",children:(0,s.jsx)("input",{className:"cm-user-listing__search-field js-cm-user-listing__search-field",type:"text",placeholder:P.searchFieldPlaceholder})}));var _=Object.defineProperty,C=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,m=(P,N,S)=>N in P?_(P,N,{enumerable:!0,configurable:!0,writable:!0,value:S}):P[N]=S,T=(P,N)=>{for(var S in N||(N={}))y.call(N,S)&&m(P,S,N[S]);if(C)for(var S of C(N))g.call(N,S)&&m(P,S,N[S]);return P};const E=(0,b.I)(P=>(0,s.jsx)("div",T({className:"mod mod-c-user-listing-entry cm-user-listing-entry"},P.tpl.renderDataAttributesAsObject(P)))),w=(0,b.I)(P=>(0,s.jsx)("div",{className:"cm-user-listing__user js-cm-user-listing__user","data-user-id":P.id,children:(0,s.jsx)(E,{name:P.name,email:P.email,imageUrl:P.imageUrl,gravatarHash:P.gravatarHash,isSelected:P.isSelected})})),u=(0,b.I)(P=>(0,s.jsx)("div",{className:`cm-user-listing__users js-cm-user-listing__users ${`cm-user-listing__users--fixed-height-${P.fixedHeight}`}`,children:(0,s.jsx)("div",{className:"cm-user-listing__no-users-message js-cm-user-listing__no-users-message",children:window.translate("Legacy_userlist_no_results_message")})}));var c=r(77007),o=r(29835),l=r(50427),p=r(18216),f=r(27712),O=r(5181);class L extends p.j{static get DEFAULT_SEARCH_INPUT_TIMEOUT(){return 250}static get FIXED_HEIGHT_NONE(){return 0}static get FIXED_HEIGHT_MEDIUM(){return 5}static get FIXED_HEIGHT_LARGE(){return 10}static get FIXED_HEIGHTS(){return[this.FIXED_HEIGHT_NONE,this.FIXED_HEIGHT_MEDIUM,this.FIXED_HEIGHT_LARGE]}static get LIST_ENTRY_HEIGHT(){return 48}static get DEFAULT_REMAINING_ENTRIES_BEFORE_NOTIFYING(){return 5}on(N){this.tpl.bindDataAttributes(this,{focusSearchField:{type:Boolean,default:!0},users:{type:Object,changed:()=>this.updateUsers()},fixedHeight:{type:Number,default:L.FIXED_HEIGHT_NONE,allowed:L.FIXED_HEIGHTS},showSearch:{type:Boolean},showNoUsersMessage:{type:Boolean,default:!1},searchInputTimeout:{type:Number,default:L.DEFAULT_SEARCH_INPUT_TIMEOUT},translations:{type:Object},remainingEntriesBeforeNotifying:{type:Number,default:L.DEFAULT_REMAINING_ENTRIES_BEFORE_NOTIFYING}}),this.searchFieldTimeout=null,this.diffArray=new f.S("id"),this.renderSearch(),this.renderUsers(),this.bindSearch(),this.bindScroll(),N()}renderSearch(){if(!this.showSearch)return;const N=O((0,l.EY)(t,{searchFieldPlaceholder:this.translations.searchFieldPlaceholder}));this.$ctx.append(N),this.sandbox.addModules(N)}renderUsers(){this.$users=O((0,l.EY)(u,{fixedHeight:this.fixedHeight})),this.$ctx.append(this.$users),this.updateUsers()}renderUser({id:N,name:S,email:R,imageUrl:U,gravatarHash:B,isSelected:M}){return(0,l.EY)(w,{id:N,name:S,email:R,imageUrl:U,gravatarHash:B,isSelected:M})}moveUserAfterUserId(N,S){const R=this.getUserByIdentifier(N.id);this.getUserByIdentifier(S).after(R),this.updateUser(N)}updateUser(N){var S,R,U,B;const M=this.getUserByIdentifier(N.id),I=o.u.getFirstChildModule(M);I.$ctx.dataAsString("name",(S=N.name)!=null?S:""),I.$ctx.dataAsString("email",(R=N.email)!=null?R:""),I.$ctx.dataAsString("imageUrl",(U=N.imageUrl)!=null?U:""),I.$ctx.dataAsString("gravatarHash",(B=N.gravatarHash)!=null?B:""),I.$ctx.dataAsBoolean("isSelected",N.isSelected)}addUserAfterUserId(N,S){const R=O(this.renderUser(N)),U=this.getUserByIdentifier(S);U.length===0?this.$users.append(R):U.after(R),window.application.sandbox.addModules(R),R.on("userListingEntryClicked",B=>{B.preventDefault(),B.stopPropagation(),this.tpl.fireCustomEvent(this.$ctx,"userListingClicked",{user:N})})}removeUserById(N){const S=this.getUserByIdentifier(N);if(S.length===0)return;const R=o.u.getFirstChildModule(S);R&&(R.stop(),S.remove())}updateUsers(){this.calculateNextScrollPosition(),this.resetNextScrollPosition(this.hasLessUsers());const N=this.getUsers(),{deleteRecords:S,moveRecords:R,addRecords:U,keepRecords:B}=this.diffArray.update(N);this.userAmount=N.length;const M=this.$ctx.find(".js-cm-user-listing__no-users-message");this.userAmount===0&&this.showNoUsersMessage?M.addClass("visible"):M.removeClass("visible");for(const I of S)this.removeUserById(I);for(const I of B){const{record:F}=I;this.updateUser(F)}for(const I of R){const{record:F,afterRecordId:te}=I;this.moveUserAfterUserId(F,te)}for(const I of U){const{record:F,afterRecordId:te}=I;this.addUserAfterUserId(F,te)}}getUserByIdentifier(N){return this.$ctx.find(`.js-cm-user-listing__user[data-user-id=${N}]`).first()}getUsers(){return c.y.isArray(this.users)?this.users:[]}hasLessUsers(){return this.getUsers().length<this.userAmount}bindSearch(){const N=this.$ctx.find(".js-cm-user-listing__search-field");this.focusSearchField&&this.showSearch&&N.focus(),N.on("input",()=>{clearTimeout(this.searchFieldTimeout),this.searchFieldTimeout=setTimeout(()=>{this.tpl.fireCustomEvent(this.$ctx,"userListingSearched",{query:N.val()})},this.searchInputTimeout)})}bindScroll(){if(this.fixedHeight===L.FIXED_HEIGHT_NONE)return;const N=this.$ctx.find(".js-cm-user-listing__users");let S=0;N.on("scroll",R=>{const B=O(R.currentTarget).scrollTop(),M=B>S,I=B>=this.notifyAtScrollPosition;M&&I&&(this.tpl.fireCustomEvent(this.$ctx,"userListingBottomReached"),this.calculateNextScrollPosition()),S=B})}resetNextScrollPosition(N=!1){N&&this.$ctx.find(".js-cm-user-listing__users").scrollTop(0),this.bottomReachedCounter=0,this.notifyAtScrollPosition=0}calculateNextScrollPosition(){const N=this.bottomReachedCounter*this.fixedHeight*L.LIST_ENTRY_HEIGHT,S=this.remainingEntriesBeforeNotifying*L.LIST_ENTRY_HEIGHT;this.notifyAtScrollPosition=N+S,this.bottomReachedCounter=++this.bottomReachedCounter}}},60801:function(ve,$,r){"use strict";r.d($,{h:function(){return R}});var s=r(35012),b=r.n(s),t=r(78149),_=r(8609),C=r(77007),y=r(50427),g=r(18216),m=r(34933),T=r(28466),E=r(9128),w=r(86070),u=r(95376),c=r(14154),o=Object.defineProperty,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,O=(U,B,M)=>B in U?o(U,B,{enumerable:!0,configurable:!0,writable:!0,value:M}):U[B]=M,L=(U,B)=>{for(var M in B||(B={}))p.call(B,M)&&O(U,M,B[M]);if(l)for(var M of l(B))f.call(B,M)&&O(U,M,B[M]);return U};const P=(0,c.I)(U=>(0,w.jsxs)("div",{className:`cm-video__marker-wrapper js-cm-video__marker-wrapper ${U.width?"cm-video__marker-wrapper--duration":""}`,style:L({left:`${U.position}%`},U.width?{width:`${U.width}%`}:{}),"data-id":U.id,"data-start":U.start,"data-end":U.end,children:[(0,w.jsx)("div",{className:`cm-video__marker js-cm-video__marker ${U.width?"cm-video__marker--duration":""}`}),(0,w.jsxs)("div",{className:"cm-video__marker-description js-cm-video__marker-description",children:[(0,u.Ay)(U.markerDescription),(0,w.jsx)("div",{className:"cm-video__marker-description-arrow js-cm-video__marker-description-arrow"})]})]}));var N=r(5181);const S=/iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;class R extends g.j{constructor(){super(...arguments),this.THUMBNAIL_DEBOUNCE_TIME_IN_MS=100,this.idleTimeUpdates=0,this.isVideoInteracted=!1,this.lastVolume=1,this.pollExecutionAmount=0,this.progressbarMarkerData=[]}static get SPECIAL_CONTROLS_BREAKPOINT(){return 400}static get KEY_CODE_SPACE_BAR(){return"Space"}static get KEY_CODE_ARROW_LEFT(){return"ArrowLeft"}static get KEY_CODE_ARROW_RIGHT(){return"ArrowRight"}static get KEY_CODE_ESCAPE(){return"Escape"}async on(B){this.$loader=N((0,y.EY)(_.$,{id:this.id})),this.sandbox.addModules(this.$loader),this.sandbox.subscribe("events",this),this.hideControlsOnLeaveAndIdle=this.$ctx.dataAsBoolean("hideControlsOnLeaveAndIdle"),this.hideSpecialControls=this.$ctx.dataAsBoolean("hideSpecialControls"),this.previewUrl=this.$ctx.dataAsString("previewUrl"),this.processingInProgressText=this.$ctx.dataAsString("processingInProgressText"),this.spaceBarToggleOnlyAfterInteraction=this.$ctx.dataAsBoolean("spaceBarToggleOnlyAfterInteraction"),this.teaserImage=this.$ctx.dataAsString("teaserImage"),this.$videoItem=this.$ctx.find(".js-cm-video__item"),this.$video=this.$ctx.find(".js-cm-video__item-video"),this.$dropzone=this.$ctx.find(".js-cm-video__dropzone-wrap"),this.$dropzone.length>0&&this._initFileUpload(),this.$video.length>0&&(this.videoTag=this.$video[0],this._initVideoControls(),this.$video.dataAsBoolean("autoplay")&&(await this.toggleVideo(),this.hideVideoControls())),this.bindAttributes(),B()}bindAttributes(){this.tpl.bindDataAttributes(this,{hideControlsOnLeaveAndIdle:{type:Boolean,changed:B=>this.updateHideControlsOnLeaveAndIdle(B.currentValue)}})}setLoopAttribute(B){this.$video.attr("loop",`${B}`)}setAutoplayAttribute(B){this.$video.dataAsBoolean("autoplay",B)}_initVideoControls(){if(S)this.$ctx.find(".js-cm-video__controls").hide(),this.$ctx.find(".js-cm-video__controls-background-gradient").hide(),this.videoTag.setAttribute("controls","true"),this.videoTag.onplay=()=>{this.removeVideoBackgroundImage()};else{this.$controls=this.$ctx.find(".js-cm-video__controls"),this.$controlsBackgroundGradient=this.$ctx.find(".js-cm-video__controls-background-gradient"),this.$videoIconBackward=this.$ctx.find(".js-cm-video__control-backward"),this.$videoIconForward=this.$ctx.find(".js-cm-video__control-forward"),this.$videoIconFullscreen=this.$ctx.find(".js-cm-video__control-fullscreen"),this.$videoIconLoading=this.$ctx.find(".js-cm-video__item-icon-loading"),this.$videoIconPlay=this.$ctx.find(".js-cm-video__control-play"),this.$videoIconVolume=this.$ctx.find(".js-cm-video__control-volume"),this.$videoSpeedSetting=this.$ctx.find(".js-cm-video__control-speed-container"),this.$videoVolumeSlider=this.$ctx.find(".js-cm-video__control-volume-slider"),this.$progressBar=this.$ctx.find(".js-cm-video__progressbar"),this.$progressBarCursor=this.$ctx.find(".js-cm-video__progressbar-cursor"),this.$progressBarPlayed=this.$ctx.find(".js-cm-video__progressbar-played"),this.$progressBarThumbnail=this.$ctx.find(".js-cm-video__progressbar-thumbnail"),this.$progressBarThumbnailImage=this.$ctx.find(".js-cm-video__progressbar-thumbnail-image"),this.$progressBarThumbnailTime=this.$ctx.find(".js-cm-video__progressbar-thumbnail-time span"),this.$progressbarMarkerContainer=this.$progressBar.find(".js-cm-video__progressbar-marker-container");const B=this.$videoVolumeSlider.val();this.videoTag.volume=parseFloat(B),this.hideFullscreenIconIfNotSupported(),this.hideSpecialControls&&this.hideVideoSpecialControls(),this.bindOrUnbindHideControlsOnLeave(),this.bindShowControlsOnMove(),this.bindShowControlsOnFocus(),this.bindVideoClickEvent(),this.bindVideoIconPlayEvent(),this.bindVideoIconBackwardEvent(),this.bindVideoIconForwardEvent(),this.bindVideoIconVolumeEvent(),this.bindVideoIconVolumeSliderFocusEvent(),this.bindVideoIconVolumeSliderEvent(),this.bindVideoIconFullscreenEvent(),this.bindExitFullscreenEvent(),this.bindVideoSpeedEvent(),this.bindVideoProgressbarEvents(),this.bindVideoEvents(),this.bindKeyboardControls(),this.updateTimeDisplay()}}_replaceVideo(){this.$dropzone=N((0,y.EY)(T.I,{classes:"state-hidden",allowedExtensions:`.${(0,m.EA)().join(",.")}`})),this.$ctx.append(this.$dropzone),this._initFileUpload(),this.$ctx.find(".js-cm-video__dropzone-upload").trigger("click")}_initFileUpload(){const B=(0,m.EA)(),M=this.$dropzone,I=N(".js-cm-video__placeholder",this.$ctx),F=N(".js-cm-video__dropzone-upload",this.$ctx);F.upload({dropZone:M,add:(te,fe)=>{const Ie=fe.name.split(".").pop();if(N.inArray(Ie,B)>-1||fe.files[0].type.includes("video"))fe.submit();else return this._displayError(),!1;this.data.checkStorageLimit(fe.files[0].size).then(()=>{fe.submit()})},start:()=>{this.$videoItem.remove(),M.removeClass("state-hidden"),F.remove(),M.find(".js-cm-video__dropzone-icon").replaceWith(this.$loader)},progress:(te,fe)=>{const Ie=parseInt(fe.loaded/fe.total*100,10);this.fire("progress",{id:this.id,progress:Ie})},done:(te,fe)=>{fe.result&&fe.result[0]&&(this.previewUrl=fe.result[0].generic_url.replace("?format=mp4","").replace("&format=mp4",""),typeof this.uploaded=="function"&&this.uploaded(fe.result[0]),I.text(this.processingInProgressText),this.$loader.remove(),this.performVideoProcessingStatusCheck(fe.result[0].file_id,M))}})}performVideoProcessingStatusCheck(B,M){const I=setInterval(()=>{this.data.get(`/api/file/${B}`).then(F=>{var te,fe;(fe=(te=F.data)==null?void 0:te.details)!=null&&fe.width&&(clearInterval(I),this.$videoItem=N((0,y.EY)(E.O,{previewUrl:this.previewUrl})),M.remove(),this.$dropzone=null,this.$ctx.append(this.$videoItem),this.$video=this.$ctx.find(".js-cm-video__item-video"),this.videoTag=this.$video[0],this._initVideoControls(),typeof this.processed=="function"&&this.processed())}),this.pollExecutionAmount++,this.pollExecutionAmount>60&&clearInterval(I)},3e3)}_displayError(){this.fire("swal",{template:"brandportal-video-upload-error",closeOnConfirm:!0})}async toggleVideo(){S||(this.videoTag.paused?(await this.videoTag.play(),this.tpl.fireCustomEvent(this.videoTag,"CVideoPlayed"),this.$videoIconPlay.attr("aria-pressed","true")):(this.videoTag.pause(),this.$videoIconPlay.attr("aria-pressed","false")))}pauseVideo(){this.videoTag.pause()}getPercentageProgressbarPositionByTime(B){return B/this.videoTag.duration*100}setVideoTime(B){this.videoTag.currentTime=B}setVideoTimeByTimeDifference(B){let M=this.videoTag.currentTime+B;M<0?M=0:M>this.videoTag.duration&&(M=this.videoTag.duration),this.setVideoTime(M),this.fire("videoSeeked",this.getVideoMetadata(),["events"]),this.isVideoInteracted=!0}seekVideo5SecondsBackward(){this.setVideoTimeByTimeDifference(-5)}seekVideo5SecondsForward(){this.setVideoTimeByTimeDifference(5)}setVideoTimeByCursorPosition(B){const M=this.getVideoTimeByCursorPosition(B);this.setVideoTime(M),this.fire("videoSeeked",this.getVideoMetadata(),["events"]),this.isVideoInteracted=!0}getVideoTimeByCursorPosition(B){return B/this.$progressBar[0].offsetWidth*this.videoTag.duration}getFormattedTime(B){const M=Math.floor(B/60/60),I=Math.floor(B/60)-M*60,F=Math.round(B%60);let te;return M>0?te=`${M}:${this.padNumberToTwoDigitString(I)}:${this.padNumberToTwoDigitString(F)}`:te=`${this.padNumberToTwoDigitString(I)}:${this.padNumberToTwoDigitString(F)}`,te}padNumberToTwoDigitString(B){return(B<10?"0":"")+B}getVideoMetadata(){return{currentTime:this.videoTag.currentTime,duration:this.videoTag.duration}}updateTimeDisplay(){const B=this.$ctx.find(".js-cm-video__control-time span"),M=this.getFormattedTime(this.valueIsNaNOrInfinity(this.videoTag.duration)?0:Math.round(this.videoTag.duration)),I=this.getFormattedTime(this.valueIsNaNOrInfinity(this.videoTag.currentTime)?0:Math.round(this.videoTag.currentTime));B.text(`${I} / ${M}`)}valueIsNaNOrInfinity(B){return Number.isNaN(B)||!isFinite(B)}updateProgressbarPlayed(){const B=this.getPercentageProgressbarPositionByTime(this.videoTag.currentTime);this.$progressBarPlayed.css({width:`${B}%`})}setThumbnailPositionByCursorPosition(B){const M=this.canvas.width,I=this.getPositionWithinBounds(B,M);this.$progressBarThumbnail.removeClass("state-hidden"),this.$progressBarThumbnail.css({left:I.left})}initializeThumbnailCanvas(){this.canvas||(this.canvas=document.createElement("canvas"),this.calculateThumbnailSize(),this.canvasCtx=this.canvas.getContext("2d"))}calculateThumbnailSize(){const B=this.videoTag.videoHeight,M=this.videoTag.videoWidth;B>M?(this.canvas.height=120,this.canvas.width=M*120/B):(this.canvas.height=B*160/M,this.canvas.width=160)}setThumbnailTime(B){this.videoTagClone?this.videoTagClone.currentTime=Math.floor(B*100)/100:(this.videoTagClone=N(this.videoTag).clone()[0],this.bindThumbnailTimeupdate(),N(this.videoTagClone).on("loadedmetadata",()=>{this.videoTagClone.currentTime=Math.floor(B*100)/100}))}updateThumbnailTimeDisplay(B){const M=this.getFormattedTime(Math.round(B));this.$progressBarThumbnailTime.text(M)}setProgressbarMarkerData(B){this.progressbarMarkerData=C.y.isArray(B)?B:[],this.createProgressbarMarkers()}createProgressbarMarkers(){if(this.progressbarMarkerData&&this.$ctx.dataAsBoolean("metadataLoaded")){this.$progressbarMarkerContainer.empty();for(const B of this.progressbarMarkerData){let M;B.descriptionTemplate&&B.descriptionTemplate,M=(0,y.EY)(B.descriptionTemplate,B.descriptionData);const I={id:B.id,start:B.start,end:B.end,position:this.getPercentageProgressbarPositionByTime(B.start),markerDescription:M},F=N((0,y.EY)(P,I));this.tpl.addAndActivate(this.$progressbarMarkerContainer,F,!1),F.on("click",te=>{te.stopPropagation();const fe=N(te.currentTarget);this.fire("progressBarMarkerClicked",fe,["events"]),this.isVideoInteracted=!0}),F.on("mousemove",te=>{te.stopPropagation(),this.$progressBarCursor.addClass("state-hidden"),this.$progressBarThumbnail.addClass("state-hidden")}),F.on("click",".js-cm-video__marker-description",te=>{const Ie=N(te.currentTarget).closest(".js-cm-video__marker-wrapper");this.exitFullscreen(),this.fire("progressBarMarkerClicked",Ie,["events"]),this.isVideoInteracted=!0})}}}removeProgressbarMarkers(){this.$progressbarMarkerContainer.find(".js-cm-video__marker-wrapper").remove()}setMarkerDescriptionPosition(B){const M=B.find(".js-cm-video__marker-description"),I=B.find(".js-cm-video__marker-description-arrow");M.removeClass("cm-video__marker-description--left"),M.removeClass("cm-video__marker-description--right"),M.removeClass("cm-video__marker-description--above"),I.removeClass("cm-video__marker-description-arrow--left"),I.removeClass("cm-video__marker-description-arrow--right");const F=32,te=B.position().left+parseInt(B.css("marginLeft")),fe=M.width()/2,Ie=N(this.videoTag).width(),de=this.$controls.find(".js-cm-video__actions-left")[0].offsetWidth+F,q=this.$controls.find(".js-cm-video__actions-right")[0].offsetWidth+F;te-F<fe?(M.addClass("cm-video__marker-description--left"),I.addClass("cm-video__marker-description-arrow--left")):Ie-q-te<fe&&(M.addClass("cm-video__marker-description--right"),I.addClass("cm-video__marker-description-arrow--right")),(te-fe<de||Ie-te-F<q)&&M.addClass("cm-video__marker-description--above")}getPositionWithinBounds(B,M){const I=N(this.$progressBar).width(),F=M/2,te={aligned:"center",left:B-F,videoWidth:I};return B<F?(te.aligned="left",te.left=0):B>I-F&&(te.aligned="right",te.left=I-M),te}getClosestProgressBarMarkerByCurrentTime(){const B=this.$progressbarMarkerContainer.find(".js-cm-video__marker-wrapper"),M=this.videoTag.currentTime;let I=B.first();return N.each(B,(F,te)=>{const fe=N(te).dataAsNumber("start"),Ie=I.dataAsNumber("start");Math.abs(fe-M)<Math.abs(Ie-M)&&M>=fe&&(I=N(te))}),I}updateMarkerDescriptionVisibility(B){const M=this.$progressbarMarkerContainer.find(".js-cm-video__marker-description.state-visible"),I=B.find(".js-cm-video__marker-description");M[0]!==I[0]&&(this.hideMarkerDescription(M,"fadeOut",150),M.removeClass("state-visible")),this.setMarkerDescriptionPosition(B);const F=M.length>0?200:0;this.updateItemVisibilityByCurrentTime(I,B.dataAsNumber("start"),B.dataAsNumber("end"),6,()=>{this.showMarkerDescription(I,"transition.bounceUpIn",400,F)},()=>{this.hideMarkerDescription(I,"transition.bounceDownOut",700)}),this.deselectProgressbarMarkers();const te=B.find(".js-cm-video__marker");this.updateItemVisibilityByCurrentTime(te,B.dataAsNumber("start"),B.dataAsNumber("end"),3,()=>{te.addClass("state-selected")},()=>{te.removeClass("state-selected")})}showMarkerDescription(B,M,I,F){B.css("visibility")==="visible"||!this.isFullscreen()||(B.velocity(M,{delay:F,duration:I,ease:[.13,1.05,.55,.59],visibility:"visible"}),B.addClass("state-visible"))}hideMarkerDescription(B,M,I){B.css("visibility")==="hidden"||!this.isFullscreen()||B.velocity(M,{duration:I,ease:[.13,1.05,.55,.59],visibility:"hidden"})}hideAllMarkerDescriptions(){this.$progressbarMarkerContainer.find(".js-cm-video__marker-description").removeAttr("style")}sendVideoScreenToggledEvent(){this.fire("videoFullscreenClicked",{newFullscreenState:this.isFullscreen()},["events"])}updateItemVisibilityByCurrentTime(B,M,I,F,te,fe){const Ie=M===I?I+F:I;this.videoTag.currentTime<M||this.videoTag.currentTime>Ie?fe():te()}selectProgressbarMarker(B){this.$progressbarMarkerContainer.find(`.js-cm-video__marker-wrapper[data-id="${B}"]`).find(".js-cm-video__marker").addClass("state-selected")}deselectProgressbarMarkers(){const B=this.$progressbarMarkerContainer.find(".js-cm-video__marker.state-selected");B.length>0&&B.removeClass("state-selected")}toggleFullscreen(){const B=this.$ctx[0];this.isFullscreen()?this.exitFullscreen():this.enterFullScreen(B)}isFullscreen(){return!!(document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement)}isFullscreenSupported(){const B=this.$ctx[0];return!!(B.fullscreenEnabled||B.webkitRequestFullScreen||B.mozRequestFullScreen||B.msRequestFullscreen)}enterFullScreen(B){B.fullscreenEnabled?B.requestFullscreen():B.webkitRequestFullScreen?B.webkitRequestFullScreen():B.mozRequestFullScreen?B.mozRequestFullScreen():B.msRequestFullscreen&&B.msRequestFullscreen()}async exitFullscreen(){document.exitFullscreen?await document.exitFullscreen():document.webkitCancelFullScreen?await document.webkitCancelFullScreen():document.mozCancelFullScreen?await document.msExitFullscreen():document.msRequestFullscreen&&await document.msExitFullscreen()}removeVideoBackgroundImage(){this.videoTag.style.removeProperty("background"),this.$ctx.find(".cm-video__background").removeClass("cm-video__background")}bindOrUnbindHideControlsOnLeave(){this.$ctx.off("mouseenter mouseleave"),this.hideControlsOnLeaveAndIdle&&this.$ctx.on("mouseenter mouseleave",B=>{B.type==="mouseenter"?this.showVideoControls():this.hideVideoControls()})}updateHideControlsOnLeaveAndIdle(B){this.hideControlsOnLeaveAndIdle=B,this.hideControlsOnLeaveAndIdle||this.showVideoControls(),this.bindOrUnbindHideControlsOnLeave()}bindShowControlsOnMove(){this.$ctx.on("mousemove",()=>{this.showVideoControls(),this.idleTimeUpdates=0})}bindShowControlsOnFocus(){const B=[this.$videoIconPlay,this.$videoIconBackward,this.$videoIconForward,this.$videoSpeedSetting,this.$videoIconVolume,this.$videoVolumeSlider,this.$videoIconFullscreen];for(const M of B)M.on("focus",()=>{this.showVideoControls()})}showVideoControls(){this.$controls&&(this.$controls.removeClass("state-hidden"),this.$controlsBackgroundGradient.removeClass("state-hidden"))}hideVideoControls(){this.$controls&&this.$controls.find(":focus").length===0&&(this.$controls.addClass("state-hidden"),this.$controlsBackgroundGradient.addClass("state-hidden"))}hideVideoControlsOnIdle(){this.videoTag.paused&&this.showVideoControls(),this.idleTimeUpdates>7&&(this.hideVideoControls(),this.idleTimeUpdates=0),this.idleTimeUpdates+=1}showVideoSpecialControls(){this.$videoIconBackward.show(),this.$videoIconForward.show(),this.$videoSpeedSetting.show()}hideVideoSpecialControls(){this.$videoIconBackward.hide(),this.$videoIconForward.hide(),this.$videoSpeedSetting.hide()}toggleVideoSpecialControls(B){B<R.SPECIAL_CONTROLS_BREAKPOINT?this.hideVideoSpecialControls():this.showVideoSpecialControls()}hideFullscreenIconIfNotSupported(){this.isFullscreenSupported()||this.$videoIconFullscreen.hide()}bindVideoClickEvent(){this.$video.on("click.play, touchstart.play",async B=>{B.preventDefault(),(this.hideControlsOnLeaveAndIdle||this.isFullscreen())&&await this.toggleVideo()})}bindVideoIconPlayEvent(){this.$videoIconPlay.on("click.video",async()=>{await this.toggleVideo()})}bindVideoIconBackwardEvent(){this.$videoIconBackward.on("click.video",()=>{this.seekVideo5SecondsBackward()})}bindVideoIconForwardEvent(){this.$videoIconForward.on("click.video",()=>{this.seekVideo5SecondsForward()})}bindVideoSpeedEvent(){this.$ctx.on("click.video",".js-cm-video__control-speed-option",B=>{this.updatePlaybackRate({title:N(B.currentTarget).text(),playbackRate:N(B.currentTarget).dataAsNumber("playbackRate")});const M=N(B.currentTarget).closest(".js-cm-btn-dropdown__menu");this.fire("closeDropdown",M,["events"]),this.fire("videoSpeedOptionsClicked",["events"]),this.isVideoInteracted=!0})}updatePlaybackRate(B){this.videoTag.playbackRate=B.playbackRate,this.$ctx.find(".js-cm-video__control-speed-option.state-active").removeClass("state-active"),this.$ctx.find(`.js-cm-video__control-speed-option[data-playback-rate="${B.playbackRate}"]`).addClass("state-active"),this.$ctx.find(".js-cm-video__control-speed-label").text(B.title)}onSpeedControlOpened(B){B.$toggle.find("i").toggleClass("cm-video__control-speed--rotated")}onSpeedControlClosed(B){B.$toggle.find("i").toggleClass("cm-video__control-speed--rotated")}bindVideoIconVolumeEvent(){this.$videoIconVolume.on("click.video",()=>{let B;this.$videoVolumeSlider.val()==="0"?(B=this.lastVolume,this.$videoIconVolume.attr("aria-pressed","false")):(this.lastVolume=this.videoTag.volume,this.$videoIconVolume.attr("aria-pressed","true"),B=0),this.$videoVolumeSlider.val(B),this.$videoVolumeSlider.change(),this.fire("videoVolumeClicked",["events"]),this.isVideoInteracted=!0})}bindVideoIconVolumeSliderEvent(){this.$videoVolumeSlider.on("input.video, change.video",B=>{this.videoTag.volume=B.currentTarget.value,Math.ceil(B.currentTarget.value)===0?(this.replaceIcon(this.$videoIconVolume,"volume-off","md"),this.$videoIconVolume.attr("aria-pressed","true")):(this.replaceIcon(this.$videoIconVolume,"volume-on","md"),this.$videoIconVolume.attr("aria-pressed","false"))})}bindVideoIconVolumeSliderFocusEvent(){this.$videoVolumeSlider.focus(()=>{this.$videoVolumeSlider.parent().addClass("cm-video__control-volume-container--visible")}),this.$videoVolumeSlider.blur(()=>{this.$videoVolumeSlider.parent().removeClass("cm-video__control-volume-container--visible")})}bindVideoIconFullscreenEvent(){this.isFullscreenSupported()&&this.$videoIconFullscreen.on("click",()=>{this.toggleFullscreen(),this.isVideoInteracted=!0})}bindExitFullscreenEvent(){const B=()=>{this.hideAllMarkerDescriptions(),this.sendVideoScreenToggledEvent()};N(document).on("fullscreenchange",B),N(document).on("mozfullscreenchange",B),N(document).on("webkitfullscreenchange",B),N(document).on("msfullscreenchange",B)}bindVideoProgressbarEvents(){this.$progressBar.on("click.video",M=>{M.offsetX&&this.setVideoTimeByCursorPosition(M.offsetX)});let B=!1;this.$progressBar.on("mousedown.video",()=>{B=!0}),this.$progressBar.on("mouseup.video",()=>{B=!1}),this.$progressBar.on("mouseleave",()=>{this.$progressBarCursor.addClass("state-hidden"),this.$progressBarThumbnail.addClass("state-hidden")}),this.$progressBar.on("mousemove.video",M=>{if(!this.$ctx.dataAsBoolean("metadataLoaded")||!M.offsetX)return;this.progressBarThumbnailDebouncedCallback||(this.progressBarThumbnailDebouncedCallback=b()(this.THUMBNAIL_DEBOUNCE_TIME_IN_MS,F=>this.setThumbnailTime(F))),this.$progressBarCursor.removeClass("state-hidden"),this.$progressBarCursor.css({left:M.offsetX}),this.initializeThumbnailCanvas(),this.setThumbnailPositionByCursorPosition(M.offsetX);const I=this.getVideoTimeByCursorPosition(M.offsetX);this.updateThumbnailTimeDisplay(I),this.progressBarThumbnailDebouncedCallback(I),B&&this.setVideoTimeByCursorPosition(M.offsetX)})}bindThumbnailTimeupdate(){N(this.videoTagClone).on("timeupdate",()=>{this.canvasCtx.drawImage(this.videoTagClone,0,0,this.canvas.width,this.canvas.height),this.$progressBarThumbnailImage.attr("src",this.canvas.toDataURL())})}bindKeyboardControls(){N("html").on(`keydown.videoKeyControls${this.id}`,N.debounce(200,!0,M=>this.keydown(M)))}async keydown(B){if(B.code!==R.KEY_CODE_ESCAPE&&(B.target.localName==="textarea"||B.target.localName==="input"||B.target.localName==="select"||B.target.getAttribute("contenteditable")==="true"||B.target.classList.contains("ql-editor")||B.target.role==="textbox"))return!0;switch(B.code){case R.KEY_CODE_ARROW_LEFT:this.isVideoInteracted&&this.seekVideo5SecondsBackward();break;case R.KEY_CODE_ARROW_RIGHT:this.isVideoInteracted&&this.seekVideo5SecondsForward();break;case R.KEY_CODE_SPACE_BAR:(!this.spaceBarToggleOnlyAfterInteraction||this.isVideoInteracted)&&(B.preventDefault(),await this.toggleVideo());break}}bindVideoEvents(){this.videoTag.onplay=()=>{this.removeVideoBackgroundImage(),this.replaceIcon(this.$videoIconPlay,"pause","md"),this.fire("videoPlaybackStarted",["events"]),this.isVideoInteracted=!0,this.videoTag.setAttribute("data-test-state","video-onplay")},this.videoTag.oncanplay=()=>{this.videoTag.setAttribute("data-test-ready","video-oncanplay")},this.videoTag.onplaying=()=>{this.$videoIconLoading.hide(),this.fire("videoPlaybackStarted",["events"])},this.videoTag.ontimeupdate=()=>{this.updateTimeDisplay(),this.updateProgressbarPlayed();const B=this.getClosestProgressBarMarkerByCurrentTime();B.length>0&&this.updateMarkerDescriptionVisibility(B),this.hideControlsOnLeaveAndIdle&&this.hideVideoControlsOnIdle(),this.fire("videoTimeUpdated",this.getVideoMetadata(),["events"])},this.videoTag.onwaiting=()=>{this.$videoIconLoading.show()},this.videoTag.onpause=()=>{this.$videoIconLoading.hide(),this.replaceIcon(this.$videoIconPlay,"play","md"),this.fire("videoPlaybackStopped",this.getVideoMetadata(),["events"])},this.videoTag.onended=()=>{this.$videoIconLoading.hide(),this.fire("videoPlaybackStopped",this.getVideoMetadata(),["events"])},this.videoTag.onloadedmetadata=()=>{this.updateTimeDisplay(),this.$ctx.dataAsBoolean("metadataLoaded",!0),this.createProgressbarMarkers(),this.fire("videoMetadataLoaded",this.getVideoMetadata(),["events"])}}replaceIcon(B,M,I){const F=(0,y.EY)(t.V,{icon:M,size:I});B.html(F)}destroy(){this.sandbox.removeModules(this.$ctx)}stop(){this.unbindKeyboardControls(),S||this.unbindEvents()}unbindKeyboardControls(){N("html").off(`keydown.videoKeyControls${this.id}`)}unbindEvents(){this.$videoIconPlay.off("click.video"),this.$videoIconBackward.off("click.video"),this.$videoIconForward.off("click.video")}onAnnotationMessageEditorFocused(){this.videoTag.paused||this.toggleVideo()}onEditorZoomed(B){this.toggleVideoSpecialControls(B)}onPbBlockWidthUpdated(B){this.toggleVideoSpecialControls(B)}onRemoteVideoPlayToggle(){this.toggleVideo()}onRemoteVideoSeekBackward(){this.seekVideo5SecondsBackward()}onRemoteVideoSeekForward(){this.seekVideo5SecondsForward()}onVideoPlaybackStarted(){this.isVideoInteracted=!1}onVideoPlaybackStopped(){this.isVideoInteracted=!1}onVideoSeeked(){this.isVideoInteracted=!1}onVideoSpeedOptionsClicked(){this.isVideoInteracted=!1}onVideoVolumeClicked(){this.isVideoInteracted=!1}onVideoFullscreenClicked(){this.isVideoInteracted=!1}onViewerOpened(){this.isVideoInteracted=!1}onViewerAssetChange(){this.destroy()}onViewerClosed(B){N(B.content).data("terrificId")===this.id&&this.destroy(),this.isVideoInteracted=!1}}},28466:function(ve,$,r){"use strict";r.d($,{I:function(){return C}});var s=r(86070),b=r(49198),t=r.n(b),_=r(14154);const C=(0,_.I)(y=>{const g=Math.floor(Math.random()*1e4),m=t()(y.preview_image_background);m.setAlpha(.8);const T=t()(y.preview_image_background);return T.setAlpha(.6),(0,s.jsxs)("div",{className:`cm-video__dropzone-wrap cm-video__dropzone-wrap--${g}${y.classes?` ${y.classes}`:""} js-cm-video__dropzone-wrap`,children:[(0,s.jsx)("style",{dangerouslySetInnerHTML:{__html:`
                    .cm-video__dropzone-wrap--${g}:before {
                        ${y.preview_image_background?`background-color: ${y.preview_image_background};`:""}
                        background-image: url('/img/brandportal/blocks/image/placeholder-triangle.jpg');
                    }

                    .cm-video__dropzone-wrap--${g}:after {
                        ${y.preview_image_background?`background-image: linear-gradient(to bottom, ${m.toRgbString()} 0%, ${T.toRgbString()} 100%);`:""}
                    }`}}),(0,s.jsxs)("div",{className:"cm-video__dropzone",children:[(0,s.jsx)("i",{className:"js-cm-video__dropzone-icon cm-video__dropzone-icon icon-film"}),(0,s.jsx)("span",{className:"js-cm-video__placeholder",children:window.translate("Legacy_video_placeholder")}),(0,s.jsx)("input",{className:"cm-video__dropzone-upload js-cm-video__dropzone-upload",type:"file",name:"files[]",accept:y.allowedExtensions,"aria-label":window.translate("Legacy_video_placeholder")})]})]})})},9128:function(ve,$,r){"use strict";r.d($,{O:function(){return o}});var s=r(86070),b=r(14154),t=r(78149);const _=(0,b.I)(l=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"cm-video__controls__annotation-background"}),(0,s.jsxs)("div",{className:"cm-video__controls cm-video__controls-new js-cm-video__controls",children:[(0,s.jsxs)("div",{className:"cm-video__progressbar-new js-cm-video__progressbar",children:[(0,s.jsx)("div",{className:"cm-video__progressbar-new-background",children:(0,s.jsx)("div",{className:"cm-video__progressbar-new-played js-cm-video__progressbar-played"})}),(0,s.jsx)("div",{className:"cm-video__progressbar-cursor state-hidden js-cm-video__progressbar-cursor"}),(0,s.jsx)("div",{className:"cm-video__progressbar-marker-container js-cm-video__progressbar-marker-container"})]}),(0,s.jsxs)("div",{className:"cm-video__progressbar-thumbnail state-hidden js-cm-video__progressbar-thumbnail",children:[(0,s.jsx)("img",{className:"cm-video__progressbar-thumbnail-image js-cm-video__progressbar-thumbnail-image"}),(0,s.jsx)("div",{className:"cm-video__progressbar-thumbnail-time js-cm-video__progressbar-thumbnail-time",children:(0,s.jsx)("span",{})})]}),(0,s.jsxs)("div",{className:"cm-video__control-actions-new js-cm-video__control-actions",children:[(0,s.jsxs)("div",{className:"cm-video__actions-left js-cm-video__actions-left",children:[(0,s.jsx)("button",{"aria-label":window.translate("VideoPlayer_ariaLabelPlayPause"),"aria-pressed":l.autoplay?"true":"false",className:"cm-video__control cm-video__control-play js-cm-video__control-play",children:(0,s.jsx)(t.V,{icon:"play",size:"md"})}),(0,s.jsx)("button",{"aria-label":window.translate("VideoPlayer_ariaLabelStepBackward"),className:"cm-video__control cm-video__control-backward js-cm-video__control-backward",children:(0,s.jsx)(t.V,{icon:"backward-5-seconds",size:"md"})}),(0,s.jsx)("button",{"aria-label":window.translate("VideoPlayer_ariaLabelStepForward"),className:"cm-video__control cm-video__control-forward js-cm-video__control-forward",children:(0,s.jsx)(t.V,{icon:"forward-5-seconds",size:"md"})}),(0,s.jsx)("div",{className:"cm-video__control cm-video__control-time js-cm-video__control-time",children:(0,s.jsx)("span",{})}),(0,s.jsx)("div",{className:"cm-video__control cm-video__control-speed-container js-cm-video__control-speed-container",children:(0,s.jsxs)("div",{className:"cm-btn-dropdown",children:[(0,s.jsx)("a",{href:"javascript:;",role:"button","aria-label":window.translate("VideoPlayer_ariaLabelChangeSpeed"),className:"js-cm-btn-dropdown__toggle","data-event":"speedControl",children:(0,s.jsxs)("div",{className:"cm-video__control-speed js-cm-video__control-speed",children:[(0,s.jsx)("span",{className:"cm-video__control-speed-label js-cm-video__control-speed-label",children:window.translate("Legacy_video_player_speed_normal")}),(0,s.jsx)(t.V,{icon:"caret-down",size:"sm"})]})}),(0,s.jsx)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--no-min-width cm-btn-dropdown__menu--no-background-color js-cm-btn-dropdown__menu",children:(0,s.jsxs)("div",{className:"cm-video__control-speed-options",children:[(0,s.jsxs)("button",{"aria-label":`${window.translate("Legacy_video_player_speed_slow")} (0.5x)`,className:"cm-video__control-speed-option js-cm-video__control-speed-option","data-playback-rate":"0.5",children:[window.translate("Legacy_video_player_speed_slow")," (0.5x)"," "]}),(0,s.jsx)("button",{"aria-label":window.translate("Legacy_video_player_speed_normal"),className:"cm-video__control-speed-option js-cm-video__control-speed-option state-active","data-playback-rate":"1",children:window.translate("Legacy_video_player_speed_normal")}),(0,s.jsxs)("button",{"aria-label":`${window.translate("Legacy_video_player_speed_fast")} (1.25x)`,className:"cm-video__control-speed-option js-cm-video__control-speed-option","data-playback-rate":"1.25",children:[window.translate("Legacy_video_player_speed_fast")," (1.25x)"," "]}),(0,s.jsxs)("button",{"aria-label":`${window.translate("Legacy_video_player_speed_faster")} (1.5x)`,className:"cm-video__control-speed-option js-cm-video__control-speed-option","data-playback-rate":"1.5",children:[window.translate("Legacy_video_player_speed_faster")," (1.5x)"," "]}),(0,s.jsxs)("button",{"aria-label":`${window.translate("Legacy_video_player_speed_ludicrous")} (2x)`,className:"cm-video__control-speed-option js-cm-video__control-speed-option","data-playback-rate":"2",children:[window.translate("Legacy_video_player_speed_ludicrous")," (2x)"," "]})]})})]})})]}),(0,s.jsxs)("div",{className:"cm-video__actions-right js-cm-video__actions-right",children:[(0,s.jsxs)("div",{className:"cm-video__control cm-video__control-volume-container",children:[(0,s.jsx)("div",{className:"cm-video__control-volume-hover-trigger-container"}),(0,s.jsx)("button",{className:"cm-video__control cm-video__control-volume js-cm-video__control-volume","aria-label":window.translate("VideoPlayer_ariaLabelMute"),"aria-pressed":l.autoplay?"true":"false",children:(0,s.jsx)(t.V,{icon:l.autoplay?"volume-off":"volume-on",size:"md"})}),(0,s.jsx)("div",{className:"cm-video__control-volume-dropdown js-cm-video__control-volume-dropdown",children:(0,s.jsx)("input",{type:"range",name:"volume","aria-label":"volume",className:"cm-video__control-volume-slider js-cm-video__control-volume-slider",min:"0",max:"1",step:"0.05",value:l.autoplay?0:.5})})]}),(0,s.jsx)("button",{"aria-label":window.translate("VideoPlayer_ariaLabelFullscreen"),className:"cm-video__control cm-video__control-fullscreen js-cm-video__control-fullscreen",children:(0,s.jsx)(t.V,{icon:"video-fullscreen",size:"md"})})]})]})]}),(0,s.jsx)("div",{className:"cm-video__controls-background-gradient js-cm-video__controls-background-gradient"})]}));var C=Object.defineProperty,y=Object.defineProperties,g=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,w=(l,p,f)=>p in l?C(l,p,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[p]=f,u=(l,p)=>{for(var f in p||(p={}))T.call(p,f)&&w(l,f,p[f]);if(m)for(var f of m(p))E.call(p,f)&&w(l,f,p[f]);return l},c=(l,p)=>y(l,g(p));const o=(0,b.I)(l=>{var p,f,O;return(0,s.jsxs)("div",{className:"cm-video__item js-cm-video__item cm-video__background",children:[(0,s.jsx)(_,u({},l)),(0,s.jsx)("video",c(u(u({controlsList:"nodownload",crossOrigin:"anonymous",className:"cm-video__item-video js-cm-video__item-video",src:`${l.previewUrl.indexOf("?")>0?`${l.previewUrl}&format=mp4`:`${l.previewUrl}?format=mp4`}${l.initialTimeInSeconds&&l.initialTimeInSeconds>0?`#t=${l.initialTimeInSeconds}`:""}`,poster:(f=(p=l.teaserImage)!=null?p:l.previewUrl)!=null?f:"/img/video_transparent_poster.png"},l.autoplay?{"data-autoplay":"true"}:{}),l.loop?{loop:!0}:{}),{style:{background:`url(${(O=l.teaserImage)!=null?O:l.previewUrl}) center / contain noRepeat transparent`},"data-test-id":"asset"})),(0,s.jsx)("i",{className:"icon-spinner anim-spin cm-video__item-icon-loading js-cm-video__item-icon-loading"})]})})},73260:function(ve,$,r){"use strict";r.d($,{L:function(){return w}});var s=r(86070),b=r(14154),t=r(28466),_=r(9128),C=Object.defineProperty,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,T=(u,c,o)=>c in u?C(u,c,{enumerable:!0,configurable:!0,writable:!0,value:o}):u[c]=o,E=(u,c)=>{for(var o in c||(c={}))g.call(c,o)&&T(u,o,c[o]);if(y)for(var o of y(c))m.call(c,o)&&T(u,o,c[o]);return u};const w=(0,b.I)(u=>(0,s.jsx)("div",{className:"mod mod-c-video cm-video js-cm-video","data-processing-in-progress-text":window.translate("Legacy_brandportal_video_processing_in_progress"),"data-metadata-loaded":"false","data-preview-url":u.previewUrl,"data-teaser-image":u.teaserImage,"data-hide-controls-on-leave-and-idle":u.hideControlsOnLeaveAndIdle,"data-hide-special-controls":u.hideSpecialControls,"data-space-bar-toggle-only-after-interaction":u.spaceBarToggleOnlyAfterInteraction,"data-test-id":"video",children:u.previewUrl?(0,s.jsx)(_.O,E({},u)):(0,s.jsx)(t.I,E({},u))}))},49589:function(ve,$,r){"use strict";r.d($,{E:function(){return _}});var s=r(86070),b=r(4957),t=r(14154);const _=(0,t.I)(C=>(0,s.jsx)("div",{className:"mod mod-adobe-creative-cloud-libraries co-adobe-creative-cloud-libraries","data-id":C.id,"data-type":C.type,children:(0,s.jsx)(b.T,{})}))},37522:function(ve,$,r){"use strict";r.d($,{l:function(){return _}});var s=r(86070),b=r(4957),t=r(14154);const _=(0,t.I)(C=>(0,s.jsx)("div",{className:"mod mod-c-asset-chooser co-assetchooser","data-brand-id":C.brandId,"data-use-brand-chooser":C.useBrandChooser,"data-disable-button-on-submit":C.disableButtonOnSubmit,"data-projects":JSON.stringify(C.projects),"data-external-data":JSON.stringify(C.externalData),"data-filters":JSON.stringify(C.filters),"data-project-types":JSON.stringify(C.projectTypes||[]),"data-multiselection-allowed":C.multiSelectionAllowed,"data-collection-selection-allowed":C.collectionSelectionAllowed,"data-textlibrary-enabled":C.textlibraryEnabled,"data-modal-id":C.modalId,children:(0,s.jsxs)("div",{className:"co-assetchooser__content js-co-assetchooser__content",children:[(0,s.jsx)("div",{className:"co-assetchooser__sidebar js-co-assetchooser__sidebar co-sidebarchooser"}),(0,s.jsx)("div",{className:"co-assetchooser__browser js-co-assetchooser__browser",children:(0,s.jsx)("div",{className:"co-assetchooser__loader js-co-assetchooser__loader",children:(0,s.jsx)(b.T,{})})})]})}))},85765:function(ve,$,r){"use strict";r.d($,{Y:function(){return g}});var s=r(86070),b=r(4957),t=r(13833),_=r(49290),C=r(2728),y=r(14154);const g=(0,y.I)(m=>(0,s.jsxs)("div",{className:"mod mod-c-asset-cropping co-asset-cropping","data-asset-id":m.assetId,"data-download-url":m.downloadUrl,"data-asset-data-url":m.assetDataUrl,"data-lock-aspect-ratio":m.lockAspectRatio,children:[(0,s.jsx)(t.X,{drops:!1,notitle:!0,color:"blue"}),(0,s.jsx)("div",{className:"co-asset-cropping__image js-co-asset-cropping__image state-hidden"}),(0,s.jsx)("div",{className:"co-asset-cropping__ratio js-co-asset-cropping__ratio state-hidden"}),(0,s.jsx)("div",{className:"co-asset-cropping__inputs tw-border tw-border-line tw-rounded tw-overflow-hidden js-co-asset-cropping__inputs state-hidden"}),(0,s.jsx)("div",{className:"co-asset-cropping__loader js-co-asset-cropping__loader",children:(0,s.jsx)(b.T,{})}),(0,s.jsx)("div",{className:"co-asset-cropping__error js-co-asset-cropping__error state-hidden",children:window.translate("Legacy_asset_cropping_error")}),m.showCroppingLink?(0,s.jsx)("div",{className:"co-asset-cropping__link js-co-asset-cropping__link"}):null,(0,s.jsxs)("div",{className:" cm-btn-bar cm-btn-bar--right cm-btn-bar--section js-cm-setting__actions co-asset-cropping__buttons js-co-asset-cropping__buttons state-hidden",children:[(0,s.jsx)(_.t,{classes:"js-co-asset-cropping__close",label_cancel:window.translate("Legacy_asset_cropping_close")}),(0,s.jsx)(C.b,{classes:"js-co-asset-cropping__download",label_submit:window.translate("Legacy_asset_cropping_download")})]})]}))},58166:function(ve,$,r){"use strict";r.d($,{p:function(){return N}});var s=r(86070),b=r(14154);const t=(0,b.I)(S=>(0,s.jsxs)("div",{className:"co-blankslate__full",children:[(0,s.jsx)("div",{className:"co-blankslate__image-wrapper",children:(0,s.jsx)("div",{className:"co-blankslate__image-placeholder",children:(0,s.jsx)("img",{alt:"",className:"co-blankslate__image",src:"/img/blankslate/brand/nook.svg"})})}),(0,s.jsx)("p",{className:"co-blankslate__text",children:window.translate("Legacy_blankslate_brands_no_brands")}),S.utils.account.getAccountPermissions().create_brand?(0,s.jsx)("div",{className:"cm-btn-bar cm-btn-bar--centered",children:(0,s.jsx)("div",{className:"js-co-blankslate__cta","data-event-name":"createBrand","data-label":window.translate("Legacy_blankslate_brands_new_brand")})}):null]})),_=(0,b.I)(()=>(0,s.jsxs)("div",{className:"co-blankslate__full",children:[(0,s.jsx)("div",{className:"co-blankslate__image-wrapper",children:(0,s.jsx)("div",{className:"co-blankslate__image-placeholder",children:(0,s.jsx)("img",{alt:"",className:"co-blankslate__image",src:"/img/blankslate/brandupdate/brandupdates@1x.png",srcSet:"/img/blankslate/brandupdate/brandupdates@2x.png 2x, /img/blankslate/brandupdate/brandupdates@1x.png 1x"})})}),(0,s.jsx)("p",{className:"co-blankslate__text",children:window.translate("Legacy_blankslate_brandupdates_no_brandupdate")}),(0,s.jsx)("div",{className:"cm-btn-bar cm-btn-bar--centered",children:(0,s.jsx)("div",{className:"js-co-blankslate__cta","data-event-name":"createBrandupdate","data-label":window.translate("Legacy_blankslate_brandupdates_new_brandupdate")})})]})),C=(0,b.I)(S=>(0,s.jsxs)("div",{className:"co-blankslate__full",children:[(0,s.jsx)("div",{className:"co-blankslate__image-wrapper",children:(0,s.jsx)("div",{className:"co-blankslate__image-placeholder",children:(0,s.jsx)("img",{alt:"",className:"co-blankslate__image",src:"/img/blankslate/brandupdates/brandupdates@1x.png",srcSet:"/img/blankslate/brandupdates/brandupdates@2x.png 2x, /img/blankslate/brandupdates/brandupdates@1x.png 1x"})})}),(0,s.jsx)("p",{className:"co-blankslate__text",children:window.translate("Legacy_blankslate_brandupdates_no_brandupdate")}),S.utils.account.getAccountPermissions().create_brandupdatelibrary?(0,s.jsx)("div",{className:"cm-btn-bar cm-btn-bar--centered",children:(0,s.jsx)("div",{className:"js-co-blankslate__cta","data-event-name":"createBrandupdatelibrary","data-type":"brandupdatelibrary","data-label":window.translate("Legacy_blankslate_brandupdates_new_brandupdatelibrary")})}):null]})),y=(0,b.I)(()=>(0,s.jsxs)("div",{className:"co-blankslate__full",children:[(0,s.jsx)("div",{className:"co-blankslate__image-wrapper",children:(0,s.jsx)("div",{className:"co-blankslate__image-placeholder",children:(0,s.jsx)("img",{alt:"",className:"co-blankslate__image",src:"/img/blankslate/library/documentlibrary@1x.png",srcSet:"/img/blankslate/library/documentlibrary@2x.png 2x, /img/blankslate/library/documentlibrary@1x.png 1x"})})}),(0,s.jsx)("p",{className:"co-blankslate__text",children:window.translate("Legacy_blankslate_no_assets")}),(0,s.jsx)("div",{className:"cm-btn-bar cm-btn-bar--centered",children:(0,s.jsx)("div",{className:"js-co-blankslate__cta","data-event-name":"createAsset","data-label":window.translate("Legacy_blankslate_documentlibrary_cta")})})]})),g=(0,b.I)(S=>(0,s.jsxs)("div",{className:"co-blankslate__full",children:[(0,s.jsx)("div",{className:"co-blankslate__image-wrapper",children:(0,s.jsx)("div",{className:"co-blankslate__image-placeholder",children:(0,s.jsx)("img",{alt:"",className:"co-blankslate__image",src:"/img/blankslate/guideline/guidelines@1x.png",srcSet:"/img/blankslate/guideline/guidelines@2x.png 2x, /img/blankslate/guideline/guidelines@1x.png 1x"})})}),(0,s.jsx)("p",{className:"co-blankslate__text",children:window.translate("Legacy_blankslate_guidelines_no_guidelines")}),S.utils.account.getAccountPermissions().create_styleguide?(0,s.jsx)("div",{className:"cm-btn-bar cm-btn-bar--centered",children:(0,s.jsx)("div",{className:"js-co-blankslate__cta","data-event-name":"createStyleguide","data-label":window.translate("Legacy_blankslate_guidelines_new_guideline")})}):null]})),m=(0,b.I)(()=>(0,s.jsxs)("div",{className:"co-blankslate__full",children:[(0,s.jsx)("div",{className:"co-blankslate__image-wrapper",children:(0,s.jsx)("div",{className:"co-blankslate__image-placeholder",children:(0,s.jsx)("img",{alt:"",className:"co-blankslate__image",src:"/img/blankslate/library/iconlibrary@1x.png",srcSet:"/img/blankslate/library/iconlibrary@2x.png 2x, /img/blankslate/library/iconlibrary@1x.png 1x"})})}),(0,s.jsx)("p",{className:"co-blankslate__text",children:window.translate("Legacy_blankslate_no_assets")}),(0,s.jsx)("div",{className:"cm-btn-bar cm-btn-bar--centered",children:(0,s.jsx)("div",{className:"js-co-blankslate__cta","data-event-name":"createAsset","data-label":window.translate("Legacy_blankslate_iconlibrary_cta")})})]})),T=(0,b.I)(S=>(0,s.jsxs)("div",{className:"co-blankslate__full",children:[(0,s.jsx)("div",{className:"co-blankslate__image-wrapper",children:(0,s.jsx)("div",{className:"co-blankslate__image-placeholder",children:(0,s.jsx)("img",{alt:"",className:"co-blankslate__image",src:"/img/blankslate/library/libraries@1x.png",srcSet:"/img/blankslate/library/libraries@2x.png 2x, /img/blankslate/library/libraries@1x.png 1x"})})}),(0,s.jsx)("p",{className:"co-blankslate__text",children:window.translate("Legacy_blankslate_libraries_no_library")}),S.utils.account.getAccountPermissions().create_libraries&&S.utils.account.hasProduct("DAM")?(0,s.jsx)("div",{className:"co-blankslate__button-bar",children:(0,s.jsx)("div",{"data-type":"medialibrary",className:"js-co-blankslate__cta","data-event-name":"createMedialibrary","data-label":window.translate("Legacy_blankslate_libraries_new_media_library")})}):null]})),E=(0,b.I)(()=>(0,s.jsxs)("div",{className:"co-blankslate__full",children:[(0,s.jsx)("div",{className:"co-blankslate__image-wrapper",children:(0,s.jsx)("div",{className:"co-blankslate__image-placeholder",children:(0,s.jsx)("img",{alt:"",className:"co-blankslate__image",src:"/img/blankslate/library/logolibrary@1x.png",srcSet:"/img/blankslate/library/logolibrary@2x.png 2x, /img/blankslate/library/logolibrary@1x.png 1x"})})}),(0,s.jsx)("p",{className:"co-blankslate__text",children:window.translate("Legacy_blankslate_no_assets")}),(0,s.jsx)("div",{className:"cm-btn-bar cm-btn-bar--centered",children:(0,s.jsx)("div",{className:"js-co-blankslate__cta","data-event-name":"createAsset","data-label":window.translate("Legacy_blankslate_logolibrary_cta")})})]})),w=(0,b.I)(()=>(0,s.jsxs)("div",{className:"co-blankslate__full",children:[(0,s.jsx)("div",{className:"co-blankslate__image-wrapper",children:(0,s.jsx)("div",{className:"co-blankslate__image-placeholder",children:(0,s.jsx)("img",{alt:"",className:"co-blankslate__image",src:"/img/blankslate/library/assets@1x.png",srcSet:"/img/blankslate/library/assets@2x.png 2x, /img/blankslate/library/assets@1x.png 1x"})})}),(0,s.jsx)("p",{className:"co-blankslate__text js-co-blankslate__text",children:window.translate("Legacy_blankslate_no_assets")}),(0,s.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--centered js-co-blankslate__btn-bar",children:[(0,s.jsx)("div",{className:"co-blankslate__cta js-co-blankslate__cta-add-sample","data-test-id":"blankslate-medialibrary-add-sample","data-event-name":"generateSample","data-label":window.translate("Legacy_blankslate_medialibrary_add_sample")}),(0,s.jsx)("div",{className:"co-blankslate__cta js-co-blankslate__cta","data-event-name":"createAsset","data-label":window.translate("Legacy_blankslate_medialibrary_cta")})]})]})),u=(0,b.I)(()=>(0,s.jsxs)("div",{className:"co-blankslate__full",children:[(0,s.jsx)("div",{className:"co-blankslate__image-wrapper",children:(0,s.jsx)("div",{className:"co-blankslate__image-placeholder",children:(0,s.jsx)("img",{alt:"",className:"co-blankslate__image",src:"/img/blankslate/library/assets@1x.png",srcSet:"/img/blankslate/library/assets@2x.png 2x, /img/blankslate/library/assets@1x.png 1x"})})}),(0,s.jsx)("p",{className:"co-blankslate__text",children:window.translate("Legacy_blankslate_medialibrary_collection_text")}),(0,s.jsx)("div",{className:"cm-btn-bar cm-btn-bar--centered",children:(0,s.jsx)("div",{className:"js-co-blankslate__cta","data-event-name":"chooseCollectionAssets","data-label":window.translate("Legacy_blankslate_medialibrary_collection_cta")})})]})),c=(0,b.I)(()=>(0,s.jsxs)("div",{className:"co-blankslate__full",children:[(0,s.jsx)("div",{className:"co-blankslate__image-wrapper",children:(0,s.jsx)("div",{className:"co-blankslate__image-placeholder",children:(0,s.jsx)("img",{alt:"",className:"co-blankslate__image",src:"/img/blankslate/project/assets@1x.png",srcSet:"/img/blankslate/project/assets@2x.png 2x, /img/blankslate/project/assets@1x.png 1x"})})}),(0,s.jsx)("p",{className:"co-blankslate__text",children:window.translate("Legacy_blankslate_no_assets")}),(0,s.jsx)("div",{className:"cm-btn-bar cm-btn-bar--centered",children:(0,s.jsx)("div",{className:"js-co-blankslate__cta","data-event-name":"createAsset","data-label":window.translate("Legacy_blankslate_ws_asset_cta")})})]})),o=(0,b.I)(S=>(0,s.jsxs)("div",{className:"co-blankslate__full",children:[(0,s.jsx)("div",{className:"co-blankslate__image-wrapper",children:(0,s.jsx)("div",{className:"co-blankslate__image-placeholder",children:(0,s.jsx)("img",{alt:"",className:"co-blankslate__image",src:"/img/blankslate/project/projects@1x.png",srcSet:"/img/blankslate/project/projects@2x.png 2x, /img/blankslate/project/projects@1x.png 1x"})})}),(0,s.jsx)("p",{className:"co-blankslate__text",children:window.translate("Legacy_blankslate_projects_no_projects")}),S.utils.account.getAccountPermissions().create_workspace&&S.utils.account.hasProduct("WORKSPACE")?(0,s.jsx)("div",{className:"cm-btn-bar cm-btn-bar--centered",children:(0,s.jsx)("div",{className:"js-co-blankslate__cta","data-event-name":"createProject","data-label":window.translate("Legacy_blankslate_projects_new_project")})}):null]})),l=(0,b.I)(S=>(0,s.jsxs)("div",{className:"co-blankslate__full",children:[(0,s.jsx)("div",{className:"co-blankslate__image-wrapper",children:(0,s.jsx)("div",{className:"co-blankslate__image-placeholder",children:(0,s.jsx)("img",{alt:"",className:"co-blankslate__image",src:"/img/blankslate/project/projects@1x.png",srcSet:"/img/blankslate/project/projects@2x.png 2x, /img/blankslate/project/projects@1x.png 1x"})})}),(0,s.jsx)("p",{className:"co-blankslate__text",children:window.translate("Legacy_blankslate_projects_no_projects")}),S.utils.account.getAccountPermissions().create_workspace&&S.utils.account.hasProduct("WORKSPACE")?(0,s.jsx)("div",{className:"cm-btn-bar cm-btn-bar--centered",children:(0,s.jsx)("div",{className:"js-co-blankslate__cta","data-event-name":"createProjecttemplate","data-label":window.translate("Legacy_blankslate_project_templates_cta")})}):null]})),p=(0,b.I)(()=>(0,s.jsxs)("div",{className:"co-blankslate__full",children:[(0,s.jsx)("div",{className:"co-blankslate__image-wrapper",children:(0,s.jsx)("div",{className:"co-blankslate__image-placeholder",children:(0,s.jsx)("img",{alt:"",className:"co-blankslate__image",src:"/img/blankslate/library/templatelibrary@1x.png",srcSet:"/img/blankslate/library/templatelibrary@2x.png 2x, /img/blankslate/library/templatelibrary@1x.png 1x"})})}),(0,s.jsx)("p",{className:"co-blankslate__text",children:window.translate("Legacy_blankslate_no_assets")}),(0,s.jsx)("div",{className:"cm-btn-bar cm-btn-bar--centered",children:(0,s.jsx)("div",{className:"js-co-blankslate__cta","data-event-name":"createTemplate","data-label":window.translate("Legacy_blankslate_templatelibrary_cta")})})]})),f=(0,b.I)(()=>(0,s.jsxs)("div",{className:"co-blankslate__full",children:[(0,s.jsx)("div",{className:"co-blankslate__image-wrapper",children:(0,s.jsx)("div",{className:"co-blankslate__image-placeholder",children:(0,s.jsx)("img",{alt:"",className:"co-blankslate__image",src:"/img/blankslate/library/textlibrary@1x.png",srcSet:"/img/blankslate/library/textlibrary@2x.png 2x, /img/blankslate/library/textlibrary@1x.png 1x"})})}),(0,s.jsx)("p",{className:"co-blankslate__text",children:window.translate("Legacy_blankslate_no_assets")}),(0,s.jsx)("div",{className:"cm-btn-bar cm-btn-bar--centered",children:(0,s.jsx)("div",{className:"js-co-blankslate__cta","data-event-name":"createTextsnippet","data-label":window.translate("Legacy_blankslate_textlibrary_cta")})})]})),O=(0,b.I)(()=>(0,s.jsxs)("div",{className:"co-blankslate__full",children:[(0,s.jsx)("div",{className:"co-blankslate__image-wrapper",children:(0,s.jsx)("div",{className:"co-blankslate__image-placeholder",children:(0,s.jsx)("img",{alt:"",className:"co-blankslate__image",src:"/img/blankslate/project/assets@1x.png",srcSet:"/img/blankslate/project/assets@2x.png 2x, /img/blankslate/project/assets@1x.png 1x"})})}),(0,s.jsx)("p",{className:"co-blankslate__text",children:window.translate("Legacy_blankslate_no_assets")}),(0,s.jsx)("div",{className:"cm-btn-bar cm-btn-bar--centered",children:(0,s.jsx)("div",{className:"js-co-blankslate__cta","data-event-name":"createAsset","data-label":window.translate("Legacy_blankslate_ws_asset_cta")})})]})),L=(0,b.I)(()=>(0,s.jsxs)("div",{className:"co-blankslate__full",children:[(0,s.jsx)("div",{className:"co-blankslate__image-wrapper",children:(0,s.jsx)("div",{className:"co-blankslate__image-placeholder",children:(0,s.jsx)("img",{alt:"",className:"co-blankslate__image",src:"/img/blankslate/project/project-templates.png"})})}),(0,s.jsx)("p",{className:"co-blankslate__text",children:window.translate("Legacy_blankslate_ws_folder_text")}),(0,s.jsx)("div",{className:"cm-btn-bar cm-btn-bar--centered",children:(0,s.jsx)("div",{className:"js-co-blankslate__cta","data-event-name":"createFolder","data-label":window.translate("Legacy_blankslate_ws_folder_cta")})})]})),P=S=>{switch(S){case"brands":return(0,s.jsx)(t,{});case"brandupdatelibrary":return(0,s.jsx)(_,{});case"brandupdates":return(0,s.jsx)(C,{});case"documentlibrary":return(0,s.jsx)(y,{});case"guidelines":return(0,s.jsx)(g,{});case"iconlibrary":return(0,s.jsx)(m,{});case"libraries":return(0,s.jsx)(T,{});case"logolibrary":return(0,s.jsx)(E,{});case"medialibrary-collection":return(0,s.jsx)(u,{});case"medialibrary":return(0,s.jsx)(w,{});case"patternlibrary":return(0,s.jsx)(c,{});case"projects-templates":return(0,s.jsx)(l,{});case"projects":return(0,s.jsx)(o,{});case"templatelibrary":return(0,s.jsx)(p,{});case"textlibrary":return(0,s.jsx)(f,{});case"workspace-template":return(0,s.jsx)(L,{});case"workspace":return(0,s.jsx)(O,{});default:return console.error("No blankslate template found for",S),null}},N=(0,b.I)(S=>(0,s.jsx)("div",{className:"mod mod-c-blankslate co-blankslate","data-sample-images-loader-text":window.translate("Legacy_blankslate_medialibrary_add_sample_text"),children:P(S.template)}))},69086:function(ve,$,r){"use strict";r.d($,{n:function(){return t}});var s=r(86070),b=r(14154);const t=(0,b.I)(_=>(0,s.jsx)("div",{className:"co-create-project__search-item js-cm-setting-search__item","data-value":`${_.template?`${_.template.id}`:""}`,"data-date-begin":`${_.template?`${_.template.date_begin}`:""}`,"data-date-end":`${_.template?`${_.template.date_end}`:""}`,children:(0,s.jsx)("div",{className:"co-create-project__search-item-title",children:_.template?(0,s.jsxs)(s.Fragment,{children:[_.template.name," ",(0,s.jsx)("span",{className:"co-create-project__search-item-description",children:_.template.description?_.template.description:null})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(s.Fragment,{children:window.translate("Legacy_co_create_project_no_template_title")}),(0,s.jsx)("span",{className:"co-create-project__search-item-description",children:window.translate("Legacy_co_create_project_no_template_description")})]})})}))},51728:function(ve,$,r){"use strict";r.d($,{g:function(){return _}});var s=r(86070),b=r(14154),t=r(69086);const _=(0,b.I)(C=>{var y;return(0,s.jsxs)(s.Fragment,{children:[C.allowEmpty?(0,s.jsx)(t.n,{template:null}):null,(y=C.data)==null?void 0:y.map((g,m)=>(0,s.jsx)(t.n,{template:g},m))]})})},23847:function(ve,$,r){"use strict";r.d($,{j:function(){return Rt}});var s=r(7017),b=r(2122),t=r.n(b),_=r(49198),C=r.n(_),y=r(64409),g=r(50427),m=r(18216),T=r(88398),E=r(82109),w=r(88133),u=r(39232),c=r(86070),o=r(49290),l=r(2728),p=r(14154),f=Object.defineProperty,O=Object.defineProperties,L=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,R=(Ze,vt,Et)=>vt in Ze?f(Ze,vt,{enumerable:!0,configurable:!0,writable:!0,value:Et}):Ze[vt]=Et,U=(Ze,vt)=>{for(var Et in vt||(vt={}))N.call(vt,Et)&&R(Ze,Et,vt[Et]);if(P)for(var Et of P(vt))S.call(vt,Et)&&R(Ze,Et,vt[Et]);return Ze},B=(Ze,vt)=>O(Ze,L(vt));const M=(0,p.I)(Ze=>(0,c.jsxs)("div",B(U(B(U({className:"js-co-settings__elem cm-setting__elem cm-setting-chooser cm-setting-chooser--btn"},Ze.readonly?{"data-readonly":Ze.readonly}:{}),{"data-id":Ze.id,"data-type":"chooser"}),Ze.group?{"data-group":Ze.group}:{}),{children:[Ze.label?(0,c.jsx)("label",{className:"cm-setting__label",children:Ze.label}):null,(0,c.jsxs)("div",{className:"cm-setting__preview cm-setting-chooser__types",children:[(0,c.jsx)("a",{href:"javascript:;",className:`cm-setting-chooser__type js-cm-setting-chooser__type ${Ze.value==="primary"?" state-selected":""}`,"data-design":"primary",children:(0,c.jsx)("span",{className:"cm-setting-chooser__preview cm-setting-chooser__preview--btn cm-setting-button__button--button_primary btn-primary",children:window.translate("Legacy_styleguide_settings_design_button_primary")})}),(0,c.jsx)("a",{href:"javascript:;",className:`cm-setting-chooser__type js-cm-setting-chooser__type ${Ze.value==="secondary"?" state-selected":""}`,"data-design":"secondary",children:(0,c.jsx)("span",{className:"cm-setting-chooser__preview cm-setting-chooser__preview--btn cm-setting-button__button--button_secondary btn-secondary",children:window.translate("Legacy_styleguide_settings_design_button_secondary")})}),(0,c.jsx)("a",{href:"javascript:;",className:`cm-setting-chooser__type js-cm-setting-chooser__type ${Ze.value==="tertiary"?" state-selected":""}`,"data-design":"tertiary",children:(0,c.jsx)("span",{className:"cm-setting-chooser__preview cm-setting-chooser__preview--btn cm-setting-button__button--button_tertiary btn-tertiary",children:window.translate("Legacy_styleguide_settings_design_button_tertiary")})})]})]})));var I=r(93791),F=r(78149),te=r(9862),fe=Object.defineProperty,Ie=Object.defineProperties,de=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable,ie=(Ze,vt,Et)=>vt in Ze?fe(Ze,vt,{enumerable:!0,configurable:!0,writable:!0,value:Et}):Ze[vt]=Et,ee=(Ze,vt)=>{for(var Et in vt||(vt={}))re.call(vt,Et)&&ie(Ze,Et,vt[Et]);if(q)for(var Et of q(vt))me.call(vt,Et)&&ie(Ze,Et,vt[Et]);return Ze},pe=(Ze,vt)=>Ie(Ze,de(vt));const je=(0,p.I)(Ze=>(0,c.jsxs)("div",pe(ee(ee(ee(ee({className:"js-co-settings__elem","data-id":Ze.id,"data-portal-id":Ze.portalId,"data-type":"link"},Ze.group?{"data-group":Ze.group}:{}),Ze.readonly?{"data-readonly":Ze.readonly}:{}),Ze.autofocus?{"data-autofocus":Ze.autofocus}:{}),Ze.value?{"data-tooltip-link-label":Ze.value.tooltipLinkLabel}:{}),{children:[(0,c.jsx)("div",{className:"cm-setting__elem",children:(0,c.jsxs)("div",{className:"cm-setting__preview cm-setting__bar js-cm-setting__bar",children:[(0,c.jsx)("label",{htmlFor:Ze.id,className:"cm-setting__label",children:Ze.label}),(0,c.jsx)("input",ee(ee(ee(pe(ee({spellCheck:"false",tabIndex:-1,autoComplete:"off",className:"cm-setting__input js-cm-setting__input"},Ze.placeholder?{placeholder:Ze.placeholder}:{}),{id:Ze.id,name:Ze.id}),Ze.required?{required:!0}:{}),Ze.value&&Ze.value!=="javascript:;"?{value:Ze.value.url||""}:{}),Ze.msg?{"data-msg":Ze.msg}:{}))]})}),Ze.showInternalLinkChooser?(0,c.jsx)("div",{className:"cm-setting__link-addons cm-setting__elem",children:(0,c.jsxs)("div",{className:"cm-setting__link-addons-item js-cm-setting__link-addons-item-linkchooser",children:[(0,c.jsx)(F.V,{icon:I.l.ICON_GUIDELINES,classes:"cm-setting__link-addons-item-icon",size:I.l.SIZE_MEDIUM}),(0,c.jsx)("span",{className:"cm-setting__link-addons-item-text",children:"Internal link (within this guideline)"}),(0,c.jsx)(F.V,{icon:I.l.ICON_CARET_RIGHT,classes:"cm-setting__link-addons-item-iconarrow",size:I.l.SIZE_MEDIUM})]})}):null,(0,te.R)("LINK_TEMPLATE_CHOOSER")?(0,c.jsx)("div",{className:"cm-setting__link-addons cm-setting__elem",children:(0,c.jsxs)("div",{className:"cm-setting__link-addons-item js-cm-setting__link-addons-item-templatechooser",children:[(0,c.jsx)(F.V,{icon:I.l.ICON_TEMPLATES,classes:"cm-setting__link-addons-item-icon",size:I.l.SIZE_MEDIUM}),(0,c.jsx)("span",{className:"cm-setting__link-addons-item-text",children:"Create a publication from template"}),(0,c.jsx)(F.V,{icon:I.l.ICON_CARET_RIGHT,classes:"cm-setting__link-addons-item-iconarrow",size:I.l.SIZE_MEDIUM})]})}):null]})));var Be=r(62878),Ne=r(90307);const ce=(0,p.I)(Ze=>(0,c.jsxs)("form",{className:"co-editor__settings js-c-editor-button__create-form",children:[(0,c.jsx)(Be.A,{id:"label",label:window.translate("Legacy_editor_button_label"),value:Ze.label,required:!0,placeholder:"Button Label"}),(0,c.jsx)(M,{id:"design",label:window.translate("Legacy_button_style"),value:Ze.design||"primary"}),(0,c.jsx)(je,{id:"link",label:window.translate("Legacy_editor_button_link_label"),value:Ze,required:!0,autofocus:!0,placeholder:window.translate("Legacy_editor_link_example"),showInternalLinkChooser:Ze.showInternalLinkChooser}),(0,c.jsx)(Ne.f,{modifier:"tooltip",type:"checkbox",id:"newWindow",label:window.translate("Legacy_styleguide_block_text_settings_target_blank"),checked:Ze.newWindow}),(0,c.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer cm-setting__actions state-visible js-cm-setting__actions",children:[(0,c.jsx)(o.t,{classes:"ca-button__segment"}),(0,c.jsx)(l.b,{classes:"ca-button__segment"})]})]}));var se=r(64182);const ge=(0,p.I)(Ze=>(0,c.jsxs)("form",{className:"co-editor__settings co-settings__fieldset co-settings__fieldset--nomargin co-settings__fieldset--no-border-bottom",children:[(0,c.jsx)(se.g,{id:"text",picker:!0,type:"simple",palette:Ze.project,label:window.translate("Legacy_editor_color_text_color"),value:Ze.text||"#000000"}),(0,c.jsx)(se.g,{id:"highlight",picker:!0,type:"simple",palette:Ze.project,label:window.translate("Legacy_editor_color_highlight_color"),value:Ze.highlight||"rgba(255,255,255,0)"}),(0,c.jsxs)("div",{className:"cm-btn-bar cm-setting__actions cm-setting__actions--form state-visible js-cm-setting__actions",children:[(0,c.jsx)(l.b,{}),(0,c.jsx)(o.t,{}),(0,c.jsx)("button",{className:"cm-btn cm-btn--danger cm-btn--right js-co-editor__remove",children:window.translate("Legacy_btn_remove")})]})]})),$e=(0,p.I)(Ze=>(0,c.jsxs)("form",{className:"co-editor__settings js-c-editor-link__create-form",children:[(0,c.jsx)(je,{id:"link",label:window.translate("Legacy_editor_link_label"),value:Ze,required:!0,autofocus:!0,placeholder:window.translate("Legacy_editor_link_example"),portalId:Ze.portalId,showInternalLinkChooser:Ze.showInternalLinkChooser}),(0,c.jsx)(Ne.f,{modifier:"tooltip",type:"checkbox",id:"newWindow",label:window.translate("Legacy_styleguide_block_text_settings_target_blank"),checked:Ze.newWindow}),(0,c.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer js-cm-setting__actions state-visible",children:[(0,c.jsx)(o.t,{classes:"ca-button__segment"}),(0,c.jsx)(l.b,{classes:"ca-button__segment"})]})]})),et=(0,p.I)(Ze=>(0,c.jsxs)("div",{className:`co-editor__toolbar ${Ze.style?`co-editor__toolbar--${Ze.style}`:""} js-co-editor__toolbar`,children:[(0,c.jsx)("div",{className:"co-editor__toolbar-actions js-co-editor__toolbar-actions"}),(0,c.jsx)("div",{className:"co-editor__toolbar-link-actions js-co-editor__toolbar-link-actions"}),(0,c.jsx)("span",{className:"co-editor__toolbar-arrow js-co-editor__toolbar-arrow"})]}));var rt=r(46223),Qe=r(45924),it=Object.defineProperty,ct=Object.defineProperties,ft=Object.getOwnPropertyDescriptors,_s=Object.getOwnPropertySymbols,Bt=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable,Ct=(Ze,vt,Et)=>vt in Ze?it(Ze,vt,{enumerable:!0,configurable:!0,writable:!0,value:Et}):Ze[vt]=Et,at=(Ze,vt)=>{for(var Et in vt||(vt={}))Bt.call(vt,Et)&&Ct(Ze,Et,vt[Et]);if(_s)for(var Et of _s(vt))gt.call(vt,Et)&&Ct(Ze,Et,vt[Et]);return Ze},Ht=(Ze,vt)=>ct(Ze,ft(vt));const Vt=(0,p.I)(Ze=>{var vt;return(0,c.jsxs)(c.Fragment,{children:[Ze.options.toolbar.color?(0,c.jsx)("button",{className:(0,rt.h)(["co-editor__color js-co-editor__color",Qe.OA]),style:at({},Ze.format.color?{borderBottomColor:`${Ze.format.color}`}:{}),"aria-label":"Change text color",children:(0,c.jsx)("div",{className:"co-editor__color-background",style:at({},Ze.format.background?{background:`${Ze.format.background}`}:{}),children:(0,c.jsx)("div",{className:"co-editor__color-char",style:at({},Ze.format.color?{color:`${Ze.format.color}`}:{}),children:"A"})})}):null,Ze.options.toolbar.styles?(0,c.jsx)("div",{className:"co-editor__styles-wrap",children:(0,c.jsxs)("select",{className:"js-co-editor__styles co-editor__styles","data-template":"c-dropdown-style",children:[Ze.options.toolbar.styles.includes("body")?(0,c.jsx)("option",{value:"clean","data-previewclass":Rt.PREVIEW_CLASS_BODY,children:window.translate("Editor_toolbarStylesBodyText")}):null,Ze.options.toolbar.styles.includes("h1")?(0,c.jsx)("option",Ht(at({},Ze.format.header===1||Ze.format.styledListItem===Rt.SELECTOR_HEADLINE_1?{selected:!0}:{}),{"data-previewclass":Rt.PREVIEW_CLASS_HEADING_1,value:"h1",children:"Headline 1"})):null,Ze.options.toolbar.styles.includes("h2")?(0,c.jsx)("option",Ht(at({},Ze.format.header===2||Ze.format.styledListItem===Rt.SELECTOR_HEADLINE_2?{selected:!0}:{}),{"data-previewclass":Rt.PREVIEW_CLASS_HEADING_2,value:"h2",children:"Headline 2"})):null,Ze.options.toolbar.styles.includes("h3")?(0,c.jsx)("option",Ht(at({},Ze.format.header===3||Ze.format.styledListItem===Rt.SELECTOR_HEADLINE_3?{selected:!0}:{}),{"data-previewclass":Rt.PREVIEW_CLASS_HEADING_3,value:"h3",children:"Headline 3"})):null,Ze.options.toolbar.styles.includes("h4")?(0,c.jsx)("option",Ht(at({},Ze.format.header===4||Ze.format.styledListItem===Rt.SELECTOR_HEADLINE_4?{selected:!0}:{}),{"data-previewclass":Rt.PREVIEW_CLASS_HEADING_4,value:"h4",children:"Headline 4"})):null,Ze.options.toolbar.styles.includes("h5")?(0,c.jsx)("option",Ht(at({},Ze.format.header===5||Ze.format.styledListItem===Rt.SELECTOR_HEADLINE_5?{selected:!0}:{}),{"data-previewclass":Rt.PREVIEW_CLASS_HEADING_5,value:"h5",children:"Headline 5"})):null,Ze.options.toolbar.styles.includes("h6")?(0,c.jsx)("option",Ht(at({},Ze.format.header===6||Ze.format.styledListItem===Rt.SELECTOR_HEADLINE_6?{selected:!0}:{}),{"data-previewclass":Rt.PREVIEW_CLASS_HEADING_6,value:"h6",children:"Headline 6"})):null,Ze.options.toolbar.styles.includes("quote")?(0,c.jsx)("option",Ht(at({},Ze.format.blockquote||Ze.format.styledListItem===Rt.SELECTOR_QUOTE?{selected:!0}:{}),{"data-previewclass":Rt.PREVIEW_CLASS_QUOTE,value:"blockquote",children:"Quote"})):null,Ze.options.toolbar.styles.includes("custom1")?(0,c.jsx)("option",Ht(at({},Ze.format.styles==="custom1"||Ze.format.styledListItem==="custom1"?{selected:!0}:{}),{"data-previewclass":Rt.PREVIEW_CLASS_CUSTOM_1,value:"custom1",children:"Custom 1"})):null,Ze.options.toolbar.styles.includes("custom2")?(0,c.jsx)("option",Ht(at({},Ze.format.styles==="custom2"||Ze.format.styledListItem==="custom2"?{selected:!0}:{}),{"data-previewclass":Rt.PREVIEW_CLASS_CUSTOM_2,value:"custom2",children:"Custom 2"})):null,Ze.options.toolbar.styles.includes("custom3")?(0,c.jsx)("option",Ht(at({},Ze.format.styles==="custom3"||Ze.format.styledListItem==="custom3"?{selected:!0}:{}),{"data-previewclass":Rt.PREVIEW_CLASS_CUSTOM_3,value:"custom3",children:"Custom 3"})):null]})}):null,Ze.options.toolbar.sizes?(0,c.jsx)("div",{className:"co-editor__sizes-wrap",children:(0,c.jsx)("select",{className:"js-co-editor__sizes co-editor__sizes","data-template":"c-dropdown-size",children:(vt=Ze.options.toolbar.sizes)==null?void 0:vt.map((Et,Ra)=>(0,c.jsx)("option",Ht(at({},Ze.format.size==Et?{selected:!0}:{}),{value:Et,children:Et}),Ra))})}):null,Ze.options.toolbar.h3?(0,c.jsxs)("button",{className:(0,rt.h)(["co-editor__toolbar-btn js-co-editor__h3",Ze.format.header===3?"state-active":"",Qe.OA]),title:window.translate("Legacy_editor_action_h3"),"aria-label":window.translate("Legacy_editor_action_h3"),tabIndex:Ze.format.header===3?-1:0,children:[(0,c.jsx)(F.V,{icon:"h",size:I.l.SIZE_MEDIUM}),(0,c.jsx)("span",{className:"co-editor__icon-addon",children:"3"})]}):null,Ze.options.toolbar.h4?(0,c.jsxs)("button",{className:(0,rt.h)(["co-editor__toolbar-btn js-co-editor__h4",Ze.format.header===4?"state-active":"",Qe.OA]),title:window.translate("Legacy_editor_action_h4"),"aria-label":window.translate("Legacy_editor_action_h4"),tabIndex:Ze.format.header===4?-1:0,children:[(0,c.jsx)(F.V,{icon:"h",size:I.l.SIZE_MEDIUM}),(0,c.jsx)("span",{className:"co-editor__icon-addon",children:"4"})]}):null,Ze.options.toolbar.bold?(0,c.jsx)("button",{className:(0,rt.h)(["co-editor__toolbar-btn js-co-editor__bold",Ze.format.bold?"state-active":"",Qe.OA]),title:window.translate("Legacy_editor_action_bold"),"aria-label":window.translate("Legacy_editor_action_bold"),tabIndex:Ze.format.bold?-1:0,children:(0,c.jsx)(F.V,{icon:"bold",size:I.l.SIZE_MEDIUM})}):null,Ze.options.toolbar.italic?(0,c.jsx)("button",{className:(0,rt.h)(["co-editor__toolbar-btn js-co-editor__italic",Ze.format.italic?"state-active":"",Qe.OA]),title:window.translate("Legacy_editor_action_italic"),"aria-label":window.translate("Legacy_editor_action_italic"),tabIndex:Ze.format.italic?-1:0,children:(0,c.jsx)(F.V,{icon:"italic",size:I.l.SIZE_MEDIUM})}):null,Ze.options.toolbar.underline?(0,c.jsx)("button",{className:(0,rt.h)(["co-editor__toolbar-btn js-co-editor__underline",Ze.format.underline?"state-active":"",Qe.OA]),title:window.translate("Legacy_editor_action_underline"),"aria-label":window.translate("Legacy_editor_action_underline"),tabIndex:Ze.format.underline?-1:0,children:(0,c.jsx)(F.V,{icon:"underline",size:I.l.SIZE_MEDIUM})}):null,Ze.options.toolbar.strike?(0,c.jsx)("button",{className:(0,rt.h)(["co-editor__toolbar-btn js-co-editor__strike",Ze.format.strike?"state-active":"",Qe.OA]),title:window.translate("Legacy_editor_action_strike"),"aria-label":window.translate("Legacy_editor_action_strike"),tabIndex:Ze.format.strike?-1:0,children:(0,c.jsx)(F.V,{icon:"strikethrough",size:I.l.SIZE_MEDIUM})}):null,Ze.options.toolbar.code?(0,c.jsx)("button",{className:(0,rt.h)(["co-editor__toolbar-btn js-co-editor__code",Ze.format.code?"state-active":"",Qe.OA]),title:window.translate("Legacy_editor_action_code"),"aria-label":window.translate("Legacy_editor_action_code"),tabIndex:Ze.format.code?-1:0,children:(0,c.jsx)(F.V,{icon:"snippet",size:I.l.SIZE_MEDIUM})}):null,Ze.options.toolbar.script?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{className:(0,rt.h)(["co-editor__toolbar-btn js-co-editor__sub",Ze.format.script==="sub"?"state-active":"",Qe.OA]),title:window.translate("Legacy_editor_action_subscript"),"aria-label":window.translate("Legacy_editor_action_subscript"),tabIndex:Ze.format.script==="sub"?-1:0,children:(0,c.jsx)(F.V,{icon:"subscript",size:I.l.SIZE_MEDIUM})}),(0,c.jsx)("button",{className:(0,rt.h)(["co-editor__toolbar-btn js-co-editor__super",Ze.format.script==="super"?"state-active":"",Qe.OA]),title:window.translate("Legacy_editor_action_subscript"),"aria-label":window.translate("Legacy_editor_action_subscript"),tabIndex:Ze.format.script==="super"?-1:0,children:(0,c.jsx)(F.V,{icon:"superscript",size:I.l.SIZE_MEDIUM})})]}):null,Ze.options.toolbar.ordered_list?(0,c.jsx)("button",{className:(0,rt.h)(["co-editor__toolbar-btn js-co-editor__ordered-list",Ze.format.list==="ordered"?"state-active":"",Qe.OA]),title:window.translate("Legacy_editor_action_ordered_list"),"aria-label":window.translate("Legacy_editor_action_ordered_list"),tabIndex:Ze.format.list==="ordered"?-1:0,children:(0,c.jsx)(F.V,{icon:"list-numbers",size:I.l.SIZE_MEDIUM})}):null,Ze.options.toolbar.bullet_list?(0,c.jsx)("button",{className:(0,rt.h)(["co-editor__toolbar-btn js-co-editor__bullet-list",Ze.format.list==="bullet"?"state-active":"",Qe.OA]),title:window.translate("Legacy_editor_action_bullet_list"),"aria-label":window.translate("Legacy_editor_action_bullet_list"),tabIndex:Ze.format.list==="bullet"?-1:0,children:(0,c.jsx)(F.V,{icon:"list-bullets",size:I.l.SIZE_MEDIUM})}):null,Ze.options.toolbar.blockquote?(0,c.jsx)("button",{className:(0,rt.h)(["co-editor__toolbar-btn js-co-editor__blockquote",Ze.format.blockquote?"state-active":"",Qe.OA]),title:window.translate("Legacy_editor_action_quote"),"aria-label":window.translate("Legacy_editor_action_quote"),tabIndex:Ze.format.blockquote?-1:0,children:(0,c.jsx)(F.V,{icon:"quote",size:I.l.SIZE_MEDIUM})}):null,Ze.options.toolbar.indent?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{className:(0,rt.h)(["co-editor__toolbar-btn js-co-editor__indent",Ze.format.indent==="-1"?"state-active":"",Qe.OA]),title:window.translate("Legacy_editor_action_indent"),"aria-label":window.translate("Legacy_editor_action_indent"),tabIndex:Ze.format.indent==="-1"?-1:0,children:(0,c.jsx)(F.V,{icon:"indent",size:I.l.SIZE_MEDIUM})}),(0,c.jsx)("button",{className:(0,rt.h)(["co-editor__toolbar-btn js-co-editor__outdent",Ze.format.indent==="+1"?"state-active":"",Qe.OA]),title:window.translate("Legacy_editor_action_outdent"),"aria-label":window.translate("Legacy_editor_action_outdent"),tabIndex:Ze.format.indent==="+1"?-1:0,children:(0,c.jsx)(F.V,{icon:"dedent",size:I.l.SIZE_MEDIUM})})]}):null,Ze.options.toolbar.align?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{className:(0,rt.h)(["co-editor__toolbar-btn js-co-editor__align-left",Ze.format.align==="left"?"state-active":"",Qe.OA]),title:window.translate("Legacy_editor_action_align_left"),"aria-label":window.translate("Legacy_editor_action_align_left"),tabIndex:Ze.format.align==="left"?-1:0,children:(0,c.jsx)(F.V,{icon:"text-align-left",size:I.l.SIZE_MEDIUM})}),(0,c.jsx)("button",{className:(0,rt.h)(["co-editor__toolbar-btn js-co-editor__align-center",Ze.format.align==="center"?"state-active":"",Qe.OA]),title:window.translate("Legacy_editor_action_align_center"),"aria-label":window.translate("Legacy_editor_action_align_center"),tabIndex:Ze.format.align==="center"?-1:0,children:(0,c.jsx)(F.V,{icon:"text-align-center",size:I.l.SIZE_MEDIUM})}),(0,c.jsx)("button",{className:(0,rt.h)(["co-editor__toolbar-btn js-co-editor__align-right",Ze.format.align==="right"?"state-active":"",Qe.OA]),title:window.translate("Legacy_editor_action_align_right"),"aria-label":window.translate("Legacy_editor_action_align_right"),tabIndex:Ze.format.align==="right"?-1:0,children:(0,c.jsx)(F.V,{icon:"text-align-right",size:I.l.SIZE_MEDIUM})})]}):null,Ze.options.toolbar.link?(0,c.jsx)("button",{className:(0,rt.h)(["co-editor__toolbar-btn js-co-editor__link",Ze.format.link&&!Ze.format.link.design?"state-active":"",Qe.OA]),title:window.translate("Legacy_editor_action_link"),"aria-label":window.translate("Legacy_editor_action_link"),tabIndex:Ze.format.link&&!Ze.format.link.design?-1:0,children:(0,c.jsx)(F.V,{icon:"link",size:I.l.SIZE_MEDIUM})}):null,Ze.options.toolbar.button?(0,c.jsx)("button",{className:(0,rt.h)(["co-editor__toolbar-btn js-co-editor__button",Qe.OA]),title:window.translate("Legacy_editor_action_button"),"aria-label":window.translate("Legacy_editor_action_button"),children:(0,c.jsx)(F.V,{icon:"button",size:I.l.SIZE_MEDIUM})}):null,Ze.options.toolbar.columnbreak?(0,c.jsx)("button",{className:(0,rt.h)(["co-editor__toolbar-btn js-co-editor__breakafter-column",Ze.format.breakafter==="column"?"state-active":"",Qe.OA]),title:window.translate("Legacy_editor_action_breakafter_column"),"aria-label":window.translate("Legacy_editor_action_breakafter_column"),tabIndex:Ze.format.breakafter==="column"?-1:0,children:(0,c.jsx)(F.V,{icon:"column-break",size:I.l.SIZE_MEDIUM})}):null,Ze.options.toolbar.clean?(0,c.jsx)("button",{className:(0,rt.h)(["co-editor__toolbar-btn js-co-editor__clean",Qe.OA]),title:"Reset formatting","aria-label":"Reset formatting",children:(0,c.jsx)(F.V,{icon:"eraser",size:I.l.SIZE_MEDIUM})}):null]})});var Fs=Object.defineProperty,Hs=Object.getOwnPropertySymbols,Us=Object.prototype.hasOwnProperty,ys=Object.prototype.propertyIsEnumerable,Vs=(Ze,vt,Et)=>vt in Ze?Fs(Ze,vt,{enumerable:!0,configurable:!0,writable:!0,value:Et}):Ze[vt]=Et,Oa=(Ze,vt)=>{for(var Et in vt||(vt={}))Us.call(vt,Et)&&Vs(Ze,Et,vt[Et]);if(Hs)for(var Et of Hs(vt))ys.call(vt,Et)&&Vs(Ze,Et,vt[Et]);return Ze};const nn=(0,p.I)(Ze=>(0,c.jsx)("div",Oa({className:"mod mod-c-link-actions cm-link-actions"},Ze.tpl.renderDataAttributesAsObject(Ze)))),Va=(0,p.I)(Ze=>(0,c.jsx)("div",{className:"co-editor__settings co-editor__link-actions js-co-editor__link-actions",children:(0,c.jsx)(nn,{url:Ze.url,label:Ze.label})})),hn=(0,p.I)(()=>(0,c.jsx)("div",{className:"co-editor__toolbar-settings js-co-editor__toolbar-settings"}));var Bs=r(5181),os=Object.defineProperty,ha=Object.defineProperties,Qn=Object.getOwnPropertyDescriptors,wn=Object.getOwnPropertySymbols,$s=Object.prototype.hasOwnProperty,Ta=Object.prototype.propertyIsEnumerable,Vn=(Ze,vt,Et)=>vt in Ze?os(Ze,vt,{enumerable:!0,configurable:!0,writable:!0,value:Et}):Ze[vt]=Et,Xn=(Ze,vt)=>{for(var Et in vt||(vt={}))$s.call(vt,Et)&&Vn(Ze,Et,vt[Et]);if(wn)for(var Et of wn(vt))Ta.call(vt,Et)&&Vn(Ze,Et,vt[Et]);return Ze},Br=(Ze,vt)=>ha(Ze,Qn(vt));const Yr=class xo extends m.j{static get SELECTOR_BODY(){return"p"}static get SELECTOR_HEADLINE_1(){return"h1"}static get SELECTOR_HEADLINE_2(){return"h2"}static get SELECTOR_HEADLINE_3(){return"h3"}static get SELECTOR_HEADLINE_4(){return"h4"}static get SELECTOR_HEADLINE_5(){return"h5"}static get SELECTOR_HEADLINE_6(){return"h6"}static get SELECTOR_CUSTOM_1(){return".custom1"}static get SELECTOR_CUSTOM_2(){return".custom2"}static get SELECTOR_CUSTOM_3(){return".custom3"}static get SELECTOR_LINK(){return"a"}static get SELECTOR_QUOTE(){return"blockquote"}static get SELECTOR_BUTTON_PRIMARY(){return".btn-primary"}static get SELECTOR_BUTTON_SECONDARY(){return".btn-secondary"}static get SELECTOR_BUTTON_TERTIARY(){return".btn-tertiary"}static get SELECTOR_BUTTON_PRIMARY_HOVER(){return`${this.SELECTOR_BUTTON_PRIMARY}:hover`}static get SELECTOR_BUTTON_SECONDARY_HOVER(){return`${this.SELECTOR_BUTTON_SECONDARY}:hover`}static get SELECTOR_BUTTON_TERTIARY_HOVER(){return`${this.SELECTOR_BUTTON_TERTIARY}:hover`}static get SELECTORS(){return[xo.SELECTOR_BODY,xo.SELECTOR_HEADLINE_1,xo.SELECTOR_HEADLINE_2,xo.SELECTOR_HEADLINE_3,xo.SELECTOR_HEADLINE_4,xo.SELECTOR_CUSTOM_1,xo.SELECTOR_CUSTOM_2,xo.SELECTOR_CUSTOM_3,xo.SELECTOR_LINK,xo.SELECTOR_QUOTE,xo.SELECTOR_BUTTON_PRIMARY,xo.SELECTOR_BUTTON_SECONDARY,xo.SELECTOR_BUTTON_TERTIARY,xo.SELECTOR_BUTTON_PRIMARY_HOVER,xo.SELECTOR_BUTTON_SECONDARY_HOVER,xo.SELECTOR_BUTTON_TERTIARY_HOVER]}static get PREVIEW_CLASS_BODY(){return"cm-setting-typostyle__preview--body"}static get PREVIEW_CLASS_HEADING_1(){return"cm-setting-typostyle__preview--heading1"}static get PREVIEW_CLASS_HEADING_2(){return"cm-setting-typostyle__preview--heading2"}static get PREVIEW_CLASS_HEADING_3(){return"cm-setting-typostyle__preview--heading3"}static get PREVIEW_CLASS_HEADING_4(){return"cm-setting-typostyle__preview--heading4"}static get PREVIEW_CLASS_HEADING_5(){return"cm-setting-typostyle__preview--heading5"}static get PREVIEW_CLASS_HEADING_6(){return"cm-setting-typostyle__preview--heading6"}static get PREVIEW_CLASS_QUOTE(){return"cm-setting-typostyle__preview--quote"}static get PREVIEW_CLASS_CUSTOM_1(){return"cm-setting-typostyle__preview--custom1"}static get PREVIEW_CLASS_CUSTOM_2(){return"cm-setting-typostyle__preview--custom2"}static get PREVIEW_CLASS_CUSTOM_3(){return"cm-setting-typostyle__preview--custom3"}static get PREVIEW_CLASS_BUTTON_PRIMARY(){return"cm-setting-button__button--button_primary"}static get PREVIEW_CLASS_BUTTON_SECONDARY(){return"cm-setting-button__button--button_secondary"}static get PREVIEW_CLASS_BUTTON_TERTIARY(){return"cm-setting-button__button--button_tertiary"}static get SETS(){return{empty:{},title:{bold:!0,italic:!0,underline:!0,strike:!0,script:!0,clean:!0},post:{},teaser:{styles:["h1","h2","h3","h4","body","quote","custom1","custom2","custom3"],sizes:["","14px","16px","18px","22px","24px","32px","36px","40px","48px","54px","60px","72px"],bold:!0,italic:!0,ordered_list:!0,bullet_list:!0,link:!0,button:!0,color:!0,align:!0,clean:!0},block:{styles:["h1","h2","h3","h4","body","quote","custom1","custom2","custom3"],bold:!0,italic:!0,code:!0,ordered_list:!0,bullet_list:!0,link:!0,clean:!0,button:!0},caption:{styles:["h1","h2","h3","h4","body","quote","custom1","custom2","custom3"],bold:!0,italic:!0,bullet_list:!0,link:!0,align:!0,clean:!0,button:!0},full:{h3:!0,h4:!0,bold:!0,italic:!0,underline:!0,strike:!0,code:!0,script:!0,ordered_list:!0,bullet_list:!0,blockquote:!0,indent:!0,link:!0,button:!0,color:!0,align:!0,columnbreak:!0,clean:!0,styles:["h1","h2","h3","h4","body","quote","custom1","custom2","custom3"],sizes:["","14px","16px","18px","22px","24px","32px","36px","40px","48px","54px","60px","72px"]},blockText:{color:!0,styles:["h1","h2","h3","h4","body","quote","custom1","custom2","custom3"],bold:!0,italic:!0,link:!0,clean:!0,align:!0,button:!0}}}static get NEWLINE(){return`
`}static get ZERO_WIDTH_SPACER(){return"\uFEFF"}constructor(vt,Et,Ra){super(vt,Et,`c-editor-${xo.count++}`),this.sandbox.subscribe("events",this),this.enabled=!1,this.currentBounds=null,this.hasOpenSettings=!1,this.changed=!1,this.empty=!1,this.options=Ra,this.currentLinkBlot=null,this.currentButtonBlot=null,this.allSelected=!1,this.listAttributes=!1,this.sandbox.subscribe("editor",this),this.options.theme?vt.addClass(`co-editor co-editor--${this.options.theme}`):vt.addClass("co-editor co-editor--default"),vt.on("click.editor",qs=>{this.enabled&&(qs.stopPropagation(),this.fire("hideToolbar",["editor"]))})}stop(){this.destroy()}setup(){this.options=Bs.extend(!0,{placeholder:this.options.placeholder,saveDelay:2e3,plainPaste:!0,spellCheck:!0,style:"float",project:0,portalId:0,toolbar:{h3:!1,h4:!1,bold:!1,italic:!1,underline:!1,strike:!1,code:!1,script:!1,ordered_list:!1,bullet_list:!1,blockquote:!1,indent:!1,link:!1,color:!1,align:!1,clean:!1,button:!1,columnbreak:!1}},this.options),this.options.set&&xo.SETS[this.options.set]&&(this.options.toolbar=Bs.extend(!0,{},this.options.toolbar,xo.SETS[this.options.set]));let vt=!1;for(const gs in this.options.toolbar)Object.prototype.hasOwnProperty.call(this.options.toolbar,gs)&&this.options.toolbar[gs]&&(vt=!0);this.$toolbar=Bs(vt?(0,g.EY)(et,this.options):""),this.$toolbarActions=this.$toolbar.find(".js-co-editor__toolbar-actions"),this.$toolbarArrow=this.$toolbar.find(".js-co-editor__toolbar-arrow"),this.$toolbarLinkActions=this.$toolbar.find(".js-co-editor__toolbar-link-actions"),this.options.style==="float"?Bs(document.body).append(this.$toolbar):this.options.style==="inline"&&this.$ctx.before(this.$toolbar);const Et=[];this.options.matchBr!==!1&&Et.push(["BR",()=>{const gs=new Ra;return gs.insert({softbreak:""}),gs}]),this.$ctx.find("ul, ol").prevAll("br").remove();const Ra=E._.import("delta"),qs=this.$ctx.get(0);if(!qs)throw new Error("Element not found.");if(this.quill=new E._(qs,{placeholder:this.options.placeholder,formats:this.options.quillDisableFormatting?["mention","emoji"]:void 0,modules:{clipboard:{matchVisual:!1,matchers:Et},keyboard:{bindings:this.options.bindings||{newline:{key:13,shiftKey:!0,handler:gs=>{const xs=this.quill.getLeaf(gs.index)[0],Ye=this.quill.getLeaf(gs.index+1)[0];this.quill.insertEmbed(gs.index,"softbreak",!0,"user"),(Ye===null||xs.parent!==Ye.parent)&&this.quill.insertEmbed(gs.index,"softbreak",!0,"user"),this.quill.setSelection(gs.index+1,"silent")}},enter:{key:13,handler:(gs,xs)=>((xs.prefix.length===0||xs.suffix.length===0)&&setTimeout(()=>{this.quill.setSelection(gs.index+1,"silent")}),!0)},tab:{key:9,shiftKey:!1,handler:()=>(typeof this.keydown=="function"&&this.keydown({which:9,key:"tab"}),!0)},backspace:{key:8,handler:(gs,xs)=>(xs.prefix===xo.ZERO_WIDTH_SPACER?(this.quill.deleteText(gs.index-1,1),setTimeout(()=>{this.quill.setSelection(gs.index-2,"silent")})):xs.prefix.length===0&&gs.index>0&&setTimeout(()=>{const Ye=this.quill.getContents(gs.index-3,1);Ye.ops&&Ye.ops.length>0&&Ye.ops[0].insert===xo.NEWLINE&&this.quill.deleteText(gs.index-2,1),typeof this.keydown=="function"&&this.keydown({which:8,key:"backspace"})}),!0)}}}}}),this.options.removeExtraneous!==!1){const gs=this.quill.getLength();this.quill.getText(gs-2,2)===`

`&&this.quill.deleteText(gs-2,2)}this.options.spellCheck||this.quill.root.setAttribute("spellcheck",!1),this.options.plainPaste&&this.quill.clipboard.addMatcher(Node.ELEMENT_NODE,(gs,xs)=>(xs.ops=xs.ops.map(Ye=>{var lt,nt;return{insert:(nt=(lt=Ye.insert)==null?void 0:lt.button)!=null&&nt.label?Ye.insert.button.label:Ye.insert}}),xs)),this.checkEmptyState(),this.quill.on("text-change",(gs,xs,Ye)=>{this.changed=!0,Ye==="user"&&!this.hasOpenSettings&&this.enabled&&this.hideToolbar(),this.isEmpty()}),this.quill.on("text-change",Bs.debounce(200,()=>{this.applyPlaceholderHeight()})),this.quill.on("text-change",Bs.debounce(this.options.saveDelay,()=>{this.save()})),this.quill.on("selection-change",(gs,xs,Ye)=>{if(Ye==="user"&&(this.allSelected=!1),this.enabled){if(gs&&gs.length>0){this.$toolbarActions.show(),this.$toolbarLinkActions.hide(),this.updateToolbar(),this.showToolbar(),this.reposition(gs),typeof this.selectionChanged=="function"&&Ye==="user"&&this.selectionChanged(gs),gs.length+1===this.quill.getLength()&&(this.allSelected=!0),typeof this.quillFocused=="function"&&this.quillFocused();return}if(gs){this.hasOpenSettings=!1,this.hideToolbar(),typeof this.quillFocused=="function"&&this.quillFocused();return}this.save(),typeof this.leave=="function"&&this.leave(),this.hasOpenSettings||this.hideToolbar()}}),this.quill.root.addEventListener("blur",()=>{!this.isToolbarShown()&&this.options.style==="float"&&this.quill.setSelection(null)}),this.$toolbar.on("click",gs=>{gs.stopPropagation()}),Bs(document.body).on("click.editor",()=>{if(this.enabled&&!Bs(document.body).hasClass("state-cm-modal-visible")){const gs=this.checkOpenColorPickers(),xs=this.quill.getSelection();!gs&&!xs&&this.hideToolbar()}}),this.$toolbar.on("click",".js-co-editor__h1",()=>{this.enabled&&(this.quill.getFormat().header!==1?(this.quill.format("header",1),this.changed=!0):this.quill.format("header",!1),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__h2",()=>{this.enabled&&(this.quill.getFormat().header!==2?(this.quill.format("header",2),this.changed=!0):this.quill.format("header",!1),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__h3",()=>{this.enabled&&(this.quill.getFormat().header!==3?(this.quill.format("header",3),this.changed=!0):this.quill.format("header",!1),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__h4",()=>{this.enabled&&(this.quill.getFormat().header!==4?(this.quill.format("header",4),this.changed=!0):this.quill.format("header",!1),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__bold",()=>{this.enabled&&(this.quill.getFormat().bold?this.quill.format("bold",!1):this.quill.format("bold",!0),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__italic",()=>{this.enabled&&(this.quill.getFormat().italic?this.quill.format("italic",!1):this.quill.format("italic",!0),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__underline",()=>{this.enabled&&(this.quill.getFormat().underline?this.quill.format("underline",!1):this.quill.format("underline",!0),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__strike",()=>{this.enabled&&(this.quill.getFormat().strike?this.quill.format("strike",!1):this.quill.format("strike",!0),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__code",()=>{this.enabled&&(this.quill.getFormat().code?this.quill.format("code",!1):this.quill.format("code",!0),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__sub",()=>{this.enabled&&(this.quill.getFormat().script!=="sub"?this.quill.format("script","sub"):this.quill.format("script",!1),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__super",()=>{this.enabled&&(this.quill.getFormat().script!=="super"?this.quill.format("script","super"):this.quill.format("script",!1),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__ordered-list",()=>{if(this.enabled){if(this.quill.getFormat().list!=="ordered"){const gs=this.getCorrectStyledListItem();this.quill.format("list","ordered"),this.quill.format("styledListItem",gs)}else this.resetListFormat();this.updateToolbar()}}),this.$toolbar.on("click",".js-co-editor__bullet-list",()=>{if(this.enabled){if(this.quill.getFormat().list!=="bullet"){const gs=this.getCorrectStyledListItem();this.quill.format("list","bullet"),this.quill.format("styledListItem",gs)}else this.resetListFormat();this.updateToolbar()}}),this.$toolbar.on("click",".js-co-editor__blockquote",()=>{this.enabled&&(this.quill.getFormat().blockquote?this.quill.format("blockquote",!1):(this.quill.format("blockquote",!0),this.changed=!0),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__align-center",()=>{this.enabled&&(this.quill.getFormat().align!=="center"?this.quill.format("align","center"):this.quill.format("align",!1),this.updateToolbar(),this.reposition(this.quill.getSelection()))}),this.$toolbar.on("click",".js-co-editor__align-right",()=>{this.enabled&&(this.quill.getFormat().align!=="right"?this.quill.format("align","right"):this.quill.format("align",!1),this.updateToolbar(),this.reposition(this.quill.getSelection()))}),this.$toolbar.on("click",".js-co-editor__align-left",()=>{this.enabled&&(this.quill.getFormat().align!=="left"?this.quill.format("align","left"):this.quill.format("align",!1),this.updateToolbar(),this.reposition(this.quill.getSelection()))}),this.$toolbar.on("click",".js-co-editor__outdent",()=>{this.enabled&&(this.quill.getFormat().indent!=="-1"?this.quill.format("indent","-1"):this.quill.format("indent",!1),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__indent",()=>{this.enabled&&(this.quill.getFormat().indent!=="+1"?this.quill.format("indent","+1"):this.quill.format("indent",!1),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__link",gs=>{this.enabled&&(gs.preventDefault(),this.openLinkSettings())}),this.$toolbar.on("click",".js-co-editor__breakafter-column",()=>{this.enabled&&(this.quill.getFormat().breakafter!=="column"?this.quill.format("breakafter","column"):this.quill.format("breakafter",!1),this.updateToolbar(),this.reposition(this.quill.getSelection()))}),this.$toolbar.on("click",".js-co-editor__button",()=>{if(this.enabled){const gs=this.quill.getSelection(!0),xs=this.quill.getText(gs.index,gs.length);this.openButtonSettings(gs,{label:xs})}}),this.$ctx.on("click.editor","a",gs=>{this.enabled&&(gs.preventDefault(),Bs(gs.currentTarget).hasClass("btn")?(this.currentButtonBlot=E._.find(gs.currentTarget),this.quill.setSelection(this.quill.getIndex(this.currentButtonBlot),"silent"),this.openButtonSettings()):(this.currentLinkBlot=E._.find(gs.currentTarget),this.openLinkSettings()))}),this.$toolbar.on("click",".js-co-editor__color",gs=>{this.enabled&&(gs.preventDefault(),this.openColorSettings())}),this.$toolbar.on("click",".js-co-editor__custom1",()=>{this.enabled&&(this.quill.getFormat().styles!=="custom1"?(this.quill.format("styles","custom1"),this.changed=!0):this.quill.format("styles",!1),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__custom2",()=>{this.enabled&&(this.quill.getFormat().styles!=="custom2"?(this.quill.format("styles","custom2"),this.changed=!0):this.quill.format("styles",!1),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__custom3",()=>{this.enabled&&(this.quill.getFormat().styles!=="custom3"?(this.quill.format("styles","custom3"),this.changed=!0):this.quill.format("styles",!1),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__clean",()=>{if(this.enabled){const gs=this.quill.getFormat();gs.header&&this.quill.format("header",!1),gs.styles&&this.quill.format("styles",!1),gs.blockquote&&this.quill.format("blockquote",!1),gs.styledListItem&&this.quill.format("styledListItem","clean"),this.updateToolbar()}})}save(vt){this.quill&&(vt||this.changed)&&typeof this.saved=="function"&&(this.saved(this.$ctx.find(".ql-editor").html()),this.changed=!1)}getFormat(){return this.quill.getSelection()?this.quill.getFormat():null}getCorrectStyledListItem(){return Bs(".js-co-editor__styles").val()}resetListFormat(){const vt=this.getCorrectStyledListItem();switch(this.quill.format("list",!1),vt){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":this.quill.format("header",vt.replace("h",""));break;case"blockquote":this.quill.format("blockquote",!0);break;case"custom1":case"custom2":case"custom3":this.quill.format("styles",vt);break}}formatText(vt,Et){this.currentSelection&&this.quill.formatText(this.currentSelection.index,this.currentSelection.length,vt,Et,"api")}setContent(vt){this.$ctx.find(".ql-editor").html(vt)}getContentAsJson(){return this.quill.getContents()}getContentAsHtml(){return this.$ctx.find(".ql-editor").html()}enable(){this.enabled||(this.enabled=!0,this.quill?(this.quill.root.dataset.placeholder=this.options.placeholder,this.quill.enable()):this.setup(),this.applyPlaceholderHeight(),this.updateToolbar())}warningEnable(){this.$ctx.on("click.editor",()=>{Bs(document.body).hasClass("editor-enabled")&&!this.enabled&&(0,w.K)({template:"block-edit-warning",closeOnConfirm:!0},()=>{this.enable()})})}disable(){this.enabled&&(this.enabled=!1,this.quill&&(this.quill.setSelection(null),this.quill.disable(),this.quill.root.dataset.placeholder="",this.hideToolbar()))}destroy(){this.quill&&(this.closeSettings(!0),this.quill.disable(),this.quill=void 0);const vt=this.$ctx.find(".ql-editor");this.$ctx.html(vt.html()),this.$ctx.removeClass("ql-disabled ql-container"),this.$ctx.off(".editor"),Bs(document.body).off(".editor"),this.$toolbar&&this.$toolbar.remove()}applyPlaceholderHeight(){const vt=this.$ctx.find(".ql-editor"),Et=vt.get(0);vt.hasClass("ql-blank")&&Et?vt.height(window.getComputedStyle(Et,":before").height):vt.height("auto")}reposition(vt){if(this.options.style==="inline")return;let Et=this.currentBounds;vt&&(Et=this.quill.getBounds(vt),this.currentSelection=vt),Et||(this.currentSelection=this.quill.getSelection(),Et=this.quill.getBounds(this.currentSelection)),this.currentBounds=Et;const Ra=this.$toolbar.outerWidth(),qs=this.$toolbar.outerHeight(),gs=Bs(window).width(),xs=this.$ctx.offset();let Ye=Et.top+xs.top-(qs+25),lt=Et.left+Et.width/2+xs.left-Ra/2;const nt=Et.right-Et.width/2+xs.left+Ra/2;lt<0?(this.$toolbarArrow.css({left:`calc(50% - ${6-lt}px)`}),lt=0):nt>gs?(this.$toolbarArrow.css({left:`calc(50% - ${6-(nt-gs)}px)`}),lt=gs-Ra):this.$toolbarArrow.css({left:"calc(50% - 6px);"}),Ye<0?(Ye=Et.top+xs.top+Et.height+25,this.$toolbarArrow.addClass("state-arrow-up")):this.$toolbarArrow.removeClass("state-arrow-up"),this.$toolbar.css({top:Ye,left:lt})}showToolbar(){this.options.style!=="inline"&&this.options.set!=="empty"&&this.$toolbar.addClass("state-visible")}hideToolbar(){this.options.style==="inline"?this.updateToolbar():this.$toolbar&&this.$toolbar.removeClass("state-visible")}updateToolbar(){if(this.enabled){this.$toolbarArrow.show(),this.closeSettings();let vt={};this.quill.getSelection()&&(vt=this.quill.getFormat()),this.$toolbarActions.html((0,g.EY)(Vt,{format:vt,options:this.options})),this.$toolbarActions.find(".js-co-editor__styles").dropdown(),this.$toolbarActions.find(".js-co-editor__sizes").dropdown({changed:Et=>{this.quill.format("size",Et.value)}})}}isToolbarShown(){return this.$toolbar&&this.$toolbar.hasClass("state-visible")}focus(){this.enabled&&this.quill&&!this.quill.hasFocus()&&setTimeout(()=>{this.quill!==null&&this.quill.focus()},18)}openSettings(vt){if(this.options.style==="inline"){const Et=Bs((0,g.EY)(hn));Bs(document.body).append(Et),Et.css({zIndex:2e3+2*y.z.count+1}),Et.html(vt);const Ra=this.$toolbar.get(0),qs=Et.get(0);if(!qs)throw new Error("Element not found.");this.popper=(0,s.n4)(Ra,qs,{placement:"top-start"})}else this.$toolbarActions.html(vt)}addToolbarOption(vt){this.options.toolbar[vt]!==void 0&&(this.options.toolbar[vt]=!0)}removeToolbarOption(vt){this.options.toolbar[vt]!==void 0&&(this.options.toolbar[vt]=!1)}closeSettings(vt){this.popper&&(!this.hasOpenSettings||vt)&&(this.popper.state.elements.popper.remove(),this.popper.destroy(),this.popper=null)}openLinkSettings(){if(this.showToolbar(),this.hasOpenSettings=!0,!this.quill||!this.enabled)return!1;const vt=this.quill.getFormat().link,Et=!!(vt!=null&&vt.url),Ra=Bs((0,g.EY)($e,Br(Xn({},vt),{portalId:this.options.portalId,showInternalLinkChooser:(0,T.PL)()&&(0,T._j)()>0})));this.$toolbarArrow.hide(),this.sandbox.addModules(Ra),this.openSettings(Ra),Et&&(this.openLinkActions({url:vt.url,label:vt.tooltipLinkLabel||vt.url,target:vt.newWindow?"_blank":void 0}),this.$toolbarLinkActions.on("linkActionsDeleteClicked",()=>{let gs=null;this.currentLinkBlot&&(gs=this.quill.getSelection(),this.quill.setSelection(this.currentLinkBlot.offset(this.quill.scroll),this.currentLinkBlot.length())),this.quill.format("link",!1),gs&&this.quill.setSelection(gs),this.currentLinkBlot=null,this.hasOpenSettings=!1,this.updateToolbar(),this.reposition(null)}));const qs=new u.D(Ra,this.sandbox);this.reposition(null),qs.validation(()=>{let gs=qs.serialize();gs=Xn(Xn({},gs),gs.link),delete gs.link;let xs=null;this.currentLinkBlot&&(xs=this.quill.getSelection(),this.quill.setSelection(this.currentLinkBlot.offset(this.quill.scroll),this.currentLinkBlot.length())),gs.url?this.quill.format("link",gs):this.quill.format("link",!1),xs&&this.quill.setSelection(xs),this.$toolbarActions.show(),this.$toolbarLinkActions.hide(),this.currentLinkBlot=null,this.hasOpenSettings=!1,this.updateToolbar(),this.reposition(null)},()=>{this.$toolbarActions.show(),this.$toolbarLinkActions.hide(),this.currentLinkBlot=null,this.hasOpenSettings=!1,this.updateToolbar(),this.reposition(null)})}openButtonSettings(vt,Et){this.showToolbar(),this.hasOpenSettings=!0;let Ra;Et?Ra=Et:Ra=this.currentButtonBlot.formats();const qs=!!(Ra!=null&&Ra.url),gs=Bs((0,g.EY)(ce,Br(Xn({},Ra),{showInternalLinkChooser:(0,T.PL)()&&(0,T._j)()>0})));this.$toolbarArrow.hide(),this.sandbox.addModules(gs),this.openSettings(gs),qs&&(this.openLinkActions({url:Ra.url,label:Ra.tooltipLinkLabel||Ra.url,target:Ra.newWindow?"_blank":void 0}),this.$toolbarLinkActions.on("linkActionsDeleteClicked",()=>{if(this.currentButtonBlot){const Ye=this.quill.getIndex(this.currentButtonBlot);this.quill.deleteText(Ye,1)}this.currentButtonBlot=null,this.hasOpenSettings=!1,this.updateToolbar(),this.hideToolbar()}));const xs=new u.D(gs,this.sandbox);this.reposition(null),xs.validation(()=>{let Ye=xs.serialize();if(Ye=Xn(Xn({},Ye),Ye.link),delete Ye.link,Ye.url)vt?(this.quill.deleteText(vt.index,vt.length),this.quill.insertEmbed(vt.index,"button",Ye),this.quill.insertText(vt.index+1," "),this.quill.setSelection(vt.index+2,"silent")):this.currentButtonBlot&&this.currentButtonBlot.format("button",Ye);else if(this.currentButtonBlot){const lt=this.quill.getIndex(this.currentButtonBlot);this.quill.deleteText(lt,1)}this.$toolbarActions.show(),this.$toolbarLinkActions.hide(),this.currentButtonBlot=null,this.hasOpenSettings=!1,this.updateToolbar(),this.hideToolbar()},()=>{this.$toolbarActions.show(),this.$toolbarLinkActions.hide(),this.currentButtonBlot=null,this.hasOpenSettings=!1,this.updateToolbar(),this.hideToolbar()})}openLinkActions({url:vt,label:Et,target:Ra=null}){this.options.style!=="inline"&&this.$toolbarActions.hide(),this.$toolbarLinkActions.show();const qs=Bs((0,g.EY)(Va,{url:vt,label:Et}));if(this.$toolbarLinkActions.off(".link-actions"),this.sandbox.addModules(qs),this.options.style==="inline")return;this.$toolbarLinkActions.html(qs),this.$toolbarLinkActions.on("linkActionsLinkClicked.link-actions",()=>{window.open(vt,Ra)});const gs=qs.get(0);if(!gs)throw new Error("Element not found.");this.$toolbarLinkActions.on("linkActionsCopyClicked.link-actions",()=>{new(t())(gs,{text:()=>vt}),qs.trigger("click")}),this.$toolbarLinkActions.on("linkActionsEditClicked.link-actions",()=>{this.$toolbarActions.show(),this.$toolbarActions.find("#link").focusin(),this.$toolbarLinkActions.hide()})}checkOpenColorPickers(){const vt=this.colorSettings;let Et=!1;if(vt&&vt.elems)for(const Ra of vt.elems)Ra.item.pickerIsOpen===!0&&(Et=!0);return Et}openColorSettings(){this.showToolbar(),this.hasOpenSettings=!0;const vt=Bs((0,g.EY)(ge,{text:this.quill.getFormat().color,highlight:this.quill.getFormat().background,project:this.options.project}));this.colorSettings=new u.D(vt,this.sandbox);const Et=this.colorSettings;this.openSettings(vt),vt.on("click",".js-co-editor__remove",()=>{this.quill.format("color",!1),this.quill.format("background",!1),this.hasOpenSettings=!1,this.updateToolbar(),this.reposition(null)}),this.reposition(null),Et.getFirstElem().focus(),Et.validation(()=>{const Ra=Et.serialize();Ra.text?this.quill.format("color",Ra.text):this.quill.format("color",!1),Ra.highlight&&C()(Ra.highlight).getAlpha()>0?this.quill.format("background",Ra.highlight):this.quill.format("background",!1),this.hasOpenSettings=!1,this.updateToolbar(),this.reposition(null)},()=>{this.hasOpenSettings=!1,this.updateToolbar(),this.reposition(null)})}isEmpty(){var vt;if(this.quill){const Et=this.quill.getText().trim().length===0,Ra=((vt=this.quill.getContents().ops)==null?void 0:vt.length)===1;this.empty=Et&&Ra}else this.empty=this.tpl.isEmpty(this.$ctx.find(".ql-editor").text());return this.empty}checkEmptyState(){this.isEmpty()&&!this.enabled?this.$ctx.addClass("state-empty"):this.$ctx.removeClass("state-empty")}onHideToolbar(){this.hideToolbar()}selectAll(){this.enabled&&(this.quill.setSelection(0,this.quill.getLength(),"user"),this.allSelected=!0)}setCursorToEnd(){this.enabled&&this.quill.setSelection(this.quill.getLength()-1,1,"user")}};Yr.count=0;let Rt=Yr},18624:function(ve,$,r){"use strict";r.d($,{d:function(){return T}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(E,w,u)=>w in E?t(E,w,{enumerable:!0,configurable:!0,writable:!0,value:u}):E[w]=u,m=(E,w)=>{for(var u in w||(w={}))C.call(w,u)&&g(E,u,w[u]);if(_)for(var u of _(w))y.call(w,u)&&g(E,u,w[u]);return E};const T=(0,b.I)(({type:E,sub_type:w})=>(0,s.jsx)("form",m({className:"mod mod-c-filters co-filters js-co-filters","data-type":E},w?{"data-sub-type":w}:{})))},57915:function(ve,$,r){"use strict";r.d($,{R:function(){return I}});var s=r(93791),b=r(43915),t=r(50427),_=r(18216),C=r(8391),y=r(74819),g=r(88398),m=r(39232),T=r(86070),E=r(49290),w=r(2728),u=r(29083),c=r(78149),o=r(14154);const l=(0,o.I)(F=>{var te;return(0,T.jsx)("div",{className:`js-co-settings__elem cm-setting-tree${F.modifier?` cm-setting-tree--${F.modifier}`:""}`,"data-id":F.id,"data-value":F.value||"","data-type":"tree",children:F.tree?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{className:"cm-setting-tree__error-wrapper",children:(0,T.jsx)("label",{id:`${F.id}-error`,className:"state-error cm-setting__error cm-setting-tree__error",htmlFor:F.id})}),(0,T.jsx)("div",{className:`cm-setting-tree__title-${F.titleType}`,children:window.translate("Legacy_styleguide_block_text_setting_title")}),(0,T.jsx)("ul",{className:"cm-setting-tree__tree js-cm-setting-tree__tree",children:(te=F.tree)==null?void 0:te.map((fe,Ie)=>{var de;return(0,T.jsxs)("li",{className:"cm-setting-tree__branch js-cm-setting-tree__branch cm-setting-tree__branch--level-1",children:[(0,T.jsxs)("a",{className:"cm-setting-tree__link js-cm-setting-tree__link",href:fe.url,children:[(0,T.jsx)("input",{className:"cm-setting-tree__input js-cm-setting-tree__input validate-link",type:"radio",name:F.id,value:fe.url}),fe.categories&&fe.categories.length>0?(0,T.jsx)("span",{className:"cm-setting-tree__state-indicator js-cm-setting-tree__icon-show",tabIndex:0,children:(0,T.jsx)("i",{className:"icon-angle-right"})}):(0,T.jsx)("span",{className:"cm-setting-tree__state-indicator js-cm-setting-tree__icon-show",tabIndex:-1}),fe.icon?(0,T.jsx)("div",{className:"cm-setting-tree__icon",children:(0,T.jsx)(c.V,{icon:fe.icon,size:s.l.SIZE_MEDIUM})}):null,fe.document_title,fe.document_mode==="MEDIALIBRARY"?(0,T.jsx)("div",{className:"cm-setting-tree__label",children:window.translate("Legacy_styleguide_block_text_setting_medialibrary")}):(0,T.jsx)("div",{className:"cm-setting-tree__label",children:window.translate("Legacy_styleguide_block_text_setting_document")})]}),fe.categories&&fe.categories.length>0?(0,T.jsx)("ul",{children:(de=fe.categories)==null?void 0:de.map((q,re)=>{var me;return(0,T.jsxs)("li",{className:"cm-setting-tree__branch js-cm-setting-tree__branch cm-setting-tree__branch--level-2",children:[(0,T.jsxs)("span",{className:`cm-setting-tree__link ${q.pages?"js-cm-setting-tree__branch--level-2":""}`,children:[q.pages?(0,T.jsx)("a",{className:"cm-setting-tree__state-indicator js-cm-setting-tree__icon-show",href:"#",children:(0,T.jsx)("i",{className:"icon-angle-right"})}):null,q.category_title]}),q.pages?(0,T.jsx)("ul",{children:(me=q.pages)==null?void 0:me.map((ie,ee)=>{var pe;return(0,T.jsxs)("li",{className:"cm-setting-tree__branch js-cm-setting-tree__branch cm-setting-tree__branch--level-3",children:[(0,T.jsxs)("a",{className:"cm-setting-tree__link js-cm-setting-tree__link",href:ie.url,children:[(0,T.jsx)("input",{className:"cm-setting-tree__input js-cm-setting-tree__input validate-link",type:"radio",name:F.id,value:ie.url}),ie.sections?(0,T.jsx)("span",{className:"cm-setting-tree__state-indicator js-cm-setting-tree__icon-show",tabIndex:0,children:(0,T.jsx)("i",{className:"icon-angle-right"})}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("span",{className:"cm-setting-tree__state-indicator js-cm-setting-tree__icon-show"}),(0,T.jsx)(c.V,{icon:s.l.ICON_DOCUMENT,size:s.l.SIZE_MEDIUM})]}),ie.page_title,(0,T.jsx)("div",{className:"cm-setting-tree__label",children:window.translate("Legacy_styleguide_block_text_setting_page")})]}),ie.sections?(0,T.jsx)("ul",{children:(pe=ie.sections)==null?void 0:pe.map((je,Be)=>(0,T.jsx)("li",{className:"cm-setting-tree__branch js-cm-setting-tree__branch cm-setting-tree__branch--level-4",children:(0,T.jsxs)("a",{className:"cm-setting-tree__link js-cm-setting-tree__link",href:je.url,children:[(0,T.jsx)("input",{className:"cm-setting-tree__input js-cm-setting-tree__input validate-link",type:"radio",name:F.id,value:je.url}),(0,T.jsx)(c.V,{icon:s.l.ICON_DOCUMENT,size:s.l.SIZE_MEDIUM}),je.section_title,(0,T.jsx)("div",{className:"cm-setting-tree__label",children:window.translate("Legacy_styleguide_block_text_setting_section")})]})},`section-${Be}`))}):null]},`page-${ee}`)})}):null]},`category-${re}`)})}):null]},`document-${Ie}`)})})]}):null})}),p=(0,o.I)(F=>(0,T.jsxs)("form",{action:"#",className:"js-c-linkchooser__form co-linkchooser__form",children:[(0,T.jsx)(u.f,{id:"tooltipLinkLabel",value:""}),(0,T.jsx)(l,{modifier:["modal"],id:"internal_url",titleType:"banner",tree:F.tree,value:F.url}),(0,T.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--section cm-btn-bar--right js-cm-setting__actions",children:[(0,T.jsx)(E.t,{label_cancel:window.translate("Legacy_styleguide_block_text_setting_cancel")}),(0,T.jsx)(w.b,{label_submit:window.translate("Legacy_styleguide_block_text_setting_choose")})]})]}));var f=r(5181),O=Object.defineProperty,L=Object.defineProperties,P=Object.getOwnPropertyDescriptors,N=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,U=(F,te,fe)=>te in F?O(F,te,{enumerable:!0,configurable:!0,writable:!0,value:fe}):F[te]=fe,B=(F,te)=>{for(var fe in te||(te={}))S.call(te,fe)&&U(F,fe,te[fe]);if(N)for(var fe of N(te))R.call(te,fe)&&U(F,fe,te[fe]);return F},M=(F,te)=>L(F,P(te));class I extends _.j{static get count(){return I._count=(I._count||0)+1,I._count}constructor(te,fe){super(f(),te,`c-linkchooser-${I.count}`),this.options=f.extend(!0,{},{url:"",tooltipLinkLabel:"",hub:(0,g.PL)()?(0,g._j)():!1},fe||{}),this.isOpen=!1,this.on()}on(){this.sandbox.subscribe("events",this),this.sandbox.subscribe("tabs",this)}async open(te){if(!this.isOpen&&(this.isOpen=!0,this.options=f.extend(!0,{},this.options,te||{}),this.options.hub)){const fe=this.options.hub,Ie=(0,y.YZ)(),de=await(0,C.eR)(fe,Ie);if(this.options.tree=de.tree.map(q=>M(B({},q),{icon:this.getIconClass(q.document_mode)})),this.options.url.indexOf("http")===0){const q=document.createElement("a");q.href=this.options.url,this.options.url=q.pathname}this.showChooser()}}showChooser(){this.$ctx=f((0,t.EY)(p,this.options)),this.$modal||(this.$modal=f((0,t.EY)(b.b,{id:"linkchooser"})),f("body").append(this.$modal),this.sandbox.addModules(this.$modal)),this.fire("openModal",{id:"linkchooser",$content:this.$ctx,modifier:"functional"},["events"]),this.setup()}close(){this.fire("closeModal",{id:"linkchooser"},["events"]),this.isOpen=!1,this.sandbox.removeModules(this.$modal),this.$modal.remove(),this.$modal=null}setup(){this.settings=new m.D(this.$ctx,this.sandbox),this.settings.validation(()=>this.create(),()=>this.close())}create(){const te=this.settings.serialize(),fe={};fe.url=te.internal_url,fe.tooltipLinkLabel="",this.validate(fe).then(Ie=>{this.close(),typeof this.saved=="function"&&this.saved(Ie)}).catch(()=>{Tc.Setting.Base.prototype.hideLoader.apply(this.settings)})}remove(){this.close()}validate(te){return new Promise((fe,Ie)=>{te.url?fe(te):Ie()})}getIconClass(te){switch(te){case"MEDIALIBRARY":return s.l.ICON_IMAGE_LIBRARY;case"LOGOLIBRARY":return s.l.ICON_LOGO;case"ICONLIBRARY":return s.l.ICON_ICONS;case"DOCUMENTLIBRARY":return s.l.ICON_DOCUMENT_LIBRARY;case"TEXTLIBRARY":return s.l.ICON_TEXT_LIBRARY;case"TEMPLATELIBRARY":return s.l.ICON_TEMPLATES;case"PATTERNLIBRARY":return s.l.ICON_PATTERN_LIBRARY;case"DEFAULT":return s.l.ICON_GUIDELINES;default:return s.l.ICON_PROJECTS}}}},63766:function(ve,$,r){"use strict";r.d($,{i:function(){return y}});var s=r(86070),b=r(20886),t=r.n(b),_=r(4957),C=r(14154);const y=(0,C.I)(g=>(0,s.jsxs)("div",{className:"mod mod-c-new-publication co-new-publication","data-template-id":g.template.id,"data-template-name":g.template.name,"data-template-asset-id":g.templateAssetId,"data-template-description":g.template.description,"data-source-id":g.sourceId,"data-styleguide-id":g.styleguideId,"data-project-id":g.projectId,"data-set-id":g.setId,"data-is-storyteq":g.isStoryteq,children:[(0,s.jsxs)("div",{className:"co-new-publication__content",children:[(0,s.jsx)("div",{className:"co-new-publication__title",children:(0,b.decode)(window.translate("NewPublication_title",{name:g.template.name}))}),g.template.previewUrl?(0,s.jsx)("img",{className:"co-new-publication__picture",src:g.template.previewUrl.replace("{width}",400),alt:g.template.name}):g.template.preview?(0,s.jsx)("img",{className:"co-new-publication__picture",src:g.template.preview.replace("{width}",400),alt:g.template.name}):null,g.template.description?(0,s.jsx)("div",{className:"co-new-publication__description",children:g.template.description}):null,(0,s.jsx)("div",{className:"co-new-publication__form-container js-co-new-publication__form-container"}),(0,s.jsx)("div",{className:"js-co-new-publication__loader",children:(0,s.jsx)(_.T,{})})]}),(0,s.jsx)("div",{className:"js-co-new-publication__error-container"})]}))},58192:function(ve,$,r){"use strict";r.d($,{_:function(){return B}});var s=r(86070),b=r(77345),t=r(23245),_=r(93791),C=r(78149),y=r(37200),g=r(14154),m=Object.defineProperty,T=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,u=(M,I,F)=>I in M?m(M,I,{enumerable:!0,configurable:!0,writable:!0,value:F}):M[I]=F,c=(M,I)=>{for(var F in I||(I={}))E.call(I,F)&&u(M,F,I[F]);if(T)for(var F of T(I))w.call(I,F)&&u(M,F,I[F]);return M};const o=(0,g.I)(M=>(0,s.jsx)("a",c(c(c({className:"mod mod-c-menu-card cm-menu-card js-cm-menu-card",href:M.url?M.url:"javascript:;"},M.url&&M.urlTarget?{target:M.urlTarget}:{}),M.url&&M.urlTarget===y.p.URL_TARGET_SELF?{"data-route":!0}:{}),M.tpl.renderDataAttributesAsObject(M))));var l=r(81178),p=Object.defineProperty,f=Object.defineProperties,O=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,S=(M,I,F)=>I in M?p(M,I,{enumerable:!0,configurable:!0,writable:!0,value:F}):M[I]=F,R=(M,I)=>{for(var F in I||(I={}))P.call(I,F)&&S(M,F,I[F]);if(L)for(var F of L(I))N.call(I,F)&&S(M,F,I[F]);return M},U=(M,I)=>f(M,O(I));const B=(0,g.I)(M=>{var I,F,te,fe,Ie,de,q;const re=(I=M.user)!=null?I:(0,l.vD)();return(0,s.jsxs)("div",U(R({className:`mod mod-power-bar-user-menu co-power-bar-user-menu${M.navigation.footerItems.length===0?" co-power-bar-user-menu--hidden-footer":""}`},M.renderedInReact?{"data-rendered-in-react":!0}:{}),{children:[(0,s.jsxs)("div",{className:"co-power-bar-user-menu__header",children:[(0,s.jsxs)("div",{className:"co-power-bar-user-menu__user",children:[(0,s.jsx)("div",{className:"co-power-bar-user-menu__avatar",children:(0,s.jsx)(t.p,{name:re.name,imageUrl:re.image,gravatarHash:re.gravatar_hash,size:b.Z.SIZE_40,userId:re.id})}),(0,s.jsxs)("div",{className:"co-power-bar-user-menu__user-information",children:[(0,s.jsx)("div",{className:"co-power-bar-user-menu__user-name",children:re.name!==""?re.name:re.email}),re.name?(0,s.jsx)("div",{className:"co-power-bar-user-menu__user-email",children:re.email}):null]})]}),(0,s.jsxs)("div",{className:"co-power-bar-user-menu__actions",children:[(0,s.jsx)("span",{className:"tt-bottom tt-usermenu","data-tooltip":window.translate("Legacy_power_bar_menu_button_edit_profile"),children:(0,s.jsx)("button",{className:"co-power-bar-user-menu__action-button js-co-power-bar-user-menu__action-user-profile","data-identifier":"USER_PROFILE","aria-label":window.translate("Legacy_power_bar_menu_button_edit_profile"),children:(0,s.jsx)(C.V,{icon:_.l.ICON_PEN,size:_.l.SIZE_MEDIUM})})}),(0,s.jsx)("span",{className:"tt-bottom tt-usermenu","data-tooltip":window.translate("Legacy_power_bar_menu_button_logout"),children:(0,s.jsx)("button",{className:"co-power-bar-user-menu__action-button co-power-bar-user-menu__action-button--last js-co-power-bar-user-menu__action-logout","data-logout-path":M.navigation.logoutPath,"data-identifier":"LOGOUT","aria-label":window.translate("Legacy_power_bar_menu_button_logout"),children:(0,s.jsx)(C.V,{icon:_.l.ICON_LOGOUT,size:_.l.SIZE_MEDIUM})})})]})]}),(0,s.jsx)("div",{className:"co-power-bar-user-menu__main",children:(fe=Object.keys((te=(F=M.navigation)==null?void 0:F.sections)!=null?te:{}))==null?void 0:fe.map(me=>{var ie;const ee=M.navigation.sections[me];return ee.menu_items.length>0?(0,s.jsxs)("div",{className:"co-power-bar-user-menu__category",children:[ee.title?(0,s.jsx)("div",{className:"co-power-bar-user-menu__category-title",children:ee.title}):null,(0,s.jsx)("div",{className:"co-power-bar-user-menu__menu-cards",children:(ie=ee.menu_items)==null?void 0:ie.map(pe=>{var je,Be,Ne;return(0,s.jsx)("div",{className:"co-power-bar-user-menu__menu-card",children:(0,s.jsx)(o,{icon:pe.icon,background:y.p.BACKGROUND_WHITE,identifier:pe.id,title:pe.title,description:pe.desc,badgeText:pe.badgeText,badgeTheme:pe.badgeTheme,state:pe.feature?y.p.STATE_FEATURE_HOOK:"",url:pe.url,urlTarget:pe.type==="external"?y.p.URL_TARGET_BLANK:y.p.URL_TARGET_SELF,eventData:{url:(je=pe==null?void 0:pe.drawer)==null?void 0:je.url,drawerId:(Be=pe==null?void 0:pe.drawer)==null?void 0:Be.id,template:(Ne=pe==null?void 0:pe.drawer)==null?void 0:Ne.template,feature:pe.feature}})},`section-item-${pe.id}`)})})]}):null})}),(0,s.jsxs)("div",{className:"co-power-bar-user-menu__footer",children:[(0,s.jsx)("div",{className:"co-power-bar-user-menu__text",children:window.translate("Legacy_power_bar_menu_title_footer")}),(0,s.jsx)("div",{className:"co-power-bar-user-menu__menu-cards",children:(q=Object.keys((de=(Ie=M.navigation)==null?void 0:Ie.footerItems)!=null?de:{}))==null?void 0:q.map(me=>{var ie,ee,pe;const je=M.navigation.footerItems[me];return(0,s.jsx)("div",{className:`co-power-bar-user-menu__menu-card js-co-power-bar-user-menu__close-menus ${M.navigation.footerItems.length>2?"co-power-bar-user-menu__menu-card--3-col":""}`,children:(0,s.jsx)(o,{icon:je.icon,background:y.p.BACKGROUND_BLACK_100,color:y.p.BACKGROUND_BLACK_05,identifier:je.id,title:je.title,description:je.desc,url:je.url,urlTarget:je.type==="external"?y.p.URL_TARGET_BLANK:y.p.URL_TARGET_SELF,eventData:{url:(ie=je==null?void 0:je.drawer)==null?void 0:ie.url,drawerId:(ee=je==null?void 0:je.drawer)==null?void 0:ee.id,template:(pe=je==null?void 0:je.drawer)==null?void 0:pe.template}})},`form-item-${je.id}`)})})]})]}))})},83020:function(ve,$,r){"use strict";r.d($,{F:function(){return _}});var s=r(86070),b=r(4957),t=r(14154);const _=(0,t.I)(C=>(0,s.jsxs)("div",{className:"mod mod-c-printdialog co-printdialog","data-asset":JSON.stringify(C.asset),children:[(0,s.jsx)("div",{className:"co-printdialog__loading-overlay js-co-printdialog__loading-overlay",children:(0,s.jsx)(b.T,{})}),(0,s.jsxs)("div",{className:"js-co-printdialog__content",children:[(0,s.jsx)("div",{className:"co-printdialog__view js-co-printdialog__changes"}),(0,s.jsx)("div",{className:"co-printdialog__view js-co-printdialog__preview"}),(0,s.jsx)("div",{className:"co-printdialog__view js-co-printdialog__printrequest-delivery-details"}),(0,s.jsx)("div",{className:"co-printdialog__view js-co-printdialog__printoverview"})]})]}))},39232:function(ve,$,r){"use strict";r.d($,{D:function(){return qn}});var s=r(64681),b=r.n(s),t=r(51761),_=r.n(t),C=r(37522),y=r(50427),g=r(17220),m=r(1505),T=r(63334),E=r(5181);class w extends g.E{constructor(v,A,W){super(v,A,W),this.valueProperty="value",this.$add=A.find(".js-cm-setting-list__add-input"),this.$list=A.find(".js-cm-setting-list__items")}elem(v){const A=this.$ctx;this.settings=new qn(A,this.mod.sandbox),this.isSetting=v||!1,this.valueProperty=this.$ctx.data("valueProperty")||"value",this.api=this.$ctx.data("api"),this.items=A.data("items").items,this.additionalData=A.data("data")||{},this.chooserData=A.data("chooser")||{},this.chooserId=this.chooserData.externalData.id,this.mod.sandbox.subscribe("events",this.mod),this.mod.onAssetChooserAssetChosen=function(W){if(W&&W.externalData&&W.externalData.id===this.chooserId&&W.screenData.length>0){if(this.isSetting){const be=[];for(let ot of W.screenData)typeof this.preAddProccess=="function"&&(ot=this.preAddProccess(ot)),this.items.push(ot),be.push(ot);let Le=this.serialize(be);this.data.post(this.api,Le).then(ot=>{ot.success&&(this.renderList(this.items),typeof this.saved=="function"&&(Le=this.serialize(W.screenData),this.saved(Le)))})}this.mod.fire("closeModal",["events"])}}.bind(this),this.$add.on("keydown",W=>{if(W.keyCode===13)return this.add(this.$add.val()),!1}),A.on("click",".js-cm-setting-list__remove",W=>{const Le=E(W.currentTarget).parents(".js-cm-setting-list__item").data(this.valueProperty);if(this.isSetting){let ot=this.$ctx.data("api");ot&&(ot=`${ot}/${Le}`,this.data.delete(ot).then(He=>{He.success&&(this.items=this.items.filter(ns=>ns[this.valueProperty]!=Le),typeof this.deleted=="function"&&this.deleted(this.items))}))}else this.items=this.items.filter(ot=>ot[this.valueProperty]!==Le),this.renderList(this.items)}),A.on("click",".js-cm-setting-list__add",W=>{W.preventDefault(),this.openAssetchooser()}),A.on("click",".js-cm-setting-list__edit",W=>{W.preventDefault()}),this.$add.on("focusout",()=>{this.unfocus()})}setting(){this.elem(!0)}add(v){if(v.length>0){const A=v.split(",");for(const W of A)if(!this.items.find(Le=>Le[this.valueProperty]===W)){const Le={default:!1};Le[this.valueProperty]=E.trim(W),this.items.push(Le)}this.$add.val(""),this.renderList(this.items)}}leave(){super.leave()}enter(){super.enter(),this.readonly?this.mod.leave(this.$ctx):this.$add.focus()}focus(){this.readonly||this.$add.trigger("focus")}destroy(){this.mod.onAssetChooserAssetChosen=null}renderList(v,A){this.$list.html((0,y.EY)(u(this.$ctx.data("templateList"))||T.J,{data:this.additionalData,items:v||this.items,isLast:A,label_none:this.$ctx.data("labelNone")}));const W=this.$list[0].scrollHeight;this.$list.scrollTop(W)}getExistingRelatedScreensIds(){return this.$ctx.find(".js-cm-setting-list__item").toArray().map(v=>E(v).data("id"))}serialize(v){const A=this.$ctx,W={};v?W[this.id]=v:W[this.id]=this.items;let be=null;const Le=A.data("group");return Le?be=this.createGroup({},Le,W):be=W,be}openAssetchooser(){this.chooserData.filters=this.chooserData.filters.concat({key:"asset_id",values:this.getExistingRelatedScreensIds(),inverted:!0});const v=(0,y.EY)(C.l,this.chooserData);this.mod.fire("openModal",{modifier:"flex",$content:v},["events"])}}const u=k=>{switch(k){case"c-settingspublishing-setting-asset-chooser-list":return m.T;default:return console.error(`Template ${k} not found`),()=>null}};var c=r(2555),o=r(86070),l=r(27833),p=r(14154);const f=(0,p.I)(k=>(0,o.jsx)("div",{className:"co-settings--overlay",children:(0,o.jsx)("fieldset",{className:"co-settings__fieldset--notitle",children:(0,o.jsx)(l.H,{id:"delete_attachment",label:window.translate("Legacy_workspace_attachment_delete"),description:window.translate("Legacy_workspace_attachment_delete_confirmation"),api:`/api/asset-attachment/${k.id}`})})}));var O=r(11097),L=r(60060),P=r(88133),N=r(36523),S=r(5181);class R extends g.E{constructor(v,A,W){super(v,A,W),this.$blankSlate=this.$ctx.find(".js-co-settings__blank"),this.$loadingOverlay=this.$ctx.find(".js-cm-setting-attachments__loading-overlay")}setting(){this.assetId=this.$ctx.data("asset"),this.projectId=this.$ctx.data("project"),this.uploads=[],this.attachments=this.$ctx.data("attachments").map(v=>parseInt(v.id))||[],this.bindAttachmentUpload(),this.bindInlineEditing(),this.bindDelete(),this.bindDragEnterLeave(),this.bindPlatformAnalyticsTracking(),this.bindAttachmentNameHover()}enter(){super.enter()}unfocus(){super.unfocus()}bindAttachmentNameHover(){this.$ctx.on("mouseover",".js-cm-settings__attachment-description",v=>{S(v.currentTarget).addClass("ca-show-full-attachment-name")}),this.$ctx.on("mouseleave",".js-cm-settings__attachment-description",v=>{S(v.currentTarget).removeClass("ca-show-full-attachment-name")})}bindAttachmentUpload(){this.$ctx.find(".js-cm-setting-attachments__files").upload({dataType:"json",dropZone:this.$ctx.find(".js-cm-setting-attachments__dropzone"),before:v=>{const A=v.filter(W=>N.w.isSupportedFilenameForAttachmentInCurrentProject(W.name));return A.length!==v.length&&(0,P.K)({template:"upload-invalid-extension",closeOnConfirm:!0}),A},add:(v,A)=>{this.data.checkStorageLimit(A.files[0].size).then(()=>{A.submit(),this.initAttachment(A.files[0])})},done:async(v,A)=>{A.result&&A.result[0]&&(await this.addAttachment(A.result[0].file_id),this.bindAttachmentNameHover())}})}bindInlineEditing(){this.$ctx.on("blur",".js-cm-setting-attachments__title",v=>{const A=S(v.currentTarget),W=A.closest(".js-cm-setting-attachments__item").data("id");this.data.post(`/api/attachment/update/${W}`,{title:A.text()})}),this.$ctx.on("keypress",".js-cm-setting-attachments__title",v=>{v.keyCode===13&&this.$ctx.find(".js-cm-setting-attachments__title").trigger("blur")})}bindDelete(){this.$ctx.on("click",".js-cm-setting-attachments__toggle",v=>{this.removeAttachment(S(v.currentTarget))})}bindDragEnterLeave(){const v=this.$ctx.find(".js-cm-setting-attachments__dropzone");v.off("dragenter.attachements").on("dragenter.attachements",()=>{v.addClass("cm-setting-attachments__dropzone--dragenter")}),v.off("dragleave.attachements").on("dragleave.attachements",()=>{v.removeClass("cm-setting-attachments__dropzone--dragenter")})}bindPlatformAnalyticsTracking(){this.$ctx.on("click",".js-cm-setting-attachments__download",v=>{const A=S(v.currentTarget);try{const W={attachment_id:A.dataAsNumber("id"),attachment_extension:A.data("attachment-extension"),block_id:null,document_id:null,asset_id:this.assetId,project_id:this.projectId,project_type:this.$ctx.data("projectType"),guideline_id:null,via:this.$ctx.data("projectType"),via_id:this.projectId,download_type:"SINGLE"};O.w.track([{type:"attachment:download",brandId:this.$ctx.data("brandId"),properties:W}])}catch(W){console.error(W)}})}initAttachment(v){this.uploads.push(v.name),this.showLoadingOverlay()}async addAttachment(v){const A=await(0,L.U)(this.assetId,v);this.uploads.splice(this.uploads.indexOf(A.filename),1),this.uploads.length===0&&this.hideLoadingOverlay(),this.$ctx.find(".js-cm-setting-attachments__list").append(S((0,y.EY)(c.t,A))),this.attachments.push(A.id),this.hideBlankSlate()}removeAttachment(v){const A=v.next(".js-cm-setting-attachments__menu"),W=v.data("id"),be=S((0,y.EY)(f,{id:W}));A.empty().append(be);const ot=new qn(be,this.mod.sandbox).getSetting("delete_attachment");ot.focus(),ot.deleted=()=>{v.closest(".js-cm-setting-attachments__item").remove(),this.attachments.splice(this.attachments.indexOf(W),1),this.attachments.length===0&&this.showBlankSlate()},ot.cancelled=()=>{this.mod.fire("closeDropdown",v)}}showBlankSlate(){this.$blankSlate.removeClass("state-hidden")}hideBlankSlate(){this.$blankSlate.addClass("state-hidden")}showLoadingOverlay(){this.$loadingOverlay.addClass("state-visible")}hideLoadingOverlay(){this.$loadingOverlay.removeClass("state-visible")}}var U=r(15993);class B extends g.E{constructor(v,A,W){super(v,A,W),this.$preview=this.$ctx.find(".js-cm-setting-border__preview")}elem(v){this.initialized=!1,v||this.setup()}setting(){this.elem(!0),this.validation(()=>this.saveBorder(),()=>this.mod.leave(this.$ctx))}setup(){this.initialized||(this.initialized=!0,this.settings=new qn(this.$ctx.find(".js-cm-setting__details"),this.mod.sandbox),this.elemWidth=this.settings.getElem(`${this.id}_width`),this.elemRadius=this.settings.getElem(`${this.id}_radius`),this.elemColor=this.settings.getElem(`${this.id}_color`),this.elemWidth.changed=()=>this.update(),this.elemRadius.changed=()=>this.update(),this.elemColor.changed=()=>this.update())}update(){const v=this.serialize(!0);typeof this.changed=="function"&&this.changed(v),this.updatePreview(v[this.id])}updatePreview(v){this.$preview.css("border-width",v.width).css("border-radius",v.radius).css("border-color",v.color)}updateValue(){const v=this.$ctx.find(".js-cm-setting-border__value"),A={value:this.serialize().settings[this.id]};v.html((0,y.EY)(U.W,A))}saveBorder(){const v=this.$ctx;this.save().then(A=>{A.success&&(typeof this.saved=="function"&&this.saved(A),this.showSuccess().then(()=>{this.updateValue(),this.mod.leave(v)}))})}serialize(v){const A=this.id,W=this.$ctx,be={};be[this.id]={width:this.elemWidth.serialize()[`${A}_width`],radius:this.elemRadius.serialize()[`${A}_radius`],color:this.elemColor.serialize()[`${A}_color`]};let Le=null;const ot=W.data("group");return ot&&!v?Le=this.createGroup({},ot,be):Le=be,Le}enter(){super.enter(),this.setup(),this.showDetails().then(()=>{this.elemWidth.focus()})}leave(){super.leave(),this.hideDetails().then(()=>{this.hideActions()})}unfocus(){var v;super.unfocus(),this.$details.velocity("callout.pulse",{duration:300}),(v=this.$size)==null||v.trigger("focus")}}var M=r(5181);class I extends g.E{constructor(v,A,W){super(v,A,W),this.$preview=this.$ctx.find(`.js-cm-setting-button__instant-preview-button--${this.id}`),this.$weight=this.$ctx.find(`#${this.id}_weight`)}elem(v){this.initialized=!1,v||this.setup()}setting(){this.elem(!0),this.validation(()=>this.saveButtonStyle(),()=>{this.hideDetails().then(()=>{this.hideActions()}),this.mod.leave(this.$ctx)}),this.$ctx.on("keydown",v=>{this.active&&v.which===9&&M(v.target).is('button[type="reset"]')&&(v.preventDefault(),this.mod.next(this.$ctx))})}setup(){this.initialized||(this.initialized=!0,this.buttonState="default",this.settings=new qn(this.$ctx.find(".js-cm-setting__details"),this.mod.sandbox),this.elemFont=this.settings.getElem(`${this.id}_search`),this.elemWeight=this.settings.getElem(`${this.id}_weight`),this.elemSize=this.settings.getElem(`${this.id}_size`),this.elemLineHeight=this.settings.getElem(`${this.id}_line_height`),this.elemUppercase=this.settings.getElem(`${this.id}_uppercase`),this.elemItalic=this.settings.getElem(`${this.id}_italic`),this.elemBorderWidth=this.settings.getElem(`${this.id}_border_width`),this.elemBorderRadius=this.settings.getElem(`${this.id}_border_radius`),this.elemFrame=this.settings.getElem(`${this.id}_frame`),this.elemColor=this.settings.getElem(`${this.id}_color`),this.elemBackgroundColor=this.settings.getElem(`${this.id}_background_color`),this.elemBorderColor=this.settings.getElem(`${this.id}_border_color`),this.elemColorHover=this.settings.getElem(`${this.id}_color_hover`),this.elemBackgroundColorHover=this.settings.getElem(`${this.id}_background_color_hover`),this.elemBorderColorHover=this.settings.getElem(`${this.id}_border_color_hover`),this.elemFont.saved=()=>this.updatePreview(!0),this.elemWeight.changed=()=>this.updatePreview(),this.elemSize.changed=()=>this.updatePreview(),this.elemLineHeight.changed=()=>this.updatePreview(),this.elemUppercase.changed=()=>this.updatePreview(),this.elemItalic.changed=()=>this.updatePreview(),this.elemBorderWidth.changed=()=>this.updatePreview(),this.elemBorderRadius.changed=()=>this.updatePreview(),this.elemFrame.changed=()=>this.updatePreview(),this.elemBackgroundColor.changed=()=>this.updatePreview(),this.elemBorderColor.changed=()=>this.updatePreview(),this.elemColor.changed=()=>this.updatePreview(),this.elemBackgroundColorHover.changed=()=>this.updatePreview(),this.elemBorderColorHover.changed=()=>this.updatePreview(),this.elemColorHover.changed=()=>this.updatePreview())}updatePreview(v){const A=this.serialize(!0)[this.id],W=A.uppercase===!0?"uppercase":"initial",be=A.italic===!0?"italic":"initial";if(v===!0&&A.provider==="google"){const Le={google:{families:[A.family_css]}};try{window.WebFont.load(Le)}catch(ot){M.getScript("//ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js",()=>{window.WebFont.load(Le)})}}this.$preview.css("font-family",A.family_css).css("font-weight",A.weight).css("font-size",A.size).css("line-height",A.line_height).css("text-transform",W).css("font-style",be).css("border-width",A.border_width).css("border-radius",A.border_radius).css("padding-top",A.frame.top).css("padding-right",A.frame.right).css("padding-bottom",A.frame.bottom).css("padding-left",A.frame.left),this.buttonState==="hover"?this.$preview.css("color",A.color_hover).css("border-color",A.border_color_hover).css("background-color",A.background_color_hover):this.$preview.css("color",A.color).css("border-color",A.border_color).css("background-color",A.background_color)}saveButtonStyle(){this.save().then(v=>{v.success&&(typeof this.saved=="function"&&this.saved(v),this.showSuccess().then(()=>{this.hideDetails()}),this.mod.leave(this.$ctx))})}serialize(v){const A=this.id,W=M(".js-cm-setting-search__item",this.$ctx).data("css"),be=M(".js-cm-setting-search__item",this.$ctx).data("family"),Le=M(".js-cm-setting-search__item",this.$ctx).data("provider"),ot={};ot[this.id]={family_css:W,family:be,color:this.elemColor.serialize()[`${A}_color`],color_hover:this.elemColorHover.serialize()[`${A}_color_hover`],provider:Le.toLowerCase(),weight:this.elemWeight.serialize()[`${A}_weight`],size:this.elemSize.serialize()[`${A}_size`],line_height:this.elemLineHeight.serialize()[`${A}_line_height`],uppercase:this.elemUppercase.serialize()[`${A}_uppercase`],italic:this.elemItalic.serialize()[`${A}_italic`],border_width:this.elemBorderWidth.serialize()[`${A}_border_width`],border_radius:this.elemBorderRadius.serialize()[`${A}_border_radius`],border_color:this.elemBorderColor.serialize()[`${A}_border_color`],border_color_hover:this.elemBorderColorHover.serialize()[`${A}_border_color_hover`],frame:this.elemFrame.serialize()[`${A}_frame`],background_color:this.elemBackgroundColor.serialize()[`${A}_background_color`],background_color_hover:this.elemBackgroundColorHover.serialize()[`${A}_background_color_hover`]};let He=null;return this.$ctx.data("group")&&!v?(He={},He[this.$ctx.data("group")]=ot):He=ot,He}enter(){super.enter(),this.setup(),this.$ctx.on("mouseenter.previewButton",`.js-cm-setting-button__instant-preview-button--${this.id}`,()=>{this.buttonState="hover",this.updatePreview()}),this.$ctx.on("mouseleave.previewButton",`.js-cm-setting-button__instant-preview-button--${this.id}`,()=>{this.buttonState="default",this.updatePreview()}),this.showDetails().then(()=>{this.$weight.trigger("focus")})}leave(){super.leave(),this.$ctx.off("mouseenter.previewButton"),this.$ctx.off("mouseleave.previewButton"),this.$ctx.off("keydown")}onTabSwitched(v){v.id==="hover"?this.buttonState="hover":this.buttonState="default",this.updatePreview(!1)}unfocus(){super.unfocus(),this.$details.velocity("callout.pulse",{duration:300}),this.$weight.trigger("focus")}}var F=r(5181);class te extends g.E{constructor(v,A,W){super(v,A,W)}elem(){this.readonly=this.$ctx.data("readonly"),this.allowMultiple=this.$ctx.data("multiple")===!0,this.id=this.$ctx.data("id"),this.$ctx.on("click",".js-cm-setting-chooser__type",v=>{const A=F(v.currentTarget);return!this.readonly&&A.hasClass("state-selected")&&this.allowMultiple?(A.removeClass("state-selected"),!1):(!this.readonly&&!A.hasClass("state-selected")&&(this.allowMultiple||this.$ctx.find(".js-cm-setting-chooser__type").removeClass("state-selected"),A.addClass("state-selected"),typeof this.changed=="function"&&this.changed(this.serialize(),this.id)),!1)})}setting(){this.elem(),this.$ctx.on("click",".js-cm-setting-chooser__type",()=>{this.readonly||this.save().then(v=>{v.success&&typeof this.saved=="function"&&this.saved(v)})})}enter(){this.mod.leave(this.$ctx)}leave(){super.leave()}serialize(){const v=this.$ctx.find(".js-cm-setting-chooser__type.state-selected"),A=this.$ctx.data("group"),W={};let be={};if(this.allowMultiple){const Le=this.id,ot=[];ot[Le]=[],v.each((He,ns)=>{ot[Le].push(F(ns).data()[Le])}),F.extend(!0,W,ot)}else F.extend(!0,W,v.data());return A?be[A]=W:be=W,be}}var fe=r(7017),Ie=r(49198),de=r.n(Ie);const q=(0,p.I)(k=>{var v;return(0,o.jsxs)(o.Fragment,{children:[k.hasPicker?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h5",{className:"cm-setting-color__palette-title ",children:"Reset"}),(0,o.jsx)("ul",{className:"cm-setting-color__palette-list",children:(0,o.jsx)("li",{className:"cm-setting-color__palette-item",children:(0,o.jsx)("a",{title:"Transparent",className:`js-cm-setting-color__palette-color cm-setting-color__palette-color${k.selected?"":" state-selected"} state-light`,style:{backgroundImage:"url(/img/transparent.png)"},"data-value":"rgba(0,0,0,0)","data-name":"Transparent",children:(0,o.jsx)("i",{className:"icon-check"})})})})]}),(v=Object.keys(k.palettes))==null?void 0:v.map(A=>{var W;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h5",{className:"cm-setting-color__palette-title",children:k.palettes[A].name}),(0,o.jsx)("ul",{className:"cm-setting-color__palette-list",children:(W=Object.keys(k.palettes[A].colors))==null?void 0:W.map(be=>(0,o.jsx)("li",{className:"cm-setting-color__palette-item",children:(0,o.jsx)("a",{title:k.palettes[A].colors[be].name,className:`js-cm-setting-color__palette-color cm-setting-color__palette-color${k.palettes[A].colors[be].active?" state-selected":""}${k.palettes[A].colors[be].light?" state-light":""}`,style:{backgroundColor:`${k.palettes[A].colors[be].css_value}`},"data-value":k.palettes[A].colors[be].css_value,"data-name":k.palettes[A].colors[be].name,children:(0,o.jsx)("i",{className:"icon-check"})})},be))})]})})]})});var re=r(5181);class me extends g.E{static get TAB_KEY_CODE(){return 27}constructor(v,A,W){super(v,A,W),this.$hex=A.find(".js-cm-setting-color__hex"),this.$hexSimple=A.find(".js-cm-setting-color__hex-simple"),this.$r=A.find(".js-cm-setting-color__r"),this.$g=A.find(".js-cm-setting-color__g"),this.$b=A.find(".js-cm-setting-color__b"),this.$a=A.find(".js-cm-setting-color__a"),this.$palette=A.find(".js-cm-setting-color__palette"),this.$picker=A.find(".js-cm-setting-color__picker"),this.$chooser=A.find(".js-cm-setting-color__chooser"),this.$bubble=A.find(".js-cm-setting-color__bubble"),this.$tooltip=A.find(".js-cm-setting-color__tooltip"),this.$reset=A.find(".js-cm-setting-color__reset"),this.$cancel=A.find(".js-cm-setting-color__cancel"),this.$save=A.find(".js-cm-setting-color__save"),this.$preview=A.find(".js-cm-setting-color__preview"),this.shouldCloseOnClickOutside=A.dataAsBoolean("closeOnClickOutside")}elem(v){const A=this.$ctx;this.hasPalette=this.$palette.length>0,this.hasPicker=this.$picker.length>0,this.hasBubble=this.$bubble.length>0,this.readonly=A.data("readonly"),this.tiny=de()(A.data("color")),this.previousColor=this.tiny,this.pickerIsOpen=!1,(this.hasBubble||this.hasPicker)&&(this.$hex.on("paste",re.debounce(10,()=>this.setColor(this.$hex.val()))),this.$hex.on("change",()=>this.setColor(this.$hex.val()))),this.hasBubble&&(this.$hexSimple.on("keydown",re.debounce(50,()=>{this.fromSimple=!0,this.setColor(this.$hexSimple.val()),this.fromSimple=!1})),this.$bubble.on("click",W=>{W.stopPropagation(),this.togglePickerTooltip()})),this.hasPicker&&(this.picker=this.$picker.spectrum({color:this.tiny.toRgbString(),change:re.throttle(50,W=>this.updateColor(W))}),this.$chooser.on(".js-cm-setting-color__r, .js-cm-setting-color__g, .js-cm-setting-color__b, .js-cm-setting-color__a","paste",re.debounce(10,()=>this.setColor(this.$hex.val()))),this.$chooser.on("change",".js-cm-setting-color__r, .js-cm-setting-color__g, .js-cm-setting-color__b, .js-cm-setting-color__a",()=>this.setColor(this.getRgbaColor())),this.$chooser.on("keydown",W=>{this.active&&W.which===me.TAB_KEY_CODE&&(W.shiftKey&&re(W.target).is('input[name="color"]')?(W.preventDefault(),this.mod.prev(A)):re(W.target).is('button[type="reset"]')&&(W.preventDefault(),this.mod.next(A)))}),this.$tooltip.on("click mousedown",W=>W.stopPropagation()),this.$reset.on("click",()=>this.resetPickerColor()),this.$cancel.on("click",W=>{W.preventDefault(),this.setColor(this.previousColor),this.closePickerTooltip()}),this.$save.on("click",W=>{W.preventDefault(),this.previousColor=this.tiny,this.closePickerTooltip()})),this.hasPalette&&this.$chooser.on("click",".js-cm-setting-color__palette-color",W=>{const be=re(W.currentTarget);this.$chooser.find(".js-cm-setting-color__palette-color").removeClass("state-selected"),be.addClass("state-selected"),this.setColor(be.data("value"))}),v||(this.setColor(A.data("color")),this.hasPalette&&this.loadPalette(),this.hasPicker&&this.picker.spectrum("reflow")),re(document).on("lazybeforeunveil",W=>{re(W.target).is(A)&&this.hasPicker&&this.picker.spectrum("reflow")}),this.$preview.attr("tabindex")!=="-1"&&this.$preview.on("keydown",W=>{["Enter","Space"].includes(W.code)&&(W.stopPropagation(),this.enter())})}setting(){const v=this.$ctx;this.elem(!0),v.on("submit",A=>{A.preventDefault(),this.showLoader(),this.save().then(W=>{W.success&&(v.data("css",this.tiny.toRgbString()),typeof this.saved=="function"&&(W.rgb_value=this.tiny.toRgbString(),this.saved(W)),this.updatePreview(),this.showSuccess().then(()=>this.mod.leave(v)))})}).on("reset",()=>this.mod.leave(v))}enter(){super.enter();const v=this.$ctx;if(this.readonly)this.mod.leave(v);else{const A=v.data("color");let W=Promise.resolve();this.hasPalette&&(W=this.loadPalette(A)),W.then(()=>{this.setColor(A),this.showDetails().then(()=>{this.hasPicker&&(this.picker.spectrum("reflow"),this.$hex.trigger("focus").trigger("select")),this.shouldCloseOnClickOutside&&this.setupClickOutsideHandler()})})}}leave(){super.leave(),this.hideDetails().then(()=>this.hideActions()),this.removeClickOutsideHandler()}reset(){this.setColor(this.$ctx.data("color"))}unfocus(){this.mod.leave(this.$ctx),this.readonly||(this.$details.velocity("callout.pulse",{duration:300}),this.focus())}focus(){this.hasPicker&&!this.readonly&&this.$hex.trigger("focus")}serialize(){const v=this.$ctx,A={},W=v.data("set");if(W){const ot=W.split(",");for(const He of ot)He==="id"?A[this.id]=this.tiny.toRgbString():He==="hex"?A.hex=this.tiny.toHex():(He==="alpha"||He==="a"||He==="opacity")&&(A[He]=this.tiny.getAlpha()*100)}else A[this.id]=this.tiny.toRgbString();let be=null;const Le=v.data("group");return Le?be=this.createGroup({},Le,A):be=A,be}hide(){this.$details.hide()}togglePickerTooltip(){this.$tooltip.hasClass("state-visible")?this.closePickerTooltip():this.openPickerTooltip()}closePickerTooltip(){re("html").off("mousedown.settingcolor"),re(document).off("keyup.settingcolor"),this.$tooltip.removeClass("state-visible"),this.$tooltip.removeAttr("style"),this.pickerIsOpen=!1}openPickerTooltip(){this.$tooltip.addClass("state-visible");const v={placement:"top",strategy:"absolute",modifiers:[{name:"preventOverflow",enabled:!0,options:{altAxis:!0,padding:10,rootBoundary:"document"}},{name:"flip",enabled:!0},{name:"offset",options:{offset:[0,0]}}]},A=this.$tooltip.get(0),W=this.$bubble.get(0);this.popper=(0,fe.n4)(W,A,v),re("html").on("mousedown.settingcolor",be=>{const Le=re(be.target);Le.closest(".js-cm-setting-color__tooltip").length===0&&!Le.closest(".js-cm-setting-color__bubble").is(this.$bubble)&&this.closePickerTooltip()}),re(document).on("keyup.settingcolor",be=>{be.which===27&&this.closePickerTooltip()}),this.$hex.trigger("focus").trigger("select"),this.pickerIsOpen=!0}loadPalette(v){return this.data.get(`/api/color/library/${this.$palette.data("palette")}`).then(A=>{for(const W of A.palettes)if(W.colors&&W.colors.length>0)for(const be of W.colors)de().equals(v,be.css_value)&&(be.active=!0,A.selected=!0);return A.hasPicker=this.hasPicker,this.$palette.html((0,y.EY)(q,A)),!0})}setColor(v){let A=de()(v);A.isValid()||(A=de()("rgba(255,255,255,0)")),this.tiny=A,this.hasPicker&&this.picker.spectrum("set",A),this.hasBubble&&this.$bubble.css({backgroundColor:this.tiny.toRgbString()})}updateColor(v){this.tiny=v;const A=v._roundA===0?"transparent":v.toHexString();if(this.hasPicker){this.$hex.val(A);const W=v.toRgb();this.$r.val(W.r),this.$g.val(W.g),this.$b.val(W.b),this.$a.val(W.a)}this.hasBubble&&(this.$bubble.css({backgroundColor:v.toRgbString()}),this.fromSimple||this.$hexSimple.val(A)),typeof this.changed=="function"&&this.changed(v)}updatePreview(){const v=this.$ctx;v.find(".js-cm-setting-color__value").text(this.tiny.toHexString()),v.find(".js-cm-setting-color__preview").css({backgroundColor:this.tiny.toRgbString()}),v.data("color",this.tiny.toRgbString())}getRgbaColor(){return`rgba(${this.$r.val()},${this.$g.val()},${this.$b.val()},${this.$a.val()})`}resetPickerColor(){this.$r.val("255"),this.$g.val("255"),this.$b.val("255"),this.$a.val("0"),this.setColor(this.getRgbaColor())}handleCloseOnClickOutside(v){const A=this.$details[0];!A||!(v.target instanceof Element)||A.contains(v.target)||this.mod.leave()}setupClickOutsideHandler(){this.boundClickOutsideHandler=this.handleCloseOnClickOutside.bind(this),document.addEventListener("click",this.boundClickOutsideHandler)}removeClickOutsideHandler(){this.boundClickOutsideHandler&&document.removeEventListener("click",this.boundClickOutsideHandler)}}var ie=r(5181);class ee extends g.E{constructor(v,A,W){super(v,A,W)}elem(){const v=this.$ctx;v.on("click",".js-cm-setting-colorlabel__link",A=>{v.find(".js-cm-setting-colorlabel__link").removeClass("state-active"),ie(A.currentTarget).addClass("state-active")})}setting(){const v=this.$ctx;this.elem(),v.on("click",".js-cm-setting-colorlabel__link",()=>{this.save().then(A=>{A.success&&typeof this.saved=="function"&&this.saved(A)})})}enter(){const v=this.$ctx;this.mod.leave(v)}leave(){super.leave()}serialize(){const v=this.$ctx,A={};A[this.id]=v.find(".js-cm-setting-colorlabel__link.state-active").data("color");let W=null;return v.data("group")?(W={},W[v.data("group")]=A):W=A,W}}const pe=(0,p.I)(k=>{var v;const A=k.value!=="none"?de()(k.value):de()("transparent");return(0,o.jsxs)(o.Fragment,{children:[k.mode==="define"&&k.colors.length===0?(0,o.jsx)("li",{className:"cm-setting-colorlist__item cm-setting-colorlist__item--blank",children:window.translate("Legacy_settings_colorlist_blank")}):null,k.colors?(v=k.colors)==null?void 0:v.map(W=>{const be=de()(W);return be.isValid()?(0,o.jsx)("li",{className:"cm-setting-colorlist__item",children:(0,o.jsx)("button",{type:"button","data-color":be.toRgbString(),className:`js-cm-setting-colorlist__color cm-setting-colorlist__btn ${be.isDark()?"cm-setting-colorlist__btn--dark":""} ${k.mode==="choose"?` js-cm-setting-colorlist__choose${de().equals(be,A)?" state-active":""} `:`${k.mode==="define"?" js-cm-setting-colorlist__delete ":""}`} `,children:k.mode==="choose"?(0,o.jsx)("i",{"aria-hidden":!0,className:"ca-icon--check ca-icon--sm",style:{background:`${be.toRgbString()}`}}):k.mode==="define"?(0,o.jsx)("i",{"aria-hidden":!0,className:"ca-icon--trash ca-icon--sm",style:{background:`${be.toRgbString()}`}}):null})}):null}):null]})});var je=r(64182);const Be=(0,p.I)(k=>(0,o.jsxs)("div",{className:"cm-setting-colorlist__menu",children:[(0,o.jsx)("div",{className:"cm-setting-colorlist__fields",children:(0,o.jsx)(je.g,{id:"color",picker:!0,palette:k.palette||!1,value:k.value||"#000000"})}),(0,o.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer",children:[(0,o.jsx)("button",{className:"cm-btn cm-btn--default js-cm-setting-colorlist__menu-close",type:"button",children:window.translate("Legacy_btn_cancel")}),(0,o.jsx)("button",{className:"cm-btn cm-btn--primary js-cm-setting-colorlist__add",type:"button",children:window.translate("Legacy_settings_colorlist_add")})]})]}));var Ne=r(5181);class ce extends g.E{constructor(v,A,W){super(v,A,W),this.$colors=this.$ctx.find(".js-cm-setting-colorlist__list")}elem(){this.mode="choose",this.multiSelection=this.$ctx.data("multiSelection")||!1,this.colors=this.$ctx.data("colors")||[],this.value=this.$ctx.data("value")||"none",this.palette=this.$ctx.data("palette"),this.settings=null,this.lastColor="#000000",this.$ctx.on("click",".js-cm-setting-colorlist__choose",v=>{const A=Ne(v.currentTarget),W=A.data("color");this.value===W?this.value="none":this.value=A.data("color"),this.renderColors(),typeof this.changed=="function"&&this.changed(this.serialize())}),this.renderColors()}setting(){this.mode=this.$ctx.data("mode")||"choose",this.multiSelection=this.$ctx.data("multiSelection")||!1,this.colors=this.$ctx.data("colors")||[],this.value=this.$ctx.data("value")||"none",this.$colors=this.$ctx.find(".js-cm-setting-colorlist__list"),this.palette=this.$ctx.data("palette"),this.settings=null,this.mode==="choose"?this.$ctx.on("click",".js-cm-setting-colorlist__choose",v=>{const A=Ne(v.currentTarget);this.value=A.data("color"),this.renderColors(),this.save().then(W=>{W.success&&typeof this.saved=="function"&&this.saved(W)})}):this.mode==="define"&&(this.$ctx.on("click",".js-cm-setting-colorlist__toggle-chooser",v=>{if(v.stopPropagation(),v.preventDefault(),this.popper)this.closePopper();else{const A=Ne(v.currentTarget),W=Ne((0,y.EY)(Be,{value:this.lastColor,palette:this.palette}));this.$ctx.append(W),this.openPopper(A,W,{placement:"bottom-end"}),this.settings=new qn(W,this.mod.sandbox)}}),this.$ctx.on("click",".js-cm-setting-colorlist__add",()=>{const v=this.settings.serialize(),A=de()(v.color);this.colors.find(be=>de().equals(A,be))||(this.colors.push(v.color),this.lastColor=v.color),this.renderColors(),this.closePopper(),this.save().then(be=>{be.success&&typeof this.saved=="function"&&this.saved(be)})}),this.$ctx.on("click",".js-cm-setting-colorlist__delete",v=>{const A=Ne(v.currentTarget),W=de()(A.data("color"));this.colors=this.colors.filter(be=>!de().equals(W,be)),this.renderColors(),this.save().then(be=>{be.success&&typeof this.saved=="function"&&this.saved(be)})}),this.$ctx.on("click",".js-cm-setting-colorlist__menu-close",()=>{this.closePopper()})),this.renderColors()}renderColors(){this.$colors.html((0,y.EY)(pe,{colors:this.colors,value:this.value,mode:this.mode}))}enter(){const v=this.$ctx;this.mod.leave(v)}leave(){super.leave()}serialize(){const v=this.$ctx,A={},W=[];let be;this.mode==="choose"?be=v.find(".js-cm-setting-colorlist__color.state-active"):this.mode==="define"&&(be=v.find(".js-cm-setting-colorlist__color")),be.each((ot,He)=>{const vs=Ne(He).data("color");W.includes(vs)||W.push(vs)}),A[this.id]=this.multiSelection||this.mode==="define"?W:W[0];let Le=null;return v.data("group")?(Le={},Le[v.data("group")]=A):Le=A,Le}openPopper(v,A,W){const be={placement:"bottom",modifiers:[{name:"preventOverflow",options:{padding:20}}]};W=Ne.extend(!0,{},be,W),this.popper&&this.closePopper();const Le=v.get(0),ot=A.get(0);this.popper=(0,fe.n4)(Le,ot,W)}closePopper(){this.popper&&(this.popper.state.elements.popper.remove(),this.popper.destroy(),this.popper=null)}}var se=r(98609),ge=r.n(se),$e=r(5181);class et extends g.E{constructor(v,A,W){super(v,A,W),this.$date=A.find(".js-cm-setting__input"),this.readonly=this.$date.is("[readonly]"),this.format=A.data("format")||"DD/MM/YYYY",this.formatValue=A.data("formatValue"),this.noMinDate=A.dataAsBoolean("noMinDate")||!1,this.minDate=A.data("minDate"),this.maxDate=A.data("maxDate"),this.allowEmpty=A.dataAsBoolean("allowEmpty")||!1,this.picker=null,this.lastSavedValueAsMomentObject=null,this.lastChangedValueAsFormattedString=null}elem(){this.readonly||(this.lastSavedValueAsMomentObject=this.getValue(),this.lastChangedValueAsFormattedString=this.getValue(!0),this.registerEvents())}setting(){this.elem();const v=this.$ctx;this.validation(()=>{this.save().then(A=>{typeof this.saved=="function"&&this.saved(A),A.success?(this.mod.leave(v),this.showSuccess()):A.errors&&this.showErrors(A.errors),this.lastSavedValueAsMomentObject=this.getValue()})}),v.on("reset.setting-date",A=>{A.preventDefault(),this.resetValue()})}registerEvents(){const v=this.$ctx;this.$date.is("[data-mask]")&&(this.$date.addClass(`js-cm-setting__input-${this.id}`),v.find(`.js-cm-setting__input-${this.id}`).mask(`${this.$date.data("mask")}`)),v.on("focusin.setting-date",".js-cm-setting__bar",A=>{$e(A.currentTarget).addClass("state-active")}),v.on("focusout.setting-date",".js-cm-setting__bar",A=>{$e(A.currentTarget).removeClass("state-active"),this.submitValue()}),v.on("click.setting-date",".js-cm-setting__group-prefix, .js-cm-setting__label",A=>{A.preventDefault(),this.$date.trigger("click")}),this.allowEmpty&&this.$date.on("keydown.setting-date",A=>{this.destroyPicker(),A.which===13&&this.submitValue()})}unregisterEvents(){this.$ctx.off(".setting-date"),this.$date.off(".setting-date")}initPicker(){if(this.picker!==null)return;const v=this.$date.get(0),{minDate:A,maxDate:W}=this.getDateBoundaries();this.picker=new window.Pikaday({field:v,format:this.format,minDate:A,maxDate:W,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:ge().localeData().months(),weekdays:ge().localeData().weekdays(),weekdaysShort:ge().localeData().weekdaysShort()},onSelect:()=>{this.submitValue()}}),$e(this.picker.el).on("mousedown.setting-date click.setting-date",be=>{be.stopPropagation()})}getDateBoundaries(){let v,A;return this.noMinDate===!1&&(v=new Date),this.minDate&&(v=new Date(this.minDate)),this.maxDate&&(A=new Date(this.maxDate)),{minDate:v,maxDate:A}}destroyPicker(){this.picker!==null&&(this.picker.destroy(),this.picker=null)}submitValue(){var v,A;if(this.readonly)return;const W=this.getValue(!0);W!==this.lastChangedValueAsFormattedString&&(W===null&&this.setValue(null),this.isSetting?(W!==null&&this.setValue(((v=this.picker)==null?void 0:v.getMoment())||null),this.$date.submit()):this.$date.val(((A=this.picker)==null?void 0:A.toString())||""),typeof this.changed=="function"&&this.changed(this.serialize()),this.lastChangedValueAsFormattedString=W)}enter(){this.$date.trigger("click"),super.enter(),!this.readonly&&this.isSetting?this.showActions():this.mod.leave(this.$ctx)}leave(){super.leave(),this.readonly||this.hideActions()}focus(){return this.readonly||(this.isSetting?this.enter():this.$date.trigger("focus")),this}unfocus(v){super.unfocus(),this.picker&&this.picker.hide(),this.mod.leave(this.$ctx),v&&this.mod.enter(v)}getPicker(){return this.picker}setValue(v){var A,W,be;if(this.initPicker(),v)return(A=this.picker)==null||A.setMoment(v,!0),this.$date.val(v.format(this.format)),this;if(this.allowEmpty)(W=this.picker)==null||W.setDate(null,!0),this.$date.val("");else{const Le=ge()();(be=this.picker)==null||be.gotoToday(),this.$date.val(Le.format(this.format))}return this.readonly&&this.destroyPicker(),this}resetValue(){this.setValue(this.lastSavedValueAsMomentObject),this.$date.submit()}getValue(v){var A,W,be;this.initPicker();let Le=null;const ot=((A=this.picker)==null?void 0:A.getDate())!==null;return ot&&(Le=(W=this.picker)==null?void 0:W.getMoment()),!ot&&!this.allowEmpty&&(Le=(be=this.picker)==null?void 0:be.getMoment()),this.readonly&&this.destroyPicker(),v===!0&&Le!==null&&(Le=Le==null?void 0:Le.format(this.format)),Le}serialize(){const v=this.$ctx;let A;const W={};return W[this.id]=this.getValue()!==null?this.getValue().format(this.formatValue):null,v.data("group")?(A={},A[v.data("group")]=W):A=W,A}destroy(){this.$ctx.removeData(),this.picker&&this.picker.destroy(),this.unregisterEvents()}}var rt=r(2231),Qe=r(5181);class it extends g.E{static get DURATION(){return 200}static get DELAY(){return 190}constructor(v,A,W){super(v,A,W),this.$btn=A.find(".js-cm-setting-delete__btn"),this.$confirmation=A.find(".js-cm-setting-delete__confirmation"),this.$error=A.find(".js-cm-setting-delete__error"),this.httpMethod=this.$ctx.data("method")?this.$ctx.data("method").toLowerCase():"delete"}elem(){}setting(){const v=this.$ctx;this.heightShouldChange=null,v.on("click",".js-cm-setting-delete__btn",(A,W)=>{A.preventDefault(),A.stopPropagation();const be=W?1:it.DURATION;this.containerHeightShouldChange()&&this.getSettingContainer().velocity({height:`${this.$confirmation.outerHeight()}px`},{duration:be}),this.$btn.velocity("transition.slideDownOut",{duration:be}),this.$confirmation.velocity("transition.slideUpIn",{duration:be,delay:it.DELAY})}),v.on("click",".js-cm-setting-delete__cancel",A=>{A.preventDefault(),this.containerHeightShouldChange()&&this.getSettingContainer().velocity({height:`${this.$btn.height()}px`},{duration:it.DURATION,delay:it.DELAY}),this.$confirmation.velocity("transition.slideDownOut",{duration:it.DURATION,complete:()=>{typeof this.cancelled=="function"&&this.cancelled()}}),this.$btn.velocity("transition.slideUpIn",{duration:it.DURATION,delay:it.DELAY,display:"flex"})}),v.on("click",".js-cm-setting-delete__delete",A=>{this.apiCall(A)}),v.on("click",".js-cm-setting-delete__instant-btn",A=>{this.apiCall(A)})}async apiCall(v){const A=v.target;Qe(A).prop("disabled",!0);const W=await this.delete();W.success?typeof this.deleted=="function"&&await this.deleted(W):W.referenced?(0,P.K)({text:(0,y.EY)(rt.D,W),template:"delete-with-block-references",closeOnConfirm:!0}):(W.error&&W.error_message?this.$error.find(".js-cm-setting-delete__error").text(W.error_message):W.error&&this.$error.find(".js-cm-setting-delete__error").text(W.error),W.error_link&&this.$error.find(".js-cm-setting-delete-link").attr("href",W.error_link.url).text(W.error_link.text).addClass("is-visible"),this.getSettingContainer().velocity({height:`${this.$error.outerHeight()}px`}),this.$confirmation.velocity("transition.slideDownOut",{duration:it.DURATION,complete:()=>{this.$error.velocity("transition.slideUpIn",{duration:it.DURATION})}})),Qe(A).prop("disabled",!1)}containerHeightShouldChange(){return this.heightShouldChange===null&&(this.heightShouldChange=this.$confirmation.outerHeight()!==0),this.heightShouldChange}getSettingContainer(){const v=this.$ctx.find(".cm-setting__preview");return v.length>0?v:this.$ctx}focus(){this.$ctx.find(".js-cm-setting-delete__btn").trigger("click",!0)}serialize(){return{}}delete(){const v=this.$ctx.data("api"),A=this.$ctx.data("data")||{};return v?this.data[this.httpMethod](v,A):Promise.resolve(Qe.extend(!0,{},{success:!0}))}enter(){this.mod.leave(this.$ctx)}leave(){super.leave()}}var ct=r(90166),ft=r(5181);class _s extends g.E{constructor(v,A,W){super(v,A,W),this.$select=this.$ctx.find("select")}elem(v){this.isSetting=v,this.readonly=this.$select.is("[readonly]"),this.expand=this.$ctx.data("expand")||!1,this.nonSelectionAllowed=this.$ctx.data("nonSelection")||!1,this.current=null,this.float=!!this.$ctx.data("float"),this.$select.on("click",A=>A.stopPropagation()),this.initSelect(),this.$ctx.on("focusin",".js-cm-setting__bar",A=>{ft(A.currentTarget).addClass("state-active")}).on("focusout",".js-cm-setting__bar",A=>{ft(A.currentTarget).removeClass("state-active")})}setting(){this.elem(!0),this.$ctx.find(".ca-dropdown").attr("tabindex","-1"),this.$ctx.on("keydown",v=>{this.active&&v.which===9&&(v.preventDefault(),v.shiftKey?this.mod.prev(this.$ctx):this.mod.next(this.$ctx))}),this.$ctx.on("submit",v=>{v.preventDefault(),this.current!==this.$select.val()?this.save().then(A=>{A.success&&(typeof this.saved=="function"&&this.saved(A),setTimeout(()=>{this.mod.leave(this.$ctx),this.showSuccess()},0))}):this.mod.leave(this.$ctx)}).on("reset",()=>{this.mod.leave(this.$ctx)})}initSelect(){this.$select.dropdown({float:this.float,nonSelection:this.nonSelectionAllowed,changed:function(){typeof this.changed=="function"&&this.changed(this.serialize()),this.isSetting&&this.$ctx.trigger("submit")}.bind(this),open:function(){if(this.expand){const v=this.$ctx.find(".js-ca-dropdown__list"),W=v.offset().top+parseInt(v.outerHeight())+30;this.mod.resize(W)}}.bind(this),close:function(){this.expand&&this.mod.resize()}.bind(this)})}setOptions(v){this.$select.html((0,y.EY)(ct.g,{non_selection:this.nonSelectionAllowed,options:v})),this.initSelect()}addOptions(v,A){const W=(0,y.EY)(ct.g,{non_selection:this.nonSelectionAllowed,options:v});A?this.$select.prepend(W):this.$select.append(W),this.initSelect()}enter(){super.enter(),this.current=this.$select.val(),this.readonly?this.mod.leave(this.$ctx):(this.showActions(),this.$ctx.find(".ca-dropdown > .selected").trigger("mouseup"))}leave(){super.leave();const v=this.$ctx;this.hideActions(),v.find(".js-cm-setting__bar").removeClass("state-active"),v.find(".ca-dropdown").trigger("blur")}focus(){const v=this.$ctx;this.readonly||(this.isSetting?this.enter():v.find(".ca-dropdown > .selected").trigger("mouseup"))}unfocus(v){super.unfocus();const A=this.$ctx;this.readonly||(this.mod.leave(A),this.mod.enter(v))}destroy(){this.leave()}serialize(){const v={};v[this.id]=this.$ctx.find("select").val();let A=null;const W=this.$ctx.data("group");return W?A=this.createGroup({},W,v):A=v,A}getValue(){return this.$ctx.find("select").val()}setIndex(v){this.$ctx.find(".js-ca-dropdown__list").find(`li[data-index="${v}"]`).trigger("mouseup")}}var Bt=r(41011),gt=r(72297),Ct=r(9786),at=r(88314),Ht=r(74450),Vt=r(11485),Fs=r(81178),Hs=r(6006);class Us extends g.E{constructor(v,A,W){super(v,A,W),this.$submitButton=this.$ctx.find(".js-cm-setting__actions button[type=submit]")}setting(){this.value=this.$ctx.dataAsString("value"),this.settings=new qn(this.$ctx,this.mod.sandbox),this.validation(()=>{this.requestEmailChange()},()=>{this.hideDetails(),this.mod.leave(this.$ctx)}),this.$ctx.on("keyup",v=>{this.handleSubmitButtonState(v.target.value)}),this.$ctx.on("paste",v=>{const A=(v.originalEvent||v).clipboardData.getData("text/plain");this.handleSubmitButtonState(A)}),this.handleEmailNotVerifiedState()}handleSubmitButtonState(v){this.value===v?this.$submitButton.attr("disabled","disabled"):this.$submitButton.removeAttr("disabled")}requestEmailChange(){this.save().then(v=>{if(!v.success)return this.showGeneralErrorSwal();this.showSuccess().then(()=>{this.$ctx.trigger("reset"),this.hideDetails(),this.mod.leave(this.$ctx),this.showConfirmEmailModal()})}).catch(()=>{this.showGeneralErrorSwal()})}showGeneralErrorSwal(){(0,P.K)({template:"general-error",closeOnConfirm:!0}),this.$ctx.trigger("reset"),this.hideLoader()}showConfirmEmailModal(){this.mod.fire("swal",{template:"confirm-changed-email-address",closeOnConfirm:!0,email:this.email})}serialize(){return this.email=this.$ctx.find("#email").val(),{email:this.email}}enter(){super.enter();const v=this.$ctx.find("#email");this.email=v.val(),this.handleSubmitButtonState(this.email),this.showDetails().then(()=>{v.select()})}handleEmailNotVerifiedState(){const v=this.$ctx.find(".js-cm-setting__user-email-verification-state").get(0);this.isUserEmailVerified()?this.renderUserEmailVerificationStateBadge(v):this.renderUserEmailVerificationStateButton(v)}isUserEmailVerified(){var v;return((v=(0,Fs.vD)())==null?void 0:v.email_verified_at)!==null}renderUserEmailVerificationStateButton(v){const A={onClick:()=>this.sendVerificationEmail(),style:Bt.in.Secondary,hugWidth:!0,size:Bt.Mp.Small,icon:(0,o.jsx)(gt.default,{}),children:window.translate("UserVerifyEmail_profileButtonText")};(0,y.Cc)(Ct.$,v,A)}renderUserEmailVerificationStateBadge(v){const A={style:at.$l.Positive,emphasis:at.Wl.None,size:"m",icon:(0,o.jsx)(Ht.default,{}),children:window.translate("UserVerifyEmail_profileBadgeText")};(0,y.Cc)(Vt.E,v,A)}sendVerificationEmail(){(0,Hs.kH)(this.mod.sandbox.getConfigParam("user")).then(v=>{v.success?this.showVerifyYourUserEmailSwal():this.showGeneralErrorSwal()}).catch(()=>{this.showGeneralErrorSwal()})}showVerifyYourUserEmailSwal(){(0,P.K)({template:"verify-your-user-email",closeOnConfirm:!0})}}var ys=r(4957);const Vs=(0,p.I)(k=>(0,o.jsx)("div",{className:"cm-setting-folderlist__message",children:k.isCurrentProject?window.translate("Legacy_txt_folder_add",{query:k.query}):window.translate("Legacy_medialibrary_search_no_results")}));var Oa=r(93791),nn=r(78149);const Va=(0,p.I)(k=>{var v,A;return(0,o.jsxs)("li",{className:"cm-tree__branch js-cm-tree__branch",children:[(0,o.jsxs)("div",{className:"cm-tree__item js-cm-tree__item","data-id":k.item.id,children:[k.item[k.childVariable].length>0?(0,o.jsx)("span",{className:"cm-tree__state-indicator js-cm-tree__icon-show",tabIndex:0,children:(0,o.jsx)("i",{className:"icon-angle-right"})}):(0,o.jsx)("span",{className:"cm-tree__state-indicator js-cm-tree__icon-show",tabIndex:-1}),(0,o.jsx)("div",{className:"cm-tree__icon",children:(0,o.jsx)(nn.V,{icon:(v=k.item.icon)!=null?v:"folder",size:Oa.l.SIZE_SMALL})}),(0,o.jsx)("span",{className:"cm-tree__name js-cm-tree__name",children:k.item.name})]}),k.item[k.childVariable].length>0?(0,o.jsx)("ul",{className:"cm-tree__list",children:(A=k.item[k.childVariable])==null?void 0:A.map((W,be)=>(0,o.jsx)(Va,{item:W,childVariable:k.childVariable},be))}):null]})});var hn=Object.defineProperty,Bs=Object.defineProperties,os=Object.getOwnPropertyDescriptors,ha=Object.getOwnPropertySymbols,Qn=Object.prototype.hasOwnProperty,wn=Object.prototype.propertyIsEnumerable,$s=(k,v,A)=>v in k?hn(k,v,{enumerable:!0,configurable:!0,writable:!0,value:A}):k[v]=A,Ta=(k,v)=>{for(var A in v||(v={}))Qn.call(v,A)&&$s(k,A,v[A]);if(ha)for(var A of ha(v))wn.call(v,A)&&$s(k,A,v[A]);return k},Vn=(k,v)=>Bs(k,os(v));const Xn=(0,p.I)(k=>{var v;return(0,o.jsx)("div",Vn(Ta({className:"mod mod-c-tree cm-tree"},k.tpl.renderDataAttributesAsObject(k)),{children:(0,o.jsx)("ul",{className:"cm-tree__list",children:(v=k.dataset)==null?void 0:v.map((A,W)=>(0,o.jsx)(Va,{item:A,childVariable:"child_sets"},W))})}))});var Br=r(5181);class Yr extends g.E{constructor(v,A,W){super(v,A,W),this.$searchContainer=A.find(".js-cm-setting-folderlist__search"),this.$itemsContainer=A.find(".js-cm-setting-folderlist__items"),this.$createMessage=A.find(".js-cm-setting-folderlist__folder-create"),this.$currentItem=null}elem(){const v=this.$ctx;this.api=v.data("api"),this.project=v.data("project"),this.isCurrentProject=this.mod.sandbox.getConfigParam("router").getUrlParam("project")==this.project,this.readonly=v.data("readonly"),this.folders=[],this.settings=new qn(this.$searchContainer,this.mod.sandbox),this.query=this.settings.getElem(`${this.id}_query`),this.initFolders(this.project),this.bindQuery(),this.bindElementClick(),this.bindKeyboardEvents(),this.bindTreeComponent()}bindQuery(){this.query.changed=v=>{const A=this.$itemsContainer.find("li");A.toggleClass("state-in-search",!1),v===""?(A.toggleClass("state-hidden",!1),this.$createMessage.html("")):A.each((W,be)=>{const Le=Br(be),ot=Le.text().search(new RegExp(v,"i"))<0;Le.toggleClass("state-hidden",ot),Le.toggleClass("state-in-search",!ot)}),this.$itemsContainer.find("li:visible").length===0?this.$createMessage.html((0,y.EY)(Vs,{isCurrentProject:this.isCurrentProject,query:v})):this.$createMessage.html(""),this.$currentItem&&!this.$currentItem.is(":visible")&&(this.$currentItem.removeClass("state-active"),this.$currentItem=null,this.$ctx.find(".js-cm-setting-folderlist__move").attr("disabled","disabled"))}}bindElementClick(){this.$ctx.on("click",".js-cm-setting-folderlist__move",v=>{var A;this.showLoadingMoveButton(v),this.move((A=this.$currentItem)==null?void 0:A.data("id"))})}bindTreeComponent(){this.$ctx.on("elementSelected",v=>{this.selectFolder(v.detail.element)})}bindKeyboardEvents(){this.$ctx.on("keydown",v=>{v.which===13&&(v.preventDefault(),this.$currentItem&&this.$currentItem.is(":visible")?this.move(this.$currentItem.data("id")):this.$itemsContainer.find("li:visible").length===0&&this.isCurrentProject&&this.createFolder(this.query.getValue()).then(A=>{this.folders.push(A.folder),this.move(A.folder.id)}))})}showLoadingMoveButton(v){const A=Br(v.currentTarget);A.attr("disabled","disabled").find(".js-cm-setting__btn-label").hide(),A.find(".js-cm-setting__btn-icon--loading").css("display","inline-block")}serialize(){const v={},A=this.$ctx.data("group");return v[this.id]=this.getValue(),A?this.createGroup({},A,v):v}selectFolder(v){v&&(this.$currentItem=v,this.$ctx.find(".js-cm-setting-folderlist__move").removeAttr("disabled"))}move(v){if(typeof this.folderSelected=="function"){const A=this.getFolderSelected(this.folders,v);A&&this.folderSelected(A,this.project)}}getFolderSelected(v,A){if(v)for(let W=0;W<v.length;W++){if(v[W].id===A)return v[W];const be=this.getFolderSelected(v[W].child_sets,A);if(be)return be}return null}initFolders(v){const A=Br(".js-co-settings__select--project option:selected").text();this.$itemsContainer.html((0,y.EY)(ys.T)),this.data.get(`/api/project/${v}/set`).then(W=>{this.folders=[{name:A,icon:this.getProjectIcon(),id:0,child_sets:W.data}],this.$itemsContainer.html((0,y.EY)(Xn,{dataset:this.folders,childVariable:"child_sets"})),this.$itemsContainer.find("li:visible").first().addClass("state-open"),this.mod.sandbox.addModules(this.$ctx.find(".cm-tree")),this.$createMessage.html("")})}getProjectIcon(){let v=null;switch(Br(".js-co-settings__select--project option:selected").attr("data-project_type")){case"ICONLIBRARY":v="icons";break;case"MEDIALIBRARY":v="image-library";break;case"DOCUMENTLIBRARY":v="document-library";break;case"TEXTLIBRARY":v="text-library";break;case"LOGOLIBRARY":v="logo";break;case"TEMPLATELIBRARY":v="templates";break;case"PATTERNLIBRARY":v="pattern-library";break;case"BRANDUPDATELIBRARY":v="rocket";break;default:v="projects";break}return v}setProject(v){this.project=v,this.isCurrentProject=this.mod.sandbox.getConfigParam("router").getUrlParam("project")==v,this.initFolders(v),this.query.setValue(""),this.query.changed(""),this.$ctx.find(".js-cm-setting-folderlist__move").attr("disabled","disabled")}createFolder(v){const A={name:v,parent:this.mod.sandbox.getConfigParam("router").getUrlParam("set"),color:"#EEEEEE"};return this.data.post(`/api/set/create/${this.project}`,A)}}var Rt=r(5181);class Ze extends g.E{constructor(v,A,W){super(v,A,W)}elem(v){this.settings=new qn(this.$ctx.find(".js-cm-setting-frame__values"),this.mod.sandbox),this.top=this.settings.getElem(`${this.id}_top`),this.right=this.settings.getElem(`${this.id}_right`),this.bottom=this.settings.getElem(`${this.id}_bottom`),this.left=this.settings.getElem(`${this.id}_left`),this.readonly=this.$ctx.data("readonly"),this.fields=["top","right","bottom","left"];const A=function(){typeof this.changed=="function"&&this.changed(this.serialize(!0)[this.id]),v&&this.$ctx.trigger("submit")}.bind(this);this.top.changed=Rt.debounce(100,()=>A()),this.right.changed=Rt.debounce(100,()=>A()),this.bottom.changed=Rt.debounce(100,()=>A()),this.left.changed=Rt.debounce(100,()=>A())}setting(){this.elem(!0);const v=this.$ctx;this.validation(()=>this.saveFrame(),()=>{}),v.on("keydown",A=>{A.which===9&&(A.shiftKey&&Rt(A.target).is(this.top.$ctx.find(`#${this.id}_top`))?(A.preventDefault(),this.mod.prev(v)):!A.shiftKey&&Rt(A.target).is(this.left.$ctx.find(`#${this.id}_left`))&&(A.preventDefault(),this.mod.next(v)))})}saveFrame(){this.save().then(v=>{v.success&&typeof this.saved=="function"&&this.saved(v)})}getValue(){return{top:this.top.getValue()||0,right:this.right.getValue()||0,bottom:this.bottom.getValue()||0,left:this.left.getValue()||0}}serialize(){const v={};v[this.id]=this.getValue();let A=null;const W=this.$ctx.data("group");return W?A=this.createGroup({},W,v):A=v,A}enter(){this.mod.leave(this.$ctx)}leave(){super.leave()}setValue(v){const A=this.tpl.unit(v.top,!0);(A||A>-1)&&this.top.setValue(v.top);const W=this.tpl.unit(v.right,!0);(W||W>-1)&&this.right.setValue(v.right);const be=this.tpl.unit(v.bottom,!0);(be||be>-1)&&this.bottom.setValue(v.bottom);const Le=this.tpl.unit(v.left,!0);(Le||Le>-1)&&this.left.setValue(v.left)}disableFields(v){for(let A=0,W=this.fields.length;A<W;A++){const be=this.fields[A];v.includes(be)?this[be].setReadonly(!0):this[be].setReadonly(!1)}}unfocus(){super.unfocus(),this.readonly||(this.$details.velocity("callout.pulse",{duration:300}),Rt(this.bottom).trigger("focus"))}}var vt=r(5181);class Et extends g.E{constructor(v,A,W){super(v,A,W)}elem(){this.$ctx.on("change",".js-cm-setting-groups__checkbox input",v=>{vt(v.target).is(":checked")?vt(v.target).closest(".js-cm-setting-groups__checkbox").addClass("selected"):vt(v.target).closest(".js-cm-setting-groups__checkbox").removeClass("selected"),this.isSetting&&this.save({val:vt(v.target).val(),checked:vt(v.target).is(":checked")}).then(A=>{A.success&&typeof this.saved=="function"&&this.saved(A)})}),this.$ctx.on("click",".js-cm-setting-groups__select",()=>{const v=this.$ctx.find(".js-cm-setting-groups__checkbox");vt.each(v,(A,W)=>{vt(W).addClass("selected"),vt(W).find("input").attr("checked",!0)})})}setting(){this.elem(),this.$ctx.find(".js-cm-setting-groups__checkbox input").each((v,A)=>{vt(A).is(":checked")&&vt(A).closest(".js-cm-setting-groups__checkbox").addClass("selected")})}serialize(){const A=this.$ctx.find('input[type="checkbox"]:checked');return{group_ids:vt.map(A,be=>vt(be)[0].value)}}}var Ra=r(5181);class qs extends g.E{constructor(v,A,W){super(v,A,W)}elem(){}setting(){this.$ctx.on("click",".js-cm-setting-headersize__size",v=>{const A=Ra(v.currentTarget);this.$ctx.find(".js-cm-setting-headersize__size",this.$ctx).removeClass("state-selected"),A.addClass("state-selected"),this.save().then(W=>{W.success&&typeof this.saved=="function"&&this.saved(W)})})}enter(){this.mod.leave(this.$ctx)}leave(){super.leave()}serialize(){const v=this.$ctx,A={};A[this.id]=v.find(".js-cm-setting-headersize__size.state-selected").data("size");let W=null;const be=v.data("group");return be?W=this.createGroup({},be,A):W=A,W}}class gs extends g.E{constructor(v,A,W){super(v,A,W)}elem(){}serialize(){const v={};v[this.id]=this.$ctx.attr("value");let A=null;return this.$ctx.data("group")?(A={},A[this.$ctx.data("group")]=v):A=v,A}setValue(v){this.$ctx.attr("value",v)}}var xs=r(60435),Ye=r(5181);class lt extends g.E{constructor(v,A,W){super(v,A,W)}elem(){this.settings=new qn(this.$ctx.find(".js-cm-setting-hotspot__values"),this.mod.sandbox),this.x=this.settings.getElem(`${this.id}_x`),this.y=this.settings.getElem(`${this.id}_y`),this.width=this.settings.getElem(`${this.id}_width`),this.height=this.settings.getElem(`${this.id}_height`),this.readonly=this.$ctx.data("readonly"),this.fields=["x","y","width","height"];const v=function(){this._updateAspectRatio(),typeof this.changed=="function"&&this.changed(this.serialize(!0)[this.id])}.bind(this);this.x.changed=Ye.debounce(100,()=>v()),this.y.changed=Ye.debounce(100,()=>v()),this.width.changed=Ye.debounce(100,()=>v()),this.height.changed=Ye.debounce(100,()=>v())}_updateAspectRatio(){if(this.$ctx.data("lockAspectRatio")){const v=this.id,A=this.serialize(!0),W=A[v].width,be=A[v].height;if(this.widthBeforeChange!==W){const Le=W/this.ratio;this.setValue({width:W,height:Le},!0)}else if(this.heightBeforeChange!==be){const Le=be*this.ratio;this.setValue({width:Le,height:be},!0)}this.widthBeforeChange=W,this.heightBeforeChange=be}}setting(){this.elem(),this.validation(()=>{this._updateAspectRatio(),this.saveHotspot()},()=>{this.hideDetails().then(()=>{this.hideActions()}),this.mod.leave(this.$ctx)}),this.$ctx.on("keydown",v=>{this.active&&v.which===9&&Ye(v.target).is('button[type="reset"]')&&(v.preventDefault(),this.mod.next(this.$ctx))})}saveHotspot(){this.save().then(v=>{if(v.success){const A=this.serialize(!0)[this.id];this.$ctx.find(".js-cm-setting-hotspot__value").html((0,y.EY)(xs.W,{value:A})),this.width.$text.attr("value",A.width),this.height.$text.attr("value",A.height),this.x.$text.attr("value",A.x),this.y.$text.attr("value",A.y),typeof this.saved=="function"&&this.saved(v),this.showSuccess().then(()=>{this.hideDetails()}),this.mod.leave(this.$ctx)}})}serialize(v){const A={};A[this.id]={x:Math.round(parseFloat(this.x.getValue())),y:Math.round(parseFloat(this.y.getValue())),width:Math.round(parseFloat(this.width.getValue())),height:Math.round(parseFloat(this.height.getValue()))};let W=null;const be=this.$ctx.data("group");return be&&!v?W=this.createGroup({},be,A):W=A,W}enter(){super.enter(),this.widthBeforeChange=parseInt(this.width.getValue(),10),this.heightBeforeChange=parseInt(this.height.getValue(),10),this.ratio=this.widthBeforeChange/this.heightBeforeChange,this.readonly?this.mod.leave(this.$ctx):this.showDetails().then(()=>{this.width.focus()})}leave(){super.leave()}setValue(v,A){v.x>-1?(v.x=Math.round(parseFloat(v.x)),this.x.setValue(v.x)):v.x=Math.round(parseFloat(this.x.getValue())),v.y>-1?(v.y=Math.round(parseFloat(v.y)),this.y.setValue(v.y)):v.y=Math.round(parseFloat(this.y.getValue())),v.width>-1?(v.width=Math.round(parseFloat(v.width)),this.width.setValue(v.width)):v.width=Math.round(parseFloat(this.width.getValue())),v.height>-1?(v.height=Math.round(parseFloat(v.height)),this.height.setValue(v.height)):v.height=Math.round(parseFloat(this.height.getValue())),A||this.$ctx.find(".js-cm-setting-hotspot__value").html((0,y.EY)(xs.W,{value:v}))}disableFields(v){for(let A=0,W=this.fields.length;A<W;A++){const be=this.fields[A];v.includes(be)?this[be].setReadonly(!0):this[be].setReadonly(!1)}}unfocus(){super.unfocus(),this.readonly||this.$details.velocity("callout.pulse",{duration:300})}}var nt=Object.defineProperty,za=Object.defineProperties,kn=Object.getOwnPropertyDescriptors,Bn=Object.getOwnPropertySymbols,On=Object.prototype.hasOwnProperty,jr=Object.prototype.propertyIsEnumerable,Ln=(k,v,A)=>v in k?nt(k,v,{enumerable:!0,configurable:!0,writable:!0,value:A}):k[v]=A,Er=(k,v)=>{for(var A in v||(v={}))On.call(v,A)&&Ln(k,A,v[A]);if(Bn)for(var A of Bn(v))jr.call(v,A)&&Ln(k,A,v[A]);return k},Si=(k,v)=>za(k,kn(v));const Ui=(0,p.I)(k=>(0,o.jsx)("div",{className:"cm-setting-image__crop js-cm-setting-image__crop",children:(0,o.jsx)("img",Si(Er({className:"cm-setting-image__crop-image js-cm-setting-image__crop-image"},k.id?{"data-id":k.id}:{}),{src:k.original||""}))}));var fi=r(74819),As=r(5181);class Zr extends g.E{static get REFERENCE_WIDTH(){return 800}static usesMigratedEndpoint(v){return[/\/api\/asset\/\d+\/preview/].some(W=>W.test(v))}constructor(v,A,W){super(v,A,W),this.$cropper=this.$ctx.find(".js-cm-setting-image__cropper"),this.$preview=this.$ctx.find(".js-cm-setting-image__image")}setting(){this.image_property=this.$ctx.data("imageProperty"),this.file_id=this.$ctx.data("fileId"),this.accept_only=!1,this.api_processing_payload=null,this.$ctx.data("accept")&&(this.accept_only=this.$ctx.data("accept").split(",").map(v=>`.${v}`).join(",")),this.acceptOnlyImages=this.$ctx.data("acceptOnlyImages"),this.maxFileSize=this.$ctx.dataAsNumber("maxFileSize"),this.$ctx.data("circle")&&this.$ctx.addClass("state-circle"),this.$ctx.find(".js-cm-setting-image__input").upload({accept:this.accept_only,acceptOnlyImages:this.acceptOnlyImages,dropZone:As(".js-cm-setting-image__image-wrap",this.$ctx),fileType:this.$ctx.data("filetype"),add:(v,A)=>{const W=A.files.reduce((be,Le)=>be+=Le.size,0);!this.maxFileSize||W<this.maxFileSize?(this.$ctx.data("brand")>0&&(A.formData.brand_id=this.$ctx.data("brand")),this.$ctx.data("screen-id")>0&&(A.formData.screen_id=parseInt(this.$ctx.data("screen-id"))),this.$ctx.data("project")>0&&(A.formData.project_id=this.$ctx.data("project")),this.$ctx.data("dashboard")>0&&(A.formData.dashboard_id=this.$ctx.data("dashboard")),A.submit()):W>this.maxFileSize&&this.mod.fire("swal",{template:"block-upload-file-too-big",closeOnConfirm:!0})},done:(v,A)=>{if(A.result&&A.result[0]){const W=A.result[0].generic_url;this.api_processing_payload=A.result[0].payload||null,this.file_id=A.result[0].file_id||null,this.$ctx.find(".js-cm-setting-image__image").attr("data-original",W),this.renderDetails({id:A.result[0].id,original:W}),this.showDetails().then(()=>{this.mod.enter(this.$ctx),this.showCropper(!0),this.$ctx.find(".js-cm-setting__actions button[type=submit]").trigger("focus")})}}}),this.$ctx.on("submit",v=>{v.preventDefault(),this.showLoader(),this.save().then(A=>{A.success&&this.done(A)}).catch(()=>{this.$ctx.trigger("reset")})}).on("reset",()=>{this.mod.leave(this.$ctx)}),this.$ctx.on("click",".js-cm-setting-image__choose",v=>{v.stopPropagation(),typeof this.choose=="function"&&this.choose()}),this.$ctx.on("click",".js-cm-setting-image__upload",v=>{v.stopPropagation(),typeof this.upload=="function"&&this.upload()}),this.$ctx.on("click",".js-cm-setting-image__edit",v=>{v.stopPropagation();const A=As(v.currentTarget),W=A.data("callbackUrl"),be=A.data("asset");page(`/screens/${be}/publishing?callback_url=${W}`)}),this.$ctx.on("click",".js-cm-setting-image__replace",()=>{var v;this.mod.fire("closeDropdown",this.$ctx.find(".js-cm-btn-dropdown__toggle"));const A=this.$ctx.find(".js-cm-setting-image__image");A.removeAttr("data-original"),A.removeClass("state-available"),(v=this.$cropImage)==null||v.removeAttr("data-id"),this.$ctx.find(".js-cm-setting-image__input").trigger("click.image"),this.mod.leave(this.$ctx)}),this.$ctx.on("click",".js-cm-setting-image__delete",v=>{if(typeof this.delete=="function"){v.stopPropagation();const be=this.$ctx.data("id");this.delete(be);return}this.mod.fire("closeDropdown",this.$ctx.find(".js-cm-btn-dropdown__toggle")),this.$ctx.find(".js-cm-setting-image__image").attr("src",this.$ctx.data("placeholder"));const A=this.serialize();A.file_id=null,this.showLoader();const W=this.$ctx.dataAsString("api");Zr.usesMigratedEndpoint(W)?this.data.delete(W).then(be=>{be.success&&this.done(be)}):this.data.post(W,A).then(be=>{be.success&&this.done(be)})}),this.$ctx.on("keydown",v=>{this.active&&v.which===9&&(v.shiftKey&&As(v.target).is('button[type="submit"]')?(v.preventDefault(),this.mod.prev(this.$ctx)):As(v.target).is('button[type="reset"]')&&(v.preventDefault(),this.mod.next(this.$ctx)))}),this.$preview.attr("tabindex")!=="-1"&&this.$preview.on("keydown",v=>{["Enter","Space"].includes(v.code)&&(v.preventDefault(),this.enter())})}renderDetails(v){this.$cropper.html((0,y.EY)(Ui,{id:v.id,original:v.original.replace("{width}",Zr.REFERENCE_WIDTH)})),this.$cropImage=this.$ctx.find(".js-cm-setting-image__crop-image")}enter(){if(super.enter(),!this.$details.hasClass("state-open")){const v=this.$ctx.find(".js-cm-setting-image__image");v.hasClass("state-available")?(this.renderDetails({original:v.attr("data-original")}),this.showDetails().then(()=>{this.showCropper(),this.$ctx.find(".js-cm-setting__actions button[type=submit]").trigger("focus")})):(this.$ctx.find(".js-cm-setting-image__input").trigger("click.image"),this.mod.leave(this.$ctx))}}leave(){super.leave(),this.hideDetails().then(()=>{this.hideCropper(),this.hideActions()})}unfocus(){super.unfocus(),this.$details.velocity("callout.pulse",{duration:300}),this.$ctx.find(".js-cm-setting__actions button[type=submit]").trigger("focus")}serialize(){const v={},A=this.$ctx.find(".js-cm-setting-image__image").attr("src");v[this.id]=A!==this.$ctx.data("placeholder")?A:"",v.i18n=(0,fi.YZ)();let W=null;const be=this.$ctx.data("group");return be?W=this.createGroup({},be,v):W=v,W}save(){const v={};v.i18n=(0,fi.YZ)();const A=this.$cropImage,W=A==null?void 0:A.cropper("getData"),be=A==null?void 0:A.cropper("getImageData");if(v[this.id]=A.attr("src").replace(`width=${Zr.REFERENCE_WIDTH}`,"width={width}"),v[`${this.id}_crop`]=this.getSaveCropValues(W,be),v[`${this.id}_isWorkspaceAsset`]=!1,this.$ctx.data("areaWidth",W.width),this.$ctx.data("areaHeight",W.height),this.$ctx.data("areaX",W.x),this.$ctx.data("areaY",W.y),this.cropperSettings){const ns=this.cropperSettings.serialize();v[`${this.id}_ratio`]=ns.ratio,this.$ctx.data("ratio",ns.ratio)}A!=null&&A.data("id")&&(v[`${this.id}_id`]=A.data("id")),this.$ctx.find(".js-cm-setting-image__data").each((ns,vs)=>{const La=As(vs);v[La.attr("id")]=La.val()});let Le=null;const ot=this.$ctx.data("group");ot?Le=this.createGroup({},ot,v):Le=v,this.api_processing_payload&&(Le.payload=this.api_processing_payload,this.api_processing_payload=null),this.file_id&&(Le.file_id=this.file_id);const He=this.$ctx.data("api");if(He){const ns=this.$ctx.data("method")||"post";return this.data[ns](He,Le)}else return Promise.resolve(As.extend(!0,{},{success:!0},Le))}getSaveCropValues(v,A){return v.x=Math.max(0,v.x),v.y=Math.max(0,v.y),v.width=Math.max(0,v.width),v.height=Math.max(0,v.height),v.width=Math.min(A.naturalWidth,v.width),v.height=Math.min(A.naturalHeight,v.height),v.x=v.x<1?0:v.x,v.y=v.y<1?0:v.y,v.width=v.width<1?0:v.width,v.height=v.height<1?0:v.height,v.x===0&&v.y===0&&v.width===A.naturalWidth&&v.height===A.naturalHeight?null:{x:v.x,y:v.y,width:v.width,height:v.height,reference_width:A.naturalWidth}}showCropper(v=!1){var A,W;this.$loader=As((0,y.EY)(ys.T)),(A=this.$cropImage)==null||A.before(this.$loader);let be=this.getAspectRatio("custom");this.$ctx.data("ratio")&&(be=this.$ctx.data("ratio")),this.cropperSettings&&this.cropperSettings.destroy(),this.cropperSettings=new qn(this.$ctx.find(".js-cm-setting-image__settings"),this.mod.sandbox);const Le=this.cropperSettings.getElem("ratio");As.isEmptyObject(Le)||(Le.changed=He=>{var ns;(ns=this.$cropImage)==null||ns.cropper("setAspectRatio",this.getAspectRatio(He.ratio))},be=this.getAspectRatio(Le.serialize().ratio));let ot={};this.$ctx.data("disableCropping")&&(ot={movable:!1,scalable:!1,rotatable:!1,zoomable:!1,cropBoxMovable:!1,cropBoxResizable:!1}),(W=this.$cropImage)==null||W.cropper(As.extend(!0,{},{viewMode:1,aspectRatio:be,autoCropArea:1,dragMode:"none",checkCrossOrigin:!1,cropBoxResizable:!0,cropBoxMoveable:!0,zoomOnWheel:!1,guides:!0,ready:()=>{var He,ns;if((He=this.$loader)==null||He.remove(),!v){const vs=this.getCropBoxData();(ns=this.$cropImage)==null||ns.cropper("setCropBoxData",vs)}}},ot))}getCropBoxData(){var v;if(!this.$ctx.data("areaWidth"))return null;const A=(v=this.$cropImage)==null?void 0:v.cropper("getImageData"),W={width:this.$ctx.data("areaWidth"),height:this.$ctx.data("areaHeight"),x:this.$ctx.data("areaX"),y:this.$ctx.data("areaY")},be=this.$cropper.height()||0,Le=this.$cropper.width()||0,ot=A.width/A.naturalWidth,He={};He.width=W.width*ot,He.height=W.height*ot;let ns=0,vs=0;return A.width>A.height?(ns=(be-A.height)/2,He.top=ns+W.y*ot,He.left=W.x*ot):(vs=(Le-A.width)/2,He.top=W.y*ot,He.left=vs+W.x*ot),He.left=Math.ceil(He.left*1e4)/1e4,He.top=Math.ceil(He.top*1e4)/1e4,He.width=Math.floor(He.width*1e4)/1e4,He.height=Math.floor(He.height*1e4)/1e4,He}getAspectRatio(v){let A="";switch(v){case"original":{const W=parseInt(this.$ctx.data("areaWidth")),be=parseInt(this.$ctx.data("areaHeight"));A=W/be;break}case"16:9":A=16/9;break;case"4:3":A=4/3;break;case"square":A=1;break;case"custom":A=null;break;default:return}return A}hideCropper(){this.$loader&&this.$loader.remove(),this.$cropImage&&this.$cropImage.cropper("destroy")}setValue(v){v=v||this.$ctx.data("placeholder"),this.$ctx.find(".js-cm-setting-image__image").attr("src",v).removeClass("state-available")}done(v){var A;const W=this.$ctx.data("group");if(typeof this.saved=="function"&&this.saved(v),W){const ot=(ns,vs)=>{const La=vs.split("."),Tn=La.shift();return La.length>0?ot(ns[Tn],La.join(".")):ns[Tn]},He=ot(v,W);He&&(v=He)}const be=this.$ctx.find(".js-cm-setting-image__image"),Le=v[this.image_property]||v[this.id]||((A=v==null?void 0:v.data)==null?void 0:A[this.image_property]);!Le||Le===this.$ctx.data("placeholder")?(this.image_property?v[this.image_property]=this.$ctx.data("placeholder"):v[this.id]=this.$ctx.data("placeholder"),v.placeholder=!0,be.removeClass("state-available")):(v.placeholder=!1,be.attr("src",Le).addClass("state-available")),this.showSuccess().then(()=>{this.mod.leave(this.$ctx)})}}var Gt=r(75736),Qi=r(9862),Vi=r(57915),Fr=r(5181);class Sa extends g.E{constructor(v,A,W){super(v,A,W),this.$input=this.$ctx.find(".js-cm-setting__input"),this.$linkChooser=this.$ctx.find(".js-cm-setting__link-addons-item-linkchooser"),this.$templateChooser=this.$ctx.find(".js-cm-setting__link-addons-item-templatechooser")}elem(v){this.mod.sandbox.subscribe("events",this.mod),this.readonly=this.$ctx.data("readonly"),this.autofocus=this.$ctx.dataAsBoolean("autofocus"),this.portalId=this.$ctx.dataAsNumber("portalId"),this.isSetting=v||!1,this.bindLinkChooser(),this.bindInput(),(0,Qi.R)("LINK_TEMPLATE_CHOOSER")&&this.bindTemplateChooser(),this.autofocus&&this.$input.focus()}bindInput(){this.$ctx.on("focusin",".js-cm-setting__bar",v=>{this.readonly||Fr(v.currentTarget).addClass("state-active"),this.$input.select()}).on("focusout",".js-cm-setting__bar",v=>{this.readonly||Fr(v.currentTarget).removeClass("state-active")})}bindTemplateChooser(){this.$templateChooser.on("click",()=>this.openTemplateChooser())}bindLinkChooser(){this.$linkChooser.on("click",()=>this.openLinkChooser())}setting(){this.elem(!0),this.$input.on("keyup",Fr.debounce(800,()=>{this.save().then(v=>{v.success&&typeof this.saved=="function"&&this.saved(v)})})).on("keydown",v=>{v.which===13&&(v.preventDefault(),this.save().then(A=>{A.success&&typeof this.saved=="function"&&this.saved(A)}))})}autoSave(){this.$ctx.trigger("submit")}openLinkChooser(){const v=new Vi.R(this.mod.sandbox,this.getValue());v.saved=A=>{this.$input.val(A.url),this.isSetting?this.save().then(W=>{typeof this.saved=="function"&&this.saved(W)}):typeof this.changed=="function"&&this.changed(A)},v.open()}openTemplateChooser(){const v=(0,y.EY)(Gt.N,{associatedBlockId:this.blockId,styleguideId:this.projectId,newPublication:!1});this.mod.fire("openModal",{modifier:"flex",$content:v},["events"])}onTemplateChooserTemplateChosen(v){console.log(v)}enter(){this.mod.leave(this.$ctx)}leave(){super.leave()}getValue(){const v={url:this.$input.val()};return this.portalId>0&&(v.hub=this.portalId),v}setReadonly(v){v?(this.readonly=!0,this.$input.prop("readonly","readonly")):(this.readonly=!1,this.$input.prop("readonly",!1))}serialize(){const v={};v[this.id]=this.getValue(),!/^\//.test(v[this.id].url)&&!/^(https?|frontify|sketch|msteams|aa):\/\/|^(mailto|tel):|^$/i.test(v[this.id].url)&&(v[this.id].url=`https://${v[this.id].url}`);let A=null;const W=this.$ctx.data("group");return W?A=this.createGroup({},W,v):A=v,A}}var _r=r(78484),bn=r(4219),ji=r(64602),vn=r(85620),Yn=r(26285),$i=r(79749),Ur=r(8370),Vr=r(36970),Ei=r(82209),or=r(29430),En=r(5410),sa=r(74083),Qa=r(70524),vi=r(39364),Sr=r(83367),ua=r(8753),Wr=r(24033),$a=r(20214),rn=r(58921),In=r(97822),gr=r(60525),fn=r(92610),Ir=r(56754),fr=r(83147),Ii=r(44318),vr=r(97866),Pr=r(28147),Ee=r(5181);class le extends g.E{constructor(v,A,W){super(v,A,W),this.$add=A.find(".js-cm-setting-list__add-input"),this.$list=A.find(".js-cm-setting-list__items")}elem(v){const A=this.$ctx;this.settings=new qn(A,this.mod.sandbox),this.isSetting=v||!1,this.valueProperty=this.$ctx.data("valueProperty")||"value",this.items=A.data("items").items,this.additionalData=A.data("data")||{},this.$add.on("keydown",be=>{if(be.keyCode===13)return this.add(this.$add.val()),!1});const W=this.$list.get(0);if(!W)throw new Error("Element not found.");_r.Ay.create(W,{animation:100,handle:".js-cm-setting-list__move",draggable:".js-cm-setting-list__item",onSort:be=>{if(be.oldDraggableIndex!==be.newDraggableIndex){const Le=this.items[be.oldDraggableIndex];this.items.splice(be.oldDraggableIndex,1),this.items.splice(be.newDraggableIndex,0,Le),this.isSetting&&this.data.put(`${this.$ctx.data("api")}/position`,this.items)}}}),A.on("click",".js-cm-setting-list__remove",be=>{be.preventDefault();const Le=Ee(be.currentTarget),ot=Le.closest(".js-cm-setting-list__item").dataAsString(this.valueProperty),He=Le.closest(".js-cm-setting-list__item").dataAsNumber("id");if(this.isSetting){let ns=this.$ctx.data("delete-api")||this.$ctx.data("api");ns&&(ns=`${ns}/${He||ot}`,this.data.delete(ns).then(La=>{var Tn;La.success?(this.items=this.items.filter(ri=>ri[this.valueProperty].toString()!==ot),this.renderList(this.items)):typeof this.itemDeletionFailed=="function"&&this.itemDeletionFailed((Tn=La.errors)!=null?Tn:La.error)}))}else this.items=this.items.filter(ns=>ns[this.valueProperty].toString()!==ot),this.renderList(this.items)}),A.on("click",".js-cm-setting-list__add",be=>{be.preventDefault(),this.renderAddForm(this.additionalData)}),A.on("clicked",".js-cm-setting-list__add-section",be=>{be.preventDefault(),this.renderAddForm(this.additionalData)}),A.on("keypress",".js-cm-setting-list__edit",be=>{be.key==="Enter"&&Ee(be.currentTarget).trigger("click")}),A.on("keypress",".js-cm-setting-list__remove",be=>{be.key==="Enter"&&Ee(be.currentTarget).trigger("click")}),A.on("click",".js-cm-setting-list__edit",be=>{be.preventDefault(),be.stopPropagation();const Le=Ee(be.currentTarget).closest(".js-cm-setting-list__item").dataAsString(this.valueProperty),ot=this.items.find(vs=>vs[this.valueProperty].toString()===Le),He=A.find(".js-cm-setting-list__form-container");this.$details=Ee(this.getTemplateComponent(A.data("templateEdit"),{data:this.additionalData,item:ot})),this.tpl.addAndActivate(He,this.$details);const ns=new qn(this.$details,this.mod.sandbox);typeof this.processEditSettings=="function"&&this.processEditSettings(ns),ns.validation(()=>{let vs;if(typeof this.extendFormData=="function"?vs=this.extendFormData(ns.serialize()):vs=ns.serialize(),this.items=this.items.map(La=>La[this.valueProperty].toString()===ot[this.valueProperty].toString()?vs:La),this.isSetting){let La=A.data("api");if(La)La=`${La}/${vs.id}`,this.data.put(La,vs).then(Tn=>{if(Tn.success){const ri=Tn.savedEntry||Tn.data||null;ri!==null&&(this.items=this.items.map(ei=>parseInt(ei.id)===ri.id?ri:ei),typeof this.itemUpdated=="function"&&this.itemUpdated(ri)),this.renderList(this.items),this.$details.remove()}});else return Promise.resolve(Ee.extend(!0,{},{success:!0},vs))}else this.renderList(this.items),this.$details.remove()},()=>{this.$details.remove()}),this.$details.addClass("state-open").velocity("fadeIn",{complete:()=>{ns.getFirstElem().getType()==="text"&&ns.getFirstElem().focus()}})}),A.on("click",".js-cm-setting-list__actions-item",be=>{const ot=Ee(be.currentTarget).dataAsString("itemProcessor");if(!ot)throw new Error("Item processor name not defined:");const He=`process${ot[0].toUpperCase()}${ot.slice(1)}`;typeof this[He]=="function"&&(this.items=this[He](be,this.items))}),A.on("click",".js-cm-setting-list__set-display",be=>{const Le=Ee(be.currentTarget),ot=Le.attr("value"),He=this.items.find(vs=>vs[this.valueProperty].toString()===ot);He.display=Le.prop("checked");const ns=this.items.filter(vs=>vs.display===void 0?!0:vs.display).length===1;this.renderList(this.items,ns)}),this.$add.on("focusout",()=>{this.unfocus()}),A.on("click",".js-cm-setting-list__details-delete",()=>{const be=A.find(".js-cm-setting-list__details-delete-container"),Le=be.dataAsString("value"),ot=Ee((0,y.EY)(l.H,{id:"delete_approval",type:"menu",label:be.data("delete"),description:be.data("delete-confirmation"),api:`/api/approvalrequestpreset/${Le}`,method:"delete"}));be.html(ot),be.on("click",vs=>{vs.stopPropagation()});const ns=new qn(be,this.mod.sandbox).getSetting("delete_approval");ns.deleted=vs=>{vs.success&&(this.items=this.items.filter(La=>La[this.valueProperty].toString()!==Le),this.renderList(this.items),typeof this.itemDeleted=="function"&&this.itemDeleted(Le),this.hideDetails())},ns.cancelled=()=>{this.mod.fire("closeDropdown",be,["events"])}})}setting(){this.elem(!0)}getTemplateComponent(v,A){switch(v){case"facette-setting-list-tags-add":return(0,y.EY)(rn.p,A);case"facette-setting-list-tags-edit":return(0,y.EY)(In.w,A);case"facette-setting-list-filetypes-add":return(0,y.EY)(Wr.D,A);case"facette-setting-list-filetypes-edit":return(0,y.EY)($a.O,A);case"facette-setting-list-conditions-add-edit":return(0,y.EY)(Sr.i,A);case"facette-setting-list-conditions-list":return(0,y.EY)(ua.x,A);case"c-settingsaccessrequest-setting-list-fields-add":return(0,y.EY)(ji.E,A);case"c-settingsaccessrequest-setting-list-edit":return(0,y.EY)(bn.c,A);case"c-settings-approval-request-preset-list":return(0,y.EY)(Yn.s,A);case"c-settings-approval-request-preset-dialog":return(0,y.EY)(vn.a,A);case"c-settings-approval-request-preset-wrap":return(0,y.EY)($i.G,A);case"c-settings-library-usage-download-formbuilder-add":return(0,y.EY)(Ur.h,A);case"c-settings-library-usage-download-formbuilder-edit":return(0,y.EY)(Vr.g,A);case"c-settingstextlibrary-setting-list-i18n-add":return(0,y.EY)(sa.S,A);case"c-settingstextlibrary-setting-list-i18n-edit":return(0,y.EY)(Qa.Z,A);case"c-settingstextlibrary-setting-list-i18n-list":return(0,y.EY)(vi.B,A);case"c-settingsproject-setting-list-licenses-add":return(0,y.EY)(Ei.L,A);case"c-settingsproject-setting-list-licenses-edit":return(0,y.EY)(or.U,A);case"c-settingsproject-setting-list-licenses-list":return(0,y.EY)(En.K,A);case"c-setting-elem-list-list":return(0,y.EY)(T.J,A);case"c-setting-elem-list-list-display":return(0,y.EY)(fr.N,A);case"c-setting-elem-list-list-default":return(0,y.EY)(Ir.Q,A);case"c-setting-elem-list-wrap":return(0,y.EY)(Ii.B,A);case"c-setting-elem-list-wrap-none":return(0,y.EY)(Pr.P,A);case"c-setting-elem-list-wrap-default":return(0,y.EY)(vr.i,A);case"c-setting-elem-list-actions":return(0,y.EY)(gr.M,A);case"c-setting-elem-list-actions-conditional":return(0,y.EY)(fn.u,A);default:return console.error(`Template ${v} not found.`),""}}add(v){if(v.length>0){const A=v.split(","),W=[];for(const be of A)if(!this.items.find(ot=>ot[this.valueProperty].toString()===be)){const ot={default:!1};ot[this.valueProperty]=Ee.trim(be),this.items.push(ot),W.push(ot[this.valueProperty])}if(this.$add.val(""),W.length>0&&this.isSetting){const be=this.$ctx.data("api"),Le={};Le[this.id]=W,be&&this.data.post(be,Le)}this.renderList(this.items),this.scrollDown()}}renderAddForm(v){const A=this.$ctx;this.additionalData=Ee.extend(!0,{},this.additionalData,v);const W=A.find(".js-cm-setting-list__form-container");this.$details.remove(),this.$details=Ee(this.getTemplateComponent(A.data("templateAdd"),{data:this.additionalData})),this.tpl.addAndActivate(W,this.$details);const be=new qn(this.$details,this.mod.sandbox);typeof this.processAddSettings=="function"&&this.processAddSettings(be),be.validation(()=>{let Le;if(typeof this.extendFormData=="function"?Le=this.extendFormData(be.serialize()):Le=be.serialize(),!Le[this.valueProperty]&&!this.isSetting&&(Le[this.valueProperty]=`${this.items.length+1}_${this.tpl.slug(Le.name)}`),this.isSetting){const He=A.data("api");He&&this.data.post(He,Le).then(ns=>{if(ns.success){const vs=ns.savedEntry||ns.data;this.items.push(vs),this.renderList(this.items),this.scrollDown(),this.isSetting&&typeof this.saved=="function"&&this.saved(vs)}})}else this.items.push(Le),this.renderList(this.items),this.scrollDown();const ot=this.items.find(He=>He[this.valueProperty]===Le[this.valueProperty]);this.$details.remove(),!ot&&!this.isSetting&&(this.items.push(Le),this.renderList(this.items),this.scrollDown(),typeof this.itemAdded=="function"&&this.itemAdded(Le))},()=>{this.$details.remove()}),this.$details.addClass("state-open").velocity("fadeIn",{complete:()=>{be.getFirstElem().getType()==="text"&&be.getFirstElem().focus()}})}leave(){super.leave()}enter(){super.enter(),this.readonly||this.$add.focus(),this.mod.leave(this.$ctx)}focus(){this.readonly||this.$add.trigger("focus")}renderList(v,A){const W=this.getTemplateComponent(this.$ctx.data("templateList")||"c-setting-elem-list-list",{data:this.additionalData,items:v,isLast:A,label_none:this.$ctx.data("labelNone")});this.tpl.addAndActivate(this.$list,W)}serialize(v){const A=this.$ctx,W={};v?W[this.id]=v:W[this.id]=this.items;let be;const Le=A.data("group");return Le?be=this.createGroup({},Le,W):be=W,be}scrollDown(){const v=this.$list[0].scrollHeight;this.$list.scrollTop(v)}}var he=r(63817),Oe=r(5181);class St extends g.E{constructor(v,A,W){super(v,A,W)}elem(){this.settings=new qn(this.$ctx.find(".js-cm-setting-logo__values"),this.mod.sandbox),this.x=this.settings.getElem(`${this.id}_x`),this.y=this.settings.getElem(`${this.id}_y`),this.width=this.settings.getElem(`${this.id}_width`),this.height=this.settings.getElem(`${this.id}_height`),this.readonly=this.$ctx.data("readonly"),this.fields=["x","y","width","height"];const v=function(){this.$ctx.data("lockAspectRatio")&&this._updateAspectRatio(),typeof this.changed=="function"&&this.changed(this.serialize(!0)[this.id])}.bind(this);this.x.changed=Oe.debounce(100,()=>v()),this.y.changed=Oe.debounce(100,()=>v()),this.width.changed=Oe.debounce(100,()=>v()),this.height.changed=Oe.debounce(100,()=>v())}_updateAspectRatio(){const v=this.id,A=this.serialize(!0),W=A[v].width,be=A[v].height;if(W==="auto"||be==="auto")return!1;if(this.widthBeforeChange!==W){const Le=this.ratio===null?"auto":W/this.ratio;this.setValue({width:W,height:Le},!0)}else if(this.heightBeforeChange!==be){const Le=this.ratio===null?"auto":be*this.ratio;this.setValue({width:Le,height:be},!0)}this.widthBeforeChange=W,this.heightBeforeChange=be}setting(){this.elem(),this.validation(()=>{this._updateAspectRatio(),this.saveLogo()},()=>{this.mod.leave(this.$ctx)}),this.$ctx.on("keydown",v=>{this.active&&v.which===9&&Oe(v.target).is('button[type="reset"]')&&(v.preventDefault(),this.mod.next(this.$ctx))})}saveLogo(){const v=this.$ctx;this.save().then(A=>{if(A.success){const W=this.serialize(!0)[this.id];v.find(".js-cm-setting-logo__value").html((0,y.EY)(he._,{value:W})),this.width.$text.attr("value",W.width),this.height.$text.attr("value",W.height),this.x.$text.attr("value",W.x),this.y.$text.attr("value",W.y),typeof this.saved=="function"&&this.saved(A),this.showSuccess().then(()=>{this.mod.leave(v)})}})}serialize(v){const A=this.$ctx;let W=Math.round(parseFloat(this.width.getValue()));isNaN(this.width.getValue())&&(W=this.width.getValue());let be=Math.round(parseFloat(this.height.getValue()));isNaN(this.height.getValue())&&(be=this.height.getValue());const Le={};Le[this.id]={x:Math.round(parseFloat(this.x.getValue())),y:Math.round(parseFloat(this.y.getValue())),width:W,height:be};let ot=null;const He=A.data("group");return He&&!v?ot=this.createGroup({},He,Le):ot=Le,ot}enter(){super.enter(),this.widthBeforeChange=parseInt(this.width.getValue(),10),this.heightBeforeChange=parseInt(this.height.getValue(),10),this.setRatio(this.widthBeforeChange,this.heightBeforeChange),this.readonly?this.mod.leave(this.$ctx):this.showDetails().then(()=>{this.width.focus()})}leave(){super.leave(),this.hideDetails().then(()=>{this.hideActions()})}setRatio(v,A){isNaN(v)||isNaN(A)?this.ratio=null:this.ratio=v/A}setValue(v,A){v.x>-1?(v.x=Math.round(parseFloat(v.x)),this.x.setValue(v.x)):v.x=Math.round(parseFloat(this.x.getValue())),v.y>-1?(v.y=Math.round(parseFloat(v.y)),this.y.setValue(v.y)):v.y=Math.round(parseFloat(this.y.getValue())),v.width>-1?(v.width=Math.round(parseFloat(v.width)),this.width.setValue(v.width)):v.width==="auto"?this.width.setValue("auto"):v.width=Math.round(parseFloat(this.width.getValue())),v.height>-1?(v.height=Math.round(parseFloat(v.height)),this.height.setValue(v.height)):v.height==="auto"?this.height.setValue("auto"):v.height=Math.round(parseFloat(this.height.getValue())),this.setRatio(v.width,v.height),A||this.$ctx.find(".js-cm-setting-logo__value").html((0,y.EY)(he._,{value:v}))}disableFields(v){for(let A=0,W=this.fields.length;A<W;A++){const be=this.fields[A];v.includes(be)?this[be].setReadonly(!0):this[be].setReadonly(!1)}}unfocus(){super.unfocus(),this.readonly||this.$details.velocity("callout.pulse",{duration:300})}}var ma=r(5181);class oa extends g.E{constructor(v,A,W){super(v,A,W)}elem(){this.readonly=this.$ctx.data("readonly"),this.$ctx.on("click",".js-cm-setting-measure__type",v=>{if(!this.readonly){const A=ma(v.currentTarget);this.$ctx.find(".js-cm-setting-measure__type").removeClass("state-selected"),A.addClass("state-selected");const W=A.data("type");typeof this.changed=="function"&&this.changed({type:W})}return!1})}setting(){this.elem(),this.readonly||this.$ctx.on("click",".js-cm-setting-measure__type",()=>{this.save().then(v=>{v.success&&typeof this.saved=="function"&&this.saved(v)})})}enter(){this.mod.leave(this.$ctx)}leave(){super.leave()}serialize(){const v={};v[this.id]=this.$ctx.find(".js-cm-setting-measure__type.state-selected").data("type");let A=null;return this.$ctx.data("group")&&!nogroup?(A={},A[this.$ctx.data("group")]=v):A=v,A}}var tn=r(61055),dn=r(59240),tr=Object.defineProperty,wi=Object.defineProperties,Pi=Object.getOwnPropertyDescriptors,ci=Object.getOwnPropertySymbols,zr=Object.prototype.hasOwnProperty,sr=Object.prototype.propertyIsEnumerable,ui=(k,v,A)=>v in k?tr(k,v,{enumerable:!0,configurable:!0,writable:!0,value:A}):k[v]=A,Jr=(k,v)=>{for(var A in v||(v={}))zr.call(v,A)&&ui(k,A,v[A]);if(ci)for(var A of ci(v))sr.call(v,A)&&ui(k,A,v[A]);return k},Yi=(k,v)=>wi(k,Pi(v));const ya=(0,p.I)(k=>{var v,A,W,be;return(0,o.jsxs)("div",{className:"cm-setting-multivalue__menu js-cm-setting-multivalue__menu",children:[(0,o.jsx)("h3",{className:"cm-setting-multivalue__menu-title",children:"Colors"}),((A=(v=k.settings)==null?void 0:v.allowed)==null?void 0:A.length)>0?(0,o.jsx)("ul",{className:"cm-setting-multivalue__palette-colors clearfix",children:(W=k.settings.allowed)==null?void 0:W.map(Le=>{let ot=!1;return k.currentColorId?ot=Le.id===k.currentColorId:ot=de().equals(k.current,Le.css_value),(0,o.jsx)("li",Yi(Jr({"data-color-id":Le.id,"data-color":Le.css_value,className:` cm-setting-multivalue__palette-color ${Le.light?" state-light ":""} ${ot?" state-active ":""} js-cm-setting-multivalue__palette-color`,style:{background:`${Le.css_value}`}},k.rerender?{"data-rerender":"true"}:{}),{children:(0,o.jsx)("i",{className:"ca-icon--lg ca-icon--check"})}),Le.id)})}):(0,o.jsxs)(o.Fragment,{children:[((be=k.styleguides)==null?void 0:be.length)>0?k.styleguides.length>1?(0,o.jsx)(dn.U,{id:"styleguide_id",classes:"cm-setting__elem--noindent cm-setting-multivalue__palette-colors-dropdown",value:k.styleguides[0].value,options:k.styleguides}):null:(0,o.jsx)("div",{className:"co-settings__blank",children:"There is no styleguide defined yet."}),k.original&&!de().equals(k.current,k.original)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h4",{className:"cm-setting-multivalue__palette-title",children:"Original"}),(0,o.jsx)("ul",{className:"cm-setting-multivalue__palette-colors clearfix",children:(0,o.jsx)("li",Yi(Jr({"data-color":k.original,style:{background:`${k.original}`},className:` cm-setting-multivalue__palette-color js-cm-setting-multivalue__palette-color ${de().equals(k.current,k.original)?" state-active ":""}`},k.rerender?{"data-rerender":"true"}:{}),{children:(0,o.jsx)("i",{className:"ca-icon--lg ca-icon--check"})}))})]}):null,(0,o.jsx)("div",{className:"js-cm-setting-multivalue__palette-container"})]})]})}),yt=(0,p.I)(k=>(0,o.jsxs)("div",{className:"cm-setting-multivalue__menu js-cm-setting-multivalue__menu",children:[(0,o.jsx)("h3",{className:"cm-setting-multivalue__menu-title",children:"Allowed colors"}),k.styleguides&&k.styleguides.length>0?k.styleguides.length>1?(0,o.jsx)(dn.U,{id:"styleguide_define_id",stopCLickPropagation:!0,classes:"cm-setting__elem--noindent",value:k.styleguides[0].value,options:k.styleguides}):null:(0,o.jsx)("div",{className:"co-settings__blank",children:"There is no styleguide defined yet."}),(0,o.jsx)("div",{className:"js-cm-setting-multivalue__palette-container"})]}));var We=Object.defineProperty,pt=Object.defineProperties,Es=Object.getOwnPropertyDescriptors,Ws=Object.getOwnPropertySymbols,Na=Object.prototype.hasOwnProperty,on=Object.prototype.propertyIsEnumerable,Gn=(k,v,A)=>v in k?We(k,v,{enumerable:!0,configurable:!0,writable:!0,value:A}):k[v]=A,Ci=(k,v)=>{for(var A in v||(v={}))Na.call(v,A)&&Gn(k,A,v[A]);if(Ws)for(var A of Ws(v))on.call(v,A)&&Gn(k,A,v[A]);return k},Qr=(k,v)=>pt(k,Es(v));const rs=(0,p.I)(k=>{var v;return k.palettes.length>0?(v=k.palettes)==null?void 0:v.map(A=>{var W;return A.colors.length>0?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h4",{className:"cm-setting-multivalue__palette-title",children:A.name||"Palette"}),(0,o.jsx)("ul",{className:"cm-setting-multivalue__palette-colors clearfix",children:(W=A.colors)==null?void 0:W.map(be=>{let Le=!1;return k.currentColorId?Le=be.id===k.currentColorId:Le=de().equals(k.current,be.css_value),(0,o.jsx)("li",Qr(Ci({"data-color-id":be.id,"data-color":be.css_value,style:{background:`${be.css_value}`},className:`cm-setting-multivalue__palette-color js-cm-setting-multivalue__palette-color ${be.light?" state-light ":""} ${Le?" state-active ":""}`},k.rerender?{"data-rerender":"true"}:{}),{children:(0,o.jsx)("i",{className:"ca-icon--lg ca-icon--check"})}),be.id)})})]}):null}):(0,o.jsx)("div",{className:"co-settings__blank",children:"There are no color palettes defined yet."})}),wr=(0,p.I)(k=>{var v,A,W;let be=(A=(v=k.settings)==null?void 0:v.allowed)!=null?A:[];return k.palettes.length>0?(0,o.jsxs)(o.Fragment,{children:[(W=k.palettes)==null?void 0:W.map(Le=>{var ot;return Le.colors.length>0?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h4",{className:"cm-setting-multivalue__palette-title",children:Le.name||"Palette"}),(0,o.jsx)("ul",{className:"cm-setting-multivalue__palette-colors clearfix",children:(ot=Le.colors)==null?void 0:ot.map(He=>{var ns,vs;let La=!1,Tn=!0;return(ns=k.settings)!=null&&ns.allowed&&(Tn=!1,La=(vs=k.settings)==null?void 0:vs.allowed.find(ri=>ri.id?ri.id===He.id:ri.css_value===He.css_value),La&&(be=be.filter(ri=>ri.id?ri.id===He.id:ri.css_value===He.css_value))),(0,o.jsx)("li",{"data-color-id":He.id,"data-color":He.css_value,className:` cm-setting-multivalue__palette-color js-cm-setting-multivalue__palette-color-allow ${He.light?"state-light":""} ${La?"state-active":""} ${Tn?"state-implicit":""}`,style:{background:`${He.css_value}`},children:(0,o.jsx)("i",{className:"ca-icon--lg ca-icon--check"})},`color-${He.id}`)})})]}):null}),be.length>0?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h4",{className:"cm-setting-multivalue__palette-title",children:"Other active colors"}),(0,o.jsx)("ul",{className:"cm-setting-multivalue__palette-colors clearfix",children:be==null?void 0:be.map(Le=>(0,o.jsx)("li",{"data-color-id":Le.id,"data-color":Le.css_value,className:` cm-setting-multivalue__palette-color state-active js-cm-setting-multivalue__palette-color-allow ${Le.light?"state-light":""}`,style:{background:`${Le.css_value}`},children:(0,o.jsx)("i",{className:"ca-icon--lg ca-icon--check"})},`color-${Le.id}`))})]}):null]}):(0,o.jsx)("div",{className:"co-settings__blank",children:"There are no color palettes defined yet."})});var Nr=Object.defineProperty,Xr=Object.defineProperties,Oi=Object.getOwnPropertyDescriptors,Ni=Object.getOwnPropertySymbols,Xi=Object.prototype.hasOwnProperty,Zn=Object.prototype.propertyIsEnumerable,pi=(k,v,A)=>v in k?Nr(k,v,{enumerable:!0,configurable:!0,writable:!0,value:A}):k[v]=A,xa=(k,v)=>{for(var A in v||(v={}))Xi.call(v,A)&&pi(k,A,v[A]);if(Ni)for(var A of Ni(v))Zn.call(v,A)&&pi(k,A,v[A]);return k},br=(k,v)=>Xr(k,Oi(v));const bi=(0,p.I)(k=>{var v;return(0,o.jsxs)("select",br(xa(br(xa(xa({className:"js-cm-setting-multivalue__dropdown",tabIndex:-1},k.disabled?{disabled:!0}:{}),k.readonly?{readOnly:!0}:{}),{id:k.id,name:k.id,"data-template":k.template?k.template:"c-dropdown"}),k.ariaLabel?{"aria-label":k.ariaLabel}:{}),{children:[k.non_selection==!0?(0,o.jsx)("option",{value:"",className:"ignored"}):null,(v=k.options)==null?void 0:v.map((A,W)=>(0,o.jsx)("option",br(xa(xa({value:A.value},A.value==k.value?{selected:!0}:{}),A.data?k.tpl.renderDataAttributesAsObject(A.data):{}),{children:A.name}),W))]}))});var ki=r(93898),Lr=r(88398),Fn=r(5181);class jo extends g.E{constructor(v,A,W){super(v,A,W)}setting(){this.connectedHubId=(0,Lr.PL)()?(0,Lr.PL)().connected_hub_id:null,this.popper=null,this.fonts=[],this.group=this.$ctx.data("group"),this.$ctx.on("focus",".js-cm-setting-multivalue__value",A=>{A.preventDefault(),A.stopPropagation()}),this.$ctx.on("click",".js-cm-setting-multivalue__lock",A=>{let W=!1;this.$ctx.find(".js-cm-setting-multivalue__lock-state").hasClass("state-locked")&&(W=!0),A.stopPropagation(),this.lock(!W).then(be=>{typeof this.saved=="function"&&this.saved(be,!0)})}),this.$ctx.on("input",".js-cm-setting-multivalue__value",Fn.debounce(1e3,A=>{A.preventDefault(),A.stopPropagation();const W=Fn(A.currentTarget);this.validateMinMaxValue(W),typeof this.changed=="function"&&this.changed(this.serialize());const be=this.$ctx.find(".js-cm-setting-multivalue__range");be&&be.val(W.val()),!W.is("[readonly]")&&!W.is("[disabled]")&&this.save().then(Le=>{typeof this.saved=="function"&&this.saved(Le,W.data("rerender"))})})),this.$ctx.on("change",".js-cm-setting-multivalue__range",A=>{const W=Fn(A.currentTarget).data("model");W&&this.$ctx.find(`#${W}`)&&this.$ctx.find(`#${W}`).val(A.currentTarget.value).trigger("input")}),this.$ctx.on("click",".js-cm-setting-multivalue__color",A=>{const W=Fn(A.currentTarget);W.hasClass("state-readonly")||this.popper||(A.stopPropagation(),A.preventDefault(),this.data.get(`/api/brand/${(0,ki.M)()}/projects`).then(be=>{const Le=be.data.styleguides;if(this.connectedHubId){const ii=Le.findIndex(Fi=>Fi.hub_id==this.connectedHubId);Le.push(...Le.splice(0,ii))}const ot=Le.reduce((ii,Fi)=>[...ii,{value:Fi.id,name:Fi.name}],[]),He=ot&&ot.length>0&&ot[0].value,ns=this.$ctx.data("isTemplate"),vs=W.data("color"),La=W.data("color-id"),Tn=W.data("original"),ri=ii=>{ii&&this.data.get(`/api/color/library/${ii}`).then(Fi=>{const Ko=ei.find(".js-cm-setting-multivalue__palette-container"),Hr=Fn((0,y.EY)(rs,{current:vs,currentColorId:La,palettes:Fi.palettes,rerender:W.data("rerender")}));Ko.html(Hr)})},ei=Fn((0,y.EY)(ya,{isTemplate:ns,current:vs,currentColorId:La,original:Tn,settings:W.data("settings")||{},rerender:W.data("rerender"),styleguides:ot}));ei.data("trigger",W),this.$ctx.append(ei),ri(He);const io=new qn(ei,this.mod.sandbox).getElem("styleguide_id");io.changed=()=>{const ii=io.serialize();ri(ii.styleguide_id)},this.openPopper(W,ei)}),this.data.get(`/api/brand/${(0,ki.M)()}/projects`).then(be=>{const Le=be.data.styleguides;if(this.connectedHubId){const ii=Le.findIndex(Fi=>Fi.hub_id==this.connectedHubId);Le.push(...Le.splice(0,ii))}const ot=Le.reduce((ii,Fi)=>[...ii,{value:Fi.id,name:Fi.name}],[]),He=ot&&ot.length>0&&ot[0].value,ns=this.$ctx.data("isTemplate"),vs=W.data("color"),La=W.data("color-id"),Tn=W.data("original"),ri=ii=>{ii&&this.data.get(`/api/color/library/${ii}`).then(Fi=>{const Ko=ei.find(".js-cm-setting-multivalue__palette-container"),Hr=Fn((0,y.EY)(rs,{current:vs,currentColorId:La,palettes:Fi.palettes,rerender:W.data("rerender")}));Ko.html(Hr)})},ei=Fn((0,y.EY)(ya,{isTemplate:ns,current:vs,currentColorId:La,original:Tn,settings:W.data("settings")||{},rerender:W.data("rerender"),styleguides:ot}));ei.data("trigger",W),this.$ctx.append(ei),ri(He);const io=new qn(ei,this.mod.sandbox).getElem("styleguide_id");io.changed=()=>{const ii=io.serialize();ri(ii.styleguide_id)},this.openPopper(W,ei)}))}),this.$ctx.on("click",".js-cm-setting-multivalue__palette-color",A=>{const W=Fn(A.currentTarget),be=W.data("color"),Le=W.data("colorId");if(be){const ot=W.closest(".js-cm-setting-multivalue__menu").data("trigger");this.updateColorPreview(ot,be,Le),this.closePopper(),this.save().then(He=>{typeof this.saved=="function"&&this.saved(He,W.data("rerender"))})}}),this.$ctx.on("click",".js-cm-setting-multivalue__ruleset-colors",A=>{if(this.popper)return;const W=Fn(A.currentTarget);A.stopPropagation(),A.preventDefault(),this.data.get(`/api/brand/${(0,ki.M)()}/projects`).then(be=>{const Le=be.data.styleguides.reduce((eo,io)=>[...eo,{value:io.id,name:io.name}],[]),ot=Le&&Le.length>0&&Le[0].value,He=this.$ctx.data("isTemplate"),ns=W.data("color"),vs=W.data("original"),La=eo=>{eo&&this.data.get(`/api/color/library/${eo}`).then(io=>{const ii=Tn.find(".js-cm-setting-multivalue__palette-container"),Fi=Fn((0,y.EY)(wr,{current:ns,palettes:io.palettes,rerender:W.data("rerender"),settings:W.data("settings")||{}}));ii.html(Fi)})},Tn=Fn((0,y.EY)(yt,{isTemplate:He,current:ns,original:vs,settings:W.data("settings")||{},rerender:W.data("rerender"),styleguides:Le}));Tn.data("trigger",W),this.$ctx.append(Tn),La(ot);const ei=new qn(Tn,this.mod.sandbox).getElem("styleguide_define_id");ei.changed=()=>{const eo=ei.serialize();La(eo.styleguide_define_id)},this.openPopper(W,Tn)})}),this.$ctx.on("click",".js-cm-setting-multivalue__palette-color-allow",A=>{A.stopPropagation(),A.preventDefault();const W=Fn(A.currentTarget);W.toggleClass("state-active");const be=W.closest(".js-cm-setting-multivalue__menu").find(".js-cm-setting-multivalue__palette-color-allow"),Le=[];be.each((He,ns)=>{const vs=Fn(ns);vs.hasClass("state-active")&&Le.push({id:vs.data("color-id"),css_value:vs.data("color"),light:vs.hasClass("state-light")})}),Le.length>0?be.removeClass("state-implicit"):be.addClass("state-implicit");const ot={};ot[this.id]={color:{allowed:Le}},this.save({settings:ot}).then(He=>{this.setPreviewColor(ot),typeof this.saved=="function"&&this.saved(He)})}),this.$ctx.on("click",".js-cm-setting-multivalue__chooser-type",A=>{const W=Fn(A.currentTarget),be=W.closest(".js-cm-setting-multivalue__chooser");be.data("multiple")||be.find(".js-cm-setting-multivalue__chooser-type").removeClass("state-selected"),W.addClass("state-selected"),this.save().then(ot=>{typeof this.saved=="function"&&this.saved(ot,W.data("rerender"))})}),this.$ctx.on("click",".js-cm-setting-multivalue__toggle",A=>{const W=Fn(A.currentTarget);this.save().then(be=>{typeof this.saved=="function"&&this.saved(be,W.data("rerender"))})});const v=this.$ctx.find(".js-cm-setting-multivalue__fontfamily");v.length>0&&(this.fonts=v.data("fonts"),this.renderFonts(v.data("value"))),this.setPreviewColor()}enter(){this.mod.leave(this.$ctx)}leave(){super.leave()}serialize(v){const A={};this.$ctx.find(".js-cm-setting-multivalue__value").each((be,Le)=>{const ot=Fn(Le);let He=ot.val();const ns=ot.data("settings");ns&&ns.min&&(He=Math.max(He,ns.min),ot.val(He)),ns&&ns.max&&(He=Math.min(He,ns.max),ot.val(He)),ot.is('[data-type="alpha"]')||(A[ot.attr("id")]=He)}),this.$ctx.find(".js-cm-setting-multivalue__color").each((be,Le)=>{const ot=Fn(Le);let He=ot.data("color");const ns=ot.data("original"),vs=ot.attr("data-color-id"),La=this.$ctx.find('.js-cm-setting-multivalue__value[data-type="alpha"]');La.length>0&&(He=de()(He).setAlpha(Number(La.val())).toRgbString(),this.updateColorPreview(ot,He,vs)),A[ot.data("id")]={original:ns,rgb:He,id:vs==="undefined"?null:vs}}),this.$ctx.find(".js-cm-setting-multivalue__chooser-type.state-selected").each((be,Le)=>{const ot=Fn(Le);A[ot.data("id")]=ot.data("value")}),this.$ctx.find("select").each((be,Le)=>{const ot=Fn(Le);if(ot.attr("id")==="fontWeight"){const ns=ot.val();A.fontFamily=ns}}),this.$ctx.find(".js-cm-setting-multivalue__toggle").each((be,Le)=>{const ot=Fn(Le);A[ot.attr("id")]=ot.is(":checked")});let W=null;return this.group&&!v?W=this.createGroup({},this.group,A):W=A,W}updateColorPreview(v,A,W){v.data("original")||v.data("original",v.data("color")),v.data("color",A),W?v.attr("data-color-id",W):v.removeAttr("data-color-id"),v.find(".js-cm-setting-multivalue__color-preview").css("backgroundColor",A);const be=this.$ctx.find('.js-cm-setting-multivalue__value[data-type="alpha"]');be.length>0&&be.val(de()(A).getAlpha())}lock(v){const A={};return A[this.id]={locked:v},this.save({settings:A})}renderFonts(v){const A=this.$ctx.find(".js-cm-setting-multivalue__fontfamily"),W=this.$ctx.find(".js-cm-setting-multivalue__fontweight"),be=this.fonts.map(He=>{let ns={style:`font-family: '${He.family}'`,missing:He.missing};return He.name_exact&&(ns={style:`font-family: '${He.weights[0].font_id}'`,missing:He.missing}),{value:He.family,name:He.name,data:ns}}),Le=this.fonts.find(He=>He.weights.find(ns=>ns.font_id===v))||{name:"",pseudo:!0,weights:[]};A.html((0,y.EY)(bi,{id:A.data("id"),options:be,value:Le.family,non_selection:Le.pseudo,template:"c-dropdown-typeface",ariaLabel:window.translate("Legacy_publisher_setting_typeface_family_aria"),templateReact:tn.TplCDropdownTypeface}));const ot=Le.weights.map(He=>{let ns="";He.weight=He.weight||"normal",Le.name_exact?ns="Normal":He.weight==="normal"&&He.style==="normal"?ns="Regular":He.weight==="normal"?ns=_()(He.style):He.style==="normal"?ns=_()(He.weight):ns=`${_()(He.weight)} ${_()(He.style)}`;let vs={style:`font-family: '${Le.family}'; font-weight: ${He.weight}; font-style:${He.style};`,missing:He.missing};return Le.name_exact&&(vs={style:`font-family: '${He.font_id}'`,missing:He.missing}),{value:He.font_id,name:ns,data:vs}});W.html((0,y.EY)(bi,{id:W.data("id"),options:ot,non_selection:Le.pseudo,disabled:Le.pseudo,template:"c-dropdown-typeface",templateReact:tn.TplCDropdownTypeface,value:v,ariaLabel:window.translate("Legacy_publisher_setting_typeface_weight_aria")})),this.$dropdownFontFamily=A.find(".js-cm-setting-multivalue__dropdown"),this.$dropdownFontFamily.on("click",He=>{He.stopPropagation()}),this.$dropdownFontFamily.dropdown({changed:function(He){const ns=this.fonts.find(vs=>He.value===vs.family).weights[0].font_id;this.renderFonts(ns),this.save().then(vs=>{typeof this.saved=="function"&&this.saved(vs)})}.bind(this)}),this.$dropdownFontWeight=W.find(".js-cm-setting-multivalue__dropdown"),this.$dropdownFontWeight.on("click",He=>{He.stopPropagation()}),this.$dropdownFontWeight.dropdown({changed:function(){this.save().then(He=>{typeof this.saved=="function"&&this.saved(He)})}.bind(this)})}openPopper(v,A,W){const be={placement:"bottom-end",modifiers:[{name:"offset",options:{offset:[0,10]}}]};W=Fn.extend(!0,{},be,W),this.closePopper();const Le=v.get(0),ot=A.get(0);if(!ot||!Le)throw new Error("Element not found.");this.popper=(0,fe.n4)(Le,ot,W),Fn("body").on("click.multivalue",He=>{Fn(He.target).parents(".js-cm-setting-multivalue__menu").length>0||this.popper&&(this.closePopper(),Fn("body").off("click.multivalue"))})}closePopper(){this.popper&&(this.popper.state.elements.popper.remove(),this.popper.destroy(),this.popper=null)}setPreviewColor(v){const A=this.$ctx.find(".js-cm-setting-multivalue__ruleset-colors"),W=A.find(".js-cm-setting-multivalue__color-preview");let be="transparent";if(A.length>0&&W.length>0){if(v||(v={},v[this.id]={color:Fn(A[0]).data("settings")}),v[this.id]&&v[this.id].color&&v[this.id].color.allowed){const Le=v[this.id].color.allowed;Le.length>0&&(be=`linear-gradient(90deg, ${Le.map((He,ns)=>{let vs=`${He.css_value} ${100/Le.length*ns}%, `;return vs=`${vs+He.css_value} ${100/Le.length*(ns+1)}%`,vs}).join(", ")})`,Fn(A[0]).data("settings",{allowed:Le}))}Fn(W[0]).css("background",be)}}validateMinMaxValue(v){const A=parseInt(v.val()),W=v.dataAsNumber("minValue"),be=v.dataAsNumber("maxValue");W&&W>A&&v.val(W),be&&be<A&&v.val(be)}}var co=r(5181);class Oo extends g.E{constructor(v,A,W){super(v,A,W)}setting(){this.settings=new qn(this.$ctx,this.mod.sandbox),this.currentPassword=this.settings.getElem("password"),this.validation(()=>{this.savePassword()},()=>{this.hideDetails().then(()=>{this.hideActions()}),this.mod.leave(this.$ctx)}),this.$ctx.on("keydown",v=>{this.active&&v.which===9&&(v.shiftKey&&co(v.target).is('input[name="password"]')?(v.preventDefault(),this.mod.prev(this.$ctx)):co(v.target).is('button[type="reset"]')&&(v.preventDefault(),this.mod.next(this.$ctx)))})}savePassword(){this.save().then(v=>{var A;v.success?(this.showSuccess().then(()=>{this.hideDetails().then(()=>{this.hideActions()})}),this.$ctx.trigger("reset"),this.mod.leave(this.$ctx)):v.error?(this.showErrors({password:v.error}),this.currentPassword.setValue("")):(A=v.error_types)!=null&&A.length&&this.showErrors({password_new:v.error_types[0].message})})}serialize(){const v={password:this.$ctx.find("#password").val(),password_new:this.$ctx.find("#password_new").val()};let A=null;return this.$ctx.data("group")&&!nogroup?(A={},A[this.$ctx.data("group")]=v):A=v,A}enter(){super.enter(),this.showDetails().then(()=>{this.$ctx.find("#password").trigger("focus")})}unfocus(){super.unfocus(),this.$details.velocity("callout.pulse",{duration:300}),this.$ctx.find("#password").trigger("focus")}}var Ao=r(5181);class To extends g.E{constructor(v,A,W){super(v,A,W),this.$role=A.find(`#${this.id}`)}elem(){const v=function(){typeof this.changed=="function"&&this.changed(this.serialize())}.bind(this);this.$role.on("change",Ao.debounce(100,()=>{v()}))}serialize(){const v=this.$ctx,A={};A[this.id]=this.$role.val();let W=null;return v.data("group")&&!nogroup?(W={},W[v.data("group")]=A):W=A,W}}var uo=r(5181);class So extends g.E{constructor(v,A,W){super(v,A,W)}elem(){const v=this.$ctx;this.readonly=v.data("readonly"),v.on("click",".js-cm-setting-position__item",A=>{const W=uo(A.currentTarget);return!this.readonly&&!W.hasClass("state-selected")&&(v.find(".js-cm-setting-position__item").removeClass("state-selected"),W.addClass("state-selected"),typeof this.changed=="function"&&this.changed(this.serialize())),!1})}setting(){const v=this.$ctx;this.elem(),v.on("click",".js-cm-setting-position__item",()=>{this.readonly||this.save().then(A=>{A.success&&typeof this.saved=="function"&&this.saved(A)})}),v.on("keydown",A=>{A.which===9&&(A.shiftKey&&uo(A.target).is(v.find(".js-cm-setting-position__item:first-child"))?(A.preventDefault(),this.mod.prev(v)):!A.shiftKey&&uo(A.target).is(v.find(".js-cm-setting-position__item:last-child"))&&(A.preventDefault(),this.mod.next(v)))})}enter(){const v=this.$ctx;v.find(".js-cm-setting-position__item:first-child").trigger("focus"),this.mod.leave(v)}leave(){super.leave()}serialize(){const v=this.$ctx,A=uo.extend(!0,{},v.find(".js-cm-setting-position__item.state-selected").data());let W=null;return v.data("group")?(W={},W[v.data("group")]=A):W=A,W}}var Ai=r(5181);class hi extends g.E{constructor(v,A,W){super(v,A,W),this.$items=A.find(".js-cm-setting-checkbox__input, .js-cm-setting-radio__input")}elem(v){var A;const W=this.$ctx;this.min=(A=W.data("min"))!=null?A:0;const be=W.data("max");this.id=this.$ctx.data("id"),this.buttonsEnabled=this.$ctx.data("buttons-enabled"),this.saveSingle=this.$ctx.dataAsBoolean("saveSingle"),this.enableChangedHook=this.$ctx.dataAsBoolean("enableChangedHook"),this.valueIsNumber=this.$ctx.dataAsBoolean("valueIsNumber"),this.mod.sandbox.subscribe("events",this.mod),this.min&&this.$items.filter(":checked").length<=this.min&&this.disableAllChecked(),W.on("click",".js-cm-setting-checkbox__input, .js-cm-setting-radio__input",Le=>{let ot=0;if(this.$items.each((He,ns)=>{Ai(ns).prop("checked")&&ot++}),this.$items.each((He,ns)=>{Ai(ns).prop("disabled",!1)}),this.buttonsEnabled&&this.$items.each((He,ns)=>{const vs=Ai(ns).prop("checked"),La=Ai(ns).closest(".js-cm-setting__radio-button");vs?(La.removeClass("cm-btn--grey"),La.addClass("cm-btn--primary")):(La.removeClass("cm-btn--primary"),La.addClass("cm-btn--grey"))}),this.min&&ot<=this.min?this.disableAllChecked():be&&ot>=be&&this.$items.each((He,ns)=>{const vs=Ai(ns);vs.prop("checked")||vs.prop("disabled",!0)}),Ai(Le.currentTarget).removeAttr("data-indeterminate"),!v||this.enableChangedHook)typeof this.changed=="function"&&this.changed(this.serialize(),W.data("payload"));else if(v&&this.saveSingle){if(typeof this.singleChanged=="function"){const He=Ai(Le.currentTarget);this.singleChanged({checked:He.is(":checked"),name:He.attr("name"),value:He.attr("value")},W.data("payload"))}}else this.save().then(He=>{He.success&&typeof this.saved=="function"&&this.saved(He,W.data("payload"))})})}checkAll(){this.$ctx.find(".js-cm-setting-checkbox__input").each((v,A)=>{Ai(A).prop("checked",!0)})}uncheckAll(){this.$ctx.find(".js-cm-setting-checkbox__input:checked").each((v,A)=>{this.min&&v+1<=this.min||Ai(A).prop("checked",!1)}),this.min&&this.$items.filter(":checked").length<=this.min&&this.disableAllChecked()}disableAll(){this.$ctx.find(".js-cm-setting-checkbox__input").prop("disabled",!0),this.$ctx.find(".js-ca-checkbox__label").addClass("ca-checkbox__label--disabled")}enableAll(){this.$ctx.find(".js-cm-setting-checkbox__input").removeAttr("disabled"),this.$ctx.find(".js-ca-checkbox__label").removeClass("ca-checkbox__label--disabled")}setPropByOptionValue(v,A,W){this.$ctx.find(`.js-cm-setting-checkbox__input[value="${W}"]`).prop(v,A)}setting(){this.elem(!0)}enter(){const v=this.$ctx;v.find(".js-cm-setting-checkbox__input:eq(0)").trigger("focus"),this.mod.leave(v)}leave(){super.leave()}serialize(){const v=this.$ctx,A={},W=v.find(".js-cm-setting-checkbox__input:checked"),be=v.find(".js-cm-setting-radio__input:checked");W.length>0&&W.each((He,ns)=>{const vs=Ai(ns),La=vs.attr("name");A[La]||(A[La]=[]);const Tn=this.valueIsNumber?parseInt(vs.attr("value")):vs.attr("value");A[La].push(Tn)}),be.length>0&&be.each((He,ns)=>{const vs=Ai(ns),La=vs.attr("name");A[La]=vs.attr("value"),A[La].toLowerCase()==="null"&&(A[La]=null)});let Le=null;const ot=v.data("group");return ot?Le=this.createGroup({},ot,A):Le=A,Le}disableAllChecked(){this.$items.each((v,A)=>{const W=Ai(A);W.prop("checked")&&W.prop("disabled",!0)})}countChecked(){return this.$items.filter(" :checked").length}checkedAll(){return this.$items.filter(" :not(:checked)").length===0}checkedMoreThanMin(){return this.$items.filter(" :checked").length>this.min}getId(){return this.id}}var si=r(5181);class Li extends g.E{constructor(v,A,W){super(v,A,W)}elem(v){const A=this.$ctx;A.on("click",".js-cm-setting-ratio__ratio",W=>{A.find(".js-cm-setting-ratio__ratio").removeClass("state-active"),si(W.currentTarget).addClass("state-active")}),v||A.on("click",".js-cm-setting-ratio__ratio",()=>{typeof this.changed=="function"&&this.changed(this.serialize())})}setting(){const v=this.$ctx;this.elem(!0),v.on("click",".js-cm-setting-ratio__ratio",()=>{this.save().then(A=>{A.success&&typeof this.saved=="function"&&this.saved(A)})})}enter(){const v=this.$ctx;this.mod.leave(v)}leave(){super.leave()}serialize(){const v=this.$ctx,A={};A[this.id]=v.find(".js-cm-setting-ratio__ratio.state-active").data("ratio");let W=null;return v.data("group")?(W={},W[v.data("group")]=A):W=A,W}}var Me=r(20610),ue=r(23847);class xe extends g.E{constructor(v,A,W){super(v,A,W),this.$editor=this.$ctx.find(".js-cm-setting__richtext-editor")}elem(){this.initialValue=this.$ctx.data("value"),(0,Me.A)(this.$editor),this.bindEditor()}setting(){this.elem(),this.$ctx.on("keydown",v=>{this.active&&v.which===9&&(v.preventDefault(),this.$ctx.trigger("submit"),v.shiftKey?this.mod.prev(this.$ctx):this.mod.next(this.$ctx))}),this.validation(()=>{this.saveContent()},()=>{this.editor.setContent(this.initialValue),this.mod.leave(this.$ctx)})}saveContent(){this.save().then(v=>{typeof this.saved=="function"&&this.saved(v),v.success?(this.initialValue=this.getValue(),this.mod.leave(this.$ctx),this.showSuccess()):v.errors&&this.showErrors(v.errors)})}enter(){super.enter(),this.readonly?this.mod.leave(this.$ctx):(this.showActions(),this.editor.focus())}leave(){super.leave(),this.readonly||this.hideActions()}focus(){return this.isSetting?this.enter():this.editor.focus(),this}unfocus(v){super.unfocus(),this.readonly||(this.mod.leave(this.$ctx),this.mod.enter(v))}getValue(){return this.editor.getContentAsHtml()}bindEditor(){this.editor=new ue.j(this.$editor,this.mod.sandbox,{placeholder:this.$ctx.data("placeholder"),toolbar:this.$ctx.data("toolbar"),style:this.$ctx.data("style")||"inline",set:this.$ctx.data("set")}),this.editor.leave=()=>{this.save().then(v=>{typeof this.saved=="function"&&this.saved(v)})},this.editor.enable()}serialize(){return{[this.id]:this.getValue()}}}var Pe=r(42505),Ge=r.n(Pe),wt=r(51728),xt=r(69086),Tt=r(42735),Je=r(35914),tt=r(96838),ke=r(68864),Ft=r(24735),Wt=r(66847),qt=r(60067),Pt=r(96604),ls=r(15143),cs=r(89354),Ha=r(24073),Ya=r(53557),ca=r(16021);const Js=(0,p.I)(k=>(0,o.jsxs)("form",{className:"js-cm-setting-search__create-form",children:[(0,o.jsx)("div",{className:"cm-setting-search__create-form-fields",children:typeof k.template=="function"?(0,o.jsx)(k.template,{}):null}),(0,o.jsx)(ca.h,{})]}));var aa=r(5181);class Fa extends g.E{constructor(v,A,W){super(v,A,W),this.$text=A.find(".js-cm-setting-search__input"),this.$preview=A.find(".js-cm-setting-search__preview"),this.$chooser=A.find(".js-cm-setting-search__chooser"),this.$value=A.find(".js-cm-setting-search__value"),this.$currentSelection=null,this.$create=null}getTemplateComponent(v,A){switch(v){case"appearance-font-search-item":return(0,y.EY)(ke.r,A);case"appearance-font-search-content":return(0,y.EY)(tt.N,A);case"layermodule-search-item":return(0,y.EY)(Ya.z,A);case"layermodule-search-content":return(0,y.EY)(Ha.t,A);case"layercolor-search-item":return(0,y.EY)(Wt.i,A);case"layercolor-search-content":return(0,y.EY)(Ft.m,A);case"layerinteraction-search-item":return(0,y.EY)(qt.P,A);case"layerinteraction-search-template-item":return(0,y.EY)(cs.$,A);case"layerinteraction-search-template-content":return(0,y.EY)(Pt.r,A);case"layerinteraction-search-template-create":return(0,y.EY)(ls.A,A);case"c-createproject-search-project-template":return(0,y.EY)(wt.g,A);case"c-createproject-search-project-template-item":return(0,y.EY)(xt.n,A);case"c-settingstextlibrary-setting-list-i18n-search-content":return(0,y.EY)(Tt.M,A);case"c-settingstextlibrary-setting-list-i18n-search-item":return(0,y.EY)(Je.k,A);default:return console.error(`Template ${v} not found, fallback to default rendering.`),""}}getTemplate(v){switch(v){case"appearance-font-search-item":return ke.r;case"appearance-font-search-content":return tt.N;case"layermodule-search-item":return Ya.z;case"layermodule-search-content":return Ha.t;case"layercolor-search-item":return Wt.i;case"layercolor-search-content":return Ft.m;case"layerinteraction-search-item":return qt.P;case"layerinteraction-search-template-item":return cs.$;case"layerinteraction-search-template-content":return Pt.r;case"layerinteraction-search-template-create":return ls.A;default:return console.error(`Template ${v} not found.`),()=>null}}elem(){const v=this.$ctx;this.settings=null,this.readonly=v.data("readonly"),this.clearSearch=v.data("clearSearch"),this.apiSearch=v.data("api-search")===!0,this.apiSearchResults={},this.apiSearchCurrentInput=void 0,this.apiCurrentResults=[],this.searchItems=v.find(".js-cm-setting-search__items"),this.itemTemplate=v.data("template-item")||!1,this.keySelectedResult=null,this.initialize(),this.$value.val(this.$preview.find(".js-cm-setting-search__item").data("value")),v.on("focusin",".js-cm-setting__bar",A=>{aa(A.currentTarget).addClass("state-active")}).on("focusout",".js-cm-setting__bar",A=>{aa(A.currentTarget).removeClass("state-active")}),this.$chooser.on("click",".js-cm-setting-search__item",A=>{A.stopPropagation();const W=aa(A.currentTarget);this.$currentSelection=W,this.$value.val(W.data("value"));const be=W.data();!this.readonly&&typeof this.itemSelected=="function"&&this.itemSelected(W.data("value"),be),this.apiSearch&&(this.apiSearchResults={},this.apiSearchCurrentInput=void 0,this.searchItems.html(""),this.$value.val(""),this.$text.val("")),this.save().then(Le=>{Le.success&&(typeof this.saved=="function"&&this.saved(Le),this.hideDetails(),this.isSetting&&this.mod.leave(v),this.clearSearch&&(this.destroy(),this.$text.val(""),this.initializeJets()))}),this.$preview.find(".js-cm-setting-search__preview-content").html(W.clone())}),v.on("buttonGroupCancelClicked",".js-cm-setting__actions",()=>{this.hideDetails(),this.isSetting&&this.mod.leave(v),this.clearSearch&&(this.destroy(),this.$text.val(""),this.initializeJets())}),v.on("click",".js-cm-setting-search__preview",()=>{this.showDetails().then(()=>{this.$text.trigger("focus")})}),v.on("buttonGroupCreateClicked",".js-cm-setting__actions",A=>{const W=aa(A.currentTarget);this.hideDetails().then(()=>{this.hideActions(),this.$chooser.hide();const be=W.data("template");this.$create=aa((0,y.EY)(Js,{template:this.getTemplate(be)})),this.$details.append(this.$create),this.settings=new qn(this.$create,this.mod.sandbox),this.showDetails().then(()=>{const Le=this.settings.getFirstElem();typeof Le.focus=="function"&&Le.focus()}),this.validation(()=>{const Le=this.settings.serialize();this.add(Le).then(ot=>{const He=aa(this.getTemplateComponent(v.data("templatePreview"),ot));this.$preview.find(".js-cm-setting-search__preview-content").html(He),this.$value.val(He.data("value")),v.find(".js-cm-setting-search__items").append(He.clone()),this.showSuccess().then(()=>{this.hideDetails().then(()=>{var ns;this.hideActions(),this.$chooser.show(),(ns=this.$create)==null||ns.hide()})})})},()=>{this.hideDetails().then(()=>{var Le;this.hideActions(),this.$chooser.show(),(Le=this.$create)==null||Le.hide(),this.showDetails()})},this.$create)})})}initialize(){this.apiSearch?this.initializeApiSearch():this.initializeJets()}initializeApiSearch(){this.$text.on("input",()=>{const v=this.$text.val();if(v!==this.apiSearchCurrentInput){if(this.apiSearchCurrentInput=v,this.apiSearchResults[v]){this.addSearchResults(this.apiSearchResults[v]);return}v?this.performApiSearch(v):this.searchItems.html("")}}),this.$text.on("keydown",v=>{if(v.key==="ArrowDown"||v.key==="ArrowUp"){this.handleArrowKeysClick(v.key==="ArrowUp"),v.preventDefault();return}else if(v.key==="Enter"&&this.keySelectedResult!==null){v.preventDefault(),this.searchItems.find(`.js-cm-setting-search__item[data-index=${this.keySelectedResult}]`).trigger("click");return}this.keySelectedResult=null})}handleArrowKeysClick(v){const A=this.apiCurrentResults.length;let W=this.keySelectedResult;if(this.searchItems.find(".js-cm-setting-search__item.state-active").removeClass("state-active"),A!==0&&!(v&&W===null)){if(W===null?W=0:W+=v?-1:1,W<0){this.keySelectedResult=null;return}else W>A-1&&(W=A-1);this.keySelectedResult=W,this.searchItems.find(`.js-cm-setting-search__item[data-index=${this.keySelectedResult}]`).addClass("state-active"),W>7?this.searchItems.scrollTop(this.searchItems[0].scrollHeight):W<4&&this.searchItems.scrollTop(0)}}initializeJets(){this.jets=new(Ge())({searchTag:`#search-${this.id}-search`,contentTag:`#search-${this.id}-content`})}performApiSearch(v){this.apiCurrentResults=[],this.searchItems.html(""),this.keySelectedResult=null,this.search(v).then(A=>{this.apiSearchResults[v]=A,this.addSearchResults(A)})}addSearchResults(v){let A="";this.apiCurrentResults=[];for(const[W,be]of v.entries())be.index=W,A+=this.getTemplateComponent(this.itemTemplate,be),this.apiCurrentResults.push(be);this.searchItems.html(A)}setting(){const v=this.$ctx;this.elem(!0),v.on("submit",A=>{A.preventDefault()}),v.on("reset",()=>{this.hideDetails(),this.mod.leave(v),this.clearSearch&&(this.destroy(),this.$text.val(""),this.initializeJets())}),v.on("keydown",A=>{this.active&&A.which===9&&A.shiftKey&&aa(A.target).is(this.$text)&&(A.preventDefault(),this.mod.prev(v))})}serialize(){const v=this.$ctx;let A={};A[this.id]=this.$value.val()||"",this.$currentSelection&&(A=aa.extend(!0,{},A,this.$currentSelection.data()));let W=null;return v.data("group")?(W={},W[v.data("group")]=A):W=A,W}enter(){super.enter(),this.readonly?this.mod.leave(this.$ctx):this.showDetails().then(()=>{this.$text.trigger("focus")})}leave(){super.leave()}setValue(v){const A=this.$ctx,W=aa(this.getTemplateComponent(A.data("templatePreview"),v));this.$preview.find(".js-cm-setting-search__preview-content").html(W),this.$value.val(W.data("value"))}focus(){this.readonly||this.$text.trigger("focus")}unfocus(){super.unfocus(),this.readonly||(this.$details.velocity("callout.pulse",{duration:300}),this.$text.trigger("focus"))}destroy(){this.jets&&this.jets.destroy()}}var _a=r(5181);class zs extends g.E{constructor(v,A,W){super(v,A,W),this.$text=this.$ctx.find(".js-cm-setting__input")}elem(){this.initialValue=this.$text.val(),this.readonly=this.$text.is("[readonly]"),(0,Me.A)(this.$text),this.$text.on("lazybeforeunveil",()=>{Me.A.update(this.$text)}),this.$text.on("change",v=>{!this.readonly&&typeof this.changed=="function"&&this.changed(_a(v.currentTarget).val())}),this.$text.on("focus",()=>{!this.readonly&&typeof this.focus=="function"&&this.focus()}),this.$text.on("keyup",_a.debounce(800,v=>{!this.readonly&&typeof this.changed=="function"&&(this.autoSave(),this.changed(_a(v.currentTarget).val()))})),this.$ctx.on("focusin",".js-cm-setting__bar",v=>{this.readonly||_a(v.currentTarget).addClass("state-active")}).on("focusout",".js-cm-setting__bar",v=>{this.readonly||_a(v.currentTarget).removeClass("state-active")})}setting(){this.elem(),this.hasChanged=!1,this.$text.on("keyup change",()=>{this.hasChanged=this.initialValue!==this.$text.val()}),this.$ctx.on("keydown",v=>{this.active&&v.which===9&&(v.preventDefault(),this.$ctx.trigger("submit"),v.shiftKey?this.mod.prev(this.$ctx):this.mod.next(this.$ctx))}),this.$ctx.on("reset",v=>{v.preventDefault(),this.$text.val(this.initialValue),this.hasChanged=!1,typeof this.cancel=="function"&&this.cancel(this.serialize())}),this.validation(()=>{this.mod.fire("textSnippetAutoSaveStarted"),this.hasChanged||this.multipleValues?this.save().then(v=>{v.success?(typeof this.saved=="function"&&this.saved(v),this.initialValue=this.$text.val()):v.errors&&this.showErrors(v.errors)}):(typeof this.notChanged=="function"&&this.notChanged(this.serialize()),this.mod.leave(this.$ctx))},()=>{this.mod.leave(this.$ctx)})}autoSave(){this.$ctx.trigger("submit")}enter(){super.enter(),this.readonly?this.mod.leave(this.$ctx):this.$text.trigger("select")}leave(){super.leave(),this.readonly||this.$text.trigger("blur")}focus(){return this.readonly||(this.isSetting?this.enter():this.$text.trigger("select")),this}unfocus(v){super.unfocus(),this.readonly||(this.validator.form()?this.hasChanged?this.save().then(A=>{typeof this.saved=="function"&&this.saved(A),A.success?(this.initialValue=this.$text.val(),this.mod.leave(this.$ctx),this.mod.enter(v)):A.errors&&this.showErrors(A.errors)}):(this.mod.leave(this.$ctx),this.mod.enter(v)):(this.validator.focusInvalid(),this.$ctx.velocity("callout.pulse",{duration:300})))}setValue(v){return this.$text.attr("type")==="unit"&&(v=this.tpl.unit(v,!0)),this.$text.val(v),this}getValue(){let v=this.$text.val();return this.$text.attr("type")==="unit"&&(v=this.tpl.unit(v,!0)),v}clear(){this.$text.val("")}setReadonly(v){v?(this.readonly=!0,this.$text.prop("readonly","readonly")):(this.readonly=!1,this.$text.prop("readonly",!1))}serialize(){const v={[this.id]:this.getValue()},A=this.$ctx.data("group");let W=null;return A?W=this.createGroup({},A,v):W=v,W}}var Jt=r(5181);class Ss extends g.E{constructor(v,A,W){super(v,A,W),this.$text=A.find(".js-cm-setting__input")}elem(){const v=this.$ctx;if(this.readonly=v.data("readonly"),this.autoSave=v.data("autosave"),this.placeholder=this.$text.data("placeholder"),this.mode=v.data("mode")?v.data("mode"):"WYSIWYG",this.saveDelay=600,v.on("focusin",".js-cm-setting__bar",A=>{this.readonly||Jt(A.currentTarget).addClass("state-active")}).on("focusout",".js-cm-setting__bar",A=>{this.readonly||Jt(A.currentTarget).removeClass("state-active")}),v.on("click",".js-cm-setting-snippet-value__ca-language-badge",A=>{const be=Jt(A.currentTarget).data("languageCode");typeof this.languageSwitched=="function"&&this.languageSwitched(be)}),this.mode==="WYSIWYG"&&(this.bindEditor(),this.readonly||(this.editor.enable(),this.editor.quill.container.style.minHeight="32px"),this.editor.saved=function(){this.isSetting&&this.autoSave===!0&&!this.readonly&&(this.mod.fire("textSnippetAutoSaveStarted"),this.$ctx.trigger("submit"))}.bind(this)),this.mode==="SOURCE"&&this.isSetting){let A=null;this.$text.on("change keyup paste",()=>{this.mod.fire("textSnippetAutoSaveStarted"),A!==null&&clearTimeout(A),A=window.setTimeout(()=>{this.$ctx.trigger("submit")},this.saveDelay)})}}bindEditor(){this.editor=new ue.j(this.$text,this.mod.sandbox,{placeholder:this.placeholder,toolbar:!1,saveDelay:this.saveDelay,plainPaste:this.mode==="WYSIWYG",style:"inline",set:this.$ctx.data("set")})}getValue(){return this.mode==="SOURCE"?this.$text.val():this.editor.getContentAsHtml()}setting(){this.elem();const v=this.$ctx;this.hasChanged=!1,v.on("keydown",A=>{this.active&&A.which===9&&(A.preventDefault(),v.trigger("submit"),A.shiftKey?this.mod.prev(v):this.mod.next(v))}),v.on("reset",A=>{A.preventDefault(),typeof this.cancel=="function"&&this.cancel(this.serialize())}),this.validation(()=>{this.mod.fire("textSnippetAutoSaveStarted"),this.isSetting&&!this.readonly&&this.save().then(A=>{A.success?(typeof this.saved=="function"&&this.saved(A),this.autoSave||(this.mod.leave(v),this.showSuccess())):A.errors&&this.showErrors(A.errors)})},()=>{this.mod.leave(v)})}enter(){super.enter(),this.readonly?this.mod.leave(this.$ctx):(this.mode==="WYSIWYG"&&this.editor.focus(),this.autoSave||this.showActions())}leave(){super.leave(),this.readonly||(this.$text.trigger("blur"),this.autoSave||this.hideActions())}focus(){return!this.isSetting&&this.mode==="WYSIWYG"?this.editor.focus():this.enter(),this}unfocus(v){if(super.unfocus(),!this.readonly){const A=this.$ctx;this.mod.leave(A),this.mod.enter(v)}}setValue(v){return this.$text.attr("type")==="unit"&&(v=this.tpl.unit(v,!0)),this.$text.val(v),this}serialize(){const v=this.$ctx,A={};A[this.id]=this.getValue();let W=null;const be=v.data("group");return be?W=this.createGroup({},be,A):W=A,W}}const hs=(0,p.I)(()=>(0,o.jsx)("div",{className:"co-settings--overlay",children:(0,o.jsx)("fieldset",{className:"co-settings__fieldset--notitle",children:(0,o.jsx)(l.H,{id:"delete-structure-item",label:window.translate("Legacy_setting_structure_delete_label"),description:window.translate("Legacy_setting_structure_delete_description")})})}));var fs=r(49290),js=r(2728),Wa=r(62878);const Pn=(0,p.I)(k=>(0,o.jsxs)("form",{className:"c-setting-elem__edit-details js-c-setting-elem__edit-details co-settings",children:[(0,o.jsx)("div",{className:"c-setting-elem__edit-details-fields",children:(0,o.jsx)(Wa.A,{id:"name",label:window.translate("Legacy_setting_structure_name_label"),value:k.item.name,required:!0,placeholder:null})}),(0,o.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer",children:[(0,o.jsx)(fs.t,{}),(0,o.jsx)(js.b,{})]})]})),Cn=(0,p.I)(k=>{var v;const A=k.items.filter(W=>W.parent_id===k.parent_filter);return(0,o.jsx)("ul",{className:`cm-setting-structure__list js-cm-setting-structure__list ${k.parent_filter===null?"cm-setting-structure__list--root":""}`,"data-item-id":k.parent_filter,children:A.length>0?(v=Object.keys(A))==null?void 0:v.map(W=>(0,o.jsxs)("li",{className:"cm-setting-structure__item js-cm-setting-structure__item","data-id":A[W].id,"data-parent-id":A[W].parent_id,children:[(0,o.jsxs)("span",{className:"cm-setting-structure__name",children:[(0,o.jsx)("i",{className:"icon-bars cm-setting-structure__handle js-cm-setting-structure__handle"}),A[W].name]}),(0,o.jsxs)("div",{className:"cm-setting-structure__item-settings",children:[(0,o.jsx)("button",{type:"button",className:"cm-setting-structure__edit-item js-cm-setting-structure__edit-item js-cm-btn-dropdown__toggle","data-id":A[W].id,children:(0,o.jsx)("i",{className:"icon-cog cm-setting-structure__edit-icon"})}),(0,o.jsx)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--right cm-btn-dropdown__menu--below js-cm-btn-dropdown__menu"}),(0,o.jsx)("button",{type:"button",className:"cm-setting-structure__delete-item js-cm-btn-dropdown__toggle js-cm-setting-structure__delete-item","data-id":A[W].id,children:(0,o.jsx)("i",{className:"icon-trash cm-setting-structure__delete-icon"})}),(0,o.jsx)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--right cm-btn-dropdown__menu--below js-cm-btn-dropdown__menu"})]}),(0,o.jsx)(Cn,{items:k.items,parent_filter:A[W].id})]},A[W].id)):null})});var Xa=r(5181);class An extends g.E{constructor(v,A,W){super(v,A,W)}elem(){const v=this.$ctx;this.api=v.data("api"),this.mod.sandbox.subscribe("events",this.mod),this.brandId=(0,ki.M)(),this.projectId=(0,Lr.PL)()?(0,Lr.MJ)():null,this.model=null,this.saved=null,this.getModel(),this.render(),this.registerAddItem(),v.on("click",".js-cm-setting-structure__edit-item",A=>{A.preventDefault();const W=Xa(A.currentTarget),be=W.data("id"),Le=W.next(".js-cm-btn-dropdown__menu");this.openItemSettings(be,Le)}),v.on("click",".js-cm-setting-structure__delete-item",A=>{A.preventDefault();const W=Xa(A.currentTarget),be=W.data("id"),Le=W.next(".js-cm-btn-dropdown__menu");this.openItemDelete(be,Le)})}setting(){this.elem()}getModel(){this.model=this.$ctx.data("model")}getModelEntry(v){return this.model.find(A=>A.id==v)}updateStructure(v){v.success===!0&&v.categories?this.model=v.categories:console.error("Error on update Structure"),this.render()}registerAddItem(){const A=this.$ctx.find(".js-cm-setting-structure__add-item"),be=new qn(A,this.mod.sandbox).getElem("structureadditem");A.on("keydown",".js-cm-setting__input",Le=>{if(Le.keyCode===13){Le.preventDefault();const ot={name:be.getValue()};this.addItem(ot),be.clear()}})}initSortable(){this.$ctx.find(".js-cm-setting-structure__list").each((W,be)=>{_r.Ay.create(be,{group:"structure",draggable:".js-cm-setting-structure__item",handle:".js-cm-setting-structure__handle",ghostClass:"cm-setting-structure__item--ghost",chosenClass:"cm-setting-structure__item--choosen",dragClass:"cm-setting-structure__item--drag",animation:60,put:!0,pull:!0,onEnd:function(Le){const ot=Xa(Le.item).data("id");this.updateItem(ot,{parent_id_from:Xa(Le.from).data("itemId"),parent_id_to:Xa(Le.to).data("itemId"),sort:Le.newIndex})}.bind(this)})})}openItemDelete(v,A){const W=Xa((0,y.EY)(hs,{id:v})),be=new qn(W,this.mod.sandbox);A.html(W);const Le=be.getSetting("delete-structure-item");Le.focus(),Le.deleted=function(){this.deleteItem(v),this.mod.fire("closeDropdown",A,["events"])}.bind(this),Le.cancelled=function(){this.mod.fire("closeDropdown",A,["events"])}.bind(this)}openItemSettings(v,A){const W=this.getModelEntry(v);if(W){const be=Xa((0,y.EY)(Pn,{item:W}));A.html(be);const Le=A.find(".js-c-setting-elem__edit-details"),ot=new qn(Le,this.mod.sandbox);ot.validation(()=>{const He=ot.serialize();this.updateItem(W.id,He)},()=>this.mod.fire("closeDropdown",A))}}addItem(v){this.handleUpdate("add",null,v)}updateItem(v,A){this.handleUpdate("update",v,A)}deleteItem(v){this.handleUpdate("delete",v)}handleUpdate(v,A,W){if(this.api)switch(v){case"update":W.brand_id=this.brandId,W.project_id=this.projectId,this.data.put(`${this.api}/${A}`,W).then(be=>{this.updateStructure(be),this.handleSavedHook(v,A,W)});break;case"add":W.brand_id=this.brandId,W.project_id=this.projectId,this.data.post(this.api,W).then(be=>{this.updateStructure(be),this.handleSavedHook(v,A,W)});break;case"delete":this.data.delete(`${this.api}/${A}`).then(be=>{this.updateStructure(be),this.handleSavedHook(v,A,W)});break}}handleSavedHook(v,A,W){if(typeof this.saved=="function"){const be={type:v};A&&(be.id=A),W&&(be.item=W),this.saved(be)}}cleanUpEmptyLists(){this.$ctx.find(".js-cm-setting-structure__list").each((A,W)=>{const be=Xa(W);be.children().length===0&&be.html("")})}render(){const A=this.$ctx.find(".js-cm-setting-structure__content"),W=this.model;W.sort((Le,ot)=>parseInt(Le.sort)-parseInt(ot.sort));const be=Xa((0,y.EY)(Cn,{items:W,parent_filter:null}));A.html(be),this.initSortable(),this.cleanUpEmptyLists()}serialize(v){const A=this.$ctx,W={};W[this.id]={items:this.model};let be=null;const Le=A.data("group");return Le&&!v?be=this.createGroup({},Le,W):be=W,be}}var qr=r(75573);const Cr=(0,p.I)(k=>{var v;const A=k.items.filter(W=>W.parent_id===k.parent_filter);return(0,o.jsx)("ul",{className:`cm-setting-structure-chooser__list js-cm-setting-structure-chooser__list ${k.parent_filter===null?"cm-setting-structure-chooser__list--root":""}`,"data-item-id":k.parent_filter,children:A&&A.length>0?(v=Object.keys(A))==null?void 0:v.map(W=>(0,o.jsxs)("li",{className:"cm-setting-structure-chooser__item js-cm-setting-structure-chooser__item","data-id":A[W].id,"data-parent-id":A[W].parent_id,children:[(0,o.jsx)("span",{children:(0,o.jsx)(qr.z,{classes:"js-cm-setting-structure-chooser__checkbox",name:A[W].name,disabled:!1,checked:A[W].selected&&A[W].selected===!0,value:A[W].id,label:A[W].name})}),(0,o.jsx)(Cr,{items:k.items,parent_filter:A[W].id})]},A[W].id)):null})});var Or=r(5181);class Di extends g.E{constructor(v,A,W){super(v,A,W),this.$listContainer=A.find(".js-cm-setting-structure-chooser__container")}elem(){const v=this.$ctx;this.model=[],this.isOpen=!1,this.isRendered=!1,this.changed=!1,this.getModel(),this.updateSummary(),v.on("click",".js-cm-setting-structure-chooser__checkbox",A=>{const W=Or(A.currentTarget),be=W.val(),Le=W.is(":checked");this.updateEntry(be,Le)}),v.on("click",".js-cm-setting-structure-chooser__dropdown",()=>{this.toggle()})}getModel(){this.model=this.$ctx.data("model"),this.model.sort((v,A)=>parseInt(v.sort)-parseInt(A.sort))}updateEntry(v,A){const W=this.getEntry(v);W.selected=A,this.updateSummary(),typeof this.changed=="function"&&this.changed(this.serialize())}updateSummary(){const v=this.$ctx.find(".js-cm-setting-structure-chooser__summary"),A=this.getActiveEntries().map(W=>W.name);A.length>0?v.html(A.join(", ")):v.html(v.data("description"))}getEntry(v){return this.model.find(A=>A.id==v)}getActiveEntries(){return this.model.filter(v=>v.selected&&v.selected===!0)}toggle(){this.isOpen===!1?this.open():this.close()}open(){var v;const A=this.$listContainer;this.isOpen=!0,this.$ctx.find(".js-cm-setting__bar").addClass("state-active"),this.isRendered===!1&&this.renderList(),A.addClass("state-open");const be=((v=A.offset())==null?void 0:v.top)||0,Le=A.outerHeight()||0,ot=be+Le+30;this.mod.resize(ot),Or("html").on("mousedown.structurechooser",He=>{Or(He.target).closest(".js-cm-setting-structure-chooser").length===0&&this.close()})}close(){this.isOpen=!1,this.$ctx.find(".js-cm-setting__bar").removeClass("state-active"),this.$listContainer.removeClass("state-open"),this.mod.resize(),Or("html").off(".structurechooser")}renderList(){const v=Or((0,y.EY)(Cr,{items:this.model,parent_filter:null}));this.$listContainer.html(v),this.isRendered=!0}serialize(v){const A=this.getActiveEntries().map(He=>He.id),W=this.$ctx,be={};be[this.id]=A;let Le=null;const ot=W.data("group");return ot&&!v?Le=this.createGroup({},ot,be):Le=be,Le}}const ai=(0,p.I)(k=>k.apply==="ALL"?(0,o.jsxs)("button",{className:`ca-badge ca-badge__tag-item ca-badge__tag-item--used ${k.source==="AUTO"?"ca-badge__tag-item--autotag":"ca-badge__tag-item--manual"}`,"data-tag":k.tag,"data-source":k.source,"data-engine":k.engine,children:[(0,o.jsx)("i",{className:"ca-icon--check"}),k.tag]}):k.apply==="PARTIAL"?(0,o.jsxs)("button",{className:`ca-badge ca-badge__tag-item ca-badge__tag-item--partial ${k.source==="AUTO"?"ca-badge__tag-item--autotag":"ca-badge__tag-item--manual"}`,"data-tag":k.tag,"data-source":k.source,"data-engine":k.engine,children:[(0,o.jsx)("i",{className:"ca-icon--check"}),k.tag]}):(0,o.jsxs)("button",{className:`ca-badge ca-badge__tag-item ca-badge__tag-item--unused ${k.source==="AUTO"?"ca-badge__tag-item--autotag":"ca-badge__tag-item--manual"}`,"data-tag":k.tag,"data-source":k.source,"data-engine":k.engine,children:[(0,o.jsx)("i",{className:"ca-icon--add"}),k.tag]}));var Bi=Object.defineProperty,mi=Object.getOwnPropertySymbols,_i=Object.prototype.hasOwnProperty,Ys=Object.prototype.propertyIsEnumerable,Ga=(k,v,A)=>v in k?Bi(k,v,{enumerable:!0,configurable:!0,writable:!0,value:A}):k[v]=A,Qs=(k,v)=>{for(var A in v||(v={}))_i.call(v,A)&&Ga(k,A,v[A]);if(mi)for(var A of mi(v))Ys.call(v,A)&&Ga(k,A,v[A]);return k};const ga=(0,p.I)(k=>{var v;return(0,o.jsxs)(o.Fragment,{children:[k.query?(0,o.jsxs)("div",{className:"js-cm-setting-tags__tag-new cm-setting__label cm-setting-tags__lbl-message",children:[window.translate("Legacy_txt_tag_add"),' "',(0,o.jsx)("span",{children:k.query}),'"']}):null,k.tags.length>0?(0,o.jsxs)(o.Fragment,{children:[(v=k.tags)==null?void 0:v.map((A,W)=>(0,o.jsx)(ai,Qs({},typeof A=="object"?A:{tag:A}),W)),k.hasMoreResults?(0,o.jsx)("div",{className:"cm-setting__label cm-setting-tags__more-message",children:window.translate("Legacy_medialibrary_sidebar_refine_search_message")}):null]}):k.query?null:(0,o.jsx)("div",{className:"co-settings__blank",children:k.label_none||window.translate("Legacy_medialibrary_sidebar_no_tags_message")})]})});var Kn=r(5181);class lr extends g.E{static get FILTER_BY_PROJECT(){return"PROJECT"}static get FILTER_BY_ASSETS(){return"ASSETS"}constructor(v,A,W){super(v,A,W),this.account=this.mod.sandbox.getConfigParam("account"),this.$searchContainer=this.$ctx.find(".js-cm-setting-tags__search"),this.$resultsContainer=this.$ctx.find(".js-cm-setting-tags__results"),this.$autoTagResultsContainer=this.$ctx.find(".js-cm-setting-tags__results--autotags")}elem(v){this.tags=this.transformTags(this.$ctx.data("tags")),this.api=this.$ctx.data("api"),this.searchApi=this.$ctx.data("searchApi"),this.searchFilteredBy=this.$ctx.dataAsString("searchFilteredBy"),this.template=this.$ctx.data("template"),this.projectId=this.$ctx.dataAsNumber("projectId"),this.screens=this.$ctx.data("screens"),this.sets=this.$ctx.data("sets"),this.autoTagTypes=this.$ctx.data("autoTagTypes"),this.readonly=this.$ctx.data("readonly"),this.filter=this.screens.length===0,this.currentQuery="",this.settings=new qn(this.$searchContainer,this.mod.sandbox),this.query=this.settings.getElem(`${this.id}_query`),this.query.changed=A=>{this.currentQuery!==A&&(this.currentQuery=A,this.search(A))},this.$ctx.on("click",".ca-badge__tag-item",A=>{if(A.stopPropagation(),this.readonly)return!1;const W=Kn(A.currentTarget),be={tag:W.dataAsString("tag"),source:W.data("source"),engine:W.data("engine"),screens:this.screens,sets:this.sets};W.hasClass("ca-badge__tag-item--used")?(this.mod.fire("editAssetTag",{action:"remove"}),be.type="remove",this.tags=this.tags.filter(ot=>ot.tag!==be.tag)):(this.mod.fire("editAssetTag",{action:"assign"}),this.tags.push({tag:be.tag,apply:"ALL"}));const Le=be.type==="remove"?"NONE":"ALL";W.replaceWith((0,y.EY)(ai,{tag:be.tag,source:be.source,engine:be.engine,apply:Le})),v&&this.data.post(this.api,be).then(ot=>{ot.success&&typeof this.saved=="function"&&this.saved(ot)})}),this.$ctx.on("click",".js-cm-setting-tags__toggle",this.toggleAutoTagAppearance.bind(this)),v?this.search():(this.query.$ctx.on("keydown",A=>{if(A.which===13){A.preventDefault();const W=this.query.getValue();this.addTag(W),this.query.setValue(""),this.renderResults()}}),this.renderResults())}toggleAutoTagAppearance(v){Kn(v.currentTarget).toggleClass("cm-setting-tags__toggle--open"),this.$ctx.find(".cm-setting-tags__results--autotags").toggleClass("cm-setting-tags__results--open")}search(v){if(!this.searchApi)return;let A;const W={},be=v!=null?v:"";this.searchFilteredBy===lr.FILTER_BY_ASSETS?(A=this.searchApi,W.search_term=be,W.asset_ids=this.screens,W.set_ids=this.sets,W.include_applied_auto_tags=this.$ctx.dataAsBoolean("includeAppliedAutoTags"),this.data.post(A,W).then(Le=>{this.renderResults({query:v,tags:this.filterTags(Le.tags,v),autoTags:Le.autoTags,hasMoreResults:Le.hasMoreResults})})):this.searchFilteredBy===lr.FILTER_BY_PROJECT&&(A=this.$ctx.dataAsBoolean("includeAllAutoTags")?`${this.searchApi}?search_term=${be}&project_id=${this.projectId}&include_auto_tags`:`${this.searchApi}?search_term=${be}&project_id=${this.projectId}`,this.data.get(A).then(Le=>{this.renderResults({query:v,tags:this.filterTags(Le.tags,v),autoTags:Le.autoTags,hasMoreResults:Le.hasMoreResults})}))}filterTags(v,A){return this.filter&&Array.isArray(v)&&v.length>0&&(v=v.filter(W=>!this.tags.find(be=>be.tag===W.tag)),A===""?v=this.tags.concat(v):v=this.tags.filter(W=>{var be;return(be=W.tag)==null?void 0:be.includes(A)}).concat(v)),v}renderResults(v){v=v||{},(!Kn.isArray(v.tags)||v.tags.length===0)&&(v.tags=this.tags);const A={label_none:this.$ctx.data("labelNone"),query:v.query||"",tags:v.tags,hasMoreResults:v.hasMoreResults||!1};this.$resultsContainer.html((0,y.EY)(ga,A));const W={tags:v.autoTags||[],hasMoreResults:!1};this.$autoTagResultsContainer.html((0,y.EY)(ga,W))}transformTags(v){return v.map(A=>typeof A=="string"||typeof A=="number"?{tag:String(A),apply:"ALL"}:A)}setting(){this.elem(!0),this.$ctx.on("keydown",v=>{this.active&&v.which===9&&(v.preventDefault(),v.shiftKey?this.mod.prev(this.$ctx):this.mod.next(this.$ctx)),v.which===13&&(this.mod.fire("editAssetTag",{action:"assign"}),v.preventDefault(),v.stopPropagation(),this.$ctx.trigger("submit"))}),this.validation(()=>{const v=this.query.getValue();this.save({tag:v,screens:this.screens,sets:this.sets}).then(A=>{if(A.success)this.query.setValue(""),this.search(),typeof this.saved=="function"&&this.saved(A);else if(A.error){const W={};W[`${this.id}_query`]=A.error,this.showErrors(W)}})},()=>this.mod.leave(this.$ctx))}addTag(v){v=Kn.trim(v),v!==""&&(this.tags.find(W=>W.tag===v)||this.tags.push({tag:v,apply:"ALL"}))}focus(){return this.query.focus(),this}serialize(){const v=this.tags.filter(Le=>Le.apply!=="NONE"),A={};A[this.id]=v;let W=null;const be=this.$ctx.data("group");return be?W=this.createGroup({},be,A):W=A,W}}var ln=r(5181);class ss extends g.E{constructor(v,A,W){super(v,A,W),this.$text=this.$ctx.find(".js-cm-setting__input"),this.$textGrow=this.$ctx.find(".js-cm-setting__textarea--grow"),this.$prefix=this.$ctx.find(".js-cm-setting__group-prefix"),this.initialValue=this.$text.val(),this.readonly=this.$text.is("[readonly]")}elem(){if(this.$text.is("textarea")){const v=`${this.$text.val()}`;v.length>0&&this.textGrowUpdate(v),this.$text.on("input",A=>{const W=A.target;this.textGrowUpdate(W.value)})}this.$text.is("[data-mask]")&&(this.$text.addClass(`js-cm-setting__input-${this.id}`),this.$ctx.find(`.js-cm-setting__input-${this.id}`).mask(this.$text.dataAsString("mask"))),this.$text.on("change",v=>{!this.readonly&&typeof this.changed=="function"&&this.changed(ln(v.currentTarget).val())}),this.$text.on("focus",()=>{!this.readonly&&typeof this.changed=="function"&&this.focus()}),this.$ctx.data("nolive")||this.$text.on("input",ln.debounce(200,v=>{!this.readonly&&typeof this.changed=="function"&&this.changed(ln(v.currentTarget).val())})),this.$ctx.on("click",".js-cm-setting__clear-btn",()=>{this.clear(),this.$text.focus(),this.$text.trigger("change"),this.tpl.fireCustomEvent(this.$text,"settingTextCleared",{})}),this.$ctx.on("focusin",".js-cm-setting__bar",v=>{this.readonly||ln(v.currentTarget).addClass("state-active")}).on("focusout",".js-cm-setting__bar",v=>{this.readonly||ln(v.currentTarget).removeClass("state-active")})}setting(){this.elem(),this.hasChanged=!1,this.$text.on("keyup change",()=>{this.hasChanged=this.initialValue!==this.$text.val()}),this.$ctx.on("keydown",v=>{this.active&&v.which===9&&(v.preventDefault(),this.$ctx.trigger("submit"),v.shiftKey?this.mod.prev(this.$ctx):this.mod.next(this.$ctx))}),this.$ctx.on("reset",v=>{v.preventDefault(),this.$text.val(this.initialValue),this.textGrowUpdate(this.initialValue),this.hasChanged=!1,typeof this.cancel=="function"&&this.cancel(this.serialize())}),this.validation(()=>{this.hasChanged||this.multipleValues?this.save().then(v=>{typeof this.saved=="function"&&this.saved(v),v.success?(this.initialValue=this.$text.val(),this.mod.leave(this.$ctx),this.showSuccess()):v.errors&&this.showErrors(v.errors)}).catch(v=>{const A={};A[this.id]=window.translate(v.responseJSON.error),this.showErrors(A)}):(typeof this.notChanged=="function"&&this.notChanged(this.serialize()),this.mod.leave(this.$ctx))},()=>{this.mod.leave(this.$ctx)})}enter(){super.enter(),this.readonly?this.mod.leave(this.$ctx):(this.showActions(),this.$text.trigger("select"))}leave(){super.leave(),this.readonly||(this.$text.trigger("blur"),this.hideActions())}focus(){return this.readonly||(this.isSetting?this.enter():this.$text.trigger("select")),this}unfocus(v){var A,W;super.unfocus(),this.readonly||((A=this.validator)!=null&&A.form()?this.hasChanged?this.save().then(be=>{typeof this.saved=="function"&&this.saved(be),be.success?(this.initialValue=this.$text.val(),this.mod.leave(this.$ctx),this.showSuccess(),this.mod.enter(v)):be.errors&&this.showErrors(be.errors)}):(this.mod.leave(this.$ctx),this.mod.enter(v)):((W=this.validator)==null||W.focusInvalid(),this.$ctx.velocity("callout.pulse",{duration:300})))}setValue(v){return this.$text.attr("type")==="unit"&&(v=this.tpl.unit(v,!0)),this.$text.val(v),this}getValue(){let v=this.$text.val();return this.$text.attr("type")==="unit"&&(v=this.tpl.unit(v,!0)),v}updatePrefix(v){this.$prefix.html(v)}clear(){this.$text.val(""),this.textGrowUpdate("")}setReadonly(v){v?(this.readonly=!0,this.$text.prop("readonly","readonly")):(this.readonly=!1,this.$text.prop("readonly",!1))}setDisabled(v){v?this.$text.prop("disabled","disabled"):this.$text.prop("disabled",!1)}serialize(){const v={[this.id]:this.getValue()},A=this.$ctx.data("group");let W;return A?W=this.createGroup({},A,v):W=v,W}textGrowUpdate(v){const A=this.$textGrow.get(0);A&&(A.innerHTML=`${this.tpl.escape(v).replaceAll(`
`,"<br/>")}&nbsp;`)}}var Re=r(5181);class mn extends g.E{constructor(v,A,W){super(v,A,W),this.$timeValue=this.$ctx.find(".js-cm-setting__hidden-input"),this.$timeDisplay=this.$ctx.find(".js-cm-setting__input")}elem(){this.initialValue=this.$timeValue.val()||0,this.setTimeDisplay(this.initialValue),this.maxValueInSeconds=this.$timeValue.dataAsNumber("maxValueInSeconds")||0,this.readonly=this.$timeDisplay.is("[readonly]"),this.applyMask(),this.$timeValue.on("change",v=>{typeof this.changed=="function"&&this.changed(Re(v.currentTarget).val())}),this.$timeDisplay.on("change",v=>{const A=this.getValueInSeconds(Re(v.currentTarget).val());this.setValue(A)}),this.$timeDisplay.on("focus",()=>{!this.readonly&&typeof this.changed=="function"&&this.focus()}),this.$ctx.data("nolive")||this.$timeDisplay.on("keyup",Re.debounce(200,v=>{const A=this.getValueInSeconds(Re(v.currentTarget).val());this.setValue(A)})),this.$ctx.on("focusin",".js-cm-setting__bar",v=>{this.readonly||Re(v.currentTarget).addClass("state-active")}).on("focusout",".js-cm-setting__bar",v=>{this.readonly||Re(v.currentTarget).removeClass("state-active")}),this.$timeDisplay.on("keydown",v=>{if(v.key==="Enter"){const A=this.getValueInSeconds(Re(v.currentTarget).val());this.setValue(A),typeof this.send=="function"&&this.send()}})}setting(){this.elem(),this.hasChanged=!1,this.$timeDisplay.on("keyup change",()=>{this.hasChanged=this.initialValue!==this.$timeDisplay.val()}),this.$ctx.on("keydown",v=>{this.active&&v.which===9&&(v.preventDefault(),this.$ctx.trigger("submit"),v.shiftKey?this.mod.prev(this.$ctx):this.mod.next(this.$ctx))}),this.$ctx.on("reset",v=>{v.preventDefault(),this.$timeDisplay.val(this.initialValue),this.hasChanged=!1,typeof this.cancel=="function"&&this.cancel(this.serialize())}),this.validation(()=>{this.hasChanged||this.multipleValues?this.save().then(v=>{typeof this.saved=="function"&&this.saved(v),v.success?(this.initialValue=this.$timeDisplay.val(),this.mod.leave(this.$ctx),this.showSuccess()):v.errors&&this.showErrors(v.errors)}):(typeof this.notChanged=="function"&&this.notChanged(this.serialize()),this.mod.leave(this.$ctx))},()=>{this.mod.leave(this.$ctx)})}enter(){super.enter(),this.readonly?this.mod.leave(this.$ctx):(this.showActions(),this.$timeDisplay.trigger("select"))}leave(){super.leave(),this.readonly||(this.$timeDisplay.trigger("blur"),this.hideActions())}focus(){return this.readonly||(this.isSetting?this.enter():this.$timeDisplay.trigger("select")),this}unfocus(v){super.unfocus(),this.readonly||(this.validator.form()?this.hasChanged?this.save().then(A=>{typeof this.saved=="function"&&this.saved(A),A.success?(this.initialValue=this.$timeDisplay.val(),this.mod.leave(this.$ctx),this.showSuccess(),this.mod.enter(v)):A.errors&&this.showErrors(A.errors)}):(this.mod.leave(this.$ctx),this.mod.enter(v)):(this.validator.focusInvalid(),this.$ctx.velocity("callout.pulse",{duration:300})))}setValue(v){let A=v;return this.maxValueInSeconds>0&&v>this.maxValueInSeconds&&(A=this.maxValueInSeconds),this.$timeValue.val(A),this.setTimeDisplay(A),typeof this.changed=="function"&&this.changed(v),this}getValue(){return this.$timeValue.val()}clear(){this.$timeDisplay.val("")}setReadonly(v){v?(this.readonly=!0,this.$timeDisplay.prop("readonly","readonly")):(this.readonly=!1,this.$timeDisplay.prop("readonly",!1))}setDisabled(v){v?(this.disabled=!0,this.$timeDisplay.prop("disabled","disabled")):(this.disabled=!1,this.$timeDisplay.prop("disabled",!1))}serialize(){const v=this.$ctx,A={};A[this.id]=this.getValue();let W;const be=v.data("group");return be?W=this.createGroup({},be,A):W=A,W}applyMask(){const v=this.maxValueInSeconds>3600?"00:00:00":"00:00";this.$timeDisplay.addClass(`js-cm-setting__input-${this.id}`),this.$ctx.find(`.js-cm-setting__input-${this.id}`).mask(`${v}`)}setTimeDisplay(v){this.$timeDisplay.val(this.getValueFormatted(v))}getValueInSeconds(v){const A=v.split(":").map(Number);let W;return A.length===3?W=A[0]*60*60+A[1]*60+A[2]:A.length===2?W=A[0]*60+A[1]:W=A[0],W}getValueFormatted(v){const A=this.$ctx.dataAsNumber("postDecimalDigits")||0,W=this.getMultiplierByPostDecimalDigits(A),be=Math.floor(v/60/60),Le=Math.floor(v/60)-be*60,ot=Math.round(v%60*W)/W;let He;return be>0?He=`${be}:${this.padNumberToTwoDigitString(Le)}:${this.padNumberToTwoDigitString(ot)}`:He=`${this.padNumberToTwoDigitString(Le)}:${this.padNumberToTwoDigitString(ot)}`,this.$timeDisplay.attr("size",He.length),He}getMultiplierByPostDecimalDigits(v){switch(v){case 1:return 10;case 2:return 100;case 3:return 1e3;default:return 1}}padNumberToTwoDigitString(v){return(v<10?"0":"")+v}setInactiveLook(v){v?this.$timeDisplay.addClass("cm-setting-time__badge-input--inactive"):this.$timeDisplay.removeClass("cm-setting-time__badge-input--inactive")}}var cr=r(5181);class Dr extends g.E{constructor(v,A,W){super(v,A,W),this.readonly=this.$ctx.find(".js-cm-setting-toggle").is("[readonly]")}elem(){this.$ctx.on("click",".js-cm-setting-toggle",v=>{typeof this.changed=="function"&&this.changed(this.serialize(),v.currentTarget),this.$ctx.dataAsBoolean("lockStyle")&&this.updateLockIconAndLabel()})}setting(){this.readonly=this.$ctx.find(".js-cm-setting-toggle").is("[readonly]"),this.$ctx.on("keypress",".js-cm-setting-toggle",v=>{(v.key==="Enter"||v.key===" ")&&this.$ctx.find(".js-cm-setting-toggle").trigger("click")}),this.$ctx.on("click",".js-cm-setting-toggle",v=>{if(!this.readonly){if(!cr(v.target).is("input")){v.stopPropagation();return}typeof this.changed=="function"&&this.changed(this.serialize()),this.save().then(A=>{A.success&&typeof this.saved=="function"&&this.saved(A)})}})}enter(){this.mod.leave(this.$ctx)}leave(){super.leave()}serialize(){const v=this.$ctx.find(".js-cm-setting-toggle"),A=this.$ctx.data("mappingFalse"),W=this.$ctx.data("mappingTrue");let be={},Le=v.is(":checked");W!==void 0&&A!==void 0&&(Le=Le?W:A),this.$ctx.data("key")&&(be[this.$ctx.data("key")]=Le),be[this.id]=Le,be=cr.extend(!0,{},be,v.data());const ot=this.$ctx.data("group");return ot?this.createGroup({},ot,be):be}setValue(v){const A=this.$ctx.find(".js-cm-setting-toggle");A.attr("data-indeterminate","false"),v?A.prop("checked","checked"):A.prop("checked",!1)}isChecked(){return this.$ctx.find(".js-cm-setting-toggle").is(":checked")}updateLockIconAndLabel(){const v=this.$ctx.find(".js-cm-setting-toggle__lock-icon"),A=this.$ctx.find(".js-cm-setting-toggle__lock-label"),W=this.$ctx.dataAsObject("translations");if(this.isChecked()){const be=(0,y.EY)(nn.V,{icon:Oa.l.ICON_LOCK,size:Oa.l.SIZE_MEDIUM});v.html(be),A.attr("data-tooltip",W.tooltipLocked),A.text(W.labelLocked),A.removeClass("cm-setting-toggle__lock-label--color-default")}else{const be=(0,y.EY)(nn.V,{icon:Oa.l.ICON_OPEN_LOCK_FILLED,size:Oa.l.SIZE_MEDIUM,classes:"ca-icon--color-dark-blue"});v.html(be),A.attr("data-tooltip",W.tooltipUnlocked),A.text(W.labelUnlocked),A.addClass("cm-setting-toggle__lock-label--color-default")}}}var Gr=r(5181);class Ar extends g.E{static get TITLE_TYPE_LABEL(){return"label"}static get TITLE_TYPE_BANNER(){return"banner"}static get TITLE_TYPES(){return[Ar.TITLE_TYPE_LABEL,Ar.TITLE_TYPE_BANNER]}constructor(v,A,W){super(v,A,W),this.$links=this.$ctx.find(".js-cm-setting-tree__link")}elem(){this.mod.sandbox.subscribe("events",this.mod),this.tpl.bindDataAttributes(this,{titleType:{type:String,allowed:Ar.TITLE_TYPES,default:Ar.TITLE_TYPE_LABEL}}),this.$ctx.find(".js-cm-setting-tree__icon-show").on("click",A=>{A.preventDefault(),A.stopPropagation(),this._toggleTree(Gr(A.currentTarget))}),this.$ctx.find(".js-cm-setting-tree__branch--level-2").on("click",A=>{A.preventDefault(),A.stopPropagation(),Gr(A.currentTarget).parent().toggleClass("state-open")}),this.$ctx.find(".js-cm-setting-tree__icon-show").on("keypress",A=>{A.which===13&&(A.preventDefault(),A.stopPropagation(),this._toggleTree(Gr(A.currentTarget)))}),this.$links.on("click",A=>{A.preventDefault();const W=Gr(A.target);this.select(W)});const v=this.$ctx.data("value");if(v){const A=this.$ctx.find(`.js-cm-setting-tree__link[href="${v}"]`);this.select(A),A.parents(".js-cm-setting-tree__branch").addClass("state-open"),A.closest(".js-cm-setting-tree__tree").addClass("state-open")}}select(v){v.children(".js-cm-setting-tree__input").prop("checked",!0),this.$links.removeClass("state-selected"),v.addClass("state-selected")}setting(){this.elem()}enter(){super.enter()}leave(){super.leave()}_toggleTree(v){v.parent("a, span").parent("li").toggleClass("state-open")}serialize(){const v=this.$ctx.find(".js-cm-setting-tree__input:checked"),A=v.val();(0,Qi.R)("LINK_INTERNAL_LINK_NAME")&&(console.log(v.siblings(".cm-setting-tree__name")),console.log(v.parents()));const W={};return A&&(W[this.id]=A),W}}var Wi=r(5181);class ao extends g.E{constructor(v,A,W){super(v,A,W),this.$r=A.find(".js-cm-setting-color__r"),this.$g=A.find(".js-cm-setting-color__g"),this.$b=A.find(".js-cm-setting-color__b"),this.$a=A.find(".js-cm-setting-color__a"),this.$size=A.find(`#${this.id}_size`)}elem(v){this.initialized=!1,v||this.setup()}setting(){this.elem(!0);const v=this.$ctx;this.validation(()=>{this.saveTypostyle()},()=>{for(const A of this.settings.elems)typeof A.item.reset=="function"&&A.item.reset();this.mod.leave(v)}),v.on("keydown",A=>{this.active&&A.which===27&&this.mod.leave(v),this.active&&A.which===9&&Wi(A.target).is('button[type="reset"]')&&(A.preventDefault(),this.mod.next(v))})}setup(){if(!this.initialized){this.initialized=!0;const v=this.$ctx;this.optional_settings={margin:v.find(".js-setting-margin-enabled").length>0},this.settings=new qn(v.find(".js-cm-setting__details"),this.mod.sandbox),this.elemFont=this.settings.getElem(`${this.id}_search`),this.elemWeight=this.settings.getElem(`${this.id}_weight`),this.elemSize=this.settings.getElem(`${this.id}_size`),this.elemLineHeight=this.settings.getElem(`${this.id}_line_height`),this.elemColor=this.settings.getElem(`${this.id}_color`),this.elemUppercase=this.settings.getElem(`${this.id}_uppercase`),this.elemItalic=this.settings.getElem(`${this.id}_italic`),this.elemUnderline=this.settings.getElem(`${this.id}_underline`),this.elemLetterSpacing=this.settings.getElem(`${this.id}_letter_spacing`),this.optional_settings.margin&&(this.elemMarginTop=this.settings.getElem(`${this.id}_margin_top`),this.elemMarginBottom=this.settings.getElem(`${this.id}_margin_bottom`)),this.elemFont.saved=function(){this.updatePreview(!0)}.bind(this),this.elemWeight.changed=function(){this.updatePreview(!0)}.bind(this),this.elemSize.changed=function(){this.updatePreview()}.bind(this),this.elemLineHeight.changed=function(){this.updatePreview()}.bind(this),this.elemColor.changed=function(){this.updatePreview()}.bind(this),this.elemUppercase.changed=function(){this.updatePreview()}.bind(this),this.elemItalic.changed=function(){this.updatePreview(!0)}.bind(this),this.elemUnderline.changed=function(){this.updatePreview()}.bind(this),this.elemLetterSpacing.changed=function(){this.updatePreview()}.bind(this)}}setColor(v){this.initialized||this.setup(),this.elemColor.setColor(v)}updatePreview(v){const A=this.$ctx.find(".js-cm-setting-typostyle__preview"),W=this.serialize(!0)[this.id],be=W.uppercase===!0?"uppercase":"initial",Le=W.italic===!0?"italic":"initial",ot=W.underline===!0?"underline":"initial",He=W.letterspacing?W.letterspacing:"normal";if(W.family==="inherit"&&(W.family_css=Wi("body").data("mainFontCss")),v===!0&&W.provider==="google"){const ns=W.italic===!0?"i":"",vs=W.weight==="400"?`400${ns}`:`${W.weight+ns},400${ns}`,La={google:{families:[`${W.family}:${vs}`]}};try{window.WebFont.load(La)}catch(Tn){Wi.getScript("//ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js",()=>{window.WebFont.load(La)})}}A.css("font-family",W.family_css).css("font-weight",W.weight).css("font-size",W.size).css("letter-spacing",He).css("color",W.color).css("text-transform",be).css("font-style",Le).css("text-decoration",ot)}saveTypostyle(){const v=this.$ctx;this.save().then(A=>{A.success&&(typeof this.saved=="function"&&this.saved(A),this.showSuccess().then(()=>{this.mod.leave(v)}))})}serialize(v){const A=this.id,W=this.$ctx,be=Wi(".js-cm-setting-search__item",W).data("css"),Le=Wi(".js-cm-setting-search__item",W).data("family"),ot=Wi(".js-cm-setting-search__item",W).data("provider"),He={};He[this.id]={family_css:be,family:Le,provider:ot.toLowerCase(),weight:this.elemWeight.serialize()[`${A}_weight`],size:this.tpl.unit(this.elemSize.serialize()[`${A}_size`]),line_height:this.elemLineHeight.serialize()[`${A}_line_height`],color:this.elemColor.serialize()[`${A}_color`],uppercase:this.elemUppercase.serialize()[`${A}_uppercase`],italic:this.elemItalic.serialize()[`${A}_italic`],underline:this.elemUnderline.serialize()[`${A}_underline`],letterspacing:this.tpl.unit(this.elemLetterSpacing.serialize()[`${A}_letter_spacing`])},this.optional_settings.margin&&(He[this.id].margin_top=this.tpl.unit(this.elemMarginTop.serialize()[`${A}_margin_top`]),He[this.id].margin_bottom=this.tpl.unit(this.elemMarginBottom.serialize()[`${A}_margin_bottom`]));let ns=null;const vs=W.data("group");return vs&&!v?ns=this.createGroup({},vs,He):ns=He,ns}enter(){super.enter(),this.initialized||this.setup(),this.updatePreview(),this.showDetails().then(()=>{this.settings.getElem(`${this.id}_size`).focus()})}leave(){super.leave(),this.hideDetails().then(()=>{this.hideActions()})}unfocus(){super.unfocus(),this.$details.velocity("callout.pulse",{duration:300}),this.settings.getElem(`${this.id}_size`).focus()}}var no=r(5181);class ro extends g.E{static get TAB_KEY_CODE(){return 27}static get SHIFT_KEY_CODE(){return 9}constructor(v,A,W){super(v,A,W)}elem(v){this.initialized=!1,this.activeTabId="default",v||this.setup()}setting(){this.elem(!0);const v=this.$ctx;this.validation(()=>this.saveTypostyle(),()=>{for(const A of this.settings.elems)typeof A.item.reset=="function"&&A.item.reset();this.mod.leave(v)}),v.on("keydown",A=>{this.active&&A.which===ro.TAB_KEY_CODE&&this.mod.leave(v),this.active&&A.which===ro.SHIFT_KEY_CODE&&no(A.target).is('button[type="reset"]')&&(A.preventDefault(),this.mod.next(v))})}setup(){if(!this.initialized){this.initialized=!0,this.mod.sandbox.subscribe("tabs",this.mod);const v=this.$ctx;this.$size=v.find(`#${this.id}_size`),this.optional_settings={margin:v.find(".js-setting-margin-enabled").length>0},this.$r=v.find(".js-cm-setting-color__r"),this.$g=v.find(".js-cm-setting-color__g"),this.$b=v.find(".js-cm-setting-color__b"),this.$a=v.find(".js-cm-setting-color__a"),this.settings=new qn(v.find(".js-cm-setting__details"),this.mod.sandbox),this.elemFont=this.settings.getElem(`${this.id}_search`),this.elemWeight=this.settings.getElem(`${this.id}_weight`),this.elemSize=this.settings.getElem(`${this.id}_size`),this.elemLineHeight=this.settings.getElem(`${this.id}_line_height`),this.elemColor=this.settings.getElem(`${this.id}_color`),this.elemUppercase=this.settings.getElem(`${this.id}_uppercase`),this.elemItalic=this.settings.getElem(`${this.id}_italic`),this.elemUnderline=this.settings.getElem(`${this.id}_underline`),this.elemLetterSpacing=this.settings.getElem(`${this.id}_letter_spacing`),this.optional_settings.margin&&(this.elemMarginTop=this.settings.getElem(`${this.id}_margin_top`),this.elemMarginBottom=this.settings.getElem(`${this.id}_margin_bottom`)),this.elemFont.saved=()=>this.updatePreview(!0),this.elemWeight.changed=()=>this.updatePreview(!0),this.elemSize.changed=()=>this.updatePreview(),this.elemLineHeight.changed=()=>this.updatePreview(),this.elemColor.changed=()=>this.updatePreview(),this.elemUppercase.changed=()=>this.updatePreview(),this.elemItalic.changed=()=>this.updatePreview(!0),this.elemUnderline.changed=()=>this.updatePreview(),this.elemLetterSpacing.changed=()=>this.updatePreview(),this.elemFontHover=this.settings.getElem(`${this.id}_search_hover`),this.elemWeightHover=this.settings.getElem(`${this.id}_weight_hover`),this.elemSizeHover=this.settings.getElem(`${this.id}_size_hover`),this.elemLineHeightHover=this.settings.getElem(`${this.id}_line_height_hover`),this.elemColorHover=this.settings.getElem(`${this.id}_color_hover`),this.elemBackgroundColorHover=this.settings.getElem(`${this.id}_background_color_hover`),this.elemUppercaseHover=this.settings.getElem(`${this.id}_uppercase_hover`),this.elemItalicHover=this.settings.getElem(`${this.id}_italic_hover`),this.elemUnderlineHover=this.settings.getElem(`${this.id}_underline_hover`),this.elemLetterSpacingHover=this.settings.getElem(`${this.id}_letter_spacing_hover`),this.optional_settings.margin&&(this.elemMarginTopHover=this.settings.getElem(`${this.id}_margin_top_hover`),this.elemMarginBottomHover=this.settings.getElem(`${this.id}_margin_bottom_hover`)),this.elemFontHover.saved=()=>this.updatePreview(!0),this.elemWeightHover.changed=()=>this.updatePreview(!0),this.elemSizeHover.changed=()=>this.updatePreview(),this.elemLineHeightHover.changed=()=>this.updatePreview(),this.elemColorHover.changed=()=>this.updatePreview(),this.elemBackgroundColorHover.changed=()=>this.updatePreview(),this.elemUppercaseHover.changed=()=>this.updatePreview(),this.elemItalicHover.changed=()=>this.updatePreview(!0),this.elemUnderlineHover.changed=()=>this.updatePreview(),this.elemLetterSpacingHover.changed=()=>this.updatePreview(),this.elemFontActive=this.settings.getElem(`${this.id}_search_active`),this.elemWeightActive=this.settings.getElem(`${this.id}_weight_active`),this.elemSizeActive=this.settings.getElem(`${this.id}_size_active`),this.elemLineHeightActive=this.settings.getElem(`${this.id}_line_height_active`),this.elemColorActive=this.settings.getElem(`${this.id}_color_active`),this.elemBackgroundColorActive=this.settings.getElem(`${this.id}_background_color_active`),this.elemUppercaseActive=this.settings.getElem(`${this.id}_uppercase_active`),this.elemItalicActive=this.settings.getElem(`${this.id}_italic_active`),this.elemUnderlineActive=this.settings.getElem(`${this.id}_underline_active`),this.elemLetterSpacingActive=this.settings.getElem(`${this.id}_letter_spacing_active`),this.optional_settings.margin&&(this.elemMarginTopActive=this.settings.getElem(`${this.id}_margin_top_active`),this.elemMarginBottomActive=this.settings.getElem(`${this.id}_margin_bottom_active`)),this.elemFontActive.saved=()=>this.updatePreview(!0),this.elemWeightActive.changed=()=>this.updatePreview(!0),this.elemSizeActive.changed=()=>this.updatePreview(),this.elemLineHeightActive.changed=()=>this.updatePreview(),this.elemColorActive.changed=()=>this.updatePreview(),this.elemBackgroundColorActive.changed=()=>this.updatePreview(),this.elemUppercaseActive.changed=()=>this.updatePreview(),this.elemItalicActive.changed=()=>this.updatePreview(!0),this.elemUnderlineActive.changed=()=>this.updatePreview(),this.elemLetterSpacingActive.changed=()=>this.updatePreview()}}setColor(v){this.initialized||this.setup(),this.elemColor.setColor(v)}updatePreview(v){const A=this.$ctx.find(".js-cm-setting-typostyle__preview-wrap"),W=this.activeTabId==="default"?"":`_${this.activeTabId}`,be=this.serialize(!0)[this.id],Le=be[`uppercase${W}`]===!0?"uppercase":"initial",ot=be[`italic${W}`]===!0?"italic":"initial",He=be[`underline${W}`]===!0?"underline":"initial",ns=be[`letterspacing${W}`]?be[`letterspacing${W}`]:"normal";if(be.family==="inherit"&&(be.family_css=no("body").data("mainFontCss")),v===!0&&be[`provider${W}`]==="google"){const vs=be[`italic${W}`]===!0?"i":"",La=be[`weight${W}`]==="400"?`400${vs}`:`${be.weight}${W}${vs},400${vs}`,Tn={google:{families:[`${be.family}:${La}`]}};try{window.WebFont.load(Tn)}catch(ri){no.getScript("//ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js",()=>{window.WebFont.load(Tn)})}}A.css("font-family",be[`family_css${W}`]).css("font-weight",be[`weight${W}`]).css("font-size",be[`size${W}`]).css("letter-spacing",ns).css("color",be[`color${W}`]).css("text-transform",Le).css("font-style",ot).css("text-decoration",He).css("background",be[`background_color${W}`]||"none")}saveTypostyle(){const v=this.$ctx;this.save().then(A=>{A.success&&(typeof this.saved=="function"&&this.saved(A),this.showSuccess().then(()=>{this.mod.leave(v)}))})}serialize(v){const A=this.id,W=this.$ctx,be=no(".js-cm-setting-search__item",W).data("css"),Le=no(".js-cm-setting-search__item",W).data("family"),ot=no(".js-cm-setting-search__item",W).data("provider"),He={};He[this.id]={family_css:be,family:Le,provider:ot.toLowerCase(),weight:this.elemWeight.serialize()[`${A}_weight`],weight_hover:this.elemWeightHover.serialize()[`${A}_weight_hover`],weight_active:this.elemWeightActive.serialize()[`${A}_weight_active`],size:this.tpl.unit(this.elemSize.serialize()[`${A}_size`]),size_hover:this.tpl.unit(this.elemSizeHover.serialize()[`${A}_size_hover`]),size_active:this.tpl.unit(this.elemSizeActive.serialize()[`${A}_size_active`]),line_height:this.elemLineHeight.serialize()[`${A}_line_height`],line_height_hover:this.elemLineHeightHover.serialize()[`${A}_line_height_hover`],line_height_active:this.elemLineHeightActive.serialize()[`${A}_line_height_active`],color:this.elemColor.serialize()[`${A}_color`],color_hover:this.elemColorHover.serialize()[`${A}_color_hover`],color_active:this.elemColorActive.serialize()[`${A}_color_active`],background_color_hover:this.elemBackgroundColorHover.serialize()[`${A}_background_color_hover`],background_color_active:this.elemBackgroundColorActive.serialize()[`${A}_background_color_active`],uppercase:this.elemUppercase.serialize()[`${A}_uppercase`],uppercase_hover:this.elemUppercaseHover.serialize()[`${A}_uppercase_hover`],uppercase_active:this.elemUppercaseActive.serialize()[`${A}_uppercase_active`],italic:this.elemItalic.serialize()[`${A}_italic`],italic_hover:this.elemItalicHover.serialize()[`${A}_italic_hover`],italic_active:this.elemItalicActive.serialize()[`${A}_italic_active`],underline:this.elemUnderline.serialize()[`${A}_underline`],underline_hover:this.elemUnderlineHover.serialize()[`${A}_underline_hover`],underline_active:this.elemUnderlineActive.serialize()[`${A}_underline_active`],letterspacing:this.tpl.unit(this.elemLetterSpacing.serialize()[`${A}_letter_spacing`]),letterspacing_hover:this.tpl.unit(this.elemLetterSpacingHover.serialize()[`${A}_letter_spacing_hover`]),letterspacing_active:this.tpl.unit(this.elemLetterSpacingActive.serialize()[`${A}_letter_spacing_active`])},this.optional_settings.margin&&(He[this.id].margin_top=this.tpl.unit(this.elemMarginTop.serialize()[`${A}_margin_top`]),He[this.id].margin_bottom=this.tpl.unit(this.elemMarginBottom.serialize()[`${A}_margin_bottom`]));let ns=null;const vs=W.data("group");return vs&&!v?ns=this.createGroup({},vs,He):ns=He,ns}enter(){super.enter(),this.initialized||this.setup(),this.updatePreview(),this.showDetails().then(()=>{this.settings.getElem(`${this.id}_size`).focus()})}leave(){super.leave(),this.hideDetails().then(()=>this.hideActions())}unfocus(){super.unfocus(),this.$details.velocity("callout.pulse",{duration:300}),this.settings.getElem(`${this.id}_size`).focus()}onTabSwitched(v){this.activeTabId=v.id,this.updatePreview()}}var Qo=r(43915);const Eo=(0,p.I)(k=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"cm-setting-userlist__button cm-setting-userlist__button--cancel",children:(0,o.jsx)(fs.t,{label_cancel:k.labelCancel})}),(0,o.jsx)("div",{className:"cm-setting-userlist__button cm-setting-userlist__button--submit",children:(0,o.jsx)(js.b,{label_submit:k.labelSubmit,disabled:!k.submitEnabled})})]}));var Io=r(93277),nl=r(87053);const Ro=(0,p.I)(k=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"cm-setting-userlist__blankslate",children:[k.showBlankSlateImage?(0,o.jsxs)("div",{className:"cm-setting-userlist__blank-image-container",children:[(0,o.jsx)("img",{className:"cm-setting-userlist__blank-image",src:"/img/blankslate/chooser/blankslate-3.svg",alt:k.labelAdd}),(0,o.jsx)("div",{className:"cm-setting-userlist__validation-error js-cm-setting-userlist__validation-error"})]}):(0,o.jsxs)("div",{className:"cm-setting-userlist__blank-text-container",children:[k.blankSlateMessage,(0,o.jsx)("div",{className:"cm-setting-userlist__validation-error js-cm-setting-userlist__validation-error"})]}),(0,o.jsx)("div",{className:"cm-setting-userlist__add-container js-cm-setting-userlist__add-container",children:(0,o.jsx)(nl.S,{label:k.labelAdd,size:Io.Q.SIZE_MEDIUM,style:Io.Q.STYLE_PRIMARY,icon:"add",background:Io.Q.BACKGROUND_WHITE})})]}),k.required?(0,o.jsx)("input",{type:"hidden",name:"validateUserlist",className:"cm-setting-userlist__selected-users-count js-cm-setting-userlist__selected-users-count validate-userlist-required","data-msg":k.msg,value:"blank"}):null]}));var Po=r(77345),Xo=r(23245),Mr=r(57266);const qo=(0,p.I)(k=>{var v;let A="";return k.modifierType==="MODIFIER_TYPE_CROSS_ACCOUNT"&&(A="cm-setting-userlist__user--cross-account-group"),(v=k.users)==null?void 0:v.map(W=>(0,o.jsxs)("div",{className:`cm-setting-userlist__user ${A} js-cm-setting-userlist__user`,"data-jets":`${(W.name||"").toLowerCase()} ${(W.email||"").toLowerCase()}`,"data-identifier":`${k.type}-${W.id}`,children:[(0,o.jsx)("div",{className:"cm-setting-userlist__avatar",children:(0,o.jsx)(Xo.p,{imageUrl:W.preview_url_without_placeholder||W.image,gravatarHash:W.gravatar_hash,name:W.name,size:Po.Z.SIZE_24})}),(0,o.jsxs)("div",{className:"cm-setting-userlist__name-and-email",children:[W.name?(0,o.jsxs)("div",{className:"cm-setting-userlist__name",children:[W.name||"",(k.type==="group"||k.type==="cross-account-group")&&W.user_ids?(0,o.jsx)("span",{className:"ca-badge ca-badge--grey cm-setting-userlist__group-count",children:W.user_ids.length}):null]}):null,(0,o.jsx)("div",{className:`cm-setting-userlist__email ${W.name?"":"cm-setting-userlist__email--email-only"}`,children:W.email||""})]}),k.readOnly?null:(0,o.jsx)(Mr.m,{identifier:W.id,type:k.type,stickIconRight:!0,classes:"cm-setting-userlist__trash js-cm-setting-userlist__trash"})]},`${k.type}-${W.id}`))}),po=(0,p.I)(k=>{var v;return(v=k.groupedItems)==null?void 0:v.map(A=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"cm-setting-userlist__item-group-title",children:A.account_name?(0,o.jsxs)(o.Fragment,{children:[A.account_name,window.translate("Legacy_settings_userlist_groups")]}):window.translate("Legacy_settings_userlist_unnamed_organization_groups")}),(0,o.jsx)(qo,{users:A.groups,type:k.type,readOnly:k.readOnly,modifierType:"MODIFIER_TYPE_CROSS_ACCOUNT"})]}))}),el=(0,p.I)(k=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"cm-setting-userlist__search",children:[(0,o.jsx)("i",{className:"cm-setting-userlist__search-icon ca-icon--search ca-icon--sm"}),(0,o.jsx)("input",{id:"cm-setting-userlist__search",className:"cm-setting-userlist__search-query js-cm-setting-userlist__search-query",type:"text",placeholder:window.translate("Legacy_placeholder_search")})]}),(0,o.jsxs)("div",{id:"cm-setting-userlist__list",className:`cm-setting-userlist__list ${k.unlimitedListHeight?"cm-setting-userlist__list--unlimited-height":""}`,children:[k.groups?(0,o.jsx)(qo,{users:k.groups,type:"group",readOnly:k.readOnly}):null,k.utils.account.hasFeature("CROSS_ACCOUNT_GROUPS")&&k.groupedGroups?(0,o.jsx)(po,{groupedItems:k.groupedGroups,type:"cross-account-group",readOnly:k.readOnly}):null,k.users?(0,o.jsx)(qo,{users:k.users,type:"user",readOnly:k.readOnly}):null]}),(0,o.jsx)("div",{className:"cm-setting-userlist__search-not-found js-cm-setting-userlist__search-not-found"}),k.readOnly?null:(0,o.jsx)("div",{className:"cm-setting-userlist__add-container js-cm-setting-userlist__add-container",children:(0,o.jsx)(nl.S,{label:k.labelAdd,size:Io.Q.SIZE_MEDIUM,style:Io.Q.STYLE_PRIMARY,icon:"add",background:Io.Q.BACKGROUND_WHITE})})]}));var $o=r(13833),Rr=r(87080),No=r(29928),Vo=r(82296),Lo=Object.defineProperty,ko=Object.getOwnPropertySymbols,Wo=Object.prototype.hasOwnProperty,Kr=Object.prototype.propertyIsEnumerable,tl=(k,v,A)=>v in k?Lo(k,v,{enumerable:!0,configurable:!0,writable:!0,value:A}):k[v]=A,Wn=(k,v)=>{for(var A in v||(v={}))Wo.call(v,A)&&tl(k,A,v[A]);if(ko)for(var A of ko(v))Kr.call(v,A)&&tl(k,A,v[A]);return k};const cl=(0,p.I)(k=>{const v={id:`${k.id}-users`,users:k.users||[],searchEnabled:!0,modifier:"modal",selectAllEnabled:!0,notFoundLabel:k.notFoundLabel},A={id:`${k.id}-groups`,users:k.groups||[],searchEnabled:!0,modifier:"modal",selectAllEnabled:!0,notFoundLabel:k.notFoundLabel},W={id:`${k.id}-cross-account-groups`,users:[],groupedGroups:k.groupedGroups,searchEnabled:!0,modifier:"modal",selectAllEnabled:!0,notFoundLabel:k.notFoundLabel},be=[{id:"users",active:!0,title:`${window.translate("Legacy_settings_users_label_users_tab")} <span class="ca-badge ca-badge--black-10 js-cm-setting-userlist__count-users"></span>`,content:(0,y.EY)(Rr.b,v)},{id:"groups",title:`${window.translate("Legacy_settings_users_label_groups_tab")} <span class="ca-badge ca-badge--black-10 js-cm-setting-userlist__count-groups"></span>`,content:(0,y.EY)(Rr.b,A)}];return k.utils.account.hasFeature("CROSS_ACCOUNT_GROUPS")&&be.push({id:"cross-account-groups",title:`${window.translate("Legacy_settings_users_label_cross_account_groups_tab")} <span class="ca-badge ca-badge--black-10 js-cm-setting-userlist__count-cross-account-groups"></span>`,content:(0,y.EY)(Vo.m,W)}),(0,o.jsxs)("form",{children:[k.modalTitle?(0,o.jsx)("div",{className:"cm-setting-userlist__add-users-title",children:(0,o.jsx)("h2",{className:"ca-h2",children:k.modalTitle})}):null,(0,o.jsxs)("div",{className:"cm-setting-userlist__add-users-container",children:[(0,o.jsx)($o.X,{}),k.showUsersTab&&k.showGroupsTab?(0,o.jsx)(No.y,{items:be,border:{bottom:!0},shadow:!0,transparent:!1}):k.showUsersTab?(0,o.jsx)(Rr.b,Wn({},v)):k.showGroupsTab?(0,o.jsx)(Rr.b,Wn({},A)):null,(0,o.jsx)("div",{className:"cm-setting__actions cm-btn-bar cm-btn-bar--right cm-setting__actions--form state-visible cm-setting-userlist__actions js-cm-setting__actions"})]})]})});var yi=r(5181);class zo extends g.E{static get MODIFIER_TYPE_CROSS_ACCOUNT(){return"MODIFIER_TYPE_CROSS_ACCOUNT"}constructor(v,A,W){super(v,A,W),this.account=this.mod.sandbox.getConfigParam("account")}elem(v){this.isSetting=v||!1,this.modal=null,this.usersElem=null,this.groupsElem=null;const A=this.$ctx.data();this.translations=A.translations,this.apiAllUsers=A.apiAllUsers,this.apiAllGroups=A.apiAllGroups,this.excludeCurrentUser=A.excludeCurrentUser,this.showBlankSlateImage=A.showBlankSlateImage,this.showUsersTab=A.apiAllUsers!=="",this.showGroupsTab=A.apiAllGroups!=="",this.showCrossAccountGroupsTab=this.account.hasFeature("CROSS_ACCOUNT_GROUPS"),this.selection=A.initialSelectionIds,this.readOnly=A.readOnly,this.userData=this.getFormattedUserData(A.initialSelectionData.users),this.groupData=this.getFormattedGroupData(A.initialSelectionData.groups),this.organizations=A.organizations||null,this.userListModalId=`${this.id}-modal`,this.currentAccountId=this.mod.sandbox.getConfigParam("context").account.id,this.resetSelectionDelta(),this.render(),this.bindAddUsersEvent(),this.bindTrashButtonEvent(),this.validatorErrorPlacement=W=>{W.addClass("cm-setting__error--relative"),this.$ctx.find(".js-cm-setting-userlist__validation-error").append(W).show()}}addUserListModal(){this.$userListAddModal||(this.$userListAddModal=yi((0,y.EY)(Qo.b,{id:this.userListModalId})),yi("body").append(this.$userListAddModal),this.mod.sandbox.addModules(this.$userListAddModal))}removeUserListModal(){var v,A;(v=this.$userListAddModal)!=null&&v.length&&this.mod.sandbox.removeModules(this.$userListAddModal),(A=this.$userListAddModal)==null||A.remove(),this.$userListAddModal=null}setting(){this.elem(!0)}getFormattedUserData(v){return v=this.renameArrayElementsProperty(v,"user_id","id"),this.castArrayElementsIdPropertyToInteger(v)}getFormattedGroupData(v){return v=this.renameArrayElementsProperty(v,"group_id","id"),this.castArrayElementsIdPropertyToInteger(v)}renameArrayElementsProperty(v,A,W){return v.map(be=>(Object.hasOwnProperty.call(be,W)===!1&&Object.hasOwnProperty.call(be,A)===!0&&(be[W]=be[A],delete be[A]),be)),v}castArrayElementsIdPropertyToInteger(v){return v.map(A=>(Object.prototype.hasOwnProperty.call(A,"id")&&(A.id=parseInt(A.id)),A))}openAddUserModal(){this.addUserListModal(),Promise.all([this.getAllUsersPromise(),this.getAllGroupsPromise()]).then(()=>{const v=this.getUnselectedUserData();let A=this.getUnselectedGroupData(this.groupData);const W=A.length;let be=[];if(this.account.hasFeature("CROSS_ACCOUNT_GROUPS")&&(be=this.groupCrossAccountGroupsByAccount(A,this.currentAccountId),A=this.getCurrentAccountGroups(A,this.currentAccountId)),this.modal=yi((0,y.EY)(cl,{id:this.id,users:v,groups:A,groupedGroups:be,excludeCurrentUser:this.excludeCurrentUser,showUsersTab:this.showUsersTab,showGroupsTab:this.showGroupsTab,modalTitle:this.translations.modalTitle,notFoundLabel:this.translations.notFoundLabel})),this.mod.fire("openModal",{id:this.userListModalId,modifier:"functional",closeable:!1,$content:this.modal},["events"]),this.showUsersTab&&this.updateSelectableUserAmount(),this.showGroupsTab){const Le=A.length,ot=W-A.length;this.updateSelectableGroupAmount(Le,ot)}this.bindSettings(),this.bindValidation(),this.setupActionButtonRerendering(),this.renderActionButtons({users:[],groups:[]})})}getCurrentAccountGroups(v,A){return v.filter(W=>W.account_id===A)}groupCrossAccountGroupsByAccount(v,A){return v.reduce((W,be)=>{if(be.account_id===A)return W;const Le=W.find(ot=>ot.account_id===be.account_id);return Le?Le.groups.push(be):W.push({account_id:be.account_id,account_name:this.findOrganizationName(be.account_id),groups:[be]}),W},[])}findOrganizationName(v){return this.organizations?this.organizations.find(A=>A.account_id===v).name:null}getAllUsersPromise(){return this.showUsersTab?this.data.get(this.apiAllUsers).then(v=>{v.collaborators?this.userData=this.getFormattedUserData(v.collaborators):v.data&&(this.userData=this.getFormattedUserData(v.data))}):!1}getAllGroupsPromise(){return this.showGroupsTab?this.data.get(this.apiAllGroups).then(v=>{if(v.data||(v.data=v.groups||[]),typeof v.data=="object"){const A=[];for(const W in v.data)Object.prototype.hasOwnProperty.call(v.data,W)&&A.push(v.data[W]);v.data=A}this.groupData=this.getFormattedGroupData(v.data)}):!1}bindSettings(){this.settings=new qn(this.modal,this.mod.sandbox),this.showUsersTab&&(this.usersElem=this.settings.getElem(`${this.id}-users`)),this.showGroupsTab&&(this.groupsElem=this.settings.getElem(`${this.id}-groups`)),this.showCrossAccountGroupsTab&&(this.crossAccountGroupsElem=this.settings.getElem(`${this.id}-cross-account-groups`))}bindValidation(){this.settings.validation(()=>{const v=this.usersElem?this.usersElem.getValue():[],A=[...this.groupsElem?this.groupsElem.getValue():[],...this.crossAccountGroupsElem?this.crossAccountGroupsElem.getValue():[]];this.addToSelection(v,A),typeof this.changed=="function"&&this.changed(this.serialize()),this.render(),this.scrollToFirstAddedItem({users:v,groups:A}),this.saveIfSetting().then(()=>{this.mod.fire("closeModal",{id:this.userListModalId},["events"]),this.removeUserListModal()}).catch(()=>{Tc.Setting.Base.prototype.showError.apply(this.settings)})},()=>{this.mod.fire("closeModal",{id:this.userListModalId},["events"]),this.removeUserListModal()})}bindAddUsersEvent(){this.readOnly||this.$ctx.on("clicked",".js-cm-setting-userlist__add-container",v=>{v.preventDefault(),v.stopPropagation(),this.openAddUserModal()})}bindTrashButtonEvent(){this.readOnly||this.$ctx.on("click.trash",".js-cm-setting-userlist__trash",v=>{v.preventDefault();const A=yi(v.currentTarget).data("type"),W=yi(v.currentTarget).data("identifier");let be=[],Le=[];A==="user"?be=[W]:(A==="group"||A==="cross-account-group")&&(Le=[W]),this.removeFromSelection(be,Le),typeof this.changed=="function"&&this.changed(this.serialize()),this.saveIfSetting(),this.render()})}saveIfSetting(){return this.isSetting!==!0?new Promise(v=>{v({success:!0})}):this.save().then(v=>{v.success&&(typeof this.saved=="function"&&this.saved(v),this.resetSelectionDelta())})}setupActionButtonRerendering(){this.usersElem&&(this.usersElem.changed=()=>{this.renderActionButtons()}),this.groupsElem&&(this.groupsElem.changed=()=>{this.renderActionButtons()}),this.crossAccountGroupsElem&&(this.crossAccountGroupsElem.changed=()=>this.renderActionButtons())}resetSelectionDelta(){this.selectionDelta={add:{users:[],groups:[]},remove:{users:[],groups:[]}}}addToSelection(v,A){v.length>0&&(this.selection.users=this.selection.users.concat(v),this.selectionDelta.add.users=this.selectionDelta.add.users.concat(v)),A.length>0&&(this.selection.groups=this.selection.groups.concat(A),this.selectionDelta.add.groups=this.selectionDelta.add.groups.concat(A))}removeFromSelection(v,A){v.length>0&&(this.selection.users=this.selection.users.filter(W=>!v.includes(W)),this.selectionDelta.remove.users=this.selectionDelta.remove.users.concat(v)),A.length>0&&(this.selection.groups=this.selection.groups.filter(W=>!A.includes(W)),this.selectionDelta.remove.groups=this.selectionDelta.remove.groups.concat(A))}sortArrayByName(v){v.length>0&&v.sort((A,W)=>{var be;const Le=W.name?(be=A.name)==null?void 0:be.localeCompare(W.name):-1;return A.name||W.name?A.name?Le:1:0})}getSelectedUserData(){const v=this.userData.filter(({id:A})=>this.selection.users.includes(A));return this.sortArrayByName(v),v}getUnselectedUserData(){const v=this.excludeCurrentUser?this.userData.filter(({id:A})=>!this.selection.users.includes(A)&&A!==(0,Fs.F6)()):this.userData.filter(({id:A})=>!this.selection.users.includes(A));return this.sortArrayByName(v),v}getSelectedGroupData(){const v=this.groupData.filter(({id:A})=>this.selection.groups.includes(A));return this.sortArrayByName(v),v}getUnselectedGroupData(v){const A=v.filter(({id:W})=>!this.selection.groups.includes(W));return this.sortArrayByName(A),A}countCheckedUsers(){let v=[],A=[],W=[],be=[],Le=[];return this.usersElem&&(v=this.usersElem.serialize()[`${this.id}-users`]),this.groupsElem&&(A=this.groupsElem.serialize()[`${this.id}-groups`],W=this.crossAccountGroupsElem?this.crossAccountGroupsElem.serialize()[`${this.id}-cross-account-groups`]:[],be=this.groupData.filter(({id:He})=>A.includes(He)||W.includes(He)),Le=be.map(He=>He.users).reduce((He,ns)=>He.concat(ns),[])),[...v,...Le].length}updateSelectableUserAmount(){yi(this.modal).find(".js-cm-setting-userlist__count-users").text(this.getUnselectedUserData().length)}updateSelectableGroupAmount(v,A){yi(this.modal).find(".js-cm-setting-userlist__count-groups").text(v),yi(this.modal).find(".js-cm-setting-userlist__count-cross-account-groups").text(A)}render(){this.selection.users.length===0&&this.selection.groups.length===0?this.renderBlankSlate():this.renderList()}renderBlankSlate(){const v=(0,y.EY)(Ro,{labelAdd:this.translations.openModalButton,blankSlateMessage:this.translations.blankSlateMessage,showBlankSlateImage:this.showBlankSlateImage,required:this.$ctx.dataAsBoolean("required"),msg:this.translations.requiredError});this.tpl.addAndActivate(this.$ctx,v)}renderList(){let v=this.getSelectedGroupData(),A=[];this.account.hasFeature("CROSS_ACCOUNT_GROUPS")&&(A=this.groupCrossAccountGroupsByAccount(v,this.currentAccountId),v=this.getCurrentAccountGroups(v,this.currentAccountId));const W=(0,y.EY)(el,{users:this.getSelectedUserData(),groups:v,groupedGroups:A,labelAdd:this.translations.openModalButton,showGroupCount:this.showGroupCount,readOnly:this.readOnly,unlimitedListHeight:this.$ctx.dataAsBoolean("unlimitedListHeight")});this.tpl.addAndActivate(this.$ctx,W),this.enableJets()}renderActionButtons(){let v;const A=this.countCheckedUsers();A>1?v=this.translations.addUserButtonPlural.replace("$1$",A):A===1?v=this.translations.addUserButtonSingular.replace("$1$",A):v=this.translations.addUserButtonInitial;const W=this.settings.$ctx.find(".js-cm-setting__actions"),be=(0,y.EY)(Eo,{labelCancel:this.translations.cancelButton,labelSubmit:v,submitEnabled:A>0});W.html(be)}scrollToFirstAddedItem(v){let A;if(v.groups.length>0){const W=v.groups[0];A=this.$ctx.find(`.js-cm-setting-userlist__user[data-identifier="group-${W}"]`)}else{const W=v.users[0];A=this.$ctx.find(`.js-cm-setting-userlist__user[data-identifier="user-${W}"]`)}A.length>0&&A[0].scrollIntoView()}enableJets(){this.destroyJets();const v=this.$ctx.find(".js-cm-setting-userlist__search-not-found"),A=this.translations.notFoundLabel;this.jets=new(Ge())({searchTag:"#cm-setting-userlist__search",contentTag:"#cm-setting-userlist__list",didSearch:W=>this.$ctx.find(".js-cm-setting-userlist__user:visible").length>0?v.removeClass("state-visible"):v.text(A.replace("$1$",W)).addClass("state-visible")})}destroyJets(){this.jets&&this.jets.destroy()}getValue(){return{selection:this.selection,selectionDelta:this.selectionDelta}}serialize(){const v={};v[this.id]=this.getValue();let A=null;const W=this.$ctx.data("group");return W?A=this.createGroup({},W,v):A=v,A}leave(){super.leave()}enter(){super.enter(),this.mod.leave(this.$ctx)}onModalClosed({id:v}){v===this.userListModalId&&(this.modal=null,this.showUsersTab&&this.destroyJets(),this.showGroupsTab&&this.destroyJets())}}const _o=Pe;_o.prototype.clearStyleSheet=function(k){const v=document.styleSheets;for(let A=v.length;A>0;A--){const W=v[A];if(W&&W.title===k){this.styleTag=W.ownerNode;break}}},_o.prototype._addStyleTag=function(){const k="jets_style";this.clearStyleSheet(k),this.styleTag||(this.styleTag=document.createElement("style"),this.styleTag.setAttribute("title",k),document.head.appendChild(this.styleTag))};var ni=r(5181);class qi extends g.E{constructor(v,A,W){super(v,A,W)}elem(){this.id=this.$ctx.data("id"),this.bindEvents(this.$ctx),this.disableSelectAllIfEmpty(this.$ctx),this.validatorErrorPlacement=v=>{this.$ctx.find(".js-cm-setting-users__validation-error").append(v).show()},this.$ctx.data("searchEnabled")&&(this.enableJets(),this.fixUsersHeight()),this.formatUsernames()}setting(){this.elem()}formatUsernames(){this.$ctx.find(".js-cm-setting-users__item-checkbox-input").not(":checked").closest(".js-cm-setting-users__user").find(".js-cm-setting-users__name").removeClass("selected"),this.$ctx.find(".js-cm-setting-users__item-checkbox-input:checked").closest(".js-cm-setting-users__user").find(".js-cm-setting-users__name").addClass("selected")}bindEvents(){const v=A=>{const W=ni(A.currentTarget).find(".js-cm-setting-users__item-checkbox-input");W.prop("checked",!W.prop("checked")),W.trigger("change"),typeof this.changed=="function"&&this.changed()};this.$ctx.on("change",".js-cm-setting-users__item-checkbox-input",A=>{typeof this.changed=="function"&&this.changed(),this.formatUsernames(),this.saveSetting(A)}),this.$ctx.on("click",".js-cm-setting-users__checkbox",A=>{A.preventDefault(),A.stopPropagation(),v(A)}),this.$ctx.on("click",".js-cm-setting-users__item-checkbox-input",A=>{A.preventDefault(),A.stopPropagation()}),this.$ctx.on("change",".js-cm-setting-users__select-all-checkbox",A=>{const W=ni(A.target),be=W.siblings(".ca-checkbox__label");W.is(":checked")?(this.checkAll(),be.text(this.$ctx.data("label-unselectall"))):(this.unCheckAll(),be.text(this.$ctx.data("label-selectall"))),typeof this.changed=="function"&&this.changed(),this.saveSetting(A)}),this.$ctx.on("click",".js-cm-setting-users__user",A=>{v(A)})}saveSetting(v){this.isSetting&&this.save({val:ni(v.target).val(),checked:ni(v.target).is(":checked")}).then(A=>{A.success&&typeof this.saved=="function"&&this.saved(A)})}disableSelectAllIfEmpty(){this.$ctx.find(".js-cm-setting-users__item-checkbox-input:enabled").length===0&&this.$ctx.find(".js-cm-setting-users__select-all-checkbox").prop("disabled",!0)}fixUsersHeight(){const v=this.$ctx.find(`.js-cm-setting-users__list-${this.id}`),A=v.css("height");v.height(A),this.$ctx.find(`.js-cm-setting-users__not-found-${this.id}`).css("line-height",A)}enableJets(){const v=this.$ctx.find(`.js-cm-setting-users__not-found-${this.id}`),A=this.$ctx.data("not-found-label");this.jets=new _o({searchTag:`.js-cm-setting-users__filter-query-${this.id}`,contentTag:`.js-cm-setting-users__search-container-${this.id}`,didSearch:W=>this.$ctx.find(".js-cm-setting-users__user:visible").length>0?v.removeClass("state-visible"):v.text(A.replace("$1$",W)).addClass("state-visible")})}serialize(){const v={};v[this.id]=this.getValue();let A=null;const W=this.$ctx.data("group");return W?A=this.createGroup({},W,v):A=v,A}enter(){this.mod.leave(this.$ctx)}leave(){super.leave()}checkAll(){const v=this.$ctx.find(".js-cm-setting-users__item-checkbox-input:enabled");ni.each(v,(A,W)=>{ni(W).parent().is(":visible")&&ni(W).prop("checked",!0)}),this.formatUsernames()}unCheckAll(){const v=this.$ctx.find(".js-cm-setting-users__item-checkbox-input:enabled");ni.each(v,(A,W)=>{ni(W).parent().is(":visible")&&ni(W).prop("checked",!1)}),this.formatUsernames()}setValue(v){this.$ctx.attr("value",v)}getValue(){const v=[],A=this.$ctx.find(".js-cm-setting-users__item-checkbox-input:checked");return ni.each(A,(W,be)=>{const Le=parseInt(ni(be).val());v.push(Le)}),v}}var zi=r(18216),rl=r(5181),ho=r.n(rl);let Do="idle";const xi=async()=>{Do==="loaded"||Do==="loading"||(Do="loading",await window.languageBundleLoaded,ho().extend(ho().validator.messages,{required:window.translate("SettingsValidator_required"),maxlength:ho().validator.format(window.translate("SettingsValidator_maxlength")),minlength:ho().validator.format(window.translate("SettingsValidator_minlength")),rangelength:ho().validator.format(window.translate("SettingsValidator_rangelength")),email:window.translate("SettingsValidator_email"),url:window.translate("SettingsValidator_url"),date:window.translate("SettingsValidator_date"),number:window.translate("SettingsValidator_number"),digits:window.translate("SettingsValidator_digits"),equalTo:window.translate("SettingsValidator_equalTo"),range:ho().validator.format(window.translate("SettingsValidator_range")),max:ho().validator.format(window.translate("SettingsValidator_max")),min:ho().validator.format(window.translate("SettingsValidator_min")),users:window.translate("SettingsValidator_users"),link:window.translate("SettingsValidator_link"),https:window.translate("SettingsValidator_https")}))};var Zi=r(5181);const Go={AssetChooserList:w,Attachments:R,Border:B,Button:I,Chooser:te,Color:me,Colorlabel:ee,Colorlist:ce,Date:et,Delete:it,Dropdown:_s,Emailchange:Us,Folderlist:Yr,Frame:Ze,Groups:Et,Headersize:qs,Hidden:gs,Hotspot:lt,Image:Zr,Link:Sa,List:le,Logo:St,Measure:oa,Multivalue:jo,Password:Oo,Permission:To,Position:So,Radioandcheckbox:hi,Ratio:Li,Richtext:xe,Search:Fa,SnippetTextarea:zs,SnippetValue:Ss,Structure:An,StructureChooser:Di,Tags:lr,Text:ss,Time:mn,Toggle:Dr,Tree:Ar,Typostyle:ao,TypostyleLink:ro,Userlist:zo,Users:qi},Bo=class $w extends zi.j{constructor(v,A){super(v,A,`c-settings-${$w.count++}`),this.settings=[],this.elems=[],this.active=!1,this.$active=null,this.validator=null,this.on()}on(){xi(),this.sandbox.subscribe("events",this),this.sandbox.subscribe("tabs",this);const v=this.$ctx.data("settings");v&&v.destroy(),this.setup(),this.$ctx.off(".settings"),this.$ctx.on("click.settings",".js-co-settings__setting",A=>{const W=Zi(A.currentTarget);this.enter(W)}),this.$ctx.on("click.settings",".js-co-settings__accordion-open",A=>{const W=Zi(A.currentTarget),be=W.next(".js-co-settings__accordion-content");W.find(".icon").toggleClass("icon-angle-down icon-angle-up"),be.toggleClass("state-open")})}setup(){let v=!1;this.$ctx.find(".js-co-settings__setting").each((W,be)=>{v=!0;const Le=Zi(be),ot=Le.data("id");if(Le.data("setting")){this.settings.push({id:ot,item:Le.data("setting")});return}const He=_()(b()(Le.data("type"))),ns=new Go[He](this,Le,!0);ns.setting(),Le.data("setting",ns),this.settings.push({id:ot,item:ns})}),v||this.$ctx.find(".js-co-settings__elem").each((be,Le)=>{const ot=Zi(Le),He=ot.data("id");if(ot.data("elem")){this.elems.push({id:He,item:ot.data("elem")});return}const ns=_()(b()(ot.data("type"))),vs=new Go[ns](this,ot,!1);vs.elem(!1),ot.data("elem",vs),this.elems.push({id:He,item:vs})}),this.$ctx.data("settings",this)}validation(v,A,W,be){this.$ctx.on("reset",()=>{this.$ctx.validate().resetForm(),typeof A=="function"?A():g.E.prototype.hideDetails.apply(this).then(()=>{g.E.prototype.hideActions.apply(this,[this.$actions])})});const Le=this,ot={onfocusout:!1,submitHandler(){g.E.prototype.showLoader.apply(Le),typeof v=="function"&&v()},invalidHandler(He,ns){typeof W=="function"&&W(He,ns)},errorPlacement:g.E.prototype.errorPlacement.bind(this),showErrors:function(){const He=this;He.numberOfInvalids()>0&&g.E.prototype.showError.apply(Le),He.defaultShowErrors()}};be&&(ot.messages=be),this.$ctx.length>0&&this.$ctx.dataAsBoolean("hiddenFieldsValidated")?this.validator=this.$ctx.validate(ot).settings.ignore=[]:this.validator=this.$ctx.validate(ot)}showErrors(v){this.validator?(this.validator.showErrors(v),this.validator.focusInvalid()):console.log("Validation not enabled for this settings instance"),g.E.prototype.hideLoader.apply(this)}hideLoader(){g.E.prototype.hideLoader.apply(this)}enter(v){this.active?this.$active&&!v.is(this.$active)&&(this.$active.addClass("state-focus"),this.getSetting(this.$active.data("id")).unfocus(v)):(this.active=!0,this.$active=v,v.removeClass("state-focus").addClass("state-active"),this.getSetting(v.data("id")).enter())}leave(v){const A=v||this.$active;this.active&&(A==null||A.removeClass("state-focus state-active"),this.getSetting(A==null?void 0:A.data("id")).leave(),this.active=!1,this.$active=null)}next(v){const A=v.data("id"),W=this.settings.findIndex(be=>be.id===A);if(this.settings[W+1]){const be=this.settings[W+1].item;be.multipleValues?this.next(be.$ctx):this.enter(be.$ctx)}}prev(v){const A=v.data("id"),W=this.settings.findIndex(be=>be.id===A);if(this.settings[W-1]){const be=this.settings[W-1].item;be.multipleValues?this.prev(be.$ctx):this.enter(be.$ctx)}}serialize(){let v={};for(const A of this.elems)v=Zi.extend(!0,{},v,A.item.serialize());for(const A of this.settings)v=Zi.extend(!0,{},v,A.item.serialize());return this.removeBrowserPluginDataAttributes(v),v}removeBrowserPluginDataAttributes(v){delete v["com.agilebits.onepassword.userEdited"]}destroy(){for(const v of this.elems)typeof v.item.destroy=="function"&&v.item.destroy();for(const v of this.settings)typeof v.item.destroy=="function"&&v.item.destroy()}destroyValidator(){this.validator&&this.validator.destroy()}resize(v){const A=this.$ctx;if(v){const W=parseInt(A.height()),be=A.offset().top;W+be<v&&A.height(v-be)}else A.css("height","auto")}get(v){let A=this.getSetting(v);return Zi.isEmptyObject(A)&&(A=this.getElem(v)),A}getSettings(v){return this.settings.filter(A=>Array.isArray(v)?v.includes(A.id):!0).map(A=>A.item)}getActive(){if(this.$active){const v=this.$active.data("id");let A=this.getSetting(v);return Zi.isEmptyObject(A)&&(A=this.getElem(v)),Zi.isEmptyObject(A)?null:A}return null}getSetting(v){const A=this.settings.find(W=>W.id===v);return A?A.item:{}}getElems(v){return this.elems.filter(A=>Array.isArray(v)?v.includes(A.id):!0).map(A=>A.item)}getElem(v){const A=this.elems.find(W=>W.id===v);return A?A.item:{}}getFirstElem(){return this.elems[0]?this.elems[0].item:{}}onModalClosed(v){for(const A of this.getSettings())typeof A.onModalClosed=="function"&&A.onModalClosed(v);for(const A of this.getElems())typeof A.onModalClosed=="function"&&A.onModalClosed(v)}onTabSwitched(v){const A=this.getActive();A&&typeof A.onTabSwitched=="function"&&A.onTabSwitched(v)}getFirstSetting(){return this.settings[0]?this.settings[0].item:{}}};Bo.count=0;let qn=Bo},84090:function(ve,$,r){"use strict";r.d($,{p:function(){return _}});var s=r(86070),b=r(95376),t=r(14154);const _=(0,t.I)(C=>(0,s.jsxs)("div",{className:`co-settings__divider co-settings__divider--${C.size} ${C.hasNegativeMargin?"co-settings__divider--negative-margin":""}`,children:[C.size==="large"&&C.title?(0,s.jsx)("div",{className:"co-settings__divider-title",children:C.title}):null,C.size==="large"&&C.setting?(0,s.jsx)("div",{className:"co-settings__divider-setting",children:(0,b.Ay)(C.setting)}):null]}))},4219:function(ve,$,r){"use strict";r.d($,{c:function(){return E}});var s=r(86070),b=r(49290),t=r(2728),_=r(59240),C=r(29083),y=r(62878),g=r(90307),m=r(14154),T=r(5181);const E=(0,m.I)(w=>{const u=[{value:"Text",name:"Text"},{value:"Email",name:"Email"},{value:"Textarea",name:"Textarea"},{value:"Country",name:"Country"}];return(0,s.jsxs)("form",{className:"cm-setting__details cm-setting-list__details",children:[(0,s.jsxs)("div",{className:"cm-setting__details-fields",children:[T.isNumeric(w.item.id)?(0,s.jsx)(_.U,{id:"type",label:"Type",required:!0,readonly:!0,value:w.item.type,options:u}):(0,s.jsx)(y.A,{id:"type",label:"Type",required:!0,disabled:!0,readonly:!0,value:w.item.type,placeholder:""}),(0,s.jsx)(y.A,{id:"label",label:"Label",required:!0,value:w.item.label,placeholder:"eg. Your Name"}),(0,s.jsx)(y.A,{id:"placeholder",label:"Placeholder",value:w.item.placeholder,placeholder:"e.g. John Doe"}),(0,s.jsxs)("a",{className:"co-settings__accordion-open js-co-settings__accordion-open",href:"javascript:;",children:[(0,s.jsx)("i",{className:"icon icon-angle-down"})," Advanced"]}),(0,s.jsx)("div",{className:"co-settings__accordion-content js-co-settings__accordion-content state-closed",children:(0,s.jsx)(g.f,{id:"required",label:"Required",disabled:!T.isNumeric(w.item.id),checked:!!w.item.required})}),(0,s.jsx)(C.f,{id:"id",value:w.item.id}),(0,s.jsx)(C.f,{id:"value",value:w.item.id})]}),(0,s.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer js-cm-setting__actions cm-setting__actions cm-setting__actions--flyout js-cm-setting-list__actions",children:[(0,s.jsx)(b.t,{}),(0,s.jsx)(t.b,{})]})]})})},64602:function(ve,$,r){"use strict";r.d($,{E:function(){return m}});var s=r(86070),b=r(49290),t=r(2728),_=r(59240),C=r(62878),y=r(90307),g=r(14154);const m=(0,g.I)(()=>{const T=[{value:"Text",name:"Text"},{value:"Email",name:"Email"},{value:"Textarea",name:"Textarea"},{value:"Country",name:"Country"}];return(0,s.jsxs)("form",{className:"cm-setting__details cm-setting-list__details",children:[(0,s.jsxs)("div",{className:"cm-setting__details-fields",children:[(0,s.jsx)(_.U,{id:"type",label:"Type",required:!0,readonly:!0,value:null,options:T}),(0,s.jsx)(C.A,{id:"label",label:"Label",required:!0,placeholder:"eg. Your Name"}),(0,s.jsx)(C.A,{id:"placeholder",label:"Placeholder",placeholder:"e.g. John Doe"}),(0,s.jsx)(y.f,{id:"required",label:"Required",disabled:!1,checked:!0})]}),(0,s.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer js-cm-setting__actions cm-setting__actions cm-setting__actions--flyout js-cm-setting-list__actions",children:[(0,s.jsx)(b.t,{}),(0,s.jsx)(t.b,{})]})]})})},72818:function(ve,$,r){"use strict";r.d($,{A:function(){return _}});var s=r(86070),b=r(4957),t=r(14154);const _=(0,t.I)(()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"co-powerbar__drawer-title",children:window.translate("Legacy_access_request_setting_name")}),(0,s.jsx)("div",{className:"mod mod-c-settings-accessrequest co-settings-accessrequest",children:(0,s.jsx)(b.T,{})})]}))},85762:function(ve,$,r){"use strict";r.d($,{u:function(){return t}});var s=r(86070),b=r(14154);const t=(0,b.I)(_=>(0,s.jsxs)("div",{className:"co-settings__blank",children:[_.text,"\xA0"," ",_.cname&&_.domain?(0,s.jsxs)(s.Fragment,{children:[_.cname," to ",_.domain]}):null]}))},46995:function(ve,$,r){"use strict";r.d($,{Q:function(){return o}});var s=r(86070),b=r(95376),t=r(69415),_=r(2728),C=r(87349),y=r(52939),g=r(82953),m=r(23189),T=r(71460),E=r(14154),w=r(82110),u=r(85762);const c=(0,E.I)(l=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"co-settings-account__status-label",children:l.active=="0"?"Correct":"Not configured"}),(0,s.jsx)("span",{className:`co-settings-account__status-bubble ${l.active=="0"?"state-on":"state-off"}`})]})),o=(0,E.I)(l=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"co-powerbar__drawer-title",children:window.translate("Legacy_powerbar_menu_account")}),(0,s.jsxs)("div",{className:"mod mod-c-settings-account co-settings-account",children:[(0,s.jsxs)("fieldset",{className:"co-settings__fieldset js-co-settings-account__basics",children:[(0,s.jsx)("legend",{className:"co-settings__fieldset-title",children:window.translate("Legacy_account_fieldset_basic_information")}),(0,s.jsx)(m.t,{id:"team_name",label:window.translate("Legacy_account_settings_account_name"),value:l.account_name,api:"/api/account/domain/name",placeholder:window.translate("Legacy_account_settings_account_name_placeholder")}),l.is_owner?(0,s.jsx)(g.l,{id:"favicon",file_id:l.favicon.file_id,api:`/api/account/favicon/${l.dashboard_id}`,dashboard:l.dashboard_id,label:"Favicon",image:l.favicon.preview_url||!1,image_property:"preview_url",original:l.favicon.generic_url||"",area:l.favicon.settings,placeholder:"/img/favicon-nook.png",disableCropping:!1,ratio:1,accept:"png",description:"Type: PNG"}):null]}),(0,w.kA)()?null:(0,s.jsxs)("fieldset",{className:"co-settings__fieldset js-co-settings-account__domain",children:[(0,s.jsx)("legend",{className:"co-settings__fieldset-title",children:window.translate("Legacy_account_settings_account_section_custom_domain")}),(0,s.jsx)(m.t,{id:"custom_domain",label:window.translate("Legacy_account_settings_account_custom_domain"),value:l.domain,readonly:!(l.utils.account.hasFeature("CORE_CUSTOM_SUBDOMAIN")||l.utils.account.hasFeature("CORE_CUSTOM_DOMAIN")),placeholder:window.translate("Legacy_account_settings_account_custom_domain_placeholder")}),l.utils.account.hasFeature("CORE_CUSTOM_SUBDOMAIN")===!1&&l.utils.account.hasFeature("CORE_CUSTOM_DOMAIN")===!1?(0,s.jsx)(t.V,{feature:"CORE_CUSTOM_SUBDOMAIN",text:window.translate("Legacy_product_features_upgrade_hook_custom_subdomain")}):l.utils.account.hasFeature("CORE_CUSTOM_SUBDOMAIN")===!0&&l.utils.account.hasFeature("CORE_CUSTOM_DOMAIN")===!1?(0,s.jsx)(t.V,{feature:"CORE_CUSTOM_DOMAIN",text:window.translate("Legacy_product_features_upgrade_hook_custom_domain")}):null]}),l.is_owner?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("fieldset",{className:"co-settings__fieldset js-co-settings-account__loginpage",children:[(0,s.jsx)("legend",{className:"co-settings__fieldset-title",children:window.translate("Legacy_account_settings_account_section_loginpage_title")}),l.utils.account.hasFeature("CORE_BRANDED_LOGIN_PAGE")===!1?(0,s.jsx)(t.V,{feature:"CORE_BRANDED_LOGIN_PAGE",text:window.translate("Legacy_product_features_upgrade_hook_loginpagebuilder")}):null,l.utils.account.hasFeature("CORE_BRANDED_LOGIN_PAGE")===!0?(0,s.jsx)("div",{className:"cm-btn-bar js-cm-setting__actions cm-setting__actions--form cm-btn-bar--centered",children:(0,s.jsx)("a",{href:"/loginpagebuilder","data-route":"true",className:"cm-btn cm-btn--primary","data-test-id":"customize-login-page-button",children:(0,s.jsx)("span",{className:"js-cm-setting__btn-label",children:window.translate("Legacy_account_settings_account_section_loginpage_button")})})}):null]}),(0,s.jsxs)("fieldset",{className:"co-settings__fieldset",children:[(0,s.jsx)("legend",{className:"co-settings__fieldset-title",children:"Notification Emails"}),l.utils.account.hasFeature("CORE_CUSTOM_EMAIL_TEMPLATE")===!1?(0,s.jsx)(t.V,{feature:"CORE_CUSTOM_EMAIL_TEMPLATE",text:window.translate("Legacy_product_features_upgrade_hook_email_configurator")}):null,l.utils.account.hasFeature("CORE_CUSTOM_EMAIL_TEMPLATE")===!0?(0,s.jsx)("div",{className:"cm-btn-bar js-cm-setting__actions cm-setting__actions--form cm-btn-bar--centered",children:(0,s.jsx)("a",{href:"/whitelabel-email","data-route":"true",className:"cm-btn cm-btn--primary","data-test-id":"customize-email-template-button",children:(0,s.jsx)("span",{className:"js-cm-setting__btn-label",children:window.translate("Legacy_email_configurator_menu_item_text")})})}):null]}),(0,s.jsxs)("fieldset",{className:"co-settings__fieldset",children:[(0,s.jsx)("legend",{className:"co-settings__fieldset-title",children:(0,b.Ay)(window.translate("AccountSettings_ErrorPageBuilder_title",{name:"Frontify"}))}),(0,s.jsx)("div",{className:"cm-btn-bar js-cm-setting__actions cm-setting__actions--form cm-btn-bar--centered",children:(0,s.jsx)("a",{href:`/errorpagebuilder/${l.dashboard_id}/403`,className:"cm-btn cm-btn--primary",children:(0,s.jsx)("span",{className:"js-cm-setting__btn-label",children:(0,b.Ay)(window.translate("ErrorPageBuilder_403_title",{name:"Frontify"}))})})})]}),(0,s.jsx)("fieldset",{className:"co-settings__fieldset co-settings__fieldset--smallmargin",children:(0,s.jsx)("div",{className:"cm-btn-bar js-cm-setting__actions cm-setting__actions--form cm-btn-bar--centered",children:(0,s.jsx)("a",{href:`/errorpagebuilder/${l.dashboard_id}/404`,className:"cm-btn cm-btn--primary",children:(0,s.jsx)("span",{className:"js-cm-setting__btn-label",children:(0,b.Ay)(window.translate("ErrorPageBuilder_404_title",{name:"Frontify"}))})})})}),(0,s.jsxs)("fieldset",{className:"co-settings__fieldset js-co-settings-account__disable-viewer-logo",children:[(0,s.jsx)("legend",{className:"co-settings__fieldset-title",children:window.translate("Legacy_account_settings_styleguide")}),(0,s.jsx)(T.I,{api:"/api/account/domain/disable-viewer-logo",id:"disable_viewer_logo",label:window.translate("SettingsAccount_hideLinkDashboard"),value:!0,checked:l.disable_viewer_logo})]}),l.utils.account.hasFeature("TWO_FACTOR_AUTHENTICATION")?(0,s.jsxs)("fieldset",{className:"co-settings__fieldset js-co-settings-account__force-two-factor",children:[(0,s.jsx)("legend",{className:"co-settings__fieldset-title",children:window.translate("Legacy_account_settings_security")}),(0,s.jsx)(T.I,{api:"/api/account/domain/forcetwofactorauthentication",id:"two_factor_authentication_required",label:window.translate("Legacy_account_settings_force_two_factor"),value:!0,checked:l.two_factor_authentication_required})]}):null,l.utils.account.hasFeature("PERSONAL_PROJECT_ACCESS")?(0,s.jsxs)("fieldset",{className:"co-settings__fieldset js-co-settings-account__personal-project-access",children:[(0,s.jsx)("legend",{className:"co-settings__fieldset-title",children:window.translate("SettingsAccount_personalProjectAccessTitle")}),(0,s.jsx)(T.I,{api:"/api/account/domain/personal-project-access",id:"personal_project_access",label:window.translate("SettingsAccount_personalProjectAccess"),value:!0,checked:l.personal_project_access})]}):null,(0,s.jsxs)("fieldset",{className:"co-settings__fieldset js-co-settings-account__permissions",children:[(0,s.jsx)("legend",{className:"co-settings__fieldset-title",children:window.translate("AccountSettings_permissions_title")}),(0,s.jsx)(y.x,{id:"permission_create_brand",label:window.translate("AccountSettings_permissions_createBrands"),value:l.permission_create_brand,options:[{value:"VIEW",name:window.translate("AccountSettings_permissions_role_viewer")},{value:"EDIT",name:window.translate("AccountSettings_permissions_role_editor")},{value:"ADMIN",name:window.translate("AccountSettings_permissions_role_owner")},{value:"ACCOUNT_ADMIN",name:window.translate("AccountSettings_permissions_role_accountAdministrator")}]}),(0,s.jsx)(y.x,{id:"permission_create_styleguide",label:window.translate("AccountSettings_permissions_createGuidelines"),value:l.permission_create_styleguide,options:[{value:"VIEW",name:window.translate("AccountSettings_permissions_role_viewer")},{value:"EDIT",name:window.translate("AccountSettings_permissions_role_editor")},{value:"ADMIN",name:window.translate("AccountSettings_permissions_role_owner")},{value:"ACCOUNT_ADMIN",name:window.translate("AccountSettings_permissions_role_accountAdministrator")}]}),(0,s.jsx)(y.x,{id:"permission_create_workspace",label:window.translate("AccountSettings_permissions_createProjects"),value:l.permission_create_workspace,options:[{value:"VIEW",name:window.translate("AccountSettings_permissions_role_viewer")},{value:"EDIT",name:window.translate("AccountSettings_permissions_role_editor")},{value:"ADMIN",name:window.translate("AccountSettings_permissions_role_owner")},{value:"ACCOUNT_ADMIN",name:window.translate("AccountSettings_permissions_role_accountAdministrator")}]}),(0,s.jsx)(y.x,{id:"permission_create_libraries",label:window.translate("AccountSettings_permissions_createLibraries"),value:l.permission_create_libraries,options:[{value:"VIEW",name:window.translate("AccountSettings_permissions_role_viewer")},{value:"EDIT",name:window.translate("AccountSettings_permissions_role_editor")},{value:"ADMIN",name:window.translate("AccountSettings_permissions_role_owner")},{value:"ACCOUNT_ADMIN",name:window.translate("AccountSettings_permissions_role_accountAdministrator")}]}),l.utils.account.hasFeature("BRAND_UPDATE")?(0,s.jsx)(y.x,{id:"permission_create_brandupdatelibrary",label:window.translate("AccountSettings_permissions_createNewsletters"),value:l.permission_create_brandupdatelibrary,options:[{value:"VIEW",name:window.translate("AccountSettings_permissions_role_viewer")},{value:"EDIT",name:window.translate("AccountSettings_permissions_role_editor")},{value:"ADMIN",name:window.translate("AccountSettings_permissions_role_owner")},{value:"ACCOUNT_ADMIN",name:window.translate("AccountSettings_permissions_role_accountAdministrator")}]}):null,(0,s.jsx)(y.x,{id:"permission_upgrade_hook",label:window.translate("AccountSettings_permissions_displayUpgradeHooks"),value:l.permission_upgrade_hook,options:[{value:"VIEW",name:window.translate("AccountSettings_permissions_role_viewer")},{value:"EDIT",name:window.translate("AccountSettings_permissions_role_editor")},{value:"ADMIN",name:window.translate("AccountSettings_permissions_role_owner")},{value:"ACCOUNT_ADMIN",name:window.translate("AccountSettings_permissions_role_accountAdministrator")}]}),(0,s.jsx)(y.x,{id:"permission_change_group",label:window.translate("AccountSettings_permissions_changeGroupPermission"),value:l.permission_change_group,options:[{value:"EDIT",name:window.translate("AccountSettings_permissions_role_editorOfProject")},{value:"ADMIN",name:window.translate("AccountSettings_permissions_role_owner")},{value:"ACCOUNT_ADMIN",name:window.translate("AccountSettings_permissions_role_accountAdministrator")}]})]})]}):null,l.utils.account.hasFeature("CORE_CUSTOM_DOMAIN")?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("form",{className:`co-settings js-co-settings-certificate__form co-settings-account__certificate ${l.frontify_domain||l.crt||!l.domain||!l.metadata?"state-hidden":""}`,children:(0,s.jsxs)("fieldset",{className:"co-settings__fieldset",children:[(0,s.jsx)("legend",{className:"co-settings__fieldset-title",children:"Certificate"}),(0,s.jsx)(C.D,{id:"certificate_crt",required:!0,label:"Certificate",modifier:"code",placeholder:null}),(0,s.jsx)(C.D,{id:"certificate_chain",label:"Certificate Chain (optional)",modifier:"code",placeholder:null}),(0,s.jsx)("div",{className:"cm-btn-bar js-cm-setting__actions cm-setting__actions--form cm-btn-bar--centered js-co-settings-certificate__upload",children:(0,s.jsx)(_.b,{label_submit:"Upload"})})]})}),(0,s.jsxs)("fieldset",{className:`co-settings__fieldset co-settings-account__status ${l.frontify_domain||!l.domain||!l.metadata||!l.crt?"state-hidden":""}`,children:[(0,s.jsx)("div",{className:"co-settings__fieldset co-settings__fieldset--notitle js-co-settings__fieldset--notitle",children:(0,w.kA)()===!1?(0,s.jsx)(u.u,{text:window.translate("Legacy_styleguide_feature_custom_cname"),cname:l.domain,domain:"domains.frontify.com"}):(0,s.jsx)(u.u,{text:window.translate("Legacy_styleguide_feature_custom_cname_contact_us")})}),(0,s.jsx)("div",{className:"cm-setting",children:(0,s.jsxs)("div",{className:"cm-setting__preview",children:[(0,s.jsx)("label",{className:"cm-setting__value--inline",children:(0,s.jsx)(c,{active:!l.cname_status})}),(0,s.jsx)("label",{className:"cm-setting__label--inline",children:"CNAME"})]})})]})]}):null]})]}))},78639:function(ve,$,r){"use strict";r.d($,{o:function(){return p}});var s=r(23245),b=r(86070),t=r(14154),_=Object.defineProperty,C=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,m=(f,O,L)=>O in f?_(f,O,{enumerable:!0,configurable:!0,writable:!0,value:L}):f[O]=L,T=(f,O)=>{for(var L in O||(O={}))y.call(O,L)&&m(f,L,O[L]);if(C)for(var L of C(O))g.call(O,L)&&m(f,L,O[L]);return f};const E=(0,t.I)(f=>(0,b.jsx)("div",T({className:"mod mod-m-avatar-multiple cm-avatar-multiple"},f.tpl.renderDataAttributesAsObject(f))));var w=r(50427),u=r(18216),c=r(38291),o=r(77345),l=r(39232);class p extends u.j{static get REQUIREMENT_NO_REJECTIONS(){return"NO_REJECTIONS"}static get REQUIREMENT_FIRST_RESPONSE(){return"FIRST"}static get REQUIREMENT_UNANIMOUS(){return"UNANIMOUS"}static get REQUIREMENT_MAJORITY_APPROVES(){return"MAJORITY_APPROVES"}static get DEFAULT_DURATION_VALUE(){return 14}on(O){this.tpl.bindDataAttributes(this,{projectId:{type:Number},approvalRequestPresets:{type:Object,changed:()=>this.renderAvatars()}}),this.renderAvatars(),this.registerSettings(),O()}renderAvatars(){for(const O of this.approvalRequestPresets){const P=this.$ctx.find(`.js-cm-setting-list__item[data-id="${O.id}"]`).find(".js-cm-setting-list__avatar"),N=this.getAvatarByPreset(O);this.tpl.addAndActivate(P,N)}}getAvatarByPreset(O){let L=null,P=null;if(O.review_groups&&O.review_groups.length>0){const N=O.review_groups.reduce((S,R)=>{for(const U of R.users)S.includes(U)||S.push(U);return S},[]);L=N[0]?N[0]:null,P=N[1]?N[1]:null}return L===null&&(L=O.review_users!==null?O.review_users[0]:null),P===null&&(P=O.review_users!==null&&O.review_users.length>=2?O.review_users[1]:null),P===null?(0,w.EY)(s.p,{name:(L==null?void 0:L.name)||"",imageUrl:(L==null?void 0:L.image)||"",gravatarHash:(L==null?void 0:L.gravatar_hash)||"",size:o.Z.SIZE_24||""}):(0,w.EY)(E,{avatarFront:L,avatarBack:P})}registerSettings(){this.settings=new l.D(this.$ctx,this.sandbox),this.approvalRequestPresetSetting=this.settings.getSetting("approvalRequestPreset"),this.approvalRequestPresetSetting.extendFormData=O=>this.extendFormData(O),this.approvalRequestPresetSetting.processAddSettings=O=>{this.handleFormDependencies(O)},this.approvalRequestPresetSetting.processEditSettings=O=>{this.handleFormDependencies(O)},this.approvalRequestPresetSetting.saved=O=>{var L;const P=this.$ctx.dataAsObject("approvalRequestPresets");P.push(O),this.$ctx.dataAsObject("approvalRequestPresets",P);const N={approval_preset_id:O.id,single_reviewers:((L=O.review_users)==null?void 0:L.length)||0,group_reviewers:this.countGroupReviewers(O),name:O.name,requirements:O.requirement_to_approve,cancel_if_modified:O.cancel_on_publication_modified,wait_for_due_date:O.wait_for_due_date,request_details_locked:O.request_details_locked,message:O.default_message,default_duration:O.default_duration/60/60/24};(0,c.s)("create approval preset",N)},this.approvalRequestPresetSetting.itemUpdated=O=>{const P=this.$ctx.dataAsObject("approvalRequestPresets").map(N=>N.id===parseInt(O.id)?O:N);this.$ctx.dataAsObject("approvalRequestPresets",P)},this.approvalRequestPresetSetting.itemDeleted=O=>{const P=this.$ctx.dataAsObject("approvalRequestPresets").filter(N=>N.id!==parseInt(O));this.$ctx.dataAsObject("approvalRequestPresets",P)}}extendFormData(O){const L={id:O.approvalPresetId||null,project_id:this.projectId,name:O.name||null,default_message:O.defaultMessage,default_duration:parseInt(O.defaultDuration)*24*60*60,requirement_to_approve:O.requirementToApprove,reviewers_locked:!0,settings_locked:!0,request_details_locked:O.requestDetailsLocked,review_user_ids:O.reviewerUsersAndGroups.selection.users,review_group_ids:O.reviewerUsersAndGroups.selection.groups};return L.cancel_on_publication_modified=Object.prototype.hasOwnProperty.call(O,"cancelOnPublicationModified"),L.wait_for_due_date=Object.prototype.hasOwnProperty.call(O,"waitForDueDate"),L}handleFormDependencies(O){const L=O.getElem("waitForDueDate"),P=O.getElem("requirementToApprove");P.changed=N=>{N.requirementToApprove===p.REQUIREMENT_FIRST_RESPONSE?(L.uncheckAll(),L.disableAll()):L.enableAll()}}countGroupReviewers(O){var L;const P=(L=O.review_groups)==null?void 0:L.reduce((N,S)=>{const R=S.users.map(U=>U.id);for(const U of R)N.includes(U)||N.push(U);return N},[]);return(P==null?void 0:P.length)||0}}},85620:function(ve,$,r){"use strict";r.d($,{a:function(){return p}});var s=r(86070),b=r(49290),t=r(2728),_=r(38020),C=r(59240),y=r(29083),g=r(14154);const m=(0,g.I)(f=>(0,s.jsxs)("div",{className:"cm-settings-detail__delete cm-btn-dropdown cm-btn--right js-cm-setting-list__details-delete",children:[(0,s.jsx)("button",{type:"button",className:"cm-actions__action js-cm-btn-dropdown__toggle",title:window.translate("Legacy_btn_actions"),children:(0,s.jsx)("i",{className:"ca-icon--actions ca-icon--md"})}),(0,s.jsx)("div",{className:" cm-btn-dropdown__menu cm-btn-dropdown__menu--right js-cm-btn-dropdown__menu",children:(0,s.jsx)("div",{className:" cm-btn-dropdown__items js-cm-setting-list__details-delete-container","data-value":f.value,"data-delete":window.translate("Legacy_btn_delete"),"data-delete-confirmation":window.translate("Legacy_workspace_settings_publishing_approvals_delete_confirmation")})})]}));var T=r(62878),E=r(87349),w=r(90307),u=r(83858),c=r(50427),o=r(84090),l=r(78639);const p=(0,g.I)(f=>{let O=!1;f.item&&f.item.requirement_to_approve===l.o.REQUIREMENT_FIRST_RESPONSE&&(O=!0);const L=(0,c.EY)(w.f,{id:"requestDetailsLocked",checked:f.item?f.item.request_details_locked:!1,lockStyle:!0,tooltipLocked:window.translate("Legacy_workspace_approval_preset_details_locked_tooltip"),tooltipUnlocked:window.translate("Legacy_workspace_approval_preset_details_unlocked_tooltip")});return(0,s.jsxs)("form",{className:"cm-setting__details cm-setting__details--no-padding-top cm-setting-list__details","data-hidden-fields-validated":"true",children:[(0,s.jsx)(y.f,{id:"approvalPresetId",value:f.item?f.item.id:null}),(0,s.jsxs)("div",{className:"cm-setting__details-fields",children:[(0,s.jsx)(o.p,{size:"large",title:window.translate("Legacy_workspace_settings_publishing_approvals_divider_reviewers"),hasNegativeMargin:!0}),(0,s.jsx)(u.u,{id:"reviewerUsersAndGroups",apiAllUsers:`/api/collaborator/feedback-list/${f.data.projectId}?groups=true`,apiAllGroups:"/api/groups/list",value:{id:{users:f.item&&f.item.review_users!==null?f.item.review_users.map(P=>P.id):[],groups:f.item&&f.item.review_groups!==null?f.item.review_groups.map(P=>P.id):[]},data:{users:f.item&&f.item.review_users!==null?f.item.review_users:[],groups:f.item&&f.item.review_groups!==null?f.item.review_groups:[]}},excludeCurrentUser:!1,noIndent:!0,required:!0,showBlankSlateImage:!1,unlimitedListHeight:!0,translations:{openModalButton:window.translate("Legacy_workspace_approval_create_add_reviewer_initial"),addUserButtonInitial:window.translate("Legacy_workspace_approval_create_add_reviewer_initial"),addUserButtonSingular:window.translate("Legacy_workspace_approval_create_add_reviewer_singular"),addUserButtonPlural:window.translate("Legacy_workspace_approval_create_add_reviewer_other"),blankSlateMessage:window.translate("Legacy_workspace_settings_publishing_approvals_blankslate_message"),requiredError:window.translate("Legacy_workspace_approval_create_approval_error_reviewer")}})]}),(0,s.jsxs)("div",{className:"cm-setting__details-fields",children:[(0,s.jsx)(o.p,{size:"large",title:window.translate("Legacy_workspace_settings_publishing_approvals_divider_settings"),hasNegativeMargin:!0}),(0,s.jsx)(T.A,{id:"name",label:window.translate("Legacy_workspace_settings_publishing_approvals_label_name"),value:f.item?f.item.name:"",border:!0,placeholder:window.translate("Legacy_workspace_settings_publishing_approvals_placeholder_name"),required:!0}),(0,s.jsx)(C.U,{id:"requirementToApprove",label:window.translate("Legacy_workspace_settings_publishing_approvals_label_approval_requirement"),value:f.item?f.item.requirement_to_approve:l.o.REQUIREMENT_NO_REJECTIONS,options:[{value:l.o.REQUIREMENT_NO_REJECTIONS,name:window.translate("Legacy_workspace_settings_publishing_approvals_label_no_rejections")},{value:l.o.REQUIREMENT_FIRST_RESPONSE,name:window.translate("Legacy_workspace_settings_publishing_approvals_label_first_response")},{value:l.o.REQUIREMENT_MAJORITY_APPROVES,name:window.translate("Legacy_workspace_settings_publishing_approvals_label_majority")},{value:l.o.REQUIREMENT_UNANIMOUS,name:window.translate("Legacy_workspace_settings_publishing_approvals_label_unanimous")}]}),(0,s.jsx)(_.k,{id:"waitForDueDate",checkboxModifier:"md",disable_label:!0,options:[{value:"waitForDueDate",label:window.translate("Legacy_workspace_settings_publishing_approvals_label_wait_due_date"),checked:f.item?f.item.wait_for_due_date:!1,disabled:O}]}),(0,s.jsx)(_.k,{id:"cancelOnPublicationModified",checkboxModifier:"md",options:[{value:"cancelOnPublicationModified",label:window.translate("Legacy_workspace_settings_publishing_approvals_label_cancel_on_publication_modified"),checked:f.item?f.item.cancel_on_publication_modified:!0}]})]}),(0,s.jsxs)("div",{className:"cm-setting__details-fields",children:[(0,s.jsx)(o.p,{size:"large",title:window.translate("Legacy_workspace_settings_publishing_approvals_divider_request_details"),hasNegativeMargin:!0,setting:L}),(0,s.jsx)(E.D,{id:"defaultMessage",label:window.translate("Legacy_workspace_settings_publishing_approvals_label_message"),placeholder:window.translate("Legacy_workspace_settings_publishing_approvals_placeholder_message"),value:f.item?f.item.default_message:""}),(0,s.jsx)(T.A,{id:"defaultDuration",label:window.translate("Legacy_workspace_settings_publishing_approvals_label_duration"),type:"number",value:f.item?f.item.default_duration/60/60/24:l.o.DEFAULT_DURATION_VALUE,suffix:window.translate("Legacy_workspace_settings_publishing_approvals_label_day_singular")})]}),(0,s.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer cm-setting__actions cm-setting__actions--flyout js-cm-setting__actions js-cm-setting-list__actions",children:[(0,s.jsx)(b.t,{}),(0,s.jsx)(t.b,{}),f.item?(0,s.jsx)(m,{value:f.item.id}):null]})]})})},26285:function(ve,$,r){"use strict";r.d($,{s:function(){return C}});var s=r(86070),b=r(93791),t=r(78149),_=r(14154);const C=(0,_.I)(y=>{var g;return y.items&&y.items.length>0?(g=y.items)==null?void 0:g.map(m=>(0,s.jsxs)("div",{className:"cm-setting-list__item cm-setting-list__item--extended-padding cm-setting-list__item--border js-cm-setting-list__item","data-id":m.id,children:[(0,s.jsxs)("div",{className:"cm-setting-list__col cm-setting-list__col--value",children:[(0,s.jsx)("div",{className:"cm-setting-list__avatar js-cm-setting-list__avatar"}),(0,s.jsx)("div",{className:"cm-setting-list__text-value cm-setting-list__text-value--black",children:m.name})]}),(0,s.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings cm-setting-list__col--no-padding cm-setting-list__col--opacity-0",children:(0,s.jsx)("button",{className:"cm-actions__action",children:(0,s.jsx)(t.V,{icon:"settings",size:b.l.SIZE_MEDIUM,classes:"js-cm-setting-list__edit"})})})]},m.id)):(0,s.jsxs)("div",{className:"co-settings__blank cm-setting-list__blank",children:[(0,s.jsx)("div",{className:"co-settings__blank--title",children:y.title_none}),(0,s.jsx)("div",{className:"co-settings__blank--placeholder",children:y.label_none})]})})},79749:function(ve,$,r){"use strict";r.d($,{G:function(){return w}});var s=r(86070),b=r(93277),t=r(87053),_=r(14154),C=Object.defineProperty,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,T=(u,c,o)=>c in u?C(u,c,{enumerable:!0,configurable:!0,writable:!0,value:o}):u[c]=o,E=(u,c)=>{for(var o in c||(c={}))g.call(c,o)&&T(u,o,c[o]);if(y)for(var o of y(c))m.call(c,o)&&T(u,o,c[o]);return u};const w=(0,_.I)(u=>(0,s.jsxs)(s.Fragment,{children:[u.label?(0,s.jsx)("label",{className:"cm-setting__label cm-setting-list__label",children:u.label}):null,(0,s.jsxs)("div",{className:"cm-setting-list__wrapper",children:[(0,s.jsx)("div",{className:"js-cm-setting-list__items cm-setting-list__items cm-setting-list__items--no-max-height cm-setting-list__items--no-padding",children:typeof u.templates.listReact=="function"?(0,s.jsx)(u.templates.listReact,E({},u)):null}),(0,s.jsxs)("div",{className:"cm-setting-list__add-section cm-setting-list__add-section--bottom js-cm-setting-list__add-section",children:[(0,s.jsx)("div",{className:"cm-setting-list__btn-bar",children:(0,s.jsx)(t.S,{label:u.label_add,size:b.Q.SIZE_SMALL,style:b.Q.STYLE_SECONDARY,background:b.Q.BACKGROUND_BLACK_05,icon:"add"})}),(0,s.jsx)("div",{className:"cm-setting-list__form-container js-cm-setting-list__form-container"})]})]})]}))},23962:function(ve,$,r){"use strict";r.d($,{B:function(){return _}});var s=r(86070),b=r(4957),t=r(14154);const _=(0,t.I)(()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"co-powerbar__drawer-title",children:window.translate("Legacy_powerbar_menu_apps")}),(0,s.jsx)("div",{className:"mod mod-c-settings-apps co-settingsapps",children:(0,s.jsx)(b.T,{})})]}))},40759:function(ve,$,r){"use strict";r.d($,{q:function(){return p}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.defineProperties,C=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,T=(f,O,L)=>O in f?t(f,O,{enumerable:!0,configurable:!0,writable:!0,value:L}):f[O]=L,E=(f,O)=>{for(var L in O||(O={}))g.call(O,L)&&T(f,L,O[L]);if(y)for(var L of y(O))m.call(O,L)&&T(f,L,O[L]);return f},w=(f,O)=>_(f,C(O));const u=(0,b.I)(f=>{var O;return(0,s.jsx)("form",w(E({className:"js-co-settings__setting cm-setting cm-setting-colorlabel","data-id":f.id},f.api?{"data-api":f.api}:{}),{"data-instant":"true","data-type":"colorlabel",children:(0,s.jsxs)("div",{className:"cm-setting__preview cm-setting__bar js-cm-setting__bar",children:[(0,s.jsx)("label",{htmlFor:f.id,className:"cm-setting__label",children:f.label}),(0,s.jsx)("ul",{className:"cm-setting-colorlabel__list",children:f.colors?(O=f.colors)==null?void 0:O.map((L,P)=>P===0?(0,s.jsx)("li",{className:"cm-setting-colorlabel__item",children:(0,s.jsx)("a",{"data-color":L,href:"javascript:;",className:`cm-setting-colorlabel__link js-cm-setting-colorlabel__link${!f.value||f.value==L?" state-active":""}`,children:(0,s.jsx)("i",{className:"icon-check",style:{background:`${L}`}})})},P):(0,s.jsx)("li",{className:"cm-setting-colorlabel__item",children:(0,s.jsx)("a",{"data-color":L,href:"javascript:;",className:`cm-setting-colorlabel__link js-cm-setting-colorlabel__link${f.value==L?" state-active":""}`,children:(0,s.jsx)("i",{className:"icon-check",style:{background:`${L}`}})})},P)):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("li",{className:"cm-setting-colorlabel__item",children:(0,s.jsx)("a",{"data-color":"#EEEEEE",href:"javascript:;",className:`cm-setting-colorlabel__link js-cm-setting-colorlabel__link${!f.value||f.value==="#EEEEEE"?" state-active":""}`,children:(0,s.jsx)("i",{className:"icon-check",style:{background:"#EEEEEE"}})})}),(0,s.jsx)("li",{className:"cm-setting-colorlabel__item",children:(0,s.jsx)("a",{"data-color":"#FD7D7F",href:"javascript:;",className:`cm-setting-colorlabel__link js-cm-setting-colorlabel__link${f.value==="#FD7D7F"?" state-active":""}`,children:(0,s.jsx)("i",{className:"icon-check",style:{background:"#FD7D7F"}})})}),(0,s.jsx)("li",{className:"cm-setting-colorlabel__item",children:(0,s.jsx)("a",{"data-color":"#FDBD43",href:"javascript:;",className:`cm-setting-colorlabel__link js-cm-setting-colorlabel__link${f.value==="#FDBD43"?" state-active":""}`,children:(0,s.jsx)("i",{className:"icon-check",style:{background:"#FDBD43"}})})}),(0,s.jsx)("li",{className:"cm-setting-colorlabel__item",children:(0,s.jsx)("a",{"data-color":"#F4E447",href:"javascript:;",className:`cm-setting-colorlabel__link js-cm-setting-colorlabel__link${f.value==="#F4E447"?" state-active":""}`,children:(0,s.jsx)("i",{className:"icon-check",style:{background:"#F4E447"}})})}),(0,s.jsx)("li",{className:"cm-setting-colorlabel__item",children:(0,s.jsx)("a",{"data-color":"#B5DF3A",href:"javascript:;",className:`cm-setting-colorlabel__link js-cm-setting-colorlabel__link${f.value==="#B5DF3A"?" state-active":""}`,children:(0,s.jsx)("i",{className:"icon-check",style:{background:"#B5DF3A"}})})}),(0,s.jsx)("li",{className:"cm-setting-colorlabel__item",children:(0,s.jsx)("a",{"data-color":"#83C9FD",href:"javascript:;",className:`cm-setting-colorlabel__link js-cm-setting-colorlabel__link${f.value==="#83C9FD"?" state-active":""}`,children:(0,s.jsx)("i",{className:"icon-check",style:{background:"#83C9FD"}})})}),(0,s.jsx)("li",{className:"cm-setting-colorlabel__item",children:(0,s.jsx)("a",{"data-color":"#E3A7FD",href:"javascript:;",className:`cm-setting-colorlabel__link js-cm-setting-colorlabel__link${f.value==="#E3A7FD"?" state-active":""}`,children:(0,s.jsx)("i",{className:"icon-check",style:{background:"#E3A7FD"}})})})]})})]})}))});var c=r(52939),o=r(23189),l=r(78006);const p=(0,b.I)(f=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.t,{id:"name",api:`/api/set/${f.id}`,method:"PATCH",label:window.translate("Legacy_label_set_name"),placeholder:"",value:f.name,required:!0}),(0,s.jsx)(l.S,{id:"description",api:`/api/set/update/${f.id}`,label:window.translate("Legacy_label_project_description"),placeholder:"",value:f.description}),f.utils.account.hasFeature("WORKSPACE_WORKFLOW")&&["WORKSPACE","MEDIALIBRARY","DOCUMENTLIBRARY","LOGOLIBRARY","ICONLIBRARY","TEXTLIBRARY"].includes(f.project_type)?(0,s.jsx)(c.x,{id:"status_id",label:window.translate("Legacy_label_set_status"),template:"c-dropdown-status",value:f.status_id,api:`/api/set/update/${f.id}`,options:f.status}):null,(0,s.jsx)(u,{id:"color",api:`/api/set/update/${f.id}`,label:window.translate("Legacy_label_set_color"),value:f.color,placeholder:""})]}))},14214:function(ve,$,r){"use strict";r.d($,{m:function(){return _}});var s=r(86070),b=r(4957),t=r(14154);const _=(0,t.I)(()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"co-powerbar__drawer-title",children:window.translate("Legacy_powerbar_menu_billing")}),(0,s.jsx)("div",{className:"mod mod-c-settings-billing co-settings-billing",children:(0,s.jsx)(b.T,{})})]}))},8370:function(ve,$,r){"use strict";r.d($,{h:function(){return w}});var s=r(86070),b=r(49290),t=r(2728),_=r(59240),C=r(61447),y=r(56754),g=r(97866),m=r(62878),T=r(90307),E=r(14154);const w=(0,E.I)(u=>{const c=[{value:"Text",name:"Text"},{value:"Email",name:"Email"},{value:"Textarea",name:"Textarea"},{value:"Dropdown",name:"Dropdown"},{value:"Date",name:"Date"}];return(0,s.jsxs)("form",{className:"cm-setting__details cm-setting-list__details",children:[(0,s.jsxs)("div",{className:"cm-setting__details-fields",children:[(0,s.jsx)(_.U,{id:"type",label:"Type",required:!0,readonly:!0,value:u.data.type?u.data.type:null,options:c}),(0,s.jsx)(m.A,{id:"label",label:"Label",maxlength:60,required:!0,placeholder:"eg. Your Name"}),u.data.type==="Dropdown"?(0,s.jsx)(C.v,{id:"values",templates:{list:"c-setting-elem-list-list-default",listReact:y.Q,wrap:"c-setting-elem-list-wrap-default",wrapReact:g.i},classes:"state-border",label:"Values",items:u.data.values||[]}):(0,s.jsx)(m.A,{id:"placeholder",label:"Placeholder",maxlength:40,placeholder:"e.g. John Doe"}),(0,s.jsx)(T.f,{id:"required",label:"Required",disabled:!1,checked:!0})]}),(0,s.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer js-cm-setting__actions cm-setting__actions cm-setting__actions--flyout js-cm-setting-list__actions",children:[(0,s.jsx)(b.t,{}),(0,s.jsx)(t.b,{})]})]})})},36970:function(ve,$,r){"use strict";r.d($,{g:function(){return w}});var s=r(86070),b=r(49290),t=r(2728),_=r(29083),C=r(61447),y=r(56754),g=r(97866),m=r(62878),T=r(90307),E=r(14154);const w=(0,E.I)(u=>(0,s.jsxs)("form",{className:"cm-setting__details cm-setting-list__details",children:[(0,s.jsxs)("div",{className:"cm-setting__details-fields",children:[(0,s.jsx)(m.A,{id:"type",label:"Type",required:!0,disabled:!0,readonly:!0,value:u.item.type,placeholder:""}),(0,s.jsx)(m.A,{id:"label",label:"Label",required:!0,value:u.item.label,maxlength:60,placeholder:"eg. Your Name"}),u.item.type==="Dropdown"?(0,s.jsx)(C.v,{id:"values",templates:{list:"c-setting-elem-list-list-default",listReact:y.Q,wrap:"c-setting-elem-list-wrap-default",wrapReact:g.i},classes:"state-border",label:"Values",items:u.item.values||[]}):(0,s.jsx)(m.A,{id:"placeholder",label:"Placeholder",maxlength:40,value:u.item.placeholder,placeholder:"e.g. John Doe"}),(0,s.jsxs)("a",{className:"co-settings__accordion-open js-co-settings__accordion-open",href:"javascript:;",children:[(0,s.jsx)("i",{className:"icon icon-angle-down"})," Advanced"]}),(0,s.jsx)("div",{className:"co-settings__accordion-content js-co-settings__accordion-content state-closed",children:(0,s.jsx)(T.f,{id:"required",label:"Required",disabled:u.item.removable===!1,checked:!!u.item.required})}),(0,s.jsx)(_.f,{id:"id",value:u.item.id}),(0,s.jsx)(_.f,{id:"value",value:u.item.id}),(0,s.jsx)(_.f,{id:"removable",value:u.item.removable})]}),(0,s.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer js-cm-setting__actions cm-setting__actions cm-setting__actions--flyout js-cm-setting-list__actions",children:[(0,s.jsx)(b.t,{}),(0,s.jsx)(t.b,{})]})]}))},78154:function(ve,$,r){"use strict";r.d($,{q:function(){return y}});var s=r(86070),b=r(2728),t=r(62878),_=r(23189),C=r(14154);const y=(0,C.I)(()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"co-powerbar__drawer-title",children:"Management & Limitations"}),(0,s.jsxs)("div",{className:"mod mod-c-settings-management co-settings-management",children:[(0,s.jsxs)("fieldset",{className:"co-settings__fieldset js-co-settings-management__user",children:[(0,s.jsx)("legend",{className:"co-settings__fieldset-title",children:"Limitations"}),(0,s.jsx)(_.t,{id:"user_email",label:"Email",placeholder:null})]}),(0,s.jsx)("form",{className:"co-settings js-co-settings-management__form-account",children:(0,s.jsxs)("fieldset",{className:"co-settings__fieldset",children:[(0,s.jsx)("legend",{className:"co-settings__fieldset-title",children:"Simulate User"}),(0,s.jsx)(t.A,{id:"email",label:"Email",placeholder:"e.g. user@example.com"}),(0,s.jsxs)("div",{className:"co-settings__blank co-settings__blank--small",children:[" ","For security reasons, all simulations will be logged. Simulated sessions are valid for 10 minutes."," "]}),(0,s.jsx)("div",{className:"cm-btn-bar js-cm-setting__actions cm-setting__actions--form",children:(0,s.jsx)(b.b,{label_submit:"Start Simulation"})})]})}),(0,s.jsx)("div",{className:"co-settings co-settings-management__settings-container js-co-settings-management__settings-container"})]})]}))},82209:function(ve,$,r){"use strict";r.d($,{L:function(){return T}});var s=r(86070),b=r(49290),t=r(2728),_=r(29083),C=r(5944),y=r(62878),g=r(90307),m=r(14154);const T=(0,m.I)(E=>(0,s.jsxs)("form",{className:"cm-setting__details cm-setting-list__details",children:[(0,s.jsxs)("div",{className:"cm-setting__details-fields",children:[(0,s.jsx)(y.A,{id:"title",label:window.translate("Legacy_txt_license_title"),placeholder:window.translate("Legacy_txt_license_title_placeholder"),required:!0}),(0,s.jsx)(C.O,{id:"license",label:window.translate("Legacy_txt_license_license"),placeholder:window.translate("Legacy_txt_license_license_placeholder"),value:"",toolbar:{bold:!0,italic:!0,link:!0,color:!0}}),(0,s.jsx)(g.f,{id:"add_by_default",label:window.translate("Legacy_powerbar_menu_settings_medialibrary_licenses_by_defeault")}),(0,s.jsx)(g.f,{id:"require_consensus",label:window.translate("Legacy_powerbar_menu_settings_medialibrary_licenses_consensus_required")}),(0,s.jsx)(_.f,{id:"project_id",value:E.data.project})]}),(0,s.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer js-cm-setting__actions cm-setting__actions cm-setting__actions--flyout js-cm-setting-list__actions",children:[(0,s.jsx)(b.t,{}),(0,s.jsx)(t.b,{})]})]}))},29430:function(ve,$,r){"use strict";r.d($,{U:function(){return T}});var s=r(86070),b=r(49290),t=r(2728),_=r(29083),C=r(5944),y=r(62878),g=r(90307),m=r(14154);const T=(0,m.I)(E=>(0,s.jsxs)("form",{className:"cm-setting__details cm-setting-list__details",children:[(0,s.jsxs)("div",{className:"cm-setting__details-fields",children:[(0,s.jsx)(_.f,{id:"id",value:E.item.id}),(0,s.jsx)(y.A,{id:"title",label:window.translate("Legacy_txt_license_title"),value:E.item.title}),(0,s.jsx)(C.O,{id:"license",label:window.translate("Legacy_txt_license_license"),placeholder:window.translate("Legacy_txt_license_license_placeholder"),value:E.item.license,toolbar:{bold:!0,italic:!0,link:!0,color:!0}}),(0,s.jsx)(g.f,{id:"add_by_default",label:window.translate("Legacy_powerbar_menu_settings_medialibrary_licenses_by_defeault"),checked:E.item.add_by_default,required:!1}),(0,s.jsx)(g.f,{id:"require_consensus",label:window.translate("Legacy_powerbar_menu_settings_medialibrary_licenses_consensus_required"),checked:E.item.require_consensus})]}),(0,s.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer js-cm-setting__actions cm-setting__actions cm-setting__actions--flyout js-cm-setting-list__actions",children:[(0,s.jsx)(b.t,{}),(0,s.jsx)(t.b,{})]})]}))},5410:function(ve,$,r){"use strict";r.d($,{K:function(){return C}});var s=r(86070),b=r(46223),t=r(45924),_=r(14154);const C=(0,_.I)(y=>{var g;return y.items&&y.items.length>0?(g=y.items)==null?void 0:g.map(m=>(0,s.jsxs)("div",{className:"js-cm-setting-list__item cm-setting-list__item","data-id":m.id,role:"listitem",children:[(0,s.jsxs)("div",{className:"cm-setting-list__col cm-setting-list__col--value",children:[(0,s.jsx)("i",{className:"icon-bars cm-setting-list__move js-cm-setting-list__move cm-setting-list__icon"}),(0,s.jsx)("div",{className:"cm-setting-list__text-value",children:m.title})]}),(0,s.jsx)("button",{className:(0,b.h)(["cm-setting-list__col cm-setting-list__col--settings js-cm-setting-list__edit",t.OA]),"aria-label":"Edit",children:(0,s.jsx)("i",{className:"ca-icon--settings cm-setting-list__icon"})}),(0,s.jsx)("button",{className:(0,b.h)(["cm-setting-list__col cm-setting-list__col--settings js-cm-setting-list__remove",t.OA]),"aria-label":"Delete",children:(0,s.jsx)("i",{className:"ca-icon--trash cm-setting-list__remove cm-setting-list__icon","data-confirm":"true"})})]},m.id)):(0,s.jsx)("div",{className:"co-settings__blank cm-setting-list__blank",children:y.label_none})})},1505:function(ve,$,r){"use strict";r.d($,{T:function(){return C}});var s=r(86070),b=r(93791),t=r(78149),_=r(14154);const C=(0,_.I)(y=>{var g;return y.items&&y.items.length>0?(g=y.items)==null?void 0:g.map(m=>m.screenId?(0,s.jsx)("div",{className:"js-cm-setting-list__item cm-setting-asset-chooser-list__item","data-id":m.screenId,"data-screen-id":m.screenId,children:(0,s.jsxs)("div",{className:"cm-setting-asset-chooser-list__col cm-setting__label--inline",style:{display:"flex",alignItems:"center",width:"100%"},children:[(0,s.jsx)("span",{style:{marginRight:"12px"},children:(0,s.jsx)(t.V,{icon:"text-snippet",size:b.l.SIZE_LARGE})}),(0,s.jsx)("div",{style:{width:"100%"},children:m.screenName}),(0,s.jsx)("div",{className:"cm-setting-multivalue__setting",children:(0,s.jsx)("div",{className:"js-cm-setting-multivalue__chooser",children:(0,s.jsx)("i",{className:"ca-icon--trash cm-setting-asset-chooser-list__remove js-cm-setting-list__remove cm-setting-asset-chooser-list__icon","data-confirm":"true"})})})]})},m.screenId):null):(0,s.jsx)("div",{className:"co-settings__blank cm-setting-list__blank",children:y.label_none})})},73795:function(ve,$,r){"use strict";r.d($,{O:function(){return p}});var s=r(86070),b=r(14154),t=r(91080);const _=(0,b.I)(f=>{const O=!f.data.has_selected_targets&&f.data.disabled.length===0,L=f.data.disabled.length>0,P=f.data.targets.length+f.data.disabled.length<8?"":"two-cols";return(0,s.jsxs)(s.Fragment,{children:[f.isInBlock?(0,s.jsxs)("div",{className:"co-targetsoptions__mode_slider_label cm-setting__label cm-setting__label--space-bottom",children:[" ","Targets"," "]}):null,(0,s.jsx)("div",{className:"js-co-targetsoptions__mode_slider_wrapper co-targetsoptions__mode_slider_wrapper","data-all-viewers":O,"data-disabled":L}),(0,s.jsxs)("div",{className:`js-co-targetsoptions__targets_settings co-targetsoptions__mode_slider_results--overflow-scroll  co-targetsoptions__targets_settings${O?" state-hidden ":""}${f.borderBottom?" co-targetsoptions__targets_settings--bordered":""}`,children:[f.data.targets.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"js-co-targetsoptions__targets_select_deselect_all-wrapper"}),(0,s.jsx)(t.R,{id:"targets",name:"targets",options:f.data.targets,modifier:P,disable_label:!0,class:L?"cm-setting--borderless":!1})]}):null,L?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.R,{id:"group-targets",name:"disabled-targets",options:f.data.disabled,modifier:P,disable_label:!0,label:window.translate("Legacy_targets_unavailable_targets"),class:"cm-setting--borderless",readonly:!0}),(0,s.jsx)("div",{className:"co-settings__blank co-targetsoptions__higher-level-text",children:(0,s.jsx)("p",{children:window.translate("Legacy_targets_inherited_restriction")})})]}):null]})]})});var C=r(82110);const y=(0,b.I)(f=>{const L=f.data.disabled.length>0;return(0,s.jsxs)(s.Fragment,{children:[f.isInBlock?(0,s.jsxs)("div",{className:"co-targetsoptions__mode_slider_label cm-setting__label cm-setting__label--space-bottom",children:[" ","Targets"," "]}):null,(0,s.jsx)("div",{className:"js-co-targetsoptions__mode_slider_wrapper co-targetsoptions__mode_slider_wrapper","data-all-viewers":!0,"data-disabled":L}),(0,s.jsx)("div",{className:`js-co-targetsoptions__targets_blankslate co-targetsoptions__targets_blankslate state-hidden${f.borderBottom?" co-targetsoptions__targets_settings--bordered":""}`,children:(0,s.jsxs)("p",{children:[window.translate("Legacy_targets_chooser_no_available_targets_title"),"."," ",(0,C.Np)()?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("br",{}),(0,s.jsx)("a",{className:"ca-link",href:"/usage",title:"Usage page",children:window.translate("Legacy_targets_none_click_here")}),` ${window.translate("Legacy_targets_no_targets_define_here")}`]}):null]})})]})});var g=Object.defineProperty,m=Object.defineProperties,T=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,c=(f,O,L)=>O in f?g(f,O,{enumerable:!0,configurable:!0,writable:!0,value:L}):f[O]=L,o=(f,O)=>{for(var L in O||(O={}))w.call(O,L)&&c(f,L,O[L]);if(E)for(var L of E(O))u.call(O,L)&&c(f,L,O[L]);return f},l=(f,O)=>m(f,T(O));const p=(0,b.I)(f=>(0,s.jsx)("div",l(o({className:"mod mod-c-settings-target-options co-targetsoptions js-co-targetsoptions","data-type":f.type,"data-asset-ids":JSON.stringify(f.ids),"data-select-all-enabled":"true"},f.simulationMode?{"data-simulation-mode":"1"}:{}),{children:f.data.targets.length===0&&f.data.disabled.length===0?(0,s.jsx)(y,o({},f)):(0,s.jsx)(_,o({},f))})))},74083:function(ve,$,r){"use strict";r.d($,{S:function(){return m}});var s=r(86070),b=r(49290),t=r(2728),_=r(85131),C=r(14154),y=r(42735),g=r(35914);const m=(0,C.I)(T=>(0,s.jsxs)("form",{className:"cm-setting__details cm-setting-list__details",children:[(0,s.jsx)("div",{className:"cm-setting__details-fields",children:(0,s.jsx)(_.j,{id:"language",clear_search:!0,placeholder:"e.g. language name, ISO 639-1 code",templates:{content:"c-settingstextlibrary-setting-list-i18n-search-content",contentReact:y.M,preview:"c-settingstextlibrary-setting-list-i18n-search-item",previewReact:g.k},required:!0,previewData:{label:"",language:"",default:""},msg:"Please choose an existing language",label:window.translate("Legacy_textlibrary_settings_project_languages_language_field_label"),data:T.utils.iso.getLanguagesAsArray()})}),(0,s.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer js-cm-setting__actions cm-setting__actions cm-setting__actions--flyout js-cm-setting-list__actions",children:[(0,s.jsx)(b.t,{}),(0,s.jsx)(t.b,{})]})]}))},70524:function(ve,$,r){"use strict";r.d($,{Z:function(){return T}});var s=r(86070),b=r(49290),t=r(2728),_=r(29083),C=r(85131),y=r(14154),g=r(42735),m=r(35914);const T=(0,y.I)(E=>(0,s.jsxs)("form",{className:"cm-setting__details cm-setting-list__details",children:[(0,s.jsxs)("div",{className:"cm-setting__details-fields",children:[(0,s.jsx)(C.j,{id:"language",placeholder:"e.g. language name, ISO 639-1 code",clear_search:!0,templates:{content:"c-settingstextlibrary-setting-list-i18n-search-content",contentReact:g.M,preview:"c-settingstextlibrary-setting-list-i18n-search-item",previewReact:m.k},required:!0,previewData:{label:E.item.label,language:E.item.language,default:E.item.default},msg:"Please choose a valid language",label:window.translate("Legacy_textlibrary_settings_project_languages_language_field_label"),data:E.utils.iso.getLanguagesAsArray()}),(0,s.jsx)(_.f,{id:"id",value:E.data.project}),(0,s.jsx)(_.f,{id:"default",value:E.item.default})]}),(0,s.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer js-cm-setting__actions cm-setting__actions cm-setting__actions--flyout js-cm-setting-list__actions",children:[(0,s.jsx)(b.t,{}),(0,s.jsx)(t.b,{})]})]}))},39364:function(ve,$,r){"use strict";r.d($,{B:function(){return t}});var s=r(86070),b=r(14154);const t=(0,b.I)(_=>{var C;return _.items&&_.items.length>0?(C=_.items)==null?void 0:C.map(y=>y.language?(0,s.jsxs)("div",{className:"js-cm-setting-list__item cm-setting-list__item","data-language":y.language,children:[(0,s.jsxs)("div",{className:"cm-setting-list__col cm-setting-list__col--value",children:[y.label," - ",y.language]}),(0,s.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,s.jsx)("i",{className:"ca-icon--trash cm-setting-list__remove js-cm-setting-list__remove cm-setting-list__icon","data-confirm":"true"})})]},y.language):null):(0,s.jsx)("div",{className:"co-settings__blank cm-setting-list__blank",children:_.label_none})})},42735:function(ve,$,r){"use strict";r.d($,{M:function(){return _}});var s=r(86070),b=r(14154),t=r(35914);const _=(0,b.I)(C=>{var y;return(y=C.data)==null?void 0:y.map(g=>(0,s.jsx)(t.k,{language:g.isoCode,label:g.name},g.isoCode))})},35914:function(ve,$,r){"use strict";r.d($,{k:function(){return t}});var s=r(86070),b=r(14154);const t=(0,b.I)(_=>(0,s.jsx)("div",{className:"co-settings-textlibrary__search-item js-cm-setting-search__item","data-language":`${_.language?`${_.language}`:""}`,"data-value":`${_.language?`${_.language}`:""}`,"data-label":`${_.label?`${_.label}`:""}`,"data-default":`${_.default?`${_.default}`:""}`,children:(0,s.jsxs)("div",{className:"co-settings-textlibrary__search-item__sb-title",children:[(0,s.jsx)("span",{className:"co-settings-textlibrary__sb-name",children:_.label?_.label:null}),(0,s.jsx)("span",{className:"co-settings-textlibrary__sb-opacity",children:_.label?"":_.placeholder?_.placeholder:" e.g. language name, ISO 639-1 code "}),(0,s.jsx)("span",{className:"co-settings-textlibrary__sb-value",children:(0,s.jsx)("span",{className:"hex",children:_.language?_.language:null})})]})}))},2404:function(ve,$,r){"use strict";r.d($,{V:function(){return u}});var s=r(86070),b=r(14154),t=Object.defineProperty,_=Object.defineProperties,C=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,T=(c,o,l)=>o in c?t(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,E=(c,o)=>{for(var l in o||(o={}))g.call(o,l)&&T(c,l,o[l]);if(y)for(var l of y(o))m.call(o,l)&&T(c,l,o[l]);return c},w=(c,o)=>_(c,C(o));const u=(0,b.I)(c=>(0,s.jsxs)("div",{className:"co-settings-user__two-factor-authentication-setting",children:[(0,s.jsxs)("div",{className:"co-settings-user__two-factor-left",children:[(0,s.jsx)("div",{className:"co-settings-user__two-factor-lbl",children:window.translate("Legacy_2fa_settings_label")}),(0,s.jsx)("span",{className:"ca-badge ca-badge--grey",children:c.two_factor_secret===null?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"ca-badge__bubble",style:{backgroundColor:"rgb(250, 177, 23)"}}),(0,s.jsx)(s.Fragment,{children:window.translate("Legacy_2fa_settings_badge_deactivated")})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"ca-badge__bubble",style:{backgroundColor:"rgb(163, 206, 98)"}}),(0,s.jsx)(s.Fragment,{children:window.translate("Legacy_2fa_settings_badge_activated")})]})})]}),(0,s.jsx)("div",{className:"co-settings-user__two-factor-right",children:c.two_factor_secret===null?(0,s.jsx)("div",{className:"enable-two-factor-modal-button"}):(0,s.jsx)("button",w(E({className:" cm-btn cm-btn--default cm-btn--sm js-co-settings-user__disable-two-factor-btn"},c.two_factor_forced==!0?{disabled:!0}:{}),{children:window.translate("Legacy_2fa_settings_button_disable")}))})]}))},84975:function(ve,$,r){"use strict";r.d($,{M:function(){return N}});var s=r(86070),b=r(52939),t=r(49290),_=r(2728),C=r(62878),y=r(84090),g=r(14154),m=r(81178);const T=(0,g.I)(S=>{var R;return(0,s.jsxs)("form",{className:"js-co-settings__setting cm-setting","data-id":"email-change","data-value":S.email,"data-type":"emailchange","data-api":`/api/user/${(R=(0,m.vD)())==null?void 0:R.id}/email-change-request`,children:[(0,s.jsxs)("div",{className:"cm-setting__preview cm-setting__preview--center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"cm-setting__label",children:window.translate("UserEmailChangeRequest_fieldTitle")}),(0,s.jsx)("span",{className:"cm-setting__value",children:S.email})]}),(0,s.jsx)("div",{className:"js-cm-setting__user-email-verification-state cm-setting__user-email-verification-state"})]}),(0,s.jsxs)("div",{className:"cm-setting__details cm-setting__details--no-padding-top js-cm-setting__details",children:[(0,s.jsxs)("div",{className:"cm-setting__details-fields",children:[(0,s.jsx)(y.p,{size:"large",title:window.translate("UserEmailChangeRequest_fieldTitle"),hasNegativeMargin:!0}),(0,s.jsx)(C.A,{id:"email",label:window.translate("UserEmailChangeRequest_fieldLabel"),value:S.email,type:"email",placeholder:"e.g. hello@frontify.com",readonly:S.disabled_mail_address_change,required:!0,msg:window.translate("UserEmailChangeRequest_fieldMessage")})]}),(0,s.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer cm-setting__actions cm-setting__actions--flyout js-cm-setting__actions js-cm-setting-list__actions",children:[(0,s.jsx)(t.t,{}),(0,s.jsx)(_.b,{disabled:!0,label_submit:window.translate("UserEmailChangeRequest_fieldButtonText")})]})]})]})});var E=r(82953);const w=(0,g.I)(S=>(0,s.jsxs)("form",{className:"js-co-settings__setting cm-setting","data-id":"password-change","data-type":"password","data-api":"/api/auth/password/",children:[(0,s.jsxs)("div",{className:"cm-setting__preview",children:[(0,s.jsx)("label",{className:"cm-setting__label",children:window.translate("Legacy_label_account_password")}),(0,s.jsx)("span",{className:"cm-setting__value",children:"********"})]}),(0,s.jsx)("div",{className:"cm-setting__details cm-setting__details--no-padding-top js-cm-setting__details",children:(0,s.jsxs)("div",{className:"cm-setting__details-fields",children:[(0,s.jsx)(y.p,{size:"large",title:window.translate("Legacy_label_account_password"),hasNegativeMargin:!0}),(0,s.jsx)(C.A,{id:"password",label:window.translate("Legacy_label_account_current_password"),placeholder:"********",type:"password",required:!0,msg:"Please fill in your current password"}),(0,s.jsx)(C.A,{id:"password_new",label:window.translate("Legacy_label_account_new_password"),placeholder:"********",type:"password",required:!0,msg:"Please fill in your new password"}),S.password_policy&&S.password_policy.length>0?(0,s.jsxs)("div",{className:"cm-setting__info-policy js-cm-setting__info",children:[(0,s.jsxs)("div",{children:[window.translate("Legacy_label_password_policy_contain"),S.password_policy.password_length,window.translate("Legacy_label_password_policy_lenght")]}),(0,s.jsxs)("div",{children:[window.translate("Legacy_label_password_policy_contain"),S.password_policy.password_uppercase,window.translate("Legacy_label_password_policy_uppercase")]}),(0,s.jsxs)("div",{children:[window.translate("Legacy_label_password_policy_contain"),S.password_policy.password_numbers,window.translate("Legacy_label_password_policy_numbers")]}),(0,s.jsxs)("div",{children:[window.translate("Legacy_label_password_policy_contain"),S.password_policy.password_special,window.translate("Legacy_label_password_policy_special")]}),(0,s.jsxs)("div",{children:[window.translate("Legacy_label_password_policy_history"),S.password_policy.password_history,window.translate("Legacy_label_password_policy_history_ending")]})]}):null]})})]}));var u=r(23189),c=r(9862),o=r(2404),l=Object.defineProperty,p=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,L=(S,R,U)=>R in S?l(S,R,{enumerable:!0,configurable:!0,writable:!0,value:U}):S[R]=U,P=(S,R)=>{for(var U in R||(R={}))f.call(R,U)&&L(S,U,R[U]);if(p)for(var U of p(R))O.call(R,U)&&L(S,U,R[U]);return S};const N=(0,g.I)(S=>(0,s.jsxs)("div",{className:"mod mod-c-settings-user co-settings-user",children:[(0,s.jsx)("h2",{className:"co-powerbar__drawer-title",children:window.translate("Legacy_account_drawer_title")}),(0,s.jsxs)("fieldset",{className:"co-settings__fieldset",children:[(0,s.jsx)("legend",{className:"co-settings__fieldset-title",children:window.translate("Legacy_account_fieldset_basic_information")}),S.signup_mode!=="SAML"||S.name?(0,s.jsx)(u.t,{id:"name",api:"/api/user/update",label:window.translate("Legacy_label_account_your_name"),value:S.name,readonly:S.signup_mode==="SAML",placeholder:"e.g. Bud Spencer",required:!0,msg:"Please fill in your name",formModifier:S.signup_mode==="SAML"?"cm-setting--readonly":""}):null,S.signup_mode!=="SAML"||S.email?S.signup_mode!=="SAML"?(0,s.jsx)(T,P({},S)):(0,s.jsx)(u.t,{id:"email",label:window.translate("Legacy_label_account_your_email"),value:S.email,type:"email",readonly:!0,required:!0,msg:"Please fill in a valid email",formModifier:"cm-setting--readonly"}):null,(0,s.jsx)(u.t,{id:"role",api:"/api/user/update",label:window.translate("Legacy_label_account_your_role"),value:S.role,placeholder:"e.g. Art Director"}),(0,s.jsx)(u.t,{id:"organization",api:"/api/user/update",label:window.translate("Legacy_label_account_your_company"),value:S.organization,placeholder:"e.g. Frontify"}),S.signup_mode!=="SAML"||S.image?(0,s.jsx)(E.l,{id:"image",api:"/api/user/update",acceptOnlyImages:!0,image:S.image.image,original:S.image.original,circle:!0,area:{x:S.image.x,y:S.image.y,width:S.image.width,height:S.image.height},placeholder:"/img/avatar.png",ratio:1,label:"Profile Image",description:"Max. 2 MB, JPG, PNG, GIF",formModifier:S.signup_mode==="SAML"?"cm-setting--readonly":""}):null]}),(0,s.jsxs)("fieldset",{className:"co-settings__fieldset",children:[(0,s.jsx)("legend",{className:"co-settings__fieldset-title",children:window.translate("Legacy_account_fieldset_localization")}),(0,s.jsx)(b.x,{id:"language",api:"/api/user/update",label:window.translate("Legacy_label_account_language"),options:S.localization_options,value:S.language}),(0,s.jsx)(b.x,{id:"timezone",api:"/api/user/update",label:window.translate("Legacy_label_account_timezone"),value:S.timezone,options:["Africa/Abidjan","Africa/Accra","Africa/Addis_Ababa","Africa/Algiers","Africa/Asmara","Africa/Bamako","Africa/Bangui","Africa/Banjul","Africa/Bissau","Africa/Blantyre","Africa/Brazzaville","Africa/Bujumbura","Africa/Cairo","Africa/Casablanca","Africa/Ceuta","Africa/Conakry","Africa/Dakar","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Douala","Africa/El_Aaiun","Africa/Freetown","Africa/Gaborone","Africa/Harare","Africa/Johannesburg","Africa/Juba","Africa/Kampala","Africa/Khartoum","Africa/Kigali","Africa/Kinshasa","Africa/Lagos","Africa/Libreville","Africa/Lome","Africa/Luanda","Africa/Lubumbashi","Africa/Lusaka","Africa/Malabo","Africa/Maputo","Africa/Maseru","Africa/Mbabane","Africa/Mogadishu","Africa/Monrovia","Africa/Nairobi","Africa/Ndjamena","Africa/Niamey","Africa/Nouakchott","Africa/Ouagadougou","Africa/Porto-Novo","Africa/Sao_Tome","Africa/Tripoli","Africa/Tunis","Africa/Windhoek","America/Adak","America/Anchorage","America/Anguilla","America/Antigua","America/Araguaina","America/Argentina/Buenos_Aires","America/Argentina/Catamarca","America/Argentina/Cordoba","America/Argentina/Jujuy","America/Argentina/La_Rioja","America/Argentina/Mendoza","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Aruba","America/Asuncion","America/Atikokan","America/Bahia","America/Bahia_Banderas","America/Barbados","America/Belem","America/Belize","America/Blanc-Sablon","America/Boa_Vista","America/Bogota","America/Boise","America/Cambridge_Bay","America/Campo_Grande","America/Cancun","America/Caracas","America/Cayenne","America/Cayman","America/Chicago","America/Chihuahua","America/Ciudad_Juarez","America/Costa_Rica","America/Creston","America/Cuiaba","America/Curacao","America/Danmarkshavn","America/Dawson","America/Dawson_Creek","America/Denver","America/Detroit","America/Dominica","America/Edmonton","America/Eirunepe","America/El_Salvador","America/Fort_Nelson","America/Fortaleza","America/Glace_Bay","America/Goose_Bay","America/Grand_Turk","America/Grenada","America/Guadeloupe","America/Guatemala","America/Guayaquil","America/Guyana","America/Halifax","America/Havana","America/Hermosillo","America/Indiana/Indianapolis","America/Indiana/Knox","America/Indiana/Marengo","America/Indiana/Petersburg","America/Indiana/Tell_City","America/Indiana/Vevay","America/Indiana/Vincennes","America/Indiana/Winamac","America/Inuvik","America/Iqaluit","America/Jamaica","America/Juneau","America/Kentucky/Louisville","America/Kentucky/Monticello","America/Kralendijk","America/La_Paz","America/Lima","America/Los_Angeles","America/Lower_Princes","America/Maceio","America/Managua","America/Manaus","America/Marigot","America/Martinique","America/Matamoros","America/Mazatlan","America/Menominee","America/Merida","America/Metlakatla","America/Mexico_City","America/Miquelon","America/Moncton","America/Monterrey","America/Montevideo","America/Montserrat","America/Nassau","America/New_York","America/Nome","America/Noronha","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Nuuk","America/Ojinaga","America/Panama","America/Paramaribo","America/Phoenix","America/Port-au-Prince","America/Port_of_Spain","America/Porto_Velho","America/Puerto_Rico","America/Punta_Arenas","America/Rankin_Inlet","America/Recife","America/Regina","America/Resolute","America/Rio_Branco","America/Santarem","America/Santiago","America/Santo_Domingo","America/Sao_Paulo","America/Scoresbysund","America/Sitka","America/St_Barthelemy","America/St_Johns","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Swift_Current","America/Tegucigalpa","America/Thule","America/Tijuana","America/Toronto","America/Tortola","America/Vancouver","America/Whitehorse","America/Winnipeg","America/Yakutat","America/Yellowknife","Antarctica/Casey","Antarctica/Davis","Antarctica/DumontDUrville","Antarctica/Macquarie","Antarctica/Mawson","Antarctica/McMurdo","Antarctica/Palmer","Antarctica/Rothera","Antarctica/Syowa","Antarctica/Troll","Antarctica/Vostok","Arctic/Longyearbyen","Asia/Aden","Asia/Almaty","Asia/Amman","Asia/Anadyr","Asia/Aqtau","Asia/Aqtobe","Asia/Ashgabat","Asia/Atyrau","Asia/Baghdad","Asia/Bahrain","Asia/Baku","Asia/Bangkok","Asia/Barnaul","Asia/Beirut","Asia/Bishkek","Asia/Brunei","Asia/Chita","Asia/Choibalsan","Asia/Colombo","Asia/Damascus","Asia/Dhaka","Asia/Dili","Asia/Dubai","Asia/Dushanbe","Asia/Famagusta","Asia/Gaza","Asia/Hebron","Asia/Ho_Chi_Minh","Asia/Hong_Kong","Asia/Hovd","Asia/Irkutsk","Asia/Jakarta","Asia/Jayapura","Asia/Jerusalem","Asia/Kabul","Asia/Kamchatka","Asia/Karachi","Asia/Kathmandu","Asia/Khandyga","Asia/Kolkata","Asia/Krasnoyarsk","Asia/Kuala_Lumpur","Asia/Kuching","Asia/Kuwait","Asia/Macau","Asia/Magadan","Asia/Makassar","Asia/Manila","Asia/Muscat","Asia/Nicosia","Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Omsk","Asia/Oral","Asia/Phnom_Penh","Asia/Pontianak","Asia/Pyongyang","Asia/Qatar","Asia/Qostanay","Asia/Qyzylorda","Asia/Riyadh","Asia/Sakhalin","Asia/Samarkand","Asia/Seoul","Asia/Shanghai","Asia/Singapore","Asia/Srednekolymsk","Asia/Taipei","Asia/Tashkent","Asia/Tbilisi","Asia/Tehran","Asia/Thimphu","Asia/Tokyo","Asia/Tomsk","Asia/Ulaanbaatar","Asia/Urumqi","Asia/Ust-Nera","Asia/Vientiane","Asia/Vladivostok","Asia/Yakutsk","Asia/Yangon","Asia/Yekaterinburg","Asia/Yerevan","Atlantic/Azores","Atlantic/Bermuda","Atlantic/Canary","Atlantic/Cape_Verde","Atlantic/Faroe","Atlantic/Madeira","Atlantic/Reykjavik","Atlantic/South_Georgia","Atlantic/St_Helena","Atlantic/Stanley","Australia/Adelaide","Australia/Brisbane","Australia/Broken_Hill","Australia/Darwin","Australia/Eucla","Australia/Hobart","Australia/Lindeman","Australia/Lord_Howe","Australia/Melbourne","Australia/Perth","Australia/Sydney","Europe/Amsterdam","Europe/Andorra","Europe/Astrakhan","Europe/Athens","Europe/Belgrade","Europe/Berlin","Europe/Bratislava","Europe/Brussels","Europe/Bucharest","Europe/Budapest","Europe/Busingen","Europe/Chisinau","Europe/Copenhagen","Europe/Dublin","Europe/Gibraltar","Europe/Guernsey","Europe/Helsinki","Europe/Isle_of_Man","Europe/Istanbul","Europe/Jersey","Europe/Kaliningrad","Europe/Kirov","Europe/Kyiv","Europe/Lisbon","Europe/Ljubljana","Europe/London","Europe/Luxembourg","Europe/Madrid","Europe/Malta","Europe/Mariehamn","Europe/Minsk","Europe/Monaco","Europe/Moscow","Europe/Oslo","Europe/Paris","Europe/Podgorica","Europe/Prague","Europe/Riga","Europe/Rome","Europe/Samara","Europe/San_Marino","Europe/Sarajevo","Europe/Saratov","Europe/Simferopol","Europe/Skopje","Europe/Sofia","Europe/Stockholm","Europe/Tallinn","Europe/Tirane","Europe/Ulyanovsk","Europe/Vaduz","Europe/Vatican","Europe/Vienna","Europe/Vilnius","Europe/Volgograd","Europe/Warsaw","Europe/Zagreb","Europe/Zurich","Indian/Antananarivo","Indian/Chagos","Indian/Christmas","Indian/Cocos","Indian/Comoro","Indian/Kerguelen","Indian/Mahe","Indian/Maldives","Indian/Mauritius","Indian/Mayotte","Indian/Reunion","Pacific/Apia","Pacific/Auckland","Pacific/Bougainville","Pacific/Chatham","Pacific/Chuuk","Pacific/Easter","Pacific/Efate","Pacific/Fakaofo","Pacific/Fiji","Pacific/Funafuti","Pacific/Galapagos","Pacific/Gambier","Pacific/Guadalcanal","Pacific/Guam","Pacific/Honolulu","Pacific/Kanton","Pacific/Kiritimati","Pacific/Kosrae","Pacific/Kwajalein","Pacific/Majuro","Pacific/Marquesas","Pacific/Midway","Pacific/Nauru","Pacific/Niue","Pacific/Norfolk","Pacific/Noumea","Pacific/Pago_Pago","Pacific/Palau","Pacific/Pitcairn","Pacific/Pohnpei","Pacific/Port_Moresby","Pacific/Rarotonga","Pacific/Saipan","Pacific/Tahiti","Pacific/Tarawa","Pacific/Tongatapu","Pacific/Wake","Pacific/Wallis","UTC"].map(R=>({value:R,name:R}))})]}),S.last_login_mode==="SIMPLE"?(0,s.jsxs)("fieldset",{className:"co-settings__fieldset",children:[(0,s.jsx)("legend",{className:"co-settings__fieldset-title",children:window.translate("Legacy_account_fieldset_security")}),(0,s.jsx)(w,P({},S)),S.utils.account.hasFeature("TWO_FACTOR_AUTHENTICATION")?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"js-co-settings-user__two-factor-container",children:(0,s.jsx)(o.V,{two_factor_secret:S.two_factor_secret,two_factor_forced:S.two_factor_forced})}),S.two_factor_secret!==null?(0,s.jsx)("div",{className:"regenerate-backup-codes-container"}):null]}):null]}):null,(0,c.R)("DEVELOPER_MODE_SWITCH")?(0,s.jsxs)("fieldset",{className:"co-settings__fieldset",children:[(0,s.jsx)("legend",{className:"co-settings__fieldset-title",children:window.translate("User_account_fieldset_development")}),(0,s.jsx)("div",{className:"js-co-settings-user__development-container"})]}):null]}))},46165:function(ve,$,r){"use strict";r.d($,{P:function(){return f}});var s=r(93791),b=r(50427),t=r(18216),_=r(86070),C=r(14154),y=Object.defineProperty,g=Object.defineProperties,m=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,u=(O,L,P)=>L in O?y(O,L,{enumerable:!0,configurable:!0,writable:!0,value:P}):O[L]=P,c=(O,L)=>{for(var P in L||(L={}))E.call(L,P)&&u(O,P,L[P]);if(T)for(var P of T(L))w.call(L,P)&&u(O,P,L[P]);return O},o=(O,L)=>g(O,m(L));const l=(0,C.I)(O=>(0,_.jsxs)("nav",{className:`cm-btn-bar__group co-stepper__nav js-co-stepper__nav state-over ${O.theme?`co-stepper__nav--${O.theme}`:""}`,children:[(0,_.jsx)("button",o(c({className:`cm-btn cm-btn--sm co-stepper__control co-stepper__control-prev js-co-stepper__prev ${O.theme?`co-stepper__control--${O.theme}`:""}`,"data-step-direction":"prev"},O.prevStepDisabled?{disabled:!0}:{}),{children:(0,_.jsx)("i",{className:`${O.prevStepIcon} ca-icon--sm`})})),(0,_.jsxs)("button",{className:`cm-btn cm-btn--sm co-stepper__count js-co-stepper__count ${O.theme?`co-stepper__count--${O.theme}`:""}`,children:[O.hasStepInput?(0,_.jsx)("input",o(c({className:"co-stepper__count-input js-co-stepper__count-input",type:"number",value:O.currentStep},O.totalSteps?{max:O.totalSteps}:{}),{min:"1"})):(0,_.jsx)("span",{className:"js-co-stepper__current-step",children:O.currentStep}),O.totalSteps?(0,_.jsxs)(_.Fragment,{children:[" "," / ",(0,_.jsx)("span",{className:"js-co-stepper__total-steps",children:O.totalSteps})]}):null]}),(0,_.jsx)("button",o(c({className:`cm-btn cm-btn--sm co-stepper__control co-stepper__control-next js-co-stepper__next ${O.theme?`co-stepper__control--${O.theme}`:""}`,"data-step-direction":"next"},O.nextStepDisabled?{disabled:!0}:{}),{children:(0,_.jsx)("i",{className:`${O.nextStepIcon} ca-icon--sm`})}))]}));var p=r(5181);class f extends t.j{static get ENTER_KEY_CODE(){return 13}static get THEMES(){return[f.THEME_DARK,f.THEME_LIGHT]}static get THEME_DARK(){return"dark"}static get THEME_LIGHT(){return"light"}static get PREVIOUS_STEP_ICON_DEFAULT(){return s.l.ICON_CARET_LEFT}static get PREVIOUS_STEP_ICONS(){return[s.l.ICON_CARET_LEFT,s.l.ICON_CARET_UP]}static get NEXT_STEP_ICON_DEFAULT(){return s.l.ICON_CARET_RIGHT}static get NEXT_STEP_ICONS(){return[s.l.ICON_CARET_RIGHT,s.l.ICON_CARET_DOWN]}on(L){this.sandbox.subscribe("events",this),this.theme=this.$ctx.dataAsString("theme"),this.currentStep=this.$ctx.dataAsNumber("currentStep"),this.totalSteps=this.$ctx.dataAsNumber("totalSteps"),this.hasStepInput=this.$ctx.dataAsBoolean("hasStepInput"),this.hideStepper=this.$ctx.dataAsBoolean("hideStepper"),this.prevStepIcon=this.$ctx.dataAsString("prevStepIcon"),this.nextStepIcon=this.$ctx.dataAsString("nextStepIcon"),this.$stepperDetails=this.$ctx.find(".js-co-stepper__details"),this.renderStepper(),this.toggleStepper(this.hideStepper),this.$stepInput=this.$ctx.find(".js-co-stepper__count-input"),this.bindAttributes(),this.bindStepClick(),this.bindStepInput(),L()}bindAttributes(){this.tpl.bindDataAttributes(this,{currentStep:{type:Number,changed:L=>this.renderStepper(L.currentValue)},totalSteps:{type:Number,changed:L=>this.renderStepper(L.currentValue)},hasStepInput:{type:Boolean,changed:L=>this.renderStepper(L.currentValue)},hideStepper:{type:Boolean,changed:L=>this.toggleStepper(L.currentValue)}})}bindStepClick(){this.$ctx.on("click",".js-co-stepper__prev, .js-co-stepper__next",L=>{L.preventDefault(),L.stopPropagation();const P=p(L.currentTarget).data("stepDirection");L.currentTarget.disabled!==!0&&this.handleStepClick(P)})}bindStepInput(){this.$stepInput.on("blur",L=>{this.handleStepInput(L.currentTarget.value)}),this.$stepInput.on("keypress",L=>{L.keyCode===f.ENTER_KEY_CODE&&this.handleStepInput(L.currentTarget.value)})}handleStepClick(L){L==="prev"&&this.currentStep>1?this.currentStep--:L==="next"&&this.currentStep<this.totalSteps&&this.currentStep++,this.renderStepper(),this.tpl.fireCustomEvent(this,"stepperStepClicked",{stepDirection:L,currentStep:this.currentStep})}handleStepInput(L){this.currentStep=this.formatInput(L),this.renderStepper(),this.tpl.fireCustomEvent(this,"stepperStepInputFilled",{stepInput:this.currentStep})}renderStepper(){this.$stepperDetails.html((0,b.EY)(l,{theme:this.theme,currentStep:this.currentStep,totalSteps:this.totalSteps,hasStepInput:this.hasStepInput,prevStepDisabled:this.currentStep<=1,nextStepDisabled:this.currentStep>=this.totalSteps,prevStepIcon:this.prevStepIcon,nextStepIcon:this.nextStepIcon}))}toggleStepper(L){L?this.$stepperDetails.hide():this.$stepperDetails.fadeIn()}formatInput(L){if(L=parseInt(L),!isNaN(L))return this.totalSteps&&L>this.totalSteps?this.totalSteps:L<1?1:L}}},89597:function(ve,$,r){"use strict";r.d($,{F:function(){return t}});var s=r(86070),b=r(14154);const t=(0,b.I)(()=>(0,s.jsx)("div",{className:"co-swal__background",children:(0,s.jsxs)("svg",{width:"267",height:"706",viewBox:"0 0 267 706",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("mask",{id:"mask0","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"-408",y:"-51",width:"675",height:"788",children:(0,s.jsx)("path",{d:"M-396.622 516.112L-93.7459 341.174C-86.7308 337.14 -82.3464 329.599 -82.3464 321.531V-28.2586C-82.3464 -45.7963 -63.4056 -56.6697 -48.2355 -47.9008L254.641 -28.2586C261.656 -24.2249 266.041 -11.4748 266.041 -3.40749V523.829C266.041 531.195 262.095 538.034 255.693 541.805L-82.3464 737L-396.622 555.572C-411.793 546.716 -411.793 524.794 -396.622 516.112Z",fill:"#E1D4BE"})}),(0,s.jsxs)("g",{mask:"url(#mask0)",children:[(0,s.jsx)("rect",{width:"813.166",height:"906.716",transform:"matrix(-1 0 0 1 306.819 -44)",fill:"#825FFF"}),(0,s.jsx)("rect",{x:"-1266",y:"-600",width:"2390",height:"1668",fill:"#FAFAFA"}),(0,s.jsx)("mask",{id:"mask1","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"-1266",y:"-600",width:"2390",height:"1668",children:(0,s.jsx)("rect",{x:"-1266",y:"-600",width:"2390",height:"1668",fill:"white"})}),(0,s.jsxs)("g",{mask:"url(#mask1)",children:[(0,s.jsx)("path",{d:"M139 -199.2L146.8 -182L152 -156.8L144.1 -135.8L130.3 -126.1L115.7 -120.2L109.1 -121.9L82.3998 -127.9L65.3998 -104.9L55.2998 -91.5004L79.3998 -73.0004L103 -54.2004L127.8 -36.9004L150.9 -17.4004L174.3 1.69962L197.9 17.5996L225.6 -16.5004L221 -29.6004L210.2 -46.6004L221.5 -76.3004L233.4 -90.2004L248.5 -95.8004L265.3 -92.1004L281 -88.2004L311.1 -123.7L284 -140.4L262.2 -161.6L237.5 -179L202.4 -208.3L166 -234.9L137.6 -199.1L139 -199.2Z",fill:"#825FFF"}),(0,s.jsx)("path",{d:"M154.6 115.4L145 154.3L133.8 193.4L164.1 195.7L184.7 188.1L207.1 179.1L231.7 151.9L237.4 135.4L243.3 123.8L240.9 81.9004L201.4 26.7004L175.1 15.2004L166.2 54.2004L157.3 91.7004L155.9 60.5004L147.6 48.2004L141.9 33.4004L118.5 11.4004L86.1997 -4.59961L80.8998 25.8004L75.0997 55.4004L68.8998 84.9004L62.8998 114.6L55.4998 143.8L50.2998 173.5L81.5997 174.1L138 144.8L154.6 115.4Z",fill:"#825FFF"}),(0,s.jsx)("path",{d:"M-9.00037 436.8L-23.8004 399.6L-37.2003 361.2L-63.3004 376.9L-75.7003 395L-88.7003 415.3L-92.9004 451.8L-88.1003 468.5L-86.2003 481.4L-60.0004 514.1L4.19958 536.3L32.2997 530.4L16.8997 493.4L2.49963 457.7L21.6996 482.4L35.6996 487.6L48.7997 496.3L80.6996 500.7L116.3 495L103 467.2L90.4996 439.7L78.4996 412L66.2997 384.4L55.2997 356.2L42.2997 329.1L16.4996 346.7L-12.5004 403.2L-9.00037 436.8Z",fill:"#825FFF"}),(0,s.jsx)("path",{d:"M314.4 170.6L299.6 133.4L286.2 95.0004L260.1 110.7L247.7 128.8L234.7 149.1L230.5 185.5L235.3 202.3L237.2 215.2L263.4 247.9L327.6 270L355.8 264.2L340.3 227.2L325.9 191.5L345.1 216.2L359.1 221.4L372.2 230.1L404.1 234.5L439.7 228.8L426.4 201L413.9 173.5L401.9 145.8L389.7 118.2L378.7 90.0004L365.7 62.9004L339.9 80.5004L310.9 137L314.4 170.6Z",fill:"#825FFF"}),(0,s.jsx)("path",{d:"M91.8998 611.7L53.2998 601L14.5997 588.6L11.2998 618.8L18.2998 639.6L26.5997 662.2L53.0997 687.7L69.3998 693.9L80.7998 700.2L122.7 699.1L179.1 661.3L191.4 635.3L152.7 625.3L115.5 615.2L146.8 614.8L159.3 606.8L174.3 601.6L197 578.8L213.9 547.1L183.7 540.9L154.3 534.2L125 527L95.4998 520.1L66.4998 511.8L36.9998 505.8L35.4998 537L62.9998 594.2L91.8998 611.7Z",fill:"#825FFF"}),(0,s.jsx)("path",{d:"M369.4 -94.3998L363.7 -76.4998L350.6 -54.1998L330.7 -43.9998L313.9 -45.9998L299.2 -51.3998L295.4 -57.0998L279.6 -79.3998L251.6 -73.7998L235.1 -70.4998L240.6 -40.6998L245.6 -10.8998L252.4 18.5002L256.5 48.5002L261 78.3002L267.9 106L311.3 99.2002L316.7 86.4002L320.1 66.6002L348.3 52.1002L366.5 49.7002L381.4 55.7002L391.4 69.7002L400.5 83.1002L446.6 77.0002L437.7 46.3002L435.7 16.0002L429.1 -13.4998L422.5 -58.6998L413.4 -102.8L368.3 -95.2998L369.4 -94.3998Z",fill:"#825FFF"}),(0,s.jsx)("path",{d:"M139.7 408.8L156.2 399.6L181 392.4L202.5 398.5L213.3 411.5L220.4 425.4L219.3 432.2L215.5 459.3L239.8 474.4L254 483.3L270.4 457.8L287.2 432.6L302.4 406.6L319.9 381.9L337 357L351 332.2L314.6 307.4L301.9 313L285.9 325.2L255.4 316.4L240.5 305.7L233.7 291.1L236 274.1L238.6 258.1L200.8 231L186.3 259.5L167 282.9L151.7 308.9L125.5 346.4L101.9 384.8L140 410.2L139.7 408.8Z",fill:"#825FFF"}),(0,s.jsx)("path",{d:"M243.3 584.8L252.3 601.3L259.2 626.2L252.8 647.6L239.8 658.3L225.7 665.2L219 664.1L192 660L176.6 684.1L167.6 698.3L192.9 714.9L217.8 732L243.7 747.4L268.2 765.2L292.9 782.6L317.6 796.8L342.8 760.7L337.3 748L325.3 731.9L334.4 701.4L345.2 686.7L359.9 680L376.9 682.5L392.9 685.3L420.4 647.7L392.1 632.9L368.8 613.4L343 597.8L305.8 571.2L267.6 547.2L241.8 585L243.3 584.8Z",fill:"#825FFF"}),(0,s.jsx)("path",{d:"M-73.3997 102.2L-51.9996 88.0004L-33.2997 69.9004L-39.8997 95.0004L-47.2997 121L-22.7997 125.3L-14.9996 101.4L-9.09961 75.1003L2.50037 99.5004L10.2003 124.5L33.0004 115.2L23.7003 91.0004L14.5004 67.3004L35.3004 82.0004L57.5004 94.0004L58.9004 94.2004L70.1003 74.0004L49.1003 60.3004L27.7003 45.7004L53.5004 43.3004L80.5004 43.1003L78.9004 16.4004L51.8004 17.6003L25.5004 20.8004L45.1003 3.00037L68.7003 -12.3997L50.1003 -30.6996L30.5004 -14.6996L11.1003 -1.49963L21.9004 -47.1996L-1.99963 -56.5996L-8.99963 -30.3997L-13.6996 -11.1996L-14.2997 -7.19965L-14.1996 -7.69965L-15.9996 -12.7996C-17.9996 -18.5996 -22.1996 -23.1996 -24.1996 -29.0996C-25.1996 -32.2996 -25.9996 -35.4996 -27.0996 -38.6996C-28.1996 -41.8996 -29.9996 -44.6996 -31.4996 -47.6996C-31.8996 -48.4996 -31.6996 -52.3996 -32.0996 -53.1996C-32.8996 -54.6996 -34.4996 -53.2997 -35.5996 -52.8997C-38.5996 -51.8997 -41.6996 -50.7996 -44.6996 -49.7996C-49.2996 -48.1996 -53.8996 -46.5996 -58.4996 -44.9996L-46.6996 -19.9996L-40.5996 -2.39966L-38.9996 2.30035L-42.5996 1.90039L-48.4996 -1.39966L-65.3997 -14.4996L-75.2997 -18.2996L-82.1996 -24.1996L-93.0996 -2.99963L-72.5996 11.1003L-48.2997 25.9004L-76.6996 28.7004L-104.6 27.0004L-101.7 55.1003L-73.6996 48.5004L-62.1996 49.9004L-52.3997 49.4004L-70.0996 65.8004L-88.2997 83.6003L-73.3997 102.2Z",fill:"#825FFF"}),(0,s.jsx)("path",{d:"M-13.0996 276.7L12.5004 277.7L38.3004 273.9L18.3004 290.4L-2.89966 307.2L14.5004 324.9L34.8004 310.1L54.9004 292.1L50.1003 318.7L41.8004 343.6L65.8004 349.4L72.3004 324.3L78.7003 299.7L87.0004 323.8L98.1003 346.5L99.1003 347.5L120 337.7L110.9 314.3L102 290L124.3 303.1L146.4 318.7L160.7 296.1L138 281.3L114.8 268.6L141.1 265.6L169.2 266.8L164.8 241.1L139.5 242.7L116.1 242.1L151.5 211.2L137.6 189.6L116.6 206.8L101.6 219.6L98.7003 222.5L99.0004 222.1L100.5 216.9C102.2 211 101.5 204.8 103.4 198.9C104.4 195.7 105.7 192.6 106.6 189.4C107.6 186.1 107.7 182.8 108.3 179.5C108.5 178.6 110.9 175.5 111 174.7C111.3 173 109.1 173.2 108 172.9C104.9 172 101.8 171.1 98.7003 170.1C94.0003 168.7 89.4003 167.3 84.7003 165.9L79.8004 193.1L74.6003 211L73.1003 215.7L70.4004 213.3L67.5004 207.2L61.4004 186.7L55.6003 177.9L53.4004 169.1L32.1003 180L40.5004 203.4L51.6003 229.6L26.9004 215.3L5.20032 197.7L-8.79968 222.3L17.7003 233.3L26.2003 241.2L34.4004 246.5L10.5004 249.5L-14.5996 253.3L-13.0996 276.7Z",fill:"#825FFF"}),(0,s.jsx)("path",{d:"M258.3 516.3L283.9 517.3L309.7 513.5L289.7 530L268.5 546.8L285.9 564.5L306.2 549.7L326.3 531.7L321.5 558.3L313.2 583.2L337.2 589L343.7 563.9L350.1 539.3L358.4 563.4L369.5 586.1L370.5 587.1L391.4 577.3L382.3 553.9L373.4 529.6L395.7 542.7L417.8 558.3L432.1 535.7L409.4 520.9L386 508L412.3 505L440.4 506.2L436 480.5L410.7 482.1L387.3 481.5L422.7 450.6L408.8 429L387.8 446.2L372.8 459L369.9 461.9L370.2 461.5L371.7 456.3C373.4 450.4 372.7 444.2 374.6 438.3C375.6 435.1 376.9 432 377.8 428.8C378.8 425.5 378.9 422.2 379.5 418.9C379.7 418 382.1 414.9 382.2 414.1C382.5 412.4 380.3 412.6 379.2 412.3C376.1 411.4 373 410.5 369.9 409.5C365.2 408.1 360.6 406.7 355.9 405.3L351 432.5L345.8 450.4L344.3 455.1L341.6 452.7L338.7 446.6L332.6 426.1L326.8 417.3L324.6 408.5L303.3 419.4L311.7 442.8L322.8 469L298.1 454.7L276.4 437.1L262.4 461.7L288.9 472.7L297.4 480.6L305.6 485.9L281.7 488.9L256.6 492.7L258.3 516.3Z",fill:"#825FFF"}),(0,s.jsx)("path",{d:"M60.6996 870.9L74.4996 858L88.9996 836.7L89.7997 814.3L80.8997 800L69.7997 789L62.9996 787.9L36.0996 783.2L29.1996 755.4L25.0996 739.1L54.4996 731.4L83.4996 723.2L113 716.8L141.9 707.8L170.8 699.2L198.8 693.6L211.1 735.8L201.8 746.1L185.3 757.6L184.3 789.3L189.8 806.8L201.6 817.8L218.6 820.8L234.6 823.3L248.6 867.7L217.1 872.7L188.8 883.7L159.3 890.3L115.7 903.7L71.7997 914.2L59.3997 870.2L60.6996 870.9Z",fill:"#825FFF"}),(0,s.jsx)("path",{d:"M-25.2998 732.7L-43.8998 715L-59.0997 693.9L-56.9998 719.8L-54.2998 746.7L-79.0997 746.6L-82.5997 721.7L-83.6997 694.7L-99.3998 716.7L-111.4 740L-132.3 726.8L-118.9 704.7L-105.7 683L-128.7 693.9L-152.7 701.8H-154.1L-161.6 680L-138.5 670.2L-114.8 659.7L-139.8 652.8L-166.3 647.8L-160.1 621.8L-133.7 627.8L-108.4 635.6L-124.6 614.6L-145.1 595.3L-123.6 580.6L-107.2 599.8L-90.3998 616.2L-92.9998 569.3L-67.7998 564.3L-65.4998 591.4L-64.1997 611.1L-64.2998 615.2V614.7L-61.5997 610C-58.5997 604.6 -53.6997 600.8 -50.6997 595.4C-49.0997 592.5 -47.7997 589.4 -46.1997 586.5C-44.4997 583.5 -42.2998 581.1 -40.2998 578.4C-39.7998 577.6 -39.1997 573.8 -38.6997 573.1C-37.6997 571.8 -36.2998 573.4 -35.2998 574C-32.4998 575.6 -29.6998 577.1 -26.8998 578.7C-22.5998 581.1 -18.3997 583.5 -14.0997 585.8L-30.1997 608.3L-39.2998 624.5L-41.6997 628.9L-38.0997 629.1L-31.6997 626.9L-12.7998 616.9L-2.39978 614.9L5.50024 610.3L12.5002 633.1L-10.1997 643.4L-36.6997 653.7L-9.2998 661.4L18.4003 664.7L10.5002 691.9L-15.8998 680.5L-27.4998 679.9L-36.9998 677.7L-22.4998 696.9L-7.69971 717.6L-25.2998 732.7Z",fill:"#825FFF"})]})]})]})}))},76279:function(ve,$,r){"use strict";r.d($,{D:function(){return _}});var s=r(86070),b=r(46223),t=r(14154);const _=(0,t.I)(C=>(0,s.jsx)("div",{className:(0,b.h)(["co-swal__banner",C.type==="success"?" co-swal__banner--success ":"",C.type==="info"?" co-swal__banner--info ":"",C.type==="warning"?"co-swal__banner--warning":"",C.type==="error"||C.type==="limit"?"co-swal__banner--error":""]),children:C.type==="limit"?(0,s.jsx)("img",{className:"co-swal__banner-image",src:"/img/swal/limit-reached.png"}):C.type==="success"?(0,s.jsx)("img",{className:"co-swal__banner-icon",src:"/img/swal/success.svg"}):C.type==="warning"?(0,s.jsx)("img",{className:"co-swal__banner-icon",src:"/img/swal/warning.svg"}):null}))},2231:function(ve,$,r){"use strict";r.d($,{D:function(){return t}});var s=r(86070),b=r(14154);const t=(0,b.I)(_=>{var C;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"co-swal__text",children:_.error_message}),(0,s.jsx)("ul",{className:"co-swal__list",children:(C=_.reference_list)==null?void 0:C.map((y,g)=>(0,s.jsx)("li",{className:"co-swal__list-item",children:(0,s.jsxs)("a",{href:y.url,target:"_blank",className:"co-swal__link",children:[y.url_title,(0,s.jsx)("i",{className:"icon-external-link"})]})},g))})]})})},78114:function(ve,$,r){"use strict";r.d($,{y:function(){return g}});var s=r(86070),b=r(49290),t=r(2728),_=r(87349),C=r(14154),y=r(89597);const g=(0,C.I)(m=>(0,s.jsxs)("div",{className:`co-swal__container co-swal__container--${m.type}`,children:[(0,s.jsx)(y.F,{}),(0,s.jsxs)("div",{className:"c-swal__workflow-modal-container co-swal__content",children:[(0,s.jsx)("h3",{className:"ca-h2",children:window.translate("Legacy_workflow_modal_set_message_title")}),(0,s.jsx)("p",{className:"ca-p",children:window.translate("Legacy_workflow_modal_set_message_description")}),(0,s.jsxs)("form",{className:"co-settings js-c-swal__workflow-settings-container",children:[(0,s.jsx)(_.D,{id:"message",label:window.translate("Legacy_workflow_modal_set_message_message_label"),required:!0,placeholder:window.translate("Legacy_workflow_modal_set_message_message_placeholder")}),(0,s.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--right js-cm-setting__actions co-swal__actions",children:[m.hideCancelButton?null:(0,s.jsx)(b.t,{}),(0,s.jsx)(t.b,{label_submit:window.translate("Legacy_btn_save")})]})]})]})]}))},94600:function(ve,$,r){"use strict";r.d($,{Y:function(){return g}});var s=r(86070),b=r(49290),t=r(2728),_=r(59240),C=r(14154),y=r(89597);const g=(0,C.I)(m=>(0,s.jsxs)("div",{className:"co-swal__container co-swal__container--info",children:[(0,s.jsx)(y.F,{}),(0,s.jsxs)("div",{className:"c-swal__workflow-modal-container co-swal__content",children:[(0,s.jsx)("h3",{className:"ca-h2",children:window.translate("Legacy_workflow_modal_set_assignee_title")}),(0,s.jsx)("p",{className:"ca-p",children:window.translate("Legacy_workflow_modal_set_assignee_description")}),(0,s.jsxs)("form",{className:"co-settings js-c-swal__workflow-settings-container",children:[(0,s.jsx)(_.U,{id:"assignee",label:window.translate("Legacy_workflow_modal_set_assignee_assignee_label"),expand:!0,template:"c-dropdown-assignee",options:m.collaborators}),(0,s.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--right js-cm-setting__actions co-swal__actions",children:[m.hideCancelButton?null:(0,s.jsx)(b.t,{}),(0,s.jsx)(t.b,{label_submit:window.translate("Legacy_btn_save")})]})]})]})]}))},97467:function(ve,$,r){"use strict";r.d($,{H:function(){return R}});var s=r(42505),b=r.n(s),t=r(50427),_=r(18216),C=r(86070),y=r(93277),g=r(47929),m=r(14154);const T=(0,m.I)(U=>(0,C.jsx)("div",{className:`${R.ELEMENT_FOOTER} ${R.ELEMENT_FOOTER_JS}`,children:(0,C.jsx)(g.I,{buttons:[{identifier:"cancel",label:window.translate("Legacy_table_data_chooser_cancel"),style:y.Q.STYLE_SECONDARY},{identifier:"select",label:window.translate("Legacy_table_data_chooser_select"),style:y.Q.STYLE_PRIMARY,isDisabled:U.selectButtonIsDisabled}],size:y.Q.SIZE_LARGE,background:y.Q.BACKGROUND_BLACK_05})}));var E=Object.defineProperty,w=Object.defineProperties,u=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,p=(U,B,M)=>B in U?E(U,B,{enumerable:!0,configurable:!0,writable:!0,value:M}):U[B]=M,f=(U,B)=>{for(var M in B||(B={}))o.call(B,M)&&p(U,M,B[M]);if(c)for(var M of c(B))l.call(B,M)&&p(U,M,B[M]);return U},O=(U,B)=>w(U,u(B));const L=(0,m.I)(U=>(0,C.jsxs)("div",O(f({className:"mod mod-c-search-filter-bar co-searchfilterbar"},U.tpl.renderDataAttributesAsObject(U)),{children:[(0,C.jsx)("div",{className:"co-searchfilterbar__search-container js-co-searchfilterbar__search-container"}),(0,C.jsx)("div",{className:"co-searchfilterbar__filters-container js-co-searchfilterbar__filters-container"}),(0,C.jsx)("div",{className:"co-searchfilterbar__clear-button-container js-co-searchfilterbar__clear-button-container"})]}))),P=(0,m.I)(U=>(0,C.jsx)("div",{className:`${R.ELEMENT_HEADER} ${R.ELEMENT_HEADER_JS}`,children:(0,C.jsxs)("div",{className:`${R.ELEMENT_HEADER}-title-section`,children:[(0,C.jsx)("span",{className:`${R.ELEMENT_HEADER}-description`,children:window.translate("Legacy_table_data_chooser_select_row_from")}),(0,C.jsxs)("span",{className:`${R.ELEMENT_HEADER}-title`,children:[U.title,(0,C.jsx)("span",{}),(0,C.jsx)("div",{className:`${R.ELEMENT_HEADER}-search`,children:(0,C.jsx)(L,{})})]})]})})),N=(0,m.I)(U=>{var B,M;return(0,C.jsx)("table",{className:`${R.ELEMENT_TABLE} ${R.ELEMENT_TABLE_JS}`,children:U.content?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("thead",{className:`${R.ELEMENT_TABLE}-head`,children:(0,C.jsx)("tr",{className:`${R.ELEMENT_TABLE}-head-row`,children:(B=U.headers)==null?void 0:B.map((I,F)=>(0,C.jsx)("th",{className:`${R.ELEMENT_TABLE}-head-field`,children:I.name},F))})}),(0,C.jsx)("tbody",{className:`${R.ELEMENT_TABLE}-body ${R.ELEMENT_TABLE_JS}-body `,children:(M=U.content)==null?void 0:M.map((I,F)=>{var te;return(0,C.jsx)("tr",{className:`${R.ELEMENT_TABLE}-body-row ${R.ELEMENT_TABLE_JS}-body-row ${U.selectedRowIndex===F?`${R.ELEMENT_TABLE}-body-row--selected`:""}`,"data-row-index":F,children:(te=U.headers)==null?void 0:te.map((fe,Ie)=>(0,C.jsx)("td",{className:`${R.ELEMENT_TABLE}-body-field`,nowrap:!0,children:I[fe.slug]},Ie))},F)})})]}):null})});var S=r(5181);class R extends _.j{static get BEM_BLOCK(){return"co-table-data-chooser"}static get ELEMENT_HEADER(){return`${R.BEM_BLOCK}__header`}static get ELEMENT_HEADER_JS(){return`js-${R.ELEMENT_HEADER}`}static get ELEMENT_HEADER_CONTAINER(){return`${R.ELEMENT_HEADER}-container`}static get ELEMENT_HEADER_CONTAINER_JS(){return`js-${R.ELEMENT_HEADER_CONTAINER}`}static get ELEMENT_TABLE(){return`${R.BEM_BLOCK}__table`}static get ELEMENT_TABLE_JS(){return`js-${R.ELEMENT_TABLE}`}static get ELEMENT_TABLE_CONTAINER(){return`${R.ELEMENT_TABLE}-container`}static get ELEMENT_TABLE_CONTAINER_JS(){return`js-${R.ELEMENT_TABLE_CONTAINER}`}static get ELEMENT_FOOTER(){return`${R.BEM_BLOCK}__footer`}static get ELEMENT_FOOTER_JS(){return`js-${R.ELEMENT_FOOTER}`}static get ELEMENT_FOOTER_CONTAINER(){return`${R.ELEMENT_FOOTER}-container`}static get ELEMENT_FOOTER_CONTAINER_JS(){return`js-${R.ELEMENT_FOOTER_CONTAINER}`}on(B){this.sandbox.subscribe("events",this),this.tpl.bindDataAttributes(this,{title:{type:String},headers:{type:Object},content:{type:Object},selectedRowIndex:{type:Number}}),this.$headerContainer=this.$ctx.find(`.${R.ELEMENT_HEADER_CONTAINER_JS}`),this.$tableContainer=this.$ctx.find(`.${R.ELEMENT_TABLE_CONTAINER_JS}`),this.$footerContainer=this.$ctx.find(`.${R.ELEMENT_FOOTER_CONTAINER_JS}`),this.initialize(),this.bindTableRowClick(),this.bindCancelClick(),this.bindChooseClick(),this.bindSearchFilterBarChanged(),B()}initialize(){this.renderHeader(),this.renderTable(),this.renderFooter(),this.registerJetsSearch()}bindTableRowClick(){this.$tableContainer.on("click",`.${R.ELEMENT_TABLE_JS}-body-row`,B=>{B.stopPropagation(),this.$tableContainer.find(`.${R.ELEMENT_TABLE}-body-row--selected`).removeClass(`${R.ELEMENT_TABLE}-body-row--selected`),this.$selectedRow=S(B.currentTarget),this.$selectedRow.addClass(`${R.ELEMENT_TABLE}-body-row--selected`),this.selectedRowIndex=this.$selectedRow.dataAsNumber("rowIndex"),this.renderFooter()})}bindCancelClick(){this.$footerContainer.on("buttonGroupCancelClicked",`.${R.ELEMENT_FOOTER_JS}`,()=>{var B;this.fire("tableDataChooserCanceled",["events"]),(B=this.jets)==null||B.destroy()})}bindChooseClick(){this.$footerContainer.on("buttonGroupSelectClicked",`.${R.ELEMENT_FOOTER_JS}`,()=>{var B;this.$tableContainer.html(""),this.fire("tableDataChooserRowChosen",{row:this.content[this.selectedRowIndex]},["events"]),(B=this.jets)==null||B.destroy()})}bindSearchFilterBarChanged(){this.$headerContainer.on("searchFilterBarChanged",B=>{var M;(M=this.jets)==null||M.search(B.detail.searchTerm)})}renderHeader(){this.sandbox.removeModules(this.$headerContainer),this.$headerContainer.html((0,t.EY)(P,{title:this.title})),this.sandbox.addModules(this.$headerContainer)}renderTable(){this.$tableContainer.html((0,t.EY)(N,{headers:this.headers,content:this.content,selectedRowIndex:this.selectedRowIndex}))}renderFooter(){this.sandbox.removeModules(this.$footerContainer),this.$footerContainer.html((0,t.EY)(T,{selectButtonIsDisabled:isNaN(this.selectedRowIndex)})),this.sandbox.addModules(this.$footerContainer)}registerJetsSearch(){var B;(B=this.jets)==null||B.destroy(),this.jets=new(b())({contentTag:`.${R.ELEMENT_TABLE_JS}-body`,callSearchManually:!0})}}},82296:function(ve,$,r){"use strict";r.d($,{m:function(){return O}});var s=r(86070),b=r(75573),t=r(93791),_=r(78149),C=r(14154),y=r(77345),g=r(23245);const m=(0,C.I)(L=>{const P=L.selectionRequired?"validate-multiselect":"";return(0,s.jsxs)("div",{className:"cm-setting-users__user js-cm-setting-users__user","data-jets":`${(L.group.name||"").toLowerCase()} ${(L.group.email||"").toLowerCase()}`,children:[(0,s.jsx)("div",{className:"cm-setting-users__avatar",children:(0,s.jsx)(g.p,{imageUrl:L.group.avatar_preview_url||L.group.preview_url_without_placeholder,gravatarHash:L.group.gravatar_hash,name:L.group.name,size:y.Z.SIZE_24,state:y.Z.STATE_DEFAULT})}),(0,s.jsxs)("div",{className:"cm-setting-users__name-and-email",children:[L.group.name?(0,s.jsx)("div",{className:"cm-setting-users__name js-cm-setting-users__name",children:L.group.name||""}):null,(0,s.jsx)("div",{className:`cm-setting-users__email ${L.group.name?"":"cm-setting-users__email--email-only"}`,children:L.group.email||""})]}),L.group.name?null:(0,s.jsx)("span",{className:"ca-badge ca-badge--grey cm-setting-users__invitation-pending",children:window.translate("Legacy_group_add_users_invitation_pending")}),(0,s.jsx)(b.z,{id:`${L.id}-${L.group.id}`,name:`${L.id}-${L.group.id}`,value:L.group.id,checked:L.group.checked,modifier:"sm",disabled:L.group.name===null,indeterminate:L.group.name===null,classes:`js-cm-setting-users__item-checkbox-input ${P}`,label_classes:"cm-setting-users__checkbox js-cm-setting-users__checkbox",data:{name:L.group.name,"user-id":L.group.id,msg:L.error_message||window.translate("Legacy_settings_users_validation_error")}})]})});var T=Object.defineProperty,E=Object.defineProperties,w=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(L,P,N)=>P in L?T(L,P,{enumerable:!0,configurable:!0,writable:!0,value:N}):L[P]=N,p=(L,P)=>{for(var N in P||(P={}))c.call(P,N)&&l(L,N,P[N]);if(u)for(var N of u(P))o.call(P,N)&&l(L,N,P[N]);return L},f=(L,P)=>E(L,w(P));const O=(0,C.I)(L=>{var P,N;return(0,s.jsx)("div",{className:"js-co-settings__elem cm-setting__elem cm-setting-groups","data-id":L.id,"data-type":"users","data-label-selectall":window.translate("Legacy_settings_users_selectall"),"data-label-unselectall":window.translate("Legacy_settings_users_unselectall"),"data-not-found-label":L.notFoundLabel,"data-search-enabled":L.searchEnabled,children:(0,s.jsxs)("div",{className:"cm-setting__preview cm-setting__bar js-cm-setting__bar",children:[L.label?(0,s.jsx)("label",{htmlFor:"users",className:"cm-setting__label",children:L.label}):null,(0,s.jsx)("div",{className:"cm-setting-users__validation-error js-cm-setting-users__validation-error"}),L.searchEnabled?(0,s.jsxs)("div",{className:`cm-setting-users__filter ${L.modifier?`cm-setting-users__filter--${L.modifier}`:""}`,children:[(0,s.jsx)(_.V,{icon:"search",size:t.l.SIZE_SMALL,classes:"cm-setting-users__filter-icon"}),(0,s.jsx)("input",{className:`cm-setting-users__filter-query js-cm-setting-users__filter-query-${L.id}`,type:"text",placeholder:`${L.searchPlaceholder?`${L.searchPlaceholder}`:`${window.translate("Legacy_placeholder_search")}`}`})]}):null,L.selectAllEnabled?(0,s.jsx)("div",{className:"cm-setting-users__select",children:(0,s.jsx)(b.z,{id:`select-${L.id}`,name:`select-${L.id}`,label:window.translate("Legacy_settings_users_selectall"),modifier:"sm",disabled:!1,classes:"js-cm-setting-users__select-all-checkbox",label_classes:"cm-setting-users__select-label js-cm-setting-users__select-label"})}):null,(0,s.jsxs)("div",{className:`cm-setting-users__list ${L.modifier?`cm-setting-users__list--${L.modifier}`:""} ${L.maxShowUsers?`cm-setting-users__list--max-users-height-${L.maxShowUsers}`:""} js-cm-setting-users__list-${L.id}`,children:[(0,s.jsx)("div",{className:`cm-setting-users__search-container js-cm-setting-users__search-container-${L.id}`,children:(P=L.groups)==null?void 0:P.map((S,R)=>(0,s.jsx)(m,f(p({},L),{group:S}),R))}),(N=L.groupedGroups)==null?void 0:N.map((S,R)=>{var U;return(0,s.jsxs)("div",{className:"co-team__foreign-group-container",children:[(0,s.jsx)("div",{className:"co-team__foreign-group-title",children:S.account_name?(0,s.jsxs)(s.Fragment,{children:[S.account_name,(0,s.jsx)(s.Fragment,{children:window.translate("Legacy_settings_team_groups")})]}):window.translate("Legacy_settings_team_unnamed_organization_groups")}),(0,s.jsx)("div",{className:`cm-setting-users__search-container js-cm-setting-users__search-container-${L.id}`,children:(U=S.groups)==null?void 0:U.map((B,M)=>(0,s.jsx)(m,f(p({},L),{group:B}),M))})]},R)}),L.searchEnabled?(0,s.jsx)("div",{className:`cm-setting-users__not-found js-cm-setting-users__not-found${`-${L.id}`}`}):null]})]})})})},34674:function(ve,$,r){"use strict";r.d($,{r:function(){return t}});var s=r(86070),b=r(14154);const t=(0,b.I)(_=>(0,s.jsx)("div",{className:"mod mod-c-team co-team","data-project-id":_.projectId}))},75736:function(ve,$,r){"use strict";r.d($,{N:function(){return C}});var s=r(86070),b=r(78149),t=r(4957),_=r(14154);const C=(0,_.I)(y=>{var g;return(0,s.jsxs)("div",{className:"mod mod-c-template-chooser co-templatechooser","data-associated-block-id":y.associatedBlockId,"data-project-id":y.projectId,"data-styleguide-id":y.styleguideId,"data-set-id":y.setId,"data-new-publication":y.newPublication,"data-is-storyteq":y.isStoryteq,children:[(0,s.jsxs)("div",{className:"co-sidebarchooser co-templatechooser__sidebar js-co-templatechooser__sidebar",children:[(0,s.jsx)("div",{className:"co-templatechooser__sidebar-tree js-co-templatechooser__sidebar-tree"}),y.appearance&&y.appearance.createpublication?(0,s.jsxs)("div",{className:"co-templatechooser__sidebar-help",children:[y.appearance.createpublication.help.title?(0,s.jsx)("div",{className:"co-templatechooser__sidebar-help-title",children:y.appearance.createpublication.help.title}):null,(g=y.appearance.createpublication.help.contacts)==null?void 0:g.map((m,T)=>(0,s.jsx)("div",{className:"co-templatechooser__sidebar-help-contact",children:m==null?void 0:m.map((E,w)=>(0,s.jsx)("div",{className:"co-templatechooser__sidebar-help-info",children:E},w))},T))]}):null]}),(0,s.jsxs)("div",{className:"co-templatechooser__main",children:[(0,s.jsx)("div",{className:"co-templatechooser__browser js-co-templatechooser__browser",children:(0,s.jsx)("div",{className:"js-co-templatechooser__loader co-templatechooser__loader",children:(0,s.jsx)(t.T,{})})}),(0,s.jsxs)("div",{className:"co-templatechooser__footer js-co-templatechooser__footer",children:[(0,s.jsx)("div",{className:" co-templatechooser__footer-selected-template-container js-co-templatechooser__footer-selected-template-container"}),(0,s.jsxs)("div",{className:"co-templatechooser__footer-actions",children:[(0,s.jsx)("button",{type:"button",className:"cm-btn cm-btn--default co-templatechooser__cancel-button js-co-templatechooser__cancel-button",children:window.translate("TemplateChooser_buttonCancel")}),(0,s.jsxs)("button",{type:"button",className:"cm-btn cm-btn--primary co-templatechooser__choose-button js-co-templatechooser__choose-button",disabled:!0,children:[(0,s.jsx)(b.V,{icon:"arrow-right"})," ",(0,s.jsx)("span",{className:"co-templatechooser__choose-button-label",children:window.translate("TemplateChooser_buttonUseThisTemplate")})]})]})]})]})]})})},10656:function(ve,$,r){"use strict";r.d($,{R:function(){return l}});var s=r(86070),b=r(95376),t=r(13833),_=r(14154),C=r(49290),y=r(2728);const g=(0,_.I)(p=>(0,s.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--right cm-btn-bar--section js-cm-setting__actions",children:[(0,s.jsx)(C.t,{}),(0,s.jsx)(y.b,{label_submit:p.submitBtnLabel})]}));var m=Object.defineProperty,T=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,u=(p,f,O)=>f in p?m(p,f,{enumerable:!0,configurable:!0,writable:!0,value:O}):p[f]=O,c=(p,f)=>{for(var O in f||(f={}))E.call(f,O)&&u(p,O,f[O]);if(T)for(var O of T(f))w.call(f,O)&&u(p,O,f[O]);return p};const o=(0,_.I)(p=>(0,s.jsx)("div",{className:"mod mod-c-formbuilder co-formbuilder","data-form-fields":JSON.stringify(p.formFields),"data-additional-post-data":JSON.stringify(p.additionalPostData),"data-api":p.api,children:(0,s.jsx)("form",{className:"js-co-formbuilder__form-container",children:(0,s.jsx)(g,c({},p))})})),l=(0,_.I)(p=>(0,s.jsxs)("div",{className:"mod mod-c-viewer-download-request co-viewer-download-request",children:[(0,s.jsx)(t.X,{}),(0,s.jsxs)("div",{className:"co-viewer-download-request__content",children:[(0,s.jsx)("h2",{className:"ca-h2",children:p.formTitle?p.formTitle:window.translate("Legacy_asset_viewer_download_request_title")}),(0,s.jsx)("p",{className:"ca-p",children:p.formDescription?(0,b.Ay)(p.formDescription):window.translate("Legacy_asset_viewer_download_request_description")})]}),(0,s.jsx)("div",{className:"co-viewer-download-request__input",children:(0,s.jsx)(o,{formFields:p.formFields,submitBtnLabel:window.translate("Legacy_btn_screen_export_request"),api:"/api/download-request",additionalPostData:p.additionalPostData})})]}))},60578:function(ve,$,r){"use strict";r.d($,{R:function(){return c}});var s=r(86070),b=r(78149),t=r(14154),_=Object.defineProperty,C=Object.defineProperties,y=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=(o,l,p)=>l in o?_(o,l,{enumerable:!0,configurable:!0,writable:!0,value:p}):o[l]=p,w=(o,l)=>{for(var p in l||(l={}))m.call(l,p)&&E(o,p,l[p]);if(g)for(var p of g(l))T.call(l,p)&&E(o,p,l[p]);return o},u=(o,l)=>C(o,y(l));const c=(0,t.I)(o=>{const l=[{value:"200",label:"200%",active:!1},{value:"140",label:"140%",active:!1},{value:"100",label:"100%",active:!1},{value:"50",label:"50%",active:!1},{value:"25",label:"25%",active:!1},{value:"auto",label:"auto",active:!0}];return(0,s.jsxs)("div",u(w({className:"mod mod-zoom-control o-zoom-control"},o.tpl.renderDataAttributesAsObject(o)),{children:[(0,s.jsx)(b.V,{icon:"zoom",size:"sm"}),(0,s.jsx)("div",{className:"o-zoom-control__menu js-o-zoom-control__menu o-zoom-control__menu--hidden",children:l==null?void 0:l.map((p,f)=>(0,s.jsx)("div",{className:`o-zoom-control__option js-o-zoom-control__option ${p.active?"o-zoom-control__option--active":""}`,"data-zoom-value":p.value,children:p.label},f))})]}))})},80736:function(ve,$,r){"use strict";var s=r(50427),b=r(18216),t=r(86070),_=r(14154);const C=(0,_.I)(a=>(0,t.jsxs)(t.Fragment,{children:[a.elementsCount," ",window.translate("Legacy_adobe_creative_cloud_elements")]})),y=(0,_.I)(a=>(0,t.jsx)("div",{children:a.reason===w.ERROR_LOGIN_RUN_INTO_TIMEOUT?(0,t.jsxs)(t.Fragment,{children:[window.translate("Legacy_adobe_creative_cloud_login_run_into_timout")," ",w.LOGIN_TIMEOUT_IN_SECONDS,"s"," "]}):window.translate("Legacy_adobe_creative_cloud_general_error")}));var g=r(78149),m=r(4957);const T=(0,_.I)(a=>{var e;return a.libraries.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"co-adobe-creative-cloud-libraries__add-to",children:window.translate("Legacy_adobe_creative_cloud_choose_library")}),(e=a.libraries)==null?void 0:e.map(n=>n.ownership.toLowerCase()==="private"?(0,t.jsxs)("div",{className:"co-adobe-creative-cloud-libraries__library js-co-adobe-creative-cloud-libraries__library","data-library-id":n.library_urn,children:[(0,t.jsxs)("div",{className:"co-adobe-creative-cloud-libraries__library-name-container",children:[(0,t.jsx)("div",{className:"co-adobe-creative-cloud-libraries__library-icon",children:(0,t.jsx)(g.V,{icon:"add"})}),(0,t.jsx)("div",{className:"co-adobe-creative-cloud-libraries__library-name",children:n.name})]}),(0,t.jsx)("div",{className:"co-adobe-creative-cloud-libraries__library-elements-count js-co-adobe-creative-cloud-libraries__library-elements-count","data-element-count":n.elements_count,children:(0,t.jsx)(C,{elementsCount:n.elements_count})}),(0,t.jsx)("div",{className:"co-adobe-creative-cloud-libraries__library-loader js-co-adobe-creative-cloud-libraries__library-loader",children:(0,t.jsx)(m.T,{})})]},n.id):(0,t.jsxs)("div",{className:"co-adobe-creative-cloud-libraries__library js-co-adobe-creative-cloud-libraries__library","data-library-id":n.id,children:[(0,t.jsxs)("div",{className:"co-adobe-creative-cloud-libraries__library-name-container",children:[(0,t.jsx)("div",{className:"co-adobe-creative-cloud-libraries__library-icon",children:(0,t.jsx)(g.V,{icon:"add"})}),(0,t.jsx)("div",{className:"co-adobe-creative-cloud-libraries__library-name",children:n.name})]}),(0,t.jsx)("div",{className:"co-adobe-creative-cloud-libraries__library-elements-count js-co-adobe-creative-cloud-libraries__library-elements-count","data-element-count":n.elements_count,children:(0,t.jsx)(C,{elementsCount:n.elements_count})}),(0,t.jsx)("div",{className:"co-adobe-creative-cloud-libraries__library-loader js-co-adobe-creative-cloud-libraries__library-loader",children:(0,t.jsx)(m.T,{})})]},n.id))]}):window.translate("Legacy_adobe_creative_cloud_no_libraries")});var E=r(5181);class w extends b.j{static get ERROR_LOGIN_RUN_INTO_TIMEOUT(){return"ERROR_LOGIN_RUN_INTO_TIMEOUT"}static get LOGIN_TIMEOUT_IN_SECONDS(){return 60}on(e){this.login().then(()=>this.showLibraries()).catch(n=>this.showError(n)),e()}login(){return new Promise((e,n)=>{this.data.get("/api/thirdparty/adobecreativecloud/connect").then(d=>{const x=setTimeout(()=>n(w.ERROR_LOGIN_RUN_INTO_TIMEOUT),w.LOGIN_TIMEOUT_IN_SECONDS*1e3),D=window.open(d.data.authorization_url,"Adobe ID - Sign in","toolbar=no, menubar=no, width=600, height=700, top=100, left=100");D.focus(),window.addEventListener("message",z=>{z.data.topic==="frontifyThirdpartyAuthenticated"&&(clearTimeout(x),D.close(),e())})}).catch(d=>n(d))})}showLibraries(){this.data.get("/api/adobe-creative-cloud/libraries").then(e=>this.renderLibraries(e.data)).catch(e=>this.showError(e))}renderLibraries(e){this.$ctx.html((0,s.EY)(T,e)),this.bindLibraryClick()}bindLibraryClick(){this.$ctx.on("click",".js-co-adobe-creative-cloud-libraries__library",e=>{this.triggerUpload(E(e.currentTarget).data("libraryId"),this.getType(),this.getId())})}addElementsToCreativeCloudLibrary(e,n,d){return this.data.post(`/api/adobe-creative-cloud/libraries/${e}`,{type:n,id:d})}showError(e){this.$ctx.html((0,s.EY)(y,{reason:e}))}lockLibrary(e){this.getLibraryElementByLibraryId(e).addClass("locked"),this.getLibraryLoaderElementByLibraryId(e).addClass("visible")}unlockLibrary(e){this.getLibraryElementByLibraryId(e).removeClass("locked"),this.getLibraryLoaderElementByLibraryId(e).removeClass("visible")}triggerUpload(e,n,d){this.libraryIsLocked(e)||(this.lockLibrary(e),this.addElementsToCreativeCloudLibrary(e,n,d).then(x=>{x.success&&this.updateElementsCount(e,x.data.total),this.unlockLibrary(e)}).catch(x=>this.showError(x)))}updateElementsCount(e,n){const d=this.getElementCounterByLibraryId(e),x=d.data("elementCount")+n;d.data("elementCount",x),d.html((0,s.EY)(C,{elementsCount:x}))}getLibraryElementByLibraryId(e){return this.$ctx.find(`.js-co-adobe-creative-cloud-libraries__library[data-library-id="${e}"]`)}getLibraryLoaderElementByLibraryId(e){return this.getLibraryElementByLibraryId(e).find(".js-co-adobe-creative-cloud-libraries__library-loader")}getElementCounterByLibraryId(e){return this.getLibraryElementByLibraryId(e).find(".js-co-adobe-creative-cloud-libraries__library-elements-count")}libraryIsLocked(e){return this.getLibraryElementByLibraryId(e).hasClass("locked")}getType(){return this.$ctx.data("type")}getId(){return this.$ctx.data("id")}}var u=r(41594),c=r(34933),o=r(63218),l=Object.defineProperty,p=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,L=(a,e,n)=>e in a?l(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,P=(a,e)=>{for(var n in e||(e={}))f.call(e,n)&&L(a,n,e[n]);if(p)for(var n of p(e))O.call(e,n)&&L(a,n,e[n]);return a};const N=(0,u.lazy)(()=>Promise.all([r.e(2057),r.e(4843),r.e(7592)]).then(r.bind(r,69092)).then(a=>({default:a.AssetAuditTrailPage}))),S=()=>{const a=(0,c.NK)();return(0,t.jsx)(u.Suspense,{fallback:(0,t.jsx)(o.A,{}),children:(0,t.jsx)(N,P({},{assetId:a}))})};var R=r(69253);class U extends b.j{on(e){this.renderAssetAuditTrail(),e()}renderAssetAuditTrail(){const n=this.$ctx.find(".js-m-actionsmain__assetAuditTrail").get(0);if(!n)throw new Error("Element not found.");(0,s.Cc)((0,R.R)({})(S),n)}}var B=r(46142),M=r(96983),I=r(58440),F=r(38291);const te=()=>{var a,e;return(e=(a=window.document.getElementById("recaptcha-sdk"))==null?void 0:a.getAttribute("data-v2-site-key"))!=null?e:""},fe=()=>{var a,e;return(e=(a=window.document.getElementById("recaptcha-sdk"))==null?void 0:a.getAttribute("data-v3-site-key"))!=null?e:""},Ie=()=>!!window.document.getElementById("recaptcha-sdk"),de=(a,e,n)=>window.grecaptcha.render(a,{badge:"inline",sitekey:e,callback:d=>{n(d)}}),q=async(a,e)=>window.grecaptcha.execute(a,{action:e});var re=r(39232),me=r(85131),ie=r(62878),ee=r(87349);const pe=(0,_.I)(a=>(0,t.jsx)("div",{className:"co-accessrequest__settings-countries js-cm-setting-search__item","data-language":a.country,"data-value":a.country,children:(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"co-accessrequest__settings-countries__name",children:a.label}),(0,t.jsx)("span",{className:"co-accessrequest__settings-countries__value",children:a.country})]})})),je=(0,_.I)(a=>{var e;return(e=Object.keys(a.data))==null?void 0:e.map((n,d)=>(0,t.jsx)(pe,{country:n,label:a.data[n]},d))});var Be=Object.defineProperty,Ne=Object.getOwnPropertySymbols,ce=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,ge=(a,e,n)=>e in a?Be(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,$e=(a,e)=>{for(var n in e||(e={}))ce.call(e,n)&&ge(a,n,e[n]);if(Ne)for(var n of Ne(e))se.call(e,n)&&ge(a,n,e[n]);return a};const et=(0,_.I)(a=>(0,t.jsx)(pe,$e({},a))),rt=(0,_.I)(a=>{var e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"co-accessrequest__content",children:[(0,t.jsx)("h1",{className:"ca-h2",children:a.config.meta.title}),(0,t.jsx)("p",{className:"ca-p",children:a.config.meta.description})]}),(0,t.jsxs)("form",{className:"co-accessrequest__settings js-co-accessrequest__settings",children:[(e=a.config.fields)==null?void 0:e.map(n=>(0,t.jsxs)(t.Fragment,{children:[n.type==="Text"?(0,t.jsx)(ie.A,{id:n.id,label:n.label+(n.required?" *":""),placeholder:n.placeholder,required:n.required}):null,n.type==="Textarea"?(0,t.jsx)(ee.D,{id:n.id,label:n.label+(n.required?" *":""),placeholder:n.placeholder,required:n.required}):null,n.type==="Email"?(0,t.jsx)(ie.A,{id:n.id,label:n.label+(n.required?" *":""),type:"email",placeholder:n.placeholder,required:n.required}):null,n.type==="Country"?(0,t.jsx)(me.j,{id:n.id,required:n.required,placeholder:n.placeholder,templates:{content:"c-accessrequest-elem-search-countries-content",contentReact:je,preview:"c-accessrequest-elem-search-countries-preview",previewReact:et},previewData:{label:n.placeholder,country:""},label:n.label+(n.required?" *":""),data:a.countries}):null]})),(0,t.jsx)("div",{id:"accessrequest-recaptcha",className:"tw-mt-7 tw-flex tw-justify-center"}),(0,t.jsx)("div",{className:"cm-btn-bar cm-btn-bar--centered cm-btn-bar--section js-cm-setting__actions",children:(0,t.jsxs)("button",{type:"submit",className:"cm-btn cm-btn--primary cm-btn btn-request-access",children:[(0,t.jsx)("i",{className:"icon-spinner anim-spin cm-setting__btn-icon js-cm-setting__btn-icon--loading"}),(0,t.jsx)("i",{className:"icon-exclamation-triangle cm-setting__btn-icon js-cm-setting__btn-icon--error"}),(0,t.jsx)("i",{className:"icon-check cm-setting__btn-icon js-cm-setting__btn-icon--success"}),(0,t.jsx)("span",{className:"js-cm-setting__btn-label",children:"Request Access"})]})})]})]})});var Qe=r(5181);class it extends b.j{on(e){this.countries=this.$ctx.data("countries"),this.sandbox.subscribe("events",this);const n=Qe((0,s.EY)(rt,{config:this.$ctx.data("config"),countries:this.countries}));this.tpl.addAndActivate(this.$ctx,n),this.settings=new re.D(this.$ctx.find(".js-co-accessrequest__settings"),this.sandbox),this.settings.validation(()=>{Ie()?q(fe(),"access_request_page").then(d=>{this.request(d)}):this.request()}),e()}showErrorResponseModal(e){this.fire("swal",{template:e,type:"error",closeOnConfirm:!0,doNotClose:!0})}request(e=null,n=null){const d=this.settings.serialize();d.referer=this.$ctx.data("referer"),e&&(d.recaptcha_score_token=e),n&&(d.recaptcha_widget_token=n),this.data.post("/api/auth/request-access",d).then(x=>{var D,z;if(x.success)Tc.Setting.Base.prototype.showSuccess.apply(this),(0,F.s)("request access"),this.fire("swal",{template:"accessrequest-sent",type:"success",doNotClose:!0,callback:()=>{location.href="/"}});else if((D=x.errors)!=null&&D.email)this.settings.showErrors(x.errors);else{const ne=(z=x.errors)!=null&&z.country?"accessrequest-error-country":"accessrequest-error";Tc.Setting.Base.prototype.hideLoader.apply(this),this.fire("swal",{template:ne,type:"error",closeOnConfirm:!0,doNotClose:!0})}}).catch(x=>{switch(x.status){case 429:this.showErrorResponseModal("accessrequest-error-request-exists");break;case 451:Ie()?de("accessrequest-recaptcha",te(),D=>{this.request(null,D)}):this.showErrorResponseModal("accessrequest-error");break;default:this.showErrorResponseModal("accessrequest-error")}Tc.Setting.Base.prototype.hideLoader.apply(this)})}}var ct=r(5568),ft=r(93898),_s=r(11097),Bt=r(88398);class gt extends b.j{on(e){this.sandbox.subscribe("events",this),this.router=this.sandbox.getConfigParam("router"),this.settings=new re.D(this.$ctx,this.sandbox),this.type=this.$ctx.data("type"),this.type==="screen"?this.bindScreenEvents():this.type==="set"&&this.bindSetEvents(),e()}bindScreenEvents(){const e=this.$ctx.data("id"),n=this.$ctx.data("ext"),d=this.$ctx.dataAsNumber("revisionId"),x=this.$ctx.data("template-asset-id"),D=this.settings.getSetting("delete_asset");D.deleted=z=>{for(const ne of z.asset_ids)this.fire("assetDeleted",{id:ne})},this.$ctx.on("click",".js-co-actionsasset__download",z=>{z.stopPropagation(),z.preventDefault(),location.href=`/api/screen/download/${x||e}?track`,(0,F.s)("download asset",{asset_id:e,asset_type:this.type,download_type:"ORIGINAL",via:"CONTEXTMENU"}),this.trackAssetDownloadForPlatformAnalytics({ext:n,id:e,revisionId:d})}),this.$ctx.on("click",".js-co-actionsasset__share",z=>{z.stopPropagation(),z.preventDefault();const ne=document.getElementById("react-modal");(0,s.Cc)(ct.C,ne,{assetId:e,onClose:()=>{(0,s.s4)(ne)}})}),this.$ctx.on("click",".js-co-actionsasset__replace",z=>{z.stopPropagation(),z.preventDefault(),x?this.fire("replaceTemplate",{id:e,templateAssetId:x},["events"]):this.fire("replaceAsset",{id:e},["events"])}),this.$ctx.on("click",".js-co-actionsasset__visit",z=>{z.stopPropagation(),z.preventDefault(),this.data.get(`/api/asset/${e}`).then(ne=>{ne.success&&window.open(ne.data.external_url,"_blank")})}),this.$ctx.on("click",".js-co-actionsasset__duplicate",z=>{var ne;z.stopPropagation(),z.preventDefault(),(0,F.s)("duplicate asset",{asset_id:e,asset_ext:n,via:"CONTEXTMENU"});const _e={target_project_id:this.router.getUrlParam("project"),target_set_id:(ne=this.router.getUrlParam("set"))!=null?ne:null};this.data.post(`/api/asset/duplicate/${e}`,_e).then(Ce=>{var De,Xe,st;if(Ce.success){if((Xe=(De=Ce.data)==null?void 0:De.brand_update)!=null&&Xe.id)page(`/brand-update/${Ce.data.brand_update.id}`);else if((st=Ce.data)!=null&&st.id&&this.context.route){const{route:dt}=this.context;page(`/projects/${dt.project}/${dt.slug}/${dt.set||""}`)}}})})}trackAssetDownloadForPlatformAnalytics(e){try{_s.w.track([{type:"asset:download",brandId:(0,ft.M)(),properties:{asset_ext:e.ext,asset_id:e.id,download_type:"SINGLE",project_id:(0,Bt.MJ)(),project_type:(0,Bt.Xv)(),revision_id:e.revisionId,via:(0,Bt.Xv)(),via_id:(0,Bt.MJ)()}}])}catch(n){console.error(n)}}bindSetEvents(){const e=this.settings.getSetting("delete_set");e.deleted=n=>{if(n.success)for(const d of n.set_ids)this.fire("setDeleted",{id:d})}}}class Ct extends b.j{on(e){this.sandbox.subscribe("events",this),this.settings=new re.D(this.$ctx,this.sandbox);const n=this.settings.getSetting("delete_brand");n.deleted=()=>this.fire("deleteBrand",{id:this.$ctx.data("id")}),e()}}class at extends b.j{on(e){this.settings=new re.D(this.$ctx,this.sandbox),this.sandbox.subscribe("events",this),this.tpl.bindDataAttributes(this,{brandUpdateId:{type:Number}}),this.bindDeletion(),e()}bindDeletion(){const e=this.settings.getSetting("delete_brandupdate");e.deleted=()=>this.fire("deleteBrandUpdate",{id:this.brandUpdateId})}}var Ht=Object.defineProperty,Vt=Object.defineProperties,Fs=Object.getOwnPropertyDescriptors,Hs=Object.getOwnPropertySymbols,Us=Object.prototype.hasOwnProperty,ys=Object.prototype.propertyIsEnumerable,Vs=(a,e,n)=>e in a?Ht(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,Oa=(a,e)=>{for(var n in e||(e={}))Us.call(e,n)&&Vs(a,n,e[n]);if(Hs)for(var n of Hs(e))ys.call(e,n)&&Vs(a,n,e[n]);return a},nn=(a,e)=>Vt(a,Fs(e));const Va=(0,_.I)(a=>(0,t.jsxs)("div",nn(Oa({className:"mod mod-c-select-list c-select-list"},a.tpl.renderDataAttributesAsObject(a)),{children:[(0,t.jsx)("div",{className:"c-select-list__search-container js-c-select-list__search-container"}),(0,t.jsx)("div",{className:"c-select-list__list-container js-c-select-list__list-container"})]})));var hn=r(987),Bs=r(16829),os=r(31415),ha=r(97457);const Qn=({documentBlockReferences:a,confirmButtonClicked:e})=>{const{t:n}=(0,os.Bd)();return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"tw-w-[320px] tw-rounded-t-sm tw-text-body-medium tw-px-6 tw-gap-s tw-flex-col tw-flex tw-bg-base tw-border-b tw-border-line tw-py-4",children:[(0,t.jsx)("div",{className:"tw-font-bold",children:(0,t.jsxs)("div",{className:"tw-flex tw-gap-1 tw-items-center tw-font-bold tw-text-button-danger-background tw-w-full",children:[(0,t.jsx)(hn.default,{}),(0,t.jsx)("div",{"data-test-id":"title",children:n("GuidelineDeletionBlockReferenceList_title")})]})}),(0,t.jsx)("div",{"data-test-id":"description",children:n("GuidelineDeletionBlockReferenceList_description")})]}),(0,t.jsx)(ha.M,{documentBlockReferences:a}),(0,t.jsx)("div",{className:"tw-px-l tw-py-m tw-flex tw-gap-s tw-justify-end tw-bg-base tw-rounded-b-sm tw-border-t tw-border-t-line",children:(0,t.jsx)(Bs.$n,{"data-test-id":"confirm-button",onPress:()=>e(),emphasis:"default",children:n("GuidelineDeletionBlockReferenceList_confirmButtonLabel")})})]})};var wn=r(25133),$s=r(9890);const Ta=async a=>{const{result:e}=await $s.J.get(`/api/document-block-reference?document_page_id=${a}`);return e.data},Vn=async a=>{const{result:e}=await $s.J.get(`/api/document-block-reference?document_id=${a}`);return e.data},Xn=async a=>{const{result:e}=await $s.J.get(`/api/document-block-reference?portal_id=${a}`);return e.data};var Br=r(76053),Yr=r(382),Rt=r(33446),Ze=r(80823),vt=r(13833),Et=r(82110),Ra=Object.defineProperty,qs=Object.defineProperties,gs=Object.getOwnPropertyDescriptors,xs=Object.getOwnPropertySymbols,Ye=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable,nt=(a,e,n)=>e in a?Ra(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,za=(a,e)=>{for(var n in e||(e={}))Ye.call(e,n)&&nt(a,n,e[n]);if(xs)for(var n of xs(e))lt.call(e,n)&&nt(a,n,e[n]);return a},kn=(a,e)=>qs(a,gs(e));const Bn=(0,_.I)(a=>(0,t.jsxs)("div",{className:"mod mod-c-actions-project o-multibrand","data-hub":a.hub_id,children:[(0,t.jsx)(vt.X,{type:"info"}),(0,t.jsxs)("div",{className:"o-multibrand__container",children:[(0,t.jsxs)("div",{className:"o-multibrand__col",children:[(0,t.jsx)("h3",{className:"cm-modal__title",children:window.translate("Legacy_styleguide_duplication_modal_create_brand_title")}),(0,t.jsx)("p",{className:"cm-modal__text",children:window.translate("Legacy_styleguide_duplication_modal_create_brand_text")}),(0,t.jsx)("button",kn(za({className:"cm-btn cm-btn--primary js-co-actionsproject__duplicate-brand"},a.brand_limit_exceeded&&!(0,Et.kA)()||!a.utils.account.getAccountPermissions().create_brand?{disabled:!0}:{}),{children:window.translate("Legacy_styleguide_duplication_modal_create_brand_button")})),a.brand_limit_exceeded&&!(0,Et.kA)()?(0,t.jsx)("span",{className:"ca-metainfo__note",children:window.translate("Legacy_styleguide_duplication_modal_note")}):null]}),(0,t.jsxs)("div",{className:"o-multibrand__col",children:[(0,t.jsx)("h3",{className:"cm-modal__title",children:window.translate("Legacy_styleguide_duplication_modal_same_brand_title")}),(0,t.jsx)("p",{className:"cm-modal__text",children:window.translate("Legacy_styleguide_duplication_modal_same_brand_text")}),(0,t.jsx)("button",kn(za({className:"cm-btn cm-btn--primary js-co-actionsproject__duplicate-guideline"},a.styleguide_limit_exceeded&&!(0,Et.kA)()?{disabled:!0}:{}),{children:window.translate("Legacy_styleguide_duplication_modal_same_brand_button")})),a.styleguide_limit_exceeded&&!(0,Et.kA)()?(0,t.jsx)("span",{className:"ca-metainfo__note",children:window.translate("Legacy_styleguide_duplication_modal_note")}):null]})]})]}));var On=r(5181);class jr extends b.j{constructor(e,n,d){super(e,n,d),this.hub_id=e.data("id")!==void 0?e.data("id"):e.data("hub")}on(e){this.sandbox.subscribe("events",this),this.settings=new re.D(this.$ctx,this.sandbox);const n=this.$ctx.dataAsNumber("id");this.settings.getSetting("delete_project").deleted=()=>{(0,wn.e)()==="projects"||(0,wn.e)()==="patterns"?page(`/brands/${(0,ft.M)()}/${(0,ft.L)().slug}`):this.fire("deleteProject",{id:n})},this.$ctx.on("click",".js-cm-setting__archive-btn",async()=>{const d=this.$ctx.data("id");await this.data.patch(`/api/project/${d}/archive`),this.fire("archiveProject",{id:d})}),this.$ctx.on("click",".js-cm-setting__unarchive-btn",()=>{const d=this.$ctx.data("id");this.data.patch(`/api/project/${d}/unarchive`),this.fire("unarchiveProject",{id:d})}),this.$ctx.on("click",".js-co-actionsproject__export",async d=>{const x=On(d.currentTarget).find(".cm-btn-dropdown__label");x.text((0,Rt.Tl)("ActionsProject_Export_Label_Pending")),await(0,Br.sO)(n,"en",{onPending:D=>{this.fire("bulkactionDownloadStateChanged",{state:"preparing",downloadId:D.signature},["events"])},onSuccess:D=>{x.text((0,Rt.Tl)("ActionsProject_export_label")),this.fire("bulkactionDownloadStateChanged",{state:"success",downloadId:D.signature},["events"])},onFailure:()=>{x.text("Export failed. Try again."),this.fire("bulkactionDownloadStateChanged",{state:"failed"},["events"])}})}),this.$ctx.on("click",".js-co-actionsproject__move-to-brand",d=>{d.preventDefault();const x=On(d.currentTarget);if(!x.hasClass("state-open")){const D=x.closest(".js-o-brandcontentlisting__project").data("id"),z=x.next(".js-cm-btn-dropdown__menu");z.html((0,s.EY)(m.T)),this.data.get("/api/brand/list/").then(ne=>{const{brands:_e}=ne,Ce=_e.find(Xe=>Xe.projects.find(st=>st.id===D)),De=Ce.projects.find(Xe=>Xe.id===D);this.renderSelectListInMenu(z,this.getBrandOptions(_e,Ce.id)),this.bindProjectBrandChange(D,De.name,z)})}}),this.$ctx.on("click",".js-co-actionsproject-library__move-to-brand",d=>{d.preventDefault();const x=On(d.currentTarget);if(!x.hasClass("state-open")){const D=x.closest(".js-o-brandcontentlisting__project").data("id"),z=x.next(".js-cm-btn-dropdown__menu");z.html((0,s.EY)(m.T)),this.data.get("/api/brand/list").then(ne=>{const{brands:_e}=ne,Ce=_e.find(Xe=>Xe.libraries.find(st=>st.id===D)),De=Ce.libraries.find(Xe=>Xe.id===D);this.renderSelectListInMenu(z,this.getBrandOptions(_e,Ce.id)),this.bindLibraryBrandChange(D,De.name,z)})}}),this.$ctx.on("click",".js-co-actionsproject-styleguide__move-to-brand",d=>{d.preventDefault();const x=On(d.currentTarget);if(!x.hasClass("state-open")){const D=x.closest(".js-o-brandcontentlisting__project").data("id"),z=x.next(".js-cm-btn-dropdown__menu");z.html((0,s.EY)(m.T)),this.data.get("/api/brand/list").then(ne=>{const{brands:_e}=ne,Ce=_e.find(Xe=>Xe.styleguides.find(st=>st.id===D)),De=Ce.styleguides.find(Xe=>Xe.id===D);this.renderSelectListInMenu(z,this.getBrandOptions(_e,Ce.id)),this.bindStyleguideBrandChange(De.project_id,De.name,z)})}}),this.settings.getSetting("delete_styleguide").deleted=async()=>{const d=await Xn(this.hub_id);if(d.length===0)await this.data.delete(`/api/hub/delete/${this.hub_id}`),(0,wn.e)()==="brands"?this.fire("deleteStyleguide",{id:n}):location.href="/";else{const x=()=>{this.fire("closeDropdown",this.$ctx.closest(".js-cm-btn-dropdown__menu"),["events"])},D={documentBlockReferences:d,confirmButtonClicked:()=>x()};(0,s.Cc)(Qn,this.$ctx.get(0),D)}},this.$ctx.on("click",".js-co-actionsproject__duplicate",async()=>{let d=!1;try{const D=await this.data.getStorageUsage();d=parseInt(`${D.brand.max}`)-parseInt(`${D.brand.current}`)<1}catch(D){}const x=On((0,s.EY)(Bn,{brand_limit_exceeded:d,styleguide_limit_exceeded:!this.account.hasFeature("CORE_MULTIPLE_STYLEGUIDE"),hub_id:this.hub_id}));return this.fire("openModal",{$content:x,modifier:"functional"}),!1}),this.$ctx.on("click",".js-co-actionsproject__duplicate-brand",()=>{(0,F.s)("duplicate guideline in new brand"),this.duplicateStyleguide(d=>{this.handleDuplicateStyleguideSwal(d)},!1)}),this.$ctx.on("click",".js-co-actionsproject__duplicate-guideline",()=>{(0,F.s)("duplicate guideline"),this.duplicateStyleguide(d=>{this.handleDuplicateStyleguideSwal(d)})}),this.$ctx.on("click",".js-co-actionsproject__toggle-default-project-template",()=>{(0,F.s)("mark default template");const d=this.$ctx.data("id");this.fire("toggleSetProjectTemplateDefault",d);const x=On(event.currentTarget).closest(".js-cm-btn-dropdown__menu");this.fire("closeDropdown",x,["events"])}),e()}renderSelectListInMenu(e,n){this.$brandSelectList=On((0,s.EY)(Va,{options:n,showSelectAll:!1,labelAll:!1,showSearch:!0,autofocus:!0,placeholder:window.translate("ActionsProject_moveToBrand_search_placeholder"),listItemType:Ze.m.LIST_ITEM_TYPE_IMAGE})),this.tpl.addAndActivate(e,this.$brandSelectList)}getBrandOptions(e,n){return e.filter(d=>d.id!==n).map(d=>({label:d.name,value:d.id,image:d.image}))}bindProjectBrandChange(e,n,d){this.$brandSelectList.on("selectListSelected",x=>{this.handleProjectBrandChange({brand_id:x.detail.value,brand_name:x.detail.text,project_id:e,project_name:n},d)})}bindLibraryBrandChange(e,n,d){this.$brandSelectList.on("selectListSelected",x=>{this.handleLibraryBrandChange({brand_id:x.detail.value,brand_name:x.detail.text,library_id:e,library_name:n},d)})}bindStyleguideBrandChange(e,n,d){this.$brandSelectList.on("selectListSelected",x=>{this.handleStyleguideBrandChange({brandId:x.detail.value,brandName:x.detail.text,projectId:e,styleguideName:n},d)})}handleProjectBrandChange(e,n){const{brand_id:d,brand_name:x,project_id:D,project_name:z}=e;!d||!D||this.fire("swal",{template:"project-move-to-brand",brand_name:x,project_name:z,closeOnConfirm:!0,callback:()=>{this.data.put(`/api/project/update/${D}`,{brand_id:d}).then(()=>{this.fire("closeDropdown",n,["events"]),this.tpl.fireCustomEvent(this.$ctx,"brandContentReloaded")})}})}handleLibraryBrandChange(e,n){const{brand_id:d,brand_name:x,library_id:D,library_name:z}=e;!d||!D||this.fire("swal",{template:"library-move-to-brand",brand_name:x,library_name:z,closeOnConfirm:!0,callback:()=>{this.data.put(`/api/project/update/${D}`,{brand_id:d}).then(()=>{this.fire("closeDropdown",n,["events"]),this.tpl.fireCustomEvent(this.$ctx,"brandContentReloaded")})}})}handleStyleguideBrandChange(e,n){const{brandId:d,brandName:x,projectId:D,styleguideName:z}=e;!d||!D||this.fire("swal",{template:"styleguide-move-to-brand",brand_name:x,styleguide_name:z,closeOnConfirm:!0,callback:()=>{(0,Yr.D8)(D,d).then(()=>{this.fire("closeDropdown",n,["events"]),this.tpl.fireCustomEvent(this.$ctx,"brandContentReloaded")})}})}handleDuplicateStyleguideSwal(e){const n=e?"duplication-start":"duplication-inprogress";this.fire("swal",{template:n,closeOnConfirm:!0,callback:()=>{this.fire("closeModal",["events"])}})}duplicateStyleguide(e,n=!0){const d=n?"?skip_brand=true":"";return this.data.get(`/api/hub/export/${this.hub_id}${d}`).then(x=>{e(!!x.success)})}}class Ln extends b.j{static get BACKGROUND_WHITE(){return"white"}static get BACKGROUND_BLACK_05(){return"black-05"}static get BACKGROUND_BLACK_90(){return"black-90"}static get BACKGROUND_BLACK_100(){return"black-100"}static get BACKGROUNDS(){return[Ln.BACKGROUND_WHITE,Ln.BACKGROUND_BLACK_05,Ln.BACKGROUND_BLACK_90,Ln.BACKGROUND_BLACK_100]}static get FOCUSED_BY_MOUSE_CLASS(){return"ca-add-block-button--focused-by-mouse"}on(e){this.tpl.bindDataAttributes(this,{title:{type:String},background:{type:String,allowed:Ln.BACKGROUNDS,default:Ln.BACKGROUND_WHITE},isDisabled:{type:Boolean,changed:()=>this.renderIsDisabled()}}),this.renderStaticClasses(),this.renderTitle(),this.renderIsDisabled(),this.bindClicked(),this.bindFocusedByMouse(),e()}renderStaticClasses(){this.$ctx.addClass(`
                ca-add-block-button--background-${this.background}
            `)}renderTitle(){!this.title||this.title.length===0||(this.$ctx.attr("title",this.title),this.$ctx.attr("aria-label",this.title))}renderIsDisabled(){const e="ca-add-block-button--disabled";this.isDisabled?(this.$ctx.addClass(e),this.$ctx.prop("disabled",!0)):(this.$ctx.removeClass(e),this.$ctx.prop("disabled",!1))}bindFocusedByMouse(){this.$ctx.on("mousedown",()=>{this.$ctx.addClass(Ln.FOCUSED_BY_MOUSE_CLASS)}),this.$ctx.on("focusout",()=>{this.$ctx.removeClass(Ln.FOCUSED_BY_MOUSE_CLASS)})}bindClicked(){this.$ctx.on("click",e=>{e.preventDefault(),e.stopPropagation(),!this.isDisabled&&this.tpl.fireCustomEvent(this.$ctx,"clicked")})}}var Er=r(51761),Si=r.n(Er);class Ui extends b.j{on(e){this.sandbox.subscribe("events",this),this.settings=new re.D(this.$ctx,this.sandbox);const n=this.$ctx.find(".js-m-cancellation-reason__textarea"),d=this.settings.getElem("selection");d.changed=function(x){const D=x.selection.replaceAll("_","-").toLowerCase(),z=n.data(`textReason${Si()(D)}`);n.find("textarea").attr("placeholder",z)},this.settings.validation(()=>{var x;const D=(x=this.settings)==null?void 0:x.serialize();D.plan=(0,Et.PJ)(),this.data.post("/api/cancellations/reason",D).then(z=>{z.success&&(0,F.s)("add cancellation feedback",{selection:z.selection,reason:z.reason,plan:(0,Et.PJ)()}),this.fire("closeModal"),window.location.reload()})}),this.$ctx.on("click",".js-m-cancellation-reason__cancel",()=>{const x={plan:(0,Et.PJ)(),selection:"NO_REASON_GIVEN"};this.data.post("/api/cancellations/reason",x).then(D=>{D.success&&(0,F.s)("add cancellation feedback",{selection:"NO_REASON_GIVEN",reason:"",plan:(0,Et.PJ)()}),this.fire("closeModal"),window.location.reload()})}),e()}}var fi=r(10397),As=r(58095);const Zr=(0,_.I)(()=>(0,t.jsx)("div",{className:"co-assetbrowser__blank-slate",children:(0,t.jsx)("img",{alt:"",src:"/img/blankslate/chooser/blankslate-1.svg"})}));var Gt=r(93791);const Qi=(0,_.I)(a=>(0,t.jsx)("div",{className:"co-assetbrowser__breadcrumb js-co-assetbrowser__breadcrumb",children:a.currentContainer?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:" co-assetbrowser__breadcrumb-icon co-assetbrowser__breadcrumb-icon--parent js-co-assetbrowser__breadcrumb-icon--parent","data-container-id":a.currentContainer.parent,"data-container-type":a.currentContainer.type,children:(0,t.jsx)(g.V,{icon:"folder-up",size:Gt.l.SIZE_SMALL})}),(0,t.jsx)(g.V,{icon:"caret-right",size:Gt.l.SIZE_SMALL,classes:"co-assetbrowser__breadcrumb-icon"}),(0,t.jsx)(g.V,{icon:"folder",size:Gt.l.SIZE_SMALL,classes:"co-assetbrowser__breadcrumb-icon"}),(0,t.jsx)("span",{className:"co-assetbrowser__breadcrumb-text",title:a.currentContainer.name,children:a.currentContainer.name})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("i",{className:`co-assetbrowser__breadcrumb-icon ${a.parentIcon} ca-icon--sm`}),(0,t.jsx)("span",{className:"co-assetbrowser__breadcrumb-text",title:a.parentTitle,children:a.parentTitle})]})}));var Vi=r(89410);const Fr=(0,_.I)(({libraryDocument:a,showFilters:e})=>e?(0,t.jsxs)("div",{className:"co-assetbrowser__facettes",children:[(0,t.jsxs)("div",{className:"co-assetbrowser__facettes-search",children:[(0,t.jsx)("input",{className:"co-assetbrowser__facettes-search-input js-co-assetbrowser__facettes-search-input",type:"text"}),(0,t.jsx)(g.V,{icon:"search",size:Gt.l.SIZE_SMALL,classes:"co-assetbrowser__facettes-search-icon"})]}),(0,t.jsx)("div",{className:"co-assetbrowser__facettes-pills",children:(0,t.jsx)(Vi.c,{editMode:!1,libraryDocument:a,layoutType:"pills"})})]}):null);var Sa=r(18624);const _r=(0,_.I)(()=>(0,t.jsx)("div",{className:"co-assetbrowser__filters-content",children:(0,t.jsx)(Sa.d,{type:"assetchooser"})}));var bn=r(95376),ji=r(75573),vn=Object.defineProperty,Yn=Object.defineProperties,$i=Object.getOwnPropertyDescriptors,Ur=Object.getOwnPropertySymbols,Vr=Object.prototype.hasOwnProperty,Ei=Object.prototype.propertyIsEnumerable,or=(a,e,n)=>e in a?vn(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,En=(a,e)=>{for(var n in e||(e={}))Vr.call(e,n)&&or(a,n,e[n]);if(Ur)for(var n of Ur(e))Ei.call(e,n)&&or(a,n,e[n]);return a},sa=(a,e)=>Yn(a,$i(e));function Qa(a,e){if(a===0)return window.translate("Legacy_assetchooser_nothing_selected");if(a===1){if(e==="assets")return`<b>${a} ${window.translate("Legacy_assetchooser_asset")}</b>&#32;${window.translate("Legacy_assetchooser_selected")}`;if(e==="collections")return`<b>${a} ${window.translate("Legacy_assetchooser_collection")}</b>&#32;${window.translate("Legacy_assetchooser_selected")}`}else if(a>1){if(e==="assets")return`<b>${a} ${window.translate("Legacy_assetchooser_assets")}</b>&#32;${window.translate("Legacy_assetchooser_selected")}`;if(e==="collections")return`<b>${a} ${window.translate("Legacy_assetchooser_collections")}</b>&#32;${window.translate("Legacy_assetchooser_selected")}`}}const vi=(0,_.I)(a=>{var e;const n=a.itemsCount>0&&a.itemsCount===a.allItemsCount,d=a.itemsCount>0&&!n;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"co-assetbrowser__footer-selected-asset js-co-assetbrowser__footer-selected-asset",children:(0,t.jsxs)("div",{className:"co-assetbrowser__footer-selected-count js-co-assetbrowser__footer-selected-count",children:[(0,bn.Ay)((e=Qa(a.itemsCount,a.type))!=null?e:""),a.itemsCount&&a.type==="collections"?(0,t.jsx)("div",{className:"co-assetbrowser__footer-selected-collection-tooltip cm-btn-toggle__tooltip tt-height-auto tt-medium","data-tooltip":window.translate("AssetBrowser_selected-collection-tooltip"),children:(0,t.jsx)("i",{className:"cm-btn-toggle__tooltip-icon ca-icon--unknown ca-icon--sm"})}):null]})}),(0,t.jsxs)("div",{className:"co-assetbrowser__footer-actions",children:[a.multiSelectionAllowed?(0,t.jsx)("div",{className:"js-co-assetbrowser__select-all-toggle-wrapper co-assetbrowser__select-all-toggle-wrapper",children:(0,t.jsx)(ji.z,{id:"assetchooser_select_all",name:"assetchooser_select_all",checked:n,modifier:"sm",indeterminate:d,classes:"js-co-assetbrowser__select-all-toggle",label:window.translate("Legacy_assetchooser_select_all_button"),disabled:a.allItemsCount===0,data:{}})}):null,(0,t.jsxs)("div",{className:"co-assetbrowser__footer-buttons",children:[(0,t.jsx)("button",{type:"button",className:"cm-btn cm-btn--sm cm-btn--grey co-assetbrowser__cancel-button js-co-assetbrowser__cancel-button",children:window.translate("Legacy_assetchooser_cancel_button")}),(0,t.jsx)("button",sa(En({type:"button",className:"cm-btn cm-btn--sm cm-btn--primary co-assetbrowser__choose-button js-co-assetbrowser__choose-button"},a.disableChoose?{disabled:!0}:{}),{children:(0,t.jsxs)("span",{children:[(0,t.jsx)(g.V,{icon:"arrow-right"})," ",window.translate("AssetChooser_chooseButtonShort")]})}))]})]})]})});var Sr=r(29928);const ua=(0,_.I)(a=>{const e=[{id:"assets-tab",active:a.current_tab==="assets-tab",title:window.translate("Legacy_assetchooser_all_assets")}];return a.show_collection&&e.push({id:"collections-tab",active:a.current_tab==="collections-tab",title:window.translate("Legacy_assetchooser_collections")}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"co-assetbrowser__tabs",children:(0,t.jsx)(Sr.y,{items:e,alignment:"left",transparent:!0,shadow:!1,skip_content:!0})}),(0,t.jsx)("div",{className:"co-assetbrowser__upload"})]})}),Wr=(0,_.I)(a=>{var e;return(0,t.jsx)("div",{className:"co-assetbrowser__items",children:(e=a.items)==null?void 0:e.map(n=>{var d,x;return(0,t.jsxs)("div",{className:` js-co-assetbrowser__item co-assetbrowser__item ${n.selected&&a.type!=="folders"&&!n.is_not_selectable?" state-selected":""}`,"data-type":a.type,"data-id":n.id,"data-is-not-selectable":n.is_not_selectable,children:[n.is_not_selectable?(0,t.jsx)("div",{className:"co-assetbrowser__item-is-not-selectable"}):null,a.type==="assets"?(0,t.jsxs)(t.Fragment,{children:[n.is_not_selectable?null:(0,t.jsx)("button",{className:"co-assetbrowser__item-select js-co-assetbrowser__item-select",children:(0,t.jsx)("i",{className:"icon-check"})}),(0,t.jsxs)("div",{className:"co-assetbrowser__item-asset",children:[(0,t.jsx)("div",{className:"co-assetbrowser__item-picture",children:(0,t.jsx)("img",{className:`co-assetbrowser__item-img ${"preview_available"in n&&!n.preview_available?"co-assetbrowser__item-img--nopreview ":""}lazyload`,"data-src":n.preview_url,alt:n.name,draggable:"false"})}),(0,t.jsxs)("div",{className:"co-assetbrowser__item-content",children:[(0,t.jsx)("div",{className:"co-assetbrowser__item-title",title:n.title,children:n.title}),(0,t.jsxs)("div",{className:"co-assetbrowser__item-details",children:[n.width&&n.height?(0,t.jsx)("div",{className:"co-assetbrowser__item-details--label ",children:(0,t.jsxs)("span",{children:[n.width,"x",n.height]})}):null,n.ext?(0,t.jsx)("div",{className:"co-assetbrowser__item-details--label co-assetbrowser__item-details--ext",children:(0,t.jsx)("span",{children:n.ext})}):n.object_type==="URL"?(0,t.jsx)("div",{className:"co-assetbrowser__item-details--label",children:(0,t.jsx)("span",{children:window.translate("Legacy_navigation_external_asset_badge")})}):null]})]})]})]}):a.type==="folders"?(0,t.jsxs)("div",{className:"co-assetbrowser__item-folder",children:[(0,t.jsx)("div",{className:"co-assetbrowser__item-icon",children:(0,t.jsx)(g.V,{icon:"folder",size:Gt.l.SIZE_LARGE})}),(0,t.jsxs)("div",{className:"co-assetbrowser__item-content",children:[(0,t.jsx)("div",{className:"co-assetbrowser__item-title",title:n.name,children:n.name}),(0,t.jsxs)("div",{className:"co-assetbrowser__item-details",children:[n.asset_count," ",n.asset_count<=1?window.translate("Legacy_assetchooser_asset"):window.translate("Legacy_assetchooser_assets")]})]})]}):a.type==="collections"?(0,t.jsxs)(t.Fragment,{children:[!n.is_not_selectable&&a.multiSelectionAllowed?(0,t.jsx)("button",{className:"co-assetbrowser__item-select js-co-assetbrowser__item-select",children:(0,t.jsx)("i",{className:"icon-check"})}):null,(0,t.jsxs)("div",{className:"co-assetbrowser__item-collection",children:[(0,t.jsx)("div",{className:"co-assetbrowser__item-icon",children:(0,t.jsx)("i",{className:`ca-icon ca-icon${n.scope==="USER"?"--user":"--image-library"} ca-icon--lg`})}),(0,t.jsxs)("div",{className:"co-assetbrowser__item-content",children:[(0,t.jsx)("div",{className:"co-assetbrowser__item-title",title:n.name,children:n.name}),(0,t.jsxs)("div",{className:"co-assetbrowser__item-details",children:[(d=n.assets)==null?void 0:d.length," ",((x=n.assets)==null?void 0:x.length)===1?window.translate("Legacy_assetchooser_asset"):window.translate("Legacy_assetchooser_assets")]})]})]})]}):null]},n.id)})})}),$a=(0,_.I)(()=>(0,t.jsx)("div",{className:"co-assetbrowser__loader js-co-assetbrowser__loader",children:(0,t.jsx)(m.T,{})})),rn=(0,_.I)(a=>{var e;return(0,t.jsx)("div",{className:"co-assetbrowser__snippets",children:(e=a.items)==null?void 0:e.map(n=>(0,t.jsx)("div",{className:` js-co-assetbrowser__item co-assetbrowser__snippet ${n.selected&&a.type!=="folders"&&!n.is_not_selectable?" state-selected":""} ${n.is_not_selectable?" co-assetbrowser__item--is-not-selectable":""}`,"data-type":a.type,"data-id":n.id,"data-is-not-selectable":n.is_not_selectable,children:a.type==="assets"?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"co-assetbrowser__snippet-details",children:[n.is_not_selectable?null:(0,t.jsx)("button",{className:"co-assetbrowser__snippet-select",children:(0,t.jsx)(g.V,{icon:"check",size:Gt.l.SIZE_SMALL})}),(0,t.jsx)("div",{className:"co-assetbrowser__snippet-icon",children:(0,t.jsx)(g.V,{icon:"text-snippet",size:Gt.l.SIZE_MEDIUM})}),(0,t.jsx)("div",{className:"co-assetbrowser__snippet-title",title:n.name,children:n.name})]}),(0,t.jsx)("div",{className:"co-assetbrowser__snippet-details",children:(0,t.jsx)("div",{className:"co-assetbrowser__snippet-description",title:n.value,children:n.value})})]}):a.type==="folders"?(0,t.jsxs)("div",{className:"co-assetbrowser__snippet-details",children:[(0,t.jsx)("div",{className:"co-assetbrowser__snippet-icon",children:(0,t.jsx)(g.V,{icon:"folder",size:Gt.l.SIZE_MEDIUM})}),(0,t.jsx)("div",{className:"co-assetbrowser__snippet-title co-assetbrowser__snippet-title--folder",title:n.name,children:n.name})]}):null},n.id))})});var In=r(5181),gr=Object.defineProperty,fn=Object.defineProperties,Ir=Object.getOwnPropertyDescriptors,fr=Object.getOwnPropertySymbols,Ii=Object.prototype.hasOwnProperty,vr=Object.prototype.propertyIsEnumerable,Pr=(a,e,n)=>e in a?gr(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,Ee=(a,e)=>{for(var n in e||(e={}))Ii.call(e,n)&&Pr(a,n,e[n]);if(fr)for(var n of fr(e))vr.call(e,n)&&Pr(a,n,e[n]);return a},le=(a,e)=>fn(a,Ir(e));class he extends b.j{static get SEARCH_DELAY_IN_MILLIS(){return 500}async on(e){this.sandbox.subscribe("events",this),this.sandbox.subscribe("tabs",this),this.sandbox.subscribe("search",this),this.projectOrDocument=this.$ctx.data("project-or-document"),this.filters=this.$ctx.data("filters")?this.$ctx.data("filters"):[],this.externalData=this.$ctx.data("external-data"),this.disableButtonOnSubmit=this.$ctx.dataAsBoolean("disableButtonOnSubmit")||!1,this.multiSelectionAllowed=this.$ctx.data("multiselection-allowed")||!1,this.collectionSelectionAllowed=this.$ctx.data("collection-selection-allowed")||!1,this.modalId=this.$ctx.data("modalId"),this.lastSeletedItem=null,this.currentTab="assets-tab",this.facetteFilters={},this.$headerContainer=this.$ctx.find(".js-co-assetbrowser__header"),this.$breadcrumbContainer=this.$ctx.find(".js-co-assetbrowser__subheader-breadcrumb"),this.$filtersContainer=this.$ctx.find(".js-co-assetbrowser__subheader-filters"),this.$itemsContainer=this.$ctx.find(".js-co-assetbrowser__items-container"),this.$footerContainer=this.$ctx.find(".js-co-assetbrowser__footer"),this.librariesWithCollection=["MEDIALIBRARY","ICONLIBRARY","DOCUMENTLIBRARY","LOGOLIBRARY"],this.bindItemClick(),this.bindParentIconClick(),this.bindCheckboxAssetClick(),this.bindSelectAllButtonClick(),this.bindDeselectAllButtonClick(),this.bindOutsideClick(),this.bindChooseButtonClick(),this.bindCancelButtonClick(),this.bindFacettesSearchInput(),this.bindSelectAllToggle(),await this.initialize(),e()}stop(){this.sandbox.unsubscribe("events",this)}bindItemClick(){this.$ctx.on("click",".js-co-assetbrowser__item",e=>{e.stopPropagation();const n=e.currentTarget,d=n.dataset.type;this.handleItemClick(n,d)})}bindCheckboxAssetClick(){this.$ctx.on("click",".js-co-assetbrowser__item-select",e=>{e.stopPropagation();const n=e.currentTarget.parentNode,d=n.dataset.type;this.handleCheckboxItemClick(n,d)})}bindParentIconClick(){this.$ctx.on("click",".js-co-assetbrowser__breadcrumb-icon--parent",e=>{e.stopPropagation();const n=parseInt(e.currentTarget.dataset.containerId);this.fetchContent(n)})}bindSelectAllButtonClick(){this.$ctx.on("click",".js-co-assetbrowser__select-all",e=>{this.selectAllItems(),e.stopPropagation()})}bindDeselectAllButtonClick(){this.$ctx.on("click",".js-co-assetbrowser__deselect-all",e=>{this.deselectAllItems(),e.stopPropagation()})}bindOutsideClick(){In("html").on("click",e=>{const n=In(e.target);n.closest(".co-assetbrowser__footer-actions").length===0&&n.closest(".js-co-assetbrowser__subheader").length===0&&this.deselectAllItems()})}bindChooseButtonClick(){this.$ctx.on("click",".js-co-assetbrowser__choose-button",()=>{this.handleChooseButtonClick()})}bindCancelButtonClick(){this.$ctx.on("click",".js-co-assetbrowser__cancel-button",()=>{window.emitter.emit("CloseModal"),this.fire("closeModal",{id:this.modalId},["events"])})}bindFacettesSearchInput(){this.$ctx.on("input",".js-co-assetbrowser__facettes-search-input",In.debounce(this.SEARCH_DELAY_IN_MILLIS,()=>{const e=this.$ctx.find(".js-co-assetbrowser__facettes-search-input").val();this.onFacetteFilterChanged({filters:{q:e}})}))}bindSelectAllToggle(){this.$ctx.on("click",".js-co-assetbrowser__select-all-toggle",e=>{In(e.currentTarget).is(":checked")?this.selectAllItems():this.deselectAllItems(),e.stopPropagation()})}handleItemClick(e,n){e.dataset.isNotSelectable!=="true"&&(n==="folders"?this.handleFolderClick(e):n==="collections"?this.handleCollectionClick(e):this.handleAssetClick(e,n))}handleFolderClick(e){this.resetSelectedItems("assets"),this.fetchAssetsFromProject(e.dataset.id).then(()=>{this.renderAssetAndFolders(),this.renderBreadcrumb(),this.updateFooter()})}handleCollectionClick(e){this.resetSelectedItems("assets"),this.itemsToRender.currentContainer=this.itemsToRender.collections.find(n=>n.id===parseInt(e.dataset.id)),this.renderCollectionAssets(this.itemsToRender.currentContainer),this.renderBreadcrumb(),this.updateFooter()}handleAssetClick(e,n){In(e).hasClass("state-selected")?this.deselectItem(e,n):(!this.multiSelectionAllowed&&this.lastSeletedItem&&this.deselectItem(this.lastSeletedItem,this.lastSeletedItem.dataset.type),this.selectItem(e,n)),this.lastSeletedItem=e,this.updateFooter()}handleCheckboxItemClick(e,n){n==="collections"&&this.multiSelectionAllowed?this.handleAssetClick(e,n):this.handleItemClick(e,n),this.updateFooter()}handleChooseButtonClick(){this.disableButtonOnSubmit&&this.$ctx.find(".js-co-assetbrowser__choose-button").prop("disabled",!0).find("i.ca-icon--arrow-right").removeClass("ca-icon--arrow-right").addClass("ca-icon--processing anim-spin");const e=this.getSelectedItemsAsArray(),n={externalData:this.externalData,screenIds:e.assetIds,screenData:e.assets,collectionData:e.collections};window.emitter.emit("AssetChooserAssetChosen",{assets:e.assets,collections:e.collections}),this.fire("assetChooserAssetChosen",n,["events"])}async initialize(){this.renderLoader(),this.resetItemsToRender(),this.resetSelectedItems("assets"),this.renderHeader(),this.projectOrDocument.type==="document"?await this.renderFacets():(this.$filtersContainer.empty(),this.currentTab==="assets-tab"?this.renderFilters():this.fetchContent())}resetSelectedItems(e){this.selectedItems={current_type:e||null,assets:{},collections:{}}}resetItemsToRender(){this.itemsToRender={currentContainer:null,assets:[],folders:[],collections:[],allAssetsCount:0,allCollectionsCount:0,allCollectionAssetsCount:0}}fetchAssetsFromProject(e,n){const d=this.projectOrDocument.project_type===As.g.TextLibrary?"/api/textlibrary/list/":"/api/project/browse/";return this.data.get(d+this.projectOrDocument.id+(e?`/${e}`:"")+(n?`?${n}`:"")).then(async x=>{x.success?(this.projectOrDocument.project_type===As.g.TextLibrary&&(x.files=x.snippets,x.folders=x.sets,x.folder=x.set),this.itemsToRender.assets=x.files.map(D=>(D.id=parseInt(D.id),D)),this.filterItems(this.itemsToRender.assets),this.itemsToRender.allAssetsCount=this.itemsToRender.assets.filter(D=>D.is_not_selectable!==!0).length,this.projectOrDocument.project_type===As.g.TextLibrary?this.itemsToRender.folders=x.folders.map(D=>(D.id=parseInt(D.id),D)):this.itemsToRender.folders=await this.fetchSets(e,n),n||(x.folder?(this.itemsToRender.currentContainer=x.folder,this.itemsToRender.currentContainer.type="folder"):this.itemsToRender.currentContainer=null)):console.error("Failed to load Assets")})}async fetchSets(e,n){const d=new URLSearchParams(n);let x;return e&&d.get("scope")!=="project"?(d.append("parent_set_id",e),x="/api/set",d.append("recursive",(d.get("scope")==="set_recursively").toString())):(x=`/api/project/${this.projectOrDocument.id}/sets`,d.append("recursive",(d.get("scope")==="project"||d.get("scope")==="set_recursively").toString()),d.delete("scope")),n&&(d.has("q")&&(d.append("search_term",d.get("q")),d.delete("q")),d.has("status")&&(d.append("workflow_status_id",d.get("status")),d.delete("status")),d.has("creator")&&(d.append("creator_id",d.get("creator")),d.delete("creator"))),this.data.get(`${x}?${d.toString()}`).then(D=>D.data)}fetchAssetsFromDocument(e){return this.data.get(`/api/assets/search/${this.projectOrDocument.id}?limit=2000&${In.param(e)}`).then(n=>{n.success?(this.itemsToRender.assets=[],this.addDataToIndex(n.data),this.filterItems(this.itemsToRender.assets),this.itemsToRender.allAssetsCount=this.itemsToRender.assets.filter(d=>d.is_not_selectable!==!0).length,this.fire("facettesChanged",{facettes:n.facettes},["events"])):console.error("Failed to load Assets")})}addDataToIndex(e){if(!Array.isArray(e))return Promise.reject("Data is not an Array.");for(const n of e)n.id=parseInt(n.id),n.assets?this.addDataToIndex(n.assets):this.itemsToRender.assets=[...this.itemsToRender.assets,n]}fetchCollections(){let e="/api/collection";return this.projectOrDocument.type==="document"?e+=`?document_id=${this.projectOrDocument.id}&include_assets`:e+=`?scope=PROJECT&project_id=${this.projectOrDocument.id}&include_assets`,this.data.get(e).then(n=>{if(n.success){this.itemsToRender.allCollectionAssetsCount=0,this.itemsToRender.allCollectionsCount=n.data.length;const d={};this.itemsToRender.collections=this.filterItems(n.data,"collection").map(x=>{x.assets=this.filterItems(x.assets);const D=x.assets.filter(z=>z.is_not_selectable!==!0);for(const z of D)d[z.id]=z;return x}),this.itemsToRender.allCollectionAssetsCount+=Object.keys(d).length,this.itemsToRender.currentContainer=null}else console.error("Failed to load Collections")})}fetchContent(e,n){const d=this.currentTab==="assets-tab"?"assets":"collections";let x;this.currentTab==="assets-tab"&&(x=this.projectOrDocument.type==="document"?this.fetchAssetsFromDocument(n):this.fetchAssetsFromProject(e,n)),this.currentTab==="collections-tab"&&(x=this.fetchCollections()),x==null||x.then(()=>{this.resetSelectedItems(d),this.renderContent()})}renderHeader(){this.$headerContainer.html((0,s.EY)(ua,{current_tab:this.currentTab,show_collection:this.projectHasPotentialCollection()}))}renderLoader(){this.$itemsContainer.html((0,s.EY)($a))}renderBreadcrumb(){this.$breadcrumbContainer.html((0,s.EY)(Qi,{parentTitle:this.projectOrDocument.name||this.projectOrDocument.display_name,parentIcon:this.projectOrDocument.icon,currentContainer:this.itemsToRender.currentContainer}))}renderFilters(){this.sandbox.removeModules(this.$filtersContainer),this.$filtersContainer.html((0,s.EY)(_r,{showFilters:this.currentTab==="assets-tab"}));const e=this.sandbox.addModules(this.$filtersContainer),n=this.itemsToRender.currentContainer&&this.itemsToRender.currentContainer.id;e[0].initFilter(this.projectOrDocument,n,"assetChooserChanged")}async renderFacets(){const{data:e}=await this.data.get(`/api/document/${this.projectOrDocument.id}`);(0,fi.PR)(e)&&(this.sandbox.removeModules(this.$filtersContainer),this.$filtersContainer.html((0,s.EY)(Fr,{libraryDocument:e,showFilters:this.currentTab==="assets-tab"})),this.sandbox.addModules(this.$filtersContainer),this.onFacetteFilterChanged({}))}renderAssetAndFolders(){this.$itemsContainer.empty(),this.itemsToRender.assets.length>0||this.itemsToRender.folders.length>0?(this.itemsToRender.folders.length>0&&this.renderItems(this.itemsToRender,"folders"),this.itemsToRender.assets.length>0&&this.renderItems(this.itemsToRender,"assets")):this.renderBlankSlate("assets")}renderCollections(){this.$itemsContainer.empty(),this.itemsToRender.collections.length>0?this.renderItems(this.itemsToRender,"collections"):this.renderBlankSlate("collections")}renderCollectionAssets(e){this.$itemsContainer.empty(),e&&e.assets.length>0?(this.itemsToRender.assets=e.assets.map(n=>(n.id=parseInt(n.id),n)),this.filterItems(this.itemsToRender.assets),this.renderItems(this.itemsToRender,"assets"),this.itemsToRender.allAssetsCount=this.itemsToRender.assets.filter(n=>n.is_not_selectable!==!0).length):this.renderBlankSlate("assets")}renderContent(){this.selectedItems.current_type==="assets"&&this.renderAssetAndFolders(),this.selectedItems.current_type==="collections"&&this.renderCollections(),this.renderBreadcrumb(),this.updateFooter()}renderItems(e,n){const d=e[n].map(D=>{const z=this.selectedItems[this.selectedItems.current_type][D.id];return D.selected=!!z,D}),x=this.projectOrDocument.project_type===As.g.TextLibrary?rn:Wr;this.$itemsContainer.append((0,s.EY)(x,{items:d,type:n,multiSelectionAllowed:this.multiSelectionAllowed}))}renderBlankSlate(e){this.$itemsContainer.html((0,s.EY)(Zr,{type:e}))}renderFooter(e){this.$footerContainer.html((0,s.EY)(vi,e))}selectItem(e,n){In(e).addClass("state-selected");const x=this.itemsToRender[n].find(D=>parseInt(e.dataset.id)===parseInt(D.id));this.selectedItems[this.selectedItems.current_type][x.id]=x,this.selectedItems.current_type=n}deselectItem(e){In(e).removeClass("state-selected"),delete this.selectedItems[this.selectedItems.current_type][e.dataset.id]}filterItems(e,n=void 0){return this.filters.length>0&&this.filters.filter(x=>x.type===n).map(x=>{e.map(D=>{var z;x.key==="ext"&&x.values?(x.values.find(_e=>{var Ce,De;return _e===((De=(Ce=D.ext)==null?void 0:Ce.toLowerCase())==null?void 0:De.trim())})?x.inverted:!x.inverted)&&(D.is_not_selectable=!0):x.values&&(x.values.find(_e=>_e===D[x.key])?x.inverted:!x.inverted)&&(D.is_not_selectable=!0),x.containsText&&(D.is_not_selectable=!((z=D[x.key])!=null&&z.includes(x.containsText)))})}),e}async onTabSwitched(e){(e.id==="assets-tab"||e.id==="collections-tab")&&(this.currentTab=e.id,await this.initialize())}updateFooter(){const e=this.getSelectedItemsAsArray();let n="assets",d=e.assets.length,x=this.itemsToRender.allAssetsCount;e.type==="collections"&&this.collectionSelectionAllowed?(d=e.collections.length,x=this.itemsToRender.allCollectionsCount,n="collections"):e.type==="collections"&&!this.collectionSelectionAllowed&&(x=this.itemsToRender.allCollectionAssetsCount);const D=e.assets.length===0&&e.collections.length===0,z={multiSelectionAllowed:this.multiSelectionAllowed,collectionSelectionAllowed:this.collectionSelectionAllowed,type:n,itemsCount:d,allItemsCount:x,disableChoose:D,currentTab:this.currentTab};this.renderFooter(z)}getSelectedItemsAsArray(){const e={type:this.selectedItems.current_type},n={},d=this.selectedItems.collections;e.collections=Object.keys(d).map(D=>d[D]),this.collectionSelectionAllowed||e.collections.map(D=>{D.assets.filter(z=>z.is_not_selectable!==!0).map(z=>{n[z.id]=z})});const x=Ee(Ee({},n),this.selectedItems.assets);return e.assets=Object.keys(x).map(D=>x[D]),e.assetIds=e.assets.map(D=>D.id),e}selectAllItems(){this.selectedItems[this.selectedItems.current_type]=this.itemsToRender[this.selectedItems.current_type].filter(e=>e.is_not_selectable!==!0).reduce((e,n)=>le(Ee({},e),{[n.id]:n}),{}),this.renderContent()}deselectAllItems(){this.selectedItems[this.selectedItems.current_type]={},this.renderContent()}onAssetChooserChanged(e){const n=this.itemsToRender.currentContainer&&this.itemsToRender.currentContainer.id;this.fetchContent(n,e.query)}onFacetteFilterChanged(e){const n=e.filters||{};typeof n.q=="undefined"?this.facetteFilters=In.extend({},n,{q:this.facetteFilters.q||null}):this.facetteFilters.q=n.q||null,this.fetchContent(null,this.facetteFilters)}projectHasPotentialCollection(){return this.librariesWithCollection.includes(this.projectOrDocument.project_type)}}var Oe=r(46223),St=r(47956),ma=r(88804),oa=r(71112),tn=r(277),dn=r(74450),tr=r(29102),wi=Object.defineProperty,Pi=Object.defineProperties,ci=Object.getOwnPropertyDescriptors,zr=Object.getOwnPropertySymbols,sr=Object.prototype.hasOwnProperty,ui=Object.prototype.propertyIsEnumerable,Jr=(a,e,n)=>e in a?wi(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,Yi=(a,e)=>{for(var n in e||(e={}))sr.call(e,n)&&Jr(a,n,e[n]);if(zr)for(var n of zr(e))ui.call(e,n)&&Jr(a,n,e[n]);return a},ya=(a,e)=>Pi(a,ci(e));const yt=({brands:a,selectedBrandId:e,onChange:n,currentUser:d,onLogout:x,showLogout:D=!1})=>{var z;const{t:ne}=(0,os.Bd)("translation",{i18n:Rt.Ay}),[_e,Ce]=(0,u.useState)(e),[De,Xe]=(0,u.useState)(""),[st,dt]=(0,u.useState)(!1),Nt=(0,u.useRef)(null),Lt=Is=>{Ce(Is),n(Is)},Yt=()=>dt(!st),Xt=Is=>Xe(Is),ps=()=>{dt(!1),x()},ds=a.length>1,fa=a.find(Is=>Is.id===_e),un=(0,Oe.h)(["tw-flex tw-py-0 tw-px-4 tw-text-base",ds?"tw-cursor-pointer":""]);return(0,tr.y)(Nt,()=>{dt(!1)}),(0,t.jsxs)("div",{ref:Nt,children:[(0,t.jsxs)("div",ya(Yi({className:un},ds&&{onClick:Yt}),{children:[(0,t.jsx)("img",{className:"tw-w-8 tw-h-8 tw-border tw-border-line tw-border-solid tw-bg-base tw-rounded-[50%]",src:fa==null?void 0:fa.image,alt:""}),(0,t.jsxs)("div",{className:"tw-ml-4 tw-truncate",children:[(0,t.jsx)("p",{className:"tw-truncate",children:fa==null?void 0:fa.name}),(0,t.jsx)("p",{className:"tw-truncate tw-text-xs",children:(z=d.name)!=null?z:ne("BrandChooser_unnamed_user","Unnamed user")})]}),ds&&(0,t.jsx)("div",{className:"tw-ml-auto tw-cursor-pointer","data-test-id":"brandListCaret",children:(0,t.jsx)(St.default,{size:ma.l.Size16})})]})),st&&(0,t.jsxs)("div",{className:"tw-absolute tw-w-48 tw-py-4 tw-px-3 tw-border tw-border-line tw-border-solid tw-mt-3 tw-bg-base tw-rounded tw-text-sm tw-box-content","data-test-id":"brandDropdown",children:[(0,t.jsx)("h3",{className:"tw-mb-2 tw-font-bold",children:"Brand"}),a.length>5&&(0,t.jsx)("div",{className:"tw-my-2 tw-mx-0","data-test-id":"searchInput",children:(0,t.jsx)(oa.k,{value:De,decorator:(0,t.jsx)(tn.default,{}),placeholder:"Search Brands",onChange:Xt})}),(0,t.jsx)("ul",{className:"tw-max-h-[188px] tw-overflow-y-auto",children:a.filter(Is=>!De||Is.name.toLowerCase().includes(De.toLowerCase())).map((Is,Ea)=>(0,t.jsxs)("li",{className:(0,Oe.h)([(fa==null?void 0:fa.id)===Is.id?"tw-text-text-pressed":"","tw-flex tw-items-center tw-my-2 tw-mx-0 tw-text-text-weak tw-cursor-pointer hover:tw-text-text-hover"]),onClick:()=>Lt(Is.id),children:[(0,t.jsx)("img",{className:"tw-w-5 tw-h-5 tw-border tw-border-line tw-border-solid tw-bg-base tw-rounded-[50%]",src:Is.image,alt:""}),(0,t.jsxs)("span",{className:"tw-ml-2",children:[" ",Is.name," "]}),(fa==null?void 0:fa.id)===Is.id&&(0,t.jsx)("div",{className:"tw-ml-auto","data-test-id":"currentBrandCheck",children:(0,t.jsx)(dn.default,{})})]},`breadcrumb-${Ea}`))}),d&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"tw-mb-2 tw-font-bold",children:"User"}),(0,t.jsxs)("div",{className:"tw-flex",children:[(0,t.jsx)("img",{className:"tw-w-5 tw-h-5 tw-border tw-border-line tw-border-solid tw-bg-base tw-rounded-[50%]",src:d.image,alt:""}),(0,t.jsx)("span",{className:"tw-ml-2 tw-text-text-weak",children:d.name}),D&&(0,t.jsx)("div",{className:"tw-my-[-2px] tw-mr-0 tw-ml-auto","data-test-id":"logoutButton",children:(0,t.jsx)(Bs.$n,{onPress:ps,style:"default",emphasis:"default",children:"Logout"})})]})]})]}),(0,t.jsx)(Bs.cG,{color:"rgb(26, 29, 29)"})]})},We=(0,_.I)(a=>(0,t.jsxs)("div",{className:"mod mod-c-asset-browser co-assetbrowser","data-project-or-document":JSON.stringify(a.projectOrDocument),"data-external-data":JSON.stringify(a.externalData),"data-filters":JSON.stringify(a.filters),"data-disable-button-on-submit":a.disableButtonOnSubmit,"data-multiselection-allowed":a.multiSelectionAllowed,"data-collection-selection-allowed":a.collectionSelectionAllowed,"data-modal-id":a.modalId,children:[(0,t.jsx)("div",{className:"co-assetbrowser__header js-co-assetbrowser__header"}),(0,t.jsxs)("div",{className:"co-assetbrowser__subheader js-co-assetbrowser__subheader",children:[(0,t.jsx)("div",{className:"co-assetbrowser__subheader-breadcrumb js-co-assetbrowser__subheader-breadcrumb"}),(0,t.jsx)("div",{className:"co-assetbrowser__subheader-filters js-co-assetbrowser__subheader-filters"})]}),(0,t.jsx)("div",{className:"co-assetbrowser__content js-co-assetbrowser__content",children:(0,t.jsx)("div",{className:"co-assetbrowser__items-container js-co-assetbrowser__items-container"})}),(0,t.jsx)("div",{className:"co-assetbrowser__footer js-co-assetbrowser__footer"})]})),pt=(0,_.I)(a=>(0,t.jsxs)("div",{className:"co-assetchooser__blank-slate",children:[(0,t.jsx)("img",{src:"/img/blankslate/chooser/blankslate-2.svg",alt:"No match"}),(0,t.jsx)("p",{className:"co-assetbrowser__blank-slate-text",children:window.translate(a.messageI18nKey)}),(0,t.jsxs)("div",{className:"co-assetchooser__blank-slate-buttons",children:[(0,t.jsx)("button",{type:"button",className:"cm-btn cm-btn--sm cm-btn--grey co-assetchooser__cancel-button js-co-assetchooser__cancel",children:window.translate("Legacy_assetchooser_cancel_button")})," ","  ",(0,t.jsx)("a",{href:a.url,target:"_blank",className:"cm-btn cm-btn--primary js-co-assetchooser__cancel",children:window.translate(a.ctaI18nKey)})]})]})),Es=(0,_.I)(a=>{var e;return(e=a.items)==null?void 0:e.map(n=>{var d;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:` co-sidebarchooser__item js-co-assetchooser__sidebar-item ${n.uuid===a.activeItem&&!n.items?"co-sidebarchooser__item--active":""} `,"data-item-uuid":n.uuid,children:[n.level>0?(d=Array.from({length:n.level}))==null?void 0:d.map((x,D)=>(0,t.jsx)("div",{className:"co-sidebarchooser__item-level co-sidebarchooser__item-level"},D)):null,(0,t.jsxs)("div",{className:"co-sidebarchooser__item-text",children:[n.items?(0,t.jsx)("i",{className:`co-sidebarchooser__item-caret ${n.open?"ca-icon--caret-down":"ca-icon--caret-right"}`}):null,n.icon?(0,t.jsx)("i",{className:`co-sidebarchooser__item-icon ${n.icon} ca-icon--md`}):null,(0,t.jsx)("span",{className:"co-sidebarchooser__item-name",title:n.name||n.display_name,children:n.name||n.display_name})]})]}),(0,t.jsx)("div",{className:"co-sidebarchooser__items-container js-co-assetchooser__sidebar-items-container","data-item-id":n.id}),n.items&&n.open?n.items.length>0?(0,t.jsx)(Es,{items:n.items,activeItem:a.activeItem}):(0,t.jsx)("div",{className:" co-sidebarchooser__item co-sidebarchooser__item",children:(0,t.jsx)("div",{className:"co-sidebarchooser__item-text co-sidebarchooser__item-text--no-items",children:(0,t.jsx)("span",{className:"co-sidebarchooser__item-name",title:"No Documents available",children:window.translate("Legacy_assetchooser_sidebar_no_documents")})})}):null]})})}),Ws=(0,_.I)(a=>{var e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"co-assetchooser__brandchooser js-co-assetchooser__brandchooser"}),(e=a.items)==null?void 0:e.map((n,d)=>{let x;switch(n.type){case"library":x=window.translate("Legacy_assetchooser_sidebar_category_libraries");break;case"guideline":x=window.translate("Legacy_assetchooser_sidebar_category_guidelines");break;case"project":x=window.translate("Legacy_assetchooser_sidebar_category_projects");break}return(0,t.jsxs)("div",{className:"co-assetchooser__sidebar-category",children:[(0,t.jsx)("div",{className:"co-assetchooser__sidebar-category-title",children:x}),(0,t.jsx)(Es,{items:n.items,activeItem:a.activeItem})]},d)})]})});class Na extends b.j{on(e){this.sandbox.subscribe("events",this),this.brandId=this.context&&(0,ft.L)()?(0,ft.M)():this.$ctx.data("brand-id"),this.useBrandChooser=this.$ctx.dataAsBoolean("useBrandChooser")||!1,this.disableButtonOnSubmit=this.$ctx.dataAsBoolean("disableButtonOnSubmit")||!1,this.projects=this.$ctx.data("projects")?this.$ctx.data("projects"):[],this.externalData=this.$ctx.data("external-data")||{},this.filters=this.$ctx.data("filters")?this.$ctx.data("filters"):[],this.projectTypes=this.$ctx.dataAsObject("projectTypes")?this.$ctx.dataAsObject("projectTypes"):[],this.multiSelectionAllowed=this.$ctx.data("multiselection-allowed")||!1,this.collectionSelectionAllowed=this.$ctx.data("collection-selection-allowed")||!1,this.textlibraryEnabled=this.$ctx.data("textlibrary-enabled")||!1,this.modalId=this.$ctx.data("modalId"),this.sidebarItems=[],this.availableProjectTypes=["MEDIALIBRARY","LOGOLIBRARY","ICONLIBRARY","DOCUMENTLIBRARY","TEMPLATELIBRARY","PATTERNLIBRARY","STYLEGUIDE","WORKSPACE"],this.brands=[],this.currentUser=null,this.$assetChooserContainer=this.$ctx.find(".js-co-assetchooser__content"),this.$assetBrowserContainer=this.$ctx.find(".js-co-assetchooser__browser"),this.$assetSidebarContainer=this.$ctx.find(".js-co-assetchooser__sidebar"),this.bindSidebarItemClick(),this.bindCancelClick(),this.initialize(),e()}bindSidebarItemClick(){this.$ctx.on("click",".js-co-assetchooser__sidebar-item",e=>{e.stopPropagation();const n=this.getSidebarItemById(this.sidebarItems,e.currentTarget.dataset.itemUuid);n.type==="guideline"?n.items.length===0?this.fetchDocuments(n).then(()=>this.renderSidebar(n)):this.renderSidebar(n):this.renderAssetBrowser(n)})}bindCancelClick(){this.$ctx.on("click",".js-co-assetchooser__cancel",()=>this.fire("closeModal",["events"]))}async initialize(){if(this.useBrandChooser&&(await this.loadBrands(),await this.loadUser()),this.ensureIntValuesInFilters(),this.includeTextLibrary(),this.filterProjectTypes(),this.projects.length>0)await this.structureProjects(),await this.render();else try{await this.fetchProjects(),await this.render()}catch(e){console.error("Failed to load projects")}}async render(){const e=this.getFirstSidebarItem();if(!e){this.renderBlankSlate("Legacy_assetchooser_no_workspace_projects_message","Legacy_blankslate_projects_cta",`/brands/${this.brandId}/_/projects`);return}if(e.project_type==="STYLEGUIDE")if(await this.fetchDocuments(e),e.items.length>0){e.open=!0;const n=e.items[0];this.renderAssetBrowser(n)}else this.renderBlankSlate("Legacy_assetchooser_no_workspace_projects_message","Legacy_blankslate_projects_cta",`/brands/${this.brandId}/_/projects`);else this.renderAssetBrowser(e)}fetchProjects(){if(!this.brandId){console.error("Failed to load brand. No brand detected.");return}return this.data.get(`/api/brand/${this.brandId}/projects`).then(e=>{e.success===!0?e.data&&(this.sidebarItems=[],this.structureCategories(e.data.libraries,"library",1),this.structureCategories(e.data.styleguides,"guideline",2),this.structureCategories(e.data.projects,"project",3)):console.error("Failed to load Projects")})}async fetchDocuments(e){try{const{data:n}=await this.data.get(`/api/document?portal_id=${e.hub_id}`);this.structureDocuments(n,e)}catch(n){console.error("Failed to load Documents")}}structureProjects(){if(this.projects.length===0)return Promise.reject("No projects given via params");const e={libraries:[],styleguides:[],projects:[]};for(const n of this.projects)switch(this.availableProjectTypes.includes(n.project_type)||(this.availableProjectTypes=[...this.availableProjectTypes,n.project_type]),n.project_type){case"MEDIALIBRARY":case"LOGOLIBRARY":case"ICONLIBRARY":case"DOCUMENTLIBRARY":case"TEMPLATELIBRARY":case"TEXTLIBRARY":case"PATTERNLIBRARY":e.libraries=[...e.libraries,n];break;case"STYLEGUIDE":e.styleguides=[...e.styleguides,n];break;case"WORKSPACE":e.projects=[...e.projects,n];break}this.structureCategories(e.libraries,"library",1),this.structureCategories(e.styleguides,"guideline",2),this.structureCategories(e.projects,"project",3)}structureCategories(e,n,d){const x={type:n,sort:d,items:this.structureItems(e,0,n)};x.items.length>0&&(this.sidebarItems=[...this.sidebarItems,x])}structureDocuments(e,n){const d=e.map(x=>({id:x.id,name:x.title,project_type:x.mode}),[]);n.items=this.structureItems(d,1,"document")}structureItems(e,n,d){return this.sortItemsByProjectType(e).filter(D=>this.availableProjectTypes.includes(D.project_type)&&!D.implicit_access).map(D=>(D.uuid=Math.random().toString(36).substring(2,15),D.level=n,D.open=!1,D.icon=this.getIconClass(D.project_type),D.type=d,D.type==="guideline"&&(D.items=[]),D))}sortItemsByProjectType(e){const n=[];for(const d of this.availableProjectTypes)for(const x of e)x.project_type===d&&n.push(x);return n}renderSidebar(e=null){var n;this.sortSidebar();const d=e?e.uuid:(n=this.getFirstSidebarItem())==null?void 0:n.uuid;e&&(e.open=!e.open),this.$assetSidebarContainer.html((0,s.EY)(Ws,{items:this.sidebarItems,activeItem:d})),this.useBrandChooser&&(0,s.Cc)(yt,this.$ctx.find(".js-co-assetchooser__brandchooser").get(0),{brands:this.brands,currentUser:this.currentUser,selectedBrandId:this.brandId,onChange:x=>{this.brandId=x,this.storeBrandId(),this.initialize()},onLogout:()=>{this.fire("closeModal",["events"])}})}renderAssetBrowser(e){this.renderSidebar(e),this.sandbox.removeModules(this.$assetBrowserContainer),this.$assetBrowserContainer.html((0,s.EY)(We,{projectOrDocument:e,externalData:this.externalData,filters:this.filters,disableButtonOnSubmit:this.disableButtonOnSubmit,multiSelectionAllowed:this.multiSelectionAllowed,collectionSelectionAllowed:this.collectionSelectionAllowed,modalId:this.modalId})),this.sandbox.addModules(this.$assetBrowserContainer)}renderBlankSlate(e,n,d){this.renderSidebar(),this.sandbox.removeModules(this.$assetBrowserContainer),this.$assetBrowserContainer.html((0,s.EY)(pt,{messageI18nKey:e,ctaI18nKey:n,url:d})),this.sandbox.addModules(this.$assetBrowserContainer)}getSidebarItemById(e,n){let d={};for(const x of e)if(x.uuid===n)d=x;else if(x.items&&x.items.length>0){const D=this.getSidebarItemById(x.items,n);Object.keys(D).length>0&&D.constructor===Object&&(d=D)}return d}sortSidebar(){this.sidebarItems=this.sidebarItems.sort((e,n)=>e.sort>n.sort?1:n.sort>e.sort?-1:0)}getFirstSidebarItem(){let e;if(this.sidebarItems.length>0){for(const n of["guideline","project","library"]){const d=this.sidebarItems.find(x=>x.type===n);d&&(e=d)}if(e&&e.items.length>0)return e.items[0]}}getIconClass(e){switch(e){case"MEDIALIBRARY":return"ca-icon--image-library";case"LOGOLIBRARY":return"ca-icon--logo";case"ICONLIBRARY":return"ca-icon--icons";case"DOCUMENTLIBRARY":return"ca-icon--document-library";case"TEXTLIBRARY":return"ca-icon--text-library";case"STYLEGUIDE":return"ca-icon--guidelines";case"TEMPLATELIBRARY":return"ca-icon--templates";case"PATTERNLIBRARY":return"ca-icon--pattern-library";default:return"ca-icon--projects"}}filterProjectTypes(){this.projectTypes.length>0&&(this.availableProjectTypes=this.availableProjectTypes.filter(e=>this.projectTypes.includes(e)))}includeTextLibrary(){this.textlibraryEnabled&&(this.availableProjectTypes=[...this.availableProjectTypes,"TEXTLIBRARY"])}loadBrands(){return this.data.get("/api/brand/list").then(e=>{if(!e.success||!e.brands)return Promise.reject(e);if(e.brands.length<=0)return this.renderBlankSlate("Legacy_blankslate_brands_no_brands","Legacy_blankslate_brands_cta","/"),Promise.reject(`Unexpected number of brands: ${e.brands.length}`);this.brands=e.brands,this.brandId||(this.getStoredBrandId()!==null&&this.brands.some(n=>n.id===this.getStoredBrandId())?this.brandId=this.getStoredBrandId():(this.brandId=this.brands[0].id,this.storeBrandId()))})}loadUser(){return this.data.get("/api/user/info").then(e=>{var n;if(!e.success)return Promise.reject(e);this.currentUser={name:e.name,image:(n=e.image)==null?void 0:n.image}})}ensureIntValuesInFilters(){for(const e of this.filters)e.key==="id"&&(e.values=e.values.map(Number))}storeBrandId(){var e;(e=window.localStorage)==null||e.setItem("assetchooser_brand_id",this.brandId)}getStoredBrandId(){return window.localStorage&&parseInt(window.localStorage.getItem("assetchooser_brand_id"))||null}}var on=r(82645),Gn=r.n(on),Ci=Object.defineProperty,Qr=Object.defineProperties,rs=Object.getOwnPropertyDescriptors,wr=Object.getOwnPropertySymbols,Nr=Object.prototype.hasOwnProperty,Xr=Object.prototype.propertyIsEnumerable,Oi=(a,e,n)=>e in a?Ci(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,Ni=(a,e)=>{for(var n in e||(e={}))Nr.call(e,n)&&Oi(a,n,e[n]);if(wr)for(var n of wr(e))Xr.call(e,n)&&Oi(a,n,e[n]);return a},Xi=(a,e)=>Qr(a,rs(e));const Zn=(0,_.I)(a=>(0,t.jsxs)("div",Xi(Ni({className:`mod mod-c-copylink cm-copylink${a.modifier?` cm-copylink--${a.modifier} `:""}`},a.trackingRefinement?{"data-tracking-refinement":a.trackingRefinement}:{}),{children:[(0,t.jsxs)("div",{className:"cm-copylink__row",children:[(0,t.jsxs)("div",{className:`cm-copylink__link-container ${a.renewButtonEnabled?"cm-copylink__input--with-renew":""}`,children:[(0,t.jsx)("span",{className:`cm-copylink__link js-cm-copylink__link ${a.linkClasses||""}`,children:a.value}),(0,t.jsxs)("button",{className:"cm-btn cm-btn--xs cm-btn--primary cm-copylink__btn js-cm-copylink__btn",children:[(0,t.jsx)("span",{className:"js-cm-copylink__btn-label--initial",children:window.translate("Legacy_styleguide_settings_share_url_btn_copy")}),(0,t.jsx)("span",{className:"cm-copylink__btn-label--copied js-cm-copylink__btn-label--copied",children:window.translate("Legacy_styleguide_settings_share_url_btn_copied")})]})]}),a.renewButtonEnabled?(0,t.jsx)("div",{className:"cm-copylink__renew",children:(0,t.jsx)("button",{className:`cm-copylink__renew-button cm-btn cm-actions__action ${a.renewButtonClasses||""}`,title:window.translate("Legacy_styleguide_settings_share_url_btn_renew"),children:(0,t.jsx)("i",{className:"ca-icon--refresh ca-icon--md"})})}):null]}),a.hint?(0,t.jsx)("div",{className:"cm-copylink__row",children:(0,t.jsx)("div",{className:"cm-copylink__hint",children:a.hint})}):null]}))),pi=(0,_.I)(a=>(0,t.jsx)("img",{className:"co-asset-cropping__image-item",src:a.url}));var xa=r(48459);const br=(0,_.I)(a=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"co-settings__row js-cm-setting-frame__values",children:[(0,t.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,t.jsx)(ie.A,{id:"width",group:a.group,label:window.translate("Legacy_asset_cropping_input_width"),suffix:window.translate("Legacy_asset_cropping_input_unit"),value:a.width,type:"number",placeholder:window.translate("Legacy_settings_dimensions_right_placeholder"),modifier:a.showMaxWidthLimitationText?"":"borderless"})}),(0,t.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,t.jsx)(ie.A,{id:"height",group:a.group,label:window.translate("Legacy_asset_cropping_input_height"),suffix:window.translate("Legacy_asset_cropping_input_unit"),value:a.height,type:"number",placeholder:window.translate("Legacy_settings_dimensions_top_placeholder"),modifier:a.showMaxWidthLimitationText?"":"borderless"})})]}),a.showMaxWidthLimitationText&&(0,t.jsx)("div",{className:"tw-px-5 tw-py-2 tw-bg-base-alt",children:(0,t.jsx)(xa.E,{size:"x-small",color:"weak",children:window.translate("Legacy_asset_cropping_width_limitation")})})]}));var bi=r(70402);const ki=(0,_.I)(a=>(0,t.jsx)(bi.w,{id:"ratio",value:a.ratio,lockAspectRatio:a.lockAspectRatio}));class Lr extends b.j{constructor(){super(...arguments),this.ratio="original",this.timeout=null}static get MAX_IMAGE_WIDTH_IN_PX(){return 800}static get LINK_RENDER_DELAY_IN_MILLIS(){return 250}static get DOWNLOAD_TYPE(){return"CROP"}static get IMAGE_WORKER_INTERMEDIATE_MAX_WIDTH(){return 4096}on(e){this.assetDownload=this.sandbox.getConfigParam("assetDownload"),this.sandbox.subscribe("events",this),this.assetId=this.$ctx.dataAsNumber("assetId"),this.assetDataUrl=this.$ctx.dataAsString("assetDataUrl")||`/api/screen/data/${this.assetId}?auditTrailTracking=false`,this.lockAspectRatio=this.$ctx.dataAsBoolean("lockAspectRatio"),this.$image=this.$ctx.find(".js-co-asset-cropping__image"),this.$ratio=this.$ctx.find(".js-co-asset-cropping__ratio"),this.$inputs=this.$ctx.find(".js-co-asset-cropping__inputs"),this.$loader=this.$ctx.find(".js-co-asset-cropping__loader"),this.$error=this.$ctx.find(".js-co-asset-cropping__error"),this.$link=this.$ctx.find(".js-co-asset-cropping__link"),this.$buttons=this.$ctx.find(".js-co-asset-cropping__buttons"),this.bindModalButtons(),this.bindCopyClicks(),this.loadAsset().then(this.renderImageAndControls.bind(this),this.renderError.bind(this)),e()}bindModalButtons(){this.$ctx.on("click",".js-co-asset-cropping__download",e=>{e.preventDefault();const n=encodeURIComponent(`${this.asset.title}.${this.asset.ext}`),d=`${this.downloadUrl}&download=true&filename=${n}`;(0,F.s)("download asset",{download_type:Lr.DOWNLOAD_TYPE,via:"CROPPING_DIALOG"}),this.assetDownload.downloadAsset(this.asset,d,"CUSTOM_SIZE"),this.fire("assetCroppingDownloadExecuted",{asset:this.asset,downloadUrl:d,downloadType:Lr.DOWNLOAD_TYPE})}),this.$ctx.on("click",".js-co-asset-cropping__close",()=>{this.fire("closeModal")})}bindCopyClicks(){this.$ctx.on("click",".js-co-asset-cropping__link",async e=>{e.stopPropagation(),(0,F.s)("copy cropped asset link"),await this.trackAssetAuditTrail()})}async loadAsset(){this.renderLoadingState();const e=await this.data.get(this.assetDataUrl);if(e.success)this.asset="asset"in e?e.asset:e,this.overwriteAssetDimensions();else return Promise.reject(e)}renderImageAndControls(){this.tpl.addAndActivate(this.$image,(0,s.EY)(pi,{url:this.assetDownload.getSizedUrl(this.asset,Lr.MAX_IMAGE_WIDTH_IN_PX)})),this.$imageElement=this.$image.find("img"),this.$imageElement.cropper({viewMode:1,autoCropArea:1,aspectRatio:this.asset.width/this.asset.height,dragMode:"none",minCropBoxWidth:1,minCropBoxHeight:1,checkCrossOrigin:!1,cropBoxResizable:!0,cropBoxMoveable:!0,zoomOnWheel:!1,guides:!0,ready:this.renderReadyState.bind(this),crop:e=>{var n;this.downloadUrl=`${this.assetDownload.getSizedUrl(this.asset,this.getEventualWidth(e))}&rect=${Math.max(0,e.x)},${Math.max(0,e.y)},${Math.min(this.asset.width,e.width)},${Math.min(this.asset.height,e.height)}&reference_width=${(n=this.$imageElement.get(0))==null?void 0:n.width}`,this.updateInputValues(),this.$link.children().length===0?this.renderLinksImmediately():this.renderLinksDebounced()}}),this.renderAndBindRatioSetting(),this.renderInputSettings()}renderAndBindRatioSetting(){this.ratioSetting&&this.ratioSetting.destroy(),this.tpl.addAndActivate(this.$ratio,(0,s.EY)(ki,{ratio:this.ratio,lockAspectRatio:this.lockAspectRatio})),this.ratioSetting=new re.D(this.$ctx.find(".js-co-asset-cropping__ratio"),this.sandbox),this.ratioElem=this.ratioSetting.getElem("ratio"),this.ratioElem.changed=e=>{this.ratio=e.ratio,this.$imageElement.cropper("setAspectRatio",this.getAspectRatio(e.ratio)),this.applyFocalPoint(),(0,F.s)("change cropping ratio",{ratio:e.ratio})}}renderInputSettings(){this.inputSettings&&this.inputSettings.destroy(),this.tpl.addAndActivate(this.$inputs,(0,s.EY)(br,{width:this.asset.width,height:this.asset.height,showMaxWidthLimitationText:this.asset.width>=Lr.IMAGE_WORKER_INTERMEDIATE_MAX_WIDTH})),this.inputSettings=new re.D(this.$ctx.find(".js-co-asset-cropping__inputs"),this.sandbox),this.heightInputElem=this.inputSettings.getElem("height"),this.widthInputElem=this.inputSettings.getElem("width"),this.updateInputValues(),this.heightInputElem.changed=Gn()(e=>{if(!e)return;const d=Math.max(parseInt(e),1)/this.asset.height;this.$imageElement.cropper("setData",{height:this.getCanvasHeight()*this.getImagePreviewScaleFactor()*d}),this.adjustCropperToFocalPoint()},1e3),this.widthInputElem.changed=Gn()(e=>{if(!e)return;const d=Math.max(parseInt(e),1)/this.asset.width;this.$imageElement.cropper("setData",{width:this.getCanvasWidth()*this.getImagePreviewScaleFactor()*d}),this.adjustCropperToFocalPoint()},1e3)}renderLinksDebounced(){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.renderLinksImmediately()},Lr.LINK_RENDER_DELAY_IN_MILLIS)}renderLinksImmediately(){if(this.downloadUrl){const e=this.$link.children().length>0;this.tpl.addAndActivate(this.$link,(0,s.EY)(Zn,{value:this.downloadUrl,modifier:"one-line",linkClasses:"js-co-asset-cropping__copy-link"})),e&&this.$link.find(".js-co-asset-cropping__copy-link").fadeOut(100).fadeIn(100)}}renderError(){this.$loader.addClass("state-hidden"),this.$error.removeClass("state-hidden")}renderReadyState(){this.$image.removeClass("state-hidden"),this.$ratio.removeClass("state-hidden"),this.$inputs.removeClass("state-hidden"),this.$loader.addClass("state-hidden"),this.$buttons.removeClass("state-hidden"),this.applyFocalPoint()}renderLoadingState(){this.$image.addClass("state-hidden"),this.$ratio.addClass("state-hidden"),this.$inputs.addClass("state-hidden"),this.$loader.removeClass("state-hidden"),this.$error.addClass("state-hidden"),this.$buttons.addClass("state-hidden")}applyFocalPoint(){if(!this.account.hasFeature("FOCAL_POINT")||!this.asset.focal_point_x&&!this.asset.focal_point_y||!["16:9","4:3","square","original"].includes(this.ratio))return;const e=parseInt(this.asset.focal_point_x*this.asset.width),n=parseInt(this.asset.focal_point_y*this.asset.height);this.$imageElement.cropper("setData",this.calculateRatioCropperData(e,n,this.getAspectRatioAsString())),this.adjustCropperToFocalPoint()}adjustCropperToFocalPoint(){const e=this.getCanvasWidth()*this.getImagePreviewScaleFactor(),n=this.getCanvasHeight()*this.getImagePreviewScaleFactor(),d=e*parseFloat(this.asset.focal_point_x)-this.$imageElement.cropper("getData").width/2,x=n*parseFloat(this.asset.focal_point_y)-this.$imageElement.cropper("getData").height/2;this.$imageElement.cropper("setData",{x:this.clampValue(d,e),y:this.clampValue(x,n)})}clampValue(e,n){return Math.max(0,Math.min(e,n))}calculateRatioCropperData(e,n,d){const x=parseInt(d.split(":")[0]),D=parseInt(d.split(":")[1]),z=this.getImagePreviewScaleFactor()*this.getCanvasWidth()/this.asset.width,ne=this.getImagePreviewScaleFactor()*this.getCanvasHeight()/this.asset.height,_e=Math.min(e,this.asset.width-e)/x*2,Ce=Math.min(n,this.asset.height-n)/D*2,De=Math.min(_e,Ce);return{width:x*De*z||this.asset.width,height:D*De*ne||this.asset.height,x:(e-x/2*De)*z,y:(n-D/2*De)*ne}}updateInputValues(){if(!this.heightInputElem||!this.widthInputElem||!this.asset)return;const e=this.$imageElement.cropper("getData");this.heightInputElem.$text.val(this.getEventualHeight(e)),this.widthInputElem.$text.val(this.getEventualWidth(e))}getAspectRatio(e){switch(e){case"original":return this.asset.width/this.asset.height;case"16:9":return 16/9;case"4:3":return 4/3;case"square":return 1;case"custom":return null;default:return}}getAspectRatioAsString(){switch(this.ratio){case"square":return"1:1";case"original":return`${this.asset.width}:${this.asset.height}`;default:return this.ratio}}getEventualWidth(e){return Math.round(this.asset.width*this.getRelativeCroppingWidth(e))}getEventualHeight(e){return Math.round(this.asset.height*this.getRelativeCroppingHeight(e))}getCanvasWidth(){return this.$ctx.find(".cropper-canvas").width()}getCanvasHeight(){return this.$ctx.find(".cropper-canvas").height()}getRelativeCroppingWidth(e){return e.width/(this.getImagePreviewScaleFactor()*this.getCanvasWidth())}getRelativeCroppingHeight(e){return e.height/(this.getImagePreviewScaleFactor()*this.getCanvasHeight())}getImagePreviewScaleFactor(){return Lr.MAX_IMAGE_WIDTH_IN_PX/this.getCanvasWidth()}async trackAssetAuditTrail(){await this.data.post(`/api/asset-audit-trail/${this.assetId}/share-cdn-crop-link-copied-record`,{share_url:this.downloadUrl})}overwriteAssetDimensions(){if(this.asset.width<=Lr.IMAGE_WORKER_INTERMEDIATE_MAX_WIDTH)return;const e=this.asset.width,n=this.asset.height;this.asset.width=Lr.IMAGE_WORKER_INTERMEDIATE_MAX_WIDTH,this.asset.height=Math.round(Lr.IMAGE_WORKER_INTERMEDIATE_MAX_WIDTH/e*n)}}var Fn=Object.defineProperty,jo=Object.getOwnPropertySymbols,co=Object.prototype.hasOwnProperty,Oo=Object.prototype.propertyIsEnumerable,Ao=(a,e,n)=>e in a?Fn(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,To=(a,e)=>{for(var n in e||(e={}))co.call(e,n)&&Ao(a,n,e[n]);if(jo)for(var n of jo(e))Oo.call(e,n)&&Ao(a,n,e[n]);return a};const uo=(0,_.I)(a=>{var e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"cm-assetpreview__preview-image-container",children:(0,t.jsx)("img",To({className:"co-assetpreview__preview-image",src:a.previewUrl},a.backgroundColor?{style:{backgroundImage:"none",backgroundColor:`${a.backgroundColor}`}}:{}))}),(0,t.jsx)("div",{className:"ca-assetpreview__asset-name",children:a.assetName}),(0,t.jsxs)("div",{className:"co-assetpreview__asset-details-container",children:[(0,t.jsx)("div",{className:"cm-assetpreview__asset-detail",children:a.imageResolution}),(0,t.jsx)("div",{className:"cm-assetpreview__asset-detail",children:a.fileSize}),(0,t.jsxs)("div",{className:"cm-assetpreview__asset-detail",children:[a.fileType?(0,t.jsx)("span",{className:"ca-assetpreview__asset-detail__badge",children:a.fileType}):null,a.colorSpace?(0,t.jsx)("span",{className:"ca-assetpreview__asset-detail__badge",children:a.colorSpace}):null]}),a.utils.account.hasFeature("TARGETS")&&a.targets&&a.targets.length>0?(0,t.jsx)("div",{className:"cm-assetpreview__asset-detail",children:(e=a.targets)==null?void 0:e.map((n,d)=>(0,t.jsxs)("span",{className:"ca-assetpreview__asset-detail__badge",children:[(0,t.jsx)(g.V,{icon:"target"}),n.name]},d))}):null,(0,t.jsxs)("div",{className:"cm-assetpreview__asset-detail",children:[window.translate("Legacy_assetpreview_created_by"),a.creator.name]}),a.status&&a.status.color&&a.status.name?(0,t.jsxs)("div",{className:"cm-assetpreview__asset-detail",children:[(0,t.jsx)("span",{className:"ca-badge__bubble js-o-navigation__status-bubble",style:{backgroundColor:`${a.status.color}`}}),a.status.name]}):null]})]})}),So=(0,_.I)(a=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"ca-assetpreview__asset-name",children:(0,t.jsx)(g.V,{icon:"text-snippet",classes:"co-assetpreview__asset-icon"})}),(0,t.jsxs)("div",{className:"co-assetpreview__asset-details-container",children:[(0,t.jsx)("div",{className:"ca-assetpreview__asset-name",children:a.assetName}),(0,t.jsx)("div",{className:"cm-assetpreview__asset-detail cm-assetpreview__asset-detail--snippet-content",children:a.assetValue}),(0,t.jsxs)("div",{className:"cm-assetpreview__asset-detail",children:[window.translate("Legacy_assetpreview_created_by"),a.creator.name]}),a.status&&a.status.color&&a.status.name?(0,t.jsxs)("div",{className:"cm-assetpreview__asset-detail",children:[(0,t.jsx)("span",{className:"ca-badge__bubble js-o-navigation__status-bubble",style:{backgroundColor:`${a.status.color}`}}),a.status.name]}):null]})]}));class Ai extends b.j{on(e){this.sandbox.subscribe("events",this);const n=this.$ctx.data("screen-id");this.previewContainer=this.$ctx.find(".js-o-assetpreview__preview-container"),this.previewContainer.html((0,s.EY)(m.T)),this.data.get(`/api/screen/data/${n}`).then(d=>{switch(d.object_type){case"IMAGE":this.renderImagePreview(d);break;case"TEXT_SNIPPET":this.renderTextSnippetPreview(d);break;default:this.renderImagePreview(d);break}}),e()}renderImagePreview(e){this.previewContainer.html((0,s.EY)(uo,{backgroundColor:e.background_color,previewUrl:e.preview_url,assetName:`${e.title}.${e.ext}`,imageResolution:`${e.width} x ${e.height}`,fileType:e.ext.toUpperCase(),colorSpace:e.color_space,fileSize:e.filesize_formatted,creator:{name:e.creator_name,avatarUrl:e.creator_image},tags:e.tags,targets:e.targets,status:e.status?e.status.find(n=>n.current):void 0}))}renderTextSnippetPreview(e){this.previewContainer.html((0,s.EY)(So,{assetName:e.text_snippet_data.name,assetValue:e.text_snippet_data.value,creator:{name:e.creator_name,avatarUrl:e.creator_image},tags:e.tags,status:e.status?e.status.find(n=>n.current):void 0}))}}var hi=r(8609),si=r(29298),Li=r(11469),Me=r(88133),ue=r(5181);class xe extends b.j{constructor(e,n,d){super(e,n,d),this.$loader=ue((0,s.EY)(hi.$,{id:this.id}))}on(e){this.sandbox.subscribe("events",this),this.project=this.$ctx.data("project"),this.sandbox.addModules(this.$loader);const n=this.$ctx.find(".js-cm-audio__upload-container");n.length>0&&this._initFileUpload(n),e()}_renderPlayer(e){this.$ctx.html((0,s.EY)(si.N,{generic_url:e}))}_initFileUpload(e){ue(".js-cm-audio__file-input",this.$ctx).upload({dataType:"json",dropZone:e,add:function(n,d){const x=d.name.split(".").pop().toLowerCase();ue.inArray(x,(0,c.J2)())>-1&&d.files[0].type.includes("audio")?this.data.checkStorageLimit(d.files[0].size).then(()=>{d.submit()}):this.displayError()}.bind(this),start:function(){e.find(".js-cm-audio__upload-icon").replaceWith(this.$loader)}.bind(this),progress:function(n,d){const x=parseInt(d.loaded/d.total*100,10);this.fire("progress",{id:this.id,progress:x})}.bind(this),done:async function(n,d){var x;if((x=d==null?void 0:d.result[0])!=null&&x.file_id){const D=await(0,Li.Vq)(d.result[0].file_id,this.project);typeof this.uploaded=="function"&&this.uploaded(D),this._renderPlayer(D.generic_url)}}.bind(this)})}displayError(){(0,Me.K)({template:"block-audio-upload-error",type:"error",showCancelButton:!1,confirmButtonText:"OK",closeOnConfirm:!0})}}var Pe=r(77345),Ge=r(58848),wt=r(44084);class xt extends b.j{on(e){this.tpl.bindDataAttributes(this,{color:{type:String,default:"rgb(163, 206, 98)",changed:()=>this.render()},percentage:{type:Number,default:10,changed:()=>this.render()}}),this.render(),e()}render(){this.$ctx.children().css({width:`${this.percentage}%`,"background-color":this.color})}}const Tt=(0,_.I)(a=>(0,t.jsx)("div",{className:`ca-bar-loader__fill js-ca-bar-loader__fill js-ca-bar-loader__fill--${a.type} ca-bar-loader__fill--${a.type} ca-bar-loader__fill--${a.theme}`}));class Je extends b.j{static get SIZES(){return[Je.SIZE_TINY,Je.SIZE_SMALL,Je.SIZE_MEDIUM,Je.SIZE_LARGE]}static get SIZE_TINY(){return"tiny"}static get SIZE_SMALL(){return"small"}static get SIZE_MEDIUM(){return"medium"}static get SIZE_LARGE(){return"large"}static get TYPES(){return[Je.TYPE_DETERMINATE,Je.TYPE_INDETERMINATE]}static get TYPE_DETERMINATE(){return"determinate"}static get TYPE_INDETERMINATE(){return"indeterminate"}static get THEMES(){return[Je.THEME_DARK,Je.THEME_LIGHT]}static get THEME_LIGHT(){return"light"}static get THEME_DARK(){return"dark"}static get STATES(){return[Je.STATE_LOADING,Je.STATE_SUCCESS,Je.STATE_FAILED]}static get STATE_LOADING(){return"loading"}static get STATE_SUCCESS(){return"success"}static get STATE_FAILED(){return"failed"}on(e){this.tpl.bindDataAttributes(this,{size:{type:String,allowed:Je.SIZES,default:Je.SIZE_MEDIUM},theme:{type:String,allowed:Je.THEMES,default:Je.THEME_LIGHT},state:{type:String,allowed:Je.STATES,default:Je.STATE_LOADING,changed:()=>this.updateState()},type:{type:String,allowed:Je.TYPES,default:Je.TYPE_INDETERMINATE},progress:{type:Number,default:0,changed:()=>this.updateProgress()}}),this.renderBar(),this.renderCssClasses(),this.updateState(),this.type===Je.TYPE_DETERMINATE&&this.updateProgress(),e()}renderBar(){const e=(0,s.EY)(Tt,{type:this.type,theme:this.theme});this.$ctx.html(e)}renderCssClasses(){this.$ctx.addClass(`ca-bar-loader--${this.size} ca-bar-loader--${this.theme}`)}updateProgress(){this.$ctx.find(".js-ca-bar-loader__fill--determinate").css({width:`${this.progress}%`})}updateState(){const e=this.$ctx.find(".js-ca-bar-loader__fill");e.removeClass("ca-bar-loader__fill--state-failed"),e.removeClass("ca-bar-loader--state-success"),this.state==="failed"&&e.addClass("ca-bar-loader__fill--state-failed"),this.state==="success"&&(this.progress=100,this.updateProgress(),e.addClass("ca-bar-loader__fill--state-success"))}}var tt=r(9786),ke=r(41011),Ft=r(83545),Wt=r(5181);class qt extends b.j{on(e){this.sandbox.subscribe("events",this),this.translations={sampleImagesLoaderText:this.$ctx.data("sample-images-loader-text")};const n=this.$ctx.find(".js-co-blankslate__cta");if(n.length>0){const x=n.data("label"),D=n.get(0);if(!D)throw new Error("Element not found.");(0,s.Cc)(tt.$,D,{style:ke.in.Primary,size:ke.Mp.Medium,type:ke.VQ.Button,icon:(0,t.jsx)(Ft.default,{size:ma.l.Size16}),children:x,onClick:()=>{const z=n.data("event-name");this.fire(z,{type:n.data("type")})}})}const d=this.$ctx.find(".js-co-blankslate__cta-add-sample");if(d.length>0){const x=d.data("label"),D=d.get(0);if(!D)throw new Error("Element not found.");(0,s.Cc)(tt.$,D,{style:ke.in.Secondary,size:ke.Mp.Medium,type:ke.VQ.Button,icon:(0,t.jsx)(Ft.default,{size:ma.l.Size16}),children:x,onClick:()=>{const z=Wt((0,s.EY)(m.T,{text:this.translations.sampleImagesLoaderText})),ne=this.$ctx.find(".js-co-blankslate__btn-bar"),_e=this.$ctx.find(".js-co-blankslate__text");(0,F.s)("add media library samples"),_e.hide(),ne.children().hide(),ne.prepend(z),this.data.post(`/api/project/sample/${(0,Bt.MJ)()}`,{}).then(Ce=>{Ce.success?page(`/projects/${(0,Bt.MJ)()}/${(0,Bt.Y4)()}`):(_e.show(),ne.children().show()),z.detach()})}})}e()}}var Pt=r(74688);const ls=2500;class cs extends b.j{on(e){this.timeout=void 0,this.bindButtonClick(),e()}bindButtonClick(){this.$ctx.on("click",e=>this.timeout?this.handleConfirmation():this.handleClickOnIcon(e))}handleConfirmation(){this.$ctx.hide(),this.timeout&&clearTimeout(this.timeout),this.timeout=void 0}handleClickOnIcon(e){this.$ctx.addClass("state-active"),this.timeout=window.setTimeout(()=>{this.$ctx.removeClass("state-active"),this.timeout=void 0},ls),e.stopPropagation(),e.preventDefault()}}var Ha=r(7017),Ya=r(27946),ca=r(5181);class Js extends b.j{on(e){const n=this.$ctx;this.sandbox.subscribe("events",this),this.sandbox.subscribe("tabs",this),this.sandbox.subscribe("router",this),this.observer=null,this.containerParameters={topOffset:0,height:0},ca("html").on("mousedown.btndropdown",x=>{const D=ca(x.target),z=D.closest(".js-cm-btn-dropdown__menu"),ne=z.find(".js-cm-btn-dropdown__menu.state-open"),_e=D.closest(".js-cm-btn-dropdown__toggle"),Ce=ca("body").hasClass("state-cm-modal-visible"),De=_e.length===0&&!Ce;if(z.length===0&&De){const Xe=n.find(".js-cm-btn-dropdown__menu.state-open");Xe.dataAsBoolean("explicitClose")||this.onCloseDropdown(Xe)}else if(ne.length>0&&De){const Xe=n.find(ne);Xe.dataAsBoolean("explicitClose")||this.onCloseDropdown(Xe)}}),n.on("keydown",".js-cm-btn-dropdown__menu.state-open",x=>{const D=n.find(".js-cm-btn-dropdown__menu.state-open");if(x.key==="Escape"&&(D.dataAsBoolean("explicitClose")||this.onCloseDropdown(D)),x.key==="Tab"){const{first:z,last:ne}=(0,Ya.u)(D[0]);ne===x.target&&!x.shiftKey?(x.preventDefault(),z==null||z.focus()):z===x.target&&x.shiftKey&&(x.preventDefault(),ne==null||ne.focus())}}),n.on("click.btndropdown",".js-cm-btn-dropdown__close",x=>{const z=ca(x.target).closest(".js-cm-btn-dropdown__menu");this.onCloseDropdown(z)}),n.on("clicked",".js-cm-btn-bar",x=>{const z=ca(x.target).closest(".js-cm-btn-dropdown__menu");this.onCloseDropdown(z)});const d=x=>{x.stopPropagation();const D=ca(x.currentTarget);n.find(".js-cm-btn-dropdown__toggle.state-open").filter((_e,Ce)=>{if(ca(Ce).is(D))return!1;let Xe=!1;return D.closest(".cm-btn-dropdown").parents(".cm-btn-dropdown").each((st,dt)=>{ca(dt).find(".js-cm-btn-dropdown__toggle.state-open").length>0&&(Xe=!0)}),D.closest('.cm-btn-dropdown__menu.state-open[data-float="true"]').length>0&&(Xe=!0),!Xe}).each((_e,Ce)=>{const De=ca(Ce),Xe=this.getMenu(De);this.close(De,Xe)});const ne=this.getMenu(D);this.toggle(D,ne)};n.on("click.btndropdown",".js-cm-btn-dropdown__toggle",d),e()}toggle(e,n){e.hasClass("state-open")?this.close(e,n):this.open(e,n)}onContext(){const e=ca(".js-cm-btn-dropdown__menu.state-open");e.length>0&&this.onCloseDropdown(e)}open(e,n){e.addClass("state-open");const d=e.data("event");if(n.show().addClass("state-open"),n.data("float")){let x=n.closest(".js-cm-modal__content");x.length===0&&(x=ca("body")),x.append(n),this.initializePopper(e,n),e.data("popper",this.popper),n.data("popper",this.popper)}if(d&&this.fire(`${d}Opened`,{$toggle:e,$menu:n},["events"]),this.position(e,n),this.observer&&this.observer.disconnect(),MutationObserver){this.observer=new MutationObserver(()=>{this.position(e,n)});const x={subtree:!0,childList:!0};this.observer.observe(n.get(0),x)}}initializePopper(e,n){const d={name:"preventOverflow",options:{altAxis:!0,padding:n.dataAsNumber("padding")||0}},x={name:"offset",options:{offset:[0,n.dataAsNumber("offset")]}},D={name:"flip",options:{enabled:!n.data("flipDisabled")}},z={placement:n.data("placement")||"bottom",strategy:n.data("fixed")?"fixed":"absolute",modifiers:[x,D,d]},ne=e.get(0),_e=n.get(0);this.popper=(0,Ha.n4)(ne,_e,z)}onSetCBtnDropdownContainerParameters(e){this.containerParameters={topOffset:e.topOffset,height:e.height}}onContentChanged(){this.popper&&this.popper.forceUpdate()}position(e,n){n.data("popper")?n.data("popper").forceUpdate():(this.resetToDefaultPosition(n),this.positionHorizontally(e,n),this.positionVertically(e,n))}resetToDefaultPosition(e){e.css({top:"120%",bottom:"auto"})}positionHorizontally(e,n){const d=n.outerWidth(),x=ca(window).width();n.hasClass("cm-btn-dropdown__menu--center")&&n.css({left:`${-d/2+e.outerWidth()/2+(n.data("offset")||0)}px`,right:"auto"});const D=n.offset().left;D+d>x&&n.css({left:"auto",right:0}),D<60&&n.css({left:0,right:"auto"})}positionVertically(e,n){const x=n.outerHeight(),D=ca(window).scrollTop(),z=n.offset().top-D;let ne=ca(window).height();const _e=n.hasClass("cm-btn-dropdown__menu--below");let Ce=z-e.outerHeight();const De=z+x,Xe=this.containerParameters.topOffset-D;Ce=Ce-Xe,ne-=ne-(Xe+this.containerParameters.height),De>ne&&Ce>x+10&&!_e?n.css({top:"auto",bottom:"120%"}):n.hasClass("cm-btn-dropdown__menu--above")||this.resetToDefaultPosition(n),n.hasClass("cm-btn-dropdown__menu--middle")&&n.css({bottom:"auto",top:"auto",transform:"translateY(-50%)"})}close(e,n){this.observer&&(this.observer.disconnect(),this.observer=null),n.data("float")&&(e.after(n),n.data("popper").destroy());const d=e.data("event");d&&this.fire(`${d}Closed`,{$toggle:e,$menu:n},["events"]),e.removeClass("state-open"),n.hide().removeClass("state-open"),ca(window).off("resize.btndropdown")}onCloseDropdown(e){if(e&&e.length>0){if(e.hasClass("js-cm-btn-dropdown__toggle")){const n=e,d=this.getMenu(n);this.close(n,d)}else if(e.hasClass("js-cm-btn-dropdown__menu")){const n=e,d=this.getToggle(n);this.close(d,n)}}}onOpenDropdown(e){if(e&&e.length>0){if(e.hasClass("js-cm-btn-dropdown__toggle")){const n=e,d=this.getMenu(n);this.open(n,d)}else if(e.hasClass("js-cm-btn-dropdown__menu")){const n=e,d=this.getToggle(n);this.open(d,n)}}}getMenu(e){let n=null;if(e.data("popper")){const d=e.data("popper");n=ca(d.state.elements.popper)}else n=e.next(".js-cm-btn-dropdown__menu");return n}getToggle(e){let n=null;if(e.data("popper")){const d=e.data("popper");n=ca(d.state.elements.reference)}else n=e.prev(".js-cm-btn-dropdown__toggle");return n}onTabSwitched(){this.popper&&this.popper.forceUpdate()}}var aa=r(5181);class Fa extends b.j{on(e){const n=this.$ctx;this.$radios=n.find(".js-cm-btn-switch__radio"),this.event=n.data("event"),this.sandbox.subscribe("events",this),this.$radios.on("change",d=>{const x=aa(d.target);this.fire(this.event,{filter:x.val()})}),e()}}var _a=r(93277),zs=r(87053),Jt=Object.defineProperty,Ss=Object.getOwnPropertySymbols,hs=Object.prototype.hasOwnProperty,fs=Object.prototype.propertyIsEnumerable,js=(a,e,n)=>e in a?Jt(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,Wa=(a,e)=>{for(var n in e||(e={}))hs.call(e,n)&&js(a,n,e[n]);if(Ss)for(var n of Ss(e))fs.call(e,n)&&js(a,n,e[n]);return a};const Pn=(0,_.I)(a=>(0,t.jsx)("div",{className:"ca-button-group__button js-ca-button-group__button","data-button-identifier":a.button.identifier,children:(0,t.jsx)(zs.S,Wa({},a.button))}));var Cn=r(77007),Xa=r(29835),An=r(27712),qr=r(5181),Cr=Object.defineProperty,Or=Object.defineProperties,Di=Object.getOwnPropertyDescriptors,ai=Object.getOwnPropertySymbols,Bi=Object.prototype.hasOwnProperty,mi=Object.prototype.propertyIsEnumerable,_i=(a,e,n)=>e in a?Cr(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,Ys=(a,e)=>{for(var n in e||(e={}))Bi.call(e,n)&&_i(a,n,e[n]);if(ai)for(var n of ai(e))mi.call(e,n)&&_i(a,n,e[n]);return a},Ga=(a,e)=>Or(a,Di(e));class Qs extends b.j{static get SIZES(){return _a.Q.SIZES}static get SIZE_DEFAULT(){return _a.Q.SIZE_MEDIUM}static get BACKGROUNDS(){return _a.Q.BACKGROUNDS}static get BACKGROUND_DEFAULT(){return _a.Q.BACKGROUND_WHITE}on(e){this.tpl.bindDataAttributes(this,{buttons:{type:Object,changed:()=>this.updateButtons()},size:{type:String,allowed:Qs.SIZES,default:Qs.SIZE_DEFAULT},background:{type:String,allowed:Qs.BACKGROUNDS,default:Qs.BACKGROUND_DEFAULT},noMargin:{type:Boolean}}),this.diffArray=new An.S("identifier"),this.renderStaticClasses(),this.renderButtons(),e()}renderStaticClasses(){this.$ctx.addClass(`ca-button-group--size-${this.size}`),this.noMargin&&this.$ctx.addClass("ca-button-group--no-margin")}renderButtons(){const e=this.getButtons(),{deleteRecords:n,moveRecords:d,addRecords:x,keepRecords:D}=this.diffArray.update(e);for(let z=0;z<n.length;z++)this.removeButtonById(n[z]);for(let z=0;z<D.length;z++){const{record:ne,position:_e}=D[z];this.updateButton(ne,_e)}for(let z=0;z<d.length;z++){const{record:ne,position:_e,afterRecordId:Ce}=d[z];this.moveButtonAfterButtonId(ne,_e,Ce)}for(let z=0;z<x.length;z++){const{record:ne,position:_e,afterRecordId:Ce}=x[z];this.addButtonAfterButtonId(ne,_e,Ce)}}renderButton(e,n){const d=this.extendButton(e,n);return(0,s.EY)(Pn,{button:d})}moveButtonAfterButtonId(e,n,d){const x=this.getButtonByIdentifier(e.identifier),D=this.getButtonByIdentifier(d),z=Xa.u.getFirstChildModule(x);D.after(x);const ne=this.extendButton(e,n);z.$ctx.dataAsBoolean("isDisabled",ne.isDisabled),z.$ctx.dataAsBoolean("isInProgress",ne.isInProgress),z.$ctx.dataAsString("label",ne.label)}updateButton(e,n){const d=this.getButtonByIdentifier(e.identifier),x=Xa.u.getFirstChildModule(d),D=this.extendButton(e,n);x.$ctx.dataAsBoolean("isDisabled",D.isDisabled),x.$ctx.dataAsBoolean("isInProgress",D.isInProgress),x.$ctx.dataAsString("label",D.label)}addButtonAfterButtonId(e,n,d){const x=this.renderButton(e,n),D=qr(x),z=this.getButtonByIdentifier(d);z.length===0?this.$ctx.append(D):z.after(D),window.application.sandbox.addModules(D),this.bindButton(D,e.identifier)}removeButtonById(e){const n=this.getButtonByIdentifier(e);if(n.length===0)return;const d=Xa.u.getFirstChildModule(n);d&&(d.stop(),n.remove())}bindButton(e,n){e.on("clicked",d=>{d.stopPropagation();const x=n.charAt(0).toUpperCase()+n.slice(1);this.tpl.fireCustomEvent(e,`buttonGroup${x}Clicked`)})}updateButtons(){this.renderButtons()}extendButton(e,n){const d=n===1,x=n===this.getButtons().length,D=!d&&!x,z=this.noMargin&&(x&&!d||D),ne=this.noMargin&&(d&&!x||D);return Ga(Ys({},e),{noRoundedCornersLeft:z,noRoundedCornersRight:ne,size:this.size,background:this.background})}getButtonByIdentifier(e){return this.$ctx.find(`.js-ca-button-group__button[data-button-identifier=${e}]`).first()}getButtons(){return Cn.y.isArray(this.buttons)?this.buttons:[]}}var ga=r(19194);class Kn extends b.j{on(e){this.sandbox.subscribe("events",this),this.$ctx.on("projectSortingChanged",n=>{this.fire("projectSortingChanged",n.detail.value)}),e()}}var lr=r(2122),ln=r.n(lr),ss=r(97254),Re=r.n(ss),mn=r(5181);class cr extends b.j{on(e){const n=this.$ctx,d=n.find(".js-cm-copycode__btn").get(0);if(!d)throw new Error("Element not found.");const x=new(ln())(d);this.codemirror=Re().fromTextArea(n.find(".js-cm-copycode__textarea").get(0),{mode:"htmlmixed",theme:"solarized",lineNumbers:!0,lineWrapping:!1,readOnly:!0,viewportMargin:1/0}),mn(document).on("lazybeforeunveil",D=>{var z;mn(D.target).is(n)&&((z=this.codemirror)==null||z.refresh())}),x.on("success",D=>{const z=mn(D.trigger),ne=z.find(".js-cm-copycode__btn-label--initial"),_e=z.find(".js-cm-copycode__btn-label--copied");ne.velocity("stop"),_e.velocity("stop"),ne.velocity("transition.slideDownOut",{duration:100,complete(){_e.velocity("transition.slideUpIn",{duration:100,complete(){_e.velocity("transition.slideDownOut",{duration:100,delay:1e3,complete(){ne.velocity("transition.slideUpIn",{duration:100})}})}})}})}),e()}setValue(e){var n,d;(n=this.codemirror)==null||n.setValue(e),(d=this.codemirror)==null||d.refresh(),this.$ctx.find(".js-cm-copycode__btn").attr("data-clipboard-text",e)}}var Dr=r(5181);class Gr extends b.j{on(e){this.sandbox.subscribe("events",this);const n=this.$ctx.data("id"),d=this.$ctx.find(".js-cm-copycontent__btn").get(0),x=this.$ctx.find(".js-cm-copycontent__content").get(0);if(!d||!x)throw new Error("Element not found.");new(ln())(d,{target:()=>x}).on("success",z=>{const ne=Dr(z.trigger),_e=ne.find(".js-cm-copycontent__btn-label--initial"),Ce=ne.find(".js-cm-copycontent__btn-label--copied");_e.velocity("stop"),Ce.velocity("stop"),_e.velocity("transition.slideDownOut",{duration:100,complete:()=>Ce.velocity("transition.slideUpIn",{duration:100,complete:()=>Ce.velocity("transition.slideDownOut",{duration:100,delay:1e3,complete:()=>_e.velocity("transition.slideUpIn",{duration:100})})})}),this.fire("copyContent",{id:n})}),e()}}var Ar=r(5181);class Wi extends b.j{on(e){const n=this.$ctx.find(".js-cm-copylink__btn").get(0),d=this.$ctx.find(".js-cm-copylink__link").get(0);if(!n||!d)throw new Error("Element not found.");const x=new(ln())(n,{target:()=>d});x.on("success",D=>{const z=Ar(D.trigger),ne=z.find(".js-cm-copylink__btn-label--initial"),_e=z.find(".js-cm-copylink__btn-label--copied");ne.velocity("stop"),_e.velocity("stop"),this.tpl.fireCustomEvent(this,"copylinkCopied",{link:D.text}),ne.velocity("transition.slideDownOut",{duration:100,complete:()=>_e.velocity("transition.slideUpIn",{duration:100,complete:()=>_e.velocity("transition.slideDownOut",{duration:100,delay:1e3,complete:()=>ne.velocity("transition.slideUpIn",{duration:100})})})}),x.on("success",Ce=>{const De=Ar(Ce.trigger),Xe=De.find(".js-cm-copylink__btn-label--initial"),st=De.find(".js-cm-copylink__btn-label--copied");Xe.velocity("stop"),st.velocity("stop"),this.tpl.fireCustomEvent(this,"copylinkCopied",{link:Ce.text}),Xe.velocity("transition.slideDownOut",{duration:100,complete:()=>st.velocity("transition.slideUpIn",{duration:100,complete:()=>st.velocity("transition.slideDownOut",{duration:100,delay:1e3,complete:()=>Xe.velocity("transition.slideUpIn",{duration:100})})})})}),e()})}setValue(e){this.$ctx.find(".js-cm-copylink__link").text(e)}}class ao extends b.j{on(e){this.sandbox.subscribe("events",this),this.settings=new re.D(this.$ctx,this.sandbox),this.settings.validation(()=>this.create()),e()}create(){this.data.post("/api/brand/create/",this.settings.serialize()).then(e=>{e.success&&(this.fire("closeModal",["events"]),(0,F.s)("create brand"),page(`/brands/${e.brand.id}/${e.brand.slug}`))})}onModalOpened(e){e.id==="modal"&&this.settings.getFirstElem().focus()}}var no=Object.defineProperty,ro=Object.defineProperties,Qo=Object.getOwnPropertyDescriptors,Eo=Object.getOwnPropertySymbols,Io=Object.prototype.hasOwnProperty,nl=Object.prototype.propertyIsEnumerable,Ro=(a,e,n)=>e in a?no(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,Po=(a,e)=>{for(var n in e||(e={}))Io.call(e,n)&&Ro(a,n,e[n]);if(Eo)for(var n of Eo(e))nl.call(e,n)&&Ro(a,n,e[n]);return a},Xo=(a,e)=>ro(a,Qo(e));class Mr extends b.j{on(e){this.sandbox.subscribe("events",this),this.tpl.bindDataAttributes(this,{projectId:{type:Number},setId:{type:Number}}),this.settings=new re.D(this.$ctx,this.sandbox),this.settings.validation(()=>this.create()),e()}create(){const e=this.settings.serialize();this.data.post("/api/asset",Xo(Po({},e),{object_type:"BRAND_UPDATE",project_id:this.projectId,set_id:this.setId})).then(n=>{if(n.success){(0,F.s)("create connect email",{type:"email"}),this.fire("closeModal",["events"]);const d=n.data.brand_update.id;page(`/brand-update/${d}`)}})}onModalOpened(e){e.id==="modal"&&this.settings.getElem("title").focus()}}var qo=r(5181),po=Object.defineProperty,el=Object.getOwnPropertySymbols,$o=Object.prototype.hasOwnProperty,Rr=Object.prototype.propertyIsEnumerable,No=(a,e,n)=>e in a?po(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,Vo=(a,e)=>{for(var n in e||(e={}))$o.call(e,n)&&No(a,n,e[n]);if(el)for(var n of el(e))Rr.call(e,n)&&No(a,n,e[n]);return a};class Lo extends b.j{on(e){this.sandbox.subscribe("events",this),this.settings=new re.D(this.$ctx,this.sandbox),this.link=this.$ctx.data("link"),this.brandId=this.$ctx.data("brand"),this.libraryType=this.$ctx.data("type").toUpperCase(),this.settings.validation(()=>this.create(),()=>this.fire("cancelNavigationItemCreation")),this.link&&this.data.get(`/api/libraries/${this.brandId}?type=${this.libraryType}`).then(n=>{if(n.success&&n.data&&n.data.length>0){const d=this.settings.getElem("dropdown_actions");d.addOptions(n.data.map(x=>({value:x.id,name:x.name})),!0),d.setIndex(0)}}),e()}async createLibraryDocument(e,n,d){const x=await this.data.post("/api/document",{portal_id:d,title:e,heading:e,subheading:window.translate("NavigationManager_createLibrary_description"),mode:this.libraryType,settings:{project:n}});if(x.success)return x.data;throw new Error(x)}async create(){const e=this.settings.serialize(),n=qo(".document").data("hub");if(e.project_type=this.libraryType,e.auto_tagging_enabled=e.enable_auto_tagging,e.dropdown_actions==="create"||!this.link)this.data.post("/api/project/add/",e).then(async d=>{d.success&&(this.link===!0?((0,F.s)("create library",{type:this.libraryType,link:!0}),await this.createLibraryDocument(e.name,d.project.id,n),(0,F.s)("create guideline document",{type:this.libraryType}),this.fire("closeModal",["events"]),page(d.project.url)):((0,F.s)("create library",Vo({type:this.libraryType,link:!1},this.libraryType===As.g.MediaLibrary&&{auto_tagging_enabled:e.auto_tagging_enabled})),this.fire("subscribeProject",{project:d.project},["events"]),this.fire("closeModal",["events"]),page(d.project.url)))}).catch(()=>{this.fire("closeModal",["events"]),this.fire("swal",{template:"editor-permission-error",type:"error",closeOnConfirm:!0,doNotClose:!0})});else{const d=await this.createLibraryDocument(e.name,e.dropdown_actions,n);(0,F.s)("create guideline document",{type:this.libraryType}),window.location.href=`/document/${d.id}`}}onModalOpened(e){e.id==="modal"&&this.settings.getElem("name").focus()}}class ko extends b.j{on(e){this.sandbox.subscribe("events",this),this.settings=new re.D(this.$ctx,this.sandbox),this.settings.validation(()=>this.create()),e()}create(){const e=this.settings.serialize();e.mode="CODE",this.data.post("/api/patterns?full=true",e).then(n=>{n.success&&(this.fire("closeModal",["events"]),this.fire(`pattern${e.key}Created`,n.pattern))})}onModalOpened(e){e.id==="modal"&&this.settings.getElem("name").focus()}}class Wo extends b.j{on(e){this.sandbox.subscribe("events",this),this.settings=new re.D(this.$ctx,this.sandbox),this.settings.validation(()=>this.create()),e()}create(){const e=this.settings.serialize();e.project_type="PATTERNLIBRARY",this.data.post("/api/project/add/",e).then(n=>{n.success&&(this.fire("closeModal",["events"]),page(n.project.url))}).catch(()=>{this.fire("closeModal",["events"]),this.fire("swal",{template:"editor-permission-error",type:"error",closeOnConfirm:!0,doNotClose:!0})})}onModalOpened(e){e.id==="modal"&&this.settings.getElem("name").focus()}}var Kr=r(2728),tl=r(68084),Wn=r(29083);const cl=(0,_.I)(a=>(0,t.jsxs)("form",{children:[(0,t.jsx)(vt.X,{}),(0,t.jsxs)("div",{className:"co-create-portal__content",children:[(0,t.jsx)("h2",{className:"ca-h2",children:window.translate("Legacy_label_portal_create_title")}),(0,t.jsx)("p",{className:"co-create-portal__desc",children:window.translate("Legacy_label_portal_create_description")})]}),(0,t.jsxs)("div",{className:"co-create-portal__settings",children:[(0,t.jsxs)("div",{className:"g-row",children:[(0,t.jsxs)("div",{className:"g-col g-col-md-6",children:[(0,t.jsx)(Wn.f,{id:"document_id",value:a.document_id}),(0,t.jsx)(tl.K,{type:"advanced",id:"template",value:"hub",label:window.translate("Legacy_label_portal_template"),options:a.templates}),(0,t.jsx)("p",{className:"co-create-portal__hint",children:window.translate("Legacy_label_portal_create_hint")})]}),(0,t.jsx)("div",{className:"g-col g-col-md-6 js-co-create-portal__right"})]}),(0,t.jsx)("div",{className:"cm-btn-bar cm-btn-bar--right cm-btn-bar--section js-cm-setting__actions",children:(0,t.jsx)(Kr.b,{label_submit:window.translate("Legacy_btn_create_portal")})})]})]})),yi=(0,_.I)(a=>(0,t.jsx)("div",{className:"co-create-portal__preview",children:(0,t.jsx)("img",{className:"co-create-portal__preview-image",src:`${a.image}?v=2`,title:a.name,alt:a.name})}));var zo=r(5181);class _o extends b.j{on(e){this.sandbox.subscribe("events",this),this.settings=null,this.templates=[],this.data.get("/api/brandportal").then(n=>{if(n.success){const d=parseInt(zo("body").data("document"));this.templates=n.templates,this.render(zo.extend(!0,{},n,{document_id:d}))}}),e()}render(e){const n=zo((0,s.EY)(cl,e));this.$ctx.html(n),this.settings=new re.D(n,this.sandbox),this.settings.validation(()=>this.create());const d=this.settings.getElem("template");d.changed=()=>this.renderPreview(),this.renderPreview()}getTemplate(e){return this.templates.find(n=>n.id===e)}renderPreview(){const e=this.$ctx,n=this.settings.serialize(),d=this.getTemplate(n.template);e.find(".js-co-create-portal__right").html((0,s.EY)(yi,d))}create(){const e=this.settings.serialize();this.data.post("/api/brandportal",e).then(n=>{n.success&&((0,F.s)("activate cover page"),setTimeout(()=>{this.fire("closeModal",["events"]),window.location.href=`${n.data.url}?edit`},1e3))})}}var ni=r(26725),qi=r(59240),zi=r(50448),rl=Object.defineProperty,ho=Object.defineProperties,Do=Object.getOwnPropertyDescriptors,xi=Object.getOwnPropertySymbols,Zi=Object.prototype.hasOwnProperty,Go=Object.prototype.propertyIsEnumerable,Bo=(a,e,n)=>e in a?rl(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,qn=(a,e)=>{for(var n in e||(e={}))Zi.call(e,n)&&Bo(a,n,e[n]);if(xi)for(var n of xi(e))Go.call(e,n)&&Bo(a,n,e[n]);return a},k=(a,e)=>ho(a,Do(e));const v=(0,_.I)(a=>(0,t.jsx)("div",k(qn({className:"js-c-create-predicate-groups-group__attribute-name c-create-predicate-groups-group__attribute-name"},a.tpl.renderDataAttributesAsObject(a)),{children:a.attributeName}))),A=(0,_.I)(a=>(0,t.jsx)("div",{className:"c-create-predicate-groups-group__disabled-notification",children:a.disabledNotification})),W=(0,_.I)(a=>(0,t.jsxs)("div",{className:"js-c-create-predicate-groups-group c-create-predicate-groups-group","data-divider-label":a.translations.logicalAnd,"data-attribute":a.attribute,children:[(0,t.jsxs)("div",{className:"c-create-predicate-groups-group__settings",children:[(0,t.jsx)("div",{className:"js-c-create-predicate-groups-group__attribute c-create-predicate-groups-group__attribute"}),(0,t.jsx)("div",{className:"js-c-create-predicate-groups-group__comparison c-create-predicate-groups-group__comparison"}),(0,t.jsx)("div",{className:"js-c-create-predicate-groups-group__delete c-create-predicate-groups-group__delete"})]}),(0,t.jsx)("div",{className:"js-c-create-predicate-groups-group__values c-create-predicate-groups-group__values"}),(0,t.jsx)("div",{className:"c-create-predicate-groups-group__add-value",children:(0,t.jsxs)("button",{className:"js-c-create-predicate-groups-group__add-value-button cm-btn cm-btn--default cm-btn--xs",children:[(0,t.jsx)(g.V,{icon:"plus",size:Gt.l.SIZE_EXTRA_SMALL,classes:"cm-btn__icon"}),(0,t.jsx)("span",{className:"cm-btn__label",children:a.translations.logicalOr})]})})]})),be=(0,_.I)(()=>(0,t.jsxs)("div",{className:"c-create-predicate-groups-group__value-select cm-setting cm-setting--no-padding",children:[(0,t.jsx)("div",{className:"js-c-create-predicate-groups-group__value-select-input c-create-predicate-groups-group__value-select-input"}),(0,t.jsx)("div",{className:"js-c-create-predicate-groups-group__reject"})]})),Le=(0,_.I)(()=>(0,t.jsxs)("div",{className:"c-create-predicate-groups-group__value-text cm-setting cm-setting--no-padding",children:[(0,t.jsx)("div",{className:"js-c-create-predicate-groups-group__value-text-input c-create-predicate-groups-group__value-text-input"}),(0,t.jsx)("div",{className:"js-c-create-predicate-groups-group__reject"})]}));var ot=r(5181);class He extends b.j{static get ANONYMOUS_PREDICATE(){return{attribute:"anonymous",type:"ANONYMOUS",comparison:"EQUALS",value:!1}}static get DOMAIN_ATTRIBUTE(){return{value:"domain",allowedComparison:[He.COMPARISON_EQUALS,He.COMPARISON_NOT_EQUALS]}}static get EMAIL_ATTRIBUTE(){return{value:"user.email",allowedComparison:[He.COMPARISON_ENDS_WITH,He.COMPARISON_ENDS_NOT_WITH]}}static get LAST_LOGIN_MODE_ATTRIBUTE(){return{value:"user.last_login_mode",allowedComparison:[He.COMPARISON_EQUALS,He.COMPARISON_NOT_EQUALS]}}static get SIGNUP_MODE_ATTRIBUTE(){return{value:"user.signup_mode",allowedComparison:[He.COMPARISON_EQUALS,He.COMPARISON_NOT_EQUALS]}}static get COUNTRY_ATTRIBUTE(){return{value:"user.country",allowedComparison:[He.COMPARISON_EQUALS,He.COMPARISON_NOT_EQUALS],disabled:!0}}static get ATTRIBUTES(){return[He.DOMAIN_ATTRIBUTE,He.EMAIL_ATTRIBUTE,He.LAST_LOGIN_MODE_ATTRIBUTE,He.SIGNUP_MODE_ATTRIBUTE,He.COUNTRY_ATTRIBUTE]}static get COMPARISON_EQUALS(){return"EQUALS"}static get COMPARISON_NOT_EQUALS(){return"NOT_EQUALS"}static get COMPARISON_ENDS_WITH(){return"ENDS_WITH"}static get COMPARISON_ENDS_NOT_WITH(){return"ENDS_NOT_WITH"}static get LOGIN_MODE_SAML(){return"SAML"}static get LOGIN_MODE_SIMPLE(){return"SIMPLE"}static get LOGIN_MODE_OIDC(){return"OIDC"}static get LOGIN_MODES(){return[He.LOGIN_MODE_SAML,He.LOGIN_MODE_SIMPLE,He.LOGIN_MODE_OIDC]}static get EMAIL_PLACEHOLDER(){return"@frontify.com"}static get DOMAIN_PLACEHOLDER(){return"domain.example.com"}on(e){this.tpl.bindDataAttributes(this,{translations:{type:Object},predicateGroups:{type:Object}}),this.render(),e()}render(){for(const e of this.predicateGroups)this.renderPredicateGroup(e);this.bindAddValueButton(),this.settings=new re.D(this.$ctx,this.sandbox),this.bindChangeEvents()}bindChangeEvents(){ot(".js-c-create-predicate-groups-group").find("input").each((n,d)=>{ot(d).on("blur",x=>{if(this.addValueButtonWasClicked(x)){const D=ot(x.relatedTarget).parents(".js-c-create-predicate-groups-group");this.appendDefaultValue(D)}this.updatePredicateGroupsData()}),ot(d).keypress(x=>{if(x.keyCode===13)return x.preventDefault(),!1})});for(const n of this.settings.getElems())n.getType()==="dropdown"&&(n.changed=()=>{this.updatePredicateGroupsData()})}addValueButtonWasClicked(e){return ot(e.relatedTarget).hasClass("js-c-create-predicate-groups-group__add-value-button")}updatePredicateGroupsData(){const e=[];this.$ctx.find(".js-c-create-predicate-groups-group").each((n,d)=>{const x=ot(d).find(".js-c-create-predicate-groups-group__attribute-name").data("attribute"),D=ot(d).find(".js-c-create-predicate-groups-group__comparison").find("select").val(),z=[];ot(d).find(".js-c-create-predicate-groups-group__values").find("input").each((Ce,De)=>{z.push({predicateId:ot(De).data("predicate_id"),value:ot(De).val()})}),ot(d).find(".js-c-create-predicate-groups-group__values").find("select").each((Ce,De)=>{z.push({predicateId:ot(De).parents(".js-c-create-predicate-groups-group__value-select-input").data("predicate_id"),value:ot(De).val()})}),e.push({attribute:x,comparison:D,values:z})}),this.tpl.fireCustomEvent(this,"predicateGroupsChanged",{predicateGroups:e})}renderPredicateGroup(e){const n=ot((0,s.EY)(W,{attribute:e.attribute,translations:this.translations})),d=He.ATTRIBUTES.find(x=>x.value===e.attribute);this.renderGroupAttributeName(e,n),this.renderComparisonSelectList(e,n,d),this.renderDeleteButton(n),this.renderValueFields(e,n),d.disabled&&this.disablePredicateGroup(n),this.tpl.addAndActivate(this.$ctx,n,!1)}renderGroupAttributeName(e,n){const x=[{value:He.DOMAIN_ATTRIBUTE.value,name:this.translations.predicateDomain},{value:He.EMAIL_ATTRIBUTE.value,name:this.translations.predicateEmail},{value:He.LAST_LOGIN_MODE_ATTRIBUTE.value,name:this.translations.predicateLastLoginMode},{value:He.SIGNUP_MODE_ATTRIBUTE.value,name:this.translations.predicateSignUpMode},{value:He.COUNTRY_ATTRIBUTE.value,name:this.translations.predicateCountry}].find(D=>D.value===e.attribute).name;n.find(".js-c-create-predicate-groups-group__attribute").append((0,s.EY)(v,{attribute:e.attribute,attributeName:x}))}renderComparisonSelectList(e,n,d){const x=[];for(const z of d.allowedComparison)x.push({value:z,name:z});const D=(0,s.EY)(qi.U,{id:`selection-${e.attribute}-comparison`,expand:!1,label:"",value:e.comparison,options:x});n.find(".js-c-create-predicate-groups-group__comparison").append(D)}disablePredicateGroup(e){e.addClass("c-create-predicate-groups-group__comparison--disabled"),this.renderDisabledNotification(e)}renderDisabledNotification(e){e.append((0,s.EY)(A,{disabledNotification:this.translations.disabledNotification}))}renderDeleteButton(e){const n=e.find(".js-c-create-predicate-groups-group__delete");n.append((0,s.EY)(ni.t,{icon:"trash"})),n.on("iconButtonClicked",d=>{this.removePredicateGroup(d)})}removePredicateGroup(e){const n=ot(e.target).parents(".js-c-create-predicate-groups-group").data("attribute");for(const[d,x]of this.predicateGroups.entries())x.attribute===n&&this.predicateGroups.splice(d,1);this.tpl.fireCustomEvent(this,"predicateGroupsChanged",{predicateGroups:this.predicateGroups})}renderValueFields(e,n){if(e.attribute===He.EMAIL_ATTRIBUTE.value)for(const d of e.values){const x=He.EMAIL_PLACEHOLDER;this.renderTextField(n,d,x)}if(e.attribute===He.DOMAIN_ATTRIBUTE.value)for(const d of e.values){const x=He.DOMAIN_PLACEHOLDER;this.renderTextField(n,d,x)}if(e.attribute===He.COUNTRY_ATTRIBUTE.value)for(const d of e.values)this.renderTextField(n,d,"");if(e.attribute===He.LAST_LOGIN_MODE_ATTRIBUTE.value||e.attribute===He.SIGNUP_MODE_ATTRIBUTE.value)for(const d of e.values)this.renderSelectList(n,d)}renderTextField(e,n,d){var x;const D=ot((0,s.EY)(Le)),z=e.data("attribute"),ne={};ne.predicate_id=n.predicateId;const _e=(x=n.predicateId)!=null?x:`random-${Math.floor(Math.random()*1e4)}`,Ce=(0,s.EY)(ie.A,{id:`[${_e}]-${z.replace(".","-")}`,placeholder:d,value:n.value,inputData:ne,required:!0});D.find(".js-c-create-predicate-groups-group__value-text-input").append(Ce),this.renderRejectButton(D,n),e.find(".js-c-create-predicate-groups-group__values").append(D)}appendDefaultValue(e){const n=e.data("attribute");if(this.attributeUsesTextFields(n)){const d=n===He.DOMAIN_ATTRIBUTE.value?He.DOMAIN_PLACEHOLDER:He.EMAIL_PLACEHOLDER;this.renderTextField(e,"",d)}else this.renderSelectList(e,"")}renderSelectList(e,n){const d=e.data("attribute"),x=ot((0,s.EY)(be)),D=[];for(const ne of He.LOGIN_MODES)D.push({value:ne,name:ne});const z=(0,s.EY)(qi.U,{id:`[${n.predicateId}]-${d.replace(".","-")}`,expand:!1,label:"",value:n.value,options:D});x.find(".js-c-create-predicate-groups-group__value-select-input").attr("data-predicate_id",n.predicateId).append(z),e.find(".js-c-create-predicate-groups-group__values").append(x)}renderRejectButton(e,n){const d=(0,s.EY)(ni.t,{icon:"reject",size:zi.t.ICON_BUTTON_SIZE_SMALL}),x=e.find(".js-c-create-predicate-groups-group__reject");x.attr("data-predicate-id",n.predicateId),x.attr("data-predicate-value",n.value),x.append(d),x.on("iconButtonClicked",D=>{this.removePredicate(D)})}removePredicate(e){var n;const d=e.target.parentElement.dataset.predicateId,x=(n=e.target.parentElement.dataset.predicateValue)!=null?n:null;d?this.removeExistingPredicate(d):this.removeEmptyPredicate(e,x)}removeExistingPredicate(e){for(const[n,d]of this.predicateGroups.entries())for(const[x,D]of d.values.entries())D.predicateId===parseInt(e)&&this.predicateGroups[n].values.splice(x,1);this.tpl.fireCustomEvent(this,"predicateGroupsChanged",{predicateGroups:this.predicateGroups})}removeEmptyPredicate(e,n){const d=ot(e.target).parents(".js-c-create-predicate-groups-group").data("attribute");for(const[x,D]of this.predicateGroups.entries())if(D.attribute===d)for(const[z,ne]of D.values.entries())!ne.predicateId&&ne.value===n&&this.predicateGroups[x].values.splice(z,1);this.tpl.fireCustomEvent(this,"predicateGroupsChanged",{predicateGroups:this.predicateGroups})}bindAddValueButton(){this.$ctx.find(".js-c-create-predicate-groups-group__add-value-button").on("click",e=>{e.preventDefault(),e.stopPropagation();const d=ot(e.currentTarget).parents(".js-c-create-predicate-groups-group").data("attribute");this.addEmptyDefaultValue(d)})}addEmptyDefaultValue(e){for(const[n,d]of this.predicateGroups.entries())d.attribute===e&&this.predicateGroups[n].values.push({predicateId:null,value:null});this.tpl.fireCustomEvent(this,"predicateGroupsChanged",{predicateGroups:this.predicateGroups})}attributeUsesTextFields(e){return e===He.DOMAIN_ATTRIBUTE.value||e===He.EMAIL_ATTRIBUTE.value}}var ns=r(98609),vs=r.n(ns),La=r(17220),Tn=r(49290);const ri=(0,_.I)(a=>{var e,n;return(0,t.jsxs)("div",{children:[(0,t.jsx)(vt.X,{}),(0,t.jsxs)("div",{className:"co-create-project__content",children:[(0,t.jsx)("h2",{className:"ca-h2",children:window.translate("Legacy_workflow_modal_create_project_invite_title")}),(0,t.jsx)("p",{className:"ca-p",children:window.translate("Legacy_workflow_modal_create_project_invite_description")})]}),(0,t.jsxs)("div",{className:"co-create-project_member-wrapper",children:[a.status.length>0?(0,t.jsxs)("div",{className:"co-create-project__section",children:[(0,t.jsx)("h4",{className:"ca-h3",children:window.translate("Legacy_workflow_modal_create_project_invite_section_status_title")}),(0,t.jsx)("ul",{className:"co-create-project__status-list",children:(e=a.status)==null?void 0:e.map((d,x)=>(0,t.jsxs)("li",{className:"co-create-project__status-entry",children:[(0,t.jsxs)("div",{className:"co-create-project__status-avatar-wrapper",children:[(0,t.jsx)("img",{alt:"",className:"co-create-project__member-avatar",width:"30",src:d.user.image,title:d.user.name}),(0,t.jsx)("i",{className:"co-create-project__status-bubble",style:{backgroundColor:`${d.color}`}})]}),(0,t.jsxs)("div",{className:"co-create-project__status-meta",children:[(0,t.jsx)("span",{className:"co-create-project__status-owner",children:d.user.name}),(0,t.jsx)("span",{className:"co-create-project__status-name",children:d.name})]})]},x))})]}):null,a.tasks.length>0?(0,t.jsxs)("div",{className:"co-create-project__section co-create-project__section--border",children:[(0,t.jsx)("h4",{className:"ca-h3",children:window.translate("Legacy_workflow_modal_create_project_invite_section_task_title")}),(0,t.jsx)("ul",{className:"co-create-project__task-list",children:(n=a.tasks)==null?void 0:n.map((d,x)=>(0,t.jsx)("li",{className:"co-create-project__task-entry",children:(0,t.jsx)("img",{className:"co-create-project__member-avatar",width:"30",src:d.image,title:d.name,alt:d.name})},x))})]}):null]}),(0,t.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--centered cm-btn-bar--section js-cm-setting__actions",children:[(0,t.jsx)(Tn.t,{label_cancel:window.translate("Legacy_workflow_modal_create_project_invite_choose_other_btn_label")}),(0,t.jsx)(Kr.b,{label_submit:window.translate("Legacy_workflow_modal_create_project_invite_invite_btn_label")})]})]})});var ei=r(5181);class eo extends b.j{on(e){this.redirectAfter=this.$ctx.data("redirect"),this.asTemplate=this.$ctx.data("asTemplate")===!0,this.sandbox.subscribe("events",this),this.settings=new re.D(this.$ctx,this.sandbox),this.styleguideSetting=this.settings.getElem("styleguide"),this.templateSetting=this.settings.getElem("template"),this.$notifyCollaborators=this.$ctx.find(".js-co-create-project__email-settings");const n=this.settings.getElem("date_begin"),d=this.settings.getElem("date_end");this.settings.getElem("project_template").itemSelected=(x,D)=>{if(Number.isInteger(x)){if(this.hideNonTemplateBasedElements(),this.showTemplateBasedElements(),this.account.hasProduct("CAMPAIGN_MANAGEMENT")){const z=D.dateBegin,ne=D.dateEnd;this.preFillStartAndEndDate(z,ne)}}else this.showNonTemplateBasedElements(),this.hideTemplateBasedElements()},n.changed=()=>{const x=d.getPicker(),D=n.getPicker().getMoment(),z=d.getPicker().getMoment();x.setMinDate(D.toDate()),z.isBefore(D)&&x.setDate(D.clone().add(1,"day").toDate())},this.settings.validation(()=>this.create()),e()}create(){const e=this.settings.serialize();e.project_type="WORKSPACE",e.as_template=this.asTemplate,this.validate(e.template).then(n=>{this.data.post("/api/project/add/",e).then(d=>{if(d.success){if(this.fire("subscribeProject",{project:d.project||d.data.project},["events"]),this.asTemplate)(0,F.s)("create project template",{project_id:d.id,brand_id:d.brand_id});else{const D=parseInt(e.project_template)>0?parseInt(e.project_template):null;(0,F.s)("create project",{date_begin:d.date_begin,date_end:d.date_end,project_id:d.id,template_id:D})}this.fire("closeModal",["events"]);const x=d.project?d.project.url:d.data.redirect_deep_link_url;if(n.length>0){const D={message:"",permission:"EDIT",trigger:"workspace",valid_form:"",valid_to:"",email:n.join(","),project:d.project.id};this.data.post("/api/collaborator/add",D),page(x)}this.redirectAfter===!0?page(x):this.fire("projectCreated",{deep_link:x})}})}).catch(()=>{this.settings.getElem("template").setIndex(0),La.E.prototype.hideLoader.apply(this.settings)})}validate(e){return new Promise((n,d)=>{e?this.data.get(`/api/workflows/template/${e}/info`).then(x=>{if(x.success&&(x.status.length>0||x.tasks.length>0)){const D=ei((0,s.EY)(ri,{status:x.status,tasks:x.tasks}));this.fire("openModal",{$content:D,modifier:"default",id:"invitemembers"}),D.on("click",'button[type="reset"]',()=>{this.fire("closeModal",{id:"invitemembers"}),d()}),D.on("click",'button[type="submit"]',()=>{n(x.user_mails),this.fire("closeModal",{id:"invitemembers"})})}else n([])}):n([])})}onModalOpened(e){e.id==="modal"&&this.settings.getElem("name").focus()}showNonTemplateBasedElements(){ei.isEmptyObject(this.styleguideSetting)||this.styleguideSetting.show(),ei.isEmptyObject(this.templateSetting)||this.templateSetting.show()}showTemplateBasedElements(){this.$notifyCollaborators.show()}hideNonTemplateBasedElements(){ei.isEmptyObject(this.styleguideSetting)||this.styleguideSetting.hide(),ei.isEmptyObject(this.templateSetting)||this.templateSetting.hide()}hideTemplateBasedElements(){this.$notifyCollaborators.hide()}preFillStartAndEndDate(e,n){const d=vs()(e,"YYYY-MM-DD"),x=vs()(n,"YYYY-MM-DD");d.isValid()?this.settings.getElem("date_begin").setValue(vs()(d,"YYYY-MM-DD")):this.settings.getElem("date_begin").setValue(null),x.isValid()?this.settings.getElem("date_end").setValue(vs()(x,"YYYY-MM-DD")):this.settings.getElem("date_end").setValue(null)}}class io extends b.j{on(e){this.sandbox.subscribe("events",this),this.creating=!1,this.settings=new re.D(this.$ctx,this.sandbox),this.settings.validation(()=>this.create()),e()}create(){if(this.creating)return;this.creating=!0;const e=this.settings.serialize();this.data.post("/api/screen/placeholder",e).then(n=>{this.creating=!1,n.success&&(this.fire("assetCreated",n.screen,["events"]),this.fire("closeModal",["events"]))},()=>{this.creating=!1})}onModalOpened(e){e.id==="modal"&&this.settings.getElem("name").focus()}}var ii=r(64698),Fi=Object.defineProperty,Ko=Object.getOwnPropertySymbols,Hr=Object.prototype.hasOwnProperty,Gi=Object.prototype.propertyIsEnumerable,$l=(a,e,n)=>e in a?Fi(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,Ho=(a,e)=>{for(var n in e||(e={}))Hr.call(e,n)&&$l(a,n,e[n]);if(Ko)for(var n of Ko(e))Gi.call(e,n)&&$l(a,n,e[n]);return a};const dl=(0,_.I)(a=>(0,t.jsx)("div",Ho({className:"mod mod-c-create-predicate-groups c-create-predicate-groups"},a.tpl.renderDataAttributesAsObject(a)))),kl=(0,_.I)(a=>(0,t.jsxs)("div",{className:"c-create-segment-add-rule",children:[(0,t.jsxs)("button",{className:`cm-btn ${a.primary?" cm-btn--primary ":" cm-btn--default "} js-c-createsegment-add-rule-button js-cm-btn-dropdown__toggle`,children:[a.label,(0,t.jsx)(g.V,{icon:"caret-down"})]}),(0,t.jsx)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--no-min-width js-cm-btn-dropdown__menu","data-float":"true","data-placement":"bottom-start","data-offset":"10"})]})),Bl=(0,_.I)(a=>{var e;return(0,t.jsx)("div",{className:"js-c-create-segment-add-rule-list c-create-segment-add-rule-list",children:(e=a.attributes)==null?void 0:e.map((n,d)=>(0,t.jsx)("div",{className:"js-c-create-segment-add-rule-list__attribute c-create-segment-add-rule-list__attribute","data-attribute-value":n.value,children:n.label},d))})}),Fl=(0,_.I)(a=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"c-create-segment__description-title",children:a.translations.descriptionTitle}),(0,t.jsx)("p",{className:"c-create-segment__description-body",children:a.translations.descriptionBody})]})),Sl=(0,_.I)(a=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"c-create-segment-predicates__header",children:a.translations.segmentPredicateHeader}),(0,t.jsx)("div",{className:"js-c-create-segment-predicates__container c-create-segment-predicates__container"})]}));var yl=r(5181);class ul extends b.j{on(e){this.sandbox.subscribe("events",this),this.tpl.bindDataAttributes(this,{predicates:{type:Object},translations:{type:Object}}),this.allAttributes=[{value:He.DOMAIN_ATTRIBUTE.value,allowedComparison:He.DOMAIN_ATTRIBUTE.allowedComparison,label:this.translations.predicateDomain,defaultValue:""},{value:He.EMAIL_ATTRIBUTE.value,allowedComparison:He.EMAIL_ATTRIBUTE.allowedComparison,label:this.translations.predicateEmail,defaultValue:""},{value:He.LAST_LOGIN_MODE_ATTRIBUTE.value,allowedComparison:He.LAST_LOGIN_MODE_ATTRIBUTE.allowedComparison,label:this.translations.predicateLastLoginMode,defaultValue:He.LOGIN_MODE_SAML},{value:He.SIGNUP_MODE_ATTRIBUTE.value,allowedComparison:He.SIGNUP_MODE_ATTRIBUTE.allowedComparison,label:this.translations.predicateSignUpMode,defaultValue:He.LOGIN_MODE_SAML}],this.segmentId=null,this.predicateGroups=[],this.getAvailableAttributes(),this.groupPredicates(),this.render(),this.$ctx.on("click",".js-c-createsegment-add-rule-button",n=>{this.showAttributeSelectDropdown(n)}),e()}getAvailableAttributes(){if(!this.predicates){this.availableAttributes=this.allAttributes;return}const e=this.predicates.map(n=>n.attribute);this.availableAttributes=this.allAttributes.filter(n=>!e.includes(n.value))}render(){this.predicateGroups.length===0?this.segmentDescription=this.tpl.addAndActivate(this.$ctx.find(".js-c-create-segment__container"),(0,s.EY)(Fl,{translations:this.translations})):this.renderSegmentContainer(),this.renderAddRuleButton(this.translations.addRuleLabel,this.predicateGroups.length===0)}renderAddRuleButton(e,n=!1){if(this.availableAttributes.length===0)return;const d=this.$ctx.find(".js-c-create-segment__add-rule-button-container");n&&d.addClass("c-create-segment__add-rule-button-container--centered"),this.tpl.addAndActivate(d,(0,s.EY)(kl,{label:e,primary:n}))}renderSegmentContainer(){this.segmentDescription&&this.sandbox.removeModules(this.segmentDescription),this.tpl.addAndActivate(this.$ctx.find(".js-c-create-segment__container"),(0,s.EY)(Sl,{translations:this.translations})),this.renderPredicateGroups()}renderPredicateGroups(){this.tpl.addAndActivate(this.$ctx.find(".js-c-create-segment-predicates__container"),(0,s.EY)(dl,{translations:this.translations,predicateGroups:this.predicateGroups}),!0).on("predicateGroupsChanged",n=>{this.predicateGroups=n.detail.predicateGroups,this.render(),this.tpl.fireCustomEvent(this,"predicatesChanged",{predicates:this.getPredicatesFromPredicateGroups()})})}groupPredicates(){if(this.predicates)for(const e of this.predicates){if(e.attribute===He.ANONYMOUS_PREDICATE.attribute)continue;const n=this.predicateGroups.findIndex(x=>x.attribute===e.attribute&&x.comparison===e.comparison);if(n!==-1){this.predicateGroups[n].values.push({predicateId:e.id,value:e.value});continue}const d={attribute:e.attribute,comparison:e.comparison,values:[{predicateId:e.id,value:e.value,segment_id:e.segment_id}]};this.predicateGroups.push(d)}}getPredicatesFromPredicateGroups(){var e,n;const d=this.predicateGroups,x=[];x.push(this.getAnonymousPredicate());for(const D of d)for(const z of D.values){const ne={id:(e=z.predicateId)!=null?e:null,segment_id:(n=D.segment_id)!=null?n:null,attribute:D.attribute,type:"STRING",comparison:D.comparison,value:z.value};x.push(ne)}return x}getAnonymousPredicate(){var e;const n=(e=this.predicates)==null?void 0:e.find(d=>d.attribute===He.ANONYMOUS_PREDICATE.attribute);return{id:n?n.id:null,segment_id:n?n.segment_id:null,attribute:He.ANONYMOUS_PREDICATE.attribute,type:He.ANONYMOUS_PREDICATE.type,comparison:He.ANONYMOUS_PREDICATE.comparison,value:He.ANONYMOUS_PREDICATE.value}}showAttributeSelectDropdown(e){e.preventDefault();const n=(0,s.EY)(Bl,{attributes:this.availableAttributes}),d=yl((0,s.EY)(ii.I,{menu_content:n}));this.$ruleListDropdown=this.tpl.addAndActivate(yl(e.currentTarget).next(".js-cm-btn-dropdown__menu"),d),this.bindAttributesList()}hideAttributeSelectDropdown(){this.fire("closeDropdown",this.$ruleListDropdown,["events"])}bindAttributesList(){this.$ctx.find(".js-c-create-segment-add-rule-list__attribute").on("click",e=>{e.preventDefault(),e.stopPropagation();const n=this.predicateGroups.length===0,d=yl(e.currentTarget).data("attribute-value"),x=this.getEmptyPredicateGroup(d);this.predicateGroups.push(x),this.hideAttributeSelectDropdown(),n?this.renderSegmentContainer():this.renderPredicateGroups(),this.tpl.fireCustomEvent(this,"predicatesChanged",{predicates:this.getPredicatesFromPredicateGroups()})})}getEmptyPredicateGroup(e){const n=this.availableAttributes.find(x=>x.value===e),d={};return d.attribute=n.value,d.comparison=n.allowedComparison[0],d.values=[{id:null,value:n.defaultValue}],d}}var mo=r(8391);class Ul extends b.j{on(e){this.sandbox.subscribe("events",this),this.settings=new re.D(this.$ctx,this.sandbox),this.settings.validation(()=>this.create()),e()}async create(){const e=this.settings.serialize(),n=await(0,mo.d5)(Number(e.brand),e.name,e.template);(0,F.s)("create guideline",{template:e.template.toLowerCase(),hub_id:n.id}),setTimeout(()=>{this.fire("closeModal",["events"]),window.location.href=`/hub/${n.id}?edit`},1e3)}onModalOpened(e){e.id==="modal"&&this.settings.getElem("name").focus()}}class pl extends b.j{on(e){this.sandbox.subscribe("events",this),this.settings=new re.D(this.$ctx,this.sandbox),this.settings.validation(()=>{const n=this.settings.serialize();this.createNew(n)}),e()}createNew(e){this.data.post("/api/target/manage",e).then(n=>{if(n.success){const d=n.data.target;this.fire("NewTarget",d),this.fire("closeModal")}})}onModalOpened(){this.settings.getElem("name").focus()}}var xl=r(5181);class K extends b.j{static get INVITATION_LIMIT_REACHED_BY_INVITER(){return"Maximum number of invitations reached by inviter."}static get INVITATION_LIMIT_REACHED(){return"User invitation limit reached."}static get DAILY_INVITATION_LIMIT_REACHED(){return"Maximum number of invitations sent per day."}on(e){this.sandbox.subscribe("events",this),this.settings=new re.D(this.$ctx,this.sandbox),this.settings.validation(()=>{const n=this.settings.serialize();n&&this.createUser(n)}),this.$ctx.on("click",".co-create-user__send-email",()=>{this.toggleMailNotificationSettings()}),e()}toggleMailNotificationSettings(){const e=this.settings.serialize().send_email;xl(".js-co-create-user__email-settings").toggle(e)}createUser(e){const n=e.email.split(",").map(d=>d.trim());this.data.post("/api/user",{emails:n,invitation_note:e.invitation_note,send_email:e.send_email,groups:e.group_ids,cta:e.custom_cta}).then(d=>{d.success?e.send_email?this.fire("swal",{template:"user-invite",closeOnConfirm:!0,callback:()=>{this.fire("renderUsagePageUserList"),this.fire("closeModal")}}):(this.fire("renderUsagePageUserList"),this.fire("closeModal")):this.settings.showErrors(d.errors)}).catch(d=>this.showErrorModal(d))}onModalOpened(){this.settings.getElem("email").focus()}showErrorModal(e){var n;switch((n=e.responseJSON)==null?void 0:n.error){case K.DAILY_INVITATION_LIMIT_REACHED:this.fireSwal("team-temporarily-locked");break;case K.INVITATION_LIMIT_REACHED:case K.INVITATION_LIMIT_REACHED_BY_INVITER:this.fireSwal("max-invitation-error");break;default:this.fireSwal("general-error");break}}fireSwal(e){this.fire("swal",{template:e,closeOnConfirm:!0,callback:()=>{this.fire("renderUsagePageUserList"),this.fire("closeModal")}})}}var ye=r(47929);const Ae=(0,_.I)(()=>(0,t.jsxs)("div",{className:"cm-btn-dropdown cm-btn--right",children:[(0,t.jsx)("button",{type:"button",className:"cm-actions__action js-cm-btn-dropdown__toggle",children:(0,t.jsx)(g.V,{icon:"actions",size:"md"})}),(0,t.jsx)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--right js-cm-btn-dropdown__menu",children:(0,t.jsx)("div",{className:"cm-btn-dropdown__items c-create-user-group__button-delete-wrapper",children:(0,t.jsxs)("button",{className:"js-c-create-user-group__button-delete cm-btn cm-btn--danger cm-btn--xs",children:[(0,t.jsx)("span",{className:"cm-btn__label",children:"DELETE"}),(0,t.jsx)(g.V,{icon:"trash",size:Gt.l.SIZE_EXTRA_SMALL,classes:"cm-btn__icon"})]})})})]})),ht=(0,_.I)(a=>{const e={descriptionTitle:window.translate("Legacy_create_segment_description"),descriptionBody:window.translate("Legacy_create_segment_description_body"),addRuleLabel:window.translate("Legacy_create_segment_add_rule_button"),addValueLabel:window.translate("Legacy_create_segment_add_value_button"),selectPredicate:window.translate("Legacy_create_segment_select_predicate"),predicateDomain:window.translate("Legacy_create_segment_predicate_domain"),predicateEmail:window.translate("Legacy_create_segment_predicate_email"),predicateLastLoginMode:window.translate("Legacy_create_segment_predicate_last_login_mode"),predicateSignUpMode:window.translate("Legacy_create_segment_predicate_sign_up_mode"),predicateCountry:window.translate("Legacy_create_segment_predicate_country"),segmentPredicateHeader:window.translate("Legacy_create_segment_predicate_header"),logicalAnd:window.translate("Legacy_create_segment_and_label"),logicalOr:window.translate("Legacy_create_segment_or_label"),disabledNotification:window.translate("Legacy_create_segment_disabled_description")};return(0,t.jsxs)("div",{className:"mod mod-c-create-segment c-create-segment","data-translations":JSON.stringify(e),"data-predicates":JSON.stringify(a.predicates),children:[(0,t.jsx)("div",{className:"js-c-create-segment__container"}),(0,t.jsx)("div",{className:"js-c-create-segment__add-rule-button-container"})]})}),Ot=(0,_.I)(a=>(0,t.jsx)(ht,{predicates:a.predicates})),zt=(0,_.I)(()=>(0,t.jsx)("div",{className:"c-create-user-group-standard",children:(0,t.jsx)(ie.A,{id:"sso-group-mapping",label:window.translate("Legacy_label_group_sso_mapping"),msg:window.translate("Legacy_error_required_user_email")})}));var kt=r(5181);class Qt extends b.j{static get NORMAL_TYPE(){return"normal"}static get SMARTGROUP_TYPE(){return"smart"}on(e){this.sandbox.subscribe("events",this),this.tpl.bindDataAttributes(this,{translations:{type:Object},groupId:{type:String,default:""}}),this.isNewGroup=!0,this.isSmartGroup=!1,this.$tabContainer=this.$ctx.find(".js-c-create-user-group__tab-content"),this.$standardTypeButton=kt(".js-c-create-user-group__type-button--standard"),this.$smartGroupTypeButton=kt(".js-c-create-user-group__type-button--smart-group"),this.render(),e()}render(){this.groupId?(this.isNewGroup=!1,this.getAndRenderGroup()):this.renderEmptyForm()}renderEmptyForm(){this.renderGroupName(),this.enableTypeButtons(),this.bindTypeButtons(),this.renderStandardGroupContent(),this.renderButtonBar(),this.initializeForm()}getAndRenderGroup(){this.data.get(`/api/group/${this.groupId}`).then(e=>{e.success&&(this.group=e.data,this.isSmartGroup=this.group.segment_id>0,this.isSmartGroup?this.getAndRenderSegmentsGroup():this.renderUpdateForm())})}getAndRenderSegmentsGroup(){this.data.get(`/api/segment/${this.group.segment_id}/predicate`).then(e=>{e.success&&(this.predicates=e.data,this.renderUpdateForm())})}renderUpdateForm(){this.renderGroupName(),this.bindTypeButtons(),this.renderButtonBar(),this.isSmartGroup?(this.renderSmartGroupContent(),this.toggleActiveTypeButtons()):this.renderStandardGroupContent(),this.initializeForm(),this.populateInputs(this.group),this.toggleSubmitButton()}populateInputs(e){this.settings.getElem("group-name").setValue(e.name),this.isSmartGroup||this.settings.getElem("sso-group-mapping").setValue(e.sso_mapping)}initializeForm(){this.settings=new re.D(this.$ctx,this.sandbox),this.$ctx.on("submit",e=>e.preventDefault()),this.settings.validation(()=>{this.preformingDeleteRequest||(this.isNewGroup&&this.isSmartGroup?this.createSmartGroup():this.isNewGroup&&!this.isSmartGroup?this.createGroup():!this.isNewGroup&&this.isSmartGroup?this.updateSmartGroup():!this.isNewGroup&&!this.isSmartGroup&&this.updateGroup())})}bindTypeButtons(){this.$standardTypeButton.on("click",e=>{kt(e.currentTarget).hasClass("state-disabled")||(this.toggleActiveTypeButtons(),this.renderStandardGroupContent(),this.initializeForm(),this.toggleSubmitButton())}),this.$smartGroupTypeButton.on("click",e=>{kt(e.currentTarget).hasClass("state-disabled")||(this.toggleActiveTypeButtons(),this.renderSmartGroupContent(),this.initializeForm(),this.toggleSubmitButton())})}toggleActiveTypeButtons(){this.$standardTypeButton.toggleClass("cm-btn--primary").toggleClass("cm-btn--default"),this.$smartGroupTypeButton.toggleClass("cm-btn--primary").toggleClass("cm-btn--default")}enableTypeButtons(){this.$standardTypeButton.removeClass("state-disabled"),this.$smartGroupTypeButton.removeClass("state-disabled")}disableTypeButtons(){this.$standardTypeButton.addClass("state-disabled"),this.$smartGroupTypeButton.addClass("state-disabled")}bindButtonBar(){this.buttonGroup.on("buttonGroupCancelClicked",()=>{this.tpl.fireCustomEvent(this,"closeDropdown")}),this.buttonGroup.on("buttonGroupCreateClicked",()=>{this.$ctx.submit()}),this.buttonGroup.on("buttonGroupUpdateClicked",()=>{this.$ctx.submit()}),this.$ctx.find(".js-c-create-user-group__button-delete").on("click",()=>{this.isSmartGroup?this.deleteSmartGroup():this.deleteGroup()})}renderStandardGroupContent(){this.isSmartGroup=!1,this.tpl.addAndActivate(this.$tabContainer,(0,s.EY)(zt),!0)}renderSmartGroupContent(){this.isSmartGroup=!0;const e=this.tpl.addAndActivate(this.$tabContainer,(0,s.EY)(Ot,{predicates:this.predicates}),!0);this.toggleSubmitButton(),e.off("predicatesChanged"),e.on("predicatesChanged",n=>{this.predicates=n.detail.predicates,this.renderSmartGroupContent()})}renderGroupName(){const e=kt(this.tpl.addAndActivate(this.$ctx.find(".js-c-create-user-group__name"),(0,s.EY)(ie.A,{id:"group-name",label:"Name",required:!0,msg:"Name is required",placeholder:this.translations.groupNamePlaceholder})));e.keypress(n=>{if(n.keyCode===13)return n.preventDefault(),!1}),e.find("input").on("keyup",()=>{this.toggleSubmitButton()})}renderButtonBar(){this.buttonGroup=kt((0,s.EY)(ye.I,{buttons:this.getButtons(),size:_a.Q.SIZE_LARGE,background:_a.Q.BACKGROUND_BLACK_05})),this.tpl.addAndActivate(this.$ctx.find(".js-c-create-user-group__button-bar"),this.buttonGroup),this.isNewGroup||(this.actionsButton=kt((0,s.EY)(Ae)),this.tpl.addAndActivate(this.$ctx.find(".js-c-create-user-group__button-bar"),this.actionsButton,!1)),this.bindButtonBar()}toggleSubmitButton(){this.buttonGroupModule=Xa.u.getFirstChildModule(this.$ctx.find(".js-c-create-user-group__button-bar")),this.buttonGroupModule.$ctx.dataAsObject("buttons",this.getButtons())}getButtons(){const e=this.checkSubmitButtonShouldBeDisabled();return[{identifier:"cancel",label:this.translations.cancelButtonLabel,style:_a.Q.STYLE_SECONDARY},{identifier:this.groupId?"update":"create",label:this.groupId?this.translations.updateButtonLabel:this.translations.createButtonLabel,style:_a.Q.STYLE_PRIMARY,isDisabled:e}]}checkSubmitButtonShouldBeDisabled(){const e=this.$ctx.find(".js-c-create-user-group__name").find("input").val();return!this.isSmartGroup&&e?!1:!(this.isSmartGroup&&e&&this.hasAtLeastOnePredicateValue())}hasAtLeastOnePredicateValue(){return this.predicates?this.predicates.some(e=>e.attribute!==He.ANONYMOUS_PREDICATE.attribute&&e.value):!1}createGroup(){const e=this.settings.getElem("group-name").getValue();this.data.post("/api/group",{name:e,type:Qt.NORMAL_TYPE,sso_mapping:this.settings.getElem("sso-group-mapping").getValue()}).then(n=>{n.success&&((0,F.s)("create user group",{group_type:Qt.NORMAL_TYPE,group_name:e}),this.fire("userGroupChanged",{},["events"]))})}updateGroup(){const e=this.settings.getElem("group-name").getValue();this.data.put(`/api/group/${this.groupId}`,{name:e,type:Qt.NORMAL_TYPE,sso_mapping:this.settings.getElem("sso-group-mapping").getValue()}).then(n=>{n.success&&((0,F.s)("update user group",{group_type:Qt.NORMAL_TYPE,group_name:e,group_id:parseInt(this.groupId)}),this.fire("userGroupChanged",{},["events"]))})}createSmartGroup(){const e=this.settings.getElem("group-name").getValue();this.data.post("/api/group",{name:e,type:Qt.SMARTGROUP_TYPE}).then(n=>{n.success&&((0,F.s)("create user group",{group_type:Qt.SMARTGROUP_TYPE,group_name:e,group_rules:this.getPredicateNamesForTracking()}),this.createOrUpdateSmartGroupPredicates(n.data.segment_id))})}updateSmartGroup(){const e=this.settings.getElem("group-name").getValue();this.data.put(`/api/group/${this.groupId}`,{name:e,sso_mapping:""}).then(n=>{n.success&&((0,F.s)("update user group",{group_type:Qt.SMARTGROUP_TYPE,group_id:parseInt(this.groupId),group_name:e,group_rules:this.getPredicateNamesForTracking()}),this.createOrUpdateSmartGroupPredicates(this.group.segment_id))})}createOrUpdateSmartGroupPredicates(e){this.data.put(`/api/segment/${e}/predicate`,{predicates:this.predicates}).then(n=>{n.success&&this.fire("userGroupChanged",{},["events"])})}deleteSmartGroup(){this.preformingDeleteRequest=!0,this.data.delete(`/api/segment/${this.group.segment_id}`).then(e=>{e.success&&this.deleteGroup()})}deleteGroup(){const e=this.settings.getElem("group-name").getValue();this.preformingDeleteRequest=!0,this.data.delete(`/api/group/${this.group.id}`,{predicates:this.predicates}).then(n=>{n.success&&((0,F.s)("delete user group",{group_type:this.isSmartGroup?Qt.SMARTGROUP_TYPE:Qt.NORMAL_TYPE,group_id:parseInt(this.groupId),group_name:e}),this.fire("userGroupChanged",{},["events"]))})}getPredicateNamesForTracking(){const e=[];for(const n of this.predicates)n.attribute!==He.ANONYMOUS_PREDICATE.attribute&&e.push(n.attribute);return e}}var Zt=r(68712);const ms=(0,_.I)(a=>a.state==="preparing"?(0,t.jsxs)("span",{className:"co-downloader__text",children:[(0,t.jsx)(g.V,{icon:"processing",classes:"anim-spin"}),window.translate("Legacy_downloader_status_preparing")]}):a.state==="downloading"?(0,t.jsxs)("span",{className:"co-downloader__text",children:[(0,t.jsx)(g.V,{icon:"download"}),window.translate("Legacy_downloader_status_downloading")]}):a.state==="failed"?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{className:"co-downloader__text",children:[(0,t.jsx)(g.V,{icon:"failed"}),window.translate("Legacy_downloader_status_error")]}),(0,t.jsx)("button",{className:"co-downloader__link js-co-downloader__close",children:window.translate("Legacy_btn_close")})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{className:"co-downloader__text",children:[(0,t.jsx)(g.V,{icon:"check"}),window.translate("Legacy_downloader_status_success")]}),(0,t.jsx)("button",{className:"co-downloader__link js-co-downloader__close",children:window.translate("Legacy_btn_close")})]}));var is=Object.defineProperty,Ps=Object.getOwnPropertySymbols,Cs=Object.prototype.hasOwnProperty,ea=Object.prototype.propertyIsEnumerable,Ls=(a,e,n)=>e in a?is(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,ws=(a,e)=>{for(var n in e||(e={}))Cs.call(e,n)&&Ls(a,n,e[n]);if(Ps)for(var n of Ps(e))ea.call(e,n)&&Ls(a,n,e[n]);return a};const Rs=(0,_.I)(a=>(0,t.jsx)("div",ws({className:"mod mod-c-bar-loader ca-bar-loader"},a.tpl.renderDataAttributesAsObject(a)))),Ms=(0,_.I)(a=>(0,t.jsxs)("div",{className:`co-downloader__item js-co-downloader__item js-co-downloader__item-id-${a.downloadId}`,children:[(0,t.jsx)("p",{className:"co-downloader__content js-co-downloader__content"}),(0,t.jsx)("div",{className:"js-co-downloader__bar-loader",children:(0,t.jsx)(Rs,{size:"tiny",state:a.state})})]}));class la extends b.j{static get STATES(){return[la.STATE_PREPARING,la.STATE_DOWNLOADING,la.STATE_SUCCESS,la.STATE_FAILED]}static get STATE_PREPARING(){return"preparing"}static get STATE_DOWNLOADING(){return"downloading"}static get STATE_SUCCESS(){return"success"}static get STATE_FAILED(){return"failed"}static get DELAY_REMOVE(){return 1500}on(e){this.sandbox.subscribe("events",this),this.downloads={},e()}render(e){const n=e.downloadId;this.downloads[e.downloadId]=this.tpl.addAndActivate(this.$ctx,(0,s.EY)(Ms,{downloadId:n}),!1)}open(){this.$ctx.addClass("state-open")}close(){Object.keys(this.downloads).length>0||(this.$ctx.removeClass("state-open"),this.$ctx.html(""))}onBulkactionDownloadStateChanged(e){if(!la.STATES.includes(e.state))return;e.state===la.STATE_PREPARING&&(this.render(e),this.open());const n=this.findItemById(e.downloadId);switch(e.state){case la.STATE_SUCCESS:this.downloadItemSucceed(n),this.downloadItemRemove(n,la.DELAY_REMOVE),delete this.downloads[e.downloadId];break;case la.STATE_FAILED:this.downloadItemFailed(n);break}this.downloadItemUpdateContent(n,e.state)}findItemById(e){return this.$ctx.find(`.js-co-downloader__item-id-${e}`)}downloadItemSucceed(e){this.getBarLoaderModule(e).$ctx.dataAsString("state","success")}downloadItemFailed(e){this.getBarLoaderModule(e).$ctx.dataAsString("state","failed")}downloadItemRemove(e,n=0){setTimeout(()=>{e.remove(),this.close()},n)}downloadItemUpdateContent(e,n){e.find(".js-co-downloader__content").html((0,s.EY)(ms,{state:n})),(n===la.STATE_FAILED||n===la.STATE_SUCCESS)&&this.$ctx.on("click",".js-co-downloader__close",()=>{this.downloadItemRemove(e,la.DELAY_REMOVE)})}getBarLoaderModule(e){const n=e.find(".js-co-downloader__bar-loader");return Xa.u.getFirstChildModule(n)}}var Da=r(18364);const wa=(0,_.I)(a=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"c-dropdown-button__button-label",children:a.current.label}),(0,t.jsx)("div",{className:"c-dropdown-button__buton-icon",children:(0,t.jsx)(g.V,{icon:"caret-down"})})]})),Dn=(0,_.I)(a=>{var e;return(e=a.options)==null?void 0:e.map((n,d)=>(0,t.jsxs)("div",{tabIndex:0,className:` js-c-dropdown-button__option c-dropdown-button__option ${a.current.value===n.value?"active":""} `,"data-option":JSON.stringify(n),children:[(0,t.jsx)("div",{className:"c-dropdown-button__option-icon",children:a.current.value===n.value?(0,t.jsx)(g.V,{icon:"check"}):""}),(0,t.jsx)("div",{className:"c-dropdown-button__option-label",children:n.label})]},d))});var Un=r(5181);class sn extends b.j{on(e){this.currentPrefix=this.$ctx.data("currentPrefix"),this.current=this.$ctx.data("current"),this.options=this.$ctx.data("options"),this.changeEvent=this.$ctx.data("changeEvent"),this.$button=this.$ctx.find(".js-c-dropdown-button__button"),this.$content=this.$ctx.find(".js-c-dropdown-button__options"),this.$body=Un("body"),this.render(),this.bindButtonClick(),this.bindOutsideClick(),this.bindHideWhenTabBeforeOrAfter(),e()}bindButtonClick(){this.$button.on("click keydown",e=>{e.type!=="click"&&e.key!=="Enter"||(e.stopPropagation(),this.toggleContent())})}bindOutsideClick(){this.$body.on("click keydown",e=>{if(e.type!=="click"){if(e.key!=="Escape")return;this.hideContent();return}Un(e.target).closest(".js-c-dropdown-button").length===0&&this.hideContent()})}bindHideWhenTabBeforeOrAfter(){this.$content.on("keydown",e=>{if(e.key!=="Tab")return;const n=this.getTabbableElements();if(n.length===0)return;const d=Un(e.target).is(n.first())&&e.shiftKey,x=Un(e.target).is(n.last())&&!e.shiftKey;d?(e.preventDefault(),n.last().focus()):x&&(e.preventDefault(),n.first().focus())})}bindOptionsClick(){this.$ctx.find(".js-c-dropdown-button__option").on("click keydown",e=>{if(e.type!=="click"&&e.key!=="Enter")return;const d=Un(e.currentTarget).data("option");this.updateCurrent(d)})}toggleContent(){this.$content.toggleClass("visible");const e=this.getTabbableElements();e.length>0&&e.first().focus()}hideContent(){this.$content.removeClass("visible")}render(){this.renderCurrent(),this.renderOptions()}renderCurrent(){this.current.label=`${this.currentPrefix}${this.current.label}`,this.$button.html((0,s.EY)(wa,{current:this.current}))}renderOptions(){this.$content.html((0,s.EY)(Dn,{current:this.current,options:this.options})),this.bindOptionsClick()}updateCurrent(e){this.current=e,this.tpl.fireCustomEvent(this,this.changeEvent,e),this.render()}getTabbableElements(){var e;return(e=this.$content)==null?void 0:e.find(Da.AY)}}var ia=r(23847),_n=r(93740);class ar extends b.j{on(e){const n=this.$ctx.get(0);if(!n)throw new Error("Element not found.");(0,s.Cc)(_n.ErrorPage,n,{type:"403"}),e()}}class go extends b.j{on(e){const n=this.$ctx.get(0);if(!n)throw new Error("Element not found.");(0,s.Cc)(_n.ErrorPage,n,{type:"404"}),e()}}var nr=r(78484),Mn=r(27833);const ka=(0,_.I)(()=>(0,t.jsx)("div",{className:"co-settings--overlay",children:(0,t.jsx)("fieldset",{className:"co-settings__fieldset--notitle",children:(0,t.jsx)(Mn.H,{id:"delete_col",label:window.translate("Legacy_medialibrary_facette_delete"),description:window.translate("Legacy_medialibrary_facette_delete_descripton")})})})),cn=(0,_.I)(a=>a.editing?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"cm-btn-bar cm-facettefilter__col-actions",children:[(0,t.jsx)("button",{type:"button",className:"cm-btn cm-btn--default js-cm-facettefilter__add-facette","data-column":a.index,"data-order":a.nextOrder,children:window.translate("Legacy_medialibrary_facette_add")}),(0,t.jsxs)("div",{className:"cm-btn-dropdown cm-btn--right",children:[a.removable?(0,t.jsx)("button",{type:"button",className:"cm-btn cm-btn--default js-cm-facettefilter__delete-col js-cm-btn-dropdown__toggle",children:(0,t.jsx)("i",{className:"ca-icon--trash"})}):null,(0,t.jsx)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--below cm-btn-dropdown__menu--right js-cm-btn-dropdown__menu"})]})]}),(0,t.jsx)("div",{className:"cm-facettefilter__add-col-wrap",children:(0,t.jsx)("button",{type:"button",className:"cm-facettefilter__add-col js-cm-facettefilter__add-col","data-column":a.index+1,children:(0,t.jsx)("i",{className:"icon-plus"})})}),(0,t.jsx)("div",{className:"cm-facettefilter__add-col-wrap cm-facettefilter__add-col-wrap--left",children:(0,t.jsx)("button",{type:"button",className:"cm-facettefilter__add-col js-cm-facettefilter__add-col","data-column":a.index,children:(0,t.jsx)("i",{className:"icon-plus"})})})]}):null),rr=(0,_.I)(({libraryPageTemplateSettingsSearchBar:a,index:e,inputName:n,item:d,multiSelection:x})=>d.display!==!1&&(0,t.jsx)("li",{className:"cm-facettefilter__facette-item",children:(0,t.jsxs)("label",{className:"cm-facettefilter__facette-label",children:[(0,t.jsx)("input",{type:"checkbox","data-id":d.id,name:n,className:`cm-facettefilter__facette-checkbox ${x?"js-cm-facettefilter__facette-checkbox":"js-cm-facettefilter__facette-radio"}`,value:d.value,defaultChecked:d.checked}),(0,t.jsx)("span",{style:{backgroundColor:d.checked?a.searchBarCheckboxColor:void 0,borderColor:d.checked?a.searchBarCheckboxColor:void 0},className:"cm-facettefilter__facette-bubble",children:(0,t.jsx)("i",{className:"cm-facettefilter__facette-icon icon-check","aria-hidden":!0})}),(0,t.jsx)("span",{className:"cm-facettefilter__facette-name",children:d.name})]})},e)),Ji=(0,_.I)(({columnCount:a,editing:e,facettes:n,libraryPageTemplateSettingsSearchBar:d,maxFacetteColumn:x,showClearAllFiltersButton:D})=>{var z;const ne={minWidth:d.searchBarMinColumnWidth,flexGrow:1,flexShrink:0,flexBasis:d.searchBarMinColumnWidth};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"cm-facettefilter__facettes cm-facettefilter__facettes--menu",children:[n==null?void 0:n.map((_e,Ce)=>{const De=_e||{length:0};return(0,t.jsxs)("div",{style:ne,className:`cm-facettefilter__facette-col js-cm-facettefilter__facette-col ${De.length===0&&!e?"cm-facettefilter__facette-col--hidden":""}`,"data-col":Ce,children:[(0,t.jsx)("ol",{className:`js-cm-facettefilter__facette-list cm-facettefilter__facette-list ${e?"cm-facettefilter__facette-list--editable":""}`,"data-col":Ce,children:De.length>0?De==null?void 0:De.map((Xe,st)=>{var dt,Nt;return(0,t.jsxs)("li",{className:"cm-facettefilter__facette js-cm-facettefilter__facette clearfix","data-key":Xe.key,children:[e?(0,t.jsxs)("div",{className:"cm-facettefilter__facette-actions cm-btn-dropdown",children:[Xe.type!=="document_categories"?(0,t.jsx)("button",{className:"cm-facettefilter__facette-action js-cm-facettefilter__facette-settings",type:"button","aria-label":"Settings",children:(0,t.jsx)("i",{className:"ca-icon--settings ca-icon--sm","aria-hidden":!0})}):null,(0,t.jsx)("button",{className:"cm-facettefilter__facette-action js-cm-btn-dropdown__toggle js-cm-facettefilter__delete-facette",type:"button","aria-label":"Delete",children:(0,t.jsx)("i",{className:"ca-icon--trash ca-icon--sm","aria-hidden":!0})}),(0,t.jsx)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--below cm-btn-dropdown__menu--right js-cm-btn-dropdown__menu"})]}):null,(0,t.jsxs)("h2",{className:`cm-facettefilter__facette-title ${e?"js-cm-facettefilter__facette-move":""}`,children:[e?(0,t.jsx)("i",{className:"icon-bars"}):null," ",Xe.title," ",e&&Xe.conditions&&Xe.conditions.length>0?(0,t.jsx)("span",{className:"ca-badge ca-badge--small ca-badge--neutral",children:"Conditions"}):null]}),((dt=Xe.items)==null?void 0:dt.length)>0?(0,t.jsx)("ul",{className:"cm-facettefilter__facette-items",children:(Nt=Xe.items)==null?void 0:Nt.map((Lt,Yt)=>(0,t.jsx)(rr,{libraryPageTemplateSettingsSearchBar:d,item:Lt,index:Yt,multiSelection:!("multi_selection"in Xe)||Xe.multi_selection,inputName:Xe.key},Lt.id))}):(0,t.jsx)("span",{className:"cm-facettefilter__menu--empty",children:window.translate("FacetteFilterMenu_empty")})]},st)}):null}),(0,t.jsx)(cn,{index:Ce,nextOrder:De.length,editing:e,removable:!0})]},Ce)}),n.length===0?(0,t.jsx)("div",{style:ne,className:`cm-facettefilter__facette-col js-cm-facettefilter__facette-col ${e?"":"cm-facettefilter__facette-list-empty"}`,"data-col":"0",children:e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("ol",{className:`js-cm-facettefilter__facette-list cm-facettefilter__facette-list ${e?"cm-facettefilter__facette-list--editable":""}`,"data-col":"0"}),(0,t.jsx)(cn,{index:0,nextOrder:0,editing:e,removable:!1})]}):(0,t.jsx)("span",{className:"cm-facettefilter__facette-empty-text",children:window.translate("Legacy_medialibrary_facette_list_empty")})}):null,e&&a>x?(z=Array.from({length:a-x}))==null?void 0:z.map((_e,Ce)=>(0,t.jsxs)("div",{style:ne,className:"cm-facettefilter__facette-col js-cm-facettefilter__facette-col","data-col":x+Ce+1,children:[(0,t.jsx)("ol",{className:`js-cm-facettefilter__facette-list cm-facettefilter__facette-list ${e?"cm-facettefilter__facette-list--editable":""}`,"data-col":x+Ce+1}),(0,t.jsx)(cn,{index:x+Ce+1,nextOrder:0,editing:e,removable:!0})]},x+Ce)):null,(0,t.jsx)("div",{className:"cm-facettefilter__facettes-loader",children:(0,t.jsx)(m.T,{})})]}),D?(0,t.jsx)("div",{className:"js-cm-facettefilter__clear-filters cm-facettefilter__clear-filters--menu",children:(0,t.jsxs)("button",{type:"button",className:"cm-facettefilter__clear-filters-button",children:[(0,t.jsx)("i",{className:"ca-icon ca-icon--reject cm-facettefilter__clear-filters-icon","aria-hidden":!0}),window.translate("Legacy_medialibrary_facette_clear_all_filters")]})}):null]})});var Fo=r(57992),Yo=r(36022),jl=r(83810),hl=r(49198),Uo=r.n(hl),Ca=Object.defineProperty,El=Object.defineProperties,ae=Object.getOwnPropertyDescriptors,V=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,Ke=(a,e,n)=>e in a?Ca(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,Se=(a,e)=>{for(var n in e||(e={}))H.call(e,n)&&Ke(a,n,e[n]);if(V)for(var n of V(e))we.call(e,n)&&Ke(a,n,e[n]);return a},Ve=(a,e)=>El(a,ae(e));const It=(0,_.I)(({facetKey:a,item:e,libraryPageTemplateSettingsSearchBar:n,multiSelection:d,onPillItemChange:x})=>e.display!==!1&&(0,t.jsx)("li",{className:"cm-facettefilter__facette-item",children:(0,t.jsxs)("label",{className:"cm-facettefilter__facette-label",children:[(0,t.jsx)("input",{type:"checkbox",name:a,className:`cm-facettefilter__facette-checkbox ${d?"js-cm-facettefilter__facette-checkbox":"js-cm-facettefilter__facette-radio"}`,value:e.value,checked:e.checked,onChange:D=>x(Ve(Se({},e),{checked:D.target.checked}))}),(0,t.jsx)("span",{className:"cm-facettefilter__facette-bubble",style:{backgroundColor:e.checked?n==null?void 0:n.searchBarCheckboxColor:void 0,borderColor:e.checked?n==null?void 0:n.searchBarCheckboxColor:void 0},children:(0,t.jsx)("i",{className:"cm-facettefilter__facette-icon icon-check"})}),(0,t.jsx)("span",{className:"cm-facettefilter__facette-name",children:e.name})]})}));var $t=Object.defineProperty,Y=Object.defineProperties,G=Object.getOwnPropertyDescriptors,J=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable,Ue=(a,e,n)=>e in a?$t(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,ut=(a,e)=>{for(var n in e||(e={}))Te.call(e,n)&&Ue(a,n,e[n]);if(J)for(var n of J(e))ze.call(e,n)&&Ue(a,n,e[n]);return a},At=(a,e)=>Y(a,G(e));const jt=(0,_.I)(({editing:a,facette:e,libraryPageTemplateSettingsSearchBar:n,onPillChange:d})=>{var x;const[D,z]=(0,u.useState)(!1),[ne,_e]=(0,u.useState)(!1),Ce=(0,u.useRef)(null),De=Uo()((n==null?void 0:n.searchBarFilterButtonColor)||"white"),st=De.getBrightness()<200?"white":De.darken(60).toRgbString();return(0,t.jsxs)("div",{style:{backgroundColor:e.count>0?n==null?void 0:n.searchBarFilterButtonColor:"white",borderColor:e.count>0||D||ne?n==null?void 0:n.searchBarFilterButtonColor:void 0,color:e.count>0?st:"black"},onMouseEnter:()=>z(!0),onMouseLeave:()=>z(!1),className:"cm-facettefilter__facette-pill js-cm-facettefilter__facette-pill",children:[(0,t.jsx)("button",{type:"button",className:"cm-facettefilter__facette-action cm-facettefilter__facette-title","data-event":"facetteFilter",onClick:()=>_e(!ne),ref:Ce,children:(0,t.jsxs)("span",{className:"cm-facettefilter__facette-pill__label",children:[e.count===1?e.label:e.title,(0,t.jsx)(g.V,{icon:"caret-down",classes:`cm-facettefilter__facette-pill_label__icon ${ne?"cm-facettefilter__facette-pill_label__icon-rotate":""}`}),e.count>1?(0,t.jsx)("span",{className:"cm-facettefilter__facette-items-count",children:e.count}):null]})}),(0,t.jsx)(Fo.K,{anchor:Ce,open:ne,placement:"bottom",modality:Yo.Ay.Modal,handleClose:()=>_e(!1),unsafe_zIndex:2004,children:(0,t.jsx)(jl.R,{padding:"none",children:(0,t.jsx)("div",{className:"tw-py-4",children:((x=e.items)==null?void 0:x.length)>0?(0,t.jsx)("ul",{className:"cm-facettefilter__facette-items",children:e.items.map((dt,Nt)=>{const Lt=!("multi_selection"in e)||e.multi_selection;return(0,t.jsx)(It,{item:dt,libraryPageTemplateSettingsSearchBar:n,facetKey:e.key,multiSelection:Lt,onPillItemChange:Yt=>{d(At(ut({},e),{items:e.items.map(Xt=>!Lt&&Xt.value!==Yt.value?At(ut({},Xt),{checked:!1}):Xt.value===Yt.value?Yt:Xt)}))}},Nt)})}):(0,t.jsx)("span",{className:"cm-facettefilter__pill--empty",children:window.translate("FacetteFilterPills_empty")})})})}),a?(0,t.jsxs)("span",{className:"cm-facettefilter__facette-actions",children:[e.type!=="document_categories"?(0,t.jsx)("button",{className:"cm-facettefilter__facette-action js-cm-facettefilter__facette-settings",type:"button",children:(0,t.jsx)("i",{className:"ca-icon--settings ca-icon--sm"})}):null,(0,t.jsxs)("div",{className:"cm-btn-dropdown",children:[(0,t.jsx)("button",{className:"cm-facettefilter__facette-action js-cm-btn-dropdown__toggle js-cm-facettefilter__delete-facette",type:"button",children:(0,t.jsx)("i",{className:"ca-icon--trash ca-icon--sm"})}),(0,t.jsx)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--below cm-btn-dropdown__menu--right js-cm-btn-dropdown__menu"})]})]}):null]})}),_t=(0,_.I)(({editing:a,facettes:e,libraryPageTemplateSettingsSearchBar:n,onPillChange:d,showClearAllFiltersButton:x})=>{let D=0,z=0;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"cm-facettefilter__facettes cm-facettefilter__facettes--pills",children:[e==null?void 0:e.map((ne,_e)=>(D=_e,ne==null?void 0:ne.map((Ce,De)=>(z=De,(0,t.jsx)("div",{className:"cm-facettefilter__facette js-cm-facettefilter__facette","data-key":Ce.key,"data-title":Ce.title,children:(0,t.jsx)(jt,{editing:a,facette:Ce,libraryPageTemplateSettingsSearchBar:n,onPillChange:Xe=>d(Xe)})},Ce.key))))),a?(0,t.jsx)("div",{className:"cm-facettefilter__add-facette-pill",children:(0,t.jsx)("button",{type:"button",className:"cm-facettefilter__facette-action js-cm-facettefilter__add-facette","data-column":D,"data-order":z+1,children:(0,t.jsx)("span",{className:"cm-facettefilter__facette-pill__label",children:(0,t.jsx)(g.V,{icon:"add"})})})}):null,x?(0,t.jsx)("div",{className:"js-cm-facettefilter__clear-filters cm-facettefilter__clear-filters--pill",children:(0,t.jsx)("button",{type:"button",className:"cm-facettefilter__facette-action",children:(0,t.jsxs)("span",{className:"cm-facettefilter__facette-pill__label",children:[(0,t.jsx)("i",{className:"ca-icon ca-icon--reject cm-facettefilter__clear-filters-icon"}),window.translate("Legacy_medialibrary_facette_clear_all_filters")]})})}):null]}),(0,t.jsx)("div",{className:"cm-facettefilter__facettes-loader",children:(0,t.jsx)(m.T,{})})]})}),Kt=(0,_.I)(({columnCount:a,editing:e,facettes:n,layoutType:d,libraryPageTemplateSettingsSearchBar:x,maxFacetteColumn:D,onPillChange:z,showClearAllFiltersButton:ne})=>d==="pills"?(0,t.jsx)(_t,{editing:e,facettes:n,libraryPageTemplateSettingsSearchBar:x,onPillChange:_e=>z(_e),showClearAllFiltersButton:ne}):d==="menu"?(0,t.jsx)(Ji,{columnCount:a,editing:e,facettes:n,libraryPageTemplateSettingsSearchBar:x,maxFacetteColumn:D,showClearAllFiltersButton:ne}):null),bt=(0,_.I)(()=>(0,t.jsx)("div",{className:"co-settings--overlay",children:(0,t.jsx)("fieldset",{className:"co-settings__fieldset--notitle",children:(0,t.jsx)(Mn.H,{id:"delete_facette",label:window.translate("Legacy_medialibrary_facette_delete"),description:window.translate("Legacy_medialibrary_facette_delete_descripton")})})}));var as=Object.defineProperty,Os=Object.defineProperties,es=Object.getOwnPropertyDescriptors,Ns=Object.getOwnPropertySymbols,Ds=Object.prototype.hasOwnProperty,ra=Object.prototype.propertyIsEnumerable,an=(a,e,n)=>e in a?as(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,na=(a,e)=>{for(var n in e||(e={}))Ds.call(e,n)&&an(a,n,e[n]);if(Ns)for(var n of Ns(e))ra.call(e,n)&&an(a,n,e[n]);return a},Ja=(a,e)=>Os(a,es(e));const Rn=(0,_.I)(a=>(0,t.jsx)("div",Ja(na({className:"mod mod-facette m-facette"},a.facette?{"data-facette":JSON.stringify(a.facette)}:{"data-column":a.column,"data-order":a.order}),{"data-project-type":a.projectType})));var Ua=r(5181),yn=Object.defineProperty,Jn=Object.defineProperties,$n=Object.getOwnPropertyDescriptors,Za=Object.getOwnPropertySymbols,$r=Object.prototype.hasOwnProperty,Hn=Object.prototype.propertyIsEnumerable,ml=(a,e,n)=>e in a?yn(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,dr=(a,e)=>{for(var n in e||(e={}))$r.call(e,n)&&ml(a,n,e[n]);if(Za)for(var n of Za(e))Hn.call(e,n)&&ml(a,n,e[n]);return a},gi=(a,e)=>Jn(a,$n(e));class Ki extends b.j{constructor(){super(...arguments),this.libraryPageTemplateSettingsSearchBar=null,this.$currentMenu=null,this.columnCount=0,this.conditionalFacettes=null,this.editing=!1,this.facets=[],this.filters={},this.hasPermission=!1,this.limit=25,this.maxFacetteColumn=0,this.DRAG_ANIMATION_DURATION_IN_MILLIS=500}on(e){this.sandbox.subscribe("events",this),this.document=this.$ctx.data("document"),this.projectType=this.$ctx.data("projectType"),this.editMode=this.$ctx.data("editMode"),this.layoutType=this.$ctx.dataAsString("layoutType"),Ua(document.body).hasClass("editor-enabled")&&this.onEditingEnabled(),this.$ctx.on("change",".js-cm-facettefilter__facette-checkbox",n=>{const x=Ua(n.currentTarget).closest(".js-cm-facettefilter__facette");this.resetConditionalFacettes(this.getFacette(x.data("key"))),this.changeFilter()}),this.$ctx.on("change",".js-cm-facettefilter__facette-radio",n=>{n.stopPropagation(),n.preventDefault();const d=Ua(n.currentTarget),x=d.closest(".js-cm-facettefilter__facette"),D=d.prop("checked");x.find(".js-cm-facettefilter__facette-radio").prop("checked",!1),d.prop("checked",D),this.resetConditionalFacettes(this.getFacette(x.data("key"))),this.changeFilter()}),this.$ctx.on("click",".js-cm-facettefilter__add-facette",n=>{n.stopPropagation();const d=Ua(n.currentTarget);this.showAddFacetteDialog(d.data("column"),d.data("order"))}),this.$ctx.on("click",".js-cm-facettefilter__facette-settings",n=>{n.stopPropagation();const x=`${Ua(n.currentTarget).closest(".js-cm-facettefilter__facette").data("key")}`;this.showEditFacetteDialog(x)}),this.$ctx.on("click",".js-cm-facettefilter__delete-facette",n=>{const x=Ua(n.currentTarget).closest(".js-cm-facettefilter__facette").data("key");this.showDeleteFacetteDialog(x)}),this.$ctx.on("click",".js-cm-facettefilter__add-col",n=>{const x=Ua(n.currentTarget).data("column");this.addColumn(x)}),this.$ctx.on("click",".js-cm-facettefilter__delete-col",n=>{const x=Ua(n.currentTarget).closest(".js-cm-facettefilter__facette-col").data("col");this.showDeleteColDialog(x)}),this.$ctx.on("click",".js-cm-facettefilter__clear-filters",()=>this.clearAllFilters()),this.editMode&&this.loadFacettes(),e()}onFilterDocumentLibrary(e){const n=`${e}`;this.$ctx.addClass("state-loading"),this.filters.document_categories=n,this.fire("facetteFilterChanged",{filters:this.filters})}stop(){this.closeCurrentMenu()}closeCurrentMenu(){this.$currentMenu&&this.fire("closeDropdown",this.$currentMenu)}renderFacets(){this.closeCurrentMenu();const e=this.editing&&this.hasPermission;let n=!e&&this.conditionalFacettes?this.conditionalFacettes:this.facets;n=this.processFacets(n);for(const ne of n)ne.column>this.maxFacetteColumn&&(this.maxFacetteColumn=ne.column),ne.column>this.columnCount&&(this.columnCount=ne.column);const x=Array(this.maxFacetteColumn+1).fill([]).map((ne,_e)=>n.filter(De=>De.column===_e).sort((De,Xe)=>De.order-Xe.order)),D=this.$ctx.find(".js-cm-facettefilter-container"),z=D.get(0);this.sandbox.removeModules(D),z&&(0,s.Cc)(Kt,z,{columnCount:this.columnCount,editing:e,facettes:x,layoutType:this.layoutType,libraryPageTemplateSettingsSearchBar:this.libraryPageTemplateSettingsSearchBar,maxFacetteColumn:this.maxFacetteColumn,onPillChange:ne=>{this.resetConditionalFacettes(this.getFacette(ne.key)),this.changeFilter(this.changeFiltersByFacet(ne))},showClearAllFiltersButton:this.hasCheckedItems(n)}),this.sandbox.addModules(D),this.editMode&&e&&this.enableSorting()}changeFiltersByFacet(e){const{key:n,items:d}=e,x=d.filter(z=>z.checked).map(z=>z.value).join(","),D=gi(dr({},this.filters),{[n]:x||void 0});return"q"in D&&delete D.q,D}enableSorting(){this.$ctx.find(".js-cm-facettefilter__facette-list").each((n,d)=>{nr.Ay.create(d,{animation:this.DRAG_ANIMATION_DURATION_IN_MILLIS,group:"facettes",handle:".js-cm-facettefilter__facette-move",draggable:".js-cm-facettefilter__facette",onStart:()=>{this.$ctx.addClass("state-dragging"),this.$ctx.find(".js-cm-facettefilter__search-settings-toggle").fadeOut(this.DRAG_ANIMATION_DURATION_IN_MILLIS)},onEnd:()=>{this.$ctx.removeClass("state-dragging"),this.$ctx.find(".js-cm-facettefilter__search-settings-toggle").fadeIn(this.DRAG_ANIMATION_DURATION_IN_MILLIS)},onSort:x=>{if(!x.target)return!1;const D=Ua(x.from).data("col"),z=Ua(x.to).data("col"),ne=x.oldIndex,_e=x.newIndex;if(Ua(x.target).data("col")===Ua(x.to).data("col")&&(ne!==_e||D!==z)){let Ce=0;for(const De of x.to.children){const Xe=this.facets.findIndex(st=>De.getAttribute("data-key")===st.key);this.facets[Xe].column=z,this.facets[Xe].order=Ce,Ce++}this.maxFacetteColumn=0,this.renderFacets(),this.updateStructure()}}})})}changeFilter(e=null){this.$ctx.addClass("state-loading"),this.filters=e!=null?e:this.getFilters(),this.fire("facetteFilterChanged",{filters:this.filters})}clearAllFilters(){const e=this.$ctx.find(".js-cm-facettefilter__facette-checkbox"),n=this.$ctx.find(".js-cm-facettefilter__facette-radio");e.prop("checked",!1),n.prop("checked",!1),this.changeFilter()}resetConditionalFacettes(e){const n=(d,x)=>{for(const D of this.facets)if(D.conditions&&D.conditions.length>0){for(const z of D.conditions)if(D.key!==z.key&&z.value===x){const ne=this.$ctx.find(`.js-cm-facettefilter__facette[data-key="${D.key}"]`);if(ne.length>0){const _e=ne.find(".js-cm-facettefilter__facette-radio:checked,.js-cm-facettefilter__facette-checkbox:checked");_e.prop("checked",!1),_e.each((Ce,De)=>{n(D.key,Ua(De).val())})}}}};if(e&&this.filters[e.key]){const d=this.filters[e.key].split(",");for(const x of d)n(e.key,x)}}processFacets(e){for(const n of e){const d=this.filters[n.key]?this.filters[n.key].split(","):[];Array.isArray(n.items)&&(n.count=0,n.items=n.items.map(x=>(x.checked=Ua.inArray(x.value,d)!==-1,x.checked&&(n.label=x.name,n.id=x.id,n.count++),x))),n.count>1&&delete n.label}return e}updateStructure(){const e=this.facets.map(n=>({key:n.key,column:n.column,order:n.order}));return this.fire("facettesModified",["events"]),this.data.put(`/api/facette/structure/${this.document}`,e)}showAddFacetteDialog(e,n){const d=Ua((0,s.EY)(Rn,{column:e,order:n,projectType:this.projectType}));this.fire("openModal",{closeable:!1,modifier:"default",$content:d},["events"])}showEditFacetteDialog(e){const n=this.getFacette(e),d=Ua((0,s.EY)(Rn,{facette:n}));this.fire("openModal",{closeable:!1,modifier:"default",$content:d},["events"])}showDeleteFacetteDialog(e){const d=this.$ctx.find(`.js-cm-facettefilter__facette[data-key="${e}"]`).find(".js-cm-facettefilter__delete-facette").next(".js-cm-btn-dropdown__menu"),x=Ua((0,s.EY)(bt));d.html(x);const z=new re.D(x,this.sandbox).getSetting("delete_facette");z.focus(),z.deleted=()=>{this.facets=this.facets.filter(ne=>ne.key!==String(e)),this.maxFacetteColumn=0,this.renderFacets(),this.updateStructure()},z.cancelled=()=>{this.fire("closeDropdown",d,["events"])}}showDeleteColDialog(e){const d=this.$ctx.find(`.js-cm-facettefilter__facette-col[data-col="${e}"]`).find(".js-cm-facettefilter__delete-col").next(".js-cm-btn-dropdown__menu"),x=Ua((0,s.EY)(ka));d.html(x);const z=new re.D(x,this.sandbox).getSetting("delete_col");z.focus(),z.deleted=()=>{this.facets=this.facets.filter(ne=>ne.column!==e).map(ne=>(ne.column>e&&ne.column--,ne)),this.columnCount--,this.maxFacetteColumn=0,this.renderFacets(),this.updateStructure()},z.cancelled=()=>{this.fire("closeDropdown",d,["events"])}}addColumn(e){this.facets=this.facets.map(n=>(n.column>=e&&n.column++,n)),this.columnCount++,this.maxFacetteColumn=0,this.renderFacets(),this.updateStructure()}getFacette(e){return this.facets.find(n=>n.key===e)}getFilters(){return this.data.serializeForm(this.$ctx)}loadFacettes(){this.data.get(`/api/facette/list/${this.document}`).then(e=>{e.success&&(this.facets=e.facettes,this.hasPermission=e.hasPermission,this.limit=e.limit)})}onFacettesChanged(e){var n;const{filters:d,facettes:x,libraryPageTemplateSettingsSearchBar:D}=e!=null?e:{};d&&(this.filters=d),x&&(this.conditionalFacettes=x),D&&(this.libraryPageTemplateSettingsSearchBar=D,this.layoutType=((n=this.libraryPageTemplateSettingsSearchBar)==null?void 0:n.searchBarFilterType)==="pills"?"pills":"menu"),this.$ctx.removeClass("state-loading"),this.renderFacets()}onEditingEnabled(){this.editing=!0,this.renderFacets()}onEditingDisabled(){this.editing=!1,this.renderFacets()}onFacetteAdded(e){this.facets.push(e.facette),this.renderFacets(),this.fire("facettesModified",["events"])}onFacetteEdited(e){this.facets=this.facets.map(n=>n.key===e.facette.key?e.facette:n),this.renderFacets(),this.fire("facettesModified",["events"])}hasCheckedItems(e){let n=!1;for(const d of e)if(d.items!==void 0)for(const x of d.items)x.checked&&(n=!0);return n}}var to=r(5181);class oo extends b.j{on(e){this.sandbox.subscribe("events",this),this.$ctx.on("click",n=>{n.stopPropagation();const x=to(n.currentTarget).data("feature");this.openPayment(x)}),this.$ctx.on("click",".js-cm-feature-hook__feature",n=>{n.stopPropagation();const x=to(n.currentTarget).data("feature");this.openPayment(x)}),e()}openPayment(e){e&&this.fire("openPayment",{feature:e},["events"])}}var Sn=Object.defineProperty,ur=Object.getOwnPropertySymbols,Tr=Object.prototype.hasOwnProperty,du=Object.prototype.propertyIsEnumerable,Od=(a,e,n)=>e in a?Sn(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,zc=(a,e)=>{for(var n in e||(e={}))Tr.call(e,n)&&Od(a,n,e[n]);if(ur)for(var n of ur(e))du.call(e,n)&&Od(a,n,e[n]);return a};const id=(0,_.I)(a=>(0,t.jsxs)("figure",{className:"cm-figure__figure js-cm-figure__figure",children:[(0,t.jsx)("img",zc({alt:a.alt,title:a.title,className:`cm-figure__figure-image ${a.imageLazyLoaded?"imageLazyLoaded":""} js-cm-figure__figure-image`},a.imageLazyLoaded?{"data-src":a.url}:{src:a.url})),a.descriptionAvailable&&a.description&&a.description.length>0?(0,t.jsx)("figcaption",{className:"cm-figure__figure-caption",children:a.description}):null]}));var Gc=r(5181);class uu extends b.j{on(e){this.tpl.bindDataAttributes(this,{asset:{type:Object,default:null,changed:()=>this.updateAsset()},maxWidth:{type:Number},fullSize:{type:Boolean},imageLazyLoaded:{type:Boolean},descriptionAvailable:{type:Boolean}}),this.renderImageTag(),this.updateFullSize(),e()}renderImageTag(){if(!this.isAssetPreviewable())return;const e=Gc((0,s.EY)(id,{title:this.getTitle(),description:this.getDescription(),url:this.getUrl(),alt:this.getAlt(),imageLazyLoaded:this.imageLazyLoaded,descriptionAvailable:this.descriptionAvailable}));this.tpl.addOrReplaceAndActivate(this.$ctx,".js-cm-figure__figure",e)}updateFullSize(){if(!this.fullSize)return;const e=this.$ctx.find(".js-cm-figure__figure"),n=this.$ctx.find(".js-cm-figure__figure-image");this.$ctx.addClass("cm-figure--full-size"),e.addClass("cm-figure__figure--full-height"),n.addClass("cm-figure__figure-image--full-height")}updateAsset(){const e=this.$ctx.find(".js-cm-figure__figure-image");this.imageLazyLoaded?e.attr("data-src",this.getUrl()):e.attr("src",this.getUrl()),e.attr("alt",this.getAlt()),e.attr("title",this.getTitle())}isAssetPreviewable(){var e;return((e=this.asset)==null?void 0:e.is_previewable)||!1}getUrl(){return Cn.y.isString(this.asset.preview_url)&&Cn.y.isNumber(this.maxWidth)&&this.maxWidth>0?this.asset.preview_url.replace("{width}",this.maxWidth):Cn.y.isString(this.asset.preview_url)?this.asset.preview_url:""}getAlt(){return Cn.y.isString(this.asset.filename)?this.asset.filename:""}getTitle(){return Cn.y.isString(this.asset.title)?this.asset.title:""}getDescription(){return Cn.y.isString(this.asset.description)?this.asset.description:""}}const pu=(0,_.I)(a=>(0,t.jsx)("button",{className:`co-filter-pills__pill js-co-filter-pills__pill ${a.isActive?"co-filter-pills__pill--active":""}`,"data-identifier":a.identifier,children:a.label}));var hu=r(5181);class mu extends b.j{on(e){this.tpl.bindDataAttributes(this,{filters:{type:Object}}),this.render(),this.bindEvents(),e()}render(){const e=this.getFilters();for(const n of e)this.$ctx.append((0,s.EY)(pu,n))}bindEvents(){this.$ctx.on("click",".js-co-filter-pills__pill",e=>{const n=hu(e.target);this.toggleActiveClass(n);const d=n.dataAsString("identifier");this.tpl.fireCustomEvent(this,"filterPillClicked",{identifier:d})})}getFilters(){return Cn.y.isArray(this.filters)?this.filters:[]}toggleActiveClass(e){this.$ctx.find("button").removeClass("co-filter-pills__pill--active"),e.addClass("co-filter-pills__pill--active")}}var Q=r(64681),X=r.n(Q),oe=r(80135);class Fe extends oe.k{on(){this.value=this.$ctx.data("value")}serialize(){const e={[this.id]:this.getValue()};return e[this.id]?e:null}setValue(e){this.value=e}getValue(){return this.value}}class qe extends oe.k{on(){this.value=this.$ctx.data("value")}serialize(){const e={[this.id]:this.getValue()};return e[this.id]?e:null}setValue(e){this.value=e}getValue(){return this.value}}class mt extends oe.k{on(){this.value=this.$ctx.data("value")}serialize(){const e={[this.id]:this.getValue()};return e[this.id]===null?null:e}setValue(e){this.value=e}getValue(){return typeof this.value=="boolean"?this.value:null}}var Dt=r(5181);class Ut extends oe.k{on(){this.$current=this.$ctx.find(".js-cm-filter-dropdown__current"),this.$menu=this.$ctx.find(".js-cm-btn-dropdown__menu"),this.$ctx.on("click",".js-cm-filter-dropdown__link",(e,n)=>{const d=Dt(e.currentTarget);d.hasClass("state-active")||(this.$ctx.find(".js-cm-filter-dropdown__link").removeClass("state-active"),d.addClass("state-active"),this.$current.data("value",d.data("value")),this.$current.text(d.text()),this.mod.fire("closeDropdown",this.$menu,["events"]),n||this.mod.changed())})}serialize(){const e={[this.id]:this.getValue()};return e[this.id]?e:null}setValue(e){this.$ctx.find(`.js-cm-filter-dropdown__link[data-value="${e}"]`).triggerHandler("click",[!0])}getValue(){return this.$current.data("value")}}class bs extends oe.k{on(){this.value=this.$ctx.data("value")}serialize(){const e={[this.id]:this.getValue()};return e[this.id]?e:null}setValue(e){this.value=e}getValue(){return this.value}}class ts extends oe.k{on(){this.value=this.$ctx.data("value")}serialize(){const e={[this.id]:this.getValue()};return e[this.id]?e:null}setValue(e){this.value=Number(e)}getValue(){return this.value}}class Mt extends oe.k{on(){this.value=this.convertUrlParams(this.$ctx.data("value"))}serialize(){const e={[this.id]:this.getValue()};return e||null}setValue(e){this.value=e}getValue(){return this.value}convertUrlParams(e){if(Array.isArray(e)){const n=[];for(const d of e)for(const x in d)n.push({[x]:d[x]});return n}return e}}class us extends oe.k{on(){this.value=this.$ctx.data("value")}serialize(){const e={[this.id]:this.getValue()};return e[this.id]?e:null}setValue(e){this.value=e}getValue(){return this.value}}var Zs=r(5181);class ks extends oe.k{on(){this.$query=this.$ctx.find(".js-cm-filter-query__query"),this.$query.on("keydown",Zs.debounce(500,e=>{e.key!=="Tab"&&(e.which===13?e.stopPropagation():this.mod.changed())})),this.$query.on("click",e=>e.stopPropagation())}serialize(){const e={[this.id]:this.getValue()};return e[this.id]?e:null}setValue(e){this.$query.val(e)}getValue(){return this.$query.val()}}var Gs=r(3064);class ja extends oe.k{on(){this.value=this.$ctx.data("value")}serialize(){const e={[this.id]:this.getValue()};return e[this.id]?e:null}setValue(e){this.value=e}getValue(){return this.value===null||this.value===void 0?null:`${this.value}`}}class pa extends oe.k{on(){this.value=this.$ctx.data("value")}serialize(){const e={[this.id]:this.getValue()};return e[this.id]?e:null}setValue(e){this.value=e}getValue(){return this.value}}const ta=(0,_.I)(a=>(0,t.jsxs)("div",{className:"cm-filter-creator__creator",children:[(0,t.jsx)("i",{className:"ca-icon--user ca-icon--sm cm-filter-creator__creator-icon"}),(0,t.jsx)("span",{className:"cm-filter-creator__text",children:a.value}),(0,t.jsx)("button",{className:"cm-filter-creator__remove js-cm-filter-creator__remove","data-value":a.value,type:"button",children:(0,t.jsx)("i",{className:"ca-icon--reject ca-icon--small"})})]})),Xs=(0,_.I)(a=>{let e=Gt.l.ICON_OPEN_LOCK,n=window.translate("Filter_downloadRequestUnprotected");return a.downloadRequestRequired===!0&&(e=Gt.l.ICON_LOCK,n=window.translate("Filter_downloadRequestProtected")),a.downloadRequestRequired===!0||a.downloadRequestRequired===!1?(0,t.jsxs)("div",{className:"cm-filter-download-request__item",children:[(0,t.jsx)(g.V,{icon:e}),(0,t.jsx)("span",{className:"cm-filter-download-request__text",children:n}),(0,t.jsx)("button",{className:"cm-filter-download-request__remove js-cm-filter-download-request__remove","data-download-request":a.downloadRequestRequired,type:"button",children:(0,t.jsx)("i",{className:"ca-icon--reject ca-icon--small"})})]}):null}),da=(0,_.I)(a=>(0,t.jsxs)("div",{className:"cm-filter-language__language",children:[(0,t.jsx)("span",{className:"cm-filter-language__text",children:a.language}),(0,t.jsx)("button",{className:"cm-filter-language__remove js-cm-filter-language__remove","data-language":a.language,type:"button",children:(0,t.jsx)("i",{className:"ca-icon--reject ca-icon--small"})})]})),Ma=(0,_.I)(a=>{var e;return(e=a.license)!=null&&e.value?(0,t.jsxs)("div",{className:"cm-filter-license__license",children:[(0,t.jsxs)("span",{className:"cm-filter-license__text",children:[window.translate("LicenseFilter_label_licenseApplied"),": ",a.license.value]}),(0,t.jsx)("button",{className:"cm-filter-license__remove js-cm-filter-license__remove","data-value":a.value,type:"button",children:(0,t.jsx)("i",{className:"ca-icon--reject ca-icon--small"})})]}):null}),ba=(0,_.I)(a=>(0,t.jsxs)("div",{className:"cm-filter-metadata__metadata",children:[(0,t.jsxs)("span",{className:"cm-filter-metadata__text",children:[a.customMetadataPropertyName,": ",a.customMetadataValue]}),(0,t.jsx)("button",{className:"cm-filter-metadata__remove js-cm-filter-metadata__remove","data-metadata":JSON.stringify(a.metadataFilter),type:"button",children:(0,t.jsx)("i",{className:"ca-icon--reject ca-icon--small"})})]})),xn=(0,_.I)(a=>a.isMissingMetadataFilterApplied?(0,t.jsxs)("div",{className:"cm-filter-missing-metadata-container",children:[(0,t.jsxs)("span",{className:"cm-filter-missing-metadata__text",children:[(0,t.jsx)("i",{className:"ca-icon--callout ca-icon--sm",width:"12"})," Missing metadata"]}),(0,t.jsx)("button",{className:"cm-filter-missing-metadata__remove js-cm-filter-missing-metadata__remove","data-value":a.isMissingMetadataFilterApplied,type:"button",children:(0,t.jsx)("i",{className:"ca-icon--reject ca-icon--small"})})]}):null),pr=(0,_.I)(a=>(0,t.jsxs)("div",{className:"cm-filter-status__status",children:[(0,t.jsx)("span",{className:"cm-filter-status__status-bubble",style:{backgroundColor:`${a.status.color}`}}),(0,t.jsx)("span",{className:"cm-filter-status__text",children:a.status.name}),(0,t.jsx)("button",{className:"cm-filter-status__remove js-cm-filter-status__remove","data-status-id":a.status.id,type:"button",children:(0,t.jsx)("i",{className:"ca-icon--reject ca-icon--small"})})]})),er=(0,_.I)(a=>(0,t.jsxs)("div",{className:"cm-filter-tag__tag",children:[(0,t.jsx)("i",{className:"ca-icon--tag ca-icon--sm cm-filter-tag__tag-icon"}),(0,t.jsx)("span",{className:"cm-filter-tag__text",children:a.tag}),(0,t.jsx)("button",{className:"cm-filter-tag__remove js-cm-filter-tag__remove","data-tag":a.tag,type:"button",children:(0,t.jsx)("i",{className:"ca-icon--reject ca-icon--small"})})]}));var Aa=r(71360),Ks=r(45924),Ka=r(83780);const ti=({options:a,onChange:e,activeOptionId:n,mobileViewIcon:d})=>{var x;const D=(x=a.find(st=>st.id===n))==null?void 0:x.title,[z,ne]=(0,u.useState)(!1),_e=(0,Ka.r)(z),Ce=st=>{e(st),ne(!1)},De=()=>{ne(st=>!st)},Xe=(st,dt)=>{st.key==="Escape"&&ne(!1),st.key==="Enter"&&(e(dt),ne(!1))};return(0,tr.y)(_e,()=>ne(!1)),(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{className:(0,Oe.h)([Ks.OA,"cm-btn tw-max-h-[32px] tw-px-2 !tw-border-black-10  !tw-bg-white !tw-rounded-l-none !tw-border-l-[1] tw-rounded-r tw-text-text-x-weak tw-text-sm tw-flex tw-items-center tw-pt-0 tw-pb-0"]),type:"button","data-test-id":"radioDropdown-button",onClick:De,children:[d&&(0,t.jsx)("i",{className:` cm-filter-scope__button-icon ca-icon--sm ca-icon--${d}`,style:{lineHeight:"unset"}}),(0,t.jsx)("span",{"data-test-id":"button-label",className:"cm-filter-scope__button-text tw-mr-1 tw-text-text-weak",children:D}),(0,t.jsx)(St.default,{size:ma.l.Size12})]}),z&&(0,t.jsx)("div",{ref:_e,className:"tw-absolute tw-top-[120%] tw-min-w-[280px] tw-bg-white tw-float-left tw-list-none tw-text-left tw-transition-shadow tw-duration-200 tw-ease-linear tw-z-[200] tw-shadow-[0_1px_80px_8px_rgba(0,0,0,0.4)]","data-test-id":"radioDropdown-dropdown",children:(0,t.jsx)("div",{className:"tw-flex tw-flex-col tw-gap-2.5 tw-py-3.5 tw-px-5",children:a.map(st=>(0,t.jsx)("div",{role:"button",tabIndex:0,onKeyDown:dt=>Xe(dt,st.id),children:(0,t.jsxs)("label",{className:"ca-radio ca-radio--md ",children:[(0,t.jsx)("input",{"data-test-id":`radioDropdown-option-${st.id}`,type:"radio",className:"ca-radio__radio",name:"archiveFilter",value:st.id,checked:st.id===n,onChange:()=>Ce(st.id),tabIndex:-1}),(0,t.jsx)("span",{className:"ca-radio__bubble"}),(0,t.jsx)("span",{className:"ca-radio__label ",children:st.title})]})},st.id))})})]})};var Mi=r(22005),Ts=r(68699),Il=r(302),Pl=r(12882),_l=r(66868),Zo=r(55193);const od=(0,_.I)(a=>(0,t.jsx)("div",{className:"co-filters__filters",children:(0,t.jsx)(Zo.m,{id:"query",classes:"js-co-filters__filter",value:a.filters.query,placeholder:window.translate("Legacy_filters_activities_query_placeholder")})})),Gl=(0,_.I)(a=>(0,t.jsx)("div",{className:`cm-filter cm-filter-creator js-cm-filter-creator ${a.classes||""}`,"data-id":a.id,"data-type":"creator","data-value":a.value,children:(0,t.jsx)("div",{className:"js-cm-filter-creator__list"})})),ir=(0,_.I)(a=>(0,t.jsx)("div",{className:`cm-filter cm-filter-download-request js-cm-filter-download-request ${a.classes||""}`,"data-id":a.id,"data-type":"download-request","data-value":a.value})),Vl=(0,_.I)(a=>{const e=a.value?Array.isArray(a.value)?a.value:[a.value]:[];return(0,t.jsx)("div",{className:`cm-filter cm-filter-language js-cm-filter-languages ${a.classes||""}`,"data-id":a.id,"data-type":"languages","data-value":JSON.stringify(e),children:(0,t.jsx)("div",{className:"js-cm-filter-languages__list"})})}),cc=(0,_.I)(a=>(0,t.jsx)("div",{className:`cm-filter cm-filter-license js-cm-filter-license ${a.classes||""}`,"data-id":a.id,"data-type":"license","data-value":a.value,children:(0,t.jsx)("div",{className:"js-cm-filter-license__list"})})),dc=(0,_.I)(a=>{const e=a.value?Array.isArray(a.value)?a.value:[a.value]:[];return(0,t.jsx)("div",{className:`cm-filter cm-filter-metadata js-cm-filter-metadata ${a.classes||""}`,"data-id":a.id,"data-type":"metadata","data-value":JSON.stringify(e),children:(0,t.jsx)("div",{className:"js-cm-filter-metadata__list"})})}),Ad=(0,_.I)(a=>(0,t.jsx)("div",{className:`cm-filter cm-filter-missing-metadata js-cm-filter-missing-metadata ${a.classes||""}`,"data-id":a.id,"data-type":"missing-metadata","data-value":a.value})),ld=(0,_.I)(a=>(0,t.jsx)("div",{className:`cm-filter cm-filter-scope ${a.extended?"cm-filter-query--extended":""} ${a.classes||""}`,"data-id":a.id,"data-value":a.value,"data-type":"scope",children:(0,t.jsx)("div",{className:"js-cm-filter-scope__button"})})),cd=(0,_.I)(a=>(0,t.jsx)("div",{className:`cm-filter cm-filter-status js-cm-filter-status ${a.classes||""}`,"data-id":a.id,"data-type":"status","data-value":a.value,children:(0,t.jsx)("div",{className:"js-cm-filter-status__list"})})),dd=(0,_.I)(a=>{const e=a.value?Array.isArray(a.value)?a.value:[a.value]:[];return(0,t.jsx)("div",{className:`cm-filter cm-filter-tag js-cm-filter-tag ${a.classes||""}`,"data-id":a.id,"data-type":"tag","data-value":JSON.stringify(e),children:(0,t.jsx)("div",{className:"js-cm-filter-tag__list"})})}),Kc=(0,_.I)(()=>(0,t.jsxs)("div",{className:" cm-btn-dropdown cm-actions__action-wrap js-co-filters__funnel co-filters__funnel",children:[(0,t.jsx)("div",{className:"co-filters__funnel-filters js-co-filters__funnel-filters"}),(0,t.jsxs)("button",{className:"cm-btn co-filters__funnel-dropdown-button js-co-filters__funnel-dropdown-button js-cm-btn-dropdown__toggle","data-event":"funnelFilter",type:"button",children:[(0,t.jsx)(g.V,{icon:"filter",size:Gt.l.SIZE_SMALL}),(0,t.jsx)(g.V,{icon:"caret-down",size:Gt.l.SIZE_EXTRA_SMALL,classes:"co-filters__funnel-caret"})]}),(0,t.jsx)("div",{className:"js-co-filters__fuller-menu cm-btn-dropdown__menu js-cm-btn-dropdown__menu cm-btn-dropdown__menu--below",children:(0,t.jsx)("div",{className:"cm-btn-dropdown__items",children:(0,t.jsx)(m.T,{})})})]})),kw=(0,_.I)(a=>(0,t.jsxs)("div",{className:"co-filters__filters co-filters--extended",children:[(0,t.jsx)(Zo.m,{id:"q",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters.q,placeholder:window.translate("Legacy_filters_assets_query_placeholder"),extended:!0}),(0,t.jsx)(Kc,{}),(0,t.jsx)(Vl,{id:"languages",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters.languages,extended:!0}),(0,t.jsx)(dd,{id:"tag",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters.tag,extended:!0}),(0,t.jsx)(Ad,{id:fo.MISSING_METADATA_FILTER_ID,classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters[fo.MISSING_METADATA_FILTER_ID],extended:!0}),(0,t.jsx)(dc,{id:"metadata",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters.metadata,extended:!0}),(0,t.jsx)(cd,{id:"status",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters.status,extended:!0}),(0,t.jsx)(Gl,{id:"creator",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters.creator,extended:!0}),(0,t.jsx)(ir,{id:fo.DOWNLOAD_REQUEST_FILTER_ID,classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters[fo.DOWNLOAD_REQUEST_FILTER_ID],extended:!0}),(0,t.jsx)(cc,{id:fo.LICENSE_FILTER_ID,classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters[fo.LICENSE_FILTER_ID],extended:!0}),(0,t.jsx)(ld,{id:"scope",classes:"js-co-filters__filter co-filters__scope co-filters--separator",value:a.filters.scope,extended:!1})]})),Bw=(0,_.I)(a=>(0,t.jsxs)("div",{className:"co-filters__filters co-filters--extended",children:[(0,t.jsx)(Zo.m,{id:"q",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters.q,placeholder:window.translate("Legacy_filters_assets_query_placeholder"),extended:!0}),(0,t.jsx)(Kc,{}),(0,t.jsx)(dd,{id:"tag",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters["tag[]"],extended:!0}),(0,t.jsx)(Ad,{id:fo.MISSING_METADATA_FILTER_ID,classes:"js-co-filters__filter",value:a.filters[fo.MISSING_METADATA_FILTER_ID],extended:!0}),(0,t.jsx)(dc,{id:"metadata",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters.metadata,extended:!0}),a.utils.account.hasFeature("WORKSPACE_WORKFLOW")?(0,t.jsx)(cd,{id:"status",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters.status,extended:!0}):null,(0,t.jsx)(ir,{id:fo.DOWNLOAD_REQUEST_FILTER_ID,classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters[fo.DOWNLOAD_REQUEST_FILTER_ID],extended:!0}),(0,t.jsx)(cc,{id:fo.LICENSE_FILTER_ID,classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters[fo.LICENSE_FILTER_ID],extended:!0}),(0,t.jsx)(Gl,{id:"creator",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters.creator,extended:!0}),(0,t.jsx)(ld,{id:"scope",classes:"js-co-filters__filter co-filters__scope co-filters--separator",value:a.filters.scope,extended:!1})]})),Fw=(0,_.I)(a=>(0,t.jsx)("div",{className:"co-filters__filters",children:(0,t.jsx)(Zo.m,{id:"query",classes:"js-co-filters__filter",value:a.filters.query,placeholder:window.translate("Legacy_filters_brands_query_placeholder")})})),Uw=(0,_.I)(a=>(0,t.jsx)("div",{className:"co-filters__filters",children:(0,t.jsx)(Zo.m,{id:"query",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters.q,placeholder:window.translate("Legacy_filters_brandupdates_query_placeholder"),extended:!1})})),Vw=(0,_.I)(()=>(0,t.jsx)("div",{className:"co-filters__filters",children:(0,t.jsx)(Zo.m,{id:"query",classes:"js-co-filters__filter",placeholder:"Search for Emojis"})})),_u=(0,_.I)(()=>(0,t.jsxs)("div",{className:"cm-tabs__content co-filters__funnel-dropdown-creator-content js-co-filters__funnel-dropdown-creator-content",id:"tab-creators",children:[(0,t.jsx)(ie.A,{id:"c-filters__funnel-creator-input",label:window.translate("Legacy_filters_funnel_apply_creator"),placeholder:window.translate("Legacy_filters_funnel_search_creator")}),(0,t.jsx)("div",{className:"co-filters__funnel-dropdown-all-creators js-co-filters__funnel-dropdown-all-creators"})]})),mp=(0,_.I)(()=>(0,t.jsx)("div",{className:"cm-tabs__content co-filters__funnel-dropdown-download-request-content",id:"tab-download-request",children:(0,t.jsx)("div",{className:"co-filters__funnel-dropdown-all-download-requests js-co-filters__funnel-dropdown-all-download-requests"})})),_p=(0,_.I)(()=>(0,t.jsx)("div",{className:"cm-tabs__content co-filters__funnel-dropdown-language-content js-co-filters__funnel-dropdown-languages-content",id:"tab-languages"})),gu=(0,_.I)(()=>(0,t.jsxs)("div",{className:"cm-tabs__content",id:"tab-dropdown-metadata",children:[(0,t.jsx)("div",{className:"co-filters__missing-metadata-switch js-co-filters__missing-metadata-switch"}),(0,t.jsx)("div",{className:"co-filters__funnel-dropdown-all-metadata js-co-filters__funnel-dropdown-all-metadata"}),(0,t.jsx)("div",{className:"co-filters__funnel-dropdown-all-metadata js-co-filters__funnel-dropdown-all-licenses"})]})),gp=(0,_.I)(()=>(0,t.jsx)("div",{className:"cm-tabs__content co-filters__funnel-dropdown-status-content",id:"tab-statuses",children:(0,t.jsx)("div",{className:"co-filters__funnel-dropdown-all-statuses js-co-filters__funnel-dropdown-all-statuses"})})),fp=(0,_.I)(()=>(0,t.jsxs)("div",{className:"cm-tabs__content co-filters__funnel-dropdown-tags-content js-co-filters__funnel-dropdown-tags-content",id:"tab-tags",children:[(0,t.jsx)(ie.A,{id:"c-filters__funnel-tag-input",label:window.translate("Legacy_filters_funnel_apply_tags"),placeholder:window.translate("Legacy_filters_funnel_search_tag")}),(0,t.jsx)("div",{className:"co-filters__funnel-dropdown-all-tags js-co-filters__funnel-dropdown-all-tags"})]})),vp=(0,_.I)(a=>{const e=[];let n=!1;return a.showTags&&(n===!1&&(n="tags"),e.push({id:"tags",active:n==="tags",title:window.translate("Legacy_filters_funnel_tab_tags"),content:(0,s.EY)(fp)})),a.showMetadata&&(n===!1&&(n="metadata"),e.push({id:"metadata",active:n==="metadata",icon:a.showMissingMetadataIcon?(0,s.EY)(g.V,{icon:"callout",size:Gt.l.SIZE_SMALL,classes:"tw--mt-[2px] tw-mr-[6px] tw-text-text-warning"}):void 0,title:window.translate("Legacy_filters_funnel_tab_metadata"),content:(0,s.EY)(gu)})),a.showStatus&&(n===!1&&(n="statuses"),e.push({id:"statuses",active:n==="statuses",title:window.translate("Legacy_filters_funnel_tab_status"),content:(0,s.EY)(gp)})),a.showLanguages&&(n===!1&&(n="languages"),e.push({id:"languages",active:n==="languages",title:window.translate("Legacy_filters_funnel_tab_languages"),content:(0,s.EY)(_p)})),a.showDownloadRequest&&a.utils.account.hasFeature("DOWNLOAD_REQUEST")&&(n===!1&&(n=fo.DOWNLOAD_REQUEST_FILTER_ID),e.push({id:fo.DOWNLOAD_REQUEST_FILTER_ID,active:n===fo.DOWNLOAD_REQUEST_FILTER_ID,title:window.translate("FiltersFunnelDropdown_Protection"),content:(0,s.EY)(mp)})),a.showCreator&&(n===!1&&(n="creator"),e.push({id:"creator",active:n==="creator",title:window.translate("Legacy_filters_funnel_tab_creator"),content:(0,s.EY)(_u)})),(0,t.jsx)("div",{className:"cm-btn-dropdown__items co-filters__funnel-dropdown-content",children:(0,t.jsx)(Sr.y,{items:e,transparent:!0,shadow:!0,border:{bottom:!0}})})});var Nl=r(23245);const wp=(0,_.I)(a=>{var e;return(0,t.jsx)("ul",{children:(e=a.creators)==null?void 0:e.map(n=>(0,t.jsxs)("li",{className:`co-filters__funnel-dropdown-creator js-co-filters__funnel-dropdown-creator ${n.active?"state-active":""}`,"data-value":n.id,children:[(0,t.jsx)("div",{className:"co-filters__funnel-dropdown-creator-avatar",children:(0,t.jsx)(Nl.p,{imageUrl:n.image,gravatarHash:n.gravatar_hash,name:n.name,size:Pe.Z.SIZE_32})}),(0,t.jsxs)("div",{className:"co-filters__funnel-dropdown-creator-text",children:[(0,t.jsx)("div",{className:"co-filters__funnel-dropdown-creator-name",children:n.name}),(0,t.jsx)("div",{className:"co-filters__funnel-dropdown-creator-email",children:n.email})]})]},n.id))})}),bp=(0,_.I)(a=>(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{className:`co-filters__funnel-dropdown-download-request-list-item js-co-filters__funnel-dropdown-download-request-list-item ${a.downloadRequest===!0?"active":""}`,"data-download-request-required":"true",children:[(0,t.jsx)(g.V,{icon:Gt.l.ICON_LOCK}),window.translate("Filter_downloadRequestRequired")]}),(0,t.jsxs)("li",{className:`co-filters__funnel-dropdown-download-request-list-item js-co-filters__funnel-dropdown-download-request-list-item ${a.downloadRequest===!1?"active":""}`,"data-download-request-required":"false",children:[(0,t.jsx)(g.V,{icon:Gt.l.ICON_OPEN_LOCK}),window.translate("Filter_downloadRequestNotRequired")]})]}));var yp=r(38020);const xp=(0,_.I)(a=>a.languages.length>0?(0,t.jsx)(yp.k,{id:"c-filters__funnel-languages-checkboxes",name:"languages",options:a.languages}):(0,t.jsx)("div",{className:"co-settings__blank",children:window.translate("Legacy_filters_funnel_languages_empty_placeholder")})),jp=(0,_.I)(a=>{var e,n,d;return(0,t.jsxs)(t.Fragment,{children:[(e=a.metadata)==null?void 0:e.map(x=>{var D;return x.type==="SELECT"?(0,t.jsx)(qi.U,{id:a.id_prefix+x.id,classes:"js-co-filters__funnel-dropdown-metadate cm-setting__elem--noindent",expand:!0,non_selection:!0,label:x.label,value:x.selected_value,options:(D=x.values)==null?void 0:D.map(z=>({name:z.value,value:z.value}))},a.id_prefix+x.id):null}),((n=a.metadata)==null?void 0:n.length)===0&&((d=a.licenses)==null?void 0:d.length)===0?(0,t.jsx)("div",{className:"co-filters__funnel-dropdown-all-metadata-empty-message",children:window.translate("Legacy_filters_funnel_metadata_not_defined")}):null]})}),Ep=(0,_.I)(a=>{const e=[];return a.utils.account.hasFeature("PROJECT_METADATA")&&e.push({id:"metadata",active:a.tab==="metadata",title:window.translate("Legacy_filters_funnel_tab_metadata"),content:(0,s.EY)(gu,a)}),e.push({id:"creator",active:a.tab==="creator",title:window.translate("Legacy_filters_funnel_tab_creator"),content:(0,s.EY)(_u)}),(0,t.jsx)("div",{className:"cm-btn-dropdown__items co-filters__funnel-dropdown-content",children:(0,t.jsx)(Sr.y,{items:e,transparent:!0,shadow:!0,border:{bottom:!0}})})}),Ip=(0,_.I)(a=>{var e;return(e=a.statuses)==null?void 0:e.map(n=>(0,t.jsxs)("button",{type:"button",className:`co-filters__funnel-dropdown-status js-co-filters__funnel-dropdown-status cm-btn cm-btn--sm ${n.active?"state-active":""}`,"data-status-id":n.id,children:[(0,t.jsx)("span",{className:"cm-filter-status__status-bubble",style:{backgroundColor:`${n.color}`}}),n.name]},n.id))}),Cp=(0,_.I)(a=>{var e,n;const d=a.autoTags&&a.autoTags.length>0;return(0,t.jsxs)(t.Fragment,{children:[a.autoTaggingEnabled&&d&&a.tags&&a.tags.length>0?(0,t.jsx)("div",{className:"co-filters__funnel-dropdown-label",children:window.translate("Legacy_filters_funnel_results_label_tags")}):null,(e=a.tags)==null?void 0:e.map((x,D)=>(0,t.jsx)("span",{className:`ca-badge ca-badge__tag-item ${x.active?"ca-badge__tag-item--used":"ca-badge__tag-item--unused"} co-filters__funnel-dropdown-tag js-co-filters__funnel-dropdown-tag`,"data-tag":x.tag,children:x.tag},D)),a.autoTaggingEnabled&&d?(0,t.jsxs)("div",{className:"co-filters__funnel-dropdown-tag-container",children:[(0,t.jsx)("div",{className:"co-filters__funnel-dropdown-label",children:window.translate("Legacy_filters_funnel_results_label_autotags")}),(n=a.autoTags)==null?void 0:n.map((x,D)=>(0,t.jsx)("span",{className:`ca-badge ca-badge__tag-item ca-badge__tag-item--autotag ${x.active?"ca-badge__tag-item--used":"ca-badge__tag-item--unused"} co-filters__funnel-dropdown-tag js-co-filters__funnel-dropdown-tag`,"data-tag":x.tag,children:x.tag},D))]}):null]})}),Op=(0,_.I)(()=>(0,t.jsxs)("div",{className:" cm-btn-dropdown cm-actions__action-wrap js-co-filters__funnel co-filters__funnel ",children:[(0,t.jsx)("div",{className:"co-filters__funnel-filters"}),(0,t.jsxs)("button",{className:(0,Oe.h)([Ks.OA,"cm-btn co-filters__funnel-dropdown-button js-co-filters__funnel-dropdown-button--campaigns-overview js-cm-btn-dropdown__toggle"]),"data-event":"funnelFilter",type:"button","aria-label":window.translate("Legacy_filters_funnel_projects_label"),children:[(0,t.jsx)(g.V,{icon:"filter",size:Gt.l.SIZE_SMALL}),(0,t.jsx)(g.V,{icon:"caret-down",size:Gt.l.SIZE_EXTRA_SMALL,classes:"co-filters__funnel-caret"})]}),(0,t.jsx)("div",{className:"js-co-filters__fuller-menu cm-btn-dropdown__menu js-cm-btn-dropdown__menu cm-btn-dropdown__menu--below",children:(0,t.jsx)("div",{className:"cm-btn-dropdown__items",children:(0,t.jsx)(m.T,{})})})]})),Ww=(0,_.I)(a=>(0,t.jsx)("div",{className:"co-filters__filters",children:(0,t.jsx)(Zo.m,{id:"query",classes:"js-co-filters__filter",value:a.filters.query,placeholder:window.translate("Legacy_filters_guidelines_query_placeholder")})})),zw=(0,_.I)(a=>(0,t.jsxs)("div",{className:"co-filters__filters co-filters--extended",children:[(0,t.jsx)(Zo.m,{id:"q",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters.q,placeholder:window.translate("Legacy_filters_icons_query_placeholder"),extended:!0}),(0,t.jsx)(Kc,{}),(0,t.jsx)(dd,{id:"tag",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters["tag[]"],extended:!0}),(0,t.jsx)(Ad,{id:fo.MISSING_METADATA_FILTER_ID,classes:"js-co-filters__filter",value:a.filters[fo.MISSING_METADATA_FILTER_ID],extended:!0}),(0,t.jsx)(dc,{id:"metadata",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters.metadata,extended:!0}),a.utils.account.hasFeature("WORKSPACE_WORKFLOW")?(0,t.jsx)(cd,{id:"status",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters.status,extended:!0}):null,(0,t.jsx)(ir,{id:fo.DOWNLOAD_REQUEST_FILTER_ID,classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters[fo.DOWNLOAD_REQUEST_FILTER_ID],extended:!0}),(0,t.jsx)(cc,{id:fo.LICENSE_FILTER_ID,classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters[fo.LICENSE_FILTER_ID],extended:!0}),(0,t.jsx)(Gl,{id:"creator",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters.creator,extended:!0}),(0,t.jsx)(ld,{id:"scope",classes:"js-co-filters__filter co-filters__scope co-filters--separator",value:a.filters.scope,extended:!1})]})),Gw=(0,_.I)(a=>(0,t.jsx)("div",{className:"co-filters__filters",children:(0,t.jsx)(Zo.m,{id:"query",classes:"js-co-filters__filter",value:a.filters.query,placeholder:window.translate("Legacy_filters_libraries_query_placeholder")})}));var lo=r(71460);const Ap=(0,_.I)(a=>(0,t.jsxs)("div",{className:"co-missing-metadata-container",children:[(0,t.jsx)(lo.I,{id:"missing_metadata_switch",label:window.translate("MissingMetadata_toggleLabel"),classes:"cm-setting--borderless co-missing-metadata-switch",checked:a.isChecked}),(0,t.jsx)("p",{children:window.translate("MissingMetadata_toggleDescription",{assets:a.numberOfAssets})})]})),Kw=(0,_.I)(a=>{var e,n;return(0,t.jsx)("div",{className:`cm-filter cm-filter-dropdown ${a.classes||""}`,"data-id":a.id,"data-type":"dropdown",children:(0,t.jsxs)("div",{className:"cm-btn-dropdown cm-filter-dropdown__chooser",children:[(0,t.jsxs)("a",{href:"javascript:;",className:"cm-filter-dropdown__choose js-cm-btn-dropdown__toggle",children:[a.label?a.label:null,(0,t.jsxs)("span",{className:"cm-filter-dropdown__value",children:[(0,t.jsx)("span",{className:"js-cm-filter-dropdown__current","data-value":a.value,children:(e=a.options)==null?void 0:e.map(d=>d.value==a.value?d.name:null)}),(0,t.jsx)("i",{className:"ca-icon--caret-down ca-icon--sm"})]})]}),(0,t.jsx)("ul",{className:"cm-btn-dropdown__menu js-cm-btn-dropdown__menu cm-btn-dropdown__menu--below",children:(n=a.options)==null?void 0:n.map((d,x)=>(0,t.jsx)("li",{className:"cm-btn-dropdown__item",children:(0,t.jsx)("a",{className:`cm-btn-dropdown__link js-cm-filter-dropdown__link${d.value==a.value?" state-active":""}`,"data-value":d.value,href:"javascript:;",children:d.name})},x))})]})})}),Hw=(0,_.I)(a=>(0,t.jsxs)("div",{className:"co-filters__filters",children:[(0,t.jsx)(Zo.m,{id:"query",classes:"js-co-filters__filter",value:a.filters.query,placeholder:window.translate("Legacy_filters_patterns_query_placeholder")}),(0,t.jsx)(Kw,{id:"granularity",classes:"js-co-filters__filter",label:window.translate("Legacy_filters_patterns_granularity"),value:a.filters.granularity||"",options:[{value:"",name:window.translate("Legacy_filters_patterns_granularity_option_all")},{value:"atom",name:"Atoms"},{value:"molecule",name:"Molecules"},{value:"organism",name:"Organisms"}]})]})),Tp=(0,_.I)(a=>(0,t.jsx)("div",{className:`cm-filter cm-filter-scope ${a.extended?"cm-filter-query--extended":""} ${a.classes||""}`,"data-id":a.id,"data-value":a.value,"data-type":"scope"})),Yw=(0,_.I)(a=>(0,t.jsxs)("div",{className:"co-filters__filters co-filters--extended",children:[(0,t.jsx)(Zo.m,{id:"query",classes:"js-co-filters__filter",value:a.filters.query,placeholder:window.translate("Legacy_filters_projects_query_placeholder"),extended:a.utils.account.hasFeature("PROJECT_METADATA")}),a.utils.account.hasFeature("PROJECT_METADATA")?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Op,{}),(0,t.jsx)(dc,{id:"metadata",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters.metadata,extended:!0}),(0,t.jsx)(Gl,{id:"creator",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters.creator,extended:!1}),(0,t.jsx)(Tp,{id:"scope",classes:"js-co-filters__filter co-filters__scope co-filters--separator",value:a.filters.scope,extended:!1})]}):null,(0,t.jsx)("div",{className:"react-scope-dropdown-container cm-filter-scope__archived-filter"})]})),Zw=(0,_.I)(a=>(0,t.jsxs)("div",{className:"co-filters__filters co-filters--extended",children:[(0,t.jsx)(Zo.m,{id:"query",classes:"js-co-filters__filter",value:a.filters.query,placeholder:window.translate("Legacy_filters_projects_templates_query_placeholder"),extended:a.utils.account.hasFeature("PROJECT_METADATA")}),a.utils.account.hasFeature("PROJECT_METADATA")?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Kc,{}),(0,t.jsx)(dc,{id:"metadata",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters.metadata,extended:!0}),(0,t.jsx)(Gl,{id:"creator",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters.creator,extended:!1}),(0,t.jsx)(Tp,{id:"scope",classes:"js-co-filters__filter co-filters__scope co-filters--separator",value:a.filters.scope,extended:!1})]}):null]})),Jw=(0,_.I)(a=>(0,t.jsxs)("div",{className:"co-filters__filters co-filters--extended",children:[(0,t.jsx)(Zo.m,{id:"q",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters.q,placeholder:window.translate("Legacy_filters_assets_query_placeholder"),extended:!0}),(0,t.jsx)(Kc,{}),(0,t.jsx)(Vl,{id:"languages",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters.languages,extended:!0}),(0,t.jsx)(dd,{id:"tag",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters["tag[]"],extended:!0}),(0,t.jsx)(cd,{id:"status",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters.status,extended:!0}),(0,t.jsx)(Gl,{id:"creator",classes:"js-co-filters__filter co-filters--on-top-of-scope",value:a.filters.creator,extended:!0}),(0,t.jsx)(ld,{id:"scope",classes:"js-co-filters__filter co-filters__scope co-filters--separator",value:a.filters.scope,extended:!1})]}));var Ll=r(5181);const Ec=class Co extends b.j{constructor(){super(...arguments),this.activeArchiveFilterId="onlyActive"}on(e){this.type=this.$ctx.dataAsString("type"),this.sandbox.subscribe("search",this),this.sandbox.subscribe("events",this),this.sandbox.subscribe("router",this),this.sandbox.subscribe("reload",this),this.filters=[],this.tags=null,this.autoTags=null,this.statuses=null,this.creators=[],this.metadata=null,this.missingRequiredMetadataAssetIds=[],this.eventType="filterChanged",this.$ctx.on("submit",n=>{this.changed(),n.preventDefault()}).on("reset",n=>n.preventDefault()),this.loadAndRenderFunnelDropdownContent(),this.loadAndRenderFunnelDropdownContentProjectTimeline(),this.bindDropdownTagButtons(),this.bindTagRemoveButtons(),this.bindMetadataRemoveButtons(),this.bindLanguageRemoveButtons(),this.bindDropdownStatusButtons(),this.bindDropdownDownloadRequestList(),this.bindStatusRemoveButtons(),this.bindRemoveDownloadRequestFilter(),this.bindDropdownCreatorButtons(),this.bindCreatorRemoveButtons(),this.bindLicenseRemoveButton(),this.bindMissingMetadataRemoveButton(),this.renderAppliedTags(),this.renderAppliedMetadata(),this.renderAppliedStatus(),this.renderAppliedCreator(),e()}renderArchiveFilter(){var e;this.$reactContainer=this.$ctx.find(".react-scope-dropdown-container").get(0),this.$reactContainer&&!((0,wn.e)()==="brands"&&((e=(0,Il.$)())==null?void 0:e.type)==="planning")&&this.renderReactDropdown()}renderReactDropdown(){(0,s.Cc)(ti,this.$reactContainer,{options:[{id:"all",title:window.translate("Project_archiveFilterShowAll")},{id:"onlyActive",title:window.translate("Project_archiveFilterShowActive")},{id:"onlyArchived",title:window.translate("Project_archiveFilterShowArchived")}],onChange:e=>{this.fire("archivedFilterChanged",{value:e},["search"]),this.activeArchiveFilterId=e,this.renderReactDropdown()},activeOptionId:this.activeArchiveFilterId,mobileViewIcon:"archive"})}loadAndRenderFunnelDropdownContent(){this.$ctx.on("click",".js-co-filters__funnel-dropdown-button",e=>{e.preventDefault(),this.renderDropdownLoader();const n=[];this.isMetadataFilterEnabled()&&(n.push(this.loadDropdownMetadata()),n.push(this.loadLicenses()),(this.type===Co.FILTER_TYPE_ASSETS||this.type===Co.FILTER_TYPE_ICONS)&&n.push(this.loadMissingRequiredMetadataAssets())),this.isStatusFilterEnabled()&&n.push(this.loadDropdownStatus(!0)),this.isLanguageFilterEnabled()&&n.push(this.loadTextLibraryLanguages()),n.push(this.loadDropdownCreators()),Promise.all(n).then(()=>this.renderDropdown()).then(()=>this.renderDropdownMetadataList()).then(()=>this.renderDropdownStatusList()).then(()=>this.renderDropdownDownloadRequestList()).then(()=>this.renderDropdownCreatorList()).then(()=>this.renderDropdownLanguageList()).then(()=>this.renderDropdownLicenseList()).then(()=>this.renderMissingMetadataSwitch())})}loadAndRenderFunnelDropdownContentProjectTimeline(){this.$ctx.on("click",".js-co-filters__funnel-dropdown-button--campaigns-overview",e=>{e.preventDefault(),this.renderDropdownLoader();const n=[];this.account.hasFeature(Ts.h.PROJECT_METADATA)&&n.push(this.loadDropdownBrandMetadata()),n.push(this.loadDropdownCreators()),Promise.all(n).then(()=>this.renderDropdownProjectTimeline()).then(()=>this.account.hasFeature(Ts.h.PROJECT_METADATA)?this.renderDropdownMetadataList():Promise.resolve()).then(()=>this.renderDropdownCreatorList())})}isLanguageFilterEnabled(){var e;return this.account.hasProduct(Mi.S.TEXT_LIBRARY)&&((e=this.project)==null?void 0:e.project_type)===As.g.TextLibrary}isTagFilterEnabled(){var e;return((e=this.project)==null?void 0:e.project_type)!==As.g.BrandUpdateLibrary}isMetadataFilterEnabled(){var e,n;return[As.g.BrandUpdateLibrary,As.g.TemplateLibrary,As.g.TextLibrary].includes((e=this.project)==null?void 0:e.project_type)?!1:((n=this.project)==null?void 0:n.project_type)!==As.g.Workspace}isStatusFilterEnabled(){var e;return((e=this.project)==null?void 0:e.project_type)===As.g.BrandUpdateLibrary?!1:this.account.hasFeature(Ts.h.WORKSPACE_WORKFLOW)}isDownloadRequestFilterEnabled(){var e;if([As.g.MediaLibrary,As.g.LogoLibrary,As.g.IconLibrary,As.g.DocumentLibrary].includes((e=this.project)==null?void 0:e.project_type)&&this.account.hasFeature(Ts.h.DOWNLOAD_REQUEST))return!0}loadTextLibraryLanguages(){return this.data.get(`/api/project/languages/${this.project.id}`).then(e=>{this.languages=[],this.setupLanguagesArray(e.languages)})}setupLanguagesArray(e){this.languages=e.filter(n=>n.default===!1),this.languages.map(n=>{if(n.value=n.language,n.default!==!0)return n})}loadDropdownTags(e){return this.data.get(`/api/tag?search_term=${e}&project_id=${this.project.id}&include_auto_tags=true`).then(n=>{this.tags=[],this.autoTags=[],this.setupTagArray(n.tags,this.tags),this.setupTagArray(n.autoTags,this.autoTags)})}setupTagArray(e,n){const d=this.getFilter("tag").value;for(const x in e)Object.prototype.hasOwnProperty.call(e,x)&&typeof e[x]=="object"&&(e[x].active=d.includes(e[x].tag),n.push(e[x]))}loadDropdownStatus(e){return this.statuses&&!e?Promise.resolve():this.data.get(`/api/project/status/${this.project.id}`).then(n=>{n.success&&(this.statuses=n.status)}).then(()=>{const n=this.getFilter("status").getValue();for(const d of this.statuses)d.active=d.id.toString()===n})}async loadMissingRequiredMetadataAssets(){const e=await(0,_l.cO)(this.project.id,!0,null,{isMissingRequiredMetadata:!0,metadata:[]},Aa.o8);this.missingRequiredMetadataAssetIds=e.object_ids}async loadLicenses(){if(this.licenses)return Promise.resolve();if(this.shouldRetrieveDataFromNewEndpoints())try{this.licenses=await(0,_l.S)(this.project.id)}catch(e){console.error(e)}}loadDropdownMetadata(){return this.metadata?Promise.resolve():this.data.get(`/api/metadata/fields/${this.project.id}`).then(e=>{e.success&&(this.metadata=e.data)})}loadDropdownBrandMetadata(e){return this.metadata&&!e?Promise.resolve():this.data.get(`/api/brandmetadata/fields/${this.brand.id}`).then(n=>{n.success&&(this.metadata=n.data)}).then(()=>{const n=this.getFilter("metadata").value;for(const d of this.metadata)d.active=d.id.toString()===n})}loadDropdownCreators(e=""){const n=(0,wn.e)()==="brands"?`/api/brand/creators/${this.brand.id}?type=WORKSPACE&limit=5&query=`:`/api/project/creators/${this.project.id}?query=`;return this.data.get(n+e).then(d=>{this.creators=d.creators||d.data}).then(()=>{const d=this.getFilter("creator").getValue();for(const x of this.creators)x.active=x.id===d})}renderDropdownLoader(){this.tpl.addAndActivate(this.$ctx.find(".js-co-filters__fuller-menu"),(0,s.EY)(m.T))}renderDropdown(){var e;this.tpl.addAndActivate(this.$ctx.find(".js-co-filters__fuller-menu"),(0,s.EY)(vp,{projectType:this.project.project_type,statuses:this.statuses,showTags:this.isTagFilterEnabled(),showMetadata:this.isMetadataFilterEnabled(),showStatus:this.isStatusFilterEnabled(),showDownloadRequest:this.isDownloadRequestFilterEnabled(),showLanguages:this.isLanguageFilterEnabled(),showCreator:!0,showMissingMetadataIcon:this.missingRequiredMetadataAssetIds.length>0&&this.type===Co.FILTER_TYPE_ASSETS&&[As.g.MediaLibrary,As.g.LogoLibrary,As.g.IconLibrary,As.g.DocumentLibrary].includes((e=this.project)==null?void 0:e.project_type)})),this.bindFunnelDropdownCreatorsFilter(),this.bindFunnelDropdownTagsFilter(),this.focusTagFilterInput()}renderDropdownProjectTimeline(){this.tpl.addAndActivate(this.$ctx.find(".js-co-filters__fuller-menu"),(0,s.EY)(Ep,{tab:this.account.hasFeature(Ts.h.PROJECT_METADATA)?"metadata":"creator"})),this.bindFunnelDropdownCreatorsFilter()}bindFunnelDropdownLanguagesFilter(){this.dropdownLanguagesSetting=new re.D(this.$ctx.find(".js-co-filters__funnel-dropdown-languages-content"),this.sandbox).getElem("c-filters__funnel-languages-checkboxes"),this.dropdownLanguagesSetting.changed=e=>{this.getFilter("languages").setValue(e["c-filters__funnel-languages-checkboxes"]),this.renderAppliedLanguages(),this.changed()}}bindFunnelDropdownTagsFilter(){this.isTagFilterEnabled()&&(this.dropdownTagsSetting=new re.D(this.$ctx.find(".js-co-filters__funnel-dropdown-tags-content"),this.sandbox).getElem("c-filters__funnel-tag-input"),this.dropdownTagsSetting.changed=()=>{clearTimeout(this.timeout),this.timeout=setTimeout(()=>{(async()=>{const n=this.dropdownTagsSetting.getValue();n===""?this.tags=this.autoTags=[]:await this.loadDropdownTags(n),this.renderDropdownTagList()})()},300)},this.dropdownTagsSetting.$text.on("keyup",e=>{if(e.keyCode!==Co.CARRIAGE_RETURN_CODE||Ll(e.currentTarget).val()==="")return;const n=this.$ctx.find(".js-co-filters__funnel-dropdown-tag.ca-badge__tag-item--unused").first().data("tag");n&&(this.tags.find(d=>d.tag===n).active=!0,this.dropdownTagsSetting.setValue(""),this.getFilter("tag").value.push(n),this.renderAppliedTags(),this.renderDropdownTagList(),this.changed())}))}bindFunnelDropdownCreatorsFilter(){this.dropdownCreatorSetting=new re.D(this.$ctx.find(".js-co-filters__funnel-dropdown-creator-content"),this.sandbox).getElem("c-filters__funnel-creator-input"),this.dropdownCreatorSetting.changed=()=>{this.loadDropdownCreators(this.dropdownCreatorSetting.getValue()).then(()=>this.renderDropdownCreatorList())},this.dropdownCreatorSetting.$text.on("keyup",e=>{if(e.keyCode!==Co.CARRIAGE_RETURN_CODE||Ll(e.currentTarget).val()==="")return;const n=this.$ctx.find(".js-co-filters__funnel-dropdown-creator:not(.state-active)").first().data("value");n&&(this.dropdownCreatorSetting.setValue(""),this.getFilter("creator").setValue(n),this.renderAppliedCreator(),this.changed())})}renderDropdownStatusList(){this.isStatusFilterEnabled()&&this.tpl.addAndActivate(this.$ctx.find(".js-co-filters__funnel-dropdown-all-statuses"),(0,s.EY)(Ip,{statuses:this.statuses}))}renderDropdownDownloadRequestList(){this.isDownloadRequestFilterEnabled()&&this.tpl.addAndActivate(this.$ctx.find(".js-co-filters__funnel-dropdown-all-download-requests"),(0,s.EY)(bp,{downloadRequest:this.getFilter(Co.DOWNLOAD_REQUEST_FILTER_ID).getValue()}))}renderDropdownTagList(){var e;if(!this.isTagFilterEnabled())return;const n=this.getFilter("tag").value||[];for(const D of this.tags)n.includes(D.name)&&(D.active=!0);const d=this.tags.slice(),x=this.autoTags.slice();d.sort(this.sortTagsByActivity),x.sort(this.sortTagsByActivity),this.tpl.addAndActivate(this.$ctx.find(".js-co-filters__funnel-dropdown-all-tags"),(0,s.EY)(Cp,{tags:d,autoTags:x,autoTaggingEnabled:(e=this.project)==null?void 0:e.auto_tagging_enabled}))}sortTagsByActivity(e,n){return n.active&&!e.active?1:e.active&&!n.active?-1:0}renderMissingMetadataSwitch(){var e;if(((e=this.metadata)==null?void 0:e.length)>0&&(this.type===Co.FILTER_TYPE_ASSETS||this.type===Co.FILTER_TYPE_ICONS)){const n=this.getFilter(Co.MISSING_METADATA_FILTER_ID).value,d=this.$ctx.find(".js-co-filters__missing-metadata-switch"),x=Ll((0,s.EY)(Ap,{numberOfAssets:this.missingRequiredMetadataAssetIds.length,isChecked:!!n}));d.html(x);const z=new re.D(x,this.sandbox).getSettings(["missing_metadata_switch"])[0];z.saved=()=>{this.getFilter(Co.MISSING_METADATA_FILTER_ID).setValue(z.isChecked()),this.renderAppliedMissingMetadataFilter(z.isChecked()),this.changed()}}}renderDropdownLicenseList(){var e,n;if(((e=this.licenses)==null?void 0:e.length)===0||!this.shouldRetrieveDataFromNewEndpoints())return;const d="license-select-dropdown",x=this.$ctx.find(".js-co-filters__funnel-dropdown-all-licenses"),D=(0,s.EY)(qi.U,{id:d,classes:"js-co-filters__funnel-dropdown-metadate cm-setting__elem--noindent",expand:!0,non_selection:!0,label:window.translate("AssetConsensusComponent_licencses_title"),value:"",options:(n=this.licenses)==null?void 0:n.map(_e=>({name:_e.title,value:_e.id}))});x.html(D);const ne=new re.D(x,this.sandbox).getElem(d);ne.changed=_e=>{this.getFilter(Co.LICENSE_FILTER_ID).setValue(_e["license-select-dropdown"]),this.renderAppliedLicense(),this.changed(),(0,F.s)("license filter")}}renderDropdownMetadataList(){if(!this.isMetadataFilterEnabled())return;const e="metadata_filter_id_",n=this.getFilter("metadata").getValue();this.metadata.map(ne=>{const _e=n.find(Ce=>parseInt(this.getFirstKey(Ce))===ne.id);return ne.selected_value=_e?this.getFirstValue(_e):"",ne});const d=this.$ctx.find(".js-co-filters__funnel-dropdown-all-metadata"),x=(0,s.EY)(jp,{metadata:this.metadata,id_prefix:e,licenses:this.licenses});d.html(x);const z=new re.D(d,this.sandbox).getElems();for(const ne of z){const _e=parseInt(ne.id.replace(e,"")),Ce=this.metadata.find(De=>De.id===_e);ne.changed=De=>{const Xe={},st=Ce.id;if(Xe[st]=De[ne.id],n.find(Lt=>this.getFirstKey(Lt)===this.getFirstKey(Xe)&&this.getFirstValue(Lt)===this.getFirstValue(Xe)))return;const Nt=n.findIndex(Lt=>this.getFirstKey(Lt)===Ce.id.toString());Nt>=0?n[Nt]=Xe:n.push(Xe),this.renderAppliedMetadata(),this.changed()}}}renderDropdownCreatorList(){this.tpl.addAndActivate(this.$ctx.find(".js-co-filters__funnel-dropdown-all-creators"),(0,s.EY)(wp,{creators:this.creators}))}renderDropdownLanguageList(){if(!this.isLanguageFilterEnabled())return;const e=this.getFilter("languages").getValue(),n=this.languages.map(d=>(d.checked=e.includes(d.language),d));this.tpl.addAndActivate(this.$ctx.find(".js-co-filters__funnel-dropdown-languages-content"),(0,s.EY)(xp,{languages:n})),this.bindFunnelDropdownLanguagesFilter()}bindDropdownTagButtons(){this.isTagFilterEnabled()&&this.$ctx.on("click",".js-co-filters__funnel-dropdown-tag",e=>{e.stopPropagation();const n=Ll(e.currentTarget),d=String(n.data("tag")),x=!n.hasClass("ca-badge__tag-item--used"),D=z=>{z.tag===d&&(z.active=x)};for(const z of this.tags)D(z);for(const z of this.autoTags)D(z);x?this.getFilter("tag").value.push(d):this.data.removeFromArray(this.getFilter("tag").value,d),this.renderAppliedTags(),this.renderDropdownTagList(),this.changed()})}bindDropdownStatusButtons(){this.isStatusFilterEnabled()&&this.$ctx.on("click",".js-co-filters__funnel-dropdown-status",e=>{e.stopPropagation();const n=Ll(e.currentTarget),d=n.data("statusId").toString(),x=!n.hasClass("state-active");for(const D of this.statuses)D.active=D.id.toString()===d&&x;this.getFilter("status").setValue(d&&x?d:null),this.renderAppliedStatus(),this.renderDropdownStatusList(),this.changed()})}bindDropdownDownloadRequestList(){this.$ctx.on("click",".js-co-filters__funnel-dropdown-download-request-list-item",e=>{if(!this.isDownloadRequestFilterEnabled())return;const n=Ll(e.currentTarget),d=!n.hasClass("active");this.$ctx.find(".js-co-filters__funnel-dropdown-download-request-list-item").removeClass("active"),n.toggleClass("active",d);const x=d?n.dataAsBoolean("downloadRequestRequired"):null;this.getFilter(Co.DOWNLOAD_REQUEST_FILTER_ID).setValue(x),this.renderAppliedDownloadRequest(),this.changed()})}bindDropdownCreatorButtons(){this.$ctx.on("click",".js-co-filters__funnel-dropdown-creator",e=>{e.stopPropagation();const n=Ll(e.currentTarget),d=n.data("value"),x=!n.hasClass("state-active");for(const D of this.creators)D.active=D.id===d&&x;this.getFilter("creator").setValue(d&&x?d:null),this.renderAppliedCreator(),this.renderDropdownCreatorList(),this.changed()})}bindTagRemoveButtons(){this.isTagFilterEnabled()&&this.$ctx.on("click",".js-cm-filter-tag__remove",e=>{e.preventDefault(),e.stopPropagation();const n=Ll(e.currentTarget),d=this.getFilter("tag").value;if(this.data.removeFromArray(d,String(n.data("tag"))),this.tags)for(const x of this.tags)x.tag===d&&(x.active=!1);this.renderAppliedTags(),this.changed()})}bindMetadataRemoveButtons(){this.isMetadataFilterEnabled()&&this.$ctx.on("click",".js-cm-filter-metadata__remove",e=>{e.preventDefault(),e.stopPropagation();const d=Ll(e.currentTarget).data("metadata");this.getFilter("metadata").value=this.getFilter("metadata").value.filter(x=>!(this.getFirstKey(x)===this.getFirstKey(d)&&this.getFirstValue(x)===this.getFirstValue(d))),this.renderAppliedMetadata(),this.changed()})}bindLanguageRemoveButtons(){this.isLanguageFilterEnabled()&&this.$ctx.on("click",".js-cm-filter-language__remove",e=>{e.preventDefault(),e.stopPropagation();const n=Ll(e.currentTarget),d=this.getFilter("languages").getValue();if(this.data.removeFromArray(d,n.data("language")),this.languages)for(const x of this.languages)x.language===d&&(x.active=!1);this.renderAppliedLanguages(),this.changed()})}bindMissingMetadataRemoveButton(){this.$ctx.on("click",".js-cm-filter-missing-metadata__remove",e=>{e.preventDefault(),e.stopPropagation(),this.getFilter("missing_metadata").value=null,this.renderAppliedMissingMetadataFilter(!1),this.changed()})}bindLicenseRemoveButton(){this.isMetadataFilterEnabled()&&this.$ctx.on("click",".js-cm-filter-license__remove",e=>{e.preventDefault(),e.stopPropagation(),this.getFilter("license").value=null,this.renderAppliedLicense(),this.changed()})}bindStatusRemoveButtons(){this.isStatusFilterEnabled()&&this.$ctx.on("click",".js-cm-filter-status__remove",e=>{e.preventDefault(),e.stopPropagation(),this.getFilter("status").value=null,this.renderAppliedStatus(),this.changed()})}bindRemoveDownloadRequestFilter(){this.$ctx.on("click",".js-cm-filter-download-request__remove",()=>{this.isDownloadRequestFilterEnabled()&&(this.getFilter(Co.DOWNLOAD_REQUEST_FILTER_ID).value=null,this.renderAppliedDownloadRequest(),this.changed())})}bindCreatorRemoveButtons(){this.$ctx.on("click",".js-cm-filter-creator__remove",e=>{e.preventDefault(),e.stopPropagation(),this.getFilter("creator").value=null,this.renderAppliedCreator(),this.changed()})}focusTagFilterInput(){this.isTagFilterEnabled()&&this.$ctx.find("#c-filters__funnel-tag-input").focus()}renderAppliedTags(){if(!this.isTagFilterEnabled())return;const e=this.getFilter("tag").value,n=[];if(e){for(const d of e)n.push((0,s.EY)(er,{tag:d}));this.tpl.addAndActivate(this.$ctx.find(".js-cm-filter-tag"),n)}}async renderAppliedMetadata(){if(!this.isMetadataFilterEnabled())return;const e=this.getFilter("metadata").value,n=[];if(e){this.project&&!this.metadata&&await this.loadDropdownMetadata();for(const d of e){const x=parseInt(Object.keys(d)[0]),D=d[x],z=this.metadata.find(ne=>ne.id===x);z&&n.push((0,s.EY)(ba,{customMetadataPropertyName:z.label,customMetadataValue:D,metadataFilter:d}))}this.tpl.addAndActivate(this.$ctx.find(".js-cm-filter-metadata"),n)}}renderAppliedStatus(){if(!this.isStatusFilterEnabled())return;const e=`${this.getFilter("status").value}`;let n="";for(const d in this.statuses||[])if(Object.prototype.hasOwnProperty.call(this.statuses,d)&&e===this.statuses[d].id.toString()){n=(0,s.EY)(pr,{status:this.statuses[d]});break}this.tpl.addAndActivate(this.$ctx.find(".js-cm-filter-status"),n)}renderAppliedMissingMetadataFilter(e){const n=e!=null?e:this.getFilter(Co.MISSING_METADATA_FILTER_ID).value,d=(0,s.EY)(xn,{isMissingMetadataFilterApplied:n});n&&(0,F.s)("filter missing metadata",{number_of_assets:this.missingRequiredMetadataAssetIds.length}),this.tpl.addAndActivate(this.$ctx.find(".js-cm-filter-missing-metadata"),d)}async renderAppliedLicense(){var e;if(!this.isMetadataFilterEnabled())return;const n=this.getFilter(Co.LICENSE_FILTER_ID).value;if(!n){this.tpl.addAndActivate(this.$ctx.find(".js-cm-filter-license"),"");return}await this.loadLicenses();const d=(e=this.licenses)==null?void 0:e.find(D=>D.id===n),x=(0,s.EY)(Ma,{license:{id:"license",value:d==null?void 0:d.title}});this.tpl.addAndActivate(this.$ctx.find(".js-cm-filter-license"),x)}renderAppliedDownloadRequest(){if(!this.isDownloadRequestFilterEnabled())return;const e=this.getFilter(Co.DOWNLOAD_REQUEST_FILTER_ID),n=(0,s.EY)(Xs,{downloadRequestRequired:e.value});this.tpl.addAndActivate(this.$ctx.find(".js-cm-filter-download-request"),n)}renderAppliedCreator(){var e;const n=this.getFilter("creator").value,d=(e=this.creators.find(D=>D.id===n))==null?void 0:e.name,x=d?(0,s.EY)(ta,{value:d}):"";this.tpl.addAndActivate(this.$ctx.find(".js-cm-filter-creator"),x)}renderScopeState(){this.isReadyForMeaningfulSearch()?this.$ctx.addClass("co-filters--with-scope"):this.$ctx.removeClass("co-filters--with-scope")}renderAppliedLanguages(){if(!this.isLanguageFilterEnabled())return;const e=this.getFilter("languages").getValue(),n=[];if(e)for(const d of e)n.push((0,s.EY)(da,{language:d}));this.tpl.addAndActivate(this.$ctx.find(".js-cm-filter-languages"),n)}getFilterClass(e){switch(e){case"Brandupdate":return Fe;case"Creator":return qe;case"DownloadRequest":return mt;case"Dropdown":return Ut;case"Languages":return bs;case"License":return ts;case"Metadata":return Mt;case"Query":return ks;case"Scope":return Gs.z;case"Status":return ja;case"Tag":return pa;case"MissingMetadata":return us;default:throw new Error(`${e}Filter class not found`)}}setupFilters(){this.filters=[],this.$ctx.find(".js-co-filters__filter").each((n,d)=>{const x=Ll(d),D=x.data("id"),z=Si()(X()(x.data("type"))),ne=this.getFilterClass(z),_e=new ne(this,x);_e.on(),this.filters.push({id:D,item:_e})}),this.renderAppliedTags(),this.renderAppliedMetadata(),this.renderAppliedLanguages(),this.renderAppliedDownloadRequest(),this.renderAppliedLicense(),this.renderAppliedMissingMetadataFilter(),Object.keys(this.getFilter("creator")).length>0&&this.loadDropdownCreators().then(()=>this.renderAppliedCreator()),this.isStatusFilterEnabled()&&this.getFilter("status").value&&this.loadDropdownStatus().then(()=>this.renderAppliedStatus()),this.isLanguageFilterEnabled()&&this.getFilter("languages").value&&this.loadTextLibraryLanguages()}toQuery(e){const n=[];for(const d in e)if(Object.prototype.hasOwnProperty.call(e,d))if(Array.isArray(e[d]))for(const x of e[d])x instanceof Object?n.push(`${d}[${encodeURIComponent(this.getFirstKey(x))}]=${encodeURIComponent(this.getFirstValue(x))}`):n.push(`${d}[]=${encodeURIComponent(x)}`);else n.push(`${d}=${encodeURIComponent(e[d])}`);return n.join("&")}isReadyForMeaningfulSearch(){for(const e in this.filters)if(Object.prototype.hasOwnProperty.call(this.filters,e)&&this.filters[e].id!=="scope"){const n=this.filters[e],d=n.item.getValue();if(n.id==="q"&&d&&d.length>0||n.id==="tag"&&d&&d.length>0||n.id==="metadata"&&d&&d.length>0||n.id==="status"&&d||n.id===Co.DOWNLOAD_REQUEST_FILTER_ID&&typeof d=="boolean"||n.id==="languages"&&d&&d.length>0||n.id==="creator"&&d||n.id===Co.LICENSE_FILTER_ID&&d||n.id===Co.MISSING_METADATA_FILTER_ID&&d)return!0}return!1}changed(){const e=this.serialize();if(e.filterChanged=!0,this.renderScopeState(),this.fire(this.eventType,e,["search"]),this.router){const n=location.href.split("?")[0],d=e.query?`?${e.query}`:"";history.pushState(null,null,n+d)}}serialize(){let e={};for(const n of this.filters)e=Ll.extend(!0,{},e,n.item.serialize());return{filters:e,query:this.toQuery(e)}}getFilter(e){const n=this.filters.find(d=>d.id===e);return n?n.item:{}}getFirstFilter(){return this.filters[0]?this.filters[0].item:{}}onFilter(e){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const d=this.getFilter(n);Ll.isEmptyObject(d)||d.setValue(e[n])}this.changed()}onFilterRequiredMetadata(){this.getFilter(Co.MISSING_METADATA_FILTER_ID).setValue(!0),this.renderAppliedMissingMetadataFilter(!0),this.changed()}onFilterReload(){this.changed()}onContext(e){this.project=(0,Bt.PL)(),this.brand=e&&e.brand,this.router=this.sandbox.getConfigParam("router"),this.setId=this.router.getUrlParam("set");const n=(0,Pl.j)(window.location.search.substring(1),!0),d=this.$ctx.data("subType")?this.$ctx.data("subType"):null,x={};(0,wn.e)()==="analytics"&&(x.brands=this.context.brands),this.renderFilter(n,d,x),this.renderArchiveFilter()}initFilter(e,n,d){this.project=e,this.setId=n,this.renderFilter({},null,{},d)}renderFilter(e,n=null,d={},x="filterChanged"){const D=_e=>{switch(_e){case"assetchooser":return kw;case"funnel-wrapper":return Kc;case"patterns":return Hw;case"activities":return od;case"funnel-projects-wrapper":return Op;case"funnel-dropdown-creators-list":return wp;case"funnel-dropdown-metadata-list":return jp;case"libraries":return Gw;case"funnel-dropdown-download-request":return mp;case"brandupdates":return Uw;case"funnel-dropdown-download-request-list":return bp;case"textlibrary":return Jw;case"funnel-dropdown-languages":return _p;case"brands":return Fw;case"funnel-dropdown-tags":return fp;case"missing-metadata-switch":return Ap;case"emoji":return Vw;case"funnel-dropdown-tags-list":return Cp;case"projects":return Yw;case"assets":return Bw;case"funnel-dropdown-metadata":return gu;case"projects-templates":return Zw;case"icons":return zw;case"funnel-dropdown-creators":return _u;case"funnel-dropdown-languages-list":return xp;case"guidelines":return Ww;case"funnel-dropdown-project-timeline":return Ep;case"funnel-dropdown-statuses-list":return Ip;case"funnel-dropdown-statuses":return gp;case"funnel-dropdown":return vp;default:return console.error(`Filter component ${_e} not found`),()=>null}},z=n?`-${n}`:"";this.$ctx.html((0,s.EY)(D(`${this.$ctx.data("type")}${z}`.toLowerCase()),{filters:e,options:d})),this.setupFilters();const ne=this.serialize();this.eventType=x,this.fire(x,ne,["search"])}getFirstKey(e){if(!(e instanceof Object))throw new TypeError("Given parameter is not an object");if(Object.keys(e).length===0&&e.constructor===Object)throw new Error("Given object is empty");return Object.keys(e)[0]}getFirstValue(e){if(!(e instanceof Object))throw new TypeError("Given parameter is not an object");if(Object.keys(e).length===0&&e.constructor===Object)throw new Error("Given object is empty");return e[Object.keys(e)[0]]}shouldRetrieveDataFromNewEndpoints(){var e;return((e=this.project)==null?void 0:e.project_type)!==As.g.TemplateLibrary}};Ec.DOWNLOAD_REQUEST_FILTER_ID="download_request",Ec.LICENSE_FILTER_ID="license",Ec.MISSING_METADATA_FILTER_ID="missing_metadata",Ec.CARRIAGE_RETURN_CODE=13,Ec.FILTER_TYPE_ASSETS="assets",Ec.FILTER_TYPE_ICONS="icons";let fo=Ec;var Ic=r(83539),Qw=Object.defineProperty,Sp=Object.getOwnPropertySymbols,Xw=Object.prototype.hasOwnProperty,qw=Object.prototype.propertyIsEnumerable,Pp=(a,e,n)=>e in a?Qw(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,eb=(a,e)=>{for(var n in e||(e={}))Xw.call(e,n)&&Pp(a,n,e[n]);if(Sp)for(var n of Sp(e))qw.call(e,n)&&Pp(a,n,e[n]);return a};class tb extends b.j{on(e){this.formFields=this.$ctx.dataAsObject("formFields"),this.additionalPostData=this.$ctx.dataAsObject("additionalPostData"),this.submitEndpoint=this.$ctx.dataAsString("api"),this.$formWrapper=this.$ctx.find(".js-co-formbuilder__form-container"),this.formHtmlString="",this.sandbox.subscribe("events",this),this.renderFormFields(),this.form=new re.D(this.$formWrapper,this.sandbox),this.form.validation(()=>{const n=eb({},this.additionalPostData),d=this.serialize();n.reason=d.reason,delete d.reason,n.custom_values=d,this.data.post(this.submitEndpoint,n).then(x=>{typeof this.submissionSucceeded=="function"&&this.submissionSucceeded(x)}).catch(()=>{typeof this.submissionFailed=="function"&&this.submissionFailed()})},()=>{typeof this.canceled=="function"&&this.canceled()}),e()}serialize(){const e=this.form.serialize();return typeof this.postSerialized=="function"?this.postSerialized(e):e}renderFormFields(){for(const e of this.formFields)this.formHtmlString+=this.renderField(e);this.$formWrapper.prepend(this.formHtmlString)}renderField(e){let n="";switch(e.type){case"Text":n=(0,s.EY)(ie.A,{id:e.id,label:e.label,value:null,required:e.required,placeholder:e.placeholder});break;case"Date":n=(0,s.EY)(Ic.F,{id:e.id,label:e.label,value:null,required:e.required,placeholder:e.placeholder,no_min_date:!0,allow_empty:!e.required,format_value:"YYYY-MM-DD"});break;case"Dropdown":{let d=null;e.values=e.values.map(x=>(x.default===!0&&(d=x.value),x.name=x.value,x)),n=(0,s.EY)(qi.U,{id:e.id,label:e.label,value:d,required:e.required,options:e.values});break}case"Email":n=(0,s.EY)(ie.A,{id:e.id,label:e.label,value:null,type:"email",required:e.required,placeholder:e.placeholder});break;case"Textarea":n=(0,s.EY)(ee.D,{id:e.id,label:e.label,value:null,required:e.required,placeholder:e.placeholder});break;default:break}return n}}var Td=r(58845);const sb=({children:a,isCloseable:e=!1,onClose:n})=>(0,t.jsx)("div",{className:"tw-border-b tw-border-black-10 tw-bg-box-warning","data-test-id":"alert",children:(0,t.jsxs)("div",{className:"tw-flex tw-items-center tw-justify-center tw-min-h-[var(--f-header-height)]",children:[(0,t.jsxs)("div",{className:"tw-text-sm tw-text-box-warning-inverse xs:tw-ml-[var(--f-powerbar-width)] tw-px-5 tw-py-2 tw-align-middle",children:[(0,t.jsx)("i",{className:"ca-icon--exclamation-triangle-outline tw-mr-2"}),a]}),e&&(0,t.jsx)("div",{className:"tw-absolute tw-right-2 tw-dark","data-test-id":"alert-close-button-container",children:(0,t.jsx)(Bs.$n,{onPress:n,style:"default",emphasis:"default",aspect:"square",rounding:"full",children:(0,t.jsx)(Td.default,{})})})]})}),ab=()=>window.application.sandbox.config.context.global_message.enabled,Np=()=>window.application.sandbox.config.context.global_message.text,nb=a=>localStorage.getItem("global_message_read")===a,rb=a=>{localStorage.setItem("global_message_read",a)};class ib extends b.j{on(e){ab()&&!nb(Np())&&this.showMessage(Np()),e()}showMessage(e){const n={children:(0,u.createElement)("span",null,e),isCloseable:!0,onClose:()=>this.closeMessage(e)},d=this.$ctx.find(".js-c-globalmessage__container").get(0);if(!d)throw new Error("Element not found.");(0,s.Cc)(sb,d,n),this.$ctx.removeClass("c-globalmessage--hidden")}closeMessage(e){const n=this.$ctx.get(0);if(!n)throw new Error("Element not found.");n.remove(),rb(e)}}class ob extends b.j{on(e){this.sandbox.subscribe("events",this),this.remainingWidth=null,e()}onInitialFullscreen(){this.$ctx.velocity("transition.slideUpOut",{duration:1})}onEnterFullscreen(){this.$ctx.velocity("transition.slideUpOut",{duration:100})}onLeaveFullscreen(){this.$ctx.velocity("transition.slideDownIn",{duration:100,display:"flex"})}onHeaderResize(e){e.navigationWidth&&(this.remainingWidth=e.navigationWidth);const n=this.$ctx.find(".co-header__container--action"),d=n.outerWidth(),x=this.$ctx.width(),D=this.remainingWidth>x-d;n.toggleClass("co-header__container--gradient",D)}}var lb=r(11920),cb=r(87395),Lp=r(5181);class db extends b.j{on(e){this.sandbox.subscribe("events",this),this.mode="USER",Lp(this.$ctx).attr("data-mode")&&(this.mode=Lp(this.$ctx).attr("data-mode")),this.settings=new re.D(this.$ctx,this.sandbox),this.settings.validation(()=>{if(this.mode==="GROUP"){this.requestGroupPermission().then(n=>{La.E.prototype.showSuccess.apply(this),this.fire("closeModal"),this.fire("swal",{type:"success",template:"request-submitted-success",showCancelButton:!1,closeOnConfirm:!0}),n.records.PERMISSION.length>0&&this.fire("groupPermissionRequestSubmitted",["events"])}).catch(()=>{this.fire("closeModal"),this.fire("swal",{type:"error",text:"Something went wrong during creating a permission request.",title:"Error!",showCancelButton:!1,closeOnConfirm:!0})});return}this.request()}),e()}request(){const e=this.settings.serialize();e.ids=e.ids.split(","),e.status="REQUESTED",this.data.patch("/api/account/requests",e).then(n=>{n.success&&(La.E.prototype.showSuccess.apply(this),this.fire("closeModal"))})}requestGroupPermission(){return new Promise((e,n)=>{const d=this.settings.serialize();d.status="REQUESTED",d.send_email=d.send_email==="true",this.data.patch("/api/account/group-permission-requests",d).then(x=>{x.success?(e(x),La.E.prototype.showSuccess.apply(this)):n()})})}}const ub=(0,_.I)(a=>(0,t.jsxs)("div",{className:"cm-limit-hook__content",children:[a.type=="card"?(0,t.jsxs)("h3",{className:"cm-limit-hook__title",children:[a.renderable_usage.title,a.has_tooltip?(0,t.jsx)("span",{"data-tooltip":a.tooltip_value,children:(0,t.jsx)("i",{className:"ca-icon ca-icon--unknown ca-icon--xs"})}):null]}):null,!(0,Et.kA)()&&a.renderable_usage.max!==0?(0,t.jsxs)("button",{className:"cm-btn cm-btn--link cm-limit-hook__btn js-cm-limit-hook__get-more",children:[window.translate("Legacy_label_get_more"),(0,t.jsx)("i",{className:"ca-icon--add-simple cm-limit-hook__add"})]}):null,(0,t.jsxs)("div",{className:"cm-limit-hook__usage",children:[(0,t.jsx)("span",{className:"cm-limit-hook__val