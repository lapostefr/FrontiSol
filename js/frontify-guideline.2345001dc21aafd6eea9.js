(self.webpackChunkfrontify=self.webpackChunkfrontify||[]).push([[1523],{5801:function(fe,F,i){"use strict";i.d(F,{PQ:function(){return n}});var e=i(584),u=i.n(e),f=i(89256),b=i.n(f),y=b()(u());y.push([fe.id,`/* (c) Copyright Frontify Ltd., all rights reserved. */

.LocalDevBlockStatus-module__border--hrenGXPd {
    background-image: linear-gradient(90deg, var(--f-violet-60) 50%, transparent 50%),
        linear-gradient(90deg, var(--f-violet-60) 50%, transparent 50%),
        linear-gradient(0deg, var(--f-violet-60) 50%, transparent 50%),
        linear-gradient(0deg, var(--f-violet-60) 50%, transparent 50%);
    background-repeat: repeat-x, repeat-x, repeat-y, repeat-y;
    background-size: 15px 2px, 15px 2px, 2px 15px, 2px 15px;
    background-position: left top, right bottom, left bottom, right top;
    animation: LocalDevBlockStatus-module__border-animation--owKFd93q 1s infinite linear;
}

@keyframes LocalDevBlockStatus-module__border-animation--owKFd93q {
    0% {
        background-position: left top, right bottom, left bottom, right top;
    }
    100% {
        background-position: left 15px top, right 15px bottom, left bottom 15px, right top 15px;
    }
}
`,"",{version:3,sources:["webpack://./application/client/Feature/Guideline/Blocks/LocalDevBlock/LocalDevBlockStatus.module.css"],names:[],mappings:"AAAA,sDAAsD;;AAEtD;IACI;;;sEAGkE;IAClE,yDAAyD;IACzD,uDAAuD;IACvD,mEAAmE;IACnE,oFAA8C;AAClD;;AAEA;IACI;QACI,mEAAmE;IACvE;IACA;QACI,uFAAuF;IAC3F;AACJ",sourcesContent:[`/* (c) Copyright Frontify Ltd., all rights reserved. */

.border {
    background-image: linear-gradient(90deg, var(--f-violet-60) 50%, transparent 50%),
        linear-gradient(90deg, var(--f-violet-60) 50%, transparent 50%),
        linear-gradient(0deg, var(--f-violet-60) 50%, transparent 50%),
        linear-gradient(0deg, var(--f-violet-60) 50%, transparent 50%);
    background-repeat: repeat-x, repeat-x, repeat-y, repeat-y;
    background-size: 15px 2px, 15px 2px, 2px 15px, 2px 15px;
    background-position: left top, right bottom, left bottom, right top;
    animation: border-animation 1s infinite linear;
}

@keyframes border-animation {
    0% {
        background-position: left top, right bottom, left bottom, right top;
    }
    100% {
        background-position: left 15px top, right 15px bottom, left bottom 15px, right top 15px;
    }
}
`],sourceRoot:""}]);var n="LocalDevBlockStatus-module__border--hrenGXPd",w="LocalDevBlockStatus-module__border-animation--owKFd93q";F.Ay=y},77345:function(fe,F,i){"use strict";i.d(F,{Z:function(){return B}});var e=i(86070),u=i(23245),f=i(14154);const b=(0,f.I)(R=>(0,e.jsx)("div",{className:"ca-avatar-simple__card-container js-ca-avatar-simple__card-container",tabIndex:-1,children:(0,e.jsxs)("div",{className:"ca-avatar-simple__card",children:[(0,e.jsx)("div",{className:"ca-avatar-simple__card-header",children:(0,e.jsx)("div",{className:"ca-avatar-simple__card-avatar",children:(0,e.jsx)(u.p,{imageUrl:R.imageUrl,gravatarHash:R.gravatarHash,name:R.name||R.email,size:B.SIZE_80,border:B.BORDER_WHITE})})}),(0,e.jsx)("div",{className:"ca-avatar-simple__card-name",children:R.name||R.email}),R.role?(0,e.jsx)("div",{className:"ca-avatar-simple__card-role",children:R.role}):null,R.organization?(0,e.jsx)("div",{className:"ca-avatar-simple__card-organization",children:R.organization}):null]})}));var y=i(46223),n=Object.defineProperty,w=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,C=(R,k,V)=>k in R?n(R,k,{enumerable:!0,configurable:!0,writable:!0,value:V}):R[k]=V,v=(R,k)=>{for(var V in k||(k={}))E.call(k,V)&&C(R,V,k[V]);if(w)for(var V of w(k))x.call(k,V)&&C(R,V,k[V]);return R};const m=(0,f.I)(R=>(0,e.jsx)("img",v({className:(0,y.h)(["ca-avatar-simple__image js-ca-avatar-simple__image",R.lazyLoad?"lazyload":"not-lazyloaded",R.hasBorder?`ca-avatar-simple__image--size-${R.size}-with-border`:`ca-avatar-simple__image--size-${R.size}`]),alt:R.name,title:R.name},R.lazyLoad?{"data-src":R.imageUrl}:{src:R.imageUrl})));var c=i(78149);const o=(0,f.I)(R=>(0,e.jsx)("div",{className:(0,y.h)(["ca-avatar-simple__no-image js-ca-avatar-simple__no-image",R.backgroundColor?`ca-avatar-simple__no-image--background-color-${R.backgroundColor}`:"",R.hasBorder?`ca-avatar-simple__no-image--size-${R.size}-with-border`:`ca-avatar-simple__no-image--size-${R.size}`]),title:R.name,children:(0,e.jsx)(c.V,{size:R.size==="80"?"xl":"md",icon:"user"})})),l=(0,f.I)(R=>(0,e.jsx)("div",{className:`ca-avatar-simple__overlay ${R.hasBorder?`ca-avatar-simple__overlay--size-${R.size}-with-border`:`ca-avatar-simple__overlay--size-${R.size}`}`})),h=(0,f.I)(R=>R.state===B.STATE_DISABLED?(0,e.jsx)("div",{className:"ca-avatar-simple__state ca-avatar-simple__state--disabled"}):null),g=(0,f.I)(R=>(0,e.jsx)("div",{className:`ca-avatar-simple__status js-ca-avatar-simple__status ca-avatar-simple__status--${R.status} ca-avatar-simple__status--size-${R.size} `,children:R.status===B.STATUS_DECLINED?(0,e.jsx)("svg",{width:"6",height:"6",xmlns:"http://www.w3.org/2000/svg",children:(0,e.jsx)("path",{d:"M5.525.575a.5.5 0 010 .708L3.817 2.99 5.525 4.7a.5.5 0 010 .706l-.118.118a.5.5 0 01-.707 0l-1.709-1.71-1.708 1.71a.5.5 0 01-.708 0l-.117-.118a.5.5 0 010-.707l1.708-1.71L.458 1.284a.5.5 0 010-.708L.575.458a.5.5 0 01.708 0L2.99 2.166 4.701.458a.5.5 0 01.706 0l.118.117z",fill:"#FFF",fillRule:"evenodd"})}):R.status===B.STATUS_APPROVED?(0,e.jsx)("svg",{width:"8",height:"6",xmlns:"http://www.w3.org/2000/svg",children:(0,e.jsx)("path",{d:"M6.063.266a.583.583 0 01.914.718l-.065.083-4.294 4.548-1.68-1.901a.583.583 0 01.798-.845l.076.072.835.943L6.063.266z",fill:"#FFF",fillRule:"nonzero"})}):R.status===B.STATUS_PENDING?(0,e.jsx)("svg",{width:"4",height:"8",xmlns:"http://www.w3.org/2000/svg",children:(0,e.jsx)("path",{d:"M2.01 5.727c.181 0 .339.066.47.198a.66.66 0 01.199.486.683.683 0 01-.198.492.634.634 0 01-.472.205.649.649 0 01-.485-.205.683.683 0 01-.198-.492.66.66 0 01.198-.486.66.66 0 01.485-.198zM2.022.792c.61 0 1.089.16 1.435.478.347.32.52.752.52 1.299 0 .374-.112.697-.335.97-.223.274-.454.53-.69.766-.174.183-.288.335-.342.458a.835.835 0 00-.082.335h-.971c.01-.273.057-.496.143-.67.087-.173.24-.378.459-.615.173-.191.348-.378.526-.56a.923.923 0 00.266-.67.852.852 0 00-.246-.63c-.164-.163-.392-.245-.683-.245-.31 0-.545.098-.704.294-.16.196-.253.44-.28.731h-1.08c.063-.574.28-1.041.649-1.401.369-.36.84-.54 1.415-.54z",fill:"#7A7F88",fillRule:"evenodd"})}):null}));var j=i(50427),$=i(81178),S=i(18216),T=i(77007),A=i(5181);class B extends S.j{static get SIZES(){return[B.SIZE_16,B.SIZE_22,B.SIZE_24,B.SIZE_28,B.SIZE_32,B.SIZE_40,B.SIZE_80]}static get SIZE_16(){return 16}static get SIZE_22(){return 22}static get SIZE_24(){return 24}static get SIZE_28(){return 28}static get SIZE_32(){return 32}static get SIZE_40(){return 40}static get SIZE_80(){return 80}static get STATUS(){return[B.STATUS_NO,B.STATUS_APPROVED,B.STATUS_DECLINED,B.STATUS_PENDING]}static get STATUS_NO(){return"no"}static get STATUS_DECLINED(){return"declined"}static get STATUS_APPROVED(){return"approved"}static get STATUS_PENDING(){return"pending"}static get STATE(){return[B.STATE_DEFAULT,B.STATE_DISABLED]}static get STATE_DEFAULT(){return"default"}static get STATE_DISABLED(){return"disabled"}static get TIMEOUT_DURATION(){return 1}static get GRAVATAR_BASE_URL(){return"https://secure.gravatar.com/avatar/"}static get BACKGROUND_COLOR_BLACK_100(){return"black-100"}static get BACKGROUND_COLOR_BLACK_10(){return"black-10"}static get BACKGROUND_COLOR_GREEN(){return"green"}static get BACKGROUND_COLOR_YELLOW(){return"yellow"}static get BACKGROUND_COLOR_RED(){return"red"}static get BACKGROUND_COLOR_BLUE_DARK(){return"blue-dark"}static get BORDER_NONE(){return"none"}static get BORDER_WHITE(){return"white"}static get BORDER_BLUE_DARK(){return"blue-dark"}static get BORDERS(){return[B.BORDER_NONE,B.BORDER_WHITE,B.BORDER_BLUE_DARK]}static get BACKGROUND_COLORS(){return[B.BACKGROUND_COLOR_BLUE_DARK,B.BACKGROUND_COLOR_RED,B.BACKGROUND_COLOR_YELLOW,B.BACKGROUND_COLOR_GREEN,B.BACKGROUND_COLOR_BLACK_100,B.BACKGROUND_COLOR_BLACK_10]}static get THEME_LIGHT(){return"light"}static get THEME_DARK(){return"dark"}static get THEMES(){return[B.THEME_LIGHT,B.THEME_DARK]}on(k){this.sandbox.subscribe("avatar",this),this.tpl.bindDataAttributes(this,{imageUrl:{type:String,changed:()=>this.updateImageUrl()},gravatarHash:{type:String,changed:()=>this.updateGravatarHash()},name:{type:String,changed:()=>this.updateName()},size:{type:Number,allowed:B.SIZES,default:B.SIZE_32},border:{type:String,allowed:B.BORDERS,default:B.BORDER_NONE,changed:V=>this.updateBorderColor(V)},showOverlay:{type:Boolean,changed:()=>this.renderOverlay()},status:{type:String,allowed:B.STATUS,default:B.STATUS_NO,changed:()=>this.updateStatus()},state:{type:String,allowed:B.STATE,default:B.STATE_DEFAULT},userId:{type:Number},lazyLoad:{type:Boolean,default:!0},showPopup:{type:Boolean},backgroundColor:{type:String,allowed:B.BACKGROUND_COLORS,default:B.BACKGROUND_COLOR_BLACK_10},theme:{type:String,allowed:B.THEMES,default:B.THEME_LIGHT}}),this.renderStaticClasses(),this.renderImage(),this.renderNoImage(),this.renderGravatar(),this.renderStatus(),this.renderState(),this.renderPopup(),this.renderOverlay(),k()}renderStaticClasses(){this.border!==B.BORDER_NONE?this.$ctx.addClass(`ca-avatar-simple--border
                     ca-avatar-simple--border-${this.border}
                     ca-avatar-simple--size-${this.size}-with-border`):this.$ctx.addClass(`ca-avatar-simple--size-${this.size}`)}renderNoImage(k=!1){const V=this.backgroundColor,K=(0,j.EY)(o,{name:this.name,backgroundColor:V,size:this.size,hasBorder:this.border!==B.BORDER_NONE});if(k){const z=this.$ctx.find(".js-ca-avatar-simple__no-image");this.tpl.replaceAndActivate(z,A(K))}else this.$ctx.append(K)}renderOverlay(){var k;if(!this.showOverlay){(k=this.$overlay)==null||k.addClass("ca-avatar-simple__overlay--hidden");return}this.$overlay||(this.$overlay=A((0,j.EY)(l,{size:this.size,hasBorder:this.border!==B.BORDER_NONE})),this.$ctx.append(this.$overlay)),this.$overlay.removeClass("ca-avatar-simple__overlay--hidden")}renderImage(k=!1){if(!T.y.isString(this.imageUrl)||this.imageUrl.length===0)return;const V=(0,j.EY)(m,{imageUrl:this.imageUrl,name:this.name,lazyLoad:this.lazyLoad,size:this.size,hasBorder:this.border!==B.BORDER_NONE});if(k){const K=this.$ctx.find(".js-ca-avatar-simple__image");this.tpl.replaceAndActivate(K,A(V))}else this.$ctx.append(V);this.handleImageError()}handleImageError(){const k=this.$ctx.find(".js-ca-avatar-simple__image");k.on("error",()=>{k.remove()})}renderGravatar(k=!1){if(T.y.isStringAndNotEmpty(this.imageUrl)||!T.y.isString(this.gravatarHash)||this.gravatarHash.length===0)return;const V=`${B.GRAVATAR_BASE_URL}${this.gravatarHash}?d=404&s=${this.size}`;V.length!==0&&(k||this.$ctx.prepend('<div class="js-ca-avatar-simple__image"></div>'),A.ajax({url:V}).done(()=>{const K=(0,j.EY)(m,{imageUrl:V,name:this.name,lazyLoad:this.lazyLoad,size:this.size,hasBorder:this.border!==B.BORDER_NONE}),z=this.$ctx.find(".js-ca-avatar-simple__image");this.tpl.replaceAndActivate(z,A(K))}))}renderStatus(k=!1){if(!B.STATUS.includes(this.status)||this.size===B.SIZE_80)return;const V=(0,j.EY)(g,{status:this.status,size:this.size});if(k){const K=this.$ctx.find(".js-ca-avatar-simple__status");this.tpl.replaceAndActivate(K,A(V))}else this.$ctx.append(V)}renderState(){this.$ctx.append((0,j.EY)(h,{state:this.state}))}renderPopup(){if(!this.showPopup||!T.y.isNumber(this.userId)||this.userId<1||this.isIdOfCurrentUser(this.userId))return;this.$ctx.find(".js-ca-avatar-simple__image, .js-ca-avatar-simple__no-image").removeAttr("title"),this.$ctx.on("mouseenter focusin",()=>{this.clearCurrentTimeout(),this.timeout=setTimeout(()=>{this.data.get(`/api/user/info/${this.userId}`).then(V=>{if(typeof V!="object")return;const K=A((0,j.EY)(b,{imageUrl:V.preview_url_without_placeholder,gravatarHash:V.gravatar_hash,name:V.name,email:V.email,role:V.role,organization:V.organization}));this.tpl.addAndActivate(this.$ctx,K,!1);const z=K.offset().left+K.width(),q=K.offset().top+K.height(),re=A(window).width(),ve=A(window).height();q>ve&&this.$ctx.addClass("ca-avatar-simple--hover-top"),z>re&&this.$ctx.addClass("ca-avatar-simple--hover-left"),this.$ctx.off("mouseenter focusin mouseleave focusout")})},B.TIMEOUT_DURATION)}),this.$ctx.on("mouseleave focusout",()=>{this.clearCurrentTimeout()})}updateImageUrl(){this.renderImage(!0),this.renderGravatar(!0)}updateGravatarHash(){this.renderGravatar(!0)}updateName(){this.renderNoImage(!0),this.renderImage(!0),this.renderGravatar(!0)}updateBorderColor(k){this.$ctx.removeClass(`ca-avatar-simple--border-${k.previousValue}`),this.$ctx.addClass(`ca-avatar-simple--border-${this.border}`)}updateStatus(){this.renderStatus(!0)}isIdOfCurrentUser(k){return(0,$.F6)()===k}clearCurrentTimeout(){clearTimeout(this.timeout)}onAvatarUpdate({userId:k,imageUrl:V=null,name:K=null,gravatarHash:z=null}){this.userId===k&&(this.$ctx.dataAsString("imageUrl",V),this.$ctx.dataAsString("name",K),this.$ctx.dataAsString("gravatarHash",z))}}},23245:function(fe,F,i){"use strict";i.d(F,{p:function(){return x}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,w=(C,v,m)=>v in C?f(C,v,{enumerable:!0,configurable:!0,writable:!0,value:m}):C[v]=m,E=(C,v)=>{for(var m in v||(v={}))y.call(v,m)&&w(C,m,v[m]);if(b)for(var m of b(v))n.call(v,m)&&w(C,m,v[m]);return C};const x=(0,u.I)(C=>(0,e.jsx)("div",E({className:"mod mod-c-avatar-simple ca-avatar-simple",tabIndex:C.interactive?0:-1},C.tpl.renderDataAttributesAsObject(C))))},47929:function(fe,F,i){"use strict";i.d(F,{I:function(){return x}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,w=(C,v,m)=>v in C?f(C,v,{enumerable:!0,configurable:!0,writable:!0,value:m}):C[v]=m,E=(C,v)=>{for(var m in v||(v={}))y.call(v,m)&&w(C,m,v[m]);if(b)for(var m of b(v))n.call(v,m)&&w(C,m,v[m]);return C};const x=(0,u.I)(C=>(0,e.jsx)("div",E({className:"mod mod-c-button-group ca-button-group"},C.tpl.renderDataAttributesAsObject(C))))},93277:function(fe,F,i){"use strict";i.d(F,{Q:function(){return m}});var e=i(86070),u=i(78149),f=i(14154);const b=(0,f.I)(c=>(0,e.jsx)("span",{className:`ca-button__segment ca-button__dropdown-indicator ca-button__dropdown-indicator--size-${c.size}`,children:(0,e.jsx)(u.V,{icon:"caret-down",size:c.iconSize})}));var y=i(93791);const n=(0,f.I)(c=>(0,e.jsx)("div",{className:`ca-button__segment ca-button__segment--icon js-ca-button__segment--icon ${c.isInProgress?"ca-button__segment--icon-in-progress":""}`,children:c.isInProgress?(0,e.jsx)("span",{className:`ca-button__spinner ca-button__spinner--size-${c.size}`,children:(0,e.jsx)(u.V,{icon:y.l.ICON_SPINNER,size:c.iconSize,classes:"anim-spin"})}):(0,e.jsx)("span",{className:`ca-button__icon ca-button__icon--size-${c.size}`,children:(0,e.jsx)(u.V,{icon:c.icon,size:c.iconSize})})})),w=(0,f.I)(c=>(0,e.jsx)("span",{className:`ca-button__segment ca-button__text ca-button__text--size-${c.size} js-ca-button__text`,children:c.label}));var E=i(77007),x=i(50427),C=i(18216),v=i(5181);class m extends C.j{static get TYPE_BUTTON(){return"button"}static get TYPE_SUBMIT(){return"submit"}static get TYPE_RESET(){return"reset"}static get TYPES(){return[m.TYPE_BUTTON,m.TYPE_SUBMIT,m.TYPE_RESET]}static get SIZE_SMALL(){return"small"}static get SIZE_MEDIUM(){return"medium"}static get SIZE_LARGE(){return"large"}static get SIZES(){return[m.SIZE_SMALL,m.SIZE_MEDIUM,m.SIZE_LARGE]}static get STYLE_PRIMARY(){return"primary"}static get STYLE_SECONDARY(){return"secondary"}static get STYLE_DANGER(){return"danger"}static get STYLES(){return[m.STYLE_PRIMARY,m.STYLE_SECONDARY,m.STYLE_DANGER]}static get ICON_STYLE_DEFAULT(){return""}static get ICON_STYLE_SUCCESS(){return"success"}static get ICON_STYLE_DANGER(){return"danger"}static get ICON_STYLES(){return[m.ICON_STYLE_DEFAULT,m.ICON_STYLE_SUCCESS,m.ICON_STYLE_DANGER]}static get BACKGROUND_WHITE(){return"white"}static get BACKGROUND_BLACK_05(){return"black-05"}static get BACKGROUND_BLACK_90(){return"black-90"}static get BACKGROUND_BLACK_100(){return"black-100"}static get BACKGROUNDS(){return[m.BACKGROUND_WHITE,m.BACKGROUND_BLACK_05,m.BACKGROUND_BLACK_90,m.BACKGROUND_BLACK_100]}static get ICONS(){return["",...y.l.ICONS]}static get ICON_DEFAULT(){return""}static get FOCUSED_BY_MOUSE_CLASS(){return"ca-button--focused-by-mouse"}on(o){switch(this.tpl.bindDataAttributes(this,{label:{type:String,changed:()=>this.updateLabel()},type:{type:String,allowed:m.TYPES,default:m.TYPE_BUTTON},size:{type:String,allowed:m.SIZES,default:m.SIZE_MEDIUM},style:{type:String,allowed:m.STYLES,default:m.STYLE_PRIMARY},background:{type:String,allowed:m.BACKGROUNDS,default:m.BACKGROUND_WHITE},icon:{type:String,allowed:m.ICONS,default:m.ICON_DEFAULT},iconStyle:{type:String,allowed:m.ICON_STYLES,default:m.ICON_STYLE_DEFAULT},dropdownIndicator:{type:Boolean},noRoundedCornersLeft:{type:Boolean},noRoundedCornersRight:{type:Boolean},isDisabled:{type:Boolean,changed:()=>this.updateIsDisabled()},isInProgress:{type:Boolean,changed:()=>this.updateIsInProgress()}}),this.size){case m.SIZE_SMALL:this.iconSize=y.l.SIZE_SMALL;break;case m.SIZE_MEDIUM:this.iconSize=y.l.SIZE_MEDIUM;break;case m.SIZE_LARGE:this.iconSize=y.l.SIZE_MEDIUM;break}this.renderButtonType(),this.renderStaticClasses(),this.renderIcon(),this.renderLabel(),this.renderDropdownIndicator(),this.updateIsDisabled(),this.bindClicked(),this.bindFocusedByMouse(),o()}renderButtonType(){this.$ctx.attr("type",this.type)}renderStaticClasses(){this.$ctx.addClass(`
                ca-button--style-${this.style}
                ca-button--background-${this.background}
                ca-button--size-${this.size}
                ca-button--style-${this.style}-background-${this.background}
                ca-button--disabled
            `),this.noRoundedCornersLeft&&this.$ctx.addClass("ca-button--no-rounded-corners-left"),this.noRoundedCornersRight&&this.$ctx.addClass("ca-button--no-rounded-corners-right"),this.iconStyle!==m.ICON_STYLE_DEFAULT&&this.$ctx.addClass(`ca-button--icon-style-${this.iconStyle}`)}renderIcon(o=!1){if(!E.y.isStringAndNotEmpty(this.icon))return;const l=(0,x.EY)(n,{icon:this.icon,size:this.size,iconSize:this.iconSize,iconStyle:this.iconStyle,isInProgress:this.isInProgress});if(o){const h=this.$ctx.find(".js-ca-button__segment--icon");this.tpl.replaceAndActivate(h,v(l))}else this.$ctx.append(l)}renderLabel(){E.y.isStringAndNotEmpty(this.label)&&this.$ctx.append((0,x.EY)(w,{label:this.label,size:this.size}))}renderDropdownIndicator(){this.dropdownIndicator&&this.$ctx.append((0,x.EY)(b,{size:this.size,iconSize:this.iconSize}))}bindFocusedByMouse(){this.$ctx.on("mousedown",()=>{this.$ctx.addClass(m.FOCUSED_BY_MOUSE_CLASS)}),this.$ctx.on("focusout",()=>{this.$ctx.removeClass(m.FOCUSED_BY_MOUSE_CLASS)})}bindClicked(){this.type===m.TYPE_BUTTON&&this.$ctx.on("click",o=>{o.preventDefault(),o.stopPropagation(),!(this.isDisabled||this.isInProgress)&&this.tpl.fireCustomEvent(this.$ctx,"clicked")})}updateIsDisabled(){this.isDisabled?this.$ctx.prop("disabled",!0):this.$ctx.prop("disabled",!1)}updateIsInProgress(){this.renderIcon(!0)}updateLabel(){const l=this.$ctx.find(".js-ca-button__text").get(0);if(!l)throw new Error("Element not found.");l.innerHTML=this.label}}},87053:function(fe,F,i){"use strict";i.d(F,{S:function(){return x}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,w=(C,v,m)=>v in C?f(C,v,{enumerable:!0,configurable:!0,writable:!0,value:m}):C[v]=m,E=(C,v)=>{for(var m in v||(v={}))y.call(v,m)&&w(C,m,v[m]);if(b)for(var m of b(v))n.call(v,m)&&w(C,m,v[m]);return C};const x=(0,u.I)(C=>(0,e.jsx)("button",E({className:"mod mod-c-button ca-button"},C.tpl.renderDataAttributesAsObject(C))))},75573:function(fe,F,i){"use strict";i.d(F,{z:function(){return C}});var e=i(86070),u=i(95376),f=i(14154),b=Object.defineProperty,y=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,E=(v,m,c)=>m in v?b(v,m,{enumerable:!0,configurable:!0,writable:!0,value:c}):v[m]=c,x=(v,m)=>{for(var c in m||(m={}))n.call(m,c)&&E(v,c,m[c]);if(y)for(var c of y(m))w.call(m,c)&&E(v,c,m[c]);return v};const C=(0,f.I)(v=>{var m;return(0,e.jsxs)("label",{className:`ca-checkbox ${v.modifier?`ca-checkbox--${v.modifier}`:""} ${v.label_classes||""}`,title:v.label,children:[(0,e.jsx)("input",x(x(x({type:"checkbox",id:v.id,name:v.name,className:`ca-checkbox__checkbox ca-checkbox__checkbox--hidden ${v.classes||""}`,value:v.value,"data-indeterminate":!!v.indeterminate},v.checked&&!v.indeterminate?{checked:!0}:{}),v.disabled||v.readonly?{disabled:!0}:{}),v.tpl.renderDataAttributesAsObject((m=v.data)!=null?m:{}))),(0,e.jsx)("span",{className:"ca-checkbox__bubble",children:(0,e.jsx)("i",{className:"ca-icon--check"})}),v.label?(0,e.jsx)("span",{className:`ca-checkbox__label ${v.disable_label&&v.disabled?"ca-checkbox__label--disabled":""} js-ca-checkbox__label ${v.multilineLabel?"ca-checkbox__label--multiline":""}`,children:v.label}):null,v.htmlLabel?(0,e.jsx)("span",{className:`ca-checkbox__label ca-checkbox__label--html ${v.disable_label&&v.disabled?"ca-checkbox__label--disabled":""}`,children:(0,u.Ay)(v.htmlLabel)}):null]})})},19194:function(fe,F,i){"use strict";i.d(F,{J:function(){return n}});var e=i(86070),u=i(14154);const f=(0,u.I)(w=>(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("svg",{viewBox:"0 0 64 64",children:[(0,e.jsx)("circle",{pathLength:"100",className:`ca-circle-loader__track ca-circle-loader__track--${w.theme}`,cx:"32",cy:"32",r:"30",fill:"none",strokeWidth:"4"}),(0,e.jsx)("circle",{pathLength:"100",className:` ca-circle-loader__fill js-ca-circle-loader__fill js-ca-circle-loader__fill--${w.type} ca-circle-loader__fill--${w.type} ca-circle-loader__fill--${w.theme} `,strokeDasharray:"0, 100",strokeDashoffset:"0",cx:"32",cy:"32",r:"30",fill:"none",strokeWidth:"4"})]}),(0,e.jsx)("div",{className:` ca-circle-loader__ie11 ca-circle-loader__ie11--${w.type} ca-circle-loader__ie11--${w.theme} ca-circle-loader__ie11--${w.size} `})]}));var b=i(50427),y=i(18216);class n extends y.j{static get SIZES(){return[n.SIZE_TINY,n.SIZE_SMALL,n.SIZE_MEDIUM,n.SIZE_LARGE]}static get SIZE_TINY(){return"tiny"}static get SIZE_SMALL(){return"small"}static get SIZE_MEDIUM(){return"medium"}static get SIZE_LARGE(){return"large"}static get TYPES(){return[n.TYPE_DETERMINATE,n.TYPE_INDETERMINATE]}static get TYPE_DETERMINATE(){return"determinate"}static get TYPE_INDETERMINATE(){return"indeterminate"}static get THEMES(){return[n.THEME_DARK,n.THEME_LIGHT]}static get THEME_LIGHT(){return"light"}static get THEME_DARK(){return"dark"}static get STATES(){return[n.STATE_LOADING,n.STATE_SUCCESS,n.STATE_FAILED]}static get STATE_LOADING(){return"loading"}static get STATE_SUCCESS(){return"success"}static get STATE_FAILED(){return"failed"}on(E){this.tpl.bindDataAttributes(this,{size:{type:String,allowed:n.SIZES,default:n.SIZE_MEDIUM},theme:{type:String,allowed:n.THEMES,default:n.THEME_DARK},state:{type:String,allowed:n.STATES,default:n.STATE_LOADING,changed:()=>this.updateState()},type:{type:String,allowed:n.TYPES,default:n.TYPE_INDETERMINATE},progress:{type:Number,default:0,changed:()=>this.updateProgress()}}),this.$container=this.$ctx.find(".js-ca-circle-loader__container"),this.renderCircles(),this.renderCssClasses(),this.updateState(),this.type===n.TYPE_DETERMINATE&&this.updateProgress(),E()}renderCircles(){const E=(0,b.EY)(f,{type:this.type,theme:this.theme,size:this.size});this.$container.html(E)}renderCssClasses(){this.$container.addClass(`ca-circle-loader__container--${this.size} ca-circle-loader__container--${this.theme} ca-circle-loader__container--${this.type}`)}updateProgress(){this.$ctx.find(".js-ca-circle-loader__fill--determinate").css({"stroke-dasharray":`${this.progress} 100`})}updateState(){const E=this.$ctx.find(".js-ca-circle-loader__fill"),x=this.$ctx.find(".ca-circle-loader__ie11");this.$ctx.removeClass("ca-circle-loader--state-failed"),this.$ctx.removeClass("ca-circle-loader--success"),E.removeClass("ca-circle-loader__fill--state-failed"),E.removeClass("ca-circle-loader__fill--state-success"),x.removeClass(".ca-circle-loader__ie11--state-failed"),x.removeClass(".ca-circle-loader__ie11--state-success"),this.state==="failed"&&(this.$ctx.addClass("ca-circle-loader--state-failed"),E.addClass("ca-circle-loader__fill--state-failed"),x.addClass(".ca-circle-loader__ie11--state-failed")),this.state==="success"&&(this.progress=100,this.updateProgress(),this.$ctx.addClass("ca-circle-loader--state-success"),E.addClass("ca-circle-loader__fill--state-success"),x.addClass(".ca-circle-loader__ie11--state-success"))}}},89045:function(fe,F,i){"use strict";i.d(F,{R:function(){return m}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.defineProperties,y=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,x=(c,o,l)=>o in c?f(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,C=(c,o)=>{for(var l in o||(o={}))w.call(o,l)&&x(c,l,o[l]);if(n)for(var l of n(o))E.call(o,l)&&x(c,l,o[l]);return c},v=(c,o)=>b(c,y(o));const m=(0,u.I)(c=>(0,e.jsx)("div",v(C({className:"mod mod-c-circle-loader ca-circle-loader"},c.tpl.renderDataAttributesAsObject(c)),{children:(0,e.jsx)("div",{className:"ca-circle-loader__container js-ca-circle-loader__container"})})))},61055:function(fe,F,i){"use strict";i.r(F),i.d(F,{TplCDropdownTypeface:function(){return f}});var e=i(86070),u=i(14154);const f=(0,u.I)(b=>{var y;return(0,e.jsxs)("div",{className:"ca-dropdown ca-dropdown--typeface",tabIndex:0,children:[(0,e.jsx)("div",{className:"selected",children:(0,e.jsxs)("span",{children:[b.selected?b.selected.label:"Multiple",(0,e.jsx)("i",{className:"ca-dropdown__arrow icon-angle-down"})]})}),(0,e.jsx)("ul",{className:"js-ca-dropdown__list",children:(y=b.items)==null?void 0:y.map((n,w)=>(0,e.jsx)("li",{"data-index":w,children:(0,e.jsx)("span",{children:n.label})},w))})]})})},50448:function(fe,F,i){"use strict";i.d(F,{t:function(){return m}});var e=i(86070),u=i(89045),f=i(78149),b=i(14154),y=i(19194);const n=(0,b.I)(c=>(0,e.jsx)("div",{className:"ca-icon-button__icon js-ca-icon-button__icon",children:c.isInProgress?(0,e.jsx)(u.R,{size:y.J.SIZE_SMALL}):(0,e.jsx)(f.V,{icon:c.icon,size:c.size})})),w=(0,b.I)(c=>(0,e.jsx)("div",{className:"ca-icon-button__label js-ca-icon-button__label",children:c.label}));var E=i(50427),x=i(18216),C=i(93791),v=i(5181);class m extends x.j{static get ICONS(){return C.l.ICONS}static get ICON_DEFAULT(){return C.l.ICON_ADD}static get ICON_BUTTON_SIZE_SMALL(){return C.l.SIZE_SMALL}static get ICON_BUTTON_SIZE_MEDIUM(){return C.l.SIZE_MEDIUM}static get ICON_BUTTON_SIZE_LARGE(){return C.l.SIZE_LARGE}static get ICON_BUTTON_SIZES(){return[m.ICON_BUTTON_SIZE_SMALL,m.ICON_BUTTON_SIZE_MEDIUM,m.ICON_BUTTON_SIZE_LARGE]}static get BACKGROUND_WHITE(){return"white"}static get BACKGROUND_TRANSPARENT(){return"transparent"}static get BACKGROUND_BLACK_05(){return"black-05"}static get BACKGROUND_BLACK_90(){return"black-90"}static get BACKGROUND_BLACK_100(){return"black-100"}static get BACKGROUNDS(){return[m.BACKGROUND_WHITE,m.BACKGROUND_TRANSPARENT,m.BACKGROUND_BLACK_05,m.BACKGROUND_BLACK_90,m.BACKGROUND_BLACK_100]}static get STYLE_SUCCESS(){return"success"}static get STYLE_DANGER(){return"danger"}static get STYLE_DEFAULT(){return"default"}static get STYLES(){return[m.STYLE_SUCCESS,m.STYLE_DANGER,m.STYLE_DEFAULT]}static get FOCUSED_BY_MOUSE_CLASS(){return"ca-icon-button--focused-by-mouse"}on(o){this.tpl.bindDataAttributes(this,{icon:{type:String,allowed:m.ICONS,default:m.ICON_DEFAULT},label:{type:String,changed:()=>this.updateLabel()},size:{type:String,allowed:m.ICON_BUTTON_SIZES,default:m.ICON_BUTTON_SIZE_MEDIUM},style:{type:String,allowed:m.STYLES,default:m.STYLE_DEFAULT},background:{type:String,allowed:m.BACKGROUNDS,default:m.BACKGROUND_WHITE},isDisabled:{type:Boolean,changed:()=>this.updateIsDisabled()},isInProgress:{type:Boolean,changed:()=>this.renderIcon(!0)}}),this.renderStaticClasses(),this.renderIcon(),this.renderLabel(),this.updateIsDisabled(),this.bindClicked(),this.bindFocusedByMouse(),o()}renderStaticClasses(){this.$ctx.addClass(`
                ca-icon-button--size-${this.size}
                ca-icon-button--style-${this.style}--background-${this.background}
            `)}renderIcon(o=!1){const l=v((0,E.EY)(n,{icon:this.icon,size:this.size,isInProgress:this.isInProgress}));o?this.$ctx.find(".js-ca-icon-button__icon").replaceWith(v(l)):this.$ctx.append(l),window.application.sandbox.addModules(l)}renderLabel(){if(!this.label)return;const o=v((0,E.EY)(w,{label:this.label}));this.$ctx.append(o)}updateIsDisabled(){this.isDisabled?this.$ctx.prop("disabled",!0):this.$ctx.prop("disabled",!1)}bindClicked(){this.$ctx.on("click",o=>{o.preventDefault(),o.stopPropagation(),!this.isDisabled&&this.tpl.fireCustomEvent(this.$ctx,"iconButtonClicked")})}bindFocusedByMouse(){this.$ctx.on("mousedown",()=>{this.$ctx.addClass(m.FOCUSED_BY_MOUSE_CLASS)}),this.$ctx.on("focusout",()=>{this.$ctx.removeClass(m.FOCUSED_BY_MOUSE_CLASS)})}updateLabel(){const l=this.$ctx.find(".js-ca-icon-button__label").get(0);if(!l)throw new Error("Element not found.");l.innerHTML=this.label}}},26725:function(fe,F,i){"use strict";i.d(F,{t:function(){return x}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,w=(C,v,m)=>v in C?f(C,v,{enumerable:!0,configurable:!0,writable:!0,value:m}):C[v]=m,E=(C,v)=>{for(var m in v||(v={}))y.call(v,m)&&w(C,m,v[m]);if(b)for(var m of b(v))n.call(v,m)&&w(C,m,v[m]);return C};const x=(0,u.I)(C=>(0,e.jsx)("button",E({className:"mod mod-c-icon-button ca-icon-button"},C.tpl.renderDataAttributesAsObject(C))))},93791:function(fe,F,i){"use strict";i.d(F,{l:function(){return Be}});var e=i(88804),u=i(50427),f=i(35717),b=i(9715),y=i(20220),n=i(91095),w=i(83545),E=i(67957),x=i(28700),C=i(3104),v=i(93789),m=i(76743),c=i(82116),o=i(42232),l=i(79094),h=i(59717),g=i(46160),j=i(37607),$=i(52191),S=i(47956),T=i(10765),A=i(1498),B=i(78633),R=i(97622),k=i(44411),V=i(35530),K=i(56978),z=i(93937),q=i(26834),re=i(14161),ve=i(62753),Oe=i(99185),De=i(32529),Ie=i(72269),Te=i(43919),he=i(6764),se=i(82499),de=i(81348),je=i(1997),_e=i(56464),Ce=i(55694),ee=i(34241),H=i(86370),le=i(72817),ke=i(55339),Ue=i(20035),Ge=i(16328),Me=i(75947),Ve=i(88531),Ke=i(98172),at=i(27551),Tt=i(29914),Yt=i(74450),tt=i(42441),qe=i(87007),ot=i(53578),pt=i(49952),mt=i(47400),Xt=i(93688),rs=i(81498),Qt=i(17711),ls=i(18734),Ts=i(7414),As=i(26215),Qs=i(32237),bs=i(62707),qs=i(95387),ks=i(99543),ei=i(82764),an=i(4353),Na=i(61166),ys=i(33501),$t=i(35105),fn=i(59721),ka=i(56927),cn=i(92700),di=i(89543),La=i(25590),Vs=i(48755),Re=i(69372),et=i(88615),yt=i(55190),Ns=i(12980),hn=i(97838),At=i(47497),Us=i(6580),as=i(20277),Qn=i(41726),wa=i(46954),na=i(70773),Xn=i(10721),Oi=i(77765),xi=i(80072),ui=i(48326),Ka=i(85531),_o=i(24064),no=i(49874),xa=i(80745),ja=i(96303),aa=i(88206),Ls=i(5793),xn=i(31277),vo=i(7807),Ba=i(66594),kn=i(10120),Oa=i(27245),ma=i(74227),Pn=i(80788),ao=i(32209),On=i(70535),en=i(44302),ia=i(12389),ki=i(5029),io=i(64171),Is=i(81688),qn=i(14319),zn=i(54866),Ji=i(61731),vn=i(96094),hi=i(36613),oo=i(65116),Bs=i(57420),ji=i(48274),sn=i(30224),Bn=i(56792),Ga=i(28898),_n=i(73377),Hn=i(37536),Si=i(83255),Sa=i(72390),Li=i(51374),ro=i(49139),lo=i(64729),ge=i(41041),Q=i(19229),J=i(8537),we=i(41109),it=i(87751),Ds=i(60319),jn=i(58181),Cs=i(27730),Wt=i(1862),Mn=i(72917),Ha=i(63797),Ti=i(3813),Ci=i(46261),_a=i(57432),Dn=i(74123),ti=i(25196),Ta=i(64461),Ho=i(45045),$o=i(81710),Ca=i(95498),Sn=i(14217),oa=i(82604),bo=i(28978),Bi=i(94701),ar=i(77352),co=i(82796),Mi=i(27853),on=i(36530),No=i(75068),bt=i(4212),Ma=i(6808),va=i(50330),ba=i(86943),ko=i(93788),uo=i(82895),Yo=i(1493),Jo=i(98880),yo=i(52400),si=i(31663),Kn=i(70575),Yn=i(59483),Ra=i(78379),Hs=i(88102),Ps=i(72297),pi=i(88266),Ri=i(4265),ra=i(84668),ni=i(58845),wo=i(88696),Ya=i(31458),xo=i(99949),Aa=i(277),Lo=i(67096),Da=i(27959),Ys=i(93811),jo=i(70692),Bo=i(40035),Ai=i(19089),Ii=i(17290),Ui=i(83934),la=i(59021),Zo=i(55013),Zi=i(53396),Ua=i(72212),Fi=i(12386),Di=i(88433),Ja=i(52757),Vi=i(27305),mi=i(45379),Co=i(2516),Mo=i(71423),Ro=i(13479),$i=i(33690),$a=i(31180),ir=i(57399),Io=i(17685),gi=i(29405),ca=i(66431),Qi=i(79487),da=i(12923),Xi=i(3029),Qo=i(44335),Xo=i(49400),or=i(2988),Y=i(52193),Pe=i(11865),$e=i(36856),pn=i(89278),Ln=i(90426),Ia=i(20454),fi=i(28400),Ni=i(67213),ai=i(36903),ea=i(23590),_i=i(19630),Wi=i(60119),Za=i(39123),qi=i(93662),qo=i(30887),Uo=i(41761),zi=i(5771),Fo=i(47058),Eo=i(64177),Ei=i(48293);const ua={academy:{component:f.default,filled:!1},actions:{component:b.default,filled:!1},activities:{component:y.default,filled:!1},activity:{component:n.default,filled:!1},add:{component:w.default,filled:!1},"add-simple":{component:E.default,filled:!1},"add-to-collection":{component:x.default,filled:!1},adobecreativecloud:{component:C.default,filled:!1},alert:{component:v.default,filled:!1},"align-bottom":{component:m.default,filled:!1},"align-center":{component:c.default,filled:!1},"align-left":{component:o.default,filled:!1},"align-middle":{component:l.default,filled:!1},"align-right":{component:h.default,filled:!1},"align-top":{component:g.default,filled:!1},analytics:{component:j.default,filled:!1},"analytics-bar":{component:$.default,filled:!1},"angle-down":{component:S.default,filled:!1},"animals-nature":{component:T.default,filled:!1},annotations:{component:A.default,filled:!1},appearance:{component:B.default,filled:!1},approve:{component:R.default,filled:!1},archive:{component:k.default,filled:!1},arrow:{component:V.default,filled:!1},"arrow-down":{component:K.default,filled:!1},"arrow-left":{component:z.default,filled:!1},"arrow-right":{component:q.default,filled:!1},"arrow-up":{component:re.default,filled:!1},"arrow-up-and-down":{component:ve.default,filled:!1},assets:{component:Oe.default,filled:!1},attachment:{component:De.default,filled:!1},"attention-filled":{component:Ie.default,filled:!0},attributes:{component:Te.default,filled:!1},audio:{component:he.default,filled:!1},"backward-5-seconds":{component:se.default,filled:!1},bold:{component:de.default,filled:!1},bookmark:{component:je.default,filled:!1},brand:{component:_e.default,filled:!1},briefing:{component:Ce.default,filled:!1},builder:{component:ee.default,filled:!1},buildings:{component:H.default,filled:!1},button:{component:le.default,filled:!1},"button-filled":{component:le.default,filled:!0},calendar:{component:ke.default,filled:!1},callout:{component:v.default,filled:!1},campaign:{component:Ue.default,filled:!1},"campaign-activity":{component:Ge.default,filled:!1},cards:{component:Me.default,filled:!1},"caret-down":{component:S.default,filled:!1},"caret-left":{component:Ve.default,filled:!1},"caret-right":{component:Ke.default,filled:!1},"caret-up":{component:at.default,filled:!1},center:{component:Tt.default,filled:!1},check:{component:Yt.default,filled:!1},"check-filled":{component:R.default,filled:!0},circle:{component:tt.default,filled:!1},clockList:{component:qe.default,filled:!1},collapse:{component:ot.default,filled:!1},"collection-large":{component:pt.default,filled:!1},"collection-medium":{component:mt.default,filled:!1},"collection-small":{component:Xt.default,filled:!1},"color-scale":{component:rs.default,filled:!1},"color-scale-small":{component:Qt.default,filled:!1},"color-scall-tall":{component:ls.default,filled:!1},"color-swatch":{component:Ts.default,filled:!1},color:{component:As.default,filled:!1},"column-break":{component:Qs.default,filled:!1},"copy-to-clipboard":{component:bs.default,filled:!1},crop:{component:qs.default,filled:!1},"cursor-clip":{component:ks.default,filled:!1},cut:{component:ei.default,filled:!1},dedent:{component:an.default,filled:!1},"diagram-tree":{component:Na.default,filled:!1},divider:{component:ys.default,filled:!1},"do-donts-strikethrough":{component:$t.default,filled:!1},"do-donts-underline":{component:fn.default,filled:!1},document:{component:ka.default,filled:!1},"document-library":{component:cn.default,filled:!1},"dos-images":{component:di.default,filled:!1},"dos-text":{component:La.default,filled:!1},"double-chevron-right":{component:Vs.default,filled:!1},"double-chevron-left":{component:Re.default,filled:!1},download:{component:et.default,filled:!1},"download-alternative":{component:yt.default,filled:!1},drop:{component:As.default,filled:!1},duplicate:{component:Ns.default,filled:!1},"emoji-happy":{component:hn.default,filled:!1},"emoji-happy-filled":{component:hn.default,filled:!0},"emoji-neutral":{component:At.default,filled:!1},"emoji-neutral-filled":{component:At.default,filled:!0},"emoji-unhappy":{component:Us.default,filled:!1},"emoji-unhappy-filled":{component:Us.default,filled:!0},eraser:{component:as.default,filled:!1},"eraser-filled":{component:as.default,filled:!1},expand:{component:Qn.default,filled:!1},"external-asset":{component:wa.default,filled:!1},"external-link":{component:na.default,filled:!1},failed:{component:Xn.default,filled:!1},feedback:{component:Oi.default,filled:!1},"figure-text-bottom":{component:xi.default,filled:!1},"figure-text-left":{component:ui.default,filled:!1},"figure-text-right":{component:Ka.default,filled:!1},"figure-text-top":{component:_o.default,filled:!1},file:{component:no.default,filled:!1},filetype:{component:xa.default,filled:!1},"fit-to-screen":{component:Tt.default,filled:!1},flags:{component:ja.default,filled:!1},"focal-point":{component:aa.default,filled:!1},folder:{component:Ls.default,filled:!1},"folder-up":{component:xn.default,filled:!1},font:{component:vo.default,filled:!1},"font-kit":{component:Ba.default,filled:!1},"food-drink":{component:kn.default,filled:!1},"forward-5-seconds":{component:Oa.default,filled:!1},"frequently-used":{component:ma.default,filled:!1},"full-width":{component:Pn.default,filled:!1},filter:{component:ao.default,filled:!1},general:{component:On.default,filled:!1},"generic-post":{component:en.default,filled:!1},guidelines:{component:ia.default,filled:!1},h:{component:ki.default,filled:!1},header:{component:io.default,filled:!1},highlight:{component:Is.default,filled:!1},"icon-and-text":{component:qn.default,filled:!1},icons:{component:zn.default,filled:!1},iframe:{component:Ji.default,filled:!1},image:{component:vn.default,filled:!1},"image-and-text":{component:hi.default,filled:!1},"image-figure":{component:oo.default,filled:!1},"image-grid-2":{component:Bs.default,filled:!1},"image-grid-3":{component:ji.default,filled:!1},"image-grid-4":{component:sn.default,filled:!1},"image-library":{component:Bn.default,filled:!1},"image-text-ratio-25":{component:Ga.default,filled:!1},"image-text-ratio-33":{component:_n.default,filled:!1},"image-text-ratio-50":{component:Hn.default,filled:!1},"image-text-ratio-66":{component:Si.default,filled:!1},"image-text-ratio-75":{component:Sa.default,filled:!1},indent:{component:Li.default,filled:!1},indesign:{component:ro.default,filled:!1},info:{component:lo.default,filled:!1},integration:{component:ge.default,filled:!1},interactions:{component:ks.default,filled:!1},italic:{component:Q.default,filled:!1},"layout-grid":{component:J.default,filled:!1},"layout-horizontal":{component:we.default,filled:!1},"layout-vertical":{component:it.default,filled:!1},lightning:{component:Ds.default,filled:!1},"lightning-filled":{component:Ds.default,filled:!0},"line-dashes":{component:jn.default,filled:!1},"line-dotted":{component:Cs.default,filled:!1},"line-solid":{component:ys.default,filled:!1},"line-spacer":{component:Wt.default,filled:!1},link:{component:Mn.default,filled:!1},"link-alternative":{component:Mn.default,filled:!1},"link-box":{component:wa.default,filled:!1},"link-open":{component:Ha.default,filled:!1},"list-bullets":{component:Ti.default,filled:!1},"list-checklist":{component:Ci.default,filled:!1},"list-indented":{component:_a.default,filled:!1},"list-numbers":{component:Dn.default,filled:!1},lock:{component:ti.default,filled:!1},logo:{component:Ta.default,filled:!1},"logo-grid":{component:Ho.default,filled:!1},logout:{component:$o.default,filled:!1},"mark-area":{component:Ca.default,filled:!1},measurements:{component:Sn.default,filled:!1},media:{component:oa.default,filled:!1},megamenu:{component:bo.default,filled:!1},metadata:{component:lo.default,filled:!1},minus:{component:Bi.default,filled:!1},modules:{component:ar.default,filled:!1},more:{component:b.default,filled:!1},move:{component:co.default,filled:!1},"move-page":{component:Mi.default,filled:!1},none:{component:$t.default,filled:!1},notifications:{component:on.default,filled:!1},objects:{component:No.default,filled:!1},"open-lock":{component:bt.default,filled:!1},"open-lock-filled":{component:bt.default,filled:!0},orientation:{component:Ma.default,filled:!1},"pattern-library":{component:va.default,filled:!1},pause:{component:ba.default,filled:!1},pen:{component:ko.default,filled:!1},"person-lock":{component:uo.default,filled:!1},pills:{component:Yo.default,filled:!1},pin:{component:Jo.default,filled:!1},"pin-filled":{component:Jo.default,filled:!0},planning:{component:yo.default,filled:!1},play:{component:si.default,filled:!1},plus:{component:E.default,filled:!1},"point-out":{component:Kn.default,filled:!1},polygon:{component:Yn.default,filled:!1},processing:{component:Ra.default,filled:!1},projects:{component:Hs.default,filled:!1},publication:{component:Ps.default,filled:!1},question:{component:pi.default,filled:!1},quote:{component:Ri.default,filled:!1},rectangle:{component:On.default,filled:!1},refresh:{component:ra.default,filled:!1},reject:{component:ni.default,filled:!1},"reject-circle":{component:Xn.default,filled:!1},"reject-filled":{component:Xn.default,filled:!0},revert:{component:wo.default,filled:!1},revisions:{component:Ya.default,filled:!1},rocket:{component:xo.default,filled:!1},search:{component:Aa.default,filled:!1},section:{component:io.default,filled:!1},settings:{component:Lo.default,filled:!1},share:{component:Da.default,filled:!1},"sidebar-right":{component:Ys.default,filled:!1},"sidebar-right-show":{component:jo.default,filled:!1},"sidebar-right-hide-filled":{component:Bo.default,filled:!0},"single-chevron-left":{component:Ve.default,filled:!1},"single-chevron-right":{component:Ke.default,filled:!1},sketch:{component:Ai.default,filled:!1},"smileys-people":{component:Ii.default,filled:!1},snippet:{component:Ui.default,filled:!1},spinner:{component:Ra.default,filled:!1},star:{component:la.default,filled:!1},"star-filled":{component:la.default,filled:!0},storybook:{component:Zo.default,filled:!1},strikethrough:{component:Zi.default,filled:!1},submit:{component:Ua.default,filled:!1},subscript:{component:Fi.default,filled:!1},superscript:{component:Di.default,filled:!1},symbols:{component:Ja.default,filled:!1},table:{component:Vi.default,filled:!1},tag:{component:mi.default,filled:!1},target:{component:V.default,filled:!1},team:{component:Co.default,filled:!1},"team-o":{component:Co.default,filled:!1},template:{component:Mo.default,filled:!1},templates:{component:Ro.default,filled:!1},text:{component:$i.default,filled:!1},"text-align-center":{component:$a.default,filled:!1},"text-align-left":{component:$i.default,filled:!1},"text-align-right":{component:ir.default,filled:!1},"text-align-justify":{component:Io.default,filled:!1},"text-library":{component:gi.default,filled:!1},"text-multi-column":{component:ca.default,filled:!1},"text-on-image":{component:Qi.default,filled:!1},"text-snippet":{component:da.default,filled:!1},timeline:{component:Xi.default,filled:!1},transfer:{component:Qo.default,filled:!1},trash:{component:Xo.default,filled:!1},"travel-places":{component:or.default,filled:!1},triangle:{component:Y.default,filled:!1},truck:{component:Pe.default,filled:!1},twitter:{component:$e.default,filled:!1},typography:{component:pn.default,filled:!1},typostyles:{component:Ln.default,filled:!1},"ui-pattern":{component:Ji.default,filled:!1},underline:{component:fn.default,filled:!1},unknown:{component:pi.default,filled:!1},"unknown-simple":{component:Ia.default,filled:!1},upload:{component:fi.default,filled:!1},"upload-alternative":{component:Ni.default,filled:!1},"upload-do-image":{component:ai.default,filled:!1},"upload-dont-image":{component:ea.default,filled:!1},user:{component:_i.default,filled:!1},"user-o":{component:_i.default,filled:!1},video:{component:Wi.default,filled:!1},"video-and-text":{component:Za.default,filled:!1},"video-fullscreen":{component:Qn.default,filled:!1},view:{component:qi.default,filled:!1},"view-slash":{component:qo.default,filled:!1},vimeo:{component:Uo.default,filled:!1},"volume-off":{component:zi.default,filled:!1},"volume-on":{component:Fo.default,filled:!1},workflow:{component:Eo.default,filled:!1},zoom:{component:Ei.default,filled:!1}},ga={xs:e.l.Size12,sm:e.l.Size16,md:e.l.Size20,lg:e.l.Size24,xl:e.l.Size32};class Be{static get SIZE_EXTRA_SMALL(){return"xs"}static get SIZE_SMALL(){return"sm"}static get SIZE_MEDIUM(){return"md"}static get SIZE_LARGE(){return"lg"}static get SIZE_EXTRA_LARGE(){return"xl"}static get ICONS(){return[Be.ICON_ACADEMY,Be.ICON_ACTIONS,Be.ICON_ACTIVITIES,Be.ICON_ACTIVITY,Be.ICON_ADD_SIMPLE,Be.ICON_ADD_TO_COLLECTION,Be.ICON_ADD,Be.ICON_ADOBECREATIVECLOUD,Be.ICON_ALIGN_BOTTOM,Be.ICON_ALIGN_CENTER,Be.ICON_ALIGN_LEFT,Be.ICON_ALIGN_MIDDLE,Be.ICON_ALIGN_RIGHT,Be.ICON_ALIGN_TOP,Be.ICON_ANALYTICS_BAR,Be.ICON_ANALYTICS,Be.ICON_ANGLE_DOWN,Be.ICON_ANIMALS_NATURE,Be.ICON_ANNOTATIONS,Be.ICON_APPEARANCE,Be.ICON_APPROVE,Be.ICON_ARCHIVE,Be.ICON_ARROW_DOWN,Be.ICON_ARROW_LEFT,Be.ICON_ARROW_RIGHT,Be.ICON_ARROW_UP,Be.ICON_ASSETS,Be.ICON_ATTACHMENT,Be.ICON_ATTENTION_FILLED,Be.ICON_ATTRIBUTES,Be.ICON_AUDIO,Be.ICON_BACKWARD_5_SECONDS,Be.ICON_BOOKMARK,Be.ICON_BRAND,Be.ICON_BRIEFING,Be.ICON_BUILDER,Be.ICON_CALENDAR,Be.ICON_CALLOUT,Be.ICON_CAMPAIGN_ACTIVITY,Be.ICON_CAMPAIGN,Be.ICON_CARDS,Be.ICON_CARET_DOWN,Be.ICON_CARET_LEFT,Be.ICON_CARET_RIGHT,Be.ICON_CARET_UP,Be.ICON_CENTER,Be.ICON_CHECK_FILLED,Be.ICON_CHECK,Be.ICON_CIRCLE,Be.ICON_COLLAPSE,Be.ICON_COLLECTION_LARGE,Be.ICON_COLLECTION_MEDIUM,Be.ICON_COLLECTION_SMALL,Be.ICON_COLOR_SCALE_SMALL,Be.ICON_COLOR_SCALE_TALL,Be.ICON_COLOR_SCALE,Be.ICON_COLOR_SWATCH,Be.ICON_COLORS,Be.ICON_COLUMN_BREAK,Be.ICON_COPY_TO_CLIPBOARD,Be.ICON_CROP,Be.ICON_CUT,Be.ICON_DIAGRAM_TREE,Be.ICON_DIVIDER,Be.ICON_DO_DONTS_STRIKETHROUGH,Be.ICON_DO_DONTS_UNDERLINE,Be.ICON_DOCUMENT_LIBRARY,Be.ICON_DOCUMENT,Be.ICON_DOS_IMAGES,Be.ICON_DOS_TEXT,Be.ICON_DOWNLOAD_ALTERNATIVE,Be.ICON_DOWNLOAD,Be.ICON_DROPS,Be.ICON_DUPLICATE_DETECTION,Be.ICON_DUPLICATE,Be.ICON_EMOJI_HAPPY_FILLED,Be.ICON_EMOJI_HAPPY,Be.ICON_EMOJI_NEUTRAL,Be.ICON_EMOJI_UNHAPPY_FILLED,Be.ICON_EMOJI_UNHAPPY,Be.ICON_EMPJI_NEUTRAL_FILLED,Be.ICON_EXCLAMATION_TRIANGLE_OUTLINE,Be.ICON_EXPAND,Be.ICON_EXTERNAL_ASSET,Be.ICON_EXTERNAL_LINK,Be.ICON_FEEDBACK,Be.ICON_FIGURE_TEXT_BOTTOM,Be.ICON_FIGURE_TEXT_LEFT,Be.ICON_FIGURE_TEXT_RIGHT,Be.ICON_FIGURE_TEXT_TOP,Be.ICON_FILE,Be.ICON_FILETYPE,Be.ICON_FILTER,Be.ICON_FIT_TO_SCREEN,Be.ICON_FLAGS,Be.ICON_FOCAL_POINT,Be.ICON_FOLDER_UP,Be.ICON_FOLDER,Be.ICON_FONT_KIT,Be.ICON_FONT,Be.ICON_FOOD_DRINK,Be.ICON_FORWARD_5_SECONDS,Be.ICON_FREQUENTLY_USED,Be.ICON_FULLWIDTH,Be.ICON_GENERAL,Be.ICON_GENERIC_POST,Be.ICON_GUIDELINES,Be.ICON_ICONS,Be.ICON_IFRAME,Be.ICON_IMAGE_FIGURE,Be.ICON_IMAGE_GRID_2,Be.ICON_IMAGE_GRID_3,Be.ICON_IMAGE_GRID_4,Be.ICON_IMAGE_LIBRARY,Be.ICON_IMAGE_TEXT_RATIO_25,Be.ICON_IMAGE_TEXT_RATIO_50,Be.ICON_IMAGE_TEXT_RATIO_75,Be.ICON_IMAGE,Be.ICON_INDESIGN,Be.ICON_INFO,Be.ICON_INTEGRATION,Be.ICON_INTEGRATIONS,Be.ICON_INTERACTIONS,Be.ICON_LIGHTNING_FILLED,Be.ICON_LIGHTNING,Be.ICON_LINK_ALTERNATIVE,Be.ICON_LINK_BOX,Be.ICON_LINK,Be.ICON_LIST,Be.ICON_LOCK,Be.ICON_LOGO_GRID,Be.ICON_LOGO,Be.ICON_LOGOUT,Be.ICON_MARK_AREA,Be.ICON_MEASUREMENTS,Be.ICON_MEDIA,Be.ICON_MEGAMENU,Be.ICON_METADATA,Be.ICON_MODULES,Be.ICON_MORE,Be.ICON_MOVE_PAGE,Be.ICON_MOVE,Be.ICON_NOTIFICATIONS,Be.ICON_OBJECTS,Be.ICON_OPEN_LOCK_FILLED,Be.ICON_OPEN_LOCK,Be.ICON_ORIENTATION,Be.ICON_PAINT_BRUSH,Be.ICON_PATTERN_LIBRARY,Be.ICON_PAUSE,Be.ICON_PEN,Be.ICON_PERSON_LOCK,Be.ICON_PILLS,Be.ICON_PIN_FILLED,Be.ICON_PIN,Be.ICON_PLANNING,Be.ICON_PLAY,Be.ICON_PLUS,Be.ICON_POINT_OUT,Be.ICON_POLYGON,Be.ICON_PROCESSING,Be.ICON_PROJECTS,Be.ICON_PUBLICATION,Be.ICON_QUOTE,Be.ICON_RECTANGLE,Be.ICON_REFRESH,Be.ICON_REJECT_CIRCLE,Be.ICON_REJECT_FILLED,Be.ICON_REJECT,Be.ICON_REVERT,Be.ICON_REVISIONS,Be.ICON_ROCKET,Be.ICON_SEARCH,Be.ICON_SECTION,Be.ICON_SETTINGS,Be.ICON_SHARE,Be.ICON_SIDE,Be.ICON_SKETCH,Be.ICON_SMILEYS_PEOPLE,Be.ICON_SNIPPET,Be.ICON_SPINNER,Be.ICON_STAR_FILLED,Be.ICON_STAR,Be.ICON_STORYBOOK,Be.ICON_SUBMIT,Be.ICON_SYMBOLS,Be.ICON_TABLE,Be.ICON_TAG,Be.ICON_TARGET,Be.ICON_TEAM_O,Be.ICON_TEAM,Be.ICON_TEMPLATE,Be.ICON_TEMPLATES,Be.ICON_TEXT_ALIGN_CENTER,Be.ICON_TEXT_ALIGN_JUSTIFY,Be.ICON_TEXT_ALIGN_RIGHT,Be.ICON_TEXT_LIBRARY,Be.ICON_TEXT_MULTI_COLUMN,Be.ICON_TEXT,Be.ICON_TEXTSNIPPET,Be.ICON_TIMELINE,Be.ICON_TRANSFER,Be.ICON_TRASH_OPEN,Be.ICON_TRASH,Be.ICON_TRAVEL_PLACES,Be.ICON_TRIANGLE,Be.ICON_TRUCK,Be.ICON_TYPOGRAPHY,Be.ICON_TYPOSTYLES,Be.ICON_UI_PATTERN,Be.ICON_UNKNOWN_SIMPLE,Be.ICON_UNKNOWN,Be.ICON_UPLOAD_ALTERNATIVE,Be.ICON_UPLOAD_DO_IMAGES,Be.ICON_UPLOAD_DONT_IMAGES,Be.ICON_UPLOAD,Be.ICON_USER_O,Be.ICON_USER,Be.ICON_VIDEO_FULLSCREEN,Be.ICON_VIDEO,Be.ICON_VIEW_SLASH,Be.ICON_VIEW,Be.ICON_VIMEO,Be.ICON_VOLUME_OFF,Be.ICON_VOLUME_ON,Be.ICON_WORKFLOW,Be.ICON_ZOOM]}static get ICON_ACADEMY(){return"academy"}static get ICON_ACTIONS(){return"actions"}static get ICON_ACTIVITIES(){return"activities"}static get ICON_ACTIVITY(){return"activity"}static get ICON_ADD_SIMPLE(){return"add-simple"}static get ICON_ADD_TO_COLLECTION(){return"add-to-collection"}static get ICON_ADD(){return"add"}static get ICON_ADOBECREATIVECLOUD(){return"adobecreativecloud"}static get ICON_ALIGN_BOTTOM(){return"align-bottom"}static get ICON_ALIGN_CENTER(){return"align-center"}static get ICON_ALIGN_LEFT(){return"align-left"}static get ICON_ALIGN_MIDDLE(){return"align-middle"}static get ICON_ALIGN_RIGHT(){return"align-right"}static get ICON_ALIGN_TOP(){return"align-top"}static get ICON_ANALYTICS_BAR(){return"analytics-bar"}static get ICON_ANALYTICS(){return"analytics"}static get ICON_ANGLE_DOWN(){return"angle-down"}static get ICON_ANIMALS_NATURE(){return"animals-nature"}static get ICON_ANNOTATIONS(){return"annotations"}static get ICON_APPEARANCE(){return"appearance"}static get ICON_APPROVE(){return"approve"}static get ICON_ARCHIVE(){return"archive"}static get ICON_ARROW_DOWN(){return"arrow-down"}static get ICON_ARROW_LEFT(){return"arrow-left"}static get ICON_ARROW_RIGHT(){return"arrow-right"}static get ICON_ARROW_UP(){return"arrow-up"}static get ICON_ASSETS(){return"assets"}static get ICON_ATTACHMENT(){return"attachment"}static get ICON_ATTENTION_FILLED(){return"attention-filled"}static get ICON_ATTRIBUTES(){return"attributes"}static get ICON_AUDIO(){return"audio"}static get ICON_BACKWARD_5_SECONDS(){return"backward-5-seconds"}static get ICON_BOOKMARK(){return"bookmark"}static get ICON_BRAND(){return"brand"}static get ICON_BRIEFING(){return"briefing"}static get ICON_BUILDER(){return"builder"}static get ICON_CALENDAR(){return"calendar"}static get ICON_CALLOUT(){return"callout"}static get ICON_CAMPAIGN_ACTIVITY(){return"campaign-activity"}static get ICON_CAMPAIGN(){return"campaign"}static get ICON_CARDS(){return"cards"}static get ICON_CARET_DOWN(){return"caret-down"}static get ICON_CARET_LEFT(){return"caret-left"}static get ICON_CARET_RIGHT(){return"caret-right"}static get ICON_CARET_UP(){return"caret-up"}static get ICON_CENTER(){return"center"}static get ICON_CHECK_FILLED(){return"check-filled"}static get ICON_CHECK(){return"check"}static get ICON_CIRCLE(){return"circle"}static get ICON_COLLAPSE(){return"collapse"}static get ICON_COLLECTION_LARGE(){return"collection-large"}static get ICON_COLLECTION_MEDIUM(){return"collection-medium"}static get ICON_COLLECTION_SMALL(){return"collection-small"}static get ICON_COLOR_SCALE_SMALL(){return"color-scale-small"}static get ICON_COLOR_SCALE_TALL(){return"color-scale-tall"}static get ICON_COLOR_SCALE(){return"color-scale"}static get ICON_COLOR_SWATCH(){return"color-swatch"}static get ICON_COLORS(){return"colors"}static get ICON_COLUMN_BREAK(){return"column-break"}static get ICON_COPY_TO_CLIPBOARD(){return"copy-to-clipboard"}static get ICON_CROP(){return"crop"}static get ICON_CUT(){return"cut"}static get ICON_DIAGRAM_TREE(){return"diagram-tree"}static get ICON_DIVIDER(){return"divider"}static get ICON_DO_DONTS_STRIKETHROUGH(){return"do-donts-strikethrough"}static get ICON_DO_DONTS_UNDERLINE(){return"do-donts-underline"}static get ICON_DOCUMENT_LIBRARY(){return"document-library"}static get ICON_DOCUMENT(){return"document"}static get ICON_DOS_IMAGES(){return"dos-images"}static get ICON_DOS_TEXT(){return"dos-text"}static get ICON_DOWNLOAD_ALTERNATIVE(){return"download-alternative"}static get ICON_DOWNLOAD(){return"download"}static get ICON_DROPS(){return"drops"}static get ICON_DUPLICATE_DETECTION(){return"duplicate-detection"}static get ICON_DUPLICATE(){return"duplicate"}static get ICON_EMOJI_HAPPY_FILLED(){return"emoji-happy-filled"}static get ICON_EMOJI_HAPPY(){return"emoji-happy"}static get ICON_EMOJI_NEUTRAL(){return"emoji-neutral"}static get ICON_EMOJI_UNHAPPY_FILLED(){return"emoji-unhappy-filled"}static get ICON_EMOJI_UNHAPPY(){return"emoji-unhappy"}static get ICON_EMPJI_NEUTRAL_FILLED(){return"empji-neutral-filled"}static get ICON_EXCLAMATION_TRIANGLE_OUTLINE(){return"exclamation-triangle-outline"}static get ICON_EXPAND(){return"expand"}static get ICON_EXTERNAL_ASSET(){return"external-asset"}static get ICON_EXTERNAL_LINK(){return"external-link"}static get ICON_FEEDBACK(){return"feedback"}static get ICON_FIGURE_TEXT_BOTTOM(){return"figure-text-bottom"}static get ICON_FIGURE_TEXT_LEFT(){return"figure-text-left"}static get ICON_FIGURE_TEXT_RIGHT(){return"figure-text-right"}static get ICON_FIGURE_TEXT_TOP(){return"figure-text-top"}static get ICON_FILE(){return"file"}static get ICON_FILETYPE(){return"filetype"}static get ICON_FILTER(){return"filter"}static get ICON_FIT_TO_SCREEN(){return"fit-to-screen"}static get ICON_FLAGS(){return"flags"}static get ICON_FOCAL_POINT(){return"focal-point"}static get ICON_FOLDER_UP(){return"folder-up"}static get ICON_FOLDER(){return"folder"}static get ICON_FONT_KIT(){return"font-kit"}static get ICON_FONT(){return"font"}static get ICON_FOOD_DRINK(){return"food-drink"}static get ICON_FORWARD_5_SECONDS(){return"forward-5-seconds"}static get ICON_FREQUENTLY_USED(){return"frequently-used"}static get ICON_FULLWIDTH(){return"fullwidth"}static get ICON_GENERAL(){return"general"}static get ICON_GENERIC_POST(){return"generic-post"}static get ICON_GUIDELINES(){return"guidelines"}static get ICON_ICONS(){return"icons"}static get ICON_IFRAME(){return"iframe"}static get ICON_IMAGE_FIGURE(){return"image-figure"}static get ICON_IMAGE_GRID_2(){return"image-grid-2"}static get ICON_IMAGE_GRID_3(){return"image-grid-3"}static get ICON_IMAGE_GRID_4(){return"image-grid-4"}static get ICON_IMAGE_LIBRARY(){return"image-library"}static get ICON_IMAGE_TEXT_RATIO_25(){return"image-text-ratio-25"}static get ICON_IMAGE_TEXT_RATIO_50(){return"image-text-ratio-50"}static get ICON_IMAGE_TEXT_RATIO_75(){return"image-text-ratio-75"}static get ICON_IMAGE(){return"image"}static get ICON_INDESIGN(){return"indesign"}static get ICON_INFO(){return"info"}static get ICON_INTEGRATION(){return"integration"}static get ICON_INTEGRATIONS(){return"integrations"}static get ICON_INTERACTIONS(){return"interactions"}static get ICON_LIGHTNING_FILLED(){return"lightning-filled"}static get ICON_LIGHTNING(){return"lightning"}static get ICON_LINK_ALTERNATIVE(){return"link-alternative"}static get ICON_LINK_BOX(){return"link-box"}static get ICON_LINK(){return"link"}static get ICON_LIST(){return"list"}static get ICON_LOCK(){return"lock"}static get ICON_LOGO_GRID(){return"logo-grid"}static get ICON_LOGO(){return"logo"}static get ICON_LOGOUT(){return"logout"}static get ICON_MARK_AREA(){return"mark-area"}static get ICON_MEASUREMENTS(){return"measurements"}static get ICON_MEDIA(){return"media"}static get ICON_MEGAMENU(){return"megamenu"}static get ICON_METADATA(){return"metadata"}static get ICON_MODULES(){return"modules"}static get ICON_MORE(){return"more"}static get ICON_MOVE_PAGE(){return"move-page"}static get ICON_MOVE(){return"move"}static get ICON_NOTIFICATIONS(){return"notifications"}static get ICON_OBJECTS(){return"objects"}static get ICON_OPEN_LOCK_FILLED(){return"open-lock-filled"}static get ICON_OPEN_LOCK(){return"open-lock"}static get ICON_ORIENTATION(){return"orientation"}static get ICON_PAINT_BRUSH(){return"paint-brush"}static get ICON_PATTERN_LIBRARY(){return"pattern-library"}static get ICON_PAUSE(){return"pause"}static get ICON_PEN(){return"pen"}static get ICON_PERSON_LOCK(){return"person-lock"}static get ICON_PILLS(){return"pills"}static get ICON_PIN_FILLED(){return"pin-filled"}static get ICON_PIN(){return"pin"}static get ICON_PLANNING(){return"planning"}static get ICON_PLAY(){return"play"}static get ICON_PLUS(){return"plus"}static get ICON_POINT_OUT(){return"point-out"}static get ICON_POLYGON(){return"polygon"}static get ICON_PROCESSING(){return"processing"}static get ICON_PROJECTS(){return"projects"}static get ICON_PUBLICATION(){return"publication"}static get ICON_QUOTE(){return"quote"}static get ICON_RECTANGLE(){return"rectangle"}static get ICON_REFRESH(){return"refresh"}static get ICON_REJECT_CIRCLE(){return"reject-circle"}static get ICON_REJECT_FILLED(){return"reject-filled"}static get ICON_REJECT(){return"reject"}static get ICON_REVERT(){return"revert"}static get ICON_REVISIONS(){return"revisions"}static get ICON_ROCKET(){return"rocket"}static get ICON_SEARCH(){return"search"}static get ICON_SECTION(){return"section"}static get ICON_SETTINGS(){return"settings"}static get ICON_SHARE(){return"share"}static get ICON_SIDE(){return"side"}static get ICON_SKETCH(){return"sketch"}static get ICON_SMILEYS_PEOPLE(){return"smileys-people"}static get ICON_SNIPPET(){return"snippet"}static get ICON_SPINNER(){return"spinner"}static get ICON_STAR_FILLED(){return"star-filled"}static get ICON_STAR(){return"star"}static get ICON_STORYBOOK(){return"storybook"}static get ICON_SUBMIT(){return"submit"}static get ICON_SYMBOLS(){return"symbols"}static get ICON_TABLE(){return"table"}static get ICON_TAG(){return"tag"}static get ICON_TARGET(){return"target"}static get ICON_TEAM_O(){return"team-o"}static get ICON_TEAM(){return"team"}static get ICON_TEMPLATE(){return"template"}static get ICON_TEMPLATES(){return"templates"}static get ICON_TEXT_ALIGN_CENTER(){return"text-align-center"}static get ICON_TEXT_ALIGN_JUSTIFY(){return"text-align-justify"}static get ICON_TEXT_ALIGN_RIGHT(){return"text-align-right"}static get ICON_TEXT_LIBRARY(){return"text-library"}static get ICON_TEXT_MULTI_COLUMN(){return"text-multi-column"}static get ICON_TEXT(){return"text"}static get ICON_TEXTSNIPPET(){return"textsnippet"}static get ICON_TIMELINE(){return"timeline"}static get ICON_TRANSFER(){return"transfer"}static get ICON_TRASH_OPEN(){return"trash-open"}static get ICON_TRASH(){return"trash"}static get ICON_TRAVEL_PLACES(){return"travel-places"}static get ICON_TRIANGLE(){return"triangle"}static get ICON_TRUCK(){return"truck"}static get ICON_TYPOGRAPHY(){return"typography"}static get ICON_TYPOSTYLES(){return"typostyles"}static get ICON_UI_PATTERN(){return"ui-pattern"}static get ICON_UNKNOWN_SIMPLE(){return"unknown-simple"}static get ICON_UNKNOWN(){return"unknown"}static get ICON_UPLOAD_ALTERNATIVE(){return"upload-alternative"}static get ICON_UPLOAD_DO_IMAGES(){return"upload-do-images"}static get ICON_UPLOAD_DONT_IMAGES(){return"upload-dont-images"}static get ICON_UPLOAD(){return"upload"}static get ICON_USER_O(){return"user-o"}static get ICON_USER(){return"user"}static get ICON_VIDEO_FULLSCREEN(){return"video-fullscreen"}static get ICON_VIDEO(){return"video"}static get ICON_VIEW_SLASH(){return"view-slash"}static get ICON_VIEW(){return"view"}static get ICON_VIMEO(){return"vimeo"}static get ICON_VOLUME_OFF(){return"volume-off"}static get ICON_VOLUME_ON(){return"volume-on"}static get ICON_WORKFLOW(){return"workflow"}static get ICON_ZOOM(){return"zoom"}static renderIconComponent(Ea,Vo){try{const Ki=ua[Ea]?ua[Ea].component:ua.icons.component;return(0,u.EY)(Ki,{size:Vo?ga[Vo]:ga.md,filled:ua[Ea]&&ua[Ea].filled?ua[Ea].filled.toString():void 0})}catch(Ki){return console.error(Ki),""}}}},78149:function(fe,F,i){"use strict";i.d(F,{V:function(){return y}});var e=i(86070),u=i(95376),f=i(14154),b=i(93791);const y=(0,f.I)(n=>{const w={icon:{type:String,value:n.icon},size:{type:String,value:n.size,allowed:[b.l.SIZE_EXTRA_SMALL,b.l.SIZE_SMALL,b.l.SIZE_MEDIUM,b.l.SIZE_LARGE,b.l.SIZE_EXTRA_LARGE],default:b.l.SIZE_SMALL},classes:{type:String,value:n.classes}},{icon:E,size:x,classes:C}=n.utils.data.validateParameters(w);return(0,e.jsx)("span",{"data-test-id":`icon-${E}`,className:`ca-icon ca-icon--${x} ${C||""}`,children:(0,u.Ay)(b.l.renderIconComponent(E,x))})})},11920:function(fe,F,i){"use strict";i.d(F,{t:function(){return b}});var e=i(18216),u=i(12882),f=i(5181);class b extends e.j{static get PIXEL_DENSITY_1(){return 1}static get PIXEL_DENSITY_2(){return 2}static get ALIGNMENT_CENTER(){return"center"}static get ALIGNMENT_LEFT(){return"left"}static get ALIGNMENT_RIGHT(){return"right"}on(n){this.bindAttributes(),this.updateAlignment(),this.updateRoundedCorners(),this.startInitialSrcUpdate(),this.registerResizeHandler(),this.loadedWidth=null,this.hasFallbackWith=!1,n()}stop(){this.unregisterResizeHandler()}startInitialSrcUpdate(){const n=this.$ctx.get(0);if(!n)throw new Error("Element not found.");n.onload=()=>{n.onload=null,this.updateSrc()},this.$ctx.on("error",()=>{this.updateSrc()})}bindAttributes(){this.tpl.bindDataAttributes(this,{originalWidth:{type:Number},originalHeight:{type:Number},pixelDensity:{type:Number,changed:()=>this.updatePixelDensity()},allowShrinkingToIncreaseDensity:{type:Boolean,default:!0},allowReloadingSmallerImages:{type:Boolean,default:!1},previewUrl:{type:String},alignment:{type:String,changed:()=>this.updateAlignment()},roundedCorners:{type:Boolean},forceSrcUpdate:{type:Number,changed:()=>this.updateSrc()}})}updatePixelDensity(){this.hasFallbackWith===!0&&(this.originalWidth=null),this.updateSrc()}updateSrc(){this.originalWidth||(this.hasFallbackWith=!0,this.originalWidth=798*this.pixelDensity),this.isFileTypeImage(this.previewUrl)?this.$ctx.css("width",""):this.allowShrinkingToIncreaseDensity&&this.$ctx.css("width",this.originalWidth/this.pixelDensity);const E=Math.round(this.$ctx.width())*this.pixelDensity;if(this.loadedWidth===E||this.allowReloadingSmallerImages===!1&&this.loadedWidth>E)return;const x=this.getSrcUrlByWidth(this.previewUrl,E);this.$ctx.attr("data-src",x),this.loadedWidth=E,this.$ctx.hasClass("lazyloaded")&&this.$ctx.addClass("lazyload--no-transition"),this.$ctx.removeClass("lazyloaded"),this.$ctx.addClass("lazyload")}isFileTypeImage(n){return!!n.match(/file-.*\.svg/)}getSrcUrlByWidth(n,w){if(!w)return n;const E=n.split("?");let x={};E.length>1&&(x=(0,u.j)(E[1])),x.width=w;const C=decodeURI(f.param(x));return`${E[0]}?${C}`}updateAlignment(){this.$ctx.toggleClass("c-image--alignement-left",this.alignment===b.ALIGNMENT_LEFT),this.$ctx.toggleClass("c-image--alignement-center",this.alignment===b.ALIGNMENT_CENTER),this.$ctx.toggleClass("c-image--alignement-right",this.alignment===b.ALIGNMENT_RIGHT)}updateRoundedCorners(){this.$ctx.toggleClass("c-image--rounded-corners",this.roundedCorners)}registerResizeHandler(){f(window).on("resize.cimage",f.debounce(1e3,()=>{this.updateSrc()}))}unregisterResizeHandler(){f(window).off("resize.cimage")}}},4957:function(fe,F,i){"use strict";i.d(F,{T:function(){return f}});var e=i(86070),u=i(14154);const f=(0,u.I)(b=>(0,e.jsxs)("div",{className:`ca-loader ${b.classes||""}`,children:[(0,e.jsx)("img",{className:"ca-loader__spinner",src:"/img/nook-animated.png",alt:window.translate("Legacy_loader_alt_text")}),b.text?(0,e.jsx)("div",{className:"ca-loader__text",children:b.text}):null]}))},8609:function(fe,F,i){"use strict";i.d(F,{$:function(){return m}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.defineProperties,y=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,x=(c,o,l)=>o in c?f(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,C=(c,o)=>{for(var l in o||(o={}))w.call(o,l)&&x(c,l,o[l]);if(n)for(var l of n(o))E.call(o,l)&&x(c,l,o[l]);return c},v=(c,o)=>b(c,y(o));const m=(0,u.I)(c=>(0,e.jsxs)("div",v(C({className:"mod mod-progress a-progress"},c.id?{"data-a-progress-id":c.id}:{}),{children:[(0,e.jsxs)("svg",{viewBox:"0 0 32 32",children:[(0,e.jsx)("circle",{className:"a-progress__progress js-a-progress__progress",r:"16",cx:"16",cy:"16"}),(0,e.jsx)("circle",{className:"a-progress__inner",r:"14",cx:"16",cy:"16"})]}),(0,e.jsx)("span",{className:"a-progress__text js-a-progress__text",children:"000"})]})))},19204:function(fe,F,i){"use strict";i.d(F,{c:function(){return C}});var e=i(86070),u=i(14154);const f=(0,u.I)(v=>(0,e.jsx)("div",{className:`cm-block-text__placeholder js-cm-block-text__placeholder ${v.show?"":"cm-block-text__placeholder--hidden"}`,children:v.placeholderText}));var b=i(95376);const y=(0,u.I)(v=>(0,e.jsx)("div",{className:`cm-block-text__text js-cm-block-text__text ${v.isEditing?"cm-block-text__text--is-editing":""}`,children:(0,b.Ay)(v.text)}));var n=i(50427),w=i(18216),E=i(23847),x=i(5181);class C extends w.j{static get BLACKLIST_SELECTORS(){return["img","table",'[style*="background"]','[style*="background-color"]','[style*="display"]','[style*="font-family"]','[style*="font-weight"]','[style*="line-height"]','[style*="text-decoration"]']}static get EDITOR_PLACEHOLDER_TEXT(){return"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."}static get HORIZONTAL_ALIGNMENT_LEFT(){return"left"}static get HORIZONTAL_ALIGNMENT_MIDDLE(){return"middle"}static get HORIZONTAL_ALIGNMENT_RIGHT(){return"right"}static get HORIZONTAL_ALIGNMENTS(){return[C.HORIZONTAL_ALIGNMENT_LEFT,C.HORIZONTAL_ALIGNMENT_MIDDLE,C.HORIZONTAL_ALIGNMENT_RIGHT]}on(m){this.tpl.bindDataAttributes(this,{text:{type:String,changed:()=>this.updateText()},themeStyleguideId:{type:Number},portalId:{type:Number},isReferenced:{type:Boolean},isEditing:{type:Boolean,changed:()=>this.updateIsEditing()},settingPadding:{type:Object,changed:()=>this.updateSettingPadding()},settingWidth:{type:String,changed:()=>this.updateSettingWidth()},settingHeight:{type:String,changed:()=>this.updateSettingHeight()},settingHorizontalAlignment:{type:String,changed:c=>this.updateSettingHorizontalAlignment(c)},settingBackgroundColor:{type:String,changed:()=>this.updateSettingBackgroundColor()},mainFontFamily:{type:String}}),this.editor=null,this.$box=this.$ctx.find(".js-cm-block-text__box"),this.updateSettingPadding(),this.updateSettingWidth(),this.updateSettingHeight(),this.updateSettingHorizontalAlignment(),this.updateSettingBackgroundColor(),this.updateMainFontFamily(),this.renderText(),this.renderPlaceholder(),this.bindEditor(),this.updateText(),m()}renderText(){const m=(0,n.EY)(y,{text:this.text,isEditing:this.isEditing});this.tpl.addOrReplaceAndActivate(this.$box,".js-cm-block-text__text",m)}renderPlaceholder(){const m=x((0,n.EY)(f,{placeholderText:C.EDITOR_PLACEHOLDER_TEXT,show:!1}));this.$box.append(m),window.application.sandbox.addModules(m)}bindEditor(){const m=this.$box.find(".js-cm-block-text__text");if(this.isReferenced){m.addClass("co-editor co-editor--default");return}this.editor&&this.editor.destroy(),this.editor=new E.j(m,this.sandbox,{set:"blockText",removeExtraneous:!1,placeholder:C.EDITOR_PLACEHOLDER_TEXT,portalId:this.portalId,project:this.themeStyleguideId,saveDelay:500,toolbar:{ordered_list:!0,bullet_list:!0}}),this.editor.saved=c=>this.saveBlock(c)}saveBlock(m){this.tpl.fireCustomEvent(this.$box,"blockTextSaved",{text:m})}updateText(){this.updateTextText(),this.updatePlaceholder()}updateIsEditing(){this.isReferenced||(this.updateTextText(),this.updatePlaceholder())}updateTextText(){const m=this.$box.find(".js-cm-block-text__text"),c="cm-block-text__text--is-editing",o="cm-block-text__text--hidden",l="block-empty";this.isPlaceholderShown()?m.addClass(o):m.removeClass(o),m.text().length===0?m.addClass(l):m.removeClass(l),this.isEditing?(m.addClass(c),this.editor.enable()):(m.removeClass(c),this.editor.disable())}updatePlaceholder(){const m=this.isPlaceholderShown(),c=this.$box.find(".js-cm-block-text__placeholder"),o="cm-block-text__placeholder--hidden";m?c.removeClass(o):c.addClass(o)}updateSettingPadding(){this.$box.css("padding",this.getPadding())}updateSettingWidth(){this.$box.css("flex",this.getWidth())}updateSettingHeight(){this.$box.css("min-height",this.getHeight())}updateMainFontFamily(){this.$box.css("font-family",this.mainFontFamily)}updateSettingHorizontalAlignment({previousValue:m=null}={}){if(m){const c=this.getHorizontalAlignmentClass(m);this.$ctx.removeClass(c)}this.$ctx.addClass(this.getHorizontalAlignmentClass(this.settingHorizontalAlignment))}updateSettingBackgroundColor(){this.$box.css("background-color",this.getBackgroundColor())}getPadding(){const{top:m,right:c,bottom:o,left:l}=this.settingPadding;return`${this.tpl.unit(m)} ${this.tpl.unit(c)} ${this.tpl.unit(o)} ${this.tpl.unit(l)}`}getWidth(){const m=this.tpl.unit(this.settingWidth);let c=this.tpl.unit(this.settingPadding.left),o=this.tpl.unit(this.settingPadding.right);return m==="auto"||m===0?"1 1 auto":(c===0&&(c="0px"),o===0&&(o="0px"),`0 1 calc(${m} - ${c} - ${o})`)}getHeight(){const m=this.tpl.unit(this.settingHeight);let c=this.tpl.unit(this.settingPadding.top),o=this.tpl.unit(this.settingPadding.bottom);return m==="auto"||m===0?"auto":(c===0&&(c="0px"),o===0&&(o="0px"),`calc(${m} - ${c} - ${o})`)}getHorizontalAlignmentClass(m){switch(m){case C.HORIZONTAL_ALIGNMENT_MIDDLE:return"cm-block-text--horizontal-alignment-middle";case C.HORIZONTAL_ALIGNMENT_RIGHT:return"cm-block-text--horizontal-alignment-right";case C.HORIZONTAL_ALIGNMENT_LEFT:default:return"cm-block-text--horizontal-alignment-left"}}getBackgroundColor(){return this.settingBackgroundColor}isPlaceholderShown(){return this.isEditing?!1:this.$box.find(".js-cm-block-text__text").text().length===0}}},74688:function(fe,F,i){"use strict";i.d(F,{i:function(){return j}});var e=i(4957),u=i(76746),f=i(96840),b=i(14860),y=i(25100),n=i(5188),w=i(95878),E=i(50427),x=i(18216),C=i(39232),v=i(64698),m=i(86070),c=i(27833),o=i(14154);const l=(0,o.I)(()=>(0,m.jsx)("div",{className:"co-settings--overlay",children:(0,m.jsx)("fieldset",{className:"co-settings__fieldset--notitle",children:(0,m.jsx)(c.H,{id:"delete_block",label:"Delete Block",description:window.translate("Legacy_confirmation_delete")})})})),h=(0,o.I)(()=>(0,m.jsx)("div",{className:"co-settings--overlay",children:(0,m.jsx)("fieldset",{className:"co-settings__fieldset--notitle",children:(0,m.jsx)(c.H,{id:"delete_section",label:"Delete Section",description:"Are you sure"})})}));var g=i(5181);class j extends x.j{static get ESCAPE_KEY_CODE(){return 27}constructor(S,T,A){super(S,T,"blockmanager"),this.sandbox.subscribe("events",this),this.config=g.extend(!0,{emptyBlockTemplate:null,cutBlockTemplate:null,copyBlockTemplate:null,cutSectionTemplate:null},A),this.$cutBlock=null,this.$copyBlock=null,this.$cutSection=null,this.$ctx.addClass("cm-blockmanager"),S.on("click",".js-cm-blockmanager__block-delete",B=>{const k=g(B.currentTarget).closest(".js-cm-blockmanager__block");this._deleteBlock(k)}),S.on("click",".js-cm-blockmanager__block-cut",B=>{const k=g(B.currentTarget).closest(".js-cm-blockmanager__block");this._cutBlock(k)}),S.on("click",".js-cm-blockmanager__cut-insert",B=>{const k=g(B.currentTarget).closest(".js-cm-blockmanager__block");this._insertCutBlock(k)}),S.on("click",".js-cm-blockmanager__block-copy",B=>{const k=g(B.currentTarget).closest(".js-cm-blockmanager__block");this._copyBlock(k)}),S.on("click",".js-cm-blockmanager__copy-insert",B=>{const k=g(B.currentTarget).closest(".js-cm-blockmanager__block");this._insertCopyBlock(k)}),S.on("click",".js-cm-blockmanager__section-delete",B=>{const k=g(B.currentTarget).closest(".js-cm-blockmanager__section");this._deleteSection(k)}),S.on("click",".js-cm-blockmanager__section-cut",B=>{const k=g(B.currentTarget).closest(".js-cm-blockmanager__section");this._cutSection(k)}),S.on("click",".js-cm-blockmanager__section-cut-insert",B=>{const k=g(B.currentTarget).closest(".js-cm-blockmanager__section");this._insertSection(k)})}_settingsBlock(S){const T=this.sandbox.getModuleById(S.data("terrificId")),A=S.find(".js-cm-blockmanager__block-settings-container"),B=g((0,E.EY)(v.I,{menu_content:(0,E.EY)(e.T),show_close_btn:!0}));this.tpl.addAndActivate(A,B);const R=A.find(".js-cm-btn-dropdown__content");typeof T.settings=="function"&&T.settings(R)}_cutBlock(S){this.$cutBlock||(this.$ctx.addClass("state-cut-block"),S.velocity({opacity:.2}),S.css({pointerEvents:"none"}),this.$cutBlock=S,this.config.cutBlockTemplate&&this.$ctx.find(".js-cm-blockmanager__block").each((A,B)=>{const R=g(B);R.is(S)||R.append(g((0,E.EY)(this.config.cutBlockTemplate)))}),g(window).on("keyup.blockmanager",T=>{T.which===j.ESCAPE_KEY_CODE&&this._resetBlocks()}))}_copyBlock(S){this.$copyBlock||(this.$ctx.addClass("state-copy-block"),S.velocity({opacity:.2}),S.css({pointerEvents:"none"}),this.$copyBlock=S,this.config.copyBlockTemplate&&this.$ctx.find(".js-cm-blockmanager__block").each((A,B)=>{const R=g(B);R.is(S)||R.append(g((0,E.EY)(this.config.copyBlockTemplate)))}),g(window).on("keyup.blockmanager",T=>{T.which===j.ESCAPE_KEY_CODE&&this._resetBlocks()}))}_insertCutBlock(S){if(this.$cutBlock){const T=this.$cutBlock.closest(".js-po-brandportal__col"),A=this.$cutBlock.data(),B=S.data();S.replaceWith(this.$cutBlock),this._resetBlocks(),this.data.put(`/api/hub/teaser/${B.block}?invocation_source=49`,{source:A.block}).then(R=>{if(this.config.emptyBlockTemplate){const k=g((0,E.EY)(this.config.emptyBlockTemplate,R));T.append(k),this.sandbox.addModules(k),this.fire("blockInserted")}})}}_insertCopyBlock(S){if(this.$copyBlock){const T=this.$copyBlock.data(),A=S.data();this.data.get(`/api/hub/teaser/${T.block}?invocation_source=50`).then(B=>{this.data.post(`/api/hub/teaser/${A.block}?invocation_source=51`,B.teaser).then(R=>{const V=(z=>{switch(z.toLocaleLowerCase()){case"divider":return u.O;case"iframe":return f.f;case"media":return b.T;case"none":return y.B;case"textimage":return n.J;case"video":return w.O;default:return null}})(T.type);if(!V)return;const K=g((0,E.EY)(V,R));S.replaceWith(K),this.sandbox.addModules(K),this.fire("blockInserted"),this._resetBlocks()})})}}_resetBlocks(){this.$cutBlock&&(this.$ctx.removeClass("state-cut-block"),this.$cutBlock.velocity({opacity:1}),this.$cutBlock.css({pointerEvents:"auto"}),this.$ctx.find(".js-cm-blockmanager__cut").remove(),this.$cutBlock=null),this.$copyBlock&&(this.$ctx.removeClass("state-copy-block"),this.$copyBlock.velocity({opacity:1}),this.$copyBlock.css({pointerEvents:"auto"}),this.$ctx.find(".js-cm-blockmanager__copy").remove(),this.$copyBlock=null),g(window).off("keyup.blockmanager")}_deleteBlock(S){const T=S.find(".js-cm-blockmanager__block-delete-container"),A=g((0,E.EY)(l));T.html(A);const R=new C.D(A,this.sandbox).getSetting("delete_block");R.focus(),R.deleted=async()=>{typeof this.deleteBlock=="function"&&await this.deleteBlock(S)},R.cancelled=()=>{this.fire("closeDropdown",T,["events"])}}_settingsSection(S){const T=S.find(".js-cm-blockmanager__section-settings-container"),A=g((0,E.EY)(v.I,{menu_content:(0,E.EY)(e.T),show_close_btn:!0}));this.tpl.addAndActivate(T,A);let B=null;if(S.data("id")&&(B=parseInt(S.data("id"))),typeof this.sectionSettings=="function"){const R=T.find(".js-cm-btn-dropdown__content");this.sectionSettings(R,B)}}_cutSection(S){this.$cutSection||(this.$ctx.addClass("state-cut-section"),S.velocity({opacity:.2}),S.css({pointerEvents:"none"}),this.$cutSection=S,this.config.cutSectionTemplate&&this.$ctx.find(".js-cm-blockmanager__section").each((A,B)=>{const R=g(B);R.is(S)||R.append((0,E.EY)(this.config.cutSectionTemplate))}),g(window).on("keyup.blockmanager",T=>{T.which===j.ESCAPE_KEY_CODE&&this._resetSections()}))}_insertSection(S){if(this.$cutSection){const T=this.$cutSection.data("row"),A=S.data("row");S.after(this.$cutSection),this._resetSections(),this.fire("sectionInserted"),this.data.put(`/api/hub/grid/${A}`,{hub_id:g(".document").data("hub"),source:T})}}_resetSections(){this.$ctx.removeClass("state-cut-section"),this.$cutSection&&(this.$cutSection.velocity({opacity:1}),this.$cutSection.css({pointerEvents:"auto"})),this.$ctx.find(".js-cm-blockmanager__cut").remove(),this.$cutSection=null,g(window).off("keyup.blockmanager")}_deleteSection(S){const T=S.find(".js-cm-blockmanager__section-delete-container"),A=g((0,E.EY)(h));T.html(A);const R=new C.D(A,this.sandbox).getSetting("delete_section");R.focus(),R.deleted=async()=>{typeof this.deleteSection=="function"&&await this.deleteSection(S)},R.cancelled=()=>{this.fire("closeDropdown",T,["events"])}}onBlockSettingsOpened(S){const A=S.$toggle.closest(".js-cm-blockmanager__block");A.addClass("state-settings-open"),this._settingsBlock(A)}onBlockSettingsClosed(S){S.$toggle.closest(".js-cm-blockmanager__block").removeClass("state-settings-open")}onSectionSettingsOpened(S){const A=S.$toggle.closest(".js-cm-blockmanager__section");A.addClass("state-settings-open"),this._settingsSection(A)}onSectionSettingsClosed(S){S.$toggle.closest(".js-cm-blockmanager__section").removeClass("state-settings-open")}onSectionDeleteMenuOpened(S){S.$toggle.closest(".js-cm-blockmanager__section").addClass("state-delete-menu-open")}onSectionDeleteMenuClosed(S){S.$toggle.closest(".js-cm-blockmanager__section").removeClass("state-delete-menu-open")}onResetBlocksAndSections(){this._resetBlocks(),this._resetSections()}}},21348:function(fe,F,i){"use strict";i.d(F,{f:function(){return b}});var e=i(86070),u=i(78149),f=i(14154);const b=(0,f.I)(y=>(0,e.jsxs)("div",{className:"cm-blockmanager__toolbar",children:[!y.translation||y.type==="TEXTIMAGE"||y.type==="VIDEO"||y.type==="MEDIA"||y.type==="IFRAME"?(0,e.jsxs)("div",{className:"cm-btn-dropdown",children:[(0,e.jsx)("button",{className:"cm-blockmanager__toolbar-btn js-cm-btn-dropdown__toggle","data-event":"blockSettings",title:window.translate("Legacy_blockmanager_toolbar_settings"),"aria-label":window.translate("Legacy_blockmanager_toolbar_settings"),children:(0,e.jsx)(u.V,{icon:"settings"})}),(0,e.jsx)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--below cm-btn-dropdown__menu--fixed-width cm-btn-dropdown__menu--right js-cm-btn-dropdown__menu js-cm-blockmanager__block-settings-container"})]}):null,!y.translation&&y.utils.account.hasPermission("edit")?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("button",{className:"cm-blockmanager__toolbar-btn js-cm-blockmanager__block-copy",title:window.translate("Legacy_blockmanager_toolbar_copy"),"aria-label":window.translate("Legacy_blockmanager_toolbar_copy"),children:(0,e.jsx)(u.V,{icon:"duplicate"})}),(0,e.jsx)("button",{className:"cm-blockmanager__toolbar-btn js-cm-blockmanager__block-cut",title:window.translate("Legacy_blockmanager_toolbar_cut"),"aria-label":window.translate("Legacy_blockmanager_toolbar_cut"),children:(0,e.jsx)(u.V,{icon:"cut"})}),(0,e.jsxs)("div",{className:"cm-btn-dropdown",children:[(0,e.jsx)("button",{className:"cm-blockmanager__toolbar-btn js-cm-blockmanager__block-delete js-cm-btn-dropdown__toggle",title:window.translate("Legacy_blockmanager_toolbar_delete"),"aria-label":window.translate("Legacy_blockmanager_toolbar_delete"),children:(0,e.jsx)(u.V,{icon:"trash"})}),(0,e.jsx)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--below cm-btn-dropdown__menu--right js-cm-btn-dropdown__menu js-cm-blockmanager__block-delete-container"})]})]}):null]}))},57266:function(fe,F,i){"use strict";i.d(F,{m:function(){return c}});var e=i(86070),u=i(78149),f=i(14154),b=Object.defineProperty,y=Object.defineProperties,n=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,C=(o,l,h)=>l in o?b(o,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):o[l]=h,v=(o,l)=>{for(var h in l||(l={}))E.call(l,h)&&C(o,h,l[h]);if(w)for(var h of w(l))x.call(l,h)&&C(o,h,l[h]);return o},m=(o,l)=>y(o,n(l));const c=(0,f.I)(o=>(0,e.jsxs)("button",m(v({className:`mod mod-c-btn-confirm cm-btn-confirm ${o.classes||""} ${o.stickIconRight?"cm-btn-confirm--stick-right":""}`,"data-identifier":o.identifier},o.type?{"data-type":o.type}:{}),{children:[(0,e.jsx)(u.V,{icon:o.icon||"trash",size:"sm",classes:"cm-btn-confirm__icon"}),(0,e.jsx)("span",{className:"cm-btn-confirm__text",children:window.translate("Legacy_btn_confirm")})]})))},64698:function(fe,F,i){"use strict";i.d(F,{I:function(){return n}});var e=i(86070),u=i(95376),f=i(93277),b=i(87053),y=i(14154);const n=(0,y.I)(w=>(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"cm-btn-dropdown__content js-cm-btn-dropdown__content",children:(0,u.Ay)(w.menu_content)}),w.show_close_btn?(0,e.jsx)("div",{className:"cm-btn-bar cm-btn-bar--footer js-cm-btn-bar",children:(0,e.jsx)(b.S,{label:window.translate("Legacy_btn_close"),size:f.Q.SIZE_LARGE,style:f.Q.STYLE_PRIMARY,background:f.Q.BACKGROUND_BLACK_05})}):null]}))},89410:function(fe,F,i){"use strict";i.d(F,{c:function(){return f}});var e=i(86070),u=i(14154);const f=(0,u.I)(({libraryDocument:b,editMode:y,layoutType:n})=>(0,e.jsx)("form",{className:"mod mod-c-facette-filter cm-facettefilter js-cm-facettefilter","data-document":b.id,"data-project-type":b.mode,"data-edit-mode":y,"data-layout-type":n,children:(0,e.jsx)("div",{className:"js-cm-facettefilter-container"})}))},14022:function(fe,F,i){"use strict";i.d(F,{c:function(){return f}});var e=i(86070),u=i(14154);const f=(0,u.I)(()=>(0,e.jsx)("span",{className:"cm-feature-hook__add",children:(0,e.jsx)("svg",{viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",children:(0,e.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,e.jsx)("circle",{fill:"#FAB117",fillRule:"nonzero",cx:"6",cy:"6",r:"6"}),(0,e.jsx)("path",{d:"M0 0h12v12H0z"}),(0,e.jsx)("path",{d:"M6.533 6.533v2.369a.534.534 0 0 1-.532.534.53.53 0 0 1-.532-.53l-.001-2.374H3.095a.53.53 0 0 1-.531-.533.534.534 0 0 1 .534-.533l2.37.001-.002-2.369c0-.294.239-.533.533-.534a.53.53 0 0 1 .532.53l.001 2.374h2.373a.53.53 0 0 1 .531.533.534.534 0 0 1-.534.533l-2.37-.001z",fill:"#FFF",fillRule:"nonzero"})]})})}))},69415:function(fe,F,i){"use strict";i.d(F,{V:function(){return y}});var e=i(86070),u=i(14022),f=i(14154),b=i(82110);const y=(0,f.I)(n=>(0,b.Rm)()?(0,e.jsxs)("div",{className:"mod mod-c-feature-hook cm-feature-hook cm-feature-hook--setting","data-feature":n.feature,children:[(0,e.jsx)("div",{className:"cm-feature-hook__text",children:n.text}),(0,e.jsx)("div",{className:"cm-feature-hook__badge",children:(0,e.jsx)(u.c,{})})]}):null)},87395:function(fe,F,i){"use strict";i.d(F,{w:function(){return R}});var e=i(4957),u=i(86070),f=i(14154),b=Object.defineProperty,y=Object.defineProperties,n=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,C=(k,V,K)=>V in k?b(k,V,{enumerable:!0,configurable:!0,writable:!0,value:K}):k[V]=K,v=(k,V)=>{for(var K in V||(V={}))E.call(V,K)&&C(k,K,V[K]);if(w)for(var K of w(V))x.call(V,K)&&C(k,K,V[K]);return k},m=(k,V)=>y(k,n(V));const c=(0,f.I)(k=>(0,u.jsxs)("div",{className:"cm-image-legacy__crop js-cm-image-legacy__crop",children:[(0,u.jsx)("a",{className:"cm-image-legacy__close js-cm-image-legacy__close",children:(0,u.jsx)("i",{className:"icon-times"})}),(0,u.jsxs)("div",{className:"cm-image-legacy__crop-actions",children:[(0,u.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--xs cm-btn-bar--right",children:[(0,u.jsx)("button",{className:"cm-btn cm-btn--sm cm-btn--primary js-cm-image-legacy__save",children:"Save"}),(0,u.jsx)("button",{className:"cm-btn cm-btn--sm cm-btn--default js-cm-image-legacy__replace",children:"Replace"})]}),(0,u.jsxs)("div",{className:"cm-image-legacy__crop-actions-sub",children:[(0,u.jsx)("button",{className:"cm-image-legacy__crop-action js-cm-image-legacy__zoom-in cm-btn cm-btn--default cm-btn--xs",children:(0,u.jsx)("i",{className:"icon-search-plus"})}),(0,u.jsx)("button",{className:"cm-image-legacy__crop-action js-cm-image-legacy__zoom-out cm-btn cm-btn--default cm-btn--xs",children:(0,u.jsx)("i",{className:"icon-search-minus"})})]})]}),(0,u.jsx)("img",m(v({className:"cm-image-legacy__crop-image js-cm-image-legacy__crop-image"},k.id?{"data-id":k.id}:{}),{src:k.file_url||""}))]}));var o=i(53460),l=i(8394),h=i(47754),g=i(37522),j=i(50427),$=i(18216),S=i(34933),T=i(88398),A=i(5181);const B=class Ag extends $.j{constructor(V,K){super(V,K,`c-image-legacy-${Ag.count++}`),this.onAssetChooserAssetChosen=z=>{z&&z.externalData&&z.externalData.id===this.assetChooserIdentifier&&(this.fire("closeModal",["events"]),z.screenIds&&z.screenIds.length===1&&this.data.get(`/api/screen/styleguide/${z.screenIds[0]}/${(0,T.MJ)()}`).then(q=>{var re;const ve=q.data;this.tmpImageData={width:ve.width,height:ve.height,id:ve.id,file_id:ve.file_id,file_url:ve.file_url,background_color:ve.background_color},(re=this.imageData)!=null&&re.file_url&&this.$upload.data("crop")?this.showCropper():this.save()}))},this.$upload=V.find(".js-cm-image-legacy__upload"),this.$image=V.find(".js-cm-image-legacy"),this.$cropImage=null,this.imageData=null,this.tmpImageData=null,this.enabled=!1,this.assetChooserIdentifier=`coverpage-${(0,T._j)()}-${Ag.count}`,this.sandbox.subscribe("events",this),this.setupImageDataAndEvents(),this.bindEventHandlers()}bindEventHandlers(){this.$ctx.on("dblclick",".js-cm-image-legacy",()=>{var V;this.enabled&&((V=this.$image)!=null&&V.data("crop"))&&this.showCropper()}),this.$ctx.on("click",".js-cm-image-legacy__zoom-in",()=>{this.$cropImage&&this.$cropImage.cropper("zoom",.1)}),this.$ctx.on("click",".js-cm-image-legacy__zoom-out",()=>{this.$cropImage&&this.$cropImage.cropper("zoom",-.1)}),this.$ctx.on("click",".js-cm-image-legacy__save",()=>{this.$cropImage}),this.$ctx.on("click",".js-cm-image-legacy__replace",()=>{if(!this.imageData)return;const V=A((0,j.EY)(h.x,this.imageData));this.$ctx.append(V),this.setupImageDataAndEvents(),V.trigger("click")}),this.$ctx.on("click",".js-cm-image-legacy__assetchooser-overlay",()=>{this.openAssetchooser()}),this.$ctx.on("click",".js-cm-image-legacy__close",()=>{this.hideCropper()}),A(window).on(`resize.c-image-${this.id} orientationchange.c-image-${this.id}`,()=>{this.$cropImage&&this.zoom()})}setupImageDataAndEvents(){const V=this.$ctx;this.$upload=V.find(".js-cm-image-legacy__upload"),this.$image=V.find(".js-cm-image-legacy"),this.$upload.length===0?this.imageData=this.imageData||{name:this.$image.data("name"),type:this.$image.data("type"),acceptOnlyImages:this.$upload.data("accept-only-images"),id:this.$image.data("id"),file_id:this.$image.data("file-id"),file_url:this.$image.data("file-url"),image:this.$image.data("image"),width:this.$image.data("width"),height:this.$image.data("height"),zoom:this.$image.data("zoom"),cover:this.$image.data("cover"),x:this.$image.data("x"),y:this.$image.data("y")}:(this.imageData=this.imageData||{name:this.$upload.data("name"),type:this.$upload.data("type"),acceptOnlyImages:this.$upload.data("accept-only-images"),x:0,y:0,zoom:1},this.$upload.upload({fileType:this.imageData.type,dataType:"json",acceptOnlyImages:this.imageData.acceptOnlyImages,dropZone:V.find(".js-cm-image-legacy__dropzone"),add:function(K,z){z.formData.project_id=(0,T.MJ)(),z.formData.folder_id=this.$ctx.data("folder-id"),this.$upload.data("id")&&(z.formData.id=this.$upload.data("id")),z.submit()}.bind(this),done:function(K,z){z.result&&z.result[0]&&(this.tmpImageData={width:z.result[0].width,height:z.result[0].height,id:z.result[0].id,file_id:z.result[0].file_id,file_url:z.result[0].file_url},this.imageData.file_url&&this.$upload.data("crop")?this.showCropper():this.save())}.bind(this)}))}showCropper(){const V=this.$ctx;V.height(V.height()||0),V.html((0,j.EY)(c,A.extend(!0,{},this.imageData,this.tmpImageData))),this.$cropImage=V.find(".js-cm-image-legacy__crop-image");const K=A((0,j.EY)(e.T));this.$cropImage.before(K),this.$cropImage.cropper({viewMode:1,dragMode:"move",restore:!1,modal:!0,guides:!1,highlight:!0,background:!1,checkCrossOrigin:!1,cropBoxMovable:!1,cropBoxResizable:!0,toggleDragModeOnDblclick:!1,ready:function(){K.remove(),this.zoom(),V.find(".js-cm-image-legacy__crop").velocity({opacity:1})}.bind(this)}),A("html").off("keydown.cropper").on("keydown.cropper",z=>{switch(z.keyCode){case 27:z.preventDefault(),this.hideCropper();break;case 13:z.preventDefault();break}})}zoom(){var V;const K=this.$ctx,z=A(window),q=K.offset()||{top:0,left:0};q.top-=(z.scrollTop()||0)-parseInt(K.css("paddingTop")),q.left-=(z.scrollLeft()||0)-parseInt(K.css("paddingLeft"));const re=K.width(),ve=K.height(),Oe={top:q.top,left:q.left,width:re,height:ve},De={top:q.top,left:q.left};let Ie=!1;if((V=this.imageData)!=null&&V.width){const Te=(re||0)/(this.imageData.width*this.imageData.zoom);Ie=this.imageData.zoom*Te,De.top=q.top-this.imageData.y*Ie,De.left=q.left-this.imageData.x*Ie,Ie*this.imageData.height<ve&&(Oe.height=Ie*this.imageData.height)}else De.width=re,De.height=ve;this.$cropImage.cropper("setCropBoxData",{top:q.top,left:q.left,width:1,height:1}),Ie&&this.$cropImage.cropper("zoomTo",Ie),this.$cropImage.cropper("setCanvasData",De),this.$cropImage.cropper("setCropBoxData",Oe)}hideCropper(){const V=this.$ctx;this.$cropImage.cropper("destroy"),this.$cropImage=null,this.tmpImageData=null,V.css({height:"unset"}),this.render(this.imageData),A("html").off("keydown.cropper")}render(V){var K;const z=this.$ctx;this.imageData=A.extend(!0,{},this.imageData,V),(K=this.imageData)!=null&&K.image?z.html((0,j.EY)(l.x,this.imageData)):this.imageData&&z.html((0,j.EY)(o.B,this.imageData)),this.setupImageDataAndEvents()}save(){var V,K;const z=this.$ctx;this.imageData=A.extend(!0,{},this.imageData,this.tmpImageData),this.imageData=A.extend(!0,{},this.imageData,{file_url:(V=this.imageData)==null?void 0:V.file_url,x:0,y:0,zoom:1,background_color:(K=this.tmpImageData)==null?void 0:K.background_color}),this.tmpImageData=null,z.css({height:"unset"}),this.render(A.extend(!0,{},this.imageData,{crop:this.$upload.data("crop")})),typeof this.saved=="function"&&this.saved(this.imageData)}cover(V){var K,z;this.enabled&&this.imageData&&this.$image&&(V||!((K=this.imageData)!=null&&K.height)||!((z=this.imageData)!=null&&z.width)?this.$image.css({paddingBottom:0,height:"100%"}):this.$image.css({paddingBottom:`${this.imageData.height/this.imageData.width*100}%`,height:0}))}disable(){this.enabled=!1,this.$cropImage&&this.$cropImage.cropper("disable")}enable(){this.enabled=!0,this.$cropImage&&this.$cropImage.cropper("enable")}openAssetchooser(){const V=[{key:"ext",values:(0,S.I4)()}],K=(0,j.EY)(g.l,{externalData:{id:this.assetChooserIdentifier},multiSelectionAllowed:!1,filters:V});this.fire("openModal",{modifier:"flex",$content:K},["events"])}};B.count=0;let R=B},53460:function(fe,F,i){"use strict";i.d(F,{B:function(){return C}});var e=i(86070),u=i(47754),f=i(14154),b=Object.defineProperty,y=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,E=(v,m,c)=>m in v?b(v,m,{enumerable:!0,configurable:!0,writable:!0,value:c}):v[m]=c,x=(v,m)=>{for(var c in m||(m={}))n.call(m,c)&&E(v,c,m[c]);if(y)for(var c of y(m))w.call(m,c)&&E(v,c,m[c]);return v};const C=(0,f.I)(v=>{const m=Math.floor(Math.random()*1e4);return(0,e.jsx)("div",{className:`cm-image-legacy__dropzone-wrap cm-image-legacy__dropzone-wrap--${m} ${v.enabled?"state-enabled":""}`,children:(0,e.jsxs)("div",{className:`cm-image-legacy__dropzone js-cm-image-legacy__dropzone ${v.modifier_dropzone?`cm-image-legacy__dropzone--${v.modifier_dropzone}`:""} `,children:[(0,e.jsx)("i",{className:"cm-image-legacy__dropzone-icon ca-icon--image ca-icon--lg"}),(0,e.jsx)("span",{children:v.label_dropzone?v.label_dropzone:window.translate("Legacy_image_placeholder")}),(0,e.jsx)(u.x,x({},v))]})})})},8394:function(fe,F,i){"use strict";i.d(F,{x:function(){return m}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.defineProperties,y=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,x=(c,o,l)=>o in c?f(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,C=(c,o)=>{for(var l in o||(o={}))w.call(o,l)&&x(c,l,o[l]);if(n)for(var l of n(o))E.call(o,l)&&x(c,l,o[l]);return c},v=(c,o)=>b(c,y(o));const m=(0,u.I)(c=>(0,e.jsx)("div",v(C({className:`cm-image-legacy js-cm-image-legacy${c.cover?" state-cover":""}`,"data-name":c.name||"image","data-type":c.type||"OTHER","data-image":c.image,"data-file-id":c.file_id,"data-file-url":c.file_url,"data-width":c.width,"data-height":c.height,"data-x":c.x||0,"data-y":c.y||0,"data-zoom":c.zoom||1,"data-crop":c.crop!==!1},c.cover?{"data-cover":c.cover}:{}),{"data-id":c.id,style:{paddingBottom:`${c.ratio_percent?c.ratio_percent:c.height/c.width*100}%`},children:(0,e.jsx)("img",{src:c.image,className:`cm-image-legacy__image ${c.cover_mode&&c.cover_mode==="contain"?"cm-image-legacy__wrap--contain":""} lazyload`})})))},47754:function(fe,F,i){"use strict";i.d(F,{x:function(){return m}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.defineProperties,y=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,x=(c,o,l)=>o in c?f(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,C=(c,o)=>{for(var l in o||(o={}))w.call(o,l)&&x(c,l,o[l]);if(n)for(var l of n(o))E.call(o,l)&&x(c,l,o[l]);return c},v=(c,o)=>b(c,y(o));const m=(0,u.I)(c=>(0,e.jsx)("input",v(C(v(C({className:"cm-image-legacy__dropzone-upload js-cm-image-legacy__upload",type:"file",name:"files[]","aria-label":window.translate("Legacy_image_upload_label")},c.acceptOnlyImages?{"data-accept-only-images":"true"}:{}),{"data-name":c.name||"image","data-type":c.type||"OTHER","data-crop":c.crop!==!1}),c.id?{"data-id":c.id}:{}),{"data-url":c.api?c.api:"/api/file/upload"})))},64409:function(fe,F,i){"use strict";i.d(F,{z:function(){return b}});var e=i(18216),u=i(5181);const f=class Zl extends e.j{on(n){this.$body=u("body"),this.$overlay=u(".js-cm-modal__overlay"),this.mId=this.$ctx.data("modalId"),this.isOpen=!1,this.closeable=!0,this.sandbox.subscribe("events",this),this.observer=null,this.$body.on("click.cm-modal",".js-cm-modal__open",w=>{const E=u(w.currentTarget),x=E.data("modalId")||"modal";this.mId===x&&this.open({modifier:E.data("modalModifier")})}),this.$ctx.on("click",".js-cm-modal__close",w=>{w.stopPropagation(),this.close()}),u(document).on("keyup",w=>{w.which===27&&this.close()}),this.$body.on("keydown",w=>{this.isOpen&&w.key==="Tab"&&this.trapFocus(w)}),n()}close(n){const w=this.$ctx.find(".js-cm-modal__content");!this.isOpen||!this.closeable&&!n||(this.isOpen=!1,Zl.count--,this.$ctx.removeClass("state-visible"),this.$ctx.removeClass("cm-modal--full-page"),Zl.count===0?(this.$body.removeClass("state-cm-modal-visible"),u(".js-cm-modal__overlay").removeClass("state-visible")):this.$overlay.css({zIndex:2e3+2*Zl.count}),this.sandbox.removeModules(w),w.html(""),this.$ctx.off(`click.modal${this.id}`),this.$body.off("click.cm-modal-full"),this.fire("modalClosed",{id:this.mId},["events"]),this.lastActiveElement.focus())}open(n){this.lastActiveElement=document.activeElement,n||(n={});const w=n.modifier||null,E=n.modifierArray||[],x=this.$ctx.find(".js-cm-modal__content");if(n.fullPage&&this.$ctx.addClass("cm-modal--full-page"),this.isOpen)return;this.isOpen=!0,Zl.count++;const C=this.$ctx.find(".js-cm-modal__close");this.closeable?C.removeClass("state-hidden"):C.addClass("state-hidden"),x.attr("class",(v,m)=>m.replaceAll(/(^|\s)cm-modal__content--\S+/g,"")),w&&x.addClass(`cm-modal__content--${w}`);for(const v of E)typeof v=="string"&&v.length>0&&x.addClass(`cm-modal__content--${v}`);this.$ctx.on(`click.modal${this.id}`,v=>{const m=u(v.target),c=this.$ctx.find(".js-cm-modal__content");m.closest(".js-cm-modal__content").length===0&&m.closest(".js-cm-btn-dropdown__menu").length===0&&!u.contains(c[0],m[0])&&(v.stopPropagation(),this.close())}),this.$body.addClass("state-cm-modal-visible"),this.$overlay.css({zIndex:2e3+2*Zl.count}).addClass("state-visible"),this.$ctx.css({zIndex:2e3+2*Zl.count+1}).addClass("state-visible"),this.$body.on("click.cm-modal-full",".js-cm-modal",v=>{v.stopPropagation()}),C.trigger("focus"),setTimeout(()=>{this.fire("modalOpened",{id:this.mId,$ctx:this.$ctx},["events"])},200)}onOpenModal(n){if(this.closeable=!0,(n.id||"modal")===this.mId){if(this.close(),this.closeable=n.closeable!==!1,n.$content){const E=this.$ctx.find(".js-cm-modal__content");E.html(n.$content),n.terrific!==!1&&this.sandbox.addModules(E)}this.open({modifier:n.modifier,modifierArray:n.modifierArray,fullPage:n.fullPage})}this.setMutationObserver()}onCloseModal(n){(n.id||"modal")===this.mId&&this.close(!0),this.disconnectMutationObserver(),this.updateParameters(!0)}setMutationObserver(){const n={childList:!0,subtree:!0};this.disconnectMutationObserver(),this.observer=new MutationObserver(()=>{this.updateParameters.call(this)}),this.observer.observe(this.$ctx[0],n),this.updateParameters()}disconnectMutationObserver(){this.observer instanceof MutationObserver&&(this.observer.disconnect(),this.observer=null)}updateParameters(n){const w=this.$ctx.find(".js-cm-modal__content");this.fire("setCBtnDropdownContainerParameters",{topOffset:n?0:w.offset().top,height:n?0:w.height()})}trapFocus(n){const{firstElement:w,lastElement:E}=this.modalBoundaryFocusableElements();!n.shiftKey&&n.target===E&&(w.focus({focusVisible:!0}),n.preventDefault()),n.shiftKey&&n.target===w&&(E.focus({focusVisible:!0}),n.preventDefault())}modalBoundaryFocusableElements(){const n='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',w=u(".js-cm-modal.state-visible").first(),E=u(w).find(n).not(":hidden");return{firstElement:E[0],lastElement:E[E.length-1]}}};f.count=0;let b=f},13833:function(fe,F,i){"use strict";i.d(F,{X:function(){return f}});var e=i(86070),u=i(14154);const f=(0,u.I)(b=>(0,e.jsx)("div",{className:`cm-modal__banner ${b.drops===!1&&!b.notitle?"cm-modal__banner--nodrops":""}`,children:(0,e.jsx)("div",{className:"cm-modal__color-bar"})}))},43915:function(fe,F,i){"use strict";i.d(F,{b:function(){return f}});var e=i(86070),u=i(14154);const f=(0,u.I)(b=>(0,e.jsx)("div",{className:"cm-modal__overlay js-cm-modal__overlay",children:(0,e.jsxs)("div",{className:"mod mod-c-modal cm-modal js-cm-modal","data-modal-id":`${b.id?`${b.id}`:"modal"}`,children:[(0,e.jsx)("a",{href:"javascript:;",className:"cm-modal__close js-cm-modal__close",title:window.translate("Legacy_btn_close"),"aria-label":window.translate("Legacy_btn_close"),children:(0,e.jsx)("i",{className:"ca-icon--reject ca-icon--md"})}),(0,e.jsx)("div",{className:"cm-modal__content js-cm-modal__content"})]})}))},31050:function(fe,F,i){"use strict";i.d(F,{M:function(){return f}});var e=i(86070),u=i(14154);const f=(0,u.I)(()=>(0,e.jsxs)("div",{className:"mod mod-c-modals",children:[(0,e.jsx)("div",{className:"cm-modal__overlay js-cm-modal__overlay"}),(0,e.jsx)("div",{className:"mod mod-c-modal cm-modal","data-modal-id":"block",children:(0,e.jsxs)("div",{className:"cm-modal__content",children:[(0,e.jsx)("a",{href:"javascript:;",className:"cm-modal__close js-cm-modal__close",title:window.translate("Modals_close"),"aria-label":window.translate("Modals_close"),children:(0,e.jsx)("i",{className:"ca-icon--reject ca-icon--md","aria-hidden":"true"})}),(0,e.jsx)("div",{className:"js-cm-modal__content"})]})}),(0,e.jsxs)("div",{className:"mod mod-c-modal cm-modal js-cm-modal","data-modal-id":"modal",children:[(0,e.jsx)("a",{href:"javascript:;",className:"cm-modal__close js-cm-modal__close",title:window.translate("Modals_close"),"aria-label":window.translate("Modals_close"),children:(0,e.jsx)("i",{className:"ca-icon--reject ca-icon--md","aria-hidden":"true"})}),(0,e.jsx)("div",{className:"cm-modal__content js-cm-modal__content"})]})]}))},44084:function(fe,F,i){"use strict";i.d(F,{w:function(){return f}});var e=i(93791),u=i(18216);class f extends u.j{static get TYPES(){return[f.TYPE_WARNING,f.TYPE_SUCCESS,f.TYPE_INFORMATION,f.TYPE_STATUS]}static get TYPE_INFORMATION(){return"information"}static get TYPE_WARNING(){return"warning"}static get TYPE_STATUS(){return"status"}static get TYPE_SUCCESS(){return"success"}static get HORIZONTAL_ALIGNMENTS(){return[f.HORIZONTAL_ALIGNMENT_LEFT,f.HORIZONTAL_ALIGNMENT_CENTER]}static get HORIZONTAL_ALIGNMENT_LEFT(){return"left"}static get HORIZONTAL_ALIGNMENT_CENTER(){return"center"}static get ICONS(){return["",...e.l.ICONS]}static get ICON_DEFAULT(){return"unknown"}on(y){this.$ctx.on("click",".js-cm-banner-intercom__button",()=>{if(Intercom.booted)return Intercom("showNewMessage");console.error("Intercom is not enabled.")}),y()}}},51297:function(fe,F,i){"use strict";i.d(F,{c:function(){return w}});var e=i(86070),u=i(95376),f=i(93791),b=i(78149),y=i(14154),n=i(44084);const w=(0,y.I)(E=>{var x;let C,v;return E.horizontalAlignment===n.w.HORIZONTAL_ALIGNMENT_CENTER?C="cm-banner--centered":C="cm-banner--left",E.type===n.w.TYPE_INFORMATION?v="cm-banner--information":E.type===n.w.TYPE_SUCCESS?v="cm-banner--success":E.type===n.w.TYPE_WARNING?v="cm-banner--warning":E.type===n.w.TYPE_STATUS&&(v="cm-banner--status"),(0,e.jsx)("div",{className:`cm-banner ${C} ${v}`,children:(0,e.jsxs)("div",{className:"cm-banner__content",children:[E.imageHtml?(0,e.jsx)("div",{className:"cm-banner__image-wrapper",children:(0,u.Ay)(E.imageHtml)}):null,E.icon?(0,e.jsx)("div",{className:"cm-banner__icon-wrapper",children:(0,e.jsx)(b.V,{classes:"cm-banner__icon",icon:E.icon,size:f.l.SIZE_LARGE})}):null,E.message?(0,e.jsx)("div",{className:"cm-banner__message",children:E.message}):null,E.actions&&E.actions.length>0?(0,e.jsx)("div",{className:"cm-banner__actions",children:(x=E.actions)==null?void 0:x.map((m,c)=>m.url?(0,e.jsx)("a",{target:"_blank",href:m.url,className:`cm-banner__action ${m.modifier}`,rel:"noreferrer",children:m.text},c):(0,e.jsx)("button",{className:`cm-banner__action ${m.modifier}`,children:m.text},c))}):null,E.hasChildrenSlot?(0,e.jsx)("div",{className:"cm-banner__children-slot cm-banner__children-slot--hidden js-cm-banner__children-slot"}):null]})})})},49290:function(fe,F,i){"use strict";i.d(F,{t:function(){return y}});var e=i(86070),u=i(46223),f=i(45924),b=i(14154);const y=(0,b.I)(n=>(0,e.jsx)("button",{type:"reset",className:(0,u.h)(["cm-btn cm-btn--default",n.classes,f.OA]),children:(0,e.jsx)("span",{className:"js-cm-setting__btn-label",children:n.label_cancel?n.label_cancel:window.translate("Legacy_btn_cancel")})}))},2728:function(fe,F,i){"use strict";i.d(F,{b:function(){return o}});var e=i(86070),u=i(46223),f=i(45924),b=i(14154),y=Object.defineProperty,n=Object.defineProperties,w=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,v=(l,h,g)=>h in l?y(l,h,{enumerable:!0,configurable:!0,writable:!0,value:g}):l[h]=g,m=(l,h)=>{for(var g in h||(h={}))x.call(h,g)&&v(l,g,h[g]);if(E)for(var g of E(h))C.call(h,g)&&v(l,g,h[g]);return l},c=(l,h)=>n(l,w(h));const o=(0,b.I)(l=>(0,e.jsxs)("button",c(m({tabIndex:0,type:l.type?l.type:"submit"},l.disabled?{disabled:!0}:{}),{className:(0,u.h)([f.OA,"cm-btn cm-btn--primary",l.classes]),children:[(0,e.jsx)("i",{className:"ca-icon--processing anim-spin cm-setting__btn-icon js-cm-setting__btn-icon--loading"}),(0,e.jsx)("i",{className:"ca-icon--triangle cm-setting__btn-icon js-cm-setting__btn-icon--error"}),(0,e.jsx)("i",{className:"ca-icon--check cm-setting__btn-icon js-cm-setting__btn-icon--success"}),(0,e.jsx)("span",{className:"js-cm-setting__btn-label",children:l.label_submit?l.label_submit:window.translate("Legacy_btn_save")})]})))},16021:function(fe,F,i){"use strict";i.d(F,{h:function(){return y}});var e=i(86070),u=i(49290),f=i(2728),b=i(14154);const y=(0,b.I)(n=>(0,e.jsxs)("div",{className:`cm-btn-bar cm-btn-bar--footer cm-setting__actions cm-setting__actions--flyout js-cm-setting__actions ${n.classes?` ${n.classes}`:""}`,children:[(0,e.jsx)(u.t,{classes:void 0}),(0,e.jsx)(f.b,{classes:void 0})]}))},15993:function(fe,F,i){"use strict";i.d(F,{W:function(){return n}});var e=i(86070),u=i(95376),f=i(49198),b=i.n(f),y=i(14154);const n=(0,y.I)(w=>{const E=b()(w.value.color).toHexString();return w.value.width?(0,e.jsxs)(e.Fragment,{children:[w.tpl.unit(w.value.width)," ",E," | r: ",w.tpl.unit(w.value.radius)]}):(0,u.Ay)(window.translate("Legacy_settings_border_none"))})},38020:function(fe,F,i){"use strict";i.d(F,{k:function(){return c}});var e=i(86070),u=i(75573),f=i(14154),b=Object.defineProperty,y=Object.defineProperties,n=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,C=(o,l,h)=>l in o?b(o,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):o[l]=h,v=(o,l)=>{for(var h in l||(l={}))E.call(l,h)&&C(o,h,l[h]);if(w)for(var h of w(l))x.call(l,h)&&C(o,h,l[h]);return o},m=(o,l)=>y(o,n(l));const c=(0,f.I)(o=>{var l;return(0,e.jsx)("div",m(v(v(v(m(v({className:`js-co-settings__elem cm-setting__elem cm-setting-checkbox ${o.class?`${o.class}`:""}`,"data-id":o.id},o.payload?{"data-payload":o.payload}:{}),{"data-type":"radioandcheckbox"}),o.group?{"data-group":o.group}:{}),o.min?{"data-min":o.min}:{}),o.max?{"data-max":o.max}:{}),{children:(0,e.jsxs)("div",{className:"cm-setting__preview",children:[o.label?(0,e.jsx)("div",{className:"cm-setting__label",children:o.label}):null,(0,e.jsx)("div",{className:`cm-setting-checkbox__group${o.modifier?` cm-setting-checkbox__group--${o.modifier}`:""}`,children:(l=o.options)==null?void 0:l.map((h,g)=>(0,e.jsx)("div",{className:`cm-setting-checkbox__option${o.modifier?` cm-setting-checkbox__option--${o.modifier}`:""}`,children:(0,e.jsx)(u.z,{modifier:o.checkboxModifier,classes:"js-cm-setting-checkbox__input",multilineLabel:o.multilineLabel,label:h.label,checked:h.checked,value:h.value,disabled:h.disabled,disable_label:o.disable_label,name:o.id,data:h.data})},g))})]})}))})},15575:function(fe,F,i){"use strict";i.d(F,{C:function(){return g}});var e=i(86070),u=i(46223),f=i(45924),b=i(93791),y=i(78149),n=i(14154),w=Object.defineProperty,E=Object.defineProperties,x=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,c=(j,$,S)=>$ in j?w(j,$,{enumerable:!0,configurable:!0,writable:!0,value:S}):j[$]=S,o=(j,$)=>{for(var S in $||($={}))v.call($,S)&&c(j,S,$[S]);if(C)for(var S of C($))m.call($,S)&&c(j,S,$[S]);return j},l=(j,$)=>E(j,x($));const h=j=>j.reduce(($,S)=>($[S.name]=S.value,$),{}),g=(0,n.I)(j=>{var $,S;const T=[2,3,4];return j.type==="advanced"?(0,e.jsxs)("div",{className:"cm-setting__preview cm-setting-chooser__types cm-setting-chooser__types--advanced",children:[j.label?(0,e.jsx)("label",{htmlFor:j.id,className:"cm-setting__label",children:j.label}):null,(0,e.jsx)("ul",{className:"cm-setting-chooser__type-list",children:($=j.options)==null?void 0:$.map((A,B)=>A.value==="separator"?(0,e.jsx)("li",{className:"cm-setting-chooser__type cm-setting-chooser__type--separator"},B):(0,e.jsx)("li",l(o(o({className:`cm-setting-chooser__type js-cm-setting-chooser__type ${j.noPreselection!==!0?` ${j.value&&j.value==A.value||B===0?"state-selected":""} `:""}`},A.value?{[`data-${j.id}`]:A.value}:{}),A.attachedData?j.tpl.renderDataAttributesAsObject(h(A.attachedData)):{}),{children:(0,e.jsxs)("a",l(o({className:(0,u.h)(["cm-setting-chooser__link",f.OA])},A.intercomTourSelector?{"data-intercom-tour-selector":A.intercomTourSelector}:{}),{role:"button",href:"#",children:[(0,e.jsxs)("div",{className:"cm-setting-chooser__left","aria-hidden":!0,children:[A.icon?A.icon.includes("/")?(0,e.jsx)("img",{alt:"",className:`cm-setting-chooser__icon ${j.noPreselection?"cm-setting-chooser__icon--no-transparency":""}`,src:A.icon}):(0,e.jsx)(y.V,{classes:`cm-setting-chooser__icon${j.noPreselection?" cm-setting-chooser__icon--no-transparency":""}`,icon:A.icon,size:b.l.SIZE_LARGE}):A.iconclass?(0,e.jsx)("i",{className:`cm-setting-chooser__icon--legacy ${j.noPreselection?"cm-setting-chooser__icon--no-transparency":""} ${A.iconclass}`}):null,(0,e.jsx)("i",{className:"cm-setting-chooser__selected ca-icon--check-filled ca-icon--sm"})]}),(0,e.jsxs)("div",{className:"cm-setting-chooser__main",children:[(0,e.jsx)("h4",{className:`cm-setting-chooser__title ${j.noWrap?"cm-setting-chooser__title--nowrap":""}`,children:A.name}),(0,e.jsx)("p",{className:`cm-setting-chooser__text ${j.noWrap?"cm-setting-chooser__text--nowrap":""}`,children:A.text})]})]}))}),B))})]}):(0,e.jsxs)("div",{className:"cm-setting__preview",children:[j.label?(0,e.jsx)("label",{htmlFor:j.id,className:"cm-setting__label cm-setting-chooser__title",children:j.label}):null,(0,e.jsx)("div",{className:"cm-setting-chooser__types",children:(S=j.options)==null?void 0:S.map((A,B)=>(0,e.jsxs)("button",l(o({className:(0,u.h)(["cm-setting-chooser__type js-cm-setting-chooser__type",A.modifier?`${A.modifier}`:"",j.columns&&T.includes(j.columns)?`cm-setting-chooser__type--${j.columns}columns`:"",j.value===A.value?"state-selected":"",A.name?"":"cm-setting-chooser__type--icon-only",f.OA])},{[`data-${j.id}`]:A.value}),{children:[A.icon?A.icon.includes("/")?(0,e.jsx)("img",{className:"cm-setting-chooser__icon",src:A.icon}):(0,e.jsx)(y.V,{classes:"cm-setting-chooser__icon",icon:A.icon,size:b.l.SIZE_LARGE}):A.iconclass?(0,e.jsx)("i",{className:`cm-setting-chooser__icon--legacy ${A.iconclass}`}):null,A.name?(0,e.jsx)("span",{className:"tw-block tw-mt-1 tw-mb-0.5 tw-text-center tw-text-body-x-small tw-hyphens-auto tw-line",children:A.name}):null,j.add_indicators?(0,e.jsx)("span",{className:"ca-badge ca-badge--default ca-badge--small ca-badge--icon cm-setting-chooser__badge",children:(0,e.jsx)("i",{className:"icon-plus"})}):null]}),B))})]})})},68084:function(fe,F,i){"use strict";i.d(F,{K:function(){return c}});var e=i(86070),u=i(15575),f=i(14154),b=Object.defineProperty,y=Object.defineProperties,n=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,C=(o,l,h)=>l in o?b(o,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):o[l]=h,v=(o,l)=>{for(var h in l||(l={}))E.call(l,h)&&C(o,h,l[h]);if(w)for(var h of w(l))x.call(l,h)&&C(o,h,l[h]);return o},m=(o,l)=>y(o,n(l));const c=(0,f.I)(o=>{var l;return(0,e.jsx)("div",m(v(v(m(v({className:`js-co-settings__elem cm-setting__elem cm-setting-chooser${o.modifier?` cm-setting-chooser--${o.modifier}`:""}`},o.readonly?{"data-readonly":o.readonly}:{}),{"data-id":o.id,"data-type":"chooser"}),o.group?{"data-group":o.group}:{}),o.allow_multiple?{"data-multiple":o.allow_multiple}:{}),{children:o.templates&&o.templates.items?typeof((l=o.templates)==null?void 0:l.itemsReact)=="function"?(0,e.jsx)(o.templates.itemsReact,v({},o)):null:(0,e.jsx)(u.C,v({},o))}))})},64182:function(fe,F,i){"use strict";i.d(F,{g:function(){return l}});var e=i(86070),u=i(49198),f=i.n(u),b=i(62878),y=i(14154),n=Object.defineProperty,w=Object.defineProperties,E=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,m=(h,g,j)=>g in h?n(h,g,{enumerable:!0,configurable:!0,writable:!0,value:j}):h[g]=j,c=(h,g)=>{for(var j in g||(g={}))C.call(g,j)&&m(h,j,g[j]);if(x)for(var j of x(g))v.call(g,j)&&m(h,j,g[j]);return h},o=(h,g)=>w(h,E(g));const l=(0,y.I)(h=>{let g=f()(h.value),j=null;return g.isValid()?j=g.toRgb():g=null,(0,e.jsx)("div",o(c(c(o(c({className:`js-co-settings__elem cm-setting__elem cm-setting-color ${h.modifier?`cm-setting-color--${h.modifier}`:""} lazyload`},h.readonly?{"data-readonly":h.readonly}:{}),{"data-color":`${h.value?`${h.value}`:"transparent"}`,"data-id":h.id,"data-type":"color"}),h.set?{"data-set":h.set.join(",")}:{}),h.group?{"data-group":h.group}:{}),{children:h.type==="simple"?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"cm-setting-color__hex-simple",children:(0,e.jsx)(b.A,{id:`${h.id}_input`,group:h.group,label:h.label,modifier:h.modifier,value:g==null?void 0:g.toHexString(),classes:"js-cm-setting-color__hex-simple",placeholder:window.translate("Legacy_setting_elem_color_placeholder")})}),(0,e.jsx)("span",{className:"cm-setting-color__preview cm-setting-color__bubble",children:(0,e.jsx)("span",{className:"cm-setting-color__preview-inner js-cm-setting-color__bubble",style:{backgroundColor:`${g?`${g.toRgbString()}`:"transparent"}`}})}),(0,e.jsxs)("div",{className:"cm-setting-color__tooltip cm-btn-dropdown__menu state-open js-cm-setting-color__tooltip js-cm-setting-color__chooser",children:[(0,e.jsx)("div",{className:"js-cm-setting-color__picker"}),(0,e.jsxs)("div",{className:"cm-setting-color__colors",children:[(0,e.jsxs)("div",{className:"cm-setting-color__color",children:[(0,e.jsx)("label",{className:"cm-setting-color__label",htmlFor:h.id,children:"HEX"}),(0,e.jsx)("input",{id:h.id,name:h.id,className:"cm-setting-color__input js-cm-setting-color__hex",value:g?`${g.toHexString()}`:"",type:"text","aria-label":"HEX"})]}),(0,e.jsxs)("div",{className:"cm-setting-color__color",children:[(0,e.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__r",children:"R"}),(0,e.jsx)("input",{id:"cm-setting-color__r",className:"cm-setting-color__input js-cm-setting-color__r",value:g?`${j==null?void 0:j.r}`:"",type:"text","aria-label":"R"})]}),(0,e.jsxs)("div",{className:"cm-setting-color__color",children:[(0,e.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__g",children:"G"}),(0,e.jsx)("input",{id:"cm-setting-color__g",className:"cm-setting-color__input js-cm-setting-color__g",value:g?`${j==null?void 0:j.g}`:"",type:"text","aria-label":"G"})]}),(0,e.jsxs)("div",{className:"cm-setting-color__color",children:[(0,e.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__b",children:"B"}),(0,e.jsx)("input",{id:"cm-setting-color__b",className:"cm-setting-color__input js-cm-setting-color__b",value:g?`${j==null?void 0:j.b}`:"",type:"text","aria-label":"B"})]}),(0,e.jsxs)("div",{className:"cm-setting-color__color",children:[(0,e.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__a",children:"Alpha"}),(0,e.jsx)("input",{id:"cm-setting-color__a",className:"cm-setting-color__input js-cm-setting-color__a",value:g?j!=null&&j.a?j.a:"1":"",type:"text","aria-label":"Alpha"})]})]}),h.palette?(0,e.jsx)("div",{className:"cm-setting-color__palette js-cm-setting-color__palette","data-palette":h.palette}):null,(0,e.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer cm-setting__actions cm-setting__actions--flyout",children:[h.resettable?(0,e.jsx)("button",{className:"cm-btn cm-btn--default js-cm-setting-color__reset",children:window.translate("Legacy_color_picker_reset_button")}):null,(0,e.jsx)("button",{className:"cm-btn cm-btn--default js-cm-setting-color__cancel",children:window.translate("Legacy_btn_cancel")}),(0,e.jsx)("button",{className:"cm-btn cm-btn--primary js-cm-setting-color__save",children:window.translate("Legacy_btn_save")})]})]})]}):(0,e.jsxs)("div",{className:"cm-setting__preview js-cm-setting-color__chooser",children:[h.picker?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"js-cm-setting-color__picker"}),(0,e.jsxs)("div",{className:"cm-setting-color__colors",children:[(0,e.jsxs)("div",{className:"cm-setting-color__color",children:[(0,e.jsx)("label",{className:"cm-setting-color__label",htmlFor:h.id,children:"HEX"}),(0,e.jsx)("input",{id:h.id,name:h.id,className:"cm-setting-color__input js-cm-setting-color__hex",value:g?g.toHexString():"",type:"text","aria-label":"HEX"})]}),(0,e.jsxs)("div",{className:"cm-setting-color__color",children:[(0,e.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__preview-r",children:"R"}),(0,e.jsx)("input",{id:"cm-setting-color__preview-r",className:"cm-setting-color__input js-cm-setting-color__r",value:g?j==null?void 0:j.r:"",type:"text","aria-label":"R"})]}),(0,e.jsxs)("div",{className:"cm-setting-color__color",children:[(0,e.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__preview-g",children:"G"}),(0,e.jsx)("input",{id:"cm-setting-color__preview-g",className:"cm-setting-color__input js-cm-setting-color__g",value:g?j==null?void 0:j.g:"",type:"text","aria-label":"G"})]}),(0,e.jsxs)("div",{className:"cm-setting-color__color",children:[(0,e.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__preview-b",children:"B"}),(0,e.jsx)("input",{id:"cm-setting-color__preview-b",className:"cm-setting-color__input js-cm-setting-color__b",value:g?j==null?void 0:j.b:"",type:"text","aria-label":"B"})]}),(0,e.jsxs)("div",{className:"cm-setting-color__color",children:[(0,e.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__preview-a",children:"Alpha"}),(0,e.jsx)("input",{id:"cm-setting-color__preview-a",className:"cm-setting-color__input js-cm-setting-color__a",value:g?j!=null&&j.a?j.a:"1":"",type:"text","aria-label":"Alpha"})]})]})]}):null,h.palette?(0,e.jsx)("div",{className:"cm-setting-color__palette js-cm-setting-color__palette","data-palette":h.palette}):null]})}))})},90166:function(fe,F,i){"use strict";i.d(F,{g:function(){return m}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.defineProperties,y=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,x=(c,o,l)=>o in c?f(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,C=(c,o)=>{for(var l in o||(o={}))w.call(o,l)&&x(c,l,o[l]);if(n)for(var l of n(o))E.call(o,l)&&x(c,l,o[l]);return c},v=(c,o)=>b(c,y(o));const m=(0,u.I)(c=>{var o;return(0,e.jsxs)(e.Fragment,{children:[c.non_selection===!0?(0,e.jsx)("option",{label:" ",className:"ignored"}):null,c.allow_empty_value==!0?(0,e.jsx)("option",{value:"",children:"\u2014"}):null,(o=c.options)==null?void 0:o.map((l,h)=>(0,e.jsx)("option",v(C(C({value:l.value},l.value==c.value?{selected:!0}:{}),c.tpl.renderDataAttributesAsObject(l.data)),{children:l.name}),h))]})})},59240:function(fe,F,i){"use strict";i.d(F,{U:function(){return o}});var e=i(86070),u=i(78149),f=i(90166),b=i(14154),y=Object.defineProperty,n=Object.defineProperties,w=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,v=(l,h,g)=>h in l?y(l,h,{enumerable:!0,configurable:!0,writable:!0,value:g}):l[h]=g,m=(l,h)=>{for(var g in h||(h={}))x.call(h,g)&&v(l,g,h[g]);if(E)for(var g of E(h))C.call(h,g)&&v(l,g,h[g]);return l},c=(l,h)=>n(l,w(h));const o=(0,b.I)(l=>(0,e.jsx)("div",c(m(m({className:`js-co-settings__elem cm-setting__elem cm-setting-dropdown ${l.classes?` ${l.classes}`:""}`,"data-id":l.id,"data-type":"dropdown"},l.expand?{"data-expand":l.expand}:{}),l.float?{"data-float":"1"}:{}),{children:(0,e.jsxs)("div",{className:"cm-setting__preview cm-setting__bar js-cm-setting__bar",children:[l.label?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("label",{htmlFor:l.id,className:`cm-setting__label${l.tooltip?" cm-setting__label--float-left":""}`,children:l.label}),l.tooltip?(0,e.jsx)("span",{className:`cm-setting__tooltip tt-height-auto ${l.tooltip.position?`tt-${l.tooltip.position}`:""}`,"data-tooltip":l.tooltip.content,"aria-hidden":!0,children:(0,e.jsx)(u.V,{icon:l.tooltip.icon,size:l.tooltip.iconSize})}):null]}):null,(0,e.jsx)("select",c(m({id:l.id,className:`js-co-settings__select--${l.id}`,name:l.id},l.readonly?{readOnly:"true"}:{}),{"data-template":l.template?`${l.template}`:"c-dropdown",children:(0,e.jsx)(f.g,m({},l))}))]})})))},64584:function(fe,F,i){"use strict";i.d(F,{H:function(){return b}});var e=i(86070),u=i(62878),f=i(14154);const b=(0,f.I)(y=>(0,e.jsxs)("div",{className:"co-settings__row js-cm-setting-frame__values",children:[(0,e.jsx)("div",{className:"g-col-xs-3 co-settings__col",children:(0,e.jsx)(u.A,{id:`${y.id}_top`,type:"unit",group:y.group,label:window.translate("Legacy_settings_dimensions_top"),value:y.value.top?y.tpl.unit(y.value.top,!0):0,placeholder:window.translate("Legacy_settings_dimensions_top_placeholder"),classes:y.inputClasses})}),(0,e.jsx)("div",{className:"g-col-xs-3 co-settings__col",children:(0,e.jsx)(u.A,{id:`${y.id}_right`,type:"unit",group:y.group,label:window.translate("Legacy_settings_dimensions_right"),value:y.value.right?y.tpl.unit(y.value.right,!0):0,placeholder:window.translate("Legacy_settings_dimensions_right_placeholder"),classes:y.inputClasses})}),(0,e.jsx)("div",{className:"g-col-xs-3 co-settings__col",children:(0,e.jsx)(u.A,{id:`${y.id}_bottom`,type:"unit",group:y.group,label:window.translate("Legacy_settings_dimensions_bottom"),value:y.value.bottom?y.tpl.unit(y.value.bottom,!0):0,placeholder:window.translate("Legacy_settings_dimensions_bottom_placeholder"),classes:y.inputClasses})}),(0,e.jsx)("div",{className:"g-col-xs-3 co-settings__col",children:(0,e.jsx)(u.A,{id:`${y.id}_left`,type:"unit",group:y.group,label:window.translate("Legacy_settings_dimensions_left"),value:y.value.left?y.tpl.unit(y.value.left,!0):0,placeholder:window.translate("Legacy_settings_dimensions_left_placeholder"),classes:y.inputClasses})})]}))},29083:function(fe,F,i){"use strict";i.d(F,{f:function(){return m}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.defineProperties,y=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,x=(c,o,l)=>o in c?f(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,C=(c,o)=>{for(var l in o||(o={}))w.call(o,l)&&x(c,l,o[l]);if(n)for(var l of n(o))E.call(o,l)&&x(c,l,o[l]);return c},v=(c,o)=>b(c,y(o));const m=(0,u.I)(c=>(0,e.jsx)("input",v(C({type:"hidden",name:c.id,className:"js-co-settings__elem","data-id":c.id,value:c.value},c.group?{"data-group":c.group}:{}),{"data-type":"hidden"})))},92610:function(fe,F,i){"use strict";i.d(F,{u:function(){return f}});var e=i(86070),u=i(14154);const f=(0,u.I)(b=>{var y;return b.items&&b.items.length>0?(y=b.items)==null?void 0:y.map(n=>(0,e.jsxs)("div",{className:"js-cm-setting-list__item cm-setting-list__item cm-setting-list__item--border","data-value":n.id,children:[(0,e.jsxs)("div",{className:"cm-setting-list__col cm-setting-list__col--value",children:[(0,e.jsx)("i",{className:"icon-bars js-cm-setting-list__move cm-setting-list__icon"}),(0,e.jsx)("div",{className:"cm-setting-list__text-value",children:n.label}),(0,e.jsx)("i",{className:"ca-badge ca-badge--neutral",children:n.type})]}),(0,e.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,e.jsx)("i",{className:"fi-settings js-cm-setting-list__edit cm-setting-list__icon"})}),n.removable!==!1&&n.removable!=="false"?(0,e.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,e.jsx)("i",{"aria-label":"Delete",role:"button",tabIndex:0,className:"ca-icon--trash js-cm-setting-list__remove cm-setting-list__icon ca-icon--sm"})}):null,(0,e.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,e.jsx)("i",{"aria-label":"Settings",role:"button",tabIndex:0,className:"ca-icon--settings js-cm-setting-list__edit cm-setting-list__icon ca-icon--sm"})})]},n.id)):(0,e.jsx)("div",{className:"co-settings__blank",children:b.label_none})})},60525:function(fe,F,i){"use strict";i.d(F,{M:function(){return f}});var e=i(86070),u=i(14154);const f=(0,u.I)(b=>{var y;return b.items&&b.items.length>0?(y=b.items)==null?void 0:y.map(n=>(0,e.jsxs)("div",{className:"js-cm-setting-list__item cm-setting-list__item cm-setting-list__item--border","data-value":n.id,children:[(0,e.jsxs)("div",{className:"cm-setting-list__col cm-setting-list__col--value",children:[(0,e.jsx)("i",{className:"icon-bars js-cm-setting-list__move cm-setting-list__icon"}),(0,e.jsx)("div",{className:"cm-setting-list__text-value",children:n.label}),(0,e.jsx)("i",{className:"ca-badge ca-badge--neutral",children:n.type})]}),(0,e.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,e.jsx)("i",{className:"fi-settings js-cm-setting-list__edit cm-setting-list__icon"})}),parseInt(n.id)?(0,e.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,e.jsx)("i",{className:"ca-icon--trash js-cm-setting-list__remove cm-setting-list__icon ca-icon--sm"})}):null,(0,e.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,e.jsx)("i",{className:"ca-icon--settings js-cm-setting-list__edit cm-setting-list__icon ca-icon--sm"})})]},n.id)):(0,e.jsx)("div",{className:"co-settings__blank",children:b.label_none})})},56754:function(fe,F,i){"use strict";i.d(F,{Q:function(){return x}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,w=(C,v,m)=>v in C?f(C,v,{enumerable:!0,configurable:!0,writable:!0,value:m}):C[v]=m,E=(C,v)=>{for(var m in v||(v={}))y.call(v,m)&&w(C,m,v[m]);if(b)for(var m of b(v))n.call(v,m)&&w(C,m,v[m]);return C};const x=(0,u.I)(C=>{var v;return C.items&&C.items.length>0?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("header",{className:"cm-setting-list__header",children:[(0,e.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--value",children:" Value "}),(0,e.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--default-label",children:" Default "}),(0,e.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings"})]}),(v=C.items)==null?void 0:v.map(m=>m.value?(0,e.jsxs)("div",{className:"js-cm-setting-list__item cm-setting-list__item","data-value":m.value,"data-id":m.id,children:[(0,e.jsxs)("div",{className:"cm-setting-list__col cm-setting-list__col--value",children:[(0,e.jsx)("i",{className:"icon-bars cm-setting-list__move js-cm-setting-list__move cm-setting-list__icon"}),(0,e.jsx)("div",{className:"cm-setting-list__text-value",children:m.value})]}),(0,e.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,e.jsxs)("label",{className:"ca-radio ca-radio--sm",children:[(0,e.jsx)("input",E({type:"checkbox",value:m.default?"true":"false",name:"select_default",className:"ca-radio__radio js-cm-setting-list__actions-item","data-item-processor":"defaultValue"},m.default?{checked:!0}:{})),(0,e.jsx)("span",{className:"ca-radio__bubble"})]})}),(0,e.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,e.jsx)("i",{className:"ca-icon--trash cm-setting-list__remove js-cm-setting-list__remove cm-setting-list__icon"})})]},m.id):null)]}):(0,e.jsx)("div",{className:"co-settings__blank cm-setting-list__blank",children:window.translate("SettingsElementList_empty")})})},83147:function(fe,F,i){"use strict";i.d(F,{N:function(){return b}});var e=i(86070),u=i(75573),f=i(14154);const b=(0,f.I)(y=>{var n;return(0,e.jsx)("div",{className:"cm-setting-list__no-header",children:y.items&&y.items.length>0?(n=y.items)==null?void 0:n.map((w,E)=>w.value?(0,e.jsx)("div",{className:"js-cm-setting-list__item cm-setting-list__item","data-value":w.value,children:(0,e.jsxs)("label",{className:"cm-setting-list__col",children:[(0,e.jsx)(u.z,{name:"display",disabled:y.isLast&&w.display,value:w.value,checked:w.display,classes:"js-cm-setting-list__set-display"}),(0,e.jsx)("span",{className:"cm-setting-list--label",children:w.name})]})},E):null):(0,e.jsx)("div",{className:"co-settings__blank cm-setting-list__blank",children:" No values defined "})})})},63334:function(fe,F,i){"use strict";i.d(F,{J:function(){return f}});var e=i(86070),u=i(14154);const f=(0,u.I)(b=>{var y;return b.items&&b.items.length>0?(y=b.items)==null?void 0:y.map((n,w)=>n.value?(0,e.jsxs)("div",{className:"js-cm-setting-list__item cm-setting-list__item","data-value":n.value,children:[(0,e.jsxs)("div",{className:"cm-setting-list__col cm-setting-list__col--value",children:[(0,e.jsx)("i",{className:"icon-bars cm-setting-list__move js-cm-setting-list__move cm-setting-list__icon"}),(0,e.jsx)("div",{className:"cm-setting-list__text-value",children:n.name})]}),(0,e.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,e.jsx)("i",{className:"ca-icon--settings js-cm-setting-list__edit cm-setting-list__icon"})}),(0,e.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,e.jsx)("i",{className:"ca-icon--trash cm-setting-list__remove js-cm-setting-list__remove cm-setting-list__icon"})})]},w):null):(0,e.jsx)("div",{className:"co-settings__blank cm-setting-list__blank",children:b.label_none})})},97866:function(fe,F,i){"use strict";i.d(F,{i:function(){return x}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,w=(C,v,m)=>v in C?f(C,v,{enumerable:!0,configurable:!0,writable:!0,value:m}):C[v]=m,E=(C,v)=>{for(var m in v||(v={}))y.call(v,m)&&w(C,m,v[m]);if(b)for(var m of b(v))n.call(v,m)&&w(C,m,v[m]);return C};const x=(0,u.I)(C=>(0,e.jsxs)(e.Fragment,{children:[C.label?(0,e.jsx)("label",{className:"cm-setting__label cm-setting-list__label",children:C.label}):null,(0,e.jsxs)("div",{className:"cm-setting-list__wrapper",children:[(0,e.jsx)("div",{className:"cm-setting-list__add-section",children:(0,e.jsx)("input",{spellCheck:"false",autoComplete:"off",className:"cm-setting__input cm-setting-list__add-input js-cm-setting-list__add-input",placeholder:window.translate("Legacy_setting_list_wrap_default_placeholder")})}),(0,e.jsx)("div",{className:"js-cm-setting-list__items cm-setting-list__items",children:typeof C.templates.listReact=="function"?(0,e.jsx)(C.templates.listReact,E({},C)):null})]})]}))},28147:function(fe,F,i){"use strict";i.d(F,{P:function(){return x}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,w=(C,v,m)=>v in C?f(C,v,{enumerable:!0,configurable:!0,writable:!0,value:m}):C[v]=m,E=(C,v)=>{for(var m in v||(v={}))y.call(v,m)&&w(C,m,v[m]);if(b)for(var m of b(v))n.call(v,m)&&w(C,m,v[m]);return C};const x=(0,u.I)(C=>(0,e.jsxs)(e.Fragment,{children:[C.label?(0,e.jsx)("label",{className:"cm-setting__label cm-setting-list__label",children:C.label}):null,(0,e.jsx)("div",{className:"cm-setting-list__wrapper",children:(0,e.jsx)("div",{className:"js-cm-setting-list__items cm-setting-list__items",children:typeof C.templates.listReact=="function"?(0,e.jsx)(C.templates.listReact,E({},C)):null})})]}))},44318:function(fe,F,i){"use strict";i.d(F,{B:function(){return l}});var e=i(86070),u=i(46223),f=i(45924),b=i(63334),y=i(14154),n=Object.defineProperty,w=Object.defineProperties,E=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,m=(h,g,j)=>g in h?n(h,g,{enumerable:!0,configurable:!0,writable:!0,value:j}):h[g]=j,c=(h,g)=>{for(var j in g||(g={}))C.call(g,j)&&m(h,j,g[j]);if(x)for(var j of x(g))v.call(g,j)&&m(h,j,g[j]);return h},o=(h,g)=>w(h,E(g));const l=(0,y.I)(h=>(0,e.jsxs)(e.Fragment,{children:[h.label?(0,e.jsx)("label",{className:"cm-setting__label cm-setting-list__label",children:h.label}):null,(0,e.jsxs)("div",{className:"cm-setting-list__wrapper",children:[(0,e.jsxs)("div",{className:"cm-setting-list__add-section",children:[(0,e.jsx)("div",{className:"cm-setting-list__btn-bar",children:(0,e.jsx)("button",o(c({type:"button"},h.disabled?{disabled:!0}:{}),{className:(0,u.h)(["cm-btn cm-btn--default js-cm-setting-list__add",f.OA]),children:h.label_add||"Add"}))}),(0,e.jsx)("div",{className:"cm-setting-list__form-container js-cm-setting-list__form-container"})]}),(0,e.jsx)("div",{className:"js-cm-setting-list__items cm-setting-list__items",children:h.templates.list?typeof h.templates.listReact=="function"?(0,e.jsx)(h.templates.listReact,c({},h)):null:(0,e.jsx)(b.J,c({},h))})]})]}))},61447:function(fe,F,i){"use strict";i.d(F,{v:function(){return c}});var e=i(86070),u=i(44318),f=i(14154),b=Object.defineProperty,y=Object.defineProperties,n=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,C=(o,l,h)=>l in o?b(o,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):o[l]=h,v=(o,l)=>{for(var h in l||(l={}))E.call(l,h)&&C(o,h,l[h]);if(w)for(var h of w(l))x.call(l,h)&&C(o,h,l[h]);return o},m=(o,l)=>y(o,n(l));const c=(0,f.I)(o=>(0,e.jsx)("div",m(v(v(v(v(v(m(v({className:"js-co-settings__elem cm-setting__elem cm-setting-list"},o.data?{"data-data":JSON.stringify(o.data)}:{}),{"data-items":JSON.stringify({items:o.items||[]})}),o.readonly?{"data-readonly":o.readonly}:{}),o.templates.list?{"data-template-list":o.templates.list}:{}),o.templates.wrap?{"data-template-wrap":o.templates.wrap}:{}),o.templates.add?{"data-template-add":o.templates.add}:{}),o.templates.edit?{"data-template-edit":o.templates.edit}:{}),{"data-id":o.id,"data-type":"list",children:o.templates&&o.templates.wrap?typeof o.templates.wrapReact=="function"?(0,e.jsx)(o.templates.wrapReact,v({},o)):null:o.templates&&o.templates.add&&o.templates.edit?(0,e.jsx)(u.B,v({},o)):null})))},70402:function(fe,F,i){"use strict";i.d(F,{w:function(){return m}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.defineProperties,y=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,x=(c,o,l)=>o in c?f(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,C=(c,o)=>{for(var l in o||(o={}))w.call(o,l)&&x(c,l,o[l]);if(n)for(var l of n(o))E.call(o,l)&&x(c,l,o[l]);return c},v=(c,o)=>b(c,y(o));const m=(0,u.I)(c=>(0,e.jsx)("div",v(C({className:"js-co-settings__elem cm-setting__elem cm-setting-ratio","data-id":c.id,"data-type":"ratio"},c.group?{"data-group":c.group}:{}),{children:(0,e.jsxs)("div",{className:"cm-setting__preview",children:[c.label?(0,e.jsx)("label",{htmlFor:c.id,className:"cm-setting__label",children:c.label}):null,(0,e.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--xs",children:[(0,e.jsx)("button",{type:"button","data-ratio":"original","data-test-id":"crop-ratio",className:` cm-btn cm-btn--default cm-setting-ratio__btn js-cm-setting-ratio__ratio ${c.size==="xs"?" cm-btn--xs ":""} ${!c.value||c.value==="original"?" state-active ":""}`,children:window.translate("Legacy_setting_elem_ratio_original")}),c.lockAspectRatio!==!0?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("button",{type:"button","data-ratio":"16:9","data-test-id":"crop-ratio",className:` cm-btn cm-btn--default cm-setting-ratio__btn js-cm-setting-ratio__ratio ${c.size==="xs"?" cm-btn--xs ":""} ${c.value==="16:9"?" state-active ":""}`,children:window.translate("Legacy_setting_elem_ratio_16_9")}),(0,e.jsx)("button",{type:"button","data-ratio":"4:3","data-test-id":"crop-ratio",className:` cm-btn cm-btn--default cm-setting-ratio__btn js-cm-setting-ratio__ratio ${c.size==="xs"?" cm-btn--xs ":""} ${c.value==="4:3"?" state-active ":""}`,children:window.translate("Legacy_setting_elem_ratio_4_3")}),(0,e.jsx)("button",{type:"button","data-ratio":"square","data-test-id":"crop-ratio",className:` cm-btn cm-btn--default cm-setting-ratio__btn js-cm-setting-ratio__ratio ${c.size==="xs"?" cm-btn--xs ":""} ${c.value==="square"?" state-active ":""}`,children:window.translate("Legacy_setting_elem_ratio_square")}),(0,e.jsx)("button",{type:"button","data-ratio":"custom","data-test-id":"crop-ratio",className:` cm-btn cm-btn--default cm-setting-ratio__btn js-cm-setting-ratio__ratio ${c.size==="xs"?" cm-btn--xs ":""} ${c.value==="custom"?" state-active ":""}`,children:window.translate("Legacy_setting_elem_ratio_custom")})]}):null]})]})})))},2910:function(fe,F,i){"use strict";i.d(F,{p:function(){return c}});var e=i(86070),u=i(95376),f=i(14154),b=Object.defineProperty,y=Object.defineProperties,n=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,C=(o,l,h)=>l in o?b(o,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):o[l]=h,v=(o,l)=>{for(var h in l||(l={}))E.call(l,h)&&C(o,h,l[h]);if(w)for(var h of w(l))x.call(l,h)&&C(o,h,l[h]);return o},m=(o,l)=>y(o,n(l));const c=(0,f.I)(o=>(0,e.jsxs)("div",{className:`cm-setting__preview ${o.richtext_classes}`,children:[o.label?(0,e.jsx)("div",{className:"cm-setting__label cm-setting-richtext__label",children:o.label}):null,(0,e.jsx)("div",m(v(v({id:o.id,name:o.id,spellCheck:"false",tabIndex:-1,className:"cm-setting cm-setting__input cm-setting-richtext__editor js-cm-setting__richtext-editor"},o.disabled?{disabled:!0}:{}),o.readonly?{readOnly:!0}:{}),{children:(0,u.Ay)(o.value)}))]}))},5944:function(fe,F,i){"use strict";i.d(F,{O:function(){return C}});var e=i(86070),u=i(2910),f=i(14154),b=Object.defineProperty,y=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,E=(v,m,c)=>m in v?b(v,m,{enumerable:!0,configurable:!0,writable:!0,value:c}):v[m]=c,x=(v,m)=>{for(var c in m||(m={}))n.call(m,c)&&E(v,c,m[c]);if(y)for(var c of y(m))w.call(m,c)&&E(v,c,m[c]);return v};const C=(0,f.I)(v=>(0,e.jsx)("div",{className:"js-co-settings__elem cm-setting__elem","data-id":v.id,"data-type":"richtext","data-placeholder":v.placeholder||"","data-toolbar":JSON.stringify(v.toolbar||{}),"data-set":v.set||"",children:(0,e.jsx)(u.p,x({},v))}))},85131:function(fe,F,i){"use strict";i.d(F,{j:function(){return o}});var e=i(86070),u=i(93277),f=i(47929),b=i(14154),y=Object.defineProperty,n=Object.defineProperties,w=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,v=(l,h,g)=>h in l?y(l,h,{enumerable:!0,configurable:!0,writable:!0,value:g}):l[h]=g,m=(l,h)=>{for(var g in h||(h={}))x.call(h,g)&&v(l,g,h[g]);if(E)for(var g of E(h))C.call(h,g)&&v(l,g,h[g]);return l},c=(l,h)=>n(l,w(h));const o=(0,b.I)(l=>{var h;let g;return l.create?g=[{identifier:"cancel",label:window.translate("Legacy_btn_cancel"),style:u.Q.STYLE_SECONDARY},{identifier:"create",label:window.translate("Legacy_workspace_layer_prototyping_interaction_create_template"),style:u.Q.STYLE_PRIMARY}]:g=[{identifier:"cancel",label:window.translate("Legacy_btn_cancel"),style:u.Q.STYLE_SECONDARY}],(0,e.jsxs)("div",c(m(c(m({className:"js-co-settings__elem cm-setting__elem"},l.readonly?{"data-readonly":l.readonly}:{}),{"data-template-preview":l.templates.preview,"data-id":l.id}),l.clear_search?{"data-clear-search":l.clear_search}:{}),{"data-type":"search",children:[(0,e.jsxs)("div",{className:"cm-setting__preview cm-setting-search__preview js-cm-setting-search__preview",children:[(0,e.jsx)("label",{htmlFor:l.id,className:"cm-setting__label",children:l.label}),(0,e.jsx)("div",{className:"js-cm-setting-search__preview-content cm-setting-search__preview-content",children:typeof l.templates.previewReact=="function"?(0,e.jsx)(l.templates.previewReact,m({},l.previewData)):null}),(0,e.jsx)("input",m(c(m({className:"js-cm-setting-search__value cm-setting-search__value",name:l.id,type:"text"},l.required?{required:!0}:{}),{value:""}),l.msg?{"data-msg":l.msg}:{}))]}),(0,e.jsx)("div",{className:"cm-setting__details js-cm-setting__details",children:(0,e.jsxs)("div",{className:"js-cm-setting-search__chooser",children:[(0,e.jsxs)("div",{className:"cm-setting__bar js-cm-setting__bar",children:[(0,e.jsx)("label",{htmlFor:l.id,className:"cm-setting__label",children:l.searchlabel?l.searchlabel:"Search"}),(0,e.jsx)("input",c(m({autoComplete:"off",className:"cm-setting__input js-cm-setting-search__input"},l.placeholder?{placeholder:l.placeholder}:{}),{id:`search-${l.id}-search`}))]}),(0,e.jsx)("div",{className:"cm-setting-search__items js-cm-setting-search__items",id:`search-${l.id}-content`,children:l.data?l.templates&&l.templates.content?typeof l.templates.contentReact=="function"?(0,e.jsx)(l.templates.contentReact,m({},l)):null:l.templates&&l.templates.item?(h=l.data)==null?void 0:h.map((j,$)=>typeof l.templates.itemReact=="function"?(0,e.jsx)(l.templates.itemReact,m({},j),$):null):null:null}),(0,e.jsx)("div",c(m({className:"cm-btn-bar cm-btn-bar--footer cm-setting__actions cm-setting__actions--flyout js-cm-setting__actions"},l.create?{"data-template":l.templates.create}:{}),{children:(0,e.jsx)(f.I,{buttons:g,size:u.Q.SIZE_LARGE,background:u.Q.BACKGROUND_BLACK_05})}))]})})]}))})},67620:function(fe,F,i){"use strict";i.d(F,{f:function(){return b}});var e=i(86070),u=i(62878),f=i(14154);const b=(0,f.I)(y=>(0,e.jsxs)(e.Fragment,{children:[y.readonly?null:(0,e.jsx)("div",{className:"cm-setting-tags__search js-cm-setting-tags__search",children:(0,e.jsx)(u.A,{id:`${y.id}_query`,label:y.label,value:y.value,readonly:y.readonly,border:!0,msg:window.translate("Legacy_no_tag_provided_error_message"),placeholder:y.placeholder})}),(0,e.jsx)("div",{className:`cm-setting-tags__results js-cm-setting-tags__results ${y.modal?"cm-setting-tags__results--modal":""} ${y.results_overflow_scroll?"cm-setting-tags__results--overflow-scroll":""}`}),y.autoTaggingIsEnabled&&y.autoTaggingIsSupported?(0,e.jsxs)("div",{className:"cm-setting-tags__autotag-container",children:[(0,e.jsx)("div",{className:`cm-setting-tags__toggle ${y.autoTaggingIsRunning?"cm-setting-tags__toggle--in-progress":"js-cm-setting-tags__toggle"}`,children:(0,e.jsxs)("label",{className:"cm-setting-tags__label",children:["Suggested Tags"," ",y.autoTaggingIsRunning?(0,e.jsx)("div",{className:"cm-setting-tags__badge",children:"in progress"}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("i",{className:"icon-angle-down cm-setting-tags__caret cm-setting-tags__caret--down"}),(0,e.jsx)("i",{className:"icon-angle-up cm-setting-tags__caret cm-setting-tags__caret--up"})]})]})}),y.autoTaggingFailed?(0,e.jsx)("div",{className:"cm-setting-tags__results cm-setting-tags__results--autotags",children:(0,e.jsxs)("div",{className:"cm-setting-tags__text",children:["Suggested Tag generation for this asset has failed. Please contact us:"," ","support@frontify.com."]})}):(0,e.jsx)("div",{className:"cm-setting-tags__results cm-setting-tags__results--autotags js-cm-setting-tags__results--autotags"})]}):null]}))},30543:function(fe,F,i){"use strict";i.d(F,{e:function(){return c}});var e=i(86070),u=i(67620),f=i(14154),b=Object.defineProperty,y=Object.defineProperties,n=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,C=(o,l,h)=>l in o?b(o,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):o[l]=h,v=(o,l)=>{for(var h in l||(l={}))E.call(l,h)&&C(o,h,l[h]);if(w)for(var h of w(l))x.call(l,h)&&C(o,h,l[h]);return o},m=(o,l)=>y(o,n(l));const c=(0,f.I)(o=>(0,e.jsx)("div",m(v(m(v(v(v(v({className:`js-co-settings__elem cm-setting__elem cm-setting-tags ${o.modal?"cm-setting-tags--modal":""}`,"data-type":"tags","data-tags":JSON.stringify(o.tags||[]),"data-project-id":o.projectId,"data-screens":JSON.stringify(o.screens||[]),"data-sets":JSON.stringify(o.sets||[]),"data-id":o.id},o.group?{"data-group":o.group}:{}),o.readonly?{"data-readonly":o.readonly}:{}),o.searchApi?{"data-search-api":o.searchApi}:{}),o.searchFilteredBy?{"data-search-filtered-by":o.searchFilteredBy}:{}),{"data-include-applied-auto-tags":o.includeAppliedAutoTags||!1}),o.label_none?{"data-label-none":o.label_none}:{}),{children:(0,e.jsx)(u.f,v({},o))})))},62878:function(fe,F,i){"use strict";i.d(F,{A:function(){return c}});var e=i(86070),u=i(95376),f=i(14154),b=Object.defineProperty,y=Object.defineProperties,n=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,C=(o,l,h)=>l in o?b(o,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):o[l]=h,v=(o,l)=>{for(var h in l||(l={}))E.call(l,h)&&C(o,h,l[h]);if(w)for(var h of w(l))x.call(l,h)&&C(o,h,l[h]);return o},m=(o,l)=>y(o,n(l));const c=(0,f.I)(o=>{var l;return(0,e.jsxs)("div",m(v(v({className:`js-co-settings__elem cm-setting__elem${o.border?" state-border":""}${o.modifier?` cm-setting-text--${o.modifier}`:""}`,"data-id":o.id,"data-type":"text"},o.group?{"data-group":o.group}:{}),o.nolive?{"data-nolive":o.nolive}:{}),{children:[(0,e.jsxs)("div",{className:"cm-setting__preview cm-setting__bar js-cm-setting__bar",children:[o.label?(0,e.jsxs)("label",{htmlFor:o.id,className:"cm-setting__label",children:[o.label,o.helperLink&&o.helperText?(0,e.jsx)("a",{className:"cm-setting__label-link",target:"_blank",href:o.helperLink,children:o.helperText}):null]}):null,(0,e.jsxs)("div",{className:"cm-setting__group",children:[(0,e.jsx)("span",{className:"cm-setting__group-prefix js-cm-setting__group-prefix",children:o.prefix?(0,u.Ay)(o.prefix):null}),(0,e.jsx)("div",{className:"cm-setting__group-wrap",children:(0,e.jsx)("input",v(v(v(v(v(v(v(v(v(v(v(v(v({id:o.id,className:`cm-setting__input js-cm-setting__input${o.classes?` ${o.classes}`:""}`,name:o.id,spellCheck:"false",autoComplete:"off",formNoValidate:!0},o.placeholder?{placeholder:o.placeholder}:{}),o.minValue?{min:o.minValue}:{}),o.maxValue?{max:o.maxValue}:{}),o.type==="number"&&o.allow_empty_number!=!0||o.type==="unit"?{value:o.value||0}:{value:o.value||""}),o.mask?{"data-mask":o.mask}:{}),o.type?{type:o.type}:{}),o.required?{required:!0}:{}),o.disabled?{disabled:!0}:{}),o.readonly?{readOnly:!0}:{}),o.maxlength?{maxLength:o.maxlength}:{}),o.minlength?{minlength:o.minlength}:{}),o.msg?{"data-msg":o.msg}:{}),o.inputData?o.tpl.renderDataAttributesAsObject((l=o.inputData)!=null?l:{}):{}))}),o.suffix?(0,e.jsx)("span",{className:"cm-setting__group-suffix",children:(0,u.Ay)(o.suffix)}):null,o.clearable?(0,e.jsx)("span",{className:"cm-setting__group-suffix cm-setting__clear-btn js-cm-setting__clear-btn",children:(0,e.jsx)("i",{className:"ca-icon--reject ca-icon--sm"})}):null]})]}),o.info?(0,e.jsx)("p",{className:"cm-setting__info",children:o.info}):null]}))})},87349:function(fe,F,i){"use strict";i.d(F,{D:function(){return m}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.defineProperties,y=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,x=(c,o,l)=>o in c?f(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,C=(c,o)=>{for(var l in o||(o={}))w.call(o,l)&&x(c,l,o[l]);if(n)for(var l of n(o))E.call(o,l)&&x(c,l,o[l]);return c},v=(c,o)=>b(c,y(o));const m=(0,u.I)(c=>(0,e.jsx)("div",v(C({className:`js-co-settings__elem cm-setting__elem${c.classes?` ${c.classes}`:""}${c.modifier?` cm-setting-text--${c.modifier}`:""}`,"data-id":c.id,"data-type":"text"},c.group?{"data-group":c.group}:{}),{children:(0,e.jsxs)("div",{className:"cm-setting__preview cm-setting__bar js-cm-setting__bar",children:[(0,e.jsx)("label",{htmlFor:c.id,className:"cm-setting__label",children:c.label}),(0,e.jsxs)("div",{className:"tw-relative",style:C({},c.maxHeight?{maxHeight:`${c.maxHeight}`}:{}),children:[(0,e.jsx)("textarea",v(C(C(C(C(C(v(C({spellCheck:"false",autoComplete:"off",className:`tw-break-words tw-box-border tw-w-full !tw-leading-4 !tw-text-sm tw-overflow-hidden ${c.maxHeight?"tw-overflow-auto ":""}tw-absolute tw-h-full js-cm-setting__input cm-setting__input lazyload`},c.placeholder?{placeholder:c.placeholder}:{}),{id:c.id,name:c.id}),c.rows?{rows:c.rows}:{}),c.required?{required:!0}:{}),c.disabled?{disabled:!0}:{}),c.readonly?{readOnly:!0}:{}),c.msg?{"data-msg":c.msg}:{}),{children:c.value?c.value:null})),(0,e.jsx)("div",{className:"tw-break-words tw-box-border tw-w-full tw-leading-4 tw-text-sm tw-invisible tw-pt-1 tw-pb-2 tw-min-h-[48px] js-cm-setting__textarea--grow"})]})]})})))},90307:function(fe,F,i){"use strict";i.d(F,{f:function(){return g}});var e=i(86070),u=i(46223),f=i(45924),b=i(75573),y=i(93791),n=i(78149),w=i(14154),E=Object.defineProperty,x=Object.defineProperties,C=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,o=(j,$,S)=>$ in j?E(j,$,{enumerable:!0,configurable:!0,writable:!0,value:S}):j[$]=S,l=(j,$)=>{for(var S in $||($={}))m.call($,S)&&o(j,S,$[S]);if(v)for(var S of v($))c.call($,S)&&o(j,S,$[S]);return j},h=(j,$)=>x(j,C($));const g=(0,w.I)(j=>{var $;const S={labelLocked:window.translate("Legacy_setting_toggle_lock_style_label_locked"),labelUnlocked:window.translate("Legacy_setting_toggle_lock_style_label_unlocked"),tooltipLocked:j.tooltipLocked,tooltipUnlocked:j.tooltipUnlocked};return(0,e.jsxs)("div",h(l(l(l(l({className:`js-co-settings__elem ${j.lockStyle?"":"cm-setting__elem"} ${j.classes?` ${j.classes}`:""} ${j.modifier?` cm-setting-toggle--${j.modifier}`:""}`,"data-id":j.id,"data-type":"toggle"},j.mapping?{"data-mapping-false":j.mapping[0],"data-mapping-true":j.mapping[1]}:{}),j.key?{"data-key":j.key}:{}),j.group?{"data-group":j.group}:{}),j.lockStyle?{"data-lock-style":j.lockStyle,"data-translations":JSON.stringify(S)}:{}),{children:[(0,e.jsx)("div",{className:`cm-setting__preview ${j.lockStyle?"cm-setting__preview--no-padding-top cm-setting__preview--no-padding-bottom":""}`,children:j.type==="checkbox"?(0,e.jsx)(b.z,{id:j.id,name:j.id,checked:j.checked,disabled:j.disabled,readonly:j.readonly,modifier:j.modifier,indeterminate:j.indeterminate||!1,classes:"cm-btn-toggle__input js-cm-setting-toggle",label:j.label,value:j.value,disable_label:j.disable_label,data:j.data}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("label",{className:(0,u.h)(["cm-btn-toggle cm-setting__value--inline js-cm-setting-switch",f.Lb]),children:[j.tooltip?(0,e.jsx)("div",{className:"cm-btn-toggle__tooltip tt-height-auto tt-top","data-tooltip":j.tooltip,children:(0,e.jsx)("i",{className:"cm-btn-toggle__tooltip-icon ca-icon--unknown ca-icon--sm"})}):null,(0,e.jsx)("input",l(h(l(l({id:j.id,name:j.id},j.checked?{checked:!0}:{}),j.disabled||j.readonly?{disabled:!0}:{}),{className:"cm-btn-toggle__input js-cm-setting-toggle",type:"checkbox"}),j.tpl.renderDataAttributesAsObject(($=j.data)!=null?$:{}))),j.lockStyle?j.checked?(0,e.jsx)("span",{className:`cm-setting-toggle__lock-icon js-cm-setting-toggle__lock-icon ${j.disabled?"cm-setting-toggle__lock-icon--disabled":""}`,children:(0,e.jsx)(n.V,{icon:y.l.ICON_LOCK,size:y.l.SIZE_MEDIUM})}):(0,e.jsx)("span",{className:`cm-setting-toggle__lock-icon js-cm-setting-toggle__lock-icon ${j.disabled?"cm-setting-toggle__lock-icon--disabled":""}`,children:(0,e.jsx)(n.V,{icon:y.l.ICON_OPEN_LOCK_FILLED,size:y.l.SIZE_MEDIUM,classes:"ca-icon--color-dark-blue"})}):(0,e.jsx)("i",{className:"cm-btn-toggle__toggle"})]}),(0,e.jsx)("div",{children:j.lockStyle?(0,e.jsx)("label",h(l({htmlFor:j.id,className:`cm-setting-toggle__lock-label js-cm-setting-toggle__lock-label ${j.checked?"":"cm-setting-toggle__lock-label--color-default"} ${j.disabled?"cm-setting-toggle__lock-label--disabled":""} ${S.tooltipLocked&&S.tooltipUnlocked?" cm-setting__tooltip tt-height-auto tt-left ":""}`},S.tooltipLocked&&S.tooltipUnlocked?{"data-tooltip":j.checked?S.tooltipLocked:S.tooltipUnlocked}:{}),{children:j.checked?S.labelLocked:S.labelUnlocked})):(0,e.jsxs)(e.Fragment,{children:[j.image?(0,e.jsx)("img",{className:"cm-setting__image--inline",src:j.image,alt:j.label,onError:({currentTarget:T})=>{T.onerror=null,j.imageError?T.src=j.imageError:T.style.visibility="hidden"}}):j.icon?(0,e.jsx)(n.V,{icon:j.icon.modifier,size:j.icon.size,classes:`cm-setting__image--inline ${j.icon.classes}`}):null,(0,e.jsx)("label",{htmlFor:j.id,className:"cm-setting__label--inline",children:j.label})]})})]})}),j.description?(0,e.jsx)("div",{className:"cm-setting-toggle--description",children:j.description}):null]}))})},83858:function(fe,F,i){"use strict";i.d(F,{u:function(){return m}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.defineProperties,y=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,x=(c,o,l)=>o in c?f(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,C=(c,o)=>{for(var l in o||(o={}))w.call(o,l)&&x(c,l,o[l]);if(n)for(var l of n(o))E.call(o,l)&&x(c,l,o[l]);return c},v=(c,o)=>b(c,y(o));const m=(0,u.I)(c=>{c.translations||(c.translations=[]);const o={openModalButton:c.translations.openModalButton||window.translate("Legacy_settings_userlist_add_user_initial"),addUserButtonInitial:c.translations.addUserButtonInitial||window.translate("Legacy_settings_userlist_add_user_initial"),addUserButtonSingular:c.translations.addUserButtonSingular||window.translate("Legacy_settings_userlist_add_user_singular"),addUserButtonPlural:c.translations.addUserButtonPlural||window.translate("Legacy_settings_userlist_add_user_other"),cancelButton:c.translations.cancelButton||window.translate("Legacy_btn_cancel"),modalTitle:c.translations.modalTitle,notFoundLabel:c.translations.notFoundLabel||window.translate("Legacy_settings_users_not_found"),requiredError:c.translations.requiredError||window.translate("Legacy_settings_userlist_required_default_error"),blankSlateMessage:c.translations.blankSlateMessage||window.translate("Legacy_settings_userlist_default_blankslate_message")};let l;return c.value?l=c.value:l={id:{users:[],groups:[]},data:{users:[],groups:[]}},(0,e.jsx)("div",v(C({className:`js-co-settings__elem cm-setting__elem cm-setting-userlist ${c.noIndent?"cm-setting__elem--noindent":""}`,"data-id":c.id},c.group?{"data-group":c.group}:{}),{"data-exclude-current-user":c.excludeCurrentUser===!0,"data-api-all-users":c.apiAllUsers,"data-api-all-groups":c.apiAllGroups,"data-initial-selection-ids":JSON.stringify(l.id),"data-initial-selection-data":JSON.stringify(l.data),"data-translations":JSON.stringify(o),"data-type":"userlist","data-required":c.required?"true":"false","data-show-blank-slate-image":c.showBlankSlateImage?"true":"false","data-unlimited-list-height":c.unlimitedListHeight?"true":"false"}))})},87080:function(fe,F,i){"use strict";i.d(F,{b:function(){return c}});var e=i(86070),u=i(75573),f=i(77345),b=i(23245),y=i(14154);const n=(0,y.I)(o=>{var l;return(0,e.jsxs)("div",{className:`cm-setting-users__list ${o.maxShowUsers?`cm-setting-users__list--max-users-height-${o.maxShowUsers}`:""} ${o.modifier?`cm-setting-users__list--${o.modifier}`:""} js-cm-setting-users__list-${o.id}`,children:[(0,e.jsx)("div",{className:`cm-setting-users__search-container js-cm-setting-users__search-container-${o.id}`,children:(l=o.users)==null?void 0:l.map(h=>{const g=h.communication_setting&&!h.communication_setting.subscribed,j=o.selectionRequired?"validate-multiselect":"";return(0,e.jsxs)("div",{className:"cm-setting-users__user js-cm-setting-users__user","data-jets":`${(h.name||"").toLowerCase()} ${(h.email||"").toLowerCase()}`,children:[(0,e.jsx)("div",{className:"cm-setting-users__avatar",children:(0,e.jsx)(b.p,{imageUrl:h.avatar_preview_url||h.preview_url_without_placeholder,gravatarHash:h.gravatar_hash,name:h.name,size:f.Z.SIZE_24,state:g?f.Z.STATE_DISABLED:f.Z.STATE_DEFAULT})}),(0,e.jsxs)("div",{className:`cm-setting-users__name-and-email ${g?"cm-setting-users__name-and-email--unsubscribed":""}`,children:[h.name?(0,e.jsxs)("div",{className:"cm-setting-users__name js-cm-setting-users__name",children:[h.name||"",o.id==="groups"&&h.users?(0,e.jsx)("span",{className:"ca-badge ca-badge--grey cm-setting-users__group-count",children:h.users.length}):null]}):null,(0,e.jsx)("div",{className:`cm-setting-users__email ${h.name?"":"cm-setting-users__email--email-only"}`,children:h.email||""})]}),h.name?null:(0,e.jsx)("span",{className:"ca-badge ca-badge--grey cm-setting-users__invitation-pending",children:window.translate("Legacy_group_add_users_invitation_pending")}),g?(0,e.jsx)("span",{className:"ca-badge ca-badge--grey cm-setting-users__invitation-pending",children:window.translate("Legacy_group_add_users_unsubscribed")}):null,(0,e.jsx)(u.z,{id:`${o.id}-${h.id}`,name:`${o.id}-${h.id}`,value:h.id,checked:h.checked,modifier:"sm",disabled:h.name===null||g,indeterminate:h.name===null,classes:`js-cm-setting-users__item-checkbox-input ${j}`,label_classes:"cm-setting-users__checkbox js-cm-setting-users__checkbox",data:{name:h.name,"user-id":h.id,msg:o.error_message||window.translate("Legacy_settings_users_validation_error")}})]},`user-${h.id}`)})}),o.searchEnabled?(0,e.jsx)("div",{className:`cm-setting-users__not-found js-cm-setting-users__not-found-${o.id}`}):null]})});var w=Object.defineProperty,E=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,v=(o,l,h)=>l in o?w(o,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):o[l]=h,m=(o,l)=>{for(var h in l||(l={}))x.call(l,h)&&v(o,h,l[h]);if(E)for(var h of E(l))C.call(l,h)&&v(o,h,l[h]);return o};const c=(0,y.I)(o=>(0,e.jsx)("div",{className:`js-co-settings__elem cm-setting__elem cm-setting-users ${o.modifier?`cm-setting-users--${o.modifier}`:""}`,"data-id":o.id,"data-type":"users","data-label-selectall":window.translate("Legacy_settings_users_selectall"),"data-label-unselectall":window.translate("Legacy_settings_users_unselectall"),"data-not-found-label":o.notFoundLabel,"data-search-enabled":o.searchEnabled,children:(0,e.jsxs)("div",{className:"cm-setting__preview cm-setting__bar js-cm-setting__bar",children:[o.label?(0,e.jsx)("label",{htmlFor:"users",className:"cm-setting__label",children:o.label}):null,(0,e.jsx)("div",{className:"cm-setting-users__validation-error js-cm-setting-users__validation-error"}),o.searchEnabled?(0,e.jsxs)("div",{className:`cm-setting-users__filter ${o.modifier?`cm-setting-users__filter--${o.modifier}`:""}`,children:[(0,e.jsx)("i",{className:"cm-setting-users__filter-icon ca-icon--search ca-icon--sm"}),(0,e.jsx)("input",{className:`cm-setting-users__filter-query js-cm-setting-users__filter-query-${o.id}`,type:"text",placeholder:`${o.searchPlaceholder?`${o.searchPlaceholder}`:`${window.translate("Legacy_placeholder_search")}`}`})]}):null,o.selectAllEnabled?(0,e.jsx)("div",{className:"cm-setting-users__select",children:(0,e.jsx)(u.z,{id:`select-${o.id}`,name:`select-${o.id}`,label:window.translate("Legacy_settings_users_selectall"),modifier:"sm",disabled:!1,classes:"js-cm-setting-users__select-all-checkbox",label_classes:"cm-setting-users__select-label js-cm-setting-users__select-label"})}):null,(0,e.jsx)(n,m({},o))]})}))},2555:function(fe,F,i){"use strict";i.d(F,{t:function(){return m}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.defineProperties,y=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,x=(c,o,l)=>o in c?f(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,C=(c,o)=>{for(var l in o||(o={}))w.call(o,l)&&x(c,l,o[l]);if(n)for(var l of n(o))E.call(o,l)&&x(c,l,o[l]);return c},v=(c,o)=>b(c,y(o));const m=(0,u.I)(c=>(0,e.jsxs)("li",{className:"cm-setting-attachments__item js-cm-setting-attachments__item","data-id":c.id,children:[(0,e.jsx)("div",{className:"cm-setting-attachments__filetype-icon-container",children:(0,e.jsx)("img",{alt:"",className:"ca-setting-attachments__attachment-icon",src:`/api/file-icon/file-${c.ext}.svg`})}),(0,e.jsxs)("div",{className:"ca-setting-attachments__attachment-description js-cm-settings__attachment-description",children:[(0,e.jsx)("span",v(C({title:c.name,className:"js-cm-setting-attachments__title cm-setting-attachments__title"},c.utils.account.hasPermission("edit")?{"data-editable":"true",contentEditable:"true"}:{}),{children:c.name})),(0,e.jsxs)("span",{className:"ca-setting-attachments__file-extension",children:[".",c.ext]})]}),(0,e.jsx)("div",{className:"ca-setting-attachments__attachment-size-container",children:(0,e.jsx)("span",{className:"cm-setting-attachments__size",children:c.filesize_human})}),(0,e.jsxs)("div",{className:"ca-setting-attachments__attachment-actions",children:[(0,e.jsx)("div",{className:"ca-setting-attachments__attachment-action",children:(0,e.jsx)("a",{download:c.name+(c.ext?`.${c.ext}`:""),href:`${c.link}?via-guideline=false`,className:"cm-btn cm-btn--link js-cm-btn-dropdown__toggle js-cm-setting-attachments__toggle js-cm-setting-attachments__download ca-setting-attachments__attachment-action-link","data-id":c.id,"data-attachment-extension":c.ext,children:(0,e.jsx)("i",{className:"ca-icon--download ca-icon--md"})})}),c.utils.account.hasPermission("edit")?(0,e.jsxs)("div",{className:"cm-btn-dropdown ca-setting-attachments__attachment-action",children:[(0,e.jsx)("button",{type:"button",className:"cm-btn cm-btn--link js-cm-btn-dropdown__toggle js-cm-setting-attachments__toggle ca-setting-attachments__attachment-action-link","data-id":c.id,children:(0,e.jsx)("i",{className:"ca-icon--trash ca-icon--md"})}),(0,e.jsx)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--right js-cm-btn-dropdown__menu js-cm-setting-attachments__menu"})]}):null]})]}))},91080:function(fe,F,i){"use strict";i.d(F,{R:function(){return c}});var e=i(86070),u=i(75573),f=i(14154),b=Object.defineProperty,y=Object.defineProperties,n=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,C=(o,l,h)=>l in o?b(o,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):o[l]=h,v=(o,l)=>{for(var h in l||(l={}))E.call(l,h)&&C(o,h,l[h]);if(w)for(var h of w(l))x.call(l,h)&&C(o,h,l[h]);return o},m=(o,l)=>y(o,n(l));const c=(0,f.I)(o=>{var l;return(0,e.jsx)("form",m(v(v(v(v(v(m(v({className:`js-co-settings__setting cm-setting cm-setting-checkbox ${o.class?`${o.class}`:""}`,"data-id":o.id},o.payload?{"data-payload":o.payload}:{}),{"data-type":"radioandcheckbox"}),o.group?{"data-group":o.group}:{}),o.api?{"data-api":o.api}:{}),o.min?{"data-min":o.min}:{}),o.max?{"data-max":o.max}:{}),o.method?{"data-method":o.method}:{}),{"data-instant":"true","data-save-single":o.save_single,"data-enable-changed-hook":o.enableChangedHook,"data-value-is-number":o.valueIsNumber,children:(0,e.jsxs)("div",{className:"cm-setting__preview",children:[o.label?(0,e.jsx)("div",{className:"cm-setting__label",children:o.label}):null,(0,e.jsx)("div",{className:`cm-setting-checkbox__group${o.modifier?` cm-setting-checkbox__group--${o.modifier}`:""}`,children:(l=o.options)==null?void 0:l.map((h,g)=>(0,e.jsx)("div",{className:`cm-setting-checkbox__option${o.modifier?` cm-setting-checkbox__option--${o.modifier}`:""}`,children:(0,e.jsx)(u.z,{id:h.id||`cb-${o.id}-${h.value}`,name:o.id,modifier:o.checkboxModifier,classes:"js-cm-setting-checkbox__input",label:h.label,checked:h.checked,value:h.value,disabled:h.disabled,disable_label:o.disable_label,indeterminate:h.indeterminate})},g))})]})}))})},15917:function(fe,F,i){"use strict";i.d(F,{J:function(){return c}});var e=i(86070),u=i(15575),f=i(14154),b=Object.defineProperty,y=Object.defineProperties,n=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,C=(o,l,h)=>l in o?b(o,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):o[l]=h,v=(o,l)=>{for(var h in l||(l={}))E.call(l,h)&&C(o,h,l[h]);if(w)for(var h of w(l))x.call(l,h)&&C(o,h,l[h]);return o},m=(o,l)=>y(o,n(l));const c=(0,f.I)(o=>(0,e.jsx)("div",m(v(v(v({className:` js-co-settings__setting cm-setting cm-setting-chooser ${o.modifier?` cm-setting-chooser--${o.modifier} `:""}`,"data-id":o.id,"data-type":"chooser","data-instant":"true"},o.readonly?{"data-readonly":o.readonly}:{}),o.api?{"data-api":o.api}:{}),o.group?{"data-group":o.group}:{}),{children:(0,e.jsx)(u.C,v({},o))})))},14587:function(fe,F,i){"use strict";i.d(F,{X:function(){return o}});var e=i(86070),u=i(49198),f=i.n(u),b=i(14154),y=Object.defineProperty,n=Object.defineProperties,w=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,v=(l,h,g)=>h in l?y(l,h,{enumerable:!0,configurable:!0,writable:!0,value:g}):l[h]=g,m=(l,h)=>{for(var g in h||(h={}))x.call(h,g)&&v(l,g,h[g]);if(E)for(var g of E(h))C.call(h,g)&&v(l,g,h[g]);return l},c=(l,h)=>n(l,w(h));const o=(0,b.I)(l=>(0,e.jsxs)("form",c(m(m(m(m(c(m(c(m({className:`js-co-settings__setting cm-setting cm-setting-color ${l.modifier?` cm-setting-color--${l.modifier}`:""}`},l.readonly?{"data-readonly":l.readonly}:{}),{"data-id":l.id}),l.api?{"data-api":l.api}:{}),{"data-color":`${l.value?`${l.value}`:"transparent"}`,"data-type":"color"}),l.set?{"data-set":l.set.join(",")}:{}),l.group?{"data-group":l.group}:{}),l.method?{"data-method":l.method}:{}),l.closeOnClickOutsidePicker?{"data-close-on-click-outside":"true"}:{}),{children:[(0,e.jsx)("div",{className:"cm-setting__preview",children:l.preview==="full"?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"cm-setting-color__preview--full",children:(0,e.jsx)("span",{className:"cm-setting-color__preview-inner-full js-cm-setting-color__preview",style:{backgroundColor:`${l.value?`${l.value}`:"transparent"}`},tabIndex:l.tabbable?0:-1})}),(0,e.jsx)("span",{className:"cm-setting-color__value cm-setting-color__value--full js-cm-setting-color__value",children:l.value?f()(l.value).toHexString():window.translate("Legacy_settings_color_picker_transparent")})]}):typeof l.preview_template=="function"?(0,e.jsx)(l.preview_template,m({},l)):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"cm-setting__value--inline",children:[(0,e.jsx)("span",{className:"cm-setting-color__value js-cm-setting-color__value",children:l.value?f()(l.value).toHexString():window.translate("Legacy_settings_color_picker_transparent")}),(0,e.jsx)("span",{className:"cm-setting-color__preview",children:(0,e.jsx)("span",{className:"cm-setting-color__preview-inner js-cm-setting-color__preview",style:{backgroundColor:`${l.value?`${l.value}`:"transparent"}`},tabIndex:l.tabbable?0:-1})})]}),(0,e.jsx)("label",{htmlFor:l.id,className:"cm-setting__label--inline js-cm-setting__label",children:l.label})]})}),(0,e.jsxs)("div",{className:`cm-setting__details js-cm-setting__details ${l.mode?`cm-setting-color__chooser--${l.mode}`:""} js-cm-setting-color__chooser lazyload`,children:[l.preview==="full"?(0,e.jsx)("label",{htmlFor:"color",className:"cm-setting__label--inline",children:window.translate("Legacy_settings_color_picker_color")}):null,l.picker?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"js-cm-setting-color__picker"}),(0,e.jsxs)("div",{className:"cm-setting-color__colors",children:[(0,e.jsxs)("div",{className:"cm-setting-color__color",children:[(0,e.jsx)("label",{className:"cm-setting-color__label",htmlFor:l.id,children:window.translate("Legacy_settings_color_picker_hex")}),(0,e.jsx)("input",{id:l.id,name:l.id,className:"cm-setting-color__input js-cm-setting-color__hex",value:`${l.value?`${f()(l.value).toHexString()}`:""}`,type:"text","aria-label":window.translate("Legacy_settings_color_picker_hex")})]}),(0,e.jsxs)("div",{className:"cm-setting-color__color",children:[(0,e.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__r",children:window.translate("Legacy_settings_color_picker_r")}),(0,e.jsx)("input",{id:"cm-setting-color__r",className:"cm-setting-color__input js-cm-setting-color__r",value:`${l.r?`${l.r}`:""}`,type:"text","aria-label":window.translate("Legacy_settings_color_picker_r")})]}),(0,e.jsxs)("div",{className:"cm-setting-color__color",children:[(0,e.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__g",children:window.translate("Legacy_settings_color_picker_g")}),(0,e.jsx)("input",{id:"cm-setting-color__g",className:"cm-setting-color__input js-cm-setting-color__g",value:`${l.g?`${l.g}`:""}`,type:"text","aria-label":window.translate("Legacy_settings_color_picker_g")})]}),(0,e.jsxs)("div",{className:"cm-setting-color__color",children:[(0,e.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__b",children:window.translate("Legacy_settings_color_picker_b")}),(0,e.jsx)("input",{id:"cm-setting-color__b",className:"cm-setting-color__input js-cm-setting-color__b",value:`${l.b?`${l.b}`:""}`,type:"text","aria-label":window.translate("Legacy_settings_color_picker_b")})]}),(0,e.jsxs)("div",{className:"cm-setting-color__color",children:[(0,e.jsx)("label",{className:"cm-setting-color__label",htmlFor:"cm-setting-color__a",children:window.translate("Legacy_settings_color_picker_alpha")}),(0,e.jsx)("input",{id:"cm-setting-color__a",className:"cm-setting-color__input js-cm-setting-color__a",value:`${l.a?`${l.a}`:"1"}`,type:"text","aria-label":window.translate("Legacy_settings_color_picker_alpha")})]})]})]}):null,l.palette?(0,e.jsx)("div",{className:"cm-setting-color__palette js-cm-setting-color__palette","data-palette":l.palette}):null]})]})))},27833:function(fe,F,i){"use strict";i.d(F,{H:function(){return o}});var e=i(86070),u=i(46223),f=i(45924),b=i(14154),y=Object.defineProperty,n=Object.defineProperties,w=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,v=(l,h,g)=>h in l?y(l,h,{enumerable:!0,configurable:!0,writable:!0,value:g}):l[h]=g,m=(l,h)=>{for(var g in h||(h={}))x.call(h,g)&&v(l,g,h[g]);if(E)for(var g of E(h))C.call(h,g)&&v(l,g,h[g]);return l},c=(l,h)=>n(l,w(h));const o=(0,b.I)(l=>{var h,g;return(0,e.jsx)("div",c(m(c(m(m({className:`cm-setting cm-setting-delete js-co-settings__setting ${l.type?`cm-setting-delete--${l.type}`:""} ${l.noborder?" cm-setting-delete--no-border ":""}`,"data-id":l.id},l.api?{"data-api":l.api}:{}),l.data?{"data-data":JSON.stringify(l.data)}:{}),{"data-instant":"true"}),l.method?{"data-method":l.method}:{}),{"data-type":"delete",children:l.type==="menu"?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"cm-btn-dropdown__item",children:(0,e.jsxs)("button",{className:(0,u.h)([f.Lb,"cm-btn-dropdown__link js-cm-setting-delete__btn"]),"data-test-id":"actions-delete",children:[(0,e.jsx)("i",{className:`ca-icon--${(h=l.label_icon)!=null?h:"trash"} cm-btn-dropdown__icon`}),(0,e.jsx)("span",{className:"cm-btn-dropdown__label",children:l.label})]})}),(0,e.jsxs)("div",{className:"cm-setting-delete__confirmation js-cm-setting-delete__confirmation","data-test-id":"delete-confirmation-dialog",children:[l.description?(0,e.jsx)("p",{className:"cm-setting-delete__desc",children:l.description}):null,(0,e.jsxs)("div",{className:"cm-setting-delete__actions cm-btn-bar cm-btn-bar--inline",children:[(0,e.jsx)("button",{type:"button",className:(0,u.h)([f.OA,"cm-btn cm-btn--sm cm-btn--danger js-cm-setting-delete__delete"]),"data-test-id":"actions-delete-confirm",children:l.delete_button_label?l.delete_button_label:window.translate("Legacy_btn_delete")}),(0,e.jsx)("button",{type:"button",className:(0,u.h)([f.OA,"cm-btn cm-btn--sm cm-btn--default js-cm-setting-delete__cancel"]),children:window.translate("Legacy_btn_cancel")})]})]}),(0,e.jsxs)("div",{className:"cm-setting-delete__error js-cm-setting-delete__error",children:[(0,e.jsx)("p",{className:"cm-setting-delete__desc cm-setting-delete__desc--error js-cm-setting-delete__error",children:l.error?l.error:null}),(0,e.jsx)("a",{className:"cm-btn cm-btn--sm cm-btn--danger cm-setting-delete-link js-cm-setting-delete-link",href:l.error_link?l.error_link.url:"",target:"_blank",children:l.error_link?l.error_link.text:""})]})]}):(0,e.jsxs)("div",{className:"cm-setting__preview",children:[(0,e.jsx)("button",{className:"cm-btn cm-btn--sm cm-setting-delete__btn js-cm-setting-delete__btn",children:l.label}),(0,e.jsxs)("div",{className:"cm-setting-delete__confirmation js-cm-setting-delete__confirmation","data-test-id":"delete-confirmation-dialog",children:[l.description?(0,e.jsx)("p",{className:"cm-setting-delete__desc",children:l.description}):null,(0,e.jsxs)("div",{className:"cm-setting-delete__actions cm-btn-bar cm-btn-bar--inline",children:[(0,e.jsx)("button",{type:"button",className:(0,u.h)([f.OA,"cm-btn cm-btn--sm",`cm-btn--${(g=l.btn_delete_class)!=null?g:"danger"}`,"js-cm-setting-delete__delete"]),"data-test-id":"actions-delete-confirm",children:l.btn_delete_label?l.btn_delete_label:window.translate("Legacy_btn_delete")}),(0,e.jsx)("button",{type:"button",className:(0,u.h)([f.OA,"cm-btn cm-btn--sm cm-btn--default js-cm-setting-delete__cancel"]),children:window.translate("Legacy_btn_cancel")})]})]}),(0,e.jsx)("div",{className:"cm-setting-delete__error js-cm-setting-delete__error",children:(0,e.jsx)("p",{className:"cm-setting-delete__desc cm-setting-delete__desc--error js-cm-setting-delete__error",children:l.error?l.error:null})})]})}))})},52939:function(fe,F,i){"use strict";i.d(F,{x:function(){return c}});var e=i(86070),u=i(90166),f=i(14154),b=Object.defineProperty,y=Object.defineProperties,n=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,C=(o,l,h)=>l in o?b(o,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):o[l]=h,v=(o,l)=>{for(var h in l||(l={}))E.call(l,h)&&C(o,h,l[h]);if(w)for(var h of w(l))x.call(l,h)&&C(o,h,l[h]);return o},m=(o,l)=>y(o,n(l));const c=(0,f.I)(o=>(0,e.jsx)("form",m(v(v(v(v(v(v(v({className:`js-co-settings__setting cm-setting cm-setting-dropdown ${o.formModifier||""} ${o.classes||""}`,"data-id":o.id,"data-type":"dropdown"},o.api?{"data-api":o.api}:{}),o.method?{"data-method":o.method}:{}),o.group?{"data-group":o.group}:{}),o.multiple_values?{"data-multiple-values":o.multiple_values}:{}),o.non_selection?{"data-non-selection":o.non_selection}:{}),o.float?{"data-float":"1"}:{}),o.readonly?{"data-readonly":"true"}:{}),{children:(0,e.jsxs)("div",{className:"cm-setting__preview cm-setting__preview--action cm-setting__bar js-cm-setting__bar",children:[(0,e.jsx)("label",{htmlFor:o.id,className:"cm-setting__label",children:o.label}),(0,e.jsx)("select",m(v({tabIndex:-1},o.readonly?{readOnly:!0}:{}),{id:o.id,name:o.id,"data-template":o.template?o.template:"c-dropdown",children:(0,e.jsx)(u.g,v({},o))}))]})})))},79485:function(fe,F,i){"use strict";i.d(F,{l:function(){return c}});var e=i(86070),u=i(64584),f=i(14154),b=Object.defineProperty,y=Object.defineProperties,n=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,C=(o,l,h)=>l in o?b(o,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):o[l]=h,v=(o,l)=>{for(var h in l||(l={}))E.call(l,h)&&C(o,h,l[h]);if(w)for(var h of w(l))x.call(l,h)&&C(o,h,l[h]);return o},m=(o,l)=>y(o,n(l));const c=(0,f.I)(o=>(0,e.jsx)("form",m(v(v(m(v({className:"js-co-settings__setting"},o.readonly?{"data-readonly":o.readonly}:{}),{"data-id":o.id,"data-type":"frame"}),o.api?{"data-api":o.api}:{}),o.group?m(v({},o.method?{"data-method":o.method}:{}),{"data-group":o.group}):{}),{"data-instant":"true",children:(0,e.jsx)(u.H,v({},o))})))},60435:function(fe,F,i){"use strict";i.d(F,{W:function(){return f}});var e=i(86070),u=i(14154);const f=(0,u.I)(b=>(0,e.jsxs)(e.Fragment,{children:["Size ",parseInt(b.value.width),"x",parseInt(b.value.height)," | X: ",parseInt(b.value.x)," Y:"," ",parseInt(b.value.y)]}))},49204:function(fe,F,i){"use strict";i.d(F,{n:function(){return n}});var e=i(86070),u=i(49290),f=i(2728),b=i(70402),y=i(14154);const n=(0,y.I)(w=>(0,e.jsxs)("div",{className:"cm-setting__details js-cm-setting__details",children:[(0,e.jsx)("div",{className:"js-cm-setting-image__cropper"}),w.ratiochooser?(0,e.jsx)("div",{className:"js-cm-setting-image__settings cm-setting-image__settings",children:(0,e.jsx)(b.w,{id:"ratio",value:w.ratio,size:"xs"})}):null,(0,e.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer cm-setting__actions cm-setting__actions--flyout js-cm-setting__actions",children:[(0,e.jsx)(u.t,{}),(0,e.jsx)(f.b,{}),w.disable_actions?null:(0,e.jsxs)("div",{className:"cm-btn-dropdown cm-btn--right",children:[(0,e.jsx)("button",{type:"button",className:"cm-btn cm-btn--default js-cm-btn-dropdown__toggle",children:(0,e.jsx)("i",{className:"icon-ellipsis-h"})}),(0,e.jsxs)("ul",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--right js-cm-btn-dropdown__menu",children:[(0,e.jsx)("li",{className:"cm-btn-dropdown__item",children:(0,e.jsx)("a",{className:"cm-btn-dropdown__link js-cm-setting-image__replace",href:"javascript:",children:"Replace"})}),(0,e.jsx)("li",{className:"cm-btn-dropdown__item cm-btn-dropdown__item--danger",children:(0,e.jsx)("a",{className:"cm-btn-dropdown__link js-cm-setting-image__delete",href:"javascript:",children:"Delete"})})]})]})]})]}))},82953:function(fe,F,i){"use strict";i.d(F,{l:function(){return c}});var e=i(86070),u=i(49204),f=i(14154),b=Object.defineProperty,y=Object.defineProperties,n=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,C=(o,l,h)=>l in o?b(o,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):o[l]=h,v=(o,l)=>{for(var h in l||(l={}))E.call(l,h)&&C(o,h,l[h]);if(w)for(var h of w(l))x.call(l,h)&&C(o,h,l[h]);return o},m=(o,l)=>y(o,n(l));const c=(0,f.I)(o=>(0,e.jsxs)("form",m(v(v(v(v(v(v(v(v(v(v(v(v(v(v(v(v({className:`js-co-settings__setting cm-setting cm-setting-image ${o.classes||""}`,"data-id":o.id,"data-type":"image","data-placeholder":o.placeholder||"/img/empty@2x.png","data-circle":`${o.circle?"true":"false"}`},o.disableCropping?{"data-disable-cropping":"true"}:{}),o.image_property?{"data-image-property":o.image_property}:{}),o.file_id?{"data-file-id":o.file_id}:{}),o.api?{"data-api":o.api}:{}),o.area?{"data-area-width":o.area.width,"data-area-height":o.area.height,"data-area-x":o.area.x,"data-area-y":o.area.y}:{}),o.acceptOnlyImages?{"data-accept-only-images":o.acceptOnlyImages}:{}),o.maxSize?{"data-max-size":o.maxSize}:{}),o.ratio?{"data-ratio":o.ratio}:{}),o.group?{"data-group":o.group}:{}),o.filetype?{"data-filetype":o.filetype}:{}),o.brand?{"data-brand":o.brand}:{}),o.project?{"data-project":o.project}:{}),o.accept?{"data-accept":o.accept}:{}),o.screen_id?{"data-screen-id":o.screen_id}:{}),o.dashboard?{"data-dashboard":o.dashboard}:{}),o.method?{"data-method":o.method}:{}),{children:[(0,e.jsxs)("div",{className:"cm-setting__preview",children:[(0,e.jsx)("div",{className:"cm-setting-image__image-wrap js-cm-setting-image__image-wrap",children:(0,e.jsx)("img",v(m(v({className:`cm-setting-image__image js-cm-setting-image__image${o.original?" state-available":""}`},o.original?{"data-original":o.original}:{}),{src:o.image||o.placeholder||"/img/empty@2x.png",tabIndex:o.tabbable?0:-1}),o.color?{style:{backgroundColor:`${o.color}`}}:{}))}),(0,e.jsxs)("div",{className:"cm-setting__label-wrap js-cm-setting__label",children:[(0,e.jsx)("h4",{className:"cm-setting__title",children:o.label}),o.description?(0,e.jsx)("p",{className:"cm-setting__desc",children:o.description}):null]}),(0,e.jsx)("input",{tabIndex:-1,type:"file",className:"cm-setting-image__input js-cm-setting-image__input",id:`image-${o.id}`,name:"files[]"})]}),(0,e.jsx)(u.n,v({},o))]})))},61872:function(fe,F,i){"use strict";i.d(F,{w:function(){return l}});var e=i(86070),u=i(93791),f=i(78149),b=i(14154),y=i(9862),n=Object.defineProperty,w=Object.defineProperties,E=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,m=(h,g,j)=>g in h?n(h,g,{enumerable:!0,configurable:!0,writable:!0,value:j}):h[g]=j,c=(h,g)=>{for(var j in g||(g={}))C.call(g,j)&&m(h,j,g[j]);if(x)for(var j of x(g))v.call(g,j)&&m(h,j,g[j]);return h},o=(h,g)=>w(h,E(g));const l=(0,b.I)(h=>(0,e.jsxs)("form",o(c(c(c(c(c(c({className:`js-co-settings__setting cm-setting-link ${h.modifier?` cm-setting-link--${h.modifier}`:""}`,"data-id":h.id,"data-instant":"true","data-type":"link"},h.api?{"data-api":h.api}:{}),h.group?{"data-group":h.group}:{}),h.method?{"data-method":h.method}:{}),h.readonly?{"data-readonly":h.readonly}:{}),h.autofocus?{"data-autofocus":h.autofocus}:{}),h.value?{"data-tooltip-link-label":h.value.tooltipLinkLabel}:{}),{noValidate:!0,children:[(0,e.jsx)("div",{className:"cm-setting",children:(0,e.jsxs)("div",{className:"cm-setting__preview cm-setting__bar js-cm-setting__bar",children:[(0,e.jsx)("label",{htmlFor:h.id,className:"cm-setting__label",children:h.label}),(0,e.jsx)("input",c(c(c(o(c({spellCheck:"false",tabIndex:-1,autoComplete:"off",className:"cm-setting__input js-cm-setting__input"},h.placeholder?{placeholder:h.placeholder}:{}),{id:h.id,name:h.id}),h.required?{required:!0}:{}),h.value&&h.value.url!="javascript:;"?{value:h.value.url||""}:{}),h.msg?{"data-msg":h.msg}:{}))]})}),(0,e.jsx)("div",{className:"cm-setting cm-setting__link-addons",children:(0,e.jsxs)("div",{className:"cm-setting__link-addons-item js-cm-setting__link-addons-item-linkchooser",children:[(0,e.jsx)(f.V,{icon:u.l.ICON_GUIDELINES,classes:"cm-setting__link-addons-item-icon",size:u.l.SIZE_MEDIUM}),(0,e.jsx)("span",{className:"cm-setting__link-addons-item-text",children:"Internal link (within this guideline)"}),(0,e.jsx)(f.V,{icon:u.l.ICON_CARET_RIGHT,classes:"cm-setting__link-addons-item-iconarrow",size:u.l.SIZE_MEDIUM})]})}),(0,y.R)("LINK_TEMPLATE_CHOOSER")?(0,e.jsx)("div",{className:"cm-setting cm-setting__link-addons",children:(0,e.jsxs)("div",{className:"cm-setting__link-addons-item js-cm-setting__link-addons-item-templatechooser",children:[(0,e.jsx)(f.V,{icon:u.l.ICON_TEMPLATES,classes:"cm-setting__link-addons-item-icon",size:u.l.SIZE_MEDIUM}),(0,e.jsx)("span",{className:"cm-setting__link-addons-item-text",children:"Create a publication from template"}),(0,e.jsx)(f.V,{icon:u.l.ICON_CARET_RIGHT,classes:"cm-setting__link-addons-item-iconarrow",size:u.l.SIZE_MEDIUM})]})}):null]})))},63817:function(fe,F,i){"use strict";i.d(F,{_:function(){return f}});var e=i(86070),u=i(14154);const f=(0,u.I)(b=>(0,e.jsxs)(e.Fragment,{children:["Size ",b.value.width," x ",b.value.height," | X: ",b.value.x," Y: ",b.value.y]}))},92960:function(fe,F,i){"use strict";i.d(F,{_:function(){return o}});var e=i(86070),u=i(93277),f=i(47929),b=i(14154),y=Object.defineProperty,n=Object.defineProperties,w=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,v=(l,h,g)=>h in l?y(l,h,{enumerable:!0,configurable:!0,writable:!0,value:g}):l[h]=g,m=(l,h)=>{for(var g in h||(h={}))x.call(h,g)&&v(l,g,h[g]);if(E)for(var g of E(h))C.call(h,g)&&v(l,g,h[g]);return l},c=(l,h)=>n(l,w(h));const o=(0,b.I)(l=>{var h;let g;return l.create?g=[{identifier:"cancel",label:window.translate("Legacy_btn_cancel"),style:u.Q.STYLE_SECONDARY},{identifier:"create",label:window.translate("Legacy_workspace_layer_prototyping_interaction_create_template"),style:u.Q.STYLE_PRIMARY}]:g=[{identifier:"cancel",label:window.translate("Legacy_btn_cancel"),style:u.Q.STYLE_SECONDARY}],(0,e.jsxs)("form",c(m(m(m(c(m(m({className:"js-co-settings__setting cm-setting"},l.readonly?{"data-readonly":l.readonly}:{}),l.api?{"data-api":l.api}:{}),{"data-id":l.id,"data-template-preview":l.templates.preview,"data-type":"search"}),l.method?{"data-method":l.method}:{}),l.clear_search?{"data-clear-search":l.clear_search}:{}),l.templates&&l.templates.item?{"data-template-item":l.templates.item}:{}),{"data-api-search":l.apiSearch,children:[(0,e.jsxs)("div",{className:"cm-setting__preview cm-setting-search__preview js-cm-setting-search__preview",children:[(0,e.jsx)("label",{htmlFor:l.id,className:"cm-setting__label",children:l.label}),(0,e.jsx)("div",{className:"js-cm-setting-search__preview-content cm-setting-search__preview-content",children:typeof l.templates.previewReact=="function"?(0,e.jsx)(l.templates.previewReact,m({},l.previewData)):null}),(0,e.jsx)("input",m(c(m({className:"js-cm-setting-search__value cm-setting-search__value",name:l.id,type:"text"},l.required?{required:!0}:{}),{value:""}),l.msg?{"data-msg":l.msg}:{}))]}),(0,e.jsx)("div",{className:"cm-setting__details js-cm-setting__details",children:(0,e.jsxs)("div",{className:"js-cm-setting-search__chooser",children:[(0,e.jsxs)("div",{className:"cm-setting__bar js-cm-setting__bar",children:[(0,e.jsx)("label",{htmlFor:l.id,className:"cm-setting__label",children:l.searchlabel?l.searchlabel:"Search"}),(0,e.jsx)("input",c(m({autoComplete:"off",className:"cm-setting__input js-cm-setting-search__input"},l.placeholder?{placeholder:l.placeholder}:{}),{id:`search-${l.id}-search`}))]}),(0,e.jsx)("div",{className:"cm-setting-search__items js-cm-setting-search__items",id:`search-${l.id}-content`,children:l.data?l.templates&&l.templates.content?typeof l.templates.contentReact=="function"?(0,e.jsx)(l.templates.contentReact,m({},l)):null:l.templates&&l.templates.item?(h=l.data)==null?void 0:h.map((j,$)=>typeof l.templates.itemReact=="function"?(0,e.jsx)(l.templates.itemReact,m({},j),$):null):null:null}),(0,e.jsx)("div",c(m({className:"cm-btn-bar cm-btn-bar--footer cm-setting__actions cm-setting__actions--flyout js-cm-setting__actions"},l.create?{"data-template":l.templates.create}:{}),{children:(0,e.jsx)(f.I,{buttons:g,size:u.Q.SIZE_LARGE,background:u.Q.BACKGROUND_BLACK_05})}))]})})]}))})},23189:function(fe,F,i){"use strict";i.d(F,{t:function(){return m}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.defineProperties,y=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,x=(c,o,l)=>o in c?f(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,C=(c,o)=>{for(var l in o||(o={}))w.call(o,l)&&x(c,l,o[l]);if(n)for(var l of n(o))E.call(o,l)&&x(c,l,o[l]);return c},v=(c,o)=>b(c,y(o));const m=(0,u.I)(c=>(0,e.jsx)("form",v(C(C(C(C(C({className:`js-co-settings__setting cm-setting ${c.formModifier?` ${c.formModifier}`:""} ${c.formClasses||""} ${c.border===!1?"cm-setting--borderless":""} ${c.disabled?"cm-setting-text--disabled":""}`,"data-id":c.id,"data-type":"text"},c.multiple_values?{"data-multiple-values":c.multiple_values}:{}),c.api?{"data-api":c.api}:{}),c.group?{"data-group":c.group}:{}),c.method?{"data-method":c.method}:{}),c.nolive?{"data-nolive":c.nolive}:{}),{noValidate:!0,children:(0,e.jsxs)("div",{className:"cm-setting__preview cm-setting__preview--action cm-setting__bar js-cm-setting__bar",children:[(0,e.jsx)("label",{htmlFor:c.id,className:"cm-setting__label",children:c.label}),(0,e.jsxs)("div",{className:"cm-setting__group",children:[(0,e.jsx)("span",{className:"cm-setting__group-prefix js-cm-setting__group-prefix",children:c.prefix?c.prefix:null}),(0,e.jsx)("div",{className:"cm-setting__group-wrap",children:(0,e.jsx)("input",C(C(C(C(C(C(C(C(v(C({id:c.id,name:c.id,spellCheck:"false",tabIndex:c.tabbable?0:-1,autoComplete:"off",className:`cm-setting__input js-cm-setting__input${c.classes?` ${c.classes}`:""}`},c.placeholder?{placeholder:c.placeholder}:{}),{value:`${c.type==="number"&&c.allow_empty_number!=!0||c.type==="unit"?`${c.value||0}`:`${c.value||""}`}`}),c.type?{type:c.type}:{}),c.mask?{"data-mask":c.mask}:{}),c.required?{required:!0}:{}),c.maxlength?{maxLength:c.maxlength}:{}),c.disabled?{disabled:!0}:{}),c.readonly?{readOnly:!0}:{}),c.autofocus?{autoFocus:!0}:{}),c.msg?{"data-msg":c.msg}:{}))}),c.suffix?(0,e.jsx)("span",{className:"cm-setting__group-suffix",children:c.suffix}):null]})]})})))},71460:function(fe,F,i){"use strict";i.d(F,{I:function(){return h}});var e=i(86070),u=i(46223),f=i(45924),b=i(95376),y=i(75573),n=i(14154),w=Object.defineProperty,E=Object.defineProperties,x=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,c=(g,j,$)=>j in g?w(g,j,{enumerable:!0,configurable:!0,writable:!0,value:$}):g[j]=$,o=(g,j)=>{for(var $ in j||(j={}))v.call(j,$)&&c(g,$,j[$]);if(C)for(var $ of C(j))m.call(j,$)&&c(g,$,j[$]);return g},l=(g,j)=>E(g,x(j));const h=(0,n.I)(g=>{var j;return(0,e.jsx)("form",l(o(o(o(o(o(o(o({className:`js-co-settings__setting cm-setting ${g.sm?" cm-setting--sm ":""} ${g.modifier?` cm-setting-toggle--${g.modifier} `:""} ${g.classes||""}`,"data-id":g.id,"data-type":"toggle","data-instant":"true"},g.api?{"data-api":g.api}:{}),g.multiple_values?{"data-multiple-values":g.multiple_values}:{}),g.method?{"data-method":g.method}:{}),g.group?{"data-group":g.group}:{}),g.toggleKey?{"data-key":g.toggleKey}:{}),g.mapping?{"data-mapping-false":g.mapping[0]}:{}),g.mapping?{"data-mapping-true":g.mapping[1]}:{}),{children:(0,e.jsx)("div",{className:"cm-setting__preview",children:g.type==="checkbox"?(0,e.jsx)(y.z,{id:g.id,name:g.id,checked:g.checked,disabled:g.disabled,readonly:g.readonly,modifier:g.modifier,indeterminate:g.indeterminate||!1,classes:"cm-btn-toggle__input js-cm-setting-toggle",label:g.label,"aria-label":g.ariaLabel||g.label,value:g.value,disable_label:g.disable_label,data:g.data}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("label",{className:(0,u.h)(["cm-btn-toggle cm-setting__value--inline",f.Lb]),children:[(0,e.jsx)("input",o(o(o({id:g.id,name:g.id,className:"cm-btn-toggle__input js-cm-setting-toggle",type:"checkbox","aria-label":g.ariaLabel||g.label},g.checked?{defaultChecked:!0}:{}),g.disabled||g.readonly?{disabled:!0}:{}),g.tpl.renderDataAttributesAsObject((j=g.data)!=null?j:{}))),(0,e.jsx)("i",{className:"cm-btn-toggle__toggle"})]}),(0,e.jsx)("label",{htmlFor:g.id,className:"cm-setting__label--inline",children:g.label_raw?(0,b.Ay)(g.label_raw):g.label}),g.hint?(0,e.jsx)("div",{className:"cm-setting__hint",children:g.hint}):null]})})}))})},90154:function(fe,F,i){"use strict";i.d(F,{F:function(){return m}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.defineProperties,y=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,x=(c,o,l)=>o in c?f(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,C=(c,o)=>{for(var l in o||(o={}))w.call(o,l)&&x(c,l,o[l]);if(n)for(var l of n(o))E.call(o,l)&&x(c,l,o[l]);return c},v=(c,o)=>b(c,y(o));const m=(0,u.I)(c=>{var o,l;return(0,e.jsxs)("div",v(C(C(C({className:`mod mod-c-slider cm-slider js-cm-slider ${c.fullWidth?"cm-slider--full-width":""}`,"data-page-scroll-width-factor":c.pageScrollWidthFactor||.7},c.dots?{"data-dots":"true"}:{}),c.fullWidth?{"data-full-width":"true"}:{}),c.postLoadedContent===!0?{"data-post-loaded-content":"true"}:{}),{children:[(0,e.jsx)("div",{className:`cm-slider__elements js-cm-slider__elements ${c.sliderBetweenButtons?"cm-slider__elements--between":""}`,children:(o=c.templates)==null?void 0:o.map((h,g)=>h&&h.nameReact?(0,e.jsx)(h.nameReact,C({},h.options),g):null)}),c.dots?(0,e.jsx)("div",{className:"cm-slider__dots",children:(l=c.templates)==null?void 0:l.map((h,g)=>(0,e.jsx)("button",{className:`cm-slider__dot js-cm-slider__dot ${g===0?"state-active":""}`,"data-index":g},g))}):null,(0,e.jsx)("div",{className:`cm-slider__arrow-left-background js-cm-slider__left ${c.leftArrowBackgroundClass||""}`,style:{display:"none"}}),(0,e.jsx)("div",{className:`cm-slider__arrow-left-wrapper js-cm-slider__left ${c.leftArrowWrapperClass||""}`,style:{display:"none"},children:(0,e.jsx)("button",{className:"cm-slider__arrow-left js-cm-slider__arrow-left js-cm-slider__left",title:window.translate("Legacy_slider_left"),"aria-label":window.translate("Legacy_slider_left"),style:{display:"none"},children:c.arrowStyle==="arrow"?(0,e.jsx)("i",{className:"ca-icon--arrow-left","aria-hidden":!0}):(0,e.jsx)("i",{className:"ca-icon--caret-left","aria-hidden":!0})})}),(0,e.jsx)("div",{className:`cm-slider__arrow-right-background js-cm-slider__right ${c.rightArrowBackgroundClass||""}`,style:{display:"none"}}),(0,e.jsx)("div",{className:`cm-slider__arrow-right-wrapper js-cm-slider__right ${c.rightArrowWrapperClass||""}`,style:{display:"none"},children:(0,e.jsx)("button",{className:"cm-slider__arrow-right js-cm-slider__arrow-right js-cm-slider__right",title:window.translate("Legacy_slider_right"),"aria-label":window.translate("Legacy_slider_right"),children:c.arrowStyle==="arrow"?(0,e.jsx)("i",{className:"ca-icon--arrow-right","aria-hidden":!0}):(0,e.jsx)("i",{className:"ca-icon--caret-right","aria-hidden":!0})})})]}))})},42221:function(fe,F,i){"use strict";i.d(F,{a:function(){return f}});var e=i(18216),u=i(5181);class f extends e.j{static get LAYOUT_DEFAULT(){return"default"}static get LAYOUT_BIG(){return"big"}static get ALIGNMENT_MIDDLE(){return"middle"}static get ALIGNMENT_LEFT(){return"left"}on(y){const n=this.$ctx;this.sandbox.subscribe("tabs",this),this.sandbox.subscribe("events",this),n.on("click",".js-cm-tabs__link",w=>{w.preventDefault();const E=u(w.currentTarget);this.showContent(E)}),n.on("click",".js-cm-tabs__feature-enable",w=>{w.preventDefault();const x=u(w.currentTarget).data("feature");this.fire("openPayment",{feature:x},["events"])}),y()}showContent(y){if(!y.hasClass("state-active")){const n=y.attr("href").substring(5),w=y.closest(".js-cm-tabs"),E=w.find(".js-cm-tabs__link"),x=w.find(".js-cm-tabs__pane"),C=w.find(".cm-tabs__header-content-item");E.removeClass("state-active"),y.addClass("state-active");const v=x.filter(`#tab-${n}`);x.removeClass("state-active"),v.addClass("state-active");const m=C.filter(`#tab-header-content-item-${n}`);C.removeClass("state-active"),m.addClass("state-active"),C.off(".tabs-content-item"),this.fire("tabSwitched",{id:n},["tabs"]),this.fire("tabContentItem",{contentItem:m},["tabs"])}}onSwitchTab(y){const n=this.$ctx;if(y.id){const w=n.find(`[href="#tab-${y.id}"]`);w.length>0&&this.showContent(w)}}onInitializeTabContentItem(){this.fire("tabContentItem",{contentItem:this.$ctx.find(".cm-tabs__header-content-item.state-active")},["tabs"])}}},29928:function(fe,F,i){"use strict";i.d(F,{y:function(){return E}});var e=i(86070),u=i(95376),f=i(14022),b=i(14154),y=i(82110);const n=(0,b.I)(x=>{const C={};switch(x.feature){case"CONDITIONAL_FACETS":C.title=window.translate("Legacy_medialibrary_facette_tabs_visibility");break;case"CORE_USER_GROUPS":C.title="Groups";break;case"TARGETS":C.title=window.translate("Legacy_targets_powerbar_title");break;case"WORKSPACE_APPROVAL_REQUESTS":C.title=window.translate("Legacy_workspace_layer_feedback_requests");break;default:C.title=x.title||""}return(0,y.Rm)()?(0,e.jsx)("li",{role:"presentation",className:"cm-tabs__item cm-feature-hook--tab",children:(0,e.jsxs)("a",{href:`#tab-${x.feature.toLowerCase()}`,"data-feature":x.feature,className:"cm-tabs__link js-cm-tabs__feature-enable",role:"tab",children:[C.title,(0,e.jsx)(f.c,{})]})}):null});var w=i(42221);const E=(0,b.I)(x=>{var C,v;const m={layout:{value:x.layout,type:String,default:w.a.LAYOUT_DEFAULT,allowed:[w.a.LAYOUT_DEFAULT,w.a.LAYOUT_BIG]},alignment:{value:x.alignment,type:String,default:w.a.ALIGNMENT_MIDDLE,allowed:[w.a.ALIGNMENT_MIDDLE,w.a.ALIGNMENT_LEFT]},borderTop:{value:x.border?x.border.top:!1,type:Boolean},borderBottom:{value:x.border?x.border.bottom:!1,type:Boolean},borderLeft:{value:x.border?x.border.left:!1,type:Boolean},borderRight:{value:x.border?x.border.right:!1,type:Boolean},shadow:{value:x.shadow,type:Boolean},transparent:{value:x.transparent,type:Boolean},items:{value:x.items,type:Array}},{layout:c,alignment:o,borderTop:l,borderBottom:h,borderLeft:g,borderRight:j,shadow:$,transparent:S,items:T}=x.utils.data.validateParameters(m),A=T.filter(B=>!!B.headerContent);return(0,e.jsxs)("div",{className:`mod mod-c-tabs cm-tabs js-cm-tabs cm-tabs--${c} cm-tabs--alignment-${o} ${l?" cm-tabs--border-top ":""} ${h?" cm-tabs--border-bottom ":""} ${g?" cm-tabs--border-left ":""} ${j?" cm-tabs--border-right ":""} ${$?" cm-tabs--shadow ":""} ${S?" cm-tabs--transparent ":""}`,children:[(0,e.jsxs)("div",{className:"cm-tabs__header",children:[(0,e.jsx)("ul",{className:"cm-tabs__list",role:"tablist",children:(C=x.items)==null?void 0:C.map((B,R)=>{const k=R===0,V=R+1===x.items.length;return B.feature?(0,e.jsx)(n,{feature:B.feature}):(0,e.jsx)("li",{role:"presentation",className:`cm-tabs__item ${k?"cm-tabs__item--first":""} ${V?"cm-tabs__item--last":""}`,children:(0,e.jsxs)("a",{href:`#tab-${B.id}`,className:`cm-tabs__link ${k?"cm-tabs__link--first":""} ${V?"cm-tabs__link--last":""} js-cm-tabs__link${B.active?" state-active":""}`,role:"tab",children:[B.icon?(0,u.Ay)(B.icon):null,(0,u.Ay)(B.title)]})})})}),A.length>0?(0,e.jsx)("ul",{className:"cm-tabs__header-content",children:A==null?void 0:A.map(B=>B.headerContent?(0,e.jsx)("li",{id:`tab-header-content-item-${B.id}`,role:"presentation",className:`cm-tabs__header-content-item js-cm-tabs__header-content-item${B.active?" state-active":""}`,children:B.headerContent},`tab-header-content-item-${B.id}`):null)}):null]}),x.skip_content?null:(0,e.jsx)("div",{className:`cm-tabs__content ${x.enableScrolling?"cm-tabs__content--scrolling":""}`,children:(v=x.items)==null?void 0:v.map(B=>(0,e.jsx)("div",{id:`tab-${B.id}`,className:`cm-tabs__pane js-cm-tabs__pane${B.active?" state-active":""}`,role:"tabpanel",children:B.content?(0,u.Ay)(B.content):null},`tab-${B.id}`))})]})})},40402:function(fe,F,i){"use strict";i.d(F,{X:function(){return V},S:function(){return k}});var e=i(41594),u=i(59534),f=i.n(u),b=i(50427),y=i(86070),n=i(45935),w=i(1184),E=i(48459),x=i(12207),C=i(46040),v=i(31415),m=i(33446);const c=(0,y.jsxs)("svg",{width:"150",height:"114",viewBox:"0 0 150 114",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,y.jsxs)("g",{clipPath:"url(#clip0_5101_171241)",children:[(0,y.jsx)("path",{d:"M54.6432 53.5769C56.3367 53.4177 58.0849 53.6564 59.6315 54.3775C61.089 55.0497 62.3134 56.1373 63.15 57.5025C63.9846 58.8599 64.3983 60.4505 64.4318 62.0361C64.4768 63.7116 64.1111 65.4175 63.2577 66.8725C62.5201 68.1352 61.4472 69.171 60.1568 69.8662C58.6416 70.69 56.8878 71.0216 55.1715 70.946C53.5463 70.8805 51.9233 70.4255 50.551 69.5451C49.2014 68.6845 48.1406 67.4423 47.5044 65.9777C46.8421 64.4649 46.6486 62.7729 46.8302 61.1396C46.9952 59.6766 47.5121 58.2452 48.376 57.0463C49.193 55.913 50.2868 55.0061 51.5541 54.4113C52.5272 53.9563 53.5726 53.6739 54.6432 53.5769ZM55.0221 56.8257C53.9299 56.9339 52.8683 57.3855 52.0616 58.1316C51.1799 58.9351 50.6266 60.0589 50.4411 61.2283C50.2523 62.4214 50.3694 63.6816 50.8824 64.7843C51.2761 65.6342 51.9068 66.3536 52.6994 66.8569C54.0746 67.7247 55.844 67.8835 57.383 67.3922C58.622 66.9952 59.6524 66.1257 60.2489 64.9739C60.6707 64.1603 60.8658 63.2406 60.8671 62.328C60.8748 61.426 60.7004 60.516 60.3121 59.6985C59.8112 58.6265 58.9439 57.7665 57.8651 57.2723C56.9816 56.868 55.9867 56.7277 55.0221 56.8257Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M73.7338 53.5751C75.3008 53.431 76.9128 53.6254 78.3708 54.2304C79.8896 54.8513 81.1842 55.9152 82.0844 57.2823C82.9866 58.6477 83.4469 60.2759 83.5025 61.9029C83.5649 63.5349 83.245 65.2003 82.4608 66.6434C81.6892 68.0693 80.499 69.2268 79.0493 69.9615C77.2166 70.8969 75.0751 71.1406 73.0528 70.8263C71.5732 70.5927 70.1411 70.0059 68.9649 69.0756C67.88 68.2189 67.0353 67.0982 66.5123 65.8217C65.8656 64.2543 65.7065 62.51 65.9441 60.8387C66.1754 59.2282 66.8496 57.6718 67.9283 56.4433C68.8949 55.3309 70.1738 54.4999 71.5719 54.0301C72.2723 53.7953 72.9979 53.6426 73.7338 53.5751ZM74.0792 56.8273C72.788 56.9557 71.5443 57.5746 70.7046 58.5653C69.7753 59.6376 69.3616 61.0841 69.4096 62.4855C69.435 63.3984 69.6557 64.3148 70.1076 65.1137C70.7101 66.2002 71.7488 67.0274 72.9361 67.3992C74.3096 67.8306 75.858 67.7478 77.1526 67.1056C78.1081 66.6278 78.8789 65.8499 79.3459 64.8923C79.923 63.7119 80.0409 62.341 79.8046 61.0588C79.5759 59.8146 78.9165 58.6351 77.9036 57.8581C76.8343 57.0212 75.4218 56.6811 74.0792 56.8273Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M91.4754 53.9375C93.0823 53.292 94.9659 53.4263 96.496 54.2206C97.6633 54.8205 98.6193 55.7994 99.2303 56.9535C100.006 58.4085 100.239 60.1153 100.018 61.7385C99.8252 63.1449 99.2324 64.5078 98.2662 65.5589C97.3068 66.6136 96.0128 67.3084 94.6005 67.5272C93.5457 67.6864 92.4412 67.5905 91.4512 67.1841C90.2691 66.7101 89.3118 65.7659 88.7441 64.6387C88.7449 66.6328 88.7451 68.627 88.7445 70.6213C87.5547 70.6218 86.3648 70.6219 85.1747 70.6218V53.8385H88.7445C88.7441 54.7236 88.7453 55.6087 88.7436 56.4938C89.319 55.3611 90.2852 54.4135 91.4754 53.9374V53.9375ZM92.0198 56.7405C90.9527 56.8782 89.9428 57.4773 89.3623 58.3864C88.8404 59.1841 88.6651 60.1722 88.7742 61.1097C88.8565 61.8558 89.1433 62.5871 89.6351 63.1608C90.0988 63.6997 90.7118 64.0906 91.3973 64.2846C92.1464 64.494 92.9368 64.5091 93.6933 64.3285C94.4614 64.1481 95.181 63.7345 95.6868 63.1266C96.1663 62.5592 96.4433 61.8397 96.5248 61.1067C96.616 60.2648 96.4985 59.3843 96.095 58.6311C95.7789 58.0383 95.2985 57.5483 94.7108 57.2196C93.9012 56.765 92.9359 56.6209 92.0199 56.7405H92.0198Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M119.363 53.578C120.851 53.42 122.405 53.6427 123.731 54.3562C124.758 54.9042 125.616 55.7445 126.218 56.7343C126.216 55.7783 126.216 54.8221 126.218 53.8657H129.787V70.6222H126.217C126.217 69.6577 126.217 68.6934 126.218 67.7291C125.53 68.8571 124.512 69.7916 123.299 70.3316C121.788 71.0075 120.052 71.1157 118.445 70.7515C116.925 70.3966 115.544 69.6012 114.477 68.4655C113.36 67.286 112.617 65.7748 112.304 64.1876C111.983 62.5496 112.065 60.8276 112.581 59.2379C113.066 57.7419 113.962 56.3723 115.176 55.363C116.364 54.3691 117.821 53.7479 119.363 53.578ZM119.985 56.9101C118.718 57.0896 117.515 57.7601 116.758 58.796C116.202 59.5391 115.88 60.4373 115.762 61.3519C115.578 62.8166 115.827 64.3916 116.709 65.6071C117.163 66.2343 117.765 66.74 118.463 67.079C119.331 67.5073 120.318 67.6658 121.281 67.6066C122.65 67.5327 124.012 66.9514 124.921 65.9129C125.911 64.809 126.309 63.275 126.202 61.8188C126.115 60.3743 125.476 58.9358 124.338 58.0114C123.145 57.0195 121.501 56.6824 119.985 56.9101Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M32.2357 57.0072V53.8652H45.9574C45.9532 54.4871 45.9667 55.1094 45.9485 55.7313C45.8938 57.2336 45.6464 58.7701 44.9191 60.106C44.5867 60.7184 44.1486 61.2679 43.6249 61.7291C42.9901 62.2914 42.2391 62.7071 41.46 63.0362C40.7378 63.3451 39.9859 63.5757 39.2476 63.8411C38.556 64.0937 37.8622 64.3772 37.2754 64.8301C36.835 65.1628 36.4923 65.6071 36.2829 66.1165C36.1167 66.5431 36.0263 66.9953 36.0156 67.4528C39.3452 67.4532 42.675 67.4532 46.0049 67.4528V70.6217H32.1882C32.1924 69.9698 32.1772 69.318 32.1975 68.6669C32.2548 67.1946 32.4933 65.6953 33.1692 64.3696C33.509 63.6996 33.9695 63.0976 34.5279 62.5935C35.1377 62.0422 35.8581 61.6256 36.6096 61.2961C37.4485 60.9243 38.3307 60.6658 39.1925 60.354C39.8603 60.1077 40.5308 59.8255 41.0841 59.3696C41.495 59.0356 41.8053 58.5951 41.9807 58.0967C42.0984 57.7452 42.1648 57.3787 42.178 57.0084C38.864 57.006 35.55 57.0055 32.2357 57.0072Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M101.883 53.8652H105.452C105.453 58.3946 105.453 62.9237 105.452 67.4528C107.62 67.4528 109.787 67.4529 111.955 67.4532V70.6213C108.597 70.6217 105.24 70.6219 101.883 70.6217C101.882 65.0362 101.882 59.4507 101.883 53.8652Z",fill:"#2D3232"})]}),(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:"clip0_5101_171241",children:(0,y.jsx)("rect",{width:"97.6004",height:"17.4286",fill:"white",transform:"translate(32.1866 53.5283)"})})})]}),o=(0,y.jsxs)("svg",{width:"150",height:"114",viewBox:"0 0 150 114",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,y.jsxs)("g",{clipPath:"url(#clip0_5101_171249)",children:[(0,y.jsx)("path",{d:"M42.9568 68.6147C43.32 69.5758 43.8229 70.3976 44.4655 71.0801C45.1081 71.7626 45.8694 72.2849 46.7494 72.6471C47.6295 73.0093 48.5863 73.1903 49.6201 73.1903C50.6259 73.1903 51.5688 73.0022 52.4488 72.6261C53.3289 72.25 54.0972 71.7207 54.7537 71.0383C55.4102 70.3557 55.9201 69.5409 56.2833 68.5938C56.6465 67.6466 56.8281 66.5881 56.8281 65.418V47.3662H61.2283V76.6167H56.87V73.9006C55.8922 74.9313 54.7397 75.7252 53.4126 76.2825C52.0855 76.8396 50.6538 77.1182 49.1172 77.1182C47.5526 77.1182 46.0929 76.8465 44.7379 76.3033C43.3829 75.7601 42.2094 74.9871 41.2177 73.9842C40.226 72.9813 39.4437 71.7766 38.871 70.3697C38.2982 68.9629 38.0118 67.3959 38.0118 65.6687V47.3662H42.4121V65.418C42.4121 66.5881 42.5936 67.6535 42.9568 68.6147Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M68.8131 47.3662V58.0217C69.7909 57.0467 70.9225 56.2738 72.2076 55.7026C73.4927 55.1315 74.8897 54.846 76.3983 54.846C77.9629 54.846 79.4295 55.1384 80.7985 55.7234C82.1674 56.3084 83.3547 57.1024 84.3605 58.1053C85.3664 59.1083 86.1626 60.2921 86.7493 61.6571C87.336 63.0222 87.6293 64.4708 87.6293 66.003C87.6293 67.5351 87.336 68.9767 86.7493 70.3278C86.1626 71.6789 85.3664 72.856 84.3605 73.8587C83.3547 74.8616 82.1674 75.6556 80.7985 76.2406C79.4295 76.8256 77.9628 77.1181 76.3983 77.1181C74.8896 77.1181 73.4858 76.8325 72.1867 76.2614C70.8876 75.6904 69.749 74.9173 68.7712 73.9423V76.6166H64.5806V47.3662H68.8131ZM69.295 68.8862C69.6722 69.7777 70.1961 70.5577 70.8666 71.2263C71.5371 71.8949 72.3194 72.4243 73.2134 72.8143C74.1074 73.2043 75.0712 73.3993 76.105 73.3993C77.1108 73.3993 78.0606 73.2043 78.9546 72.8143C79.8486 72.4243 80.6238 71.895 81.2805 71.2263C81.937 70.5578 82.4608 69.7777 82.852 68.8862C83.2431 67.9948 83.4386 67.0338 83.4386 66.003C83.4386 64.9722 83.2431 64.0042 82.852 63.0988C82.4608 62.1934 81.937 61.4065 81.2805 60.7379C80.6239 60.0694 79.8487 59.547 78.9546 59.1709C78.0605 58.7949 77.1107 58.6067 76.105 58.6067C75.0993 58.6067 74.1493 58.7948 73.2554 59.1709C72.3614 59.5471 71.5791 60.0694 70.9085 60.7379C70.2381 61.4065 69.7072 62.1934 69.3161 63.0988C68.925 64.0042 68.7294 64.9722 68.7294 66.003C68.7293 67.0338 68.9179 67.9948 69.295 68.8862Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M90.0174 61.6988C90.5761 60.3616 91.3445 59.1847 92.3223 58.1679C93.3 57.1511 94.4596 56.3502 95.8006 55.7652C97.1416 55.1802 98.5944 54.8877 100.159 54.8877C101.695 54.8877 103.12 55.1663 104.433 55.7234C105.746 56.2805 106.878 57.0536 107.828 58.0426C108.778 59.0314 109.518 60.2015 110.049 61.5526C110.58 62.9037 110.845 64.3732 110.845 65.9611V67.3401H93.4538C93.5936 68.2037 93.873 69.0046 94.292 69.7427C94.7111 70.4809 95.2349 71.1217 95.8635 71.6649C96.4921 72.2082 97.2045 72.6331 98.0007 72.9394C98.797 73.2458 99.642 73.3991 100.536 73.3991C103.079 73.3991 105.132 72.3544 106.696 70.265L109.756 72.5215C108.694 73.9422 107.381 75.0566 105.817 75.8644C104.252 76.6722 102.492 77.0762 100.536 77.0762C98.9437 77.0762 97.4561 76.7975 96.0731 76.2404C94.6902 75.6834 93.4889 74.9033 92.4692 73.9003C91.4494 72.8974 90.6462 71.7205 90.0595 70.3694C89.4728 69.0184 89.1794 67.5488 89.1794 65.961C89.1793 64.4567 89.4587 63.0359 90.0174 61.6988ZM95.9054 60.0481C94.718 61.0371 93.9288 62.3534 93.5377 63.997H106.571C106.208 62.3534 105.432 61.0371 104.245 60.0481C103.057 59.0593 101.668 58.5648 100.075 58.5648C98.4827 58.5648 97.0928 59.0593 95.9054 60.0481Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M118.765 60.5292C117.871 61.5042 117.424 62.8274 117.424 64.4989V76.6171H113.192V55.3059H117.382V57.9385C117.913 57.0749 118.605 56.3924 119.457 55.8909C120.309 55.3894 121.322 55.1387 122.495 55.1387H123.962V59.0666H122.202C120.805 59.0667 119.659 59.5542 118.765 60.5292Z",fill:"#2D3232"})]}),(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:"clip0_5101_171249",children:(0,y.jsx)("rect",{width:"85.9501",height:"29.7519",fill:"white",transform:"translate(38.0118 47.3662)"})})})]}),l=(0,y.jsxs)("svg",{width:"150",height:"114",viewBox:"0 -2 150 114",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,y.jsx)("path",{d:"M31.3427 57.6828V60.6347C33.5456 60.6322 35.6576 59.7638 37.2153 58.2198C38.773 56.6758 39.6492 54.5824 39.6517 52.3989H36.6735C36.6719 53.7998 36.1097 55.1428 35.1103 56.1334C34.111 57.124 32.756 57.6812 31.3427 57.6828Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M31.3426 65.8185C29.9394 65.8185 28.5938 65.266 27.6016 64.2826C26.6094 63.2992 26.052 61.9653 26.052 60.5746C26.052 59.1838 26.6094 57.85 27.6016 56.8665C28.5938 55.8831 29.9394 55.3306 31.3426 55.3306V52.4009C30.2597 52.3993 29.1871 52.6092 28.186 53.0186C27.1849 53.4279 26.275 54.0287 25.5081 54.7866C24.7413 55.5445 24.1326 56.4447 23.7167 57.4357C23.3009 58.4268 23.086 59.4894 23.0845 60.5628C23.0829 61.6361 23.2947 62.6993 23.7077 63.6916C24.1206 64.6838 24.7267 65.5857 25.4914 66.3458C26.256 67.1059 27.1642 67.7092 28.1641 68.1214C29.164 68.5336 30.236 68.7466 31.3189 68.7481C31.3268 68.7481 31.3347 68.7481 31.3426 68.7481V65.8185Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M31.3427 65.8186V68.7483C33.5289 68.7459 35.625 67.8839 37.1709 66.3516C38.7168 64.8193 39.5864 62.7417 39.5889 60.5747H36.6332C36.6316 61.965 36.0737 63.2979 35.0819 64.281C34.0901 65.2641 32.7453 65.8171 31.3427 65.8186Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M31.3427 49.469V52.3987C33.5289 52.3962 35.625 51.5343 37.1709 50.002C38.7168 48.4697 39.5864 46.3921 39.5889 44.2251H36.6332C36.6316 45.6154 36.0737 46.9483 35.0819 47.9314C34.0901 48.9145 32.7453 49.4675 31.3427 49.469Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M39.6426 49.469V52.3987C41.8289 52.3963 43.9249 51.5343 45.4708 50.002C47.0168 48.4697 47.8864 46.3921 47.8888 44.2251H44.9332C44.9316 45.6154 44.3737 46.9483 43.3818 47.9314C42.39 48.9145 41.0452 49.4675 39.6426 49.469Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M61.6683 56.4652H63.1919L63.5505 57.2646C63.7402 57.0913 63.951 56.9422 64.1779 56.8206C64.4142 56.7002 64.66 56.5991 64.913 56.5184C65.2258 56.4198 65.5526 56.3718 65.8809 56.3763C66.3876 56.3749 66.8888 56.4809 67.3508 56.6874C67.8146 56.8932 68.2321 57.1892 68.5785 57.5578C68.9391 57.9439 69.2247 58.3927 69.421 58.8815C69.8395 59.9563 69.8395 61.147 69.421 62.2219C69.2248 62.7107 68.9392 63.1595 68.5785 63.5456C68.2322 63.9143 67.8147 64.2103 67.3508 64.416C66.8888 64.6225 66.3876 64.7285 65.8809 64.7271C65.5745 64.7327 65.269 64.6908 64.9757 64.6028C64.7451 64.5306 64.5204 64.4415 64.3033 64.336C64.096 64.2234 63.9034 64.0862 63.7296 63.9274V67.481H61.6683V56.4652ZM65.6121 62.7726C65.8859 62.7791 66.1582 62.7287 66.4112 62.6247C66.6643 62.5207 66.8927 62.3653 67.0816 62.1687C67.4762 61.7661 67.6734 61.2271 67.6733 60.5518C67.6733 59.8767 67.4761 59.3377 67.0816 58.9348C66.8889 58.7435 66.66 58.5917 66.4081 58.4881C66.1561 58.3844 65.8861 58.331 65.6133 58.3308C65.3406 58.3306 65.0704 58.3837 64.8184 58.487C64.5663 58.5902 64.3372 58.7417 64.1442 58.9328L64.1421 58.9348C63.7475 59.3378 63.5503 59.8768 63.5504 60.5518C63.5505 61.2267 63.7478 61.7657 64.1421 62.1687C64.3311 62.3654 64.5595 62.5207 64.8127 62.6247C65.0658 62.7287 65.3381 62.7791 65.6121 62.7726H65.6121Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M74.6637 64.7267C74.2804 64.7307 73.9 64.6613 73.5433 64.5223C73.2097 64.3908 72.9097 64.1875 72.6651 63.9269C72.4152 63.6589 72.2203 63.3451 72.0915 63.0032C71.9486 62.6164 71.8787 62.2068 71.8854 61.7949V58.3303H70.6306V56.6423H71.1683C71.8253 56.6423 72.154 56.3165 72.1542 55.665V54.5103H73.9466V56.4647H75.7393V58.3303H73.9466V61.706C73.9342 61.8608 73.9558 62.0165 74.01 62.1622C74.0642 62.3079 74.1496 62.4402 74.2604 62.55C74.3712 62.6598 74.5047 62.7445 74.6517 62.7982C74.7987 62.8519 74.9558 62.8734 75.1119 62.8611C75.2073 62.8611 75.2849 62.8581 75.3448 62.8522C75.3991 62.8471 75.4531 62.8382 75.5062 62.8254C75.5558 62.813 75.604 62.7952 75.6496 62.7722V64.5488C75.557 64.5874 75.461 64.6171 75.3628 64.6378C75.1352 64.7002 74.8998 64.7301 74.6637 64.7267Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M78.5177 55.488C78.2402 55.4947 77.9689 55.4054 77.7506 55.2355C77.5322 55.0655 77.3804 54.8254 77.3213 54.5565C77.2621 54.2877 77.2993 54.0068 77.4264 53.7621C77.5535 53.5174 77.7626 53.3243 78.0178 53.2159C78.273 53.1075 78.5583 53.0905 78.8248 53.168C79.0912 53.2455 79.322 53.4125 79.4777 53.6404C79.6334 53.8682 79.7041 54.1427 79.6777 54.4167C79.6513 54.6907 79.5295 54.9469 79.3332 55.1415C79.2284 55.2514 79.1019 55.3389 78.9617 55.3984C78.8214 55.458 78.6703 55.4885 78.5177 55.488ZM77.4421 56.4652H79.5033V64.6382H77.4421L77.4421 56.4652Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M81.4751 56.4652H82.9987L83.3573 57.2646C83.5261 57.0975 83.7123 56.9487 83.9129 56.8206C84.1059 56.701 84.3099 56.5998 84.5222 56.5184C84.7796 56.4205 85.0534 56.3723 85.329 56.3763C85.6948 56.3679 86.0591 56.4251 86.4044 56.5452C86.6629 56.6378 86.9096 56.76 87.1395 56.9096C87.3447 57.0535 87.521 57.2342 87.6591 57.4425C87.8558 57.2368 88.0788 57.0577 88.3225 56.9096C88.5677 56.765 88.8257 56.6431 89.0933 56.5452C89.4088 56.4298 89.743 56.3725 90.0792 56.3763C90.9755 56.3763 91.6924 56.6606 92.2302 57.2292C92.768 57.7978 93.0369 58.6387 93.037 59.752V64.6382H90.9755V59.9299C91.0002 59.5019 90.8555 59.0812 90.5723 58.7572C90.4554 58.6234 90.3109 58.516 90.1486 58.4424C89.9862 58.3688 89.8097 58.3308 89.6312 58.3308C89.4526 58.3308 89.2762 58.3688 89.1138 58.4424C88.9514 58.516 88.8069 58.6234 88.6901 58.7572C88.4067 59.0811 88.2619 59.5018 88.2865 59.9299V64.6382H86.2253V59.9299C86.25 59.5019 86.1054 59.0812 85.8221 58.7572C85.7053 58.6234 85.5608 58.516 85.3984 58.4424C85.236 58.3688 85.0596 58.3308 84.881 58.3308C84.7025 58.3308 84.526 58.3688 84.3636 58.4424C84.2012 58.516 84.0567 58.6234 83.9399 58.7572C83.6564 59.0811 83.5116 59.5018 83.5363 59.9299V64.6382H81.4751V56.4652Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M95.995 55.4875C95.7175 55.4943 95.4462 55.405 95.2278 55.235C95.0095 55.065 94.8577 54.8249 94.7986 54.5561C94.7394 54.2872 94.7766 54.0063 94.9037 53.7616C95.0308 53.5169 95.2399 53.3238 95.4951 53.2154C95.7503 53.107 96.0356 53.09 96.302 53.1675C96.5685 53.245 96.7993 53.412 96.955 53.6399C97.1107 53.8678 97.1814 54.1423 97.155 54.4162C97.1287 54.6902 97.0068 54.9465 96.8105 55.1411C96.7057 55.251 96.5792 55.3384 96.439 55.398C96.2987 55.4576 96.1476 55.488 95.995 55.4875ZM94.9194 56.4648H96.9806V64.6378H94.9194L94.9194 56.4648Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M98.5038 62.9503L102.089 58.4198H98.5038V56.4653H104.688V58.1533L101.103 62.6838H104.867V64.6383H98.5038V62.9503Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M110.066 64.7273C109.52 64.7306 108.979 64.6184 108.48 64.3983C107.99 64.1839 107.546 63.8795 107.171 63.5011C106.792 63.1188 106.488 62.6701 106.275 62.1777C106.056 61.6631 105.943 61.1103 105.943 60.5519C105.943 59.9934 106.056 59.4406 106.275 58.926C106.488 58.4337 106.792 57.985 107.171 57.6026C107.546 57.2244 107.99 56.9198 108.48 56.7051C108.969 56.4929 109.497 56.3812 110.032 56.3766C110.566 56.3721 111.096 56.4748 111.59 56.6786C112.062 56.8762 112.489 57.1663 112.845 57.5315C113.212 57.9136 113.502 58.3631 113.696 58.8549C113.91 59.3952 114.016 59.9714 114.01 60.5518C114.01 60.6439 114.004 60.7359 113.992 60.8272C113.98 60.9161 113.968 61.002 113.956 61.0847C113.944 61.1796 113.932 61.2684 113.92 61.3512H108.184C108.273 61.7444 108.487 62.0992 108.793 62.3642C109.151 62.6527 109.605 62.7984 110.066 62.7728C110.299 62.7785 110.532 62.7485 110.756 62.6838C110.923 62.633 111.083 62.5613 111.231 62.4706C111.367 62.3829 111.488 62.2751 111.59 62.1509H113.741C113.621 62.4806 113.455 62.7917 113.248 63.0749C113.021 63.3882 112.749 63.6666 112.441 63.9011C112.113 64.15 111.751 64.3504 111.366 64.4962C110.951 64.6527 110.51 64.7311 110.066 64.7273ZM112.038 59.93C111.953 59.4732 111.709 59.0604 111.349 58.7632C110.988 58.466 110.535 58.3033 110.066 58.3033C109.597 58.3033 109.144 58.466 108.783 58.7632C108.423 59.0604 108.179 59.4732 108.094 59.93H112.038Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M115.533 53.4448H117.594V64.6382H115.533V53.4448Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M120.731 67.57C120.636 67.57 120.543 67.5667 120.454 67.5611C120.378 67.5566 120.304 67.5477 120.229 67.5344C120.156 67.525 120.084 67.5071 120.014 67.4811V65.7931C120.389 65.8173 120.76 65.7105 121.063 65.4913C121.311 65.2857 121.505 65.0235 121.628 64.7273L121.807 64.2829L118.67 56.4653H120.821L122.882 61.7955L124.765 56.4653H126.916C126.33 57.9576 125.798 59.3079 125.32 60.5161C125.117 61.0378 124.917 61.5471 124.72 62.0441C124.523 62.5416 124.346 62.9948 124.191 63.4035C124.036 63.8123 123.904 64.1528 123.796 64.425C123.689 64.6975 123.623 64.8574 123.599 64.9047C123.426 65.3288 123.226 65.7412 122.999 66.1395C122.828 66.4436 122.613 66.7218 122.363 66.9657C122.152 67.1683 121.902 67.3257 121.628 67.4279C121.339 67.5266 121.036 67.5748 120.731 67.57Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M54.0327 52.4014C52.3843 52.4014 50.8035 53.0504 49.6379 54.2057C48.4723 55.361 47.8175 56.928 47.8175 58.5618C47.8175 60.1956 48.4723 61.7626 49.6379 62.9179C50.8035 64.0732 52.3843 64.7222 54.0327 64.7222C55.6811 64.7222 57.2619 64.0732 58.4275 62.9179C59.5931 61.7626 60.2479 60.1956 60.2479 58.5618C60.2479 56.928 59.5931 55.361 58.4275 54.2057C57.262 53.0504 55.6811 52.4014 54.0327 52.4014H54.0327ZM54.0327 62.5862C53.2297 62.5955 52.4419 62.3685 51.769 61.9341C51.0961 61.4996 50.5683 60.8771 50.2523 60.1453C49.9363 59.4135 49.8464 58.6053 49.9939 57.8228C50.1413 57.0403 50.5196 56.3188 51.0807 55.7494C51.6419 55.18 52.3609 54.7884 53.1466 54.6239C53.9324 54.4595 54.7497 54.5298 55.4952 54.8258C56.2406 55.1218 56.8808 55.6303 57.3348 56.2869C57.7887 56.9435 58.036 57.7188 58.0454 58.5148C58.0456 58.5305 58.0457 58.5462 58.0457 58.5618C58.0519 59.623 57.6326 60.643 56.88 61.3977C56.1274 62.1524 55.1032 62.5799 54.0327 62.5862Z",fill:"#2D3232"})]}),h=(0,y.jsxs)("svg",{width:"150",height:"114",viewBox:"0 0 150 114",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,y.jsxs)("g",{clipPath:"url(#clip0_5101_171265)",children:[(0,y.jsx)("path",{d:"M71.6525 55.2718V69.5938H69.1661V58.355H69.1329L64.6904 69.5938H63.0328L58.4909 58.355H58.4577V69.5938H56.1702V55.2718H59.7507L63.8616 65.8807H63.9279L68.2709 55.2718H71.6525ZM73.708 56.3659C73.708 55.968 73.8406 55.6365 74.139 55.3713C74.4374 55.1061 74.7689 54.9735 75.1667 54.9735C75.5977 54.9735 75.9624 55.1061 76.2276 55.3713C76.4928 55.6365 76.6586 55.968 76.6586 56.3659C76.6586 56.7637 76.526 57.0952 76.2276 57.3605C75.9292 57.6257 75.5977 57.7583 75.1667 57.7583C74.7357 57.7583 74.4042 57.6257 74.139 57.3605C73.8738 57.0621 73.708 56.7305 73.708 56.3659ZM76.3934 59.3165V69.5938H73.9732V59.3165H76.3934ZM83.7201 67.8367C84.0848 67.8367 84.4826 67.7704 84.9136 67.5715C85.3446 67.4057 85.7425 67.1737 86.1071 66.9085V69.1628C85.7093 69.3949 85.2783 69.5607 84.781 69.6601C84.2837 69.7596 83.7533 69.8259 83.1565 69.8259C81.6315 69.8259 80.4049 69.3618 79.4766 68.4003C78.5151 67.4389 78.051 66.2122 78.051 64.7535C78.051 63.0959 78.5483 61.7366 79.5097 60.6757C80.4712 59.6148 81.8304 59.0844 83.6207 59.0844C84.0848 59.0844 84.549 59.1507 84.9799 59.2502C85.4441 59.3496 85.8088 59.5154 86.074 59.648V61.9687C85.7093 61.7035 85.3115 61.4714 84.9468 61.3388C84.549 61.2062 84.1511 61.1067 83.7533 61.1067C82.7919 61.1067 82.0293 61.4051 81.4326 62.035C80.8358 62.6649 80.5706 63.4937 80.5706 64.5546C80.5706 65.5823 80.869 66.4112 81.4326 66.9748C81.9962 67.5384 82.7587 67.8367 83.7201 67.8367ZM92.9698 59.1507C93.1687 59.1507 93.3344 59.1507 93.5002 59.1839C93.666 59.217 93.7986 59.2502 93.898 59.2833V61.7366C93.7654 61.6372 93.5997 61.5377 93.3344 61.4714C93.0692 61.4051 92.804 61.3388 92.4393 61.3388C91.8426 61.3388 91.3453 61.604 90.9474 62.1013C90.5496 62.5986 90.3175 63.3611 90.3175 64.422V69.5938H87.8974V59.3165H90.3175V60.941H90.3507C90.5828 60.3774 90.9143 59.9464 91.3453 59.6148C91.8094 59.3165 92.3399 59.1507 92.9698 59.1507ZM94.0307 64.6209C94.0307 62.9301 94.5279 61.5709 95.4562 60.5763C96.4177 59.5817 97.7438 59.0844 99.4346 59.0844C101.026 59.0844 102.286 59.5485 103.181 60.51C104.076 61.4714 104.54 62.7644 104.54 64.3888C104.54 66.0465 104.043 67.3726 103.115 68.3672C102.153 69.3618 100.86 69.8591 99.2025 69.8591C97.6112 69.8591 96.3513 69.3949 95.4231 68.4666C94.4948 67.5052 94.0307 66.2122 94.0307 64.6209ZM96.5503 64.5215C96.5503 65.5823 96.7823 66.4112 97.2796 66.9748C97.7769 67.5384 98.4731 67.8367 99.3683 67.8367C100.23 67.8367 100.926 67.5715 101.391 66.9748C101.855 66.4112 102.087 65.5823 102.087 64.4551C102.087 63.3611 101.855 62.5323 101.391 61.9355C100.926 61.3719 100.23 61.0736 99.4014 61.0736C98.5063 61.0736 97.8432 61.3719 97.3459 61.9687C96.7823 62.5986 96.5503 63.4274 96.5503 64.5215ZM108.154 62.035C108.154 62.3665 108.253 62.6649 108.485 62.8638C108.717 63.0627 109.181 63.2948 109.944 63.5932C110.905 63.991 111.602 64.422 111.966 64.8861C112.364 65.3834 112.563 65.947 112.563 66.6432C112.563 67.6047 112.198 68.3672 111.436 68.9639C110.707 69.5607 109.679 69.8259 108.419 69.8259C107.988 69.8259 107.524 69.7596 106.993 69.6601C106.463 69.5607 106.032 69.4281 105.667 69.2623V66.8753C106.098 67.1737 106.596 67.4389 107.093 67.6047C107.59 67.7704 108.054 67.8699 108.485 67.8699C109.016 67.8699 109.447 67.8036 109.679 67.6378C109.944 67.4721 110.077 67.24 110.077 66.8753C110.077 66.5438 109.944 66.2786 109.679 66.0133C109.414 65.7813 108.883 65.516 108.154 65.2177C107.259 64.853 106.629 64.422 106.264 63.9579C105.899 63.4937 105.7 62.897 105.7 62.1676C105.7 61.2393 106.065 60.4768 106.794 59.8801C107.524 59.2833 108.485 58.9849 109.646 58.9849C110.01 58.9849 110.408 59.0181 110.839 59.1176C111.27 59.217 111.668 59.3165 111.966 59.4159V61.7698C111.635 61.5709 111.27 61.3719 110.839 61.2062C110.408 61.0404 109.977 60.9741 109.579 60.9741C109.115 60.9741 108.75 61.0736 108.518 61.2393C108.286 61.4714 108.154 61.7035 108.154 62.035ZM113.591 64.6209C113.591 62.9301 114.088 61.5709 115.016 60.5763C115.978 59.5817 117.304 59.0844 118.995 59.0844C120.586 59.0844 121.846 59.5485 122.741 60.51C123.636 61.4714 124.1 62.7644 124.1 64.3888C124.1 66.0465 123.603 67.3726 122.675 68.3672C121.713 69.3618 120.42 69.8591 118.763 69.8591C117.171 69.8591 115.911 69.3949 114.983 68.4666C114.088 67.5052 113.591 66.2122 113.591 64.6209ZM116.11 64.5215C116.11 65.5823 116.342 66.4112 116.84 66.9748C117.337 67.5384 118.033 67.8367 118.928 67.8367C119.79 67.8367 120.487 67.5715 120.951 66.9748C121.415 66.4112 121.647 65.5823 121.647 64.4551C121.647 63.3611 121.415 62.5323 120.951 61.9355C120.487 61.3719 119.79 61.0736 118.962 61.0736C118.066 61.0736 117.403 61.3719 116.906 61.9687C116.376 62.5986 116.11 63.4274 116.11 64.5215ZM132.156 61.3056H128.543V69.5938H126.089V61.3056H124.365V59.3165H126.089V57.8909C126.089 56.83 126.454 55.9349 127.15 55.2387C127.846 54.5425 128.742 54.2109 129.836 54.2109C130.134 54.2109 130.399 54.2441 130.631 54.2441C130.863 54.2441 131.062 54.3104 131.228 54.3767V56.4653C131.162 56.4322 130.996 56.3659 130.797 56.2996C130.598 56.2333 130.366 56.2001 130.101 56.2001C129.604 56.2001 129.206 56.3659 128.941 56.6642C128.675 56.9626 128.543 57.4599 128.543 58.0567V59.2833H132.156V56.9626L134.577 56.2333V59.2833H137.03V61.2725H134.577V66.0796C134.577 66.7095 134.709 67.1405 134.908 67.4057C135.14 67.671 135.505 67.8036 136.002 67.8036C136.135 67.8036 136.3 67.7704 136.499 67.7041C136.698 67.6378 136.864 67.5715 136.997 67.4721V69.4612C136.831 69.5607 136.599 69.627 136.234 69.6933C135.869 69.7596 135.538 69.7927 135.173 69.7927C134.146 69.7927 133.383 69.5275 132.886 68.9971C132.388 68.4666 132.123 67.6378 132.123 66.5438L132.156 61.3056Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M36.4447 50.4976H25.1064V61.8358H36.4447V50.4976Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M48.9767 50.4976H37.6384V61.8358H48.9767V50.4976Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M36.4447 63.0298H25.1064V74.368H36.4447V63.0298Z",fill:"#2D3232"}),(0,y.jsx)("path",{d:"M48.9767 63.0298H37.6384V74.368H48.9767V63.0298Z",fill:"#2D3232"})]}),(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:"clip0_5101_171265",children:(0,y.jsx)("rect",{width:"111.924",height:"23.87",fill:"white",transform:"translate(25.1061 50.4985)"})})})]}),g=(0,y.jsxs)("svg",{width:"150",height:"109",viewBox:"0 -2 150 109",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,y.jsx)("path",{d:"M29.5312 61.3664C28.4066 60.3196 27.7318 58.878 27.7318 57.2305C27.7318 55.583 28.3893 54.1414 29.462 53.0946C30.3963 52.1678 30.3963 50.7263 29.462 49.7995C28.5277 48.8728 27.0744 48.8728 26.1401 49.7995C24.2888 51.7045 23.095 54.3302 23.095 57.2305C23.095 60.1308 24.2888 62.7565 26.2093 64.6615C27.1436 65.5882 28.5969 65.5882 29.5312 64.6615C30.379 63.7347 30.379 62.2932 29.5312 61.3664Z",fill:"#8B8C8B"}),(0,y.jsx)("path",{d:"M29.5313 53.095C30.5867 51.9795 32.0574 51.3273 33.701 51.3273C35.3447 51.3273 36.8153 51.9795 37.8707 53.0435C38.805 53.9702 40.2583 53.9702 41.1926 53.0435C42.1269 52.1168 42.1269 50.6752 41.1926 49.7485C39.2722 47.9122 36.625 46.728 33.701 46.728C30.777 46.728 28.1299 47.9122 26.2094 49.8171C25.2751 50.7438 25.2751 52.1854 26.2094 53.1121C27.1437 53.9359 28.597 53.9359 29.5313 53.095Z",fill:"#696A69"}),(0,y.jsx)("path",{d:"M37.8707 61.3667C36.8153 62.4822 35.3447 63.1343 33.701 63.1343C32.0574 63.1343 30.5867 62.4822 29.5313 61.4182C28.597 60.4915 27.1437 60.4915 26.2094 61.4182C25.2751 62.3449 25.2751 63.7865 26.2094 64.7132C28.1299 66.5495 30.777 67.7337 33.701 67.7337C36.625 67.7337 39.2722 66.5495 41.1926 64.6446C42.1269 63.7178 42.1269 62.2763 41.1926 61.3495C40.2583 60.5258 38.805 60.5258 37.8707 61.3667Z",fill:"#5D5E5D"}),(0,y.jsx)("path",{d:"M27.8703 53.7468C29.1507 53.7468 30.1887 52.7172 30.1887 51.4471C30.1887 50.1771 29.1507 49.1475 27.8703 49.1475C26.5899 49.1475 25.5519 50.1771 25.5519 51.4471C25.5519 52.7172 26.5899 53.7468 27.8703 53.7468Z",fill:"#444544"}),(0,y.jsx)("path",{d:"M27.8703 65.3141C29.1507 65.3141 30.1887 64.2846 30.1887 63.0145C30.1887 61.7444 29.1507 60.7148 27.8703 60.7148C26.5899 60.7148 25.5519 61.7444 25.5519 63.0145C25.5519 64.2846 26.5899 65.3141 27.8703 65.3141Z",fill:"#444544"}),(0,y.jsx)("path",{d:"M51.6082 59.393C52.2657 58.861 52.4041 59.2042 52.9405 59.7191C53.2 59.9765 53.9959 60.5085 53.4768 60.9032C52.4214 61.7613 51.4871 62.156 50.103 62.156C47.0579 62.156 44.8606 59.8564 44.999 56.8874C45.0682 55.5145 45.5872 54.2617 46.66 53.4036C47.6461 52.6142 48.84 52.2195 50.103 52.2881C50.7604 52.2881 51.2968 52.4254 51.8851 52.6142C52.283 52.7515 52.6809 52.9403 53.0097 53.1977C53.6671 53.7297 53.3384 53.9871 52.8713 54.5191C52.7328 54.6564 52.6809 54.7765 52.5425 54.8452C52.283 55.1026 52.0754 55.3086 51.7466 55.034C51.0892 54.5706 50.1549 54.3132 49.359 54.502C46.7119 55.1541 46.833 59.822 50.0857 59.822C50.6047 59.925 51.2103 59.7362 51.6082 59.393ZM125.244 61.9672C124.777 61.9672 124.448 61.6412 124.448 61.1778V50.8465C124.448 50.3832 124.777 50.0571 125.244 50.0571H126.109C126.576 50.0571 126.905 50.3832 126.905 50.8465V61.1778C126.905 61.6412 126.576 61.9672 126.109 61.9672H125.244ZM120.677 60.7831C119.742 61.6412 118.825 62.1045 117.493 62.1045C114.777 62.1045 113.514 59.8735 113.514 57.4366V53.232C113.514 52.7686 113.842 52.4426 114.31 52.4426H115.175C115.642 52.4426 115.97 52.7686 115.97 53.232V57.4366C115.97 58.8095 116.697 59.8735 118.22 59.8735C119.673 59.8735 120.607 58.6207 120.607 57.3165V53.232C120.607 52.7686 120.936 52.4426 121.403 52.4426H122.268C122.735 52.4426 123.064 52.7686 123.064 53.232V61.1778C123.064 61.6412 122.735 61.9672 122.268 61.9672H121.542C121.074 61.9672 120.815 61.5725 120.746 61.1778L120.677 60.7831ZM110.33 52.4941H111.991C112.458 52.4941 112.787 52.8888 112.787 53.2835V53.8155C112.787 54.2789 112.458 54.6049 111.991 54.6049H110.33V61.1778C110.33 61.6412 110.001 61.9672 109.534 61.9672H108.669C108.202 61.9672 107.873 61.6412 107.873 61.1778V52.168C107.873 50.1944 108.998 48.6155 111.057 48.4268H112.32C112.787 48.4268 113.116 48.8215 113.116 49.2162V49.7482C113.116 50.2116 112.787 50.5376 112.32 50.5376H111.662C110.676 50.5376 110.278 51.2584 110.278 52.1851V52.5112H110.33V52.4941ZM104.292 52.4941H106.143C106.61 52.4941 106.939 52.8201 106.939 53.2835V53.8155C106.939 54.2789 106.61 54.6049 106.143 54.6049H104.292V58.6036C104.292 59.393 104.69 59.7877 105.486 59.7877H105.884C106.351 59.7877 106.679 60.1138 106.679 60.5772V61.1607C106.679 61.624 106.351 61.9501 105.884 61.9501H104.759C102.769 61.8128 101.904 60.5772 101.904 58.6036V50.8465C101.904 50.3832 102.233 50.0571 102.7 50.0571H103.565C104.032 50.0571 104.361 50.3832 104.361 50.8465V52.4941H104.292ZM77.7165 52.4941H79.5677C80.0349 52.4941 80.3636 52.8201 80.3636 53.2835V53.8155C80.3636 54.2789 80.0349 54.6049 79.5677 54.6049H77.7165V58.6036C77.7165 59.393 78.1144 59.8564 78.9103 59.8564H79.3082C79.7754 59.8564 80.1041 60.1824 80.1041 60.6458V61.1778C80.1041 61.6412 79.7754 61.9672 79.3082 61.9672H78.7719C76.5919 61.9672 75.3288 61.0405 75.3288 58.6207V50.8637C75.3288 50.4003 75.6576 50.0743 76.1247 50.0743H76.9898C77.4569 50.0743 77.7857 50.4003 77.7857 50.8637V52.5112C77.7857 52.4941 77.7165 52.4941 77.7165 52.4941ZM66.9202 53.6096C67.7853 52.7515 68.7715 52.2881 69.9653 52.2881C72.6817 52.2881 74.0831 54.4505 74.0831 56.9561V61.1778C74.0831 61.6412 73.7544 61.9672 73.2872 61.9672H72.4221C71.955 61.9672 71.6263 61.6412 71.6263 61.1778V56.9732C71.6263 55.6003 70.8996 54.5363 69.377 54.5363C67.9237 54.5363 66.9894 55.7204 66.9894 57.0934V61.1778C66.9894 61.6412 66.6607 61.9672 66.1935 61.9672H65.3285C64.8613 61.9672 64.5326 61.6412 64.5326 61.1778V53.2148C64.5326 52.7515 64.8613 52.4254 65.3285 52.4254H66.0551C66.5223 52.4254 66.7818 52.8201 66.851 53.2148L66.9202 53.6096ZM93.5648 53.6096C94.4299 52.7515 95.4161 52.2881 96.6099 52.2881C99.3263 52.2881 100.728 54.4505 100.728 56.9561V61.1778C100.728 61.6412 100.399 61.9672 99.9318 61.9672H99.0667C98.5996 61.9672 98.2709 61.6412 98.2709 61.1778V56.9732C98.2709 55.6003 97.5442 54.5363 96.0216 54.5363C94.5683 54.5363 93.634 55.7204 93.634 57.0934V61.1778C93.634 61.6412 93.3053 61.9672 92.8381 61.9672H91.973C91.5059 61.9672 91.1772 61.6412 91.1772 61.1778V53.2148C91.1772 52.7515 91.5059 52.4254 91.973 52.4254H92.6997C93.1669 52.4254 93.4264 52.8201 93.4956 53.2148L93.5648 53.6096ZM58.7538 52.2366C55.8298 52.2366 53.7882 54.3475 53.7882 57.2306C53.7882 60.1138 55.8471 62.2247 58.7538 62.2247C61.7297 62.2247 63.7886 60.1824 63.7886 57.2306C63.7886 54.3303 61.6778 52.2366 58.7538 52.2366ZM83.0281 58.0887C83.2184 59.4102 84.5506 59.9937 85.8136 59.9937C86.4019 59.9937 87.0767 59.8564 87.5957 59.5989C87.6649 59.5303 87.786 59.5303 87.8552 59.4617C88.184 59.2729 88.4435 59.2042 88.7203 59.4617L89.1875 59.925L89.5854 60.3197C89.9833 60.8517 89.7238 60.9719 89.2567 61.2465C88.2705 61.8986 87.0075 62.2247 85.8136 62.2247C82.6301 62.2247 80.502 60.3197 80.502 57.162C80.502 54.1416 82.6301 52.168 85.606 52.168C88.7203 52.168 90.4505 53.9356 90.5197 57.0419C90.5197 57.9 90.5889 58.1574 89.7238 58.1574H83.0281V58.0887ZM58.7538 54.4676C60.2764 54.4676 61.2799 55.7891 61.2799 57.2306C61.2799 58.7409 60.3456 59.925 58.7538 59.925C57.1621 59.925 56.2278 58.7409 56.2278 57.2306C56.2278 55.7204 57.2313 54.4676 58.7538 54.4676ZM83.08 56.0465H88.0456C87.8552 54.7937 86.8517 54.3303 85.6579 54.3303C84.4122 54.3303 83.426 54.931 83.08 56.0465Z",fill:"#2D3232"})]}),j=(0,y.jsxs)("svg",{width:"150",height:"114",viewBox:"0 9 150 114",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,y.jsx)("g",{clipPath:"url(#clip0_5101_171281)",children:(0,y.jsx)("path",{d:"M65.4453 55.6619L55.3223 79.5017H48.1425L38.0638 55.6619H45.2437L51.8881 71.8801L58.7558 55.6619H65.4453ZM81.2753 79.8562C78.7482 79.8562 76.4812 79.3319 74.4742 78.2832C72.528 77.2902 70.899 75.7778 69.7699 73.9158C68.6404 72.0555 68.0756 69.9438 68.0756 67.5806C68.0756 65.2174 68.6407 63.1054 69.7709 61.2447C70.9003 59.3834 72.5293 57.8717 74.4753 56.8793C76.482 55.8304 78.749 55.3061 81.2763 55.3063C83.8037 55.3066 86.0631 55.8309 88.0547 56.8793C89.9916 57.8766 91.6124 59.3876 92.7375 61.2447C93.8672 63.1057 94.4321 65.2178 94.4321 67.5813C94.4321 69.9447 93.8672 72.057 92.7375 73.9182C91.6128 75.776 89.9921 77.2877 88.0551 78.2856C86.063 79.3327 83.8034 79.8562 81.2763 79.8562H81.2753ZM81.2753 74.1843C83.0591 74.1843 84.5233 73.5861 85.6679 72.3896C86.8125 71.1931 87.3848 69.5904 87.3848 67.5816C87.3848 65.5726 86.8125 63.9697 85.6679 62.773C84.5233 61.5763 83.0591 60.9783 81.2753 60.9793C79.4915 60.9793 78.0199 61.5775 76.8604 62.774C75.7009 63.9705 75.1212 65.5734 75.1212 67.5826C75.1212 69.5917 75.7009 71.1943 76.8604 72.3906C78.0199 73.5869 79.4919 74.1848 81.2763 74.1843H81.2753ZM101.298 55.6619H108.255V79.5017H101.299L101.298 55.6619ZM104.777 52.3385C103.499 52.3385 102.458 51.9692 101.655 51.2306C101.267 50.8858 100.959 50.4618 100.752 49.9877C100.544 49.5136 100.442 49.0005 100.452 48.4836C100.442 47.9665 100.544 47.4533 100.752 46.9791C100.96 46.505 101.268 46.081 101.656 45.7362C102.459 44.9973 103.5 44.6279 104.778 44.6279C106.056 44.6279 107.097 44.9824 107.9 45.6915C108.285 46.0187 108.594 46.4269 108.802 46.8866C109.01 47.3463 109.113 47.8461 109.104 48.3502C109.118 48.8842 109.019 49.4153 108.811 49.9081C108.604 50.4009 108.293 50.8442 107.9 51.2084C107.097 51.9623 106.056 52.3392 104.778 52.3392L104.777 52.3385ZM119.583 79.8562C119.012 79.8692 118.445 79.7658 117.915 79.5524C117.386 79.3391 116.907 79.0202 116.506 78.6156C116.096 78.2106 115.773 77.7265 115.558 77.1931C115.344 76.6596 115.241 76.0881 115.257 75.5136C115.257 74.2437 115.673 73.2171 116.505 72.4339C117.349 71.6779 118.446 71.2595 119.582 71.2595C120.719 71.2595 121.815 71.6779 122.659 72.4339C123.493 73.2166 123.91 74.2432 123.91 75.5136C123.926 76.088 123.823 76.6595 123.609 77.1929C123.394 77.7264 123.071 78.2106 122.661 78.6156C122.261 79.0201 121.782 79.3388 121.253 79.5522C120.724 79.7656 120.156 79.869 119.585 79.8562H119.583Z",fill:"#2D3232"})}),(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:"clip0_5101_171281",children:(0,y.jsx)("rect",{width:"85.8461",height:"35.2293",fill:"white",transform:"translate(38.0638 44.6279)"})})})]}),$=(0,y.jsx)("svg",{width:"900",height:"79",viewBox:"0 0 900 79",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M899.58 79H1.35265e-09L125.436 6.53992C132.846 2.25562 141.253 0 149.811 0C158.369 0 166.776 2.25562 174.186 6.53992L275.431 65.0309C282.841 69.3152 291.248 71.5708 299.806 71.5708C308.364 71.5708 316.771 69.3152 324.181 65.0309L425.441 6.53992C432.851 2.25562 441.258 0 449.816 0C458.374 0 466.781 2.25562 474.191 6.53992L575.436 65.0309C582.846 69.3152 591.253 71.5708 599.811 71.5708C608.369 71.5708 616.776 69.3152 624.186 65.0309L725.431 6.53992C732.841 2.25562 741.248 0 749.806 0C758.364 0 766.771 2.25562 774.181 6.53992L899.58 79Z",fill:"#F7F7F7"})}),S=[c,o,l,h,g,j],T=["Trial_enterprise_expiration_key_feature_dam","Trial_enterprise_expiration_key_feature_brandportal","Trial_enterprise_expiration_key_feature_templates","Trial_enterprise_expiration_key_feature_analytics","Trial_enterprise_expiration_key_feature_hosting","Trial_enterprise_expiration_key_feature_security","Trial_enterprise_expiration_key_feature_sso","Trial_enterprise_expiration_key_feature_user_management","Trial_enterprise_expiration_key_feature_email_whitelabeling","Trial_enterprise_expiration_key_feature_onboarding"],A=()=>{const{t:K}=(0,v.Bd)("translation",{i18n:m.Ay});return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(n.D,{as:"h2",size:"xx-large",children:K("Trial_enterprise_expiration_right_heading")}),(0,y.jsx)("ul",{className:"tw-my-4 tw-flex tw-flex-wrap",children:T.map(z=>(0,y.jsxs)("li",{className:"tw-flex tw-items-center tw-mb-3 tw-w-1/2 md:tw-w-full",children:[(0,y.jsx)("span",{className:"tw-text-violet-60 tw-mr-3",children:(0,y.jsx)(w.default,{})}),(0,y.jsx)(E.E,{size:"medium",children:K(z)})]},z))})]})},B=()=>{const{t:K}=(0,v.Bd)("translation",{i18n:m.Ay});return(0,y.jsxs)("div",{className:"tw-full",children:[(0,y.jsxs)("div",{className:"tw-relative tw-flex tw-h-[75px] tw-items-end tw-justify-center -tw-mt-2",children:[(0,y.jsx)("div",{className:"tw-relative tw-z-[1]",children:(0,y.jsxs)("p",{className:"tw-text-s md:tw-text-l tw-text-center tw-text-text tw-mb-2 tw-px-4",children:[K("Trial_enterprise_expiration_footer_slogan"),":"]})}),(0,y.jsx)("div",{className:"tw-absolute tw-z-[0] tw-bottom-0",children:$})]}),(0,y.jsx)("div",{className:"tw-full tw-flex tw-bg-black-5 tw-h-[108px]",children:S.map((z,q)=>(0,y.jsx)("div",{className:"tw-flex tw-w-1/6 tw-items-center",children:z},q))})]})},R=({children:K,isOpen:z,mainTitle:q,introText:re})=>{const[ve,Oe]=(0,e.useState)(z);return(0,e.useEffect)(()=>{Oe(z)},[z]),(0,y.jsxs)(x.a,{visual:{},isDismissable:!0,shouldCloseOnInteractOutside:()=>!0,onClose:()=>Oe(!1),isOpen:ve,zIndex:150,width:C.CJ.Default,children:[(0,y.jsx)("div",{className:"tw-px-14 tw-pt-14",children:(0,y.jsxs)("div",{className:"tw-flex tw-flex-col-reverse md:tw-flex-row",children:[(0,y.jsxs)("div",{className:"tw-basis-7/12 tw-pr-10",children:[(0,y.jsx)(n.D,{as:"h1",size:"xx-large",children:q}),(0,y.jsxs)("div",{className:"tw-flex tw-flex-col tw-min-w-[405px] tw-mt-6",children:[(0,y.jsx)("div",{className:"tw-leading-5 tw-mb-6",children:(0,y.jsx)(E.E,{size:"medium",children:re})}),K]})]}),(0,y.jsx)("div",{className:"tw-basis-5/12",children:(0,y.jsx)(A,{})})]})}),(0,y.jsx)(B,{})]})},k=()=>{const K=document.createElement("div"),z={isOpen:()=>!0,mainTitle:window.translate("Trial_enterprise_expiration_trial_expired_title"),introText:window.translate("Trial_enterprise_expiration_trial_expired_intro"),children:(0,e.createElement)(f(),{formId:"97b5cf9d-bc3b-453e-a13c-9d7914406c9f",portalId:"2035494",region:"na1"})};(0,b.Cc)(R,K,z)},V=()=>{const K=document.createElement("div"),z={isOpen:()=>!0,mainTitle:window.translate("Trial_enterprise_expiration_talk_to_sales_title"),introText:window.translate("Trial_enterprise_expiration_talk_to_sales_intro"),children:(0,e.createElement)(f(),{formId:"97b5cf9d-bc3b-453e-a13c-9d7914406c9f",portalId:"2035494",region:"na1"})};(0,b.Cc)(R,K,z)}},151:function(fe,F,i){"use strict";i.d(F,{s:function(){return he}});var e=i(86070),u=i(77345),f=i(23245),b=i(14154),y=i(81178),n=i(13833);const w=(0,b.I)(()=>{var se,de,je;return(0,e.jsxs)("div",{className:"mod mod-c-trial cm-trial__modal",children:[(0,e.jsx)(n.X,{}),(0,e.jsxs)("div",{className:"cm-trial__modal-header",children:[(0,e.jsx)("svg",{className:"cm-trial__modal-hearts",xmlns:"http://www.w3.org/2000/svg",width:"124",height:"63",viewBox:"0 0 124 63",children:(0,e.jsxs)("g",{fill:"none",children:[(0,e.jsx)("path",{fill:"#F16651",d:"M45.6295545,18.1654118 C45.05453,18.3711896 44.4347982,18.3446905 43.8819988,18.091422 L34.263919,13.6843261 C32.9577699,13.0859057 31.9664838,12.0230264 31.4735982,10.6915712 C30.3319143,7.60748634 32.2354259,4.76524813 34.6530427,3.90008176 C36.0513264,3.39969311 37.494872,3.45798805 38.8275898,4.06858099 L40.731962,4.94108099 L41.6203865,3.06915304 C42.2421237,1.75914046 43.3098326,0.802169978 44.7081163,0.301781323 C47.1263615,-0.563609933 50.4422901,0.411503018 51.5837454,3.49497033 C52.076631,4.82642548 52.0121344,6.26712641 51.4027919,7.55102298 L46.9154889,17.0058598 C46.6586261,17.5481739 46.2018367,17.959916 45.6295545,18.1654118 Z"}),(0,e.jsx)("path",{fill:"#60C7D7",d:"M108.069429,52.6646871 C107.353498,52.5021764 106.74704,52.0770118 106.358818,51.4665225 L99.6045228,40.8441862 C98.6872336,39.4017277 98.3959456,37.6940021 98.7851964,36.0362802 C99.6868283,32.1964548 103.494175,30.5581948 106.504217,31.2414501 C108.245144,31.6366264 109.66005,32.6235115 110.595998,34.0953113 L111.933411,36.1984233 L114.073157,34.8845981 C115.570594,33.9651571 117.282313,33.6879907 119.02324,34.083167 C122.034064,34.7665999 124.724692,37.8806574 123.823241,41.7197139 C123.43399,43.3774359 122.410781,44.7867812 120.943196,45.6878926 L110.13565,52.323833 C109.516272,52.7047952 108.782412,52.8257185 108.069429,52.6646871 Z"}),(0,e.jsx)("path",{fill:"#FBB116",d:"M10.4190768,62.2477494 C9.99837358,62.390177 9.548163,62.3631718 9.14953747,62.1721323 L2.21391311,58.847889 C1.27204443,58.3965026 0.565074356,57.6113683 0.223910783,56.637193 C-0.566335453,54.380685 0.854192463,52.3380378 2.62298511,51.7392195 C3.6460066,51.3928793 4.69472947,51.4532892 5.6557569,51.9138573 L7.02900638,52.571981 L7.69904116,51.2221108 C8.16794488,50.2774447 8.95652261,49.5950234 9.9795441,49.2486832 C11.7487965,48.6497092 14.1469408,49.4000643 14.9370287,51.6561205 C15.2781923,52.6302957 15.2127237,53.6769363 14.7531679,54.6027699 L11.3689194,61.4207686 C11.1751836,61.8118444 10.8377826,62.1054927 10.4190768,62.2477494 Z"})]})}),(0,e.jsx)("div",{className:"cm-trial__modal-avatar",children:(0,e.jsx)(f.p,{imageUrl:(se=(0,y.vD)())==null?void 0:se.preview_url_without_placeholder,gravatarHash:(de=(0,y.vD)())==null?void 0:de.gravatar_hash,name:(je=(0,y.vD)())==null?void 0:je.name,size:u.Z.SIZE_80})})]}),(0,e.jsxs)("div",{className:"cm-trial__modal-content",children:[(0,e.jsx)("h2",{className:"cm-modal__title",children:window.translate("Legacy_trial_expired_title")}),(0,e.jsx)("p",{className:"cm-modal__text",children:window.translate("Legacy_trial_expired_text")}),(0,e.jsx)("div",{className:"cm-btn-bar cm-btn-bar--centered cm-btn-bar--section",children:(0,e.jsx)("button",{className:"cm-btn cm-btn--primary js-cm-trial__upgrade",children:window.translate("Legacy_payment_manage_plan")})})]})]})});var E=i(50427),x=i(18216),C=i(9786),v=i(91463),m=i(41011);const c=({onClick:se})=>(0,e.jsx)(C.$,{hideLabel:!0,icon:(0,e.jsx)(v.default,{}),onClick:se,rounding:m.te.Medium,size:m.Mp.Small,style:m.in.Loud,type:m.VQ.Button,children:"Show Checklist"});var o=i(92585),l=i(45935),h=i(48459),g=i(6804),j=i(55111),$=i(41594),S=i(31415),T=i(33446),A=i(11924),B=i(68354),R=i(52471),k=i(3392),V=i(8406),K=i(90173);const z=({children:se})=>(0,e.jsx)("ul",{className:"tw-pt-2",children:se}),q=({as:se="a",icon:de,label:je,url:_e,onClick:Ce})=>(0,e.jsxs)(se,{href:_e,onClick:Ce,className:"tw-flex tw-my-2 tw-items-center tw-text-text-weak hover:tw-text-text tw-cursor-pointer",children:[(0,e.jsx)("span",{className:"tw-pr-3",children:de}),(0,e.jsx)("span",{className:"tw-font-body tw-font-regular tw-text-body-medium",children:je})]}),re=({currentUser:se,onOpenChat:de})=>{const{t:je}=(0,S.Bd)("translation",{i18n:T.Ay}),_e=(0,y.$5)()==="de"?"de":"en";return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(l.D,{as:"h2",size:"x-large",children:je("HelpCenterFlyoutContent_heading_contact")}),(0,e.jsxs)(z,{children:[(0,e.jsx)(q,{icon:(0,e.jsx)(A.default,{}),label:je("HelpCenterFlyoutContent_link_contact_sales"),url:`https://www.frontify.com/${_e}/consultation?email=${se.emailAddress}&firstname=${se.firstName}&lastname=${se.lastName}`}),(0,e.jsx)(q,{as:"span",icon:(0,e.jsx)(B.default,{}),label:je("HelpCenterFlyoutContent_link_contact_via_chat"),onClick:()=>de()})]})]}),(0,e.jsxs)("div",{className:"tw-pt-7",children:[(0,e.jsx)(l.D,{as:"h2",size:"x-large",children:je("HelpCenterFlyoutContent_heading_ressources")}),(0,e.jsxs)(z,{children:[(0,e.jsx)(q,{icon:(0,e.jsx)(R.default,{}),label:je("HelpCenterFlyoutContent_link_academy"),url:"https://frontify-academy.sana.ai/group-invite/e-bJW__OdS4cWEBFxCKux"}),(0,e.jsx)(q,{icon:(0,e.jsx)(k.default,{}),label:je("HelpCenterFlyoutContent_link_knowledge_base"),url:"https://help.frontify.com"}),(0,e.jsx)(q,{icon:(0,e.jsx)(V.default,{}),label:je("HelpCenterFlyoutContent_link_brand_examples"),url:"https://www.frontify.com/brand-platform-examples"}),(0,e.jsx)(q,{icon:(0,e.jsx)(K.default,{}),label:je("HelpCenterFlyoutContent_link_dev_platform"),url:"https://developer.frontify.com"})]})]})]})},ve=({currentUser:se,onOpenChat:de})=>{const[je,_e]=(0,$.useState)(!1),{t:Ce}=(0,S.Bd)("translation",{i18n:T.Ay});return(0,e.jsx)(o.mj,{fixedHeader:(0,e.jsxs)("div",{className:"tw-bg-white",children:[(0,e.jsxs)("div",{className:"tw-px-6 tw-pt-6",children:[(0,e.jsx)(l.D,{as:"h1",size:"xx-large",children:Ce("HelpCenterFlyout_heading")}),(0,e.jsx)("div",{className:"tw-pt-3 tw-max-w-[22rem]",children:(0,e.jsx)(h.E,{as:"p",size:"medium",color:"x-weak",children:Ce("HelpCenterFlyout_greeting",{name:se.firstName})})})]}),(0,e.jsx)(g.cG,{height:"48px",color:"rgb(234, 235, 235)"})]}),trigger:(0,e.jsx)(C.$,{icon:(0,e.jsx)(j.default,{}),size:m.Mp.Small,style:m.in.Default,emphasis:m.jG.Default,onClick:()=>_e(!je),children:Ce("HelpCenterFlyout_trigger")}),isOpen:je,onOpenChange:()=>_e(!1),placement:o.FM.Bottom,legacyFooter:!1,hug:!1,children:(0,e.jsx)("div",{className:"tw-px-6 tw-pb-6",children:(0,e.jsx)(re,{currentUser:se,onOpenChat:de})})})};var Oe=i(82110),De=i(40402),Ie=i(5181);const Te=class Dg extends x.j{constructor(de,je,_e){super(de,je,_e),this.sandbox.subscribe("events",this),this.isModal=this.$ctx.hasClass("cm-trial__modal")}on(de){this.$ctx.find(".js-cm-trial__upgrade").on("click",je=>{je.preventDefault(),je.stopPropagation(),this.fire("openPayment",["events"])}),this.renderEnterpriseTrial(),de()}after(){if((0,y.wR)()&&this.account.isTrialExpired()&&!(0,Oe.E0)()&&!this.isModal){if((0,Oe.HH)()===Dg.PLAN_ENTERPRISE_TRIAL){(0,De.S)();return}const de=Ie((0,E.EY)(w));this.fire("openModal",{id:"payment",modifier:"default",$content:de},["events"])}}openIntercomChecklist(){window.Intercom("startChecklist",29839473)}openIntercomChat(){window.Intercom("showNewMessage")}getUser(){let de="",je="",_e="";const Ce=(0,y.vD)();if(Ce!=null&&Ce.email&&(de=Ce.email),Ce!=null&&Ce.name){const ee=Ce.name.split(" ");je=ee.length>=2?ee[0]:Ce.name,_e=ee.length>=2?ee[1]:Ce.name}return{emailAddress:de,firstName:je,lastName:_e}}renderEnterpriseTrial(){const de=document.querySelector(".js-cm-banner__children-slot");if(!de||(0,Oe.HH)()!==Dg.PLAN_ENTERPRISE_TRIAL)return;const je=document.createElement("div");je.classList.add("cm-banner__children-item");const _e=document.createElement("div");_e.classList.add("cm-banner__children-item");const{emailAddress:Ce,firstName:ee,lastName:H}=this.getUser();(0,E.Cc)(ve,je,{onOpenChat:()=>this.openIntercomChat(),currentUser:{emailAddress:Ce,firstName:ee,lastName:H}}),(0,E.Cc)(c,_e,{onClick:this.openIntercomChecklist}),de.replaceChildren(je,_e),de.classList.remove("cm-banner__children-slot--hidden")}};Te.PLAN_ENTERPRISE_TRIAL="enterprise_trial";let he=Te},58338:function(fe,F,i){"use strict";i.d(F,{A:function(){return E}});var e=i(86070),u=i(14154),f=i(82110),b=i(81178),y=i(44084),n=i(51297),w=i(151);const E=(0,u.I)(x=>{let C,v,m=[],c=!1,o;const l=(0,f.z)();return!(0,f.kA)()&&!(0,f.PJ)()&&l!==null&&((0,b.wR)()&&x.utils.account.getTrialPlan()!=="FREE"&&!x.utils.account.isExpired()?(o="calendar",l>0?v=x.tpl.translate(window.translate("Legacy_payment_trial_expires_in_x_days"),[`${l}`]):v=window.translate("Legacy_payment_trial_expires_today")):(C='<svg class="cm-banner__image" width="24px" height="26px" viewBox="0 0 156.42 150" id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg"> <defs><style>.cls-1{fill:#2d3232;}</style></defs><path class="cls-1" d="M150.75,99.59l-16.87-9.74a4.9,4.9,0,0,1-2.45-4.23V66.14a11.36,11.36,0,0,0-5.68-9.83l-16.87-9.74a4.92,4.92,0,0,1-2.44-4.24V22.85A11.39,11.39,0,0,0,100.76,13L78.21,0,55.66,13A11.39,11.39,0,0,0,50,22.85V42.33a4.92,4.92,0,0,1-2.44,4.24L30.67,56.31A11.38,11.38,0,0,0,25,66.14V85.62a4.89,4.89,0,0,1-2.44,4.23L5.68,99.59A11.41,11.41,0,0,0,0,109.43v26l22.55,13a11.34,11.34,0,0,0,11.35,0l16.87-9.74a4.91,4.91,0,0,1,4.89,0l16.87,9.74a11.37,11.37,0,0,0,11.36,0l16.87-9.74a4.91,4.91,0,0,1,4.89,0l16.87,9.74a11.34,11.34,0,0,0,11.35,0l22.55-13v-26A11.4,11.4,0,0,0,150.75,99.59ZM100,22.85V42.33a11.39,11.39,0,0,0,5.68,9.83l16.87,9.74A4.91,4.91,0,0,1,125,66.14V85.62a11.38,11.38,0,0,0,5.67,9.83l16.87,9.74a4.9,4.9,0,0,1,2.45,4.24V128L81.44,88.44V9.33l16.09,9.29A4.89,4.89,0,0,1,100,22.85ZM8.91,105.19l16.87-9.74a11.39,11.39,0,0,0,5.68-9.83V66.14A4.9,4.9,0,0,1,33.9,61.9l16.87-9.74a11.39,11.39,0,0,0,5.68-9.83V22.85a4.91,4.91,0,0,1,2.44-4.23L75,9.33V88.44L6.47,128V109.43A4.9,4.9,0,0,1,8.91,105.19Zm121.73,37.7a4.91,4.91,0,0,1-4.89,0l-16.87-9.74a11.34,11.34,0,0,0-11.35,0l-16.87,9.74a4.91,4.91,0,0,1-4.89,0L58.9,133.15a11.36,11.36,0,0,0-11.36,0l-16.87,9.74a4.91,4.91,0,0,1-4.89,0L9.7,133.6,78.21,94l68.51,39.56Z"/> </svg> ',v="Made with Frontify"),(0,b.wR)()&&x.utils.account.getTrialPlan()===w.s.PLAN_ENTERPRISE_TRIAL?(m=[],c=!0):(0,b.wR)()?m=[{modifier:"cm-trial__upgrade js-cm-trial__upgrade",text:window.translate("Legacy_trial_btn_upgrade")}]:m=[{url:"https://frontify.com/en",text:window.translate("Legacy_trial_btn_visit")}]),!(0,f.kA)()&&!(0,f.PJ)()&&(0,f.z)()!==null?(0,e.jsx)("div",{className:"mod mod-c-trial cm-trial",children:(0,e.jsx)(n.c,{type:y.w.TYPE_INFORMATION,horizontalAlignment:y.w.HORIZONTAL_ALIGNMENT_CENTER,imageHtml:C,icon:o,message:v,actions:m,hasChildrenSlot:c})}):null})},60801:function(fe,F,i){"use strict";i.d(F,{h:function(){return B}});var e=i(35012),u=i.n(e),f=i(78149),b=i(8609),y=i(77007),n=i(50427),w=i(18216),E=i(34933),x=i(28466),C=i(9128),v=i(86070),m=i(95376),c=i(14154),o=Object.defineProperty,l=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,j=(R,k,V)=>k in R?o(R,k,{enumerable:!0,configurable:!0,writable:!0,value:V}):R[k]=V,$=(R,k)=>{for(var V in k||(k={}))h.call(k,V)&&j(R,V,k[V]);if(l)for(var V of l(k))g.call(k,V)&&j(R,V,k[V]);return R};const S=(0,c.I)(R=>(0,v.jsxs)("div",{className:`cm-video__marker-wrapper js-cm-video__marker-wrapper ${R.width?"cm-video__marker-wrapper--duration":""}`,style:$({left:`${R.position}%`},R.width?{width:`${R.width}%`}:{}),"data-id":R.id,"data-start":R.start,"data-end":R.end,children:[(0,v.jsx)("div",{className:`cm-video__marker js-cm-video__marker ${R.width?"cm-video__marker--duration":""}`}),(0,v.jsxs)("div",{className:"cm-video__marker-description js-cm-video__marker-description",children:[(0,m.Ay)(R.markerDescription),(0,v.jsx)("div",{className:"cm-video__marker-description-arrow js-cm-video__marker-description-arrow"})]})]}));var T=i(5181);const A=/iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;class B extends w.j{constructor(){super(...arguments),this.THUMBNAIL_DEBOUNCE_TIME_IN_MS=100,this.idleTimeUpdates=0,this.isVideoInteracted=!1,this.lastVolume=1,this.pollExecutionAmount=0,this.progressbarMarkerData=[]}static get SPECIAL_CONTROLS_BREAKPOINT(){return 400}static get KEY_CODE_SPACE_BAR(){return"Space"}static get KEY_CODE_ARROW_LEFT(){return"ArrowLeft"}static get KEY_CODE_ARROW_RIGHT(){return"ArrowRight"}static get KEY_CODE_ESCAPE(){return"Escape"}async on(k){this.$loader=T((0,n.EY)(b.$,{id:this.id})),this.sandbox.addModules(this.$loader),this.sandbox.subscribe("events",this),this.hideControlsOnLeaveAndIdle=this.$ctx.dataAsBoolean("hideControlsOnLeaveAndIdle"),this.hideSpecialControls=this.$ctx.dataAsBoolean("hideSpecialControls"),this.previewUrl=this.$ctx.dataAsString("previewUrl"),this.processingInProgressText=this.$ctx.dataAsString("processingInProgressText"),this.spaceBarToggleOnlyAfterInteraction=this.$ctx.dataAsBoolean("spaceBarToggleOnlyAfterInteraction"),this.teaserImage=this.$ctx.dataAsString("teaserImage"),this.$videoItem=this.$ctx.find(".js-cm-video__item"),this.$video=this.$ctx.find(".js-cm-video__item-video"),this.$dropzone=this.$ctx.find(".js-cm-video__dropzone-wrap"),this.$dropzone.length>0&&this._initFileUpload(),this.$video.length>0&&(this.videoTag=this.$video[0],this._initVideoControls(),this.$video.dataAsBoolean("autoplay")&&(await this.toggleVideo(),this.hideVideoControls())),this.bindAttributes(),k()}bindAttributes(){this.tpl.bindDataAttributes(this,{hideControlsOnLeaveAndIdle:{type:Boolean,changed:k=>this.updateHideControlsOnLeaveAndIdle(k.currentValue)}})}setLoopAttribute(k){this.$video.attr("loop",`${k}`)}setAutoplayAttribute(k){this.$video.dataAsBoolean("autoplay",k)}_initVideoControls(){if(A)this.$ctx.find(".js-cm-video__controls").hide(),this.$ctx.find(".js-cm-video__controls-background-gradient").hide(),this.videoTag.setAttribute("controls","true"),this.videoTag.onplay=()=>{this.removeVideoBackgroundImage()};else{this.$controls=this.$ctx.find(".js-cm-video__controls"),this.$controlsBackgroundGradient=this.$ctx.find(".js-cm-video__controls-background-gradient"),this.$videoIconBackward=this.$ctx.find(".js-cm-video__control-backward"),this.$videoIconForward=this.$ctx.find(".js-cm-video__control-forward"),this.$videoIconFullscreen=this.$ctx.find(".js-cm-video__control-fullscreen"),this.$videoIconLoading=this.$ctx.find(".js-cm-video__item-icon-loading"),this.$videoIconPlay=this.$ctx.find(".js-cm-video__control-play"),this.$videoIconVolume=this.$ctx.find(".js-cm-video__control-volume"),this.$videoSpeedSetting=this.$ctx.find(".js-cm-video__control-speed-container"),this.$videoVolumeSlider=this.$ctx.find(".js-cm-video__control-volume-slider"),this.$progressBar=this.$ctx.find(".js-cm-video__progressbar"),this.$progressBarCursor=this.$ctx.find(".js-cm-video__progressbar-cursor"),this.$progressBarPlayed=this.$ctx.find(".js-cm-video__progressbar-played"),this.$progressBarThumbnail=this.$ctx.find(".js-cm-video__progressbar-thumbnail"),this.$progressBarThumbnailImage=this.$ctx.find(".js-cm-video__progressbar-thumbnail-image"),this.$progressBarThumbnailTime=this.$ctx.find(".js-cm-video__progressbar-thumbnail-time span"),this.$progressbarMarkerContainer=this.$progressBar.find(".js-cm-video__progressbar-marker-container");const k=this.$videoVolumeSlider.val();this.videoTag.volume=parseFloat(k),this.hideFullscreenIconIfNotSupported(),this.hideSpecialControls&&this.hideVideoSpecialControls(),this.bindOrUnbindHideControlsOnLeave(),this.bindShowControlsOnMove(),this.bindShowControlsOnFocus(),this.bindVideoClickEvent(),this.bindVideoIconPlayEvent(),this.bindVideoIconBackwardEvent(),this.bindVideoIconForwardEvent(),this.bindVideoIconVolumeEvent(),this.bindVideoIconVolumeSliderFocusEvent(),this.bindVideoIconVolumeSliderEvent(),this.bindVideoIconFullscreenEvent(),this.bindExitFullscreenEvent(),this.bindVideoSpeedEvent(),this.bindVideoProgressbarEvents(),this.bindVideoEvents(),this.bindKeyboardControls(),this.updateTimeDisplay()}}_replaceVideo(){this.$dropzone=T((0,n.EY)(x.I,{classes:"state-hidden",allowedExtensions:`.${(0,E.EA)().join(",.")}`})),this.$ctx.append(this.$dropzone),this._initFileUpload(),this.$ctx.find(".js-cm-video__dropzone-upload").trigger("click")}_initFileUpload(){const k=(0,E.EA)(),V=this.$dropzone,K=T(".js-cm-video__placeholder",this.$ctx),z=T(".js-cm-video__dropzone-upload",this.$ctx);z.upload({dropZone:V,add:(q,re)=>{const ve=re.name.split(".").pop();if(T.inArray(ve,k)>-1||re.files[0].type.includes("video"))re.submit();else return this._displayError(),!1;this.data.checkStorageLimit(re.files[0].size).then(()=>{re.submit()})},start:()=>{this.$videoItem.remove(),V.removeClass("state-hidden"),z.remove(),V.find(".js-cm-video__dropzone-icon").replaceWith(this.$loader)},progress:(q,re)=>{const ve=parseInt(re.loaded/re.total*100,10);this.fire("progress",{id:this.id,progress:ve})},done:(q,re)=>{re.result&&re.result[0]&&(this.previewUrl=re.result[0].generic_url.replace("?format=mp4","").replace("&format=mp4",""),typeof this.uploaded=="function"&&this.uploaded(re.result[0]),K.text(this.processingInProgressText),this.$loader.remove(),this.performVideoProcessingStatusCheck(re.result[0].file_id,V))}})}performVideoProcessingStatusCheck(k,V){const K=setInterval(()=>{this.data.get(`/api/file/${k}`).then(z=>{var q,re;(re=(q=z.data)==null?void 0:q.details)!=null&&re.width&&(clearInterval(K),this.$videoItem=T((0,n.EY)(C.O,{previewUrl:this.previewUrl})),V.remove(),this.$dropzone=null,this.$ctx.append(this.$videoItem),this.$video=this.$ctx.find(".js-cm-video__item-video"),this.videoTag=this.$video[0],this._initVideoControls(),typeof this.processed=="function"&&this.processed())}),this.pollExecutionAmount++,this.pollExecutionAmount>60&&clearInterval(K)},3e3)}_displayError(){this.fire("swal",{template:"brandportal-video-upload-error",closeOnConfirm:!0})}async toggleVideo(){A||(this.videoTag.paused?(await this.videoTag.play(),this.tpl.fireCustomEvent(this.videoTag,"CVideoPlayed"),this.$videoIconPlay.attr("aria-pressed","true")):(this.videoTag.pause(),this.$videoIconPlay.attr("aria-pressed","false")))}pauseVideo(){this.videoTag.pause()}getPercentageProgressbarPositionByTime(k){return k/this.videoTag.duration*100}setVideoTime(k){this.videoTag.currentTime=k}setVideoTimeByTimeDifference(k){let V=this.videoTag.currentTime+k;V<0?V=0:V>this.videoTag.duration&&(V=this.videoTag.duration),this.setVideoTime(V),this.fire("videoSeeked",this.getVideoMetadata(),["events"]),this.isVideoInteracted=!0}seekVideo5SecondsBackward(){this.setVideoTimeByTimeDifference(-5)}seekVideo5SecondsForward(){this.setVideoTimeByTimeDifference(5)}setVideoTimeByCursorPosition(k){const V=this.getVideoTimeByCursorPosition(k);this.setVideoTime(V),this.fire("videoSeeked",this.getVideoMetadata(),["events"]),this.isVideoInteracted=!0}getVideoTimeByCursorPosition(k){return k/this.$progressBar[0].offsetWidth*this.videoTag.duration}getFormattedTime(k){const V=Math.floor(k/60/60),K=Math.floor(k/60)-V*60,z=Math.round(k%60);let q;return V>0?q=`${V}:${this.padNumberToTwoDigitString(K)}:${this.padNumberToTwoDigitString(z)}`:q=`${this.padNumberToTwoDigitString(K)}:${this.padNumberToTwoDigitString(z)}`,q}padNumberToTwoDigitString(k){return(k<10?"0":"")+k}getVideoMetadata(){return{currentTime:this.videoTag.currentTime,duration:this.videoTag.duration}}updateTimeDisplay(){const k=this.$ctx.find(".js-cm-video__control-time span"),V=this.getFormattedTime(this.valueIsNaNOrInfinity(this.videoTag.duration)?0:Math.round(this.videoTag.duration)),K=this.getFormattedTime(this.valueIsNaNOrInfinity(this.videoTag.currentTime)?0:Math.round(this.videoTag.currentTime));k.text(`${K} / ${V}`)}valueIsNaNOrInfinity(k){return Number.isNaN(k)||!isFinite(k)}updateProgressbarPlayed(){const k=this.getPercentageProgressbarPositionByTime(this.videoTag.currentTime);this.$progressBarPlayed.css({width:`${k}%`})}setThumbnailPositionByCursorPosition(k){const V=this.canvas.width,K=this.getPositionWithinBounds(k,V);this.$progressBarThumbnail.removeClass("state-hidden"),this.$progressBarThumbnail.css({left:K.left})}initializeThumbnailCanvas(){this.canvas||(this.canvas=document.createElement("canvas"),this.calculateThumbnailSize(),this.canvasCtx=this.canvas.getContext("2d"))}calculateThumbnailSize(){const k=this.videoTag.videoHeight,V=this.videoTag.videoWidth;k>V?(this.canvas.height=120,this.canvas.width=V*120/k):(this.canvas.height=k*160/V,this.canvas.width=160)}setThumbnailTime(k){this.videoTagClone?this.videoTagClone.currentTime=Math.floor(k*100)/100:(this.videoTagClone=T(this.videoTag).clone()[0],this.bindThumbnailTimeupdate(),T(this.videoTagClone).on("loadedmetadata",()=>{this.videoTagClone.currentTime=Math.floor(k*100)/100}))}updateThumbnailTimeDisplay(k){const V=this.getFormattedTime(Math.round(k));this.$progressBarThumbnailTime.text(V)}setProgressbarMarkerData(k){this.progressbarMarkerData=y.y.isArray(k)?k:[],this.createProgressbarMarkers()}createProgressbarMarkers(){if(this.progressbarMarkerData&&this.$ctx.dataAsBoolean("metadataLoaded")){this.$progressbarMarkerContainer.empty();for(const k of this.progressbarMarkerData){let V;k.descriptionTemplate&&k.descriptionTemplate,V=(0,n.EY)(k.descriptionTemplate,k.descriptionData);const K={id:k.id,start:k.start,end:k.end,position:this.getPercentageProgressbarPositionByTime(k.start),markerDescription:V},z=T((0,n.EY)(S,K));this.tpl.addAndActivate(this.$progressbarMarkerContainer,z,!1),z.on("click",q=>{q.stopPropagation();const re=T(q.currentTarget);this.fire("progressBarMarkerClicked",re,["events"]),this.isVideoInteracted=!0}),z.on("mousemove",q=>{q.stopPropagation(),this.$progressBarCursor.addClass("state-hidden"),this.$progressBarThumbnail.addClass("state-hidden")}),z.on("click",".js-cm-video__marker-description",q=>{const ve=T(q.currentTarget).closest(".js-cm-video__marker-wrapper");this.exitFullscreen(),this.fire("progressBarMarkerClicked",ve,["events"]),this.isVideoInteracted=!0})}}}removeProgressbarMarkers(){this.$progressbarMarkerContainer.find(".js-cm-video__marker-wrapper").remove()}setMarkerDescriptionPosition(k){const V=k.find(".js-cm-video__marker-description"),K=k.find(".js-cm-video__marker-description-arrow");V.removeClass("cm-video__marker-description--left"),V.removeClass("cm-video__marker-description--right"),V.removeClass("cm-video__marker-description--above"),K.removeClass("cm-video__marker-description-arrow--left"),K.removeClass("cm-video__marker-description-arrow--right");const z=32,q=k.position().left+parseInt(k.css("marginLeft")),re=V.width()/2,ve=T(this.videoTag).width(),Oe=this.$controls.find(".js-cm-video__actions-left")[0].offsetWidth+z,De=this.$controls.find(".js-cm-video__actions-right")[0].offsetWidth+z;q-z<re?(V.addClass("cm-video__marker-description--left"),K.addClass("cm-video__marker-description-arrow--left")):ve-De-q<re&&(V.addClass("cm-video__marker-description--right"),K.addClass("cm-video__marker-description-arrow--right")),(q-re<Oe||ve-q-z<De)&&V.addClass("cm-video__marker-description--above")}getPositionWithinBounds(k,V){const K=T(this.$progressBar).width(),z=V/2,q={aligned:"center",left:k-z,videoWidth:K};return k<z?(q.aligned="left",q.left=0):k>K-z&&(q.aligned="right",q.left=K-V),q}getClosestProgressBarMarkerByCurrentTime(){const k=this.$progressbarMarkerContainer.find(".js-cm-video__marker-wrapper"),V=this.videoTag.currentTime;let K=k.first();return T.each(k,(z,q)=>{const re=T(q).dataAsNumber("start"),ve=K.dataAsNumber("start");Math.abs(re-V)<Math.abs(ve-V)&&V>=re&&(K=T(q))}),K}updateMarkerDescriptionVisibility(k){const V=this.$progressbarMarkerContainer.find(".js-cm-video__marker-description.state-visible"),K=k.find(".js-cm-video__marker-description");V[0]!==K[0]&&(this.hideMarkerDescription(V,"fadeOut",150),V.removeClass("state-visible")),this.setMarkerDescriptionPosition(k);const z=V.length>0?200:0;this.updateItemVisibilityByCurrentTime(K,k.dataAsNumber("start"),k.dataAsNumber("end"),6,()=>{this.showMarkerDescription(K,"transition.bounceUpIn",400,z)},()=>{this.hideMarkerDescription(K,"transition.bounceDownOut",700)}),this.deselectProgressbarMarkers();const q=k.find(".js-cm-video__marker");this.updateItemVisibilityByCurrentTime(q,k.dataAsNumber("start"),k.dataAsNumber("end"),3,()=>{q.addClass("state-selected")},()=>{q.removeClass("state-selected")})}showMarkerDescription(k,V,K,z){k.css("visibility")==="visible"||!this.isFullscreen()||(k.velocity(V,{delay:z,duration:K,ease:[.13,1.05,.55,.59],visibility:"visible"}),k.addClass("state-visible"))}hideMarkerDescription(k,V,K){k.css("visibility")==="hidden"||!this.isFullscreen()||k.velocity(V,{duration:K,ease:[.13,1.05,.55,.59],visibility:"hidden"})}hideAllMarkerDescriptions(){this.$progressbarMarkerContainer.find(".js-cm-video__marker-description").removeAttr("style")}sendVideoScreenToggledEvent(){this.fire("videoFullscreenClicked",{newFullscreenState:this.isFullscreen()},["events"])}updateItemVisibilityByCurrentTime(k,V,K,z,q,re){const ve=V===K?K+z:K;this.videoTag.currentTime<V||this.videoTag.currentTime>ve?re():q()}selectProgressbarMarker(k){this.$progressbarMarkerContainer.find(`.js-cm-video__marker-wrapper[data-id="${k}"]`).find(".js-cm-video__marker").addClass("state-selected")}deselectProgressbarMarkers(){const k=this.$progressbarMarkerContainer.find(".js-cm-video__marker.state-selected");k.length>0&&k.removeClass("state-selected")}toggleFullscreen(){const k=this.$ctx[0];this.isFullscreen()?this.exitFullscreen():this.enterFullScreen(k)}isFullscreen(){return!!(document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement)}isFullscreenSupported(){const k=this.$ctx[0];return!!(k.fullscreenEnabled||k.webkitRequestFullScreen||k.mozRequestFullScreen||k.msRequestFullscreen)}enterFullScreen(k){k.fullscreenEnabled?k.requestFullscreen():k.webkitRequestFullScreen?k.webkitRequestFullScreen():k.mozRequestFullScreen?k.mozRequestFullScreen():k.msRequestFullscreen&&k.msRequestFullscreen()}async exitFullscreen(){document.exitFullscreen?await document.exitFullscreen():document.webkitCancelFullScreen?await document.webkitCancelFullScreen():document.mozCancelFullScreen?await document.msExitFullscreen():document.msRequestFullscreen&&await document.msExitFullscreen()}removeVideoBackgroundImage(){this.videoTag.style.removeProperty("background"),this.$ctx.find(".cm-video__background").removeClass("cm-video__background")}bindOrUnbindHideControlsOnLeave(){this.$ctx.off("mouseenter mouseleave"),this.hideControlsOnLeaveAndIdle&&this.$ctx.on("mouseenter mouseleave",k=>{k.type==="mouseenter"?this.showVideoControls():this.hideVideoControls()})}updateHideControlsOnLeaveAndIdle(k){this.hideControlsOnLeaveAndIdle=k,this.hideControlsOnLeaveAndIdle||this.showVideoControls(),this.bindOrUnbindHideControlsOnLeave()}bindShowControlsOnMove(){this.$ctx.on("mousemove",()=>{this.showVideoControls(),this.idleTimeUpdates=0})}bindShowControlsOnFocus(){const k=[this.$videoIconPlay,this.$videoIconBackward,this.$videoIconForward,this.$videoSpeedSetting,this.$videoIconVolume,this.$videoVolumeSlider,this.$videoIconFullscreen];for(const V of k)V.on("focus",()=>{this.showVideoControls()})}showVideoControls(){this.$controls&&(this.$controls.removeClass("state-hidden"),this.$controlsBackgroundGradient.removeClass("state-hidden"))}hideVideoControls(){this.$controls&&this.$controls.find(":focus").length===0&&(this.$controls.addClass("state-hidden"),this.$controlsBackgroundGradient.addClass("state-hidden"))}hideVideoControlsOnIdle(){this.videoTag.paused&&this.showVideoControls(),this.idleTimeUpdates>7&&(this.hideVideoControls(),this.idleTimeUpdates=0),this.idleTimeUpdates+=1}showVideoSpecialControls(){this.$videoIconBackward.show(),this.$videoIconForward.show(),this.$videoSpeedSetting.show()}hideVideoSpecialControls(){this.$videoIconBackward.hide(),this.$videoIconForward.hide(),this.$videoSpeedSetting.hide()}toggleVideoSpecialControls(k){k<B.SPECIAL_CONTROLS_BREAKPOINT?this.hideVideoSpecialControls():this.showVideoSpecialControls()}hideFullscreenIconIfNotSupported(){this.isFullscreenSupported()||this.$videoIconFullscreen.hide()}bindVideoClickEvent(){this.$video.on("click.play, touchstart.play",async k=>{k.preventDefault(),(this.hideControlsOnLeaveAndIdle||this.isFullscreen())&&await this.toggleVideo()})}bindVideoIconPlayEvent(){this.$videoIconPlay.on("click.video",async()=>{await this.toggleVideo()})}bindVideoIconBackwardEvent(){this.$videoIconBackward.on("click.video",()=>{this.seekVideo5SecondsBackward()})}bindVideoIconForwardEvent(){this.$videoIconForward.on("click.video",()=>{this.seekVideo5SecondsForward()})}bindVideoSpeedEvent(){this.$ctx.on("click.video",".js-cm-video__control-speed-option",k=>{this.updatePlaybackRate({title:T(k.currentTarget).text(),playbackRate:T(k.currentTarget).dataAsNumber("playbackRate")});const V=T(k.currentTarget).closest(".js-cm-btn-dropdown__menu");this.fire("closeDropdown",V,["events"]),this.fire("videoSpeedOptionsClicked",["events"]),this.isVideoInteracted=!0})}updatePlaybackRate(k){this.videoTag.playbackRate=k.playbackRate,this.$ctx.find(".js-cm-video__control-speed-option.state-active").removeClass("state-active"),this.$ctx.find(`.js-cm-video__control-speed-option[data-playback-rate="${k.playbackRate}"]`).addClass("state-active"),this.$ctx.find(".js-cm-video__control-speed-label").text(k.title)}onSpeedControlOpened(k){k.$toggle.find("i").toggleClass("cm-video__control-speed--rotated")}onSpeedControlClosed(k){k.$toggle.find("i").toggleClass("cm-video__control-speed--rotated")}bindVideoIconVolumeEvent(){this.$videoIconVolume.on("click.video",()=>{let k;this.$videoVolumeSlider.val()==="0"?(k=this.lastVolume,this.$videoIconVolume.attr("aria-pressed","false")):(this.lastVolume=this.videoTag.volume,this.$videoIconVolume.attr("aria-pressed","true"),k=0),this.$videoVolumeSlider.val(k),this.$videoVolumeSlider.change(),this.fire("videoVolumeClicked",["events"]),this.isVideoInteracted=!0})}bindVideoIconVolumeSliderEvent(){this.$videoVolumeSlider.on("input.video, change.video",k=>{this.videoTag.volume=k.currentTarget.value,Math.ceil(k.currentTarget.value)===0?(this.replaceIcon(this.$videoIconVolume,"volume-off","md"),this.$videoIconVolume.attr("aria-pressed","true")):(this.replaceIcon(this.$videoIconVolume,"volume-on","md"),this.$videoIconVolume.attr("aria-pressed","false"))})}bindVideoIconVolumeSliderFocusEvent(){this.$videoVolumeSlider.focus(()=>{this.$videoVolumeSlider.parent().addClass("cm-video__control-volume-container--visible")}),this.$videoVolumeSlider.blur(()=>{this.$videoVolumeSlider.parent().removeClass("cm-video__control-volume-container--visible")})}bindVideoIconFullscreenEvent(){this.isFullscreenSupported()&&this.$videoIconFullscreen.on("click",()=>{this.toggleFullscreen(),this.isVideoInteracted=!0})}bindExitFullscreenEvent(){const k=()=>{this.hideAllMarkerDescriptions(),this.sendVideoScreenToggledEvent()};T(document).on("fullscreenchange",k),T(document).on("mozfullscreenchange",k),T(document).on("webkitfullscreenchange",k),T(document).on("msfullscreenchange",k)}bindVideoProgressbarEvents(){this.$progressBar.on("click.video",V=>{V.offsetX&&this.setVideoTimeByCursorPosition(V.offsetX)});let k=!1;this.$progressBar.on("mousedown.video",()=>{k=!0}),this.$progressBar.on("mouseup.video",()=>{k=!1}),this.$progressBar.on("mouseleave",()=>{this.$progressBarCursor.addClass("state-hidden"),this.$progressBarThumbnail.addClass("state-hidden")}),this.$progressBar.on("mousemove.video",V=>{if(!this.$ctx.dataAsBoolean("metadataLoaded")||!V.offsetX)return;this.progressBarThumbnailDebouncedCallback||(this.progressBarThumbnailDebouncedCallback=u()(this.THUMBNAIL_DEBOUNCE_TIME_IN_MS,z=>this.setThumbnailTime(z))),this.$progressBarCursor.removeClass("state-hidden"),this.$progressBarCursor.css({left:V.offsetX}),this.initializeThumbnailCanvas(),this.setThumbnailPositionByCursorPosition(V.offsetX);const K=this.getVideoTimeByCursorPosition(V.offsetX);this.updateThumbnailTimeDisplay(K),this.progressBarThumbnailDebouncedCallback(K),k&&this.setVideoTimeByCursorPosition(V.offsetX)})}bindThumbnailTimeupdate(){T(this.videoTagClone).on("timeupdate",()=>{this.canvasCtx.drawImage(this.videoTagClone,0,0,this.canvas.width,this.canvas.height),this.$progressBarThumbnailImage.attr("src",this.canvas.toDataURL())})}bindKeyboardControls(){T("html").on(`keydown.videoKeyControls${this.id}`,T.debounce(200,!0,V=>this.keydown(V)))}async keydown(k){if(k.code!==B.KEY_CODE_ESCAPE&&(k.target.localName==="textarea"||k.target.localName==="input"||k.target.localName==="select"||k.target.getAttribute("contenteditable")==="true"||k.target.classList.contains("ql-editor")||k.target.role==="textbox"))return!0;switch(k.code){case B.KEY_CODE_ARROW_LEFT:this.isVideoInteracted&&this.seekVideo5SecondsBackward();break;case B.KEY_CODE_ARROW_RIGHT:this.isVideoInteracted&&this.seekVideo5SecondsForward();break;case B.KEY_CODE_SPACE_BAR:(!this.spaceBarToggleOnlyAfterInteraction||this.isVideoInteracted)&&(k.preventDefault(),await this.toggleVideo());break}}bindVideoEvents(){this.videoTag.onplay=()=>{this.removeVideoBackgroundImage(),this.replaceIcon(this.$videoIconPlay,"pause","md"),this.fire("videoPlaybackStarted",["events"]),this.isVideoInteracted=!0,this.videoTag.setAttribute("data-test-state","video-onplay")},this.videoTag.oncanplay=()=>{this.videoTag.setAttribute("data-test-ready","video-oncanplay")},this.videoTag.onplaying=()=>{this.$videoIconLoading.hide(),this.fire("videoPlaybackStarted",["events"])},this.videoTag.ontimeupdate=()=>{this.updateTimeDisplay(),this.updateProgressbarPlayed();const k=this.getClosestProgressBarMarkerByCurrentTime();k.length>0&&this.updateMarkerDescriptionVisibility(k),this.hideControlsOnLeaveAndIdle&&this.hideVideoControlsOnIdle(),this.fire("videoTimeUpdated",this.getVideoMetadata(),["events"])},this.videoTag.onwaiting=()=>{this.$videoIconLoading.show()},this.videoTag.onpause=()=>{this.$videoIconLoading.hide(),this.replaceIcon(this.$videoIconPlay,"play","md"),this.fire("videoPlaybackStopped",this.getVideoMetadata(),["events"])},this.videoTag.onended=()=>{this.$videoIconLoading.hide(),this.fire("videoPlaybackStopped",this.getVideoMetadata(),["events"])},this.videoTag.onloadedmetadata=()=>{this.updateTimeDisplay(),this.$ctx.dataAsBoolean("metadataLoaded",!0),this.createProgressbarMarkers(),this.fire("videoMetadataLoaded",this.getVideoMetadata(),["events"])}}replaceIcon(k,V,K){const z=(0,n.EY)(f.V,{icon:V,size:K});k.html(z)}destroy(){this.sandbox.removeModules(this.$ctx)}stop(){this.unbindKeyboardControls(),A||this.unbindEvents()}unbindKeyboardControls(){T("html").off(`keydown.videoKeyControls${this.id}`)}unbindEvents(){this.$videoIconPlay.off("click.video"),this.$videoIconBackward.off("click.video"),this.$videoIconForward.off("click.video")}onAnnotationMessageEditorFocused(){this.videoTag.paused||this.toggleVideo()}onEditorZoomed(k){this.toggleVideoSpecialControls(k)}onPbBlockWidthUpdated(k){this.toggleVideoSpecialControls(k)}onRemoteVideoPlayToggle(){this.toggleVideo()}onRemoteVideoSeekBackward(){this.seekVideo5SecondsBackward()}onRemoteVideoSeekForward(){this.seekVideo5SecondsForward()}onVideoPlaybackStarted(){this.isVideoInteracted=!1}onVideoPlaybackStopped(){this.isVideoInteracted=!1}onVideoSeeked(){this.isVideoInteracted=!1}onVideoSpeedOptionsClicked(){this.isVideoInteracted=!1}onVideoVolumeClicked(){this.isVideoInteracted=!1}onVideoFullscreenClicked(){this.isVideoInteracted=!1}onViewerOpened(){this.isVideoInteracted=!1}onViewerAssetChange(){this.destroy()}onViewerClosed(k){T(k.content).data("terrificId")===this.id&&this.destroy(),this.isVideoInteracted=!1}}},28466:function(fe,F,i){"use strict";i.d(F,{I:function(){return y}});var e=i(86070),u=i(49198),f=i.n(u),b=i(14154);const y=(0,b.I)(n=>{const w=Math.floor(Math.random()*1e4),E=f()(n.preview_image_background);E.setAlpha(.8);const x=f()(n.preview_image_background);return x.setAlpha(.6),(0,e.jsxs)("div",{className:`cm-video__dropzone-wrap cm-video__dropzone-wrap--${w}${n.classes?` ${n.classes}`:""} js-cm-video__dropzone-wrap`,children:[(0,e.jsx)("style",{dangerouslySetInnerHTML:{__html:`
                    .cm-video__dropzone-wrap--${w}:before {
                        ${n.preview_image_background?`background-color: ${n.preview_image_background};`:""}
                        background-image: url('/img/brandportal/blocks/image/placeholder-triangle.jpg');
                    }

                    .cm-video__dropzone-wrap--${w}:after {
                        ${n.preview_image_background?`background-image: linear-gradient(to bottom, ${E.toRgbString()} 0%, ${x.toRgbString()} 100%);`:""}
                    }`}}),(0,e.jsxs)("div",{className:"cm-video__dropzone",children:[(0,e.jsx)("i",{className:"js-cm-video__dropzone-icon cm-video__dropzone-icon icon-film"}),(0,e.jsx)("span",{className:"js-cm-video__placeholder",children:window.translate("Legacy_video_placeholder")}),(0,e.jsx)("input",{className:"cm-video__dropzone-upload js-cm-video__dropzone-upload",type:"file",name:"files[]",accept:n.allowedExtensions,"aria-label":window.translate("Legacy_video_placeholder")})]})]})})},9128:function(fe,F,i){"use strict";i.d(F,{O:function(){return o}});var e=i(86070),u=i(14154),f=i(78149);const b=(0,u.I)(l=>(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"cm-video__controls__annotation-background"}),(0,e.jsxs)("div",{className:"cm-video__controls cm-video__controls-new js-cm-video__controls",children:[(0,e.jsxs)("div",{className:"cm-video__progressbar-new js-cm-video__progressbar",children:[(0,e.jsx)("div",{className:"cm-video__progressbar-new-background",children:(0,e.jsx)("div",{className:"cm-video__progressbar-new-played js-cm-video__progressbar-played"})}),(0,e.jsx)("div",{className:"cm-video__progressbar-cursor state-hidden js-cm-video__progressbar-cursor"}),(0,e.jsx)("div",{className:"cm-video__progressbar-marker-container js-cm-video__progressbar-marker-container"})]}),(0,e.jsxs)("div",{className:"cm-video__progressbar-thumbnail state-hidden js-cm-video__progressbar-thumbnail",children:[(0,e.jsx)("img",{className:"cm-video__progressbar-thumbnail-image js-cm-video__progressbar-thumbnail-image"}),(0,e.jsx)("div",{className:"cm-video__progressbar-thumbnail-time js-cm-video__progressbar-thumbnail-time",children:(0,e.jsx)("span",{})})]}),(0,e.jsxs)("div",{className:"cm-video__control-actions-new js-cm-video__control-actions",children:[(0,e.jsxs)("div",{className:"cm-video__actions-left js-cm-video__actions-left",children:[(0,e.jsx)("button",{"aria-label":window.translate("VideoPlayer_ariaLabelPlayPause"),"aria-pressed":l.autoplay?"true":"false",className:"cm-video__control cm-video__control-play js-cm-video__control-play",children:(0,e.jsx)(f.V,{icon:"play",size:"md"})}),(0,e.jsx)("button",{"aria-label":window.translate("VideoPlayer_ariaLabelStepBackward"),className:"cm-video__control cm-video__control-backward js-cm-video__control-backward",children:(0,e.jsx)(f.V,{icon:"backward-5-seconds",size:"md"})}),(0,e.jsx)("button",{"aria-label":window.translate("VideoPlayer_ariaLabelStepForward"),className:"cm-video__control cm-video__control-forward js-cm-video__control-forward",children:(0,e.jsx)(f.V,{icon:"forward-5-seconds",size:"md"})}),(0,e.jsx)("div",{className:"cm-video__control cm-video__control-time js-cm-video__control-time",children:(0,e.jsx)("span",{})}),(0,e.jsx)("div",{className:"cm-video__control cm-video__control-speed-container js-cm-video__control-speed-container",children:(0,e.jsxs)("div",{className:"cm-btn-dropdown",children:[(0,e.jsx)("a",{href:"javascript:;",role:"button","aria-label":window.translate("VideoPlayer_ariaLabelChangeSpeed"),className:"js-cm-btn-dropdown__toggle","data-event":"speedControl",children:(0,e.jsxs)("div",{className:"cm-video__control-speed js-cm-video__control-speed",children:[(0,e.jsx)("span",{className:"cm-video__control-speed-label js-cm-video__control-speed-label",children:window.translate("Legacy_video_player_speed_normal")}),(0,e.jsx)(f.V,{icon:"caret-down",size:"sm"})]})}),(0,e.jsx)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--no-min-width cm-btn-dropdown__menu--no-background-color js-cm-btn-dropdown__menu",children:(0,e.jsxs)("div",{className:"cm-video__control-speed-options",children:[(0,e.jsxs)("button",{"aria-label":`${window.translate("Legacy_video_player_speed_slow")} (0.5x)`,className:"cm-video__control-speed-option js-cm-video__control-speed-option","data-playback-rate":"0.5",children:[window.translate("Legacy_video_player_speed_slow")," (0.5x)"," "]}),(0,e.jsx)("button",{"aria-label":window.translate("Legacy_video_player_speed_normal"),className:"cm-video__control-speed-option js-cm-video__control-speed-option state-active","data-playback-rate":"1",children:window.translate("Legacy_video_player_speed_normal")}),(0,e.jsxs)("button",{"aria-label":`${window.translate("Legacy_video_player_speed_fast")} (1.25x)`,className:"cm-video__control-speed-option js-cm-video__control-speed-option","data-playback-rate":"1.25",children:[window.translate("Legacy_video_player_speed_fast")," (1.25x)"," "]}),(0,e.jsxs)("button",{"aria-label":`${window.translate("Legacy_video_player_speed_faster")} (1.5x)`,className:"cm-video__control-speed-option js-cm-video__control-speed-option","data-playback-rate":"1.5",children:[window.translate("Legacy_video_player_speed_faster")," (1.5x)"," "]}),(0,e.jsxs)("button",{"aria-label":`${window.translate("Legacy_video_player_speed_ludicrous")} (2x)`,className:"cm-video__control-speed-option js-cm-video__control-speed-option","data-playback-rate":"2",children:[window.translate("Legacy_video_player_speed_ludicrous")," (2x)"," "]})]})})]})})]}),(0,e.jsxs)("div",{className:"cm-video__actions-right js-cm-video__actions-right",children:[(0,e.jsxs)("div",{className:"cm-video__control cm-video__control-volume-container",children:[(0,e.jsx)("div",{className:"cm-video__control-volume-hover-trigger-container"}),(0,e.jsx)("button",{className:"cm-video__control cm-video__control-volume js-cm-video__control-volume","aria-label":window.translate("VideoPlayer_ariaLabelMute"),"aria-pressed":l.autoplay?"true":"false",children:(0,e.jsx)(f.V,{icon:l.autoplay?"volume-off":"volume-on",size:"md"})}),(0,e.jsx)("div",{className:"cm-video__control-volume-dropdown js-cm-video__control-volume-dropdown",children:(0,e.jsx)("input",{type:"range",name:"volume","aria-label":"volume",className:"cm-video__control-volume-slider js-cm-video__control-volume-slider",min:"0",max:"1",step:"0.05",value:l.autoplay?0:.5})})]}),(0,e.jsx)("button",{"aria-label":window.translate("VideoPlayer_ariaLabelFullscreen"),className:"cm-video__control cm-video__control-fullscreen js-cm-video__control-fullscreen",children:(0,e.jsx)(f.V,{icon:"video-fullscreen",size:"md"})})]})]})]}),(0,e.jsx)("div",{className:"cm-video__controls-background-gradient js-cm-video__controls-background-gradient"})]}));var y=Object.defineProperty,n=Object.defineProperties,w=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,v=(l,h,g)=>h in l?y(l,h,{enumerable:!0,configurable:!0,writable:!0,value:g}):l[h]=g,m=(l,h)=>{for(var g in h||(h={}))x.call(h,g)&&v(l,g,h[g]);if(E)for(var g of E(h))C.call(h,g)&&v(l,g,h[g]);return l},c=(l,h)=>n(l,w(h));const o=(0,u.I)(l=>{var h,g,j;return(0,e.jsxs)("div",{className:"cm-video__item js-cm-video__item cm-video__background",children:[(0,e.jsx)(b,m({},l)),(0,e.jsx)("video",c(m(m({controlsList:"nodownload",crossOrigin:"anonymous",className:"cm-video__item-video js-cm-video__item-video",src:`${l.previewUrl.indexOf("?")>0?`${l.previewUrl}&format=mp4`:`${l.previewUrl}?format=mp4`}${l.initialTimeInSeconds&&l.initialTimeInSeconds>0?`#t=${l.initialTimeInSeconds}`:""}`,poster:(g=(h=l.teaserImage)!=null?h:l.previewUrl)!=null?g:"/img/video_transparent_poster.png"},l.autoplay?{"data-autoplay":"true"}:{}),l.loop?{loop:!0}:{}),{style:{background:`url(${(j=l.teaserImage)!=null?j:l.previewUrl}) center / contain noRepeat transparent`},"data-test-id":"asset"})),(0,e.jsx)("i",{className:"icon-spinner anim-spin cm-video__item-icon-loading js-cm-video__item-icon-loading"})]})})},73260:function(fe,F,i){"use strict";i.d(F,{L:function(){return v}});var e=i(86070),u=i(14154),f=i(28466),b=i(9128),y=Object.defineProperty,n=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,x=(m,c,o)=>c in m?y(m,c,{enumerable:!0,configurable:!0,writable:!0,value:o}):m[c]=o,C=(m,c)=>{for(var o in c||(c={}))w.call(c,o)&&x(m,o,c[o]);if(n)for(var o of n(c))E.call(c,o)&&x(m,o,c[o]);return m};const v=(0,u.I)(m=>(0,e.jsx)("div",{className:"mod mod-c-video cm-video js-cm-video","data-processing-in-progress-text":window.translate("Legacy_brandportal_video_processing_in_progress"),"data-metadata-loaded":"false","data-preview-url":m.previewUrl,"data-teaser-image":m.teaserImage,"data-hide-controls-on-leave-and-idle":m.hideControlsOnLeaveAndIdle,"data-hide-special-controls":m.hideSpecialControls,"data-space-bar-toggle-only-after-interaction":m.spaceBarToggleOnlyAfterInteraction,"data-test-id":"video",children:m.previewUrl?(0,e.jsx)(b.O,C({},m)):(0,e.jsx)(f.I,C({},m))}))},49589:function(fe,F,i){"use strict";i.d(F,{E:function(){return b}});var e=i(86070),u=i(4957),f=i(14154);const b=(0,f.I)(y=>(0,e.jsx)("div",{className:"mod mod-adobe-creative-cloud-libraries co-adobe-creative-cloud-libraries","data-id":y.id,"data-type":y.type,children:(0,e.jsx)(u.T,{})}))},37522:function(fe,F,i){"use strict";i.d(F,{l:function(){return b}});var e=i(86070),u=i(4957),f=i(14154);const b=(0,f.I)(y=>(0,e.jsx)("div",{className:"mod mod-c-asset-chooser co-assetchooser","data-brand-id":y.brandId,"data-use-brand-chooser":y.useBrandChooser,"data-disable-button-on-submit":y.disableButtonOnSubmit,"data-projects":JSON.stringify(y.projects),"data-external-data":JSON.stringify(y.externalData),"data-filters":JSON.stringify(y.filters),"data-project-types":JSON.stringify(y.projectTypes||[]),"data-multiselection-allowed":y.multiSelectionAllowed,"data-collection-selection-allowed":y.collectionSelectionAllowed,"data-textlibrary-enabled":y.textlibraryEnabled,"data-modal-id":y.modalId,children:(0,e.jsxs)("div",{className:"co-assetchooser__content js-co-assetchooser__content",children:[(0,e.jsx)("div",{className:"co-assetchooser__sidebar js-co-assetchooser__sidebar co-sidebarchooser"}),(0,e.jsx)("div",{className:"co-assetchooser__browser js-co-assetchooser__browser",children:(0,e.jsx)("div",{className:"co-assetchooser__loader js-co-assetchooser__loader",children:(0,e.jsx)(u.T,{})})})]})}))},69086:function(fe,F,i){"use strict";i.d(F,{n:function(){return f}});var e=i(86070),u=i(14154);const f=(0,u.I)(b=>(0,e.jsx)("div",{className:"co-create-project__search-item js-cm-setting-search__item","data-value":`${b.template?`${b.template.id}`:""}`,"data-date-begin":`${b.template?`${b.template.date_begin}`:""}`,"data-date-end":`${b.template?`${b.template.date_end}`:""}`,children:(0,e.jsx)("div",{className:"co-create-project__search-item-title",children:b.template?(0,e.jsxs)(e.Fragment,{children:[b.template.name," ",(0,e.jsx)("span",{className:"co-create-project__search-item-description",children:b.template.description?b.template.description:null})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(e.Fragment,{children:window.translate("Legacy_co_create_project_no_template_title")}),(0,e.jsx)("span",{className:"co-create-project__search-item-description",children:window.translate("Legacy_co_create_project_no_template_description")})]})})}))},51728:function(fe,F,i){"use strict";i.d(F,{g:function(){return b}});var e=i(86070),u=i(14154),f=i(69086);const b=(0,u.I)(y=>{var n;return(0,e.jsxs)(e.Fragment,{children:[y.allowEmpty?(0,e.jsx)(f.n,{template:null}):null,(n=y.data)==null?void 0:n.map((w,E)=>(0,e.jsx)(f.n,{template:w},E))]})})},23847:function(fe,F,i){"use strict";i.d(F,{j:function(){return Vs}});var e=i(7017),u=i(2122),f=i.n(u),b=i(49198),y=i.n(b),n=i(64409),w=i(50427),E=i(18216),x=i(88398),C=i(82109),v=i(88133),m=i(39232),c=i(86070),o=i(49290),l=i(2728),h=i(14154),g=Object.defineProperty,j=Object.defineProperties,$=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,B=(Re,et,yt)=>et in Re?g(Re,et,{enumerable:!0,configurable:!0,writable:!0,value:yt}):Re[et]=yt,R=(Re,et)=>{for(var yt in et||(et={}))T.call(et,yt)&&B(Re,yt,et[yt]);if(S)for(var yt of S(et))A.call(et,yt)&&B(Re,yt,et[yt]);return Re},k=(Re,et)=>j(Re,$(et));const V=(0,h.I)(Re=>(0,c.jsxs)("div",k(R(k(R({className:"js-co-settings__elem cm-setting__elem cm-setting-chooser cm-setting-chooser--btn"},Re.readonly?{"data-readonly":Re.readonly}:{}),{"data-id":Re.id,"data-type":"chooser"}),Re.group?{"data-group":Re.group}:{}),{children:[Re.label?(0,c.jsx)("label",{className:"cm-setting__label",children:Re.label}):null,(0,c.jsxs)("div",{className:"cm-setting__preview cm-setting-chooser__types",children:[(0,c.jsx)("a",{href:"javascript:;",className:`cm-setting-chooser__type js-cm-setting-chooser__type ${Re.value==="primary"?" state-selected":""}`,"data-design":"primary",children:(0,c.jsx)("span",{className:"cm-setting-chooser__preview cm-setting-chooser__preview--btn cm-setting-button__button--button_primary btn-primary",children:window.translate("Legacy_styleguide_settings_design_button_primary")})}),(0,c.jsx)("a",{href:"javascript:;",className:`cm-setting-chooser__type js-cm-setting-chooser__type ${Re.value==="secondary"?" state-selected":""}`,"data-design":"secondary",children:(0,c.jsx)("span",{className:"cm-setting-chooser__preview cm-setting-chooser__preview--btn cm-setting-button__button--button_secondary btn-secondary",children:window.translate("Legacy_styleguide_settings_design_button_secondary")})}),(0,c.jsx)("a",{href:"javascript:;",className:`cm-setting-chooser__type js-cm-setting-chooser__type ${Re.value==="tertiary"?" state-selected":""}`,"data-design":"tertiary",children:(0,c.jsx)("span",{className:"cm-setting-chooser__preview cm-setting-chooser__preview--btn cm-setting-button__button--button_tertiary btn-tertiary",children:window.translate("Legacy_styleguide_settings_design_button_tertiary")})})]})]})));var K=i(93791),z=i(78149),q=i(9862),re=Object.defineProperty,ve=Object.defineProperties,Oe=Object.getOwnPropertyDescriptors,De=Object.getOwnPropertySymbols,Ie=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable,he=(Re,et,yt)=>et in Re?re(Re,et,{enumerable:!0,configurable:!0,writable:!0,value:yt}):Re[et]=yt,se=(Re,et)=>{for(var yt in et||(et={}))Ie.call(et,yt)&&he(Re,yt,et[yt]);if(De)for(var yt of De(et))Te.call(et,yt)&&he(Re,yt,et[yt]);return Re},de=(Re,et)=>ve(Re,Oe(et));const je=(0,h.I)(Re=>(0,c.jsxs)("div",de(se(se(se(se({className:"js-co-settings__elem","data-id":Re.id,"data-portal-id":Re.portalId,"data-type":"link"},Re.group?{"data-group":Re.group}:{}),Re.readonly?{"data-readonly":Re.readonly}:{}),Re.autofocus?{"data-autofocus":Re.autofocus}:{}),Re.value?{"data-tooltip-link-label":Re.value.tooltipLinkLabel}:{}),{children:[(0,c.jsx)("div",{className:"cm-setting__elem",children:(0,c.jsxs)("div",{className:"cm-setting__preview cm-setting__bar js-cm-setting__bar",children:[(0,c.jsx)("label",{htmlFor:Re.id,className:"cm-setting__label",children:Re.label}),(0,c.jsx)("input",se(se(se(de(se({spellCheck:"false",tabIndex:-1,autoComplete:"off",className:"cm-setting__input js-cm-setting__input"},Re.placeholder?{placeholder:Re.placeholder}:{}),{id:Re.id,name:Re.id}),Re.required?{required:!0}:{}),Re.value&&Re.value!=="javascript:;"?{value:Re.value.url||""}:{}),Re.msg?{"data-msg":Re.msg}:{}))]})}),Re.showInternalLinkChooser?(0,c.jsx)("div",{className:"cm-setting__link-addons cm-setting__elem",children:(0,c.jsxs)("div",{className:"cm-setting__link-addons-item js-cm-setting__link-addons-item-linkchooser",children:[(0,c.jsx)(z.V,{icon:K.l.ICON_GUIDELINES,classes:"cm-setting__link-addons-item-icon",size:K.l.SIZE_MEDIUM}),(0,c.jsx)("span",{className:"cm-setting__link-addons-item-text",children:"Internal link (within this guideline)"}),(0,c.jsx)(z.V,{icon:K.l.ICON_CARET_RIGHT,classes:"cm-setting__link-addons-item-iconarrow",size:K.l.SIZE_MEDIUM})]})}):null,(0,q.R)("LINK_TEMPLATE_CHOOSER")?(0,c.jsx)("div",{className:"cm-setting__link-addons cm-setting__elem",children:(0,c.jsxs)("div",{className:"cm-setting__link-addons-item js-cm-setting__link-addons-item-templatechooser",children:[(0,c.jsx)(z.V,{icon:K.l.ICON_TEMPLATES,classes:"cm-setting__link-addons-item-icon",size:K.l.SIZE_MEDIUM}),(0,c.jsx)("span",{className:"cm-setting__link-addons-item-text",children:"Create a publication from template"}),(0,c.jsx)(z.V,{icon:K.l.ICON_CARET_RIGHT,classes:"cm-setting__link-addons-item-iconarrow",size:K.l.SIZE_MEDIUM})]})}):null]})));var _e=i(62878),Ce=i(90307);const ee=(0,h.I)(Re=>(0,c.jsxs)("form",{className:"co-editor__settings js-c-editor-button__create-form",children:[(0,c.jsx)(_e.A,{id:"label",label:window.translate("Legacy_editor_button_label"),value:Re.label,required:!0,placeholder:"Button Label"}),(0,c.jsx)(V,{id:"design",label:window.translate("Legacy_button_style"),value:Re.design||"primary"}),(0,c.jsx)(je,{id:"link",label:window.translate("Legacy_editor_button_link_label"),value:Re,required:!0,autofocus:!0,placeholder:window.translate("Legacy_editor_link_example"),showInternalLinkChooser:Re.showInternalLinkChooser}),(0,c.jsx)(Ce.f,{modifier:"tooltip",type:"checkbox",id:"newWindow",label:window.translate("Legacy_styleguide_block_text_settings_target_blank"),checked:Re.newWindow}),(0,c.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer cm-setting__actions state-visible js-cm-setting__actions",children:[(0,c.jsx)(o.t,{classes:"ca-button__segment"}),(0,c.jsx)(l.b,{classes:"ca-button__segment"})]})]}));var H=i(64182);const le=(0,h.I)(Re=>(0,c.jsxs)("form",{className:"co-editor__settings co-settings__fieldset co-settings__fieldset--nomargin co-settings__fieldset--no-border-bottom",children:[(0,c.jsx)(H.g,{id:"text",picker:!0,type:"simple",palette:Re.project,label:window.translate("Legacy_editor_color_text_color"),value:Re.text||"#000000"}),(0,c.jsx)(H.g,{id:"highlight",picker:!0,type:"simple",palette:Re.project,label:window.translate("Legacy_editor_color_highlight_color"),value:Re.highlight||"rgba(255,255,255,0)"}),(0,c.jsxs)("div",{className:"cm-btn-bar cm-setting__actions cm-setting__actions--form state-visible js-cm-setting__actions",children:[(0,c.jsx)(l.b,{}),(0,c.jsx)(o.t,{}),(0,c.jsx)("button",{className:"cm-btn cm-btn--danger cm-btn--right js-co-editor__remove",children:window.translate("Legacy_btn_remove")})]})]})),ke=(0,h.I)(Re=>(0,c.jsxs)("form",{className:"co-editor__settings js-c-editor-link__create-form",children:[(0,c.jsx)(je,{id:"link",label:window.translate("Legacy_editor_link_label"),value:Re,required:!0,autofocus:!0,placeholder:window.translate("Legacy_editor_link_example"),portalId:Re.portalId,showInternalLinkChooser:Re.showInternalLinkChooser}),(0,c.jsx)(Ce.f,{modifier:"tooltip",type:"checkbox",id:"newWindow",label:window.translate("Legacy_styleguide_block_text_settings_target_blank"),checked:Re.newWindow}),(0,c.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer js-cm-setting__actions state-visible",children:[(0,c.jsx)(o.t,{classes:"ca-button__segment"}),(0,c.jsx)(l.b,{classes:"ca-button__segment"})]})]})),Ue=(0,h.I)(Re=>(0,c.jsxs)("div",{className:`co-editor__toolbar ${Re.style?`co-editor__toolbar--${Re.style}`:""} js-co-editor__toolbar`,children:[(0,c.jsx)("div",{className:"co-editor__toolbar-actions js-co-editor__toolbar-actions"}),(0,c.jsx)("div",{className:"co-editor__toolbar-link-actions js-co-editor__toolbar-link-actions"}),(0,c.jsx)("span",{className:"co-editor__toolbar-arrow js-co-editor__toolbar-arrow"})]}));var Ge=i(46223),Me=i(45924),Ve=Object.defineProperty,Ke=Object.defineProperties,at=Object.getOwnPropertyDescriptors,Tt=Object.getOwnPropertySymbols,Yt=Object.prototype.hasOwnProperty,tt=Object.prototype.propertyIsEnumerable,qe=(Re,et,yt)=>et in Re?Ve(Re,et,{enumerable:!0,configurable:!0,writable:!0,value:yt}):Re[et]=yt,ot=(Re,et)=>{for(var yt in et||(et={}))Yt.call(et,yt)&&qe(Re,yt,et[yt]);if(Tt)for(var yt of Tt(et))tt.call(et,yt)&&qe(Re,yt,et[yt]);return Re},pt=(Re,et)=>Ke(Re,at(et));const mt=(0,h.I)(Re=>{var et;return(0,c.jsxs)(c.Fragment,{children:[Re.options.toolbar.color?(0,c.jsx)("button",{className:(0,Ge.h)(["co-editor__color js-co-editor__color",Me.OA]),style:ot({},Re.format.color?{borderBottomColor:`${Re.format.color}`}:{}),"aria-label":"Change text color",children:(0,c.jsx)("div",{className:"co-editor__color-background",style:ot({},Re.format.background?{background:`${Re.format.background}`}:{}),children:(0,c.jsx)("div",{className:"co-editor__color-char",style:ot({},Re.format.color?{color:`${Re.format.color}`}:{}),children:"A"})})}):null,Re.options.toolbar.styles?(0,c.jsx)("div",{className:"co-editor__styles-wrap",children:(0,c.jsxs)("select",{className:"js-co-editor__styles co-editor__styles","data-template":"c-dropdown-style",children:[Re.options.toolbar.styles.includes("body")?(0,c.jsx)("option",{value:"clean","data-previewclass":Vs.PREVIEW_CLASS_BODY,children:window.translate("Editor_toolbarStylesBodyText")}):null,Re.options.toolbar.styles.includes("h1")?(0,c.jsx)("option",pt(ot({},Re.format.header===1||Re.format.styledListItem===Vs.SELECTOR_HEADLINE_1?{selected:!0}:{}),{"data-previewclass":Vs.PREVIEW_CLASS_HEADING_1,value:"h1",children:"Headline 1"})):null,Re.options.toolbar.styles.includes("h2")?(0,c.jsx)("option",pt(ot({},Re.format.header===2||Re.format.styledListItem===Vs.SELECTOR_HEADLINE_2?{selected:!0}:{}),{"data-previewclass":Vs.PREVIEW_CLASS_HEADING_2,value:"h2",children:"Headline 2"})):null,Re.options.toolbar.styles.includes("h3")?(0,c.jsx)("option",pt(ot({},Re.format.header===3||Re.format.styledListItem===Vs.SELECTOR_HEADLINE_3?{selected:!0}:{}),{"data-previewclass":Vs.PREVIEW_CLASS_HEADING_3,value:"h3",children:"Headline 3"})):null,Re.options.toolbar.styles.includes("h4")?(0,c.jsx)("option",pt(ot({},Re.format.header===4||Re.format.styledListItem===Vs.SELECTOR_HEADLINE_4?{selected:!0}:{}),{"data-previewclass":Vs.PREVIEW_CLASS_HEADING_4,value:"h4",children:"Headline 4"})):null,Re.options.toolbar.styles.includes("h5")?(0,c.jsx)("option",pt(ot({},Re.format.header===5||Re.format.styledListItem===Vs.SELECTOR_HEADLINE_5?{selected:!0}:{}),{"data-previewclass":Vs.PREVIEW_CLASS_HEADING_5,value:"h5",children:"Headline 5"})):null,Re.options.toolbar.styles.includes("h6")?(0,c.jsx)("option",pt(ot({},Re.format.header===6||Re.format.styledListItem===Vs.SELECTOR_HEADLINE_6?{selected:!0}:{}),{"data-previewclass":Vs.PREVIEW_CLASS_HEADING_6,value:"h6",children:"Headline 6"})):null,Re.options.toolbar.styles.includes("quote")?(0,c.jsx)("option",pt(ot({},Re.format.blockquote||Re.format.styledListItem===Vs.SELECTOR_QUOTE?{selected:!0}:{}),{"data-previewclass":Vs.PREVIEW_CLASS_QUOTE,value:"blockquote",children:"Quote"})):null,Re.options.toolbar.styles.includes("custom1")?(0,c.jsx)("option",pt(ot({},Re.format.styles==="custom1"||Re.format.styledListItem==="custom1"?{selected:!0}:{}),{"data-previewclass":Vs.PREVIEW_CLASS_CUSTOM_1,value:"custom1",children:"Custom 1"})):null,Re.options.toolbar.styles.includes("custom2")?(0,c.jsx)("option",pt(ot({},Re.format.styles==="custom2"||Re.format.styledListItem==="custom2"?{selected:!0}:{}),{"data-previewclass":Vs.PREVIEW_CLASS_CUSTOM_2,value:"custom2",children:"Custom 2"})):null,Re.options.toolbar.styles.includes("custom3")?(0,c.jsx)("option",pt(ot({},Re.format.styles==="custom3"||Re.format.styledListItem==="custom3"?{selected:!0}:{}),{"data-previewclass":Vs.PREVIEW_CLASS_CUSTOM_3,value:"custom3",children:"Custom 3"})):null]})}):null,Re.options.toolbar.sizes?(0,c.jsx)("div",{className:"co-editor__sizes-wrap",children:(0,c.jsx)("select",{className:"js-co-editor__sizes co-editor__sizes","data-template":"c-dropdown-size",children:(et=Re.options.toolbar.sizes)==null?void 0:et.map((yt,Ns)=>(0,c.jsx)("option",pt(ot({},Re.format.size==yt?{selected:!0}:{}),{value:yt,children:yt}),Ns))})}):null,Re.options.toolbar.h3?(0,c.jsxs)("button",{className:(0,Ge.h)(["co-editor__toolbar-btn js-co-editor__h3",Re.format.header===3?"state-active":"",Me.OA]),title:window.translate("Legacy_editor_action_h3"),"aria-label":window.translate("Legacy_editor_action_h3"),tabIndex:Re.format.header===3?-1:0,children:[(0,c.jsx)(z.V,{icon:"h",size:K.l.SIZE_MEDIUM}),(0,c.jsx)("span",{className:"co-editor__icon-addon",children:"3"})]}):null,Re.options.toolbar.h4?(0,c.jsxs)("button",{className:(0,Ge.h)(["co-editor__toolbar-btn js-co-editor__h4",Re.format.header===4?"state-active":"",Me.OA]),title:window.translate("Legacy_editor_action_h4"),"aria-label":window.translate("Legacy_editor_action_h4"),tabIndex:Re.format.header===4?-1:0,children:[(0,c.jsx)(z.V,{icon:"h",size:K.l.SIZE_MEDIUM}),(0,c.jsx)("span",{className:"co-editor__icon-addon",children:"4"})]}):null,Re.options.toolbar.bold?(0,c.jsx)("button",{className:(0,Ge.h)(["co-editor__toolbar-btn js-co-editor__bold",Re.format.bold?"state-active":"",Me.OA]),title:window.translate("Legacy_editor_action_bold"),"aria-label":window.translate("Legacy_editor_action_bold"),tabIndex:Re.format.bold?-1:0,children:(0,c.jsx)(z.V,{icon:"bold",size:K.l.SIZE_MEDIUM})}):null,Re.options.toolbar.italic?(0,c.jsx)("button",{className:(0,Ge.h)(["co-editor__toolbar-btn js-co-editor__italic",Re.format.italic?"state-active":"",Me.OA]),title:window.translate("Legacy_editor_action_italic"),"aria-label":window.translate("Legacy_editor_action_italic"),tabIndex:Re.format.italic?-1:0,children:(0,c.jsx)(z.V,{icon:"italic",size:K.l.SIZE_MEDIUM})}):null,Re.options.toolbar.underline?(0,c.jsx)("button",{className:(0,Ge.h)(["co-editor__toolbar-btn js-co-editor__underline",Re.format.underline?"state-active":"",Me.OA]),title:window.translate("Legacy_editor_action_underline"),"aria-label":window.translate("Legacy_editor_action_underline"),tabIndex:Re.format.underline?-1:0,children:(0,c.jsx)(z.V,{icon:"underline",size:K.l.SIZE_MEDIUM})}):null,Re.options.toolbar.strike?(0,c.jsx)("button",{className:(0,Ge.h)(["co-editor__toolbar-btn js-co-editor__strike",Re.format.strike?"state-active":"",Me.OA]),title:window.translate("Legacy_editor_action_strike"),"aria-label":window.translate("Legacy_editor_action_strike"),tabIndex:Re.format.strike?-1:0,children:(0,c.jsx)(z.V,{icon:"strikethrough",size:K.l.SIZE_MEDIUM})}):null,Re.options.toolbar.code?(0,c.jsx)("button",{className:(0,Ge.h)(["co-editor__toolbar-btn js-co-editor__code",Re.format.code?"state-active":"",Me.OA]),title:window.translate("Legacy_editor_action_code"),"aria-label":window.translate("Legacy_editor_action_code"),tabIndex:Re.format.code?-1:0,children:(0,c.jsx)(z.V,{icon:"snippet",size:K.l.SIZE_MEDIUM})}):null,Re.options.toolbar.script?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{className:(0,Ge.h)(["co-editor__toolbar-btn js-co-editor__sub",Re.format.script==="sub"?"state-active":"",Me.OA]),title:window.translate("Legacy_editor_action_subscript"),"aria-label":window.translate("Legacy_editor_action_subscript"),tabIndex:Re.format.script==="sub"?-1:0,children:(0,c.jsx)(z.V,{icon:"subscript",size:K.l.SIZE_MEDIUM})}),(0,c.jsx)("button",{className:(0,Ge.h)(["co-editor__toolbar-btn js-co-editor__super",Re.format.script==="super"?"state-active":"",Me.OA]),title:window.translate("Legacy_editor_action_subscript"),"aria-label":window.translate("Legacy_editor_action_subscript"),tabIndex:Re.format.script==="super"?-1:0,children:(0,c.jsx)(z.V,{icon:"superscript",size:K.l.SIZE_MEDIUM})})]}):null,Re.options.toolbar.ordered_list?(0,c.jsx)("button",{className:(0,Ge.h)(["co-editor__toolbar-btn js-co-editor__ordered-list",Re.format.list==="ordered"?"state-active":"",Me.OA]),title:window.translate("Legacy_editor_action_ordered_list"),"aria-label":window.translate("Legacy_editor_action_ordered_list"),tabIndex:Re.format.list==="ordered"?-1:0,children:(0,c.jsx)(z.V,{icon:"list-numbers",size:K.l.SIZE_MEDIUM})}):null,Re.options.toolbar.bullet_list?(0,c.jsx)("button",{className:(0,Ge.h)(["co-editor__toolbar-btn js-co-editor__bullet-list",Re.format.list==="bullet"?"state-active":"",Me.OA]),title:window.translate("Legacy_editor_action_bullet_list"),"aria-label":window.translate("Legacy_editor_action_bullet_list"),tabIndex:Re.format.list==="bullet"?-1:0,children:(0,c.jsx)(z.V,{icon:"list-bullets",size:K.l.SIZE_MEDIUM})}):null,Re.options.toolbar.blockquote?(0,c.jsx)("button",{className:(0,Ge.h)(["co-editor__toolbar-btn js-co-editor__blockquote",Re.format.blockquote?"state-active":"",Me.OA]),title:window.translate("Legacy_editor_action_quote"),"aria-label":window.translate("Legacy_editor_action_quote"),tabIndex:Re.format.blockquote?-1:0,children:(0,c.jsx)(z.V,{icon:"quote",size:K.l.SIZE_MEDIUM})}):null,Re.options.toolbar.indent?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{className:(0,Ge.h)(["co-editor__toolbar-btn js-co-editor__indent",Re.format.indent==="-1"?"state-active":"",Me.OA]),title:window.translate("Legacy_editor_action_indent"),"aria-label":window.translate("Legacy_editor_action_indent"),tabIndex:Re.format.indent==="-1"?-1:0,children:(0,c.jsx)(z.V,{icon:"indent",size:K.l.SIZE_MEDIUM})}),(0,c.jsx)("button",{className:(0,Ge.h)(["co-editor__toolbar-btn js-co-editor__outdent",Re.format.indent==="+1"?"state-active":"",Me.OA]),title:window.translate("Legacy_editor_action_outdent"),"aria-label":window.translate("Legacy_editor_action_outdent"),tabIndex:Re.format.indent==="+1"?-1:0,children:(0,c.jsx)(z.V,{icon:"dedent",size:K.l.SIZE_MEDIUM})})]}):null,Re.options.toolbar.align?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{className:(0,Ge.h)(["co-editor__toolbar-btn js-co-editor__align-left",Re.format.align==="left"?"state-active":"",Me.OA]),title:window.translate("Legacy_editor_action_align_left"),"aria-label":window.translate("Legacy_editor_action_align_left"),tabIndex:Re.format.align==="left"?-1:0,children:(0,c.jsx)(z.V,{icon:"text-align-left",size:K.l.SIZE_MEDIUM})}),(0,c.jsx)("button",{className:(0,Ge.h)(["co-editor__toolbar-btn js-co-editor__align-center",Re.format.align==="center"?"state-active":"",Me.OA]),title:window.translate("Legacy_editor_action_align_center"),"aria-label":window.translate("Legacy_editor_action_align_center"),tabIndex:Re.format.align==="center"?-1:0,children:(0,c.jsx)(z.V,{icon:"text-align-center",size:K.l.SIZE_MEDIUM})}),(0,c.jsx)("button",{className:(0,Ge.h)(["co-editor__toolbar-btn js-co-editor__align-right",Re.format.align==="right"?"state-active":"",Me.OA]),title:window.translate("Legacy_editor_action_align_right"),"aria-label":window.translate("Legacy_editor_action_align_right"),tabIndex:Re.format.align==="right"?-1:0,children:(0,c.jsx)(z.V,{icon:"text-align-right",size:K.l.SIZE_MEDIUM})})]}):null,Re.options.toolbar.link?(0,c.jsx)("button",{className:(0,Ge.h)(["co-editor__toolbar-btn js-co-editor__link",Re.format.link&&!Re.format.link.design?"state-active":"",Me.OA]),title:window.translate("Legacy_editor_action_link"),"aria-label":window.translate("Legacy_editor_action_link"),tabIndex:Re.format.link&&!Re.format.link.design?-1:0,children:(0,c.jsx)(z.V,{icon:"link",size:K.l.SIZE_MEDIUM})}):null,Re.options.toolbar.button?(0,c.jsx)("button",{className:(0,Ge.h)(["co-editor__toolbar-btn js-co-editor__button",Me.OA]),title:window.translate("Legacy_editor_action_button"),"aria-label":window.translate("Legacy_editor_action_button"),children:(0,c.jsx)(z.V,{icon:"button",size:K.l.SIZE_MEDIUM})}):null,Re.options.toolbar.columnbreak?(0,c.jsx)("button",{className:(0,Ge.h)(["co-editor__toolbar-btn js-co-editor__breakafter-column",Re.format.breakafter==="column"?"state-active":"",Me.OA]),title:window.translate("Legacy_editor_action_breakafter_column"),"aria-label":window.translate("Legacy_editor_action_breakafter_column"),tabIndex:Re.format.breakafter==="column"?-1:0,children:(0,c.jsx)(z.V,{icon:"column-break",size:K.l.SIZE_MEDIUM})}):null,Re.options.toolbar.clean?(0,c.jsx)("button",{className:(0,Ge.h)(["co-editor__toolbar-btn js-co-editor__clean",Me.OA]),title:"Reset formatting","aria-label":"Reset formatting",children:(0,c.jsx)(z.V,{icon:"eraser",size:K.l.SIZE_MEDIUM})}):null]})});var Xt=Object.defineProperty,rs=Object.getOwnPropertySymbols,Qt=Object.prototype.hasOwnProperty,ls=Object.prototype.propertyIsEnumerable,Ts=(Re,et,yt)=>et in Re?Xt(Re,et,{enumerable:!0,configurable:!0,writable:!0,value:yt}):Re[et]=yt,As=(Re,et)=>{for(var yt in et||(et={}))Qt.call(et,yt)&&Ts(Re,yt,et[yt]);if(rs)for(var yt of rs(et))ls.call(et,yt)&&Ts(Re,yt,et[yt]);return Re};const Qs=(0,h.I)(Re=>(0,c.jsx)("div",As({className:"mod mod-c-link-actions cm-link-actions"},Re.tpl.renderDataAttributesAsObject(Re)))),bs=(0,h.I)(Re=>(0,c.jsx)("div",{className:"co-editor__settings co-editor__link-actions js-co-editor__link-actions",children:(0,c.jsx)(Qs,{url:Re.url,label:Re.label})})),qs=(0,h.I)(()=>(0,c.jsx)("div",{className:"co-editor__toolbar-settings js-co-editor__toolbar-settings"}));var ks=i(5181),ei=Object.defineProperty,an=Object.defineProperties,Na=Object.getOwnPropertyDescriptors,ys=Object.getOwnPropertySymbols,$t=Object.prototype.hasOwnProperty,fn=Object.prototype.propertyIsEnumerable,ka=(Re,et,yt)=>et in Re?ei(Re,et,{enumerable:!0,configurable:!0,writable:!0,value:yt}):Re[et]=yt,cn=(Re,et)=>{for(var yt in et||(et={}))$t.call(et,yt)&&ka(Re,yt,et[yt]);if(ys)for(var yt of ys(et))fn.call(et,yt)&&ka(Re,yt,et[yt]);return Re},di=(Re,et)=>an(Re,Na(et));const La=class fo extends E.j{static get SELECTOR_BODY(){return"p"}static get SELECTOR_HEADLINE_1(){return"h1"}static get SELECTOR_HEADLINE_2(){return"h2"}static get SELECTOR_HEADLINE_3(){return"h3"}static get SELECTOR_HEADLINE_4(){return"h4"}static get SELECTOR_HEADLINE_5(){return"h5"}static get SELECTOR_HEADLINE_6(){return"h6"}static get SELECTOR_CUSTOM_1(){return".custom1"}static get SELECTOR_CUSTOM_2(){return".custom2"}static get SELECTOR_CUSTOM_3(){return".custom3"}static get SELECTOR_LINK(){return"a"}static get SELECTOR_QUOTE(){return"blockquote"}static get SELECTOR_BUTTON_PRIMARY(){return".btn-primary"}static get SELECTOR_BUTTON_SECONDARY(){return".btn-secondary"}static get SELECTOR_BUTTON_TERTIARY(){return".btn-tertiary"}static get SELECTOR_BUTTON_PRIMARY_HOVER(){return`${this.SELECTOR_BUTTON_PRIMARY}:hover`}static get SELECTOR_BUTTON_SECONDARY_HOVER(){return`${this.SELECTOR_BUTTON_SECONDARY}:hover`}static get SELECTOR_BUTTON_TERTIARY_HOVER(){return`${this.SELECTOR_BUTTON_TERTIARY}:hover`}static get SELECTORS(){return[fo.SELECTOR_BODY,fo.SELECTOR_HEADLINE_1,fo.SELECTOR_HEADLINE_2,fo.SELECTOR_HEADLINE_3,fo.SELECTOR_HEADLINE_4,fo.SELECTOR_CUSTOM_1,fo.SELECTOR_CUSTOM_2,fo.SELECTOR_CUSTOM_3,fo.SELECTOR_LINK,fo.SELECTOR_QUOTE,fo.SELECTOR_BUTTON_PRIMARY,fo.SELECTOR_BUTTON_SECONDARY,fo.SELECTOR_BUTTON_TERTIARY,fo.SELECTOR_BUTTON_PRIMARY_HOVER,fo.SELECTOR_BUTTON_SECONDARY_HOVER,fo.SELECTOR_BUTTON_TERTIARY_HOVER]}static get PREVIEW_CLASS_BODY(){return"cm-setting-typostyle__preview--body"}static get PREVIEW_CLASS_HEADING_1(){return"cm-setting-typostyle__preview--heading1"}static get PREVIEW_CLASS_HEADING_2(){return"cm-setting-typostyle__preview--heading2"}static get PREVIEW_CLASS_HEADING_3(){return"cm-setting-typostyle__preview--heading3"}static get PREVIEW_CLASS_HEADING_4(){return"cm-setting-typostyle__preview--heading4"}static get PREVIEW_CLASS_HEADING_5(){return"cm-setting-typostyle__preview--heading5"}static get PREVIEW_CLASS_HEADING_6(){return"cm-setting-typostyle__preview--heading6"}static get PREVIEW_CLASS_QUOTE(){return"cm-setting-typostyle__preview--quote"}static get PREVIEW_CLASS_CUSTOM_1(){return"cm-setting-typostyle__preview--custom1"}static get PREVIEW_CLASS_CUSTOM_2(){return"cm-setting-typostyle__preview--custom2"}static get PREVIEW_CLASS_CUSTOM_3(){return"cm-setting-typostyle__preview--custom3"}static get PREVIEW_CLASS_BUTTON_PRIMARY(){return"cm-setting-button__button--button_primary"}static get PREVIEW_CLASS_BUTTON_SECONDARY(){return"cm-setting-button__button--button_secondary"}static get PREVIEW_CLASS_BUTTON_TERTIARY(){return"cm-setting-button__button--button_tertiary"}static get SETS(){return{empty:{},title:{bold:!0,italic:!0,underline:!0,strike:!0,script:!0,clean:!0},post:{},teaser:{styles:["h1","h2","h3","h4","body","quote","custom1","custom2","custom3"],sizes:["","14px","16px","18px","22px","24px","32px","36px","40px","48px","54px","60px","72px"],bold:!0,italic:!0,ordered_list:!0,bullet_list:!0,link:!0,button:!0,color:!0,align:!0,clean:!0},block:{styles:["h1","h2","h3","h4","body","quote","custom1","custom2","custom3"],bold:!0,italic:!0,code:!0,ordered_list:!0,bullet_list:!0,link:!0,clean:!0,button:!0},caption:{styles:["h1","h2","h3","h4","body","quote","custom1","custom2","custom3"],bold:!0,italic:!0,bullet_list:!0,link:!0,align:!0,clean:!0,button:!0},full:{h3:!0,h4:!0,bold:!0,italic:!0,underline:!0,strike:!0,code:!0,script:!0,ordered_list:!0,bullet_list:!0,blockquote:!0,indent:!0,link:!0,button:!0,color:!0,align:!0,columnbreak:!0,clean:!0,styles:["h1","h2","h3","h4","body","quote","custom1","custom2","custom3"],sizes:["","14px","16px","18px","22px","24px","32px","36px","40px","48px","54px","60px","72px"]},blockText:{color:!0,styles:["h1","h2","h3","h4","body","quote","custom1","custom2","custom3"],bold:!0,italic:!0,link:!0,clean:!0,align:!0,button:!0}}}static get NEWLINE(){return`
`}static get ZERO_WIDTH_SPACER(){return"\uFEFF"}constructor(et,yt,Ns){super(et,yt,`c-editor-${fo.count++}`),this.sandbox.subscribe("events",this),this.enabled=!1,this.currentBounds=null,this.hasOpenSettings=!1,this.changed=!1,this.empty=!1,this.options=Ns,this.currentLinkBlot=null,this.currentButtonBlot=null,this.allSelected=!1,this.listAttributes=!1,this.sandbox.subscribe("editor",this),this.options.theme?et.addClass(`co-editor co-editor--${this.options.theme}`):et.addClass("co-editor co-editor--default"),et.on("click.editor",hn=>{this.enabled&&(hn.stopPropagation(),this.fire("hideToolbar",["editor"]))})}stop(){this.destroy()}setup(){this.options=ks.extend(!0,{placeholder:this.options.placeholder,saveDelay:2e3,plainPaste:!0,spellCheck:!0,style:"float",project:0,portalId:0,toolbar:{h3:!1,h4:!1,bold:!1,italic:!1,underline:!1,strike:!1,code:!1,script:!1,ordered_list:!1,bullet_list:!1,blockquote:!1,indent:!1,link:!1,color:!1,align:!1,clean:!1,button:!1,columnbreak:!1}},this.options),this.options.set&&fo.SETS[this.options.set]&&(this.options.toolbar=ks.extend(!0,{},this.options.toolbar,fo.SETS[this.options.set]));let et=!1;for(const At in this.options.toolbar)Object.prototype.hasOwnProperty.call(this.options.toolbar,At)&&this.options.toolbar[At]&&(et=!0);this.$toolbar=ks(et?(0,w.EY)(Ue,this.options):""),this.$toolbarActions=this.$toolbar.find(".js-co-editor__toolbar-actions"),this.$toolbarArrow=this.$toolbar.find(".js-co-editor__toolbar-arrow"),this.$toolbarLinkActions=this.$toolbar.find(".js-co-editor__toolbar-link-actions"),this.options.style==="float"?ks(document.body).append(this.$toolbar):this.options.style==="inline"&&this.$ctx.before(this.$toolbar);const yt=[];this.options.matchBr!==!1&&yt.push(["BR",()=>{const At=new Ns;return At.insert({softbreak:""}),At}]),this.$ctx.find("ul, ol").prevAll("br").remove();const Ns=C._.import("delta"),hn=this.$ctx.get(0);if(!hn)throw new Error("Element not found.");if(this.quill=new C._(hn,{placeholder:this.options.placeholder,formats:this.options.quillDisableFormatting?["mention","emoji"]:void 0,modules:{clipboard:{matchVisual:!1,matchers:yt},keyboard:{bindings:this.options.bindings||{newline:{key:13,shiftKey:!0,handler:At=>{const Us=this.quill.getLeaf(At.index)[0],as=this.quill.getLeaf(At.index+1)[0];this.quill.insertEmbed(At.index,"softbreak",!0,"user"),(as===null||Us.parent!==as.parent)&&this.quill.insertEmbed(At.index,"softbreak",!0,"user"),this.quill.setSelection(At.index+1,"silent")}},enter:{key:13,handler:(At,Us)=>((Us.prefix.length===0||Us.suffix.length===0)&&setTimeout(()=>{this.quill.setSelection(At.index+1,"silent")}),!0)},tab:{key:9,shiftKey:!1,handler:()=>(typeof this.keydown=="function"&&this.keydown({which:9,key:"tab"}),!0)},backspace:{key:8,handler:(At,Us)=>(Us.prefix===fo.ZERO_WIDTH_SPACER?(this.quill.deleteText(At.index-1,1),setTimeout(()=>{this.quill.setSelection(At.index-2,"silent")})):Us.prefix.length===0&&At.index>0&&setTimeout(()=>{const as=this.quill.getContents(At.index-3,1);as.ops&&as.ops.length>0&&as.ops[0].insert===fo.NEWLINE&&this.quill.deleteText(At.index-2,1),typeof this.keydown=="function"&&this.keydown({which:8,key:"backspace"})}),!0)}}}}}),this.options.removeExtraneous!==!1){const At=this.quill.getLength();this.quill.getText(At-2,2)===`

`&&this.quill.deleteText(At-2,2)}this.options.spellCheck||this.quill.root.setAttribute("spellcheck",!1),this.options.plainPaste&&this.quill.clipboard.addMatcher(Node.ELEMENT_NODE,(At,Us)=>(Us.ops=Us.ops.map(as=>{var Qn,wa;return{insert:(wa=(Qn=as.insert)==null?void 0:Qn.button)!=null&&wa.label?as.insert.button.label:as.insert}}),Us)),this.checkEmptyState(),this.quill.on("text-change",(At,Us,as)=>{this.changed=!0,as==="user"&&!this.hasOpenSettings&&this.enabled&&this.hideToolbar(),this.isEmpty()}),this.quill.on("text-change",ks.debounce(200,()=>{this.applyPlaceholderHeight()})),this.quill.on("text-change",ks.debounce(this.options.saveDelay,()=>{this.save()})),this.quill.on("selection-change",(At,Us,as)=>{if(as==="user"&&(this.allSelected=!1),this.enabled){if(At&&At.length>0){this.$toolbarActions.show(),this.$toolbarLinkActions.hide(),this.updateToolbar(),this.showToolbar(),this.reposition(At),typeof this.selectionChanged=="function"&&as==="user"&&this.selectionChanged(At),At.length+1===this.quill.getLength()&&(this.allSelected=!0),typeof this.quillFocused=="function"&&this.quillFocused();return}if(At){this.hasOpenSettings=!1,this.hideToolbar(),typeof this.quillFocused=="function"&&this.quillFocused();return}this.save(),typeof this.leave=="function"&&this.leave(),this.hasOpenSettings||this.hideToolbar()}}),this.quill.root.addEventListener("blur",()=>{!this.isToolbarShown()&&this.options.style==="float"&&this.quill.setSelection(null)}),this.$toolbar.on("click",At=>{At.stopPropagation()}),ks(document.body).on("click.editor",()=>{if(this.enabled&&!ks(document.body).hasClass("state-cm-modal-visible")){const At=this.checkOpenColorPickers(),Us=this.quill.getSelection();!At&&!Us&&this.hideToolbar()}}),this.$toolbar.on("click",".js-co-editor__h1",()=>{this.enabled&&(this.quill.getFormat().header!==1?(this.quill.format("header",1),this.changed=!0):this.quill.format("header",!1),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__h2",()=>{this.enabled&&(this.quill.getFormat().header!==2?(this.quill.format("header",2),this.changed=!0):this.quill.format("header",!1),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__h3",()=>{this.enabled&&(this.quill.getFormat().header!==3?(this.quill.format("header",3),this.changed=!0):this.quill.format("header",!1),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__h4",()=>{this.enabled&&(this.quill.getFormat().header!==4?(this.quill.format("header",4),this.changed=!0):this.quill.format("header",!1),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__bold",()=>{this.enabled&&(this.quill.getFormat().bold?this.quill.format("bold",!1):this.quill.format("bold",!0),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__italic",()=>{this.enabled&&(this.quill.getFormat().italic?this.quill.format("italic",!1):this.quill.format("italic",!0),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__underline",()=>{this.enabled&&(this.quill.getFormat().underline?this.quill.format("underline",!1):this.quill.format("underline",!0),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__strike",()=>{this.enabled&&(this.quill.getFormat().strike?this.quill.format("strike",!1):this.quill.format("strike",!0),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__code",()=>{this.enabled&&(this.quill.getFormat().code?this.quill.format("code",!1):this.quill.format("code",!0),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__sub",()=>{this.enabled&&(this.quill.getFormat().script!=="sub"?this.quill.format("script","sub"):this.quill.format("script",!1),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__super",()=>{this.enabled&&(this.quill.getFormat().script!=="super"?this.quill.format("script","super"):this.quill.format("script",!1),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__ordered-list",()=>{if(this.enabled){if(this.quill.getFormat().list!=="ordered"){const At=this.getCorrectStyledListItem();this.quill.format("list","ordered"),this.quill.format("styledListItem",At)}else this.resetListFormat();this.updateToolbar()}}),this.$toolbar.on("click",".js-co-editor__bullet-list",()=>{if(this.enabled){if(this.quill.getFormat().list!=="bullet"){const At=this.getCorrectStyledListItem();this.quill.format("list","bullet"),this.quill.format("styledListItem",At)}else this.resetListFormat();this.updateToolbar()}}),this.$toolbar.on("click",".js-co-editor__blockquote",()=>{this.enabled&&(this.quill.getFormat().blockquote?this.quill.format("blockquote",!1):(this.quill.format("blockquote",!0),this.changed=!0),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__align-center",()=>{this.enabled&&(this.quill.getFormat().align!=="center"?this.quill.format("align","center"):this.quill.format("align",!1),this.updateToolbar(),this.reposition(this.quill.getSelection()))}),this.$toolbar.on("click",".js-co-editor__align-right",()=>{this.enabled&&(this.quill.getFormat().align!=="right"?this.quill.format("align","right"):this.quill.format("align",!1),this.updateToolbar(),this.reposition(this.quill.getSelection()))}),this.$toolbar.on("click",".js-co-editor__align-left",()=>{this.enabled&&(this.quill.getFormat().align!=="left"?this.quill.format("align","left"):this.quill.format("align",!1),this.updateToolbar(),this.reposition(this.quill.getSelection()))}),this.$toolbar.on("click",".js-co-editor__outdent",()=>{this.enabled&&(this.quill.getFormat().indent!=="-1"?this.quill.format("indent","-1"):this.quill.format("indent",!1),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__indent",()=>{this.enabled&&(this.quill.getFormat().indent!=="+1"?this.quill.format("indent","+1"):this.quill.format("indent",!1),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__link",At=>{this.enabled&&(At.preventDefault(),this.openLinkSettings())}),this.$toolbar.on("click",".js-co-editor__breakafter-column",()=>{this.enabled&&(this.quill.getFormat().breakafter!=="column"?this.quill.format("breakafter","column"):this.quill.format("breakafter",!1),this.updateToolbar(),this.reposition(this.quill.getSelection()))}),this.$toolbar.on("click",".js-co-editor__button",()=>{if(this.enabled){const At=this.quill.getSelection(!0),Us=this.quill.getText(At.index,At.length);this.openButtonSettings(At,{label:Us})}}),this.$ctx.on("click.editor","a",At=>{this.enabled&&(At.preventDefault(),ks(At.currentTarget).hasClass("btn")?(this.currentButtonBlot=C._.find(At.currentTarget),this.quill.setSelection(this.quill.getIndex(this.currentButtonBlot),"silent"),this.openButtonSettings()):(this.currentLinkBlot=C._.find(At.currentTarget),this.openLinkSettings()))}),this.$toolbar.on("click",".js-co-editor__color",At=>{this.enabled&&(At.preventDefault(),this.openColorSettings())}),this.$toolbar.on("click",".js-co-editor__custom1",()=>{this.enabled&&(this.quill.getFormat().styles!=="custom1"?(this.quill.format("styles","custom1"),this.changed=!0):this.quill.format("styles",!1),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__custom2",()=>{this.enabled&&(this.quill.getFormat().styles!=="custom2"?(this.quill.format("styles","custom2"),this.changed=!0):this.quill.format("styles",!1),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__custom3",()=>{this.enabled&&(this.quill.getFormat().styles!=="custom3"?(this.quill.format("styles","custom3"),this.changed=!0):this.quill.format("styles",!1),this.updateToolbar())}),this.$toolbar.on("click",".js-co-editor__clean",()=>{if(this.enabled){const At=this.quill.getFormat();At.header&&this.quill.format("header",!1),At.styles&&this.quill.format("styles",!1),At.blockquote&&this.quill.format("blockquote",!1),At.styledListItem&&this.quill.format("styledListItem","clean"),this.updateToolbar()}})}save(et){this.quill&&(et||this.changed)&&typeof this.saved=="function"&&(this.saved(this.$ctx.find(".ql-editor").html()),this.changed=!1)}getFormat(){return this.quill.getSelection()?this.quill.getFormat():null}getCorrectStyledListItem(){return ks(".js-co-editor__styles").val()}resetListFormat(){const et=this.getCorrectStyledListItem();switch(this.quill.format("list",!1),et){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":this.quill.format("header",et.replace("h",""));break;case"blockquote":this.quill.format("blockquote",!0);break;case"custom1":case"custom2":case"custom3":this.quill.format("styles",et);break}}formatText(et,yt){this.currentSelection&&this.quill.formatText(this.currentSelection.index,this.currentSelection.length,et,yt,"api")}setContent(et){this.$ctx.find(".ql-editor").html(et)}getContentAsJson(){return this.quill.getContents()}getContentAsHtml(){return this.$ctx.find(".ql-editor").html()}enable(){this.enabled||(this.enabled=!0,this.quill?(this.quill.root.dataset.placeholder=this.options.placeholder,this.quill.enable()):this.setup(),this.applyPlaceholderHeight(),this.updateToolbar())}warningEnable(){this.$ctx.on("click.editor",()=>{ks(document.body).hasClass("editor-enabled")&&!this.enabled&&(0,v.K)({template:"block-edit-warning",closeOnConfirm:!0},()=>{this.enable()})})}disable(){this.enabled&&(this.enabled=!1,this.quill&&(this.quill.setSelection(null),this.quill.disable(),this.quill.root.dataset.placeholder="",this.hideToolbar()))}destroy(){this.quill&&(this.closeSettings(!0),this.quill.disable(),this.quill=void 0);const et=this.$ctx.find(".ql-editor");this.$ctx.html(et.html()),this.$ctx.removeClass("ql-disabled ql-container"),this.$ctx.off(".editor"),ks(document.body).off(".editor"),this.$toolbar&&this.$toolbar.remove()}applyPlaceholderHeight(){const et=this.$ctx.find(".ql-editor"),yt=et.get(0);et.hasClass("ql-blank")&&yt?et.height(window.getComputedStyle(yt,":before").height):et.height("auto")}reposition(et){if(this.options.style==="inline")return;let yt=this.currentBounds;et&&(yt=this.quill.getBounds(et),this.currentSelection=et),yt||(this.currentSelection=this.quill.getSelection(),yt=this.quill.getBounds(this.currentSelection)),this.currentBounds=yt;const Ns=this.$toolbar.outerWidth(),hn=this.$toolbar.outerHeight(),At=ks(window).width(),Us=this.$ctx.offset();let as=yt.top+Us.top-(hn+25),Qn=yt.left+yt.width/2+Us.left-Ns/2;const wa=yt.right-yt.width/2+Us.left+Ns/2;Qn<0?(this.$toolbarArrow.css({left:`calc(50% - ${6-Qn}px)`}),Qn=0):wa>At?(this.$toolbarArrow.css({left:`calc(50% - ${6-(wa-At)}px)`}),Qn=At-Ns):this.$toolbarArrow.css({left:"calc(50% - 6px);"}),as<0?(as=yt.top+Us.top+yt.height+25,this.$toolbarArrow.addClass("state-arrow-up")):this.$toolbarArrow.removeClass("state-arrow-up"),this.$toolbar.css({top:as,left:Qn})}showToolbar(){this.options.style!=="inline"&&this.options.set!=="empty"&&this.$toolbar.addClass("state-visible")}hideToolbar(){this.options.style==="inline"?this.updateToolbar():this.$toolbar&&this.$toolbar.removeClass("state-visible")}updateToolbar(){if(this.enabled){this.$toolbarArrow.show(),this.closeSettings();let et={};this.quill.getSelection()&&(et=this.quill.getFormat()),this.$toolbarActions.html((0,w.EY)(mt,{format:et,options:this.options})),this.$toolbarActions.find(".js-co-editor__styles").dropdown(),this.$toolbarActions.find(".js-co-editor__sizes").dropdown({changed:yt=>{this.quill.format("size",yt.value)}})}}isToolbarShown(){return this.$toolbar&&this.$toolbar.hasClass("state-visible")}focus(){this.enabled&&this.quill&&!this.quill.hasFocus()&&setTimeout(()=>{this.quill!==null&&this.quill.focus()},18)}openSettings(et){if(this.options.style==="inline"){const yt=ks((0,w.EY)(qs));ks(document.body).append(yt),yt.css({zIndex:2e3+2*n.z.count+1}),yt.html(et);const Ns=this.$toolbar.get(0),hn=yt.get(0);if(!hn)throw new Error("Element not found.");this.popper=(0,e.n4)(Ns,hn,{placement:"top-start"})}else this.$toolbarActions.html(et)}addToolbarOption(et){this.options.toolbar[et]!==void 0&&(this.options.toolbar[et]=!0)}removeToolbarOption(et){this.options.toolbar[et]!==void 0&&(this.options.toolbar[et]=!1)}closeSettings(et){this.popper&&(!this.hasOpenSettings||et)&&(this.popper.state.elements.popper.remove(),this.popper.destroy(),this.popper=null)}openLinkSettings(){if(this.showToolbar(),this.hasOpenSettings=!0,!this.quill||!this.enabled)return!1;const et=this.quill.getFormat().link,yt=!!(et!=null&&et.url),Ns=ks((0,w.EY)(ke,di(cn({},et),{portalId:this.options.portalId,showInternalLinkChooser:(0,x.PL)()&&(0,x._j)()>0})));this.$toolbarArrow.hide(),this.sandbox.addModules(Ns),this.openSettings(Ns),yt&&(this.openLinkActions({url:et.url,label:et.tooltipLinkLabel||et.url,target:et.newWindow?"_blank":void 0}),this.$toolbarLinkActions.on("linkActionsDeleteClicked",()=>{let At=null;this.currentLinkBlot&&(At=this.quill.getSelection(),this.quill.setSelection(this.currentLinkBlot.offset(this.quill.scroll),this.currentLinkBlot.length())),this.quill.format("link",!1),At&&this.quill.setSelection(At),this.currentLinkBlot=null,this.hasOpenSettings=!1,this.updateToolbar(),this.reposition(null)}));const hn=new m.D(Ns,this.sandbox);this.reposition(null),hn.validation(()=>{let At=hn.serialize();At=cn(cn({},At),At.link),delete At.link;let Us=null;this.currentLinkBlot&&(Us=this.quill.getSelection(),this.quill.setSelection(this.currentLinkBlot.offset(this.quill.scroll),this.currentLinkBlot.length())),At.url?this.quill.format("link",At):this.quill.format("link",!1),Us&&this.quill.setSelection(Us),this.$toolbarActions.show(),this.$toolbarLinkActions.hide(),this.currentLinkBlot=null,this.hasOpenSettings=!1,this.updateToolbar(),this.reposition(null)},()=>{this.$toolbarActions.show(),this.$toolbarLinkActions.hide(),this.currentLinkBlot=null,this.hasOpenSettings=!1,this.updateToolbar(),this.reposition(null)})}openButtonSettings(et,yt){this.showToolbar(),this.hasOpenSettings=!0;let Ns;yt?Ns=yt:Ns=this.currentButtonBlot.formats();const hn=!!(Ns!=null&&Ns.url),At=ks((0,w.EY)(ee,di(cn({},Ns),{showInternalLinkChooser:(0,x.PL)()&&(0,x._j)()>0})));this.$toolbarArrow.hide(),this.sandbox.addModules(At),this.openSettings(At),hn&&(this.openLinkActions({url:Ns.url,label:Ns.tooltipLinkLabel||Ns.url,target:Ns.newWindow?"_blank":void 0}),this.$toolbarLinkActions.on("linkActionsDeleteClicked",()=>{if(this.currentButtonBlot){const as=this.quill.getIndex(this.currentButtonBlot);this.quill.deleteText(as,1)}this.currentButtonBlot=null,this.hasOpenSettings=!1,this.updateToolbar(),this.hideToolbar()}));const Us=new m.D(At,this.sandbox);this.reposition(null),Us.validation(()=>{let as=Us.serialize();if(as=cn(cn({},as),as.link),delete as.link,as.url)et?(this.quill.deleteText(et.index,et.length),this.quill.insertEmbed(et.index,"button",as),this.quill.insertText(et.index+1," "),this.quill.setSelection(et.index+2,"silent")):this.currentButtonBlot&&this.currentButtonBlot.format("button",as);else if(this.currentButtonBlot){const Qn=this.quill.getIndex(this.currentButtonBlot);this.quill.deleteText(Qn,1)}this.$toolbarActions.show(),this.$toolbarLinkActions.hide(),this.currentButtonBlot=null,this.hasOpenSettings=!1,this.updateToolbar(),this.hideToolbar()},()=>{this.$toolbarActions.show(),this.$toolbarLinkActions.hide(),this.currentButtonBlot=null,this.hasOpenSettings=!1,this.updateToolbar(),this.hideToolbar()})}openLinkActions({url:et,label:yt,target:Ns=null}){this.options.style!=="inline"&&this.$toolbarActions.hide(),this.$toolbarLinkActions.show();const hn=ks((0,w.EY)(bs,{url:et,label:yt}));if(this.$toolbarLinkActions.off(".link-actions"),this.sandbox.addModules(hn),this.options.style==="inline")return;this.$toolbarLinkActions.html(hn),this.$toolbarLinkActions.on("linkActionsLinkClicked.link-actions",()=>{window.open(et,Ns)});const At=hn.get(0);if(!At)throw new Error("Element not found.");this.$toolbarLinkActions.on("linkActionsCopyClicked.link-actions",()=>{new(f())(At,{text:()=>et}),hn.trigger("click")}),this.$toolbarLinkActions.on("linkActionsEditClicked.link-actions",()=>{this.$toolbarActions.show(),this.$toolbarActions.find("#link").focusin(),this.$toolbarLinkActions.hide()})}checkOpenColorPickers(){const et=this.colorSettings;let yt=!1;if(et&&et.elems)for(const Ns of et.elems)Ns.item.pickerIsOpen===!0&&(yt=!0);return yt}openColorSettings(){this.showToolbar(),this.hasOpenSettings=!0;const et=ks((0,w.EY)(le,{text:this.quill.getFormat().color,highlight:this.quill.getFormat().background,project:this.options.project}));this.colorSettings=new m.D(et,this.sandbox);const yt=this.colorSettings;this.openSettings(et),et.on("click",".js-co-editor__remove",()=>{this.quill.format("color",!1),this.quill.format("background",!1),this.hasOpenSettings=!1,this.updateToolbar(),this.reposition(null)}),this.reposition(null),yt.getFirstElem().focus(),yt.validation(()=>{const Ns=yt.serialize();Ns.text?this.quill.format("color",Ns.text):this.quill.format("color",!1),Ns.highlight&&y()(Ns.highlight).getAlpha()>0?this.quill.format("background",Ns.highlight):this.quill.format("background",!1),this.hasOpenSettings=!1,this.updateToolbar(),this.reposition(null)},()=>{this.hasOpenSettings=!1,this.updateToolbar(),this.reposition(null)})}isEmpty(){var et;if(this.quill){const yt=this.quill.getText().trim().length===0,Ns=((et=this.quill.getContents().ops)==null?void 0:et.length)===1;this.empty=yt&&Ns}else this.empty=this.tpl.isEmpty(this.$ctx.find(".ql-editor").text());return this.empty}checkEmptyState(){this.isEmpty()&&!this.enabled?this.$ctx.addClass("state-empty"):this.$ctx.removeClass("state-empty")}onHideToolbar(){this.hideToolbar()}selectAll(){this.enabled&&(this.quill.setSelection(0,this.quill.getLength(),"user"),this.allSelected=!0)}setCursorToEnd(){this.enabled&&this.quill.setSelection(this.quill.getLength()-1,1,"user")}};La.count=0;let Vs=La},57915:function(fe,F,i){"use strict";i.d(F,{R:function(){return K}});var e=i(93791),u=i(43915),f=i(50427),b=i(18216),y=i(8391),n=i(74819),w=i(88398),E=i(39232),x=i(86070),C=i(49290),v=i(2728),m=i(29083),c=i(78149),o=i(14154);const l=(0,o.I)(z=>{var q;return(0,x.jsx)("div",{className:`js-co-settings__elem cm-setting-tree${z.modifier?` cm-setting-tree--${z.modifier}`:""}`,"data-id":z.id,"data-value":z.value||"","data-type":"tree",children:z.tree?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"cm-setting-tree__error-wrapper",children:(0,x.jsx)("label",{id:`${z.id}-error`,className:"state-error cm-setting__error cm-setting-tree__error",htmlFor:z.id})}),(0,x.jsx)("div",{className:`cm-setting-tree__title-${z.titleType}`,children:window.translate("Legacy_styleguide_block_text_setting_title")}),(0,x.jsx)("ul",{className:"cm-setting-tree__tree js-cm-setting-tree__tree",children:(q=z.tree)==null?void 0:q.map((re,ve)=>{var Oe;return(0,x.jsxs)("li",{className:"cm-setting-tree__branch js-cm-setting-tree__branch cm-setting-tree__branch--level-1",children:[(0,x.jsxs)("a",{className:"cm-setting-tree__link js-cm-setting-tree__link",href:re.url,children:[(0,x.jsx)("input",{className:"cm-setting-tree__input js-cm-setting-tree__input validate-link",type:"radio",name:z.id,value:re.url}),re.categories&&re.categories.length>0?(0,x.jsx)("span",{className:"cm-setting-tree__state-indicator js-cm-setting-tree__icon-show",tabIndex:0,children:(0,x.jsx)("i",{className:"icon-angle-right"})}):(0,x.jsx)("span",{className:"cm-setting-tree__state-indicator js-cm-setting-tree__icon-show",tabIndex:-1}),re.icon?(0,x.jsx)("div",{className:"cm-setting-tree__icon",children:(0,x.jsx)(c.V,{icon:re.icon,size:e.l.SIZE_MEDIUM})}):null,re.document_title,re.document_mode==="MEDIALIBRARY"?(0,x.jsx)("div",{className:"cm-setting-tree__label",children:window.translate("Legacy_styleguide_block_text_setting_medialibrary")}):(0,x.jsx)("div",{className:"cm-setting-tree__label",children:window.translate("Legacy_styleguide_block_text_setting_document")})]}),re.categories&&re.categories.length>0?(0,x.jsx)("ul",{children:(Oe=re.categories)==null?void 0:Oe.map((De,Ie)=>{var Te;return(0,x.jsxs)("li",{className:"cm-setting-tree__branch js-cm-setting-tree__branch cm-setting-tree__branch--level-2",children:[(0,x.jsxs)("span",{className:`cm-setting-tree__link ${De.pages?"js-cm-setting-tree__branch--level-2":""}`,children:[De.pages?(0,x.jsx)("a",{className:"cm-setting-tree__state-indicator js-cm-setting-tree__icon-show",href:"#",children:(0,x.jsx)("i",{className:"icon-angle-right"})}):null,De.category_title]}),De.pages?(0,x.jsx)("ul",{children:(Te=De.pages)==null?void 0:Te.map((he,se)=>{var de;return(0,x.jsxs)("li",{className:"cm-setting-tree__branch js-cm-setting-tree__branch cm-setting-tree__branch--level-3",children:[(0,x.jsxs)("a",{className:"cm-setting-tree__link js-cm-setting-tree__link",href:he.url,children:[(0,x.jsx)("input",{className:"cm-setting-tree__input js-cm-setting-tree__input validate-link",type:"radio",name:z.id,value:he.url}),he.sections?(0,x.jsx)("span",{className:"cm-setting-tree__state-indicator js-cm-setting-tree__icon-show",tabIndex:0,children:(0,x.jsx)("i",{className:"icon-angle-right"})}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{className:"cm-setting-tree__state-indicator js-cm-setting-tree__icon-show"}),(0,x.jsx)(c.V,{icon:e.l.ICON_DOCUMENT,size:e.l.SIZE_MEDIUM})]}),he.page_title,(0,x.jsx)("div",{className:"cm-setting-tree__label",children:window.translate("Legacy_styleguide_block_text_setting_page")})]}),he.sections?(0,x.jsx)("ul",{children:(de=he.sections)==null?void 0:de.map((je,_e)=>(0,x.jsx)("li",{className:"cm-setting-tree__branch js-cm-setting-tree__branch cm-setting-tree__branch--level-4",children:(0,x.jsxs)("a",{className:"cm-setting-tree__link js-cm-setting-tree__link",href:je.url,children:[(0,x.jsx)("input",{className:"cm-setting-tree__input js-cm-setting-tree__input validate-link",type:"radio",name:z.id,value:je.url}),(0,x.jsx)(c.V,{icon:e.l.ICON_DOCUMENT,size:e.l.SIZE_MEDIUM}),je.section_title,(0,x.jsx)("div",{className:"cm-setting-tree__label",children:window.translate("Legacy_styleguide_block_text_setting_section")})]})},`section-${_e}`))}):null]},`page-${se}`)})}):null]},`category-${Ie}`)})}):null]},`document-${ve}`)})})]}):null})}),h=(0,o.I)(z=>(0,x.jsxs)("form",{action:"#",className:"js-c-linkchooser__form co-linkchooser__form",children:[(0,x.jsx)(m.f,{id:"tooltipLinkLabel",value:""}),(0,x.jsx)(l,{modifier:["modal"],id:"internal_url",titleType:"banner",tree:z.tree,value:z.url}),(0,x.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--section cm-btn-bar--right js-cm-setting__actions",children:[(0,x.jsx)(C.t,{label_cancel:window.translate("Legacy_styleguide_block_text_setting_cancel")}),(0,x.jsx)(v.b,{label_submit:window.translate("Legacy_styleguide_block_text_setting_choose")})]})]}));var g=i(5181),j=Object.defineProperty,$=Object.defineProperties,S=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,R=(z,q,re)=>q in z?j(z,q,{enumerable:!0,configurable:!0,writable:!0,value:re}):z[q]=re,k=(z,q)=>{for(var re in q||(q={}))A.call(q,re)&&R(z,re,q[re]);if(T)for(var re of T(q))B.call(q,re)&&R(z,re,q[re]);return z},V=(z,q)=>$(z,S(q));class K extends b.j{static get count(){return K._count=(K._count||0)+1,K._count}constructor(q,re){super(g(),q,`c-linkchooser-${K.count}`),this.options=g.extend(!0,{},{url:"",tooltipLinkLabel:"",hub:(0,w.PL)()?(0,w._j)():!1},re||{}),this.isOpen=!1,this.on()}on(){this.sandbox.subscribe("events",this),this.sandbox.subscribe("tabs",this)}async open(q){if(!this.isOpen&&(this.isOpen=!0,this.options=g.extend(!0,{},this.options,q||{}),this.options.hub)){const re=this.options.hub,ve=(0,n.YZ)(),Oe=await(0,y.eR)(re,ve);if(this.options.tree=Oe.tree.map(De=>V(k({},De),{icon:this.getIconClass(De.document_mode)})),this.options.url.indexOf("http")===0){const De=document.createElement("a");De.href=this.options.url,this.options.url=De.pathname}this.showChooser()}}showChooser(){this.$ctx=g((0,f.EY)(h,this.options)),this.$modal||(this.$modal=g((0,f.EY)(u.b,{id:"linkchooser"})),g("body").append(this.$modal),this.sandbox.addModules(this.$modal)),this.fire("openModal",{id:"linkchooser",$content:this.$ctx,modifier:"functional"},["events"]),this.setup()}close(){this.fire("closeModal",{id:"linkchooser"},["events"]),this.isOpen=!1,this.sandbox.removeModules(this.$modal),this.$modal.remove(),this.$modal=null}setup(){this.settings=new E.D(this.$ctx,this.sandbox),this.settings.validation(()=>this.create(),()=>this.close())}create(){const q=this.settings.serialize(),re={};re.url=q.internal_url,re.tooltipLinkLabel="",this.validate(re).then(ve=>{this.close(),typeof this.saved=="function"&&this.saved(ve)}).catch(()=>{Tc.Setting.Base.prototype.hideLoader.apply(this.settings)})}remove(){this.close()}validate(q){return new Promise((re,ve)=>{q.url?re(q):ve()})}getIconClass(q){switch(q){case"MEDIALIBRARY":return e.l.ICON_IMAGE_LIBRARY;case"LOGOLIBRARY":return e.l.ICON_LOGO;case"ICONLIBRARY":return e.l.ICON_ICONS;case"DOCUMENTLIBRARY":return e.l.ICON_DOCUMENT_LIBRARY;case"TEXTLIBRARY":return e.l.ICON_TEXT_LIBRARY;case"TEMPLATELIBRARY":return e.l.ICON_TEMPLATES;case"PATTERNLIBRARY":return e.l.ICON_PATTERN_LIBRARY;case"DEFAULT":return e.l.ICON_GUIDELINES;default:return e.l.ICON_PROJECTS}}}},63766:function(fe,F,i){"use strict";i.d(F,{i:function(){return n}});var e=i(86070),u=i(20886),f=i.n(u),b=i(4957),y=i(14154);const n=(0,y.I)(w=>(0,e.jsxs)("div",{className:"mod mod-c-new-publication co-new-publication","data-template-id":w.template.id,"data-template-name":w.template.name,"data-template-asset-id":w.templateAssetId,"data-template-description":w.template.description,"data-source-id":w.sourceId,"data-styleguide-id":w.styleguideId,"data-project-id":w.projectId,"data-set-id":w.setId,"data-is-storyteq":w.isStoryteq,children:[(0,e.jsxs)("div",{className:"co-new-publication__content",children:[(0,e.jsx)("div",{className:"co-new-publication__title",children:(0,u.decode)(window.translate("NewPublication_title",{name:w.template.name}))}),w.template.previewUrl?(0,e.jsx)("img",{className:"co-new-publication__picture",src:w.template.previewUrl.replace("{width}",400),alt:w.template.name}):w.template.preview?(0,e.jsx)("img",{className:"co-new-publication__picture",src:w.template.preview.replace("{width}",400),alt:w.template.name}):null,w.template.description?(0,e.jsx)("div",{className:"co-new-publication__description",children:w.template.description}):null,(0,e.jsx)("div",{className:"co-new-publication__form-container js-co-new-publication__form-container"}),(0,e.jsx)("div",{className:"js-co-new-publication__loader",children:(0,e.jsx)(b.T,{})})]}),(0,e.jsx)("div",{className:"js-co-new-publication__error-container"})]}))},39232:function(fe,F,i){"use strict";i.d(F,{D:function(){return rn}});var e=i(64681),u=i.n(e),f=i(51761),b=i.n(f),y=i(37522),n=i(50427),w=i(17220),E=i(1505),x=i(63334),C=i(5181);class v extends w.E{constructor(d,_,M){super(d,_,M),this.valueProperty="value",this.$add=_.find(".js-cm-setting-list__add-input"),this.$list=_.find(".js-cm-setting-list__items")}elem(d){const _=this.$ctx;this.settings=new rn(_,this.mod.sandbox),this.isSetting=d||!1,this.valueProperty=this.$ctx.data("valueProperty")||"value",this.api=this.$ctx.data("api"),this.items=_.data("items").items,this.additionalData=_.data("data")||{},this.chooserData=_.data("chooser")||{},this.chooserId=this.chooserData.externalData.id,this.mod.sandbox.subscribe("events",this.mod),this.mod.onAssetChooserAssetChosen=function(M){if(M&&M.externalData&&M.externalData.id===this.chooserId&&M.screenData.length>0){if(this.isSetting){const oe=[];for(let Ze of M.screenData)typeof this.preAddProccess=="function"&&(Ze=this.preAddProccess(Ze)),this.items.push(Ze),oe.push(Ze);let Se=this.serialize(oe);this.data.post(this.api,Se).then(Ze=>{Ze.success&&(this.renderList(this.items),typeof this.saved=="function"&&(Se=this.serialize(M.screenData),this.saved(Se)))})}this.mod.fire("closeModal",["events"])}}.bind(this),this.$add.on("keydown",M=>{if(M.keyCode===13)return this.add(this.$add.val()),!1}),_.on("click",".js-cm-setting-list__remove",M=>{const Se=C(M.currentTarget).parents(".js-cm-setting-list__item").data(this.valueProperty);if(this.isSetting){let Ze=this.$ctx.data("api");Ze&&(Ze=`${Ze}/${Se}`,this.data.delete(Ze).then(Qe=>{Qe.success&&(this.items=this.items.filter(_t=>_t[this.valueProperty]!=Se),typeof this.deleted=="function"&&this.deleted(this.items))}))}else this.items=this.items.filter(Ze=>Ze[this.valueProperty]!==Se),this.renderList(this.items)}),_.on("click",".js-cm-setting-list__add",M=>{M.preventDefault(),this.openAssetchooser()}),_.on("click",".js-cm-setting-list__edit",M=>{M.preventDefault()}),this.$add.on("focusout",()=>{this.unfocus()})}setting(){this.elem(!0)}add(d){if(d.length>0){const _=d.split(",");for(const M of _)if(!this.items.find(Se=>Se[this.valueProperty]===M)){const Se={default:!1};Se[this.valueProperty]=C.trim(M),this.items.push(Se)}this.$add.val(""),this.renderList(this.items)}}leave(){super.leave()}enter(){super.enter(),this.readonly?this.mod.leave(this.$ctx):this.$add.focus()}focus(){this.readonly||this.$add.trigger("focus")}destroy(){this.mod.onAssetChooserAssetChosen=null}renderList(d,_){this.$list.html((0,n.EY)(m(this.$ctx.data("templateList"))||x.J,{data:this.additionalData,items:d||this.items,isLast:_,label_none:this.$ctx.data("labelNone")}));const M=this.$list[0].scrollHeight;this.$list.scrollTop(M)}getExistingRelatedScreensIds(){return this.$ctx.find(".js-cm-setting-list__item").toArray().map(d=>C(d).data("id"))}serialize(d){const _=this.$ctx,M={};d?M[this.id]=d:M[this.id]=this.items;let oe=null;const Se=_.data("group");return Se?oe=this.createGroup({},Se,M):oe=M,oe}openAssetchooser(){this.chooserData.filters=this.chooserData.filters.concat({key:"asset_id",values:this.getExistingRelatedScreensIds(),inverted:!0});const d=(0,n.EY)(y.l,this.chooserData);this.mod.fire("openModal",{modifier:"flex",$content:d},["events"])}}const m=N=>{switch(N){case"c-settingspublishing-setting-asset-chooser-list":return E.T;default:return console.error(`Template ${N} not found`),()=>null}};var c=i(2555),o=i(86070),l=i(27833),h=i(14154);const g=(0,h.I)(N=>(0,o.jsx)("div",{className:"co-settings--overlay",children:(0,o.jsx)("fieldset",{className:"co-settings__fieldset--notitle",children:(0,o.jsx)(l.H,{id:"delete_attachment",label:window.translate("Legacy_workspace_attachment_delete"),description:window.translate("Legacy_workspace_attachment_delete_confirmation"),api:`/api/asset-attachment/${N.id}`})})}));var j=i(11097),$=i(60060),S=i(88133),T=i(36523),A=i(5181);class B extends w.E{constructor(d,_,M){super(d,_,M),this.$blankSlate=this.$ctx.find(".js-co-settings__blank"),this.$loadingOverlay=this.$ctx.find(".js-cm-setting-attachments__loading-overlay")}setting(){this.assetId=this.$ctx.data("asset"),this.projectId=this.$ctx.data("project"),this.uploads=[],this.attachments=this.$ctx.data("attachments").map(d=>parseInt(d.id))||[],this.bindAttachmentUpload(),this.bindInlineEditing(),this.bindDelete(),this.bindDragEnterLeave(),this.bindPlatformAnalyticsTracking(),this.bindAttachmentNameHover()}enter(){super.enter()}unfocus(){super.unfocus()}bindAttachmentNameHover(){this.$ctx.on("mouseover",".js-cm-settings__attachment-description",d=>{A(d.currentTarget).addClass("ca-show-full-attachment-name")}),this.$ctx.on("mouseleave",".js-cm-settings__attachment-description",d=>{A(d.currentTarget).removeClass("ca-show-full-attachment-name")})}bindAttachmentUpload(){this.$ctx.find(".js-cm-setting-attachments__files").upload({dataType:"json",dropZone:this.$ctx.find(".js-cm-setting-attachments__dropzone"),before:d=>{const _=d.filter(M=>T.w.isSupportedFilenameForAttachmentInCurrentProject(M.name));return _.length!==d.length&&(0,S.K)({template:"upload-invalid-extension",closeOnConfirm:!0}),_},add:(d,_)=>{this.data.checkStorageLimit(_.files[0].size).then(()=>{_.submit(),this.initAttachment(_.files[0])})},done:async(d,_)=>{_.result&&_.result[0]&&(await this.addAttachment(_.result[0].file_id),this.bindAttachmentNameHover())}})}bindInlineEditing(){this.$ctx.on("blur",".js-cm-setting-attachments__title",d=>{const _=A(d.currentTarget),M=_.closest(".js-cm-setting-attachments__item").data("id");this.data.post(`/api/attachment/update/${M}`,{title:_.text()})}),this.$ctx.on("keypress",".js-cm-setting-attachments__title",d=>{d.keyCode===13&&this.$ctx.find(".js-cm-setting-attachments__title").trigger("blur")})}bindDelete(){this.$ctx.on("click",".js-cm-setting-attachments__toggle",d=>{this.removeAttachment(A(d.currentTarget))})}bindDragEnterLeave(){const d=this.$ctx.find(".js-cm-setting-attachments__dropzone");d.off("dragenter.attachements").on("dragenter.attachements",()=>{d.addClass("cm-setting-attachments__dropzone--dragenter")}),d.off("dragleave.attachements").on("dragleave.attachements",()=>{d.removeClass("cm-setting-attachments__dropzone--dragenter")})}bindPlatformAnalyticsTracking(){this.$ctx.on("click",".js-cm-setting-attachments__download",d=>{const _=A(d.currentTarget);try{const M={attachment_id:_.dataAsNumber("id"),attachment_extension:_.data("attachment-extension"),block_id:null,document_id:null,asset_id:this.assetId,project_id:this.projectId,project_type:this.$ctx.data("projectType"),guideline_id:null,via:this.$ctx.data("projectType"),via_id:this.projectId,download_type:"SINGLE"};j.w.track([{type:"attachment:download",brandId:this.$ctx.data("brandId"),properties:M}])}catch(M){console.error(M)}})}initAttachment(d){this.uploads.push(d.name),this.showLoadingOverlay()}async addAttachment(d){const _=await(0,$.U)(this.assetId,d);this.uploads.splice(this.uploads.indexOf(_.filename),1),this.uploads.length===0&&this.hideLoadingOverlay(),this.$ctx.find(".js-cm-setting-attachments__list").append(A((0,n.EY)(c.t,_))),this.attachments.push(_.id),this.hideBlankSlate()}removeAttachment(d){const _=d.next(".js-cm-setting-attachments__menu"),M=d.data("id"),oe=A((0,n.EY)(g,{id:M}));_.empty().append(oe);const Ze=new rn(oe,this.mod.sandbox).getSetting("delete_attachment");Ze.focus(),Ze.deleted=()=>{d.closest(".js-cm-setting-attachments__item").remove(),this.attachments.splice(this.attachments.indexOf(M),1),this.attachments.length===0&&this.showBlankSlate()},Ze.cancelled=()=>{this.mod.fire("closeDropdown",d)}}showBlankSlate(){this.$blankSlate.removeClass("state-hidden")}hideBlankSlate(){this.$blankSlate.addClass("state-hidden")}showLoadingOverlay(){this.$loadingOverlay.addClass("state-visible")}hideLoadingOverlay(){this.$loadingOverlay.removeClass("state-visible")}}var R=i(15993);class k extends w.E{constructor(d,_,M){super(d,_,M),this.$preview=this.$ctx.find(".js-cm-setting-border__preview")}elem(d){this.initialized=!1,d||this.setup()}setting(){this.elem(!0),this.validation(()=>this.saveBorder(),()=>this.mod.leave(this.$ctx))}setup(){this.initialized||(this.initialized=!0,this.settings=new rn(this.$ctx.find(".js-cm-setting__details"),this.mod.sandbox),this.elemWidth=this.settings.getElem(`${this.id}_width`),this.elemRadius=this.settings.getElem(`${this.id}_radius`),this.elemColor=this.settings.getElem(`${this.id}_color`),this.elemWidth.changed=()=>this.update(),this.elemRadius.changed=()=>this.update(),this.elemColor.changed=()=>this.update())}update(){const d=this.serialize(!0);typeof this.changed=="function"&&this.changed(d),this.updatePreview(d[this.id])}updatePreview(d){this.$preview.css("border-width",d.width).css("border-radius",d.radius).css("border-color",d.color)}updateValue(){const d=this.$ctx.find(".js-cm-setting-border__value"),_={value:this.serialize().settings[this.id]};d.html((0,n.EY)(R.W,_))}saveBorder(){const d=this.$ctx;this.save().then(_=>{_.success&&(typeof this.saved=="function"&&this.saved(_),this.showSuccess().then(()=>{this.updateValue(),this.mod.leave(d)}))})}serialize(d){const _=this.id,M=this.$ctx,oe={};oe[this.id]={width:this.elemWidth.serialize()[`${_}_width`],radius:this.elemRadius.serialize()[`${_}_radius`],color:this.elemColor.serialize()[`${_}_color`]};let Se=null;const Ze=M.data("group");return Ze&&!d?Se=this.createGroup({},Ze,oe):Se=oe,Se}enter(){super.enter(),this.setup(),this.showDetails().then(()=>{this.elemWidth.focus()})}leave(){super.leave(),this.hideDetails().then(()=>{this.hideActions()})}unfocus(){var d;super.unfocus(),this.$details.velocity("callout.pulse",{duration:300}),(d=this.$size)==null||d.trigger("focus")}}var V=i(5181);class K extends w.E{constructor(d,_,M){super(d,_,M),this.$preview=this.$ctx.find(`.js-cm-setting-button__instant-preview-button--${this.id}`),this.$weight=this.$ctx.find(`#${this.id}_weight`)}elem(d){this.initialized=!1,d||this.setup()}setting(){this.elem(!0),this.validation(()=>this.saveButtonStyle(),()=>{this.hideDetails().then(()=>{this.hideActions()}),this.mod.leave(this.$ctx)}),this.$ctx.on("keydown",d=>{this.active&&d.which===9&&V(d.target).is('button[type="reset"]')&&(d.preventDefault(),this.mod.next(this.$ctx))})}setup(){this.initialized||(this.initialized=!0,this.buttonState="default",this.settings=new rn(this.$ctx.find(".js-cm-setting__details"),this.mod.sandbox),this.elemFont=this.settings.getElem(`${this.id}_search`),this.elemWeight=this.settings.getElem(`${this.id}_weight`),this.elemSize=this.settings.getElem(`${this.id}_size`),this.elemLineHeight=this.settings.getElem(`${this.id}_line_height`),this.elemUppercase=this.settings.getElem(`${this.id}_uppercase`),this.elemItalic=this.settings.getElem(`${this.id}_italic`),this.elemBorderWidth=this.settings.getElem(`${this.id}_border_width`),this.elemBorderRadius=this.settings.getElem(`${this.id}_border_radius`),this.elemFrame=this.settings.getElem(`${this.id}_frame`),this.elemColor=this.settings.getElem(`${this.id}_color`),this.elemBackgroundColor=this.settings.getElem(`${this.id}_background_color`),this.elemBorderColor=this.settings.getElem(`${this.id}_border_color`),this.elemColorHover=this.settings.getElem(`${this.id}_color_hover`),this.elemBackgroundColorHover=this.settings.getElem(`${this.id}_background_color_hover`),this.elemBorderColorHover=this.settings.getElem(`${this.id}_border_color_hover`),this.elemFont.saved=()=>this.updatePreview(!0),this.elemWeight.changed=()=>this.updatePreview(),this.elemSize.changed=()=>this.updatePreview(),this.elemLineHeight.changed=()=>this.updatePreview(),this.elemUppercase.changed=()=>this.updatePreview(),this.elemItalic.changed=()=>this.updatePreview(),this.elemBorderWidth.changed=()=>this.updatePreview(),this.elemBorderRadius.changed=()=>this.updatePreview(),this.elemFrame.changed=()=>this.updatePreview(),this.elemBackgroundColor.changed=()=>this.updatePreview(),this.elemBorderColor.changed=()=>this.updatePreview(),this.elemColor.changed=()=>this.updatePreview(),this.elemBackgroundColorHover.changed=()=>this.updatePreview(),this.elemBorderColorHover.changed=()=>this.updatePreview(),this.elemColorHover.changed=()=>this.updatePreview())}updatePreview(d){const _=this.serialize(!0)[this.id],M=_.uppercase===!0?"uppercase":"initial",oe=_.italic===!0?"italic":"initial";if(d===!0&&_.provider==="google"){const Se={google:{families:[_.family_css]}};try{window.WebFont.load(Se)}catch(Ze){V.getScript("//ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js",()=>{window.WebFont.load(Se)})}}this.$preview.css("font-family",_.family_css).css("font-weight",_.weight).css("font-size",_.size).css("line-height",_.line_height).css("text-transform",M).css("font-style",oe).css("border-width",_.border_width).css("border-radius",_.border_radius).css("padding-top",_.frame.top).css("padding-right",_.frame.right).css("padding-bottom",_.frame.bottom).css("padding-left",_.frame.left),this.buttonState==="hover"?this.$preview.css("color",_.color_hover).css("border-color",_.border_color_hover).css("background-color",_.background_color_hover):this.$preview.css("color",_.color).css("border-color",_.border_color).css("background-color",_.background_color)}saveButtonStyle(){this.save().then(d=>{d.success&&(typeof this.saved=="function"&&this.saved(d),this.showSuccess().then(()=>{this.hideDetails()}),this.mod.leave(this.$ctx))})}serialize(d){const _=this.id,M=V(".js-cm-setting-search__item",this.$ctx).data("css"),oe=V(".js-cm-setting-search__item",this.$ctx).data("family"),Se=V(".js-cm-setting-search__item",this.$ctx).data("provider"),Ze={};Ze[this.id]={family_css:M,family:oe,color:this.elemColor.serialize()[`${_}_color`],color_hover:this.elemColorHover.serialize()[`${_}_color_hover`],provider:Se.toLowerCase(),weight:this.elemWeight.serialize()[`${_}_weight`],size:this.elemSize.serialize()[`${_}_size`],line_height:this.elemLineHeight.serialize()[`${_}_line_height`],uppercase:this.elemUppercase.serialize()[`${_}_uppercase`],italic:this.elemItalic.serialize()[`${_}_italic`],border_width:this.elemBorderWidth.serialize()[`${_}_border_width`],border_radius:this.elemBorderRadius.serialize()[`${_}_border_radius`],border_color:this.elemBorderColor.serialize()[`${_}_border_color`],border_color_hover:this.elemBorderColorHover.serialize()[`${_}_border_color_hover`],frame:this.elemFrame.serialize()[`${_}_frame`],background_color:this.elemBackgroundColor.serialize()[`${_}_background_color`],background_color_hover:this.elemBackgroundColorHover.serialize()[`${_}_background_color_hover`]};let Qe=null;return this.$ctx.data("group")&&!d?(Qe={},Qe[this.$ctx.data("group")]=Ze):Qe=Ze,Qe}enter(){super.enter(),this.setup(),this.$ctx.on("mouseenter.previewButton",`.js-cm-setting-button__instant-preview-button--${this.id}`,()=>{this.buttonState="hover",this.updatePreview()}),this.$ctx.on("mouseleave.previewButton",`.js-cm-setting-button__instant-preview-button--${this.id}`,()=>{this.buttonState="default",this.updatePreview()}),this.showDetails().then(()=>{this.$weight.trigger("focus")})}leave(){super.leave(),this.$ctx.off("mouseenter.previewButton"),this.$ctx.off("mouseleave.previewButton"),this.$ctx.off("keydown")}onTabSwitched(d){d.id==="hover"?this.buttonState="hover":this.buttonState="default",this.updatePreview(!1)}unfocus(){super.unfocus(),this.$details.velocity("callout.pulse",{duration:300}),this.$weight.trigger("focus")}}var z=i(5181);class q extends w.E{constructor(d,_,M){super(d,_,M)}elem(){this.readonly=this.$ctx.data("readonly"),this.allowMultiple=this.$ctx.data("multiple")===!0,this.id=this.$ctx.data("id"),this.$ctx.on("click",".js-cm-setting-chooser__type",d=>{const _=z(d.currentTarget);return!this.readonly&&_.hasClass("state-selected")&&this.allowMultiple?(_.removeClass("state-selected"),!1):(!this.readonly&&!_.hasClass("state-selected")&&(this.allowMultiple||this.$ctx.find(".js-cm-setting-chooser__type").removeClass("state-selected"),_.addClass("state-selected"),typeof this.changed=="function"&&this.changed(this.serialize(),this.id)),!1)})}setting(){this.elem(),this.$ctx.on("click",".js-cm-setting-chooser__type",()=>{this.readonly||this.save().then(d=>{d.success&&typeof this.saved=="function"&&this.saved(d)})})}enter(){this.mod.leave(this.$ctx)}leave(){super.leave()}serialize(){const d=this.$ctx.find(".js-cm-setting-chooser__type.state-selected"),_=this.$ctx.data("group"),M={};let oe={};if(this.allowMultiple){const Se=this.id,Ze=[];Ze[Se]=[],d.each((Qe,_t)=>{Ze[Se].push(z(_t).data()[Se])}),z.extend(!0,M,Ze)}else z.extend(!0,M,d.data());return _?oe[_]=M:oe=M,oe}}var re=i(7017),ve=i(49198),Oe=i.n(ve);const De=(0,h.I)(N=>{var d;return(0,o.jsxs)(o.Fragment,{children:[N.hasPicker?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h5",{className:"cm-setting-color__palette-title ",children:"Reset"}),(0,o.jsx)("ul",{className:"cm-setting-color__palette-list",children:(0,o.jsx)("li",{className:"cm-setting-color__palette-item",children:(0,o.jsx)("a",{title:"Transparent",className:`js-cm-setting-color__palette-color cm-setting-color__palette-color${N.selected?"":" state-selected"} state-light`,style:{backgroundImage:"url(/img/transparent.png)"},"data-value":"rgba(0,0,0,0)","data-name":"Transparent",children:(0,o.jsx)("i",{className:"icon-check"})})})})]}),(d=Object.keys(N.palettes))==null?void 0:d.map(_=>{var M;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h5",{className:"cm-setting-color__palette-title",children:N.palettes[_].name}),(0,o.jsx)("ul",{className:"cm-setting-color__palette-list",children:(M=Object.keys(N.palettes[_].colors))==null?void 0:M.map(oe=>(0,o.jsx)("li",{className:"cm-setting-color__palette-item",children:(0,o.jsx)("a",{title:N.palettes[_].colors[oe].name,className:`js-cm-setting-color__palette-color cm-setting-color__palette-color${N.palettes[_].colors[oe].active?" state-selected":""}${N.palettes[_].colors[oe].light?" state-light":""}`,style:{backgroundColor:`${N.palettes[_].colors[oe].css_value}`},"data-value":N.palettes[_].colors[oe].css_value,"data-name":N.palettes[_].colors[oe].name,children:(0,o.jsx)("i",{className:"icon-check"})})},oe))})]})})]})});var Ie=i(5181);class Te extends w.E{static get TAB_KEY_CODE(){return 27}constructor(d,_,M){super(d,_,M),this.$hex=_.find(".js-cm-setting-color__hex"),this.$hexSimple=_.find(".js-cm-setting-color__hex-simple"),this.$r=_.find(".js-cm-setting-color__r"),this.$g=_.find(".js-cm-setting-color__g"),this.$b=_.find(".js-cm-setting-color__b"),this.$a=_.find(".js-cm-setting-color__a"),this.$palette=_.find(".js-cm-setting-color__palette"),this.$picker=_.find(".js-cm-setting-color__picker"),this.$chooser=_.find(".js-cm-setting-color__chooser"),this.$bubble=_.find(".js-cm-setting-color__bubble"),this.$tooltip=_.find(".js-cm-setting-color__tooltip"),this.$reset=_.find(".js-cm-setting-color__reset"),this.$cancel=_.find(".js-cm-setting-color__cancel"),this.$save=_.find(".js-cm-setting-color__save"),this.$preview=_.find(".js-cm-setting-color__preview"),this.shouldCloseOnClickOutside=_.dataAsBoolean("closeOnClickOutside")}elem(d){const _=this.$ctx;this.hasPalette=this.$palette.length>0,this.hasPicker=this.$picker.length>0,this.hasBubble=this.$bubble.length>0,this.readonly=_.data("readonly"),this.tiny=Oe()(_.data("color")),this.previousColor=this.tiny,this.pickerIsOpen=!1,(this.hasBubble||this.hasPicker)&&(this.$hex.on("paste",Ie.debounce(10,()=>this.setColor(this.$hex.val()))),this.$hex.on("change",()=>this.setColor(this.$hex.val()))),this.hasBubble&&(this.$hexSimple.on("keydown",Ie.debounce(50,()=>{this.fromSimple=!0,this.setColor(this.$hexSimple.val()),this.fromSimple=!1})),this.$bubble.on("click",M=>{M.stopPropagation(),this.togglePickerTooltip()})),this.hasPicker&&(this.picker=this.$picker.spectrum({color:this.tiny.toRgbString(),change:Ie.throttle(50,M=>this.updateColor(M))}),this.$chooser.on(".js-cm-setting-color__r, .js-cm-setting-color__g, .js-cm-setting-color__b, .js-cm-setting-color__a","paste",Ie.debounce(10,()=>this.setColor(this.$hex.val()))),this.$chooser.on("change",".js-cm-setting-color__r, .js-cm-setting-color__g, .js-cm-setting-color__b, .js-cm-setting-color__a",()=>this.setColor(this.getRgbaColor())),this.$chooser.on("keydown",M=>{this.active&&M.which===Te.TAB_KEY_CODE&&(M.shiftKey&&Ie(M.target).is('input[name="color"]')?(M.preventDefault(),this.mod.prev(_)):Ie(M.target).is('button[type="reset"]')&&(M.preventDefault(),this.mod.next(_)))}),this.$tooltip.on("click mousedown",M=>M.stopPropagation()),this.$reset.on("click",()=>this.resetPickerColor()),this.$cancel.on("click",M=>{M.preventDefault(),this.setColor(this.previousColor),this.closePickerTooltip()}),this.$save.on("click",M=>{M.preventDefault(),this.previousColor=this.tiny,this.closePickerTooltip()})),this.hasPalette&&this.$chooser.on("click",".js-cm-setting-color__palette-color",M=>{const oe=Ie(M.currentTarget);this.$chooser.find(".js-cm-setting-color__palette-color").removeClass("state-selected"),oe.addClass("state-selected"),this.setColor(oe.data("value"))}),d||(this.setColor(_.data("color")),this.hasPalette&&this.loadPalette(),this.hasPicker&&this.picker.spectrum("reflow")),Ie(document).on("lazybeforeunveil",M=>{Ie(M.target).is(_)&&this.hasPicker&&this.picker.spectrum("reflow")}),this.$preview.attr("tabindex")!=="-1"&&this.$preview.on("keydown",M=>{["Enter","Space"].includes(M.code)&&(M.stopPropagation(),this.enter())})}setting(){const d=this.$ctx;this.elem(!0),d.on("submit",_=>{_.preventDefault(),this.showLoader(),this.save().then(M=>{M.success&&(d.data("css",this.tiny.toRgbString()),typeof this.saved=="function"&&(M.rgb_value=this.tiny.toRgbString(),this.saved(M)),this.updatePreview(),this.showSuccess().then(()=>this.mod.leave(d)))})}).on("reset",()=>this.mod.leave(d))}enter(){super.enter();const d=this.$ctx;if(this.readonly)this.mod.leave(d);else{const _=d.data("color");let M=Promise.resolve();this.hasPalette&&(M=this.loadPalette(_)),M.then(()=>{this.setColor(_),this.showDetails().then(()=>{this.hasPicker&&(this.picker.spectrum("reflow"),this.$hex.trigger("focus").trigger("select")),this.shouldCloseOnClickOutside&&this.setupClickOutsideHandler()})})}}leave(){super.leave(),this.hideDetails().then(()=>this.hideActions()),this.removeClickOutsideHandler()}reset(){this.setColor(this.$ctx.data("color"))}unfocus(){this.mod.leave(this.$ctx),this.readonly||(this.$details.velocity("callout.pulse",{duration:300}),this.focus())}focus(){this.hasPicker&&!this.readonly&&this.$hex.trigger("focus")}serialize(){const d=this.$ctx,_={},M=d.data("set");if(M){const Ze=M.split(",");for(const Qe of Ze)Qe==="id"?_[this.id]=this.tiny.toRgbString():Qe==="hex"?_.hex=this.tiny.toHex():(Qe==="alpha"||Qe==="a"||Qe==="opacity")&&(_[Qe]=this.tiny.getAlpha()*100)}else _[this.id]=this.tiny.toRgbString();let oe=null;const Se=d.data("group");return Se?oe=this.createGroup({},Se,_):oe=_,oe}hide(){this.$details.hide()}togglePickerTooltip(){this.$tooltip.hasClass("state-visible")?this.closePickerTooltip():this.openPickerTooltip()}closePickerTooltip(){Ie("html").off("mousedown.settingcolor"),Ie(document).off("keyup.settingcolor"),this.$tooltip.removeClass("state-visible"),this.$tooltip.removeAttr("style"),this.pickerIsOpen=!1}openPickerTooltip(){this.$tooltip.addClass("state-visible");const d={placement:"top",strategy:"absolute",modifiers:[{name:"preventOverflow",enabled:!0,options:{altAxis:!0,padding:10,rootBoundary:"document"}},{name:"flip",enabled:!0},{name:"offset",options:{offset:[0,0]}}]},_=this.$tooltip.get(0),M=this.$bubble.get(0);this.popper=(0,re.n4)(M,_,d),Ie("html").on("mousedown.settingcolor",oe=>{const Se=Ie(oe.target);Se.closest(".js-cm-setting-color__tooltip").length===0&&!Se.closest(".js-cm-setting-color__bubble").is(this.$bubble)&&this.closePickerTooltip()}),Ie(document).on("keyup.settingcolor",oe=>{oe.which===27&&this.closePickerTooltip()}),this.$hex.trigger("focus").trigger("select"),this.pickerIsOpen=!0}loadPalette(d){return this.data.get(`/api/color/library/${this.$palette.data("palette")}`).then(_=>{for(const M of _.palettes)if(M.colors&&M.colors.length>0)for(const oe of M.colors)Oe().equals(d,oe.css_value)&&(oe.active=!0,_.selected=!0);return _.hasPicker=this.hasPicker,this.$palette.html((0,n.EY)(De,_)),!0})}setColor(d){let _=Oe()(d);_.isValid()||(_=Oe()("rgba(255,255,255,0)")),this.tiny=_,this.hasPicker&&this.picker.spectrum("set",_),this.hasBubble&&this.$bubble.css({backgroundColor:this.tiny.toRgbString()})}updateColor(d){this.tiny=d;const _=d._roundA===0?"transparent":d.toHexString();if(this.hasPicker){this.$hex.val(_);const M=d.toRgb();this.$r.val(M.r),this.$g.val(M.g),this.$b.val(M.b),this.$a.val(M.a)}this.hasBubble&&(this.$bubble.css({backgroundColor:d.toRgbString()}),this.fromSimple||this.$hexSimple.val(_)),typeof this.changed=="function"&&this.changed(d)}updatePreview(){const d=this.$ctx;d.find(".js-cm-setting-color__value").text(this.tiny.toHexString()),d.find(".js-cm-setting-color__preview").css({backgroundColor:this.tiny.toRgbString()}),d.data("color",this.tiny.toRgbString())}getRgbaColor(){return`rgba(${this.$r.val()},${this.$g.val()},${this.$b.val()},${this.$a.val()})`}resetPickerColor(){this.$r.val("255"),this.$g.val("255"),this.$b.val("255"),this.$a.val("0"),this.setColor(this.getRgbaColor())}handleCloseOnClickOutside(d){const _=this.$details[0];!_||!(d.target instanceof Element)||_.contains(d.target)||this.mod.leave()}setupClickOutsideHandler(){this.boundClickOutsideHandler=this.handleCloseOnClickOutside.bind(this),document.addEventListener("click",this.boundClickOutsideHandler)}removeClickOutsideHandler(){this.boundClickOutsideHandler&&document.removeEventListener("click",this.boundClickOutsideHandler)}}var he=i(5181);class se extends w.E{constructor(d,_,M){super(d,_,M)}elem(){const d=this.$ctx;d.on("click",".js-cm-setting-colorlabel__link",_=>{d.find(".js-cm-setting-colorlabel__link").removeClass("state-active"),he(_.currentTarget).addClass("state-active")})}setting(){const d=this.$ctx;this.elem(),d.on("click",".js-cm-setting-colorlabel__link",()=>{this.save().then(_=>{_.success&&typeof this.saved=="function"&&this.saved(_)})})}enter(){const d=this.$ctx;this.mod.leave(d)}leave(){super.leave()}serialize(){const d=this.$ctx,_={};_[this.id]=d.find(".js-cm-setting-colorlabel__link.state-active").data("color");let M=null;return d.data("group")?(M={},M[d.data("group")]=_):M=_,M}}const de=(0,h.I)(N=>{var d;const _=N.value!=="none"?Oe()(N.value):Oe()("transparent");return(0,o.jsxs)(o.Fragment,{children:[N.mode==="define"&&N.colors.length===0?(0,o.jsx)("li",{className:"cm-setting-colorlist__item cm-setting-colorlist__item--blank",children:window.translate("Legacy_settings_colorlist_blank")}):null,N.colors?(d=N.colors)==null?void 0:d.map(M=>{const oe=Oe()(M);return oe.isValid()?(0,o.jsx)("li",{className:"cm-setting-colorlist__item",children:(0,o.jsx)("button",{type:"button","data-color":oe.toRgbString(),className:`js-cm-setting-colorlist__color cm-setting-colorlist__btn ${oe.isDark()?"cm-setting-colorlist__btn--dark":""} ${N.mode==="choose"?` js-cm-setting-colorlist__choose${Oe().equals(oe,_)?" state-active":""} `:`${N.mode==="define"?" js-cm-setting-colorlist__delete ":""}`} `,children:N.mode==="choose"?(0,o.jsx)("i",{"aria-hidden":!0,className:"ca-icon--check ca-icon--sm",style:{background:`${oe.toRgbString()}`}}):N.mode==="define"?(0,o.jsx)("i",{"aria-hidden":!0,className:"ca-icon--trash ca-icon--sm",style:{background:`${oe.toRgbString()}`}}):null})}):null}):null]})});var je=i(64182);const _e=(0,h.I)(N=>(0,o.jsxs)("div",{className:"cm-setting-colorlist__menu",children:[(0,o.jsx)("div",{className:"cm-setting-colorlist__fields",children:(0,o.jsx)(je.g,{id:"color",picker:!0,palette:N.palette||!1,value:N.value||"#000000"})}),(0,o.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer",children:[(0,o.jsx)("button",{className:"cm-btn cm-btn--default js-cm-setting-colorlist__menu-close",type:"button",children:window.translate("Legacy_btn_cancel")}),(0,o.jsx)("button",{className:"cm-btn cm-btn--primary js-cm-setting-colorlist__add",type:"button",children:window.translate("Legacy_settings_colorlist_add")})]})]}));var Ce=i(5181);class ee extends w.E{constructor(d,_,M){super(d,_,M),this.$colors=this.$ctx.find(".js-cm-setting-colorlist__list")}elem(){this.mode="choose",this.multiSelection=this.$ctx.data("multiSelection")||!1,this.colors=this.$ctx.data("colors")||[],this.value=this.$ctx.data("value")||"none",this.palette=this.$ctx.data("palette"),this.settings=null,this.lastColor="#000000",this.$ctx.on("click",".js-cm-setting-colorlist__choose",d=>{const _=Ce(d.currentTarget),M=_.data("color");this.value===M?this.value="none":this.value=_.data("color"),this.renderColors(),typeof this.changed=="function"&&this.changed(this.serialize())}),this.renderColors()}setting(){this.mode=this.$ctx.data("mode")||"choose",this.multiSelection=this.$ctx.data("multiSelection")||!1,this.colors=this.$ctx.data("colors")||[],this.value=this.$ctx.data("value")||"none",this.$colors=this.$ctx.find(".js-cm-setting-colorlist__list"),this.palette=this.$ctx.data("palette"),this.settings=null,this.mode==="choose"?this.$ctx.on("click",".js-cm-setting-colorlist__choose",d=>{const _=Ce(d.currentTarget);this.value=_.data("color"),this.renderColors(),this.save().then(M=>{M.success&&typeof this.saved=="function"&&this.saved(M)})}):this.mode==="define"&&(this.$ctx.on("click",".js-cm-setting-colorlist__toggle-chooser",d=>{if(d.stopPropagation(),d.preventDefault(),this.popper)this.closePopper();else{const _=Ce(d.currentTarget),M=Ce((0,n.EY)(_e,{value:this.lastColor,palette:this.palette}));this.$ctx.append(M),this.openPopper(_,M,{placement:"bottom-end"}),this.settings=new rn(M,this.mod.sandbox)}}),this.$ctx.on("click",".js-cm-setting-colorlist__add",()=>{const d=this.settings.serialize(),_=Oe()(d.color);this.colors.find(oe=>Oe().equals(_,oe))||(this.colors.push(d.color),this.lastColor=d.color),this.renderColors(),this.closePopper(),this.save().then(oe=>{oe.success&&typeof this.saved=="function"&&this.saved(oe)})}),this.$ctx.on("click",".js-cm-setting-colorlist__delete",d=>{const _=Ce(d.currentTarget),M=Oe()(_.data("color"));this.colors=this.colors.filter(oe=>!Oe().equals(M,oe)),this.renderColors(),this.save().then(oe=>{oe.success&&typeof this.saved=="function"&&this.saved(oe)})}),this.$ctx.on("click",".js-cm-setting-colorlist__menu-close",()=>{this.closePopper()})),this.renderColors()}renderColors(){this.$colors.html((0,n.EY)(de,{colors:this.colors,value:this.value,mode:this.mode}))}enter(){const d=this.$ctx;this.mod.leave(d)}leave(){super.leave()}serialize(){const d=this.$ctx,_={},M=[];let oe;this.mode==="choose"?oe=d.find(".js-cm-setting-colorlist__color.state-active"):this.mode==="define"&&(oe=d.find(".js-cm-setting-colorlist__color")),oe.each((Ze,Qe)=>{const Ft=Ce(Qe).data("color");M.includes(Ft)||M.push(Ft)}),_[this.id]=this.multiSelection||this.mode==="define"?M:M[0];let Se=null;return d.data("group")?(Se={},Se[d.data("group")]=_):Se=_,Se}openPopper(d,_,M){const oe={placement:"bottom",modifiers:[{name:"preventOverflow",options:{padding:20}}]};M=Ce.extend(!0,{},oe,M),this.popper&&this.closePopper();const Se=d.get(0),Ze=_.get(0);this.popper=(0,re.n4)(Se,Ze,M)}closePopper(){this.popper&&(this.popper.state.elements.popper.remove(),this.popper.destroy(),this.popper=null)}}var H=i(98609),le=i.n(H),ke=i(5181);class Ue extends w.E{constructor(d,_,M){super(d,_,M),this.$date=_.find(".js-cm-setting__input"),this.readonly=this.$date.is("[readonly]"),this.format=_.data("format")||"DD/MM/YYYY",this.formatValue=_.data("formatValue"),this.noMinDate=_.dataAsBoolean("noMinDate")||!1,this.minDate=_.data("minDate"),this.maxDate=_.data("maxDate"),this.allowEmpty=_.dataAsBoolean("allowEmpty")||!1,this.picker=null,this.lastSavedValueAsMomentObject=null,this.lastChangedValueAsFormattedString=null}elem(){this.readonly||(this.lastSavedValueAsMomentObject=this.getValue(),this.lastChangedValueAsFormattedString=this.getValue(!0),this.registerEvents())}setting(){this.elem();const d=this.$ctx;this.validation(()=>{this.save().then(_=>{typeof this.saved=="function"&&this.saved(_),_.success?(this.mod.leave(d),this.showSuccess()):_.errors&&this.showErrors(_.errors),this.lastSavedValueAsMomentObject=this.getValue()})}),d.on("reset.setting-date",_=>{_.preventDefault(),this.resetValue()})}registerEvents(){const d=this.$ctx;this.$date.is("[data-mask]")&&(this.$date.addClass(`js-cm-setting__input-${this.id}`),d.find(`.js-cm-setting__input-${this.id}`).mask(`${this.$date.data("mask")}`)),d.on("focusin.setting-date",".js-cm-setting__bar",_=>{ke(_.currentTarget).addClass("state-active")}),d.on("focusout.setting-date",".js-cm-setting__bar",_=>{ke(_.currentTarget).removeClass("state-active"),this.submitValue()}),d.on("click.setting-date",".js-cm-setting__group-prefix, .js-cm-setting__label",_=>{_.preventDefault(),this.$date.trigger("click")}),this.allowEmpty&&this.$date.on("keydown.setting-date",_=>{this.destroyPicker(),_.which===13&&this.submitValue()})}unregisterEvents(){this.$ctx.off(".setting-date"),this.$date.off(".setting-date")}initPicker(){if(this.picker!==null)return;const d=this.$date.get(0),{minDate:_,maxDate:M}=this.getDateBoundaries();this.picker=new window.Pikaday({field:d,format:this.format,minDate:_,maxDate:M,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:le().localeData().months(),weekdays:le().localeData().weekdays(),weekdaysShort:le().localeData().weekdaysShort()},onSelect:()=>{this.submitValue()}}),ke(this.picker.el).on("mousedown.setting-date click.setting-date",oe=>{oe.stopPropagation()})}getDateBoundaries(){let d,_;return this.noMinDate===!1&&(d=new Date),this.minDate&&(d=new Date(this.minDate)),this.maxDate&&(_=new Date(this.maxDate)),{minDate:d,maxDate:_}}destroyPicker(){this.picker!==null&&(this.picker.destroy(),this.picker=null)}submitValue(){var d,_;if(this.readonly)return;const M=this.getValue(!0);M!==this.lastChangedValueAsFormattedString&&(M===null&&this.setValue(null),this.isSetting?(M!==null&&this.setValue(((d=this.picker)==null?void 0:d.getMoment())||null),this.$date.submit()):this.$date.val(((_=this.picker)==null?void 0:_.toString())||""),typeof this.changed=="function"&&this.changed(this.serialize()),this.lastChangedValueAsFormattedString=M)}enter(){this.$date.trigger("click"),super.enter(),!this.readonly&&this.isSetting?this.showActions():this.mod.leave(this.$ctx)}leave(){super.leave(),this.readonly||this.hideActions()}focus(){return this.readonly||(this.isSetting?this.enter():this.$date.trigger("focus")),this}unfocus(d){super.unfocus(),this.picker&&this.picker.hide(),this.mod.leave(this.$ctx),d&&this.mod.enter(d)}getPicker(){return this.picker}setValue(d){var _,M,oe;if(this.initPicker(),d)return(_=this.picker)==null||_.setMoment(d,!0),this.$date.val(d.format(this.format)),this;if(this.allowEmpty)(M=this.picker)==null||M.setDate(null,!0),this.$date.val("");else{const Se=le()();(oe=this.picker)==null||oe.gotoToday(),this.$date.val(Se.format(this.format))}return this.readonly&&this.destroyPicker(),this}resetValue(){this.setValue(this.lastSavedValueAsMomentObject),this.$date.submit()}getValue(d){var _,M,oe;this.initPicker();let Se=null;const Ze=((_=this.picker)==null?void 0:_.getDate())!==null;return Ze&&(Se=(M=this.picker)==null?void 0:M.getMoment()),!Ze&&!this.allowEmpty&&(Se=(oe=this.picker)==null?void 0:oe.getMoment()),this.readonly&&this.destroyPicker(),d===!0&&Se!==null&&(Se=Se==null?void 0:Se.format(this.format)),Se}serialize(){const d=this.$ctx;let _;const M={};return M[this.id]=this.getValue()!==null?this.getValue().format(this.formatValue):null,d.data("group")?(_={},_[d.data("group")]=M):_=M,_}destroy(){this.$ctx.removeData(),this.picker&&this.picker.destroy(),this.unregisterEvents()}}var Ge=i(2231),Me=i(5181);class Ve extends w.E{static get DURATION(){return 200}static get DELAY(){return 190}constructor(d,_,M){super(d,_,M),this.$btn=_.find(".js-cm-setting-delete__btn"),this.$confirmation=_.find(".js-cm-setting-delete__confirmation"),this.$error=_.find(".js-cm-setting-delete__error"),this.httpMethod=this.$ctx.data("method")?this.$ctx.data("method").toLowerCase():"delete"}elem(){}setting(){const d=this.$ctx;this.heightShouldChange=null,d.on("click",".js-cm-setting-delete__btn",(_,M)=>{_.preventDefault(),_.stopPropagation();const oe=M?1:Ve.DURATION;this.containerHeightShouldChange()&&this.getSettingContainer().velocity({height:`${this.$confirmation.outerHeight()}px`},{duration:oe}),this.$btn.velocity("transition.slideDownOut",{duration:oe}),this.$confirmation.velocity("transition.slideUpIn",{duration:oe,delay:Ve.DELAY})}),d.on("click",".js-cm-setting-delete__cancel",_=>{_.preventDefault(),this.containerHeightShouldChange()&&this.getSettingContainer().velocity({height:`${this.$btn.height()}px`},{duration:Ve.DURATION,delay:Ve.DELAY}),this.$confirmation.velocity("transition.slideDownOut",{duration:Ve.DURATION,complete:()=>{typeof this.cancelled=="function"&&this.cancelled()}}),this.$btn.velocity("transition.slideUpIn",{duration:Ve.DURATION,delay:Ve.DELAY,display:"flex"})}),d.on("click",".js-cm-setting-delete__delete",_=>{this.apiCall(_)}),d.on("click",".js-cm-setting-delete__instant-btn",_=>{this.apiCall(_)})}async apiCall(d){const _=d.target;Me(_).prop("disabled",!0);const M=await this.delete();M.success?typeof this.deleted=="function"&&await this.deleted(M):M.referenced?(0,S.K)({text:(0,n.EY)(Ge.D,M),template:"delete-with-block-references",closeOnConfirm:!0}):(M.error&&M.error_message?this.$error.find(".js-cm-setting-delete__error").text(M.error_message):M.error&&this.$error.find(".js-cm-setting-delete__error").text(M.error),M.error_link&&this.$error.find(".js-cm-setting-delete-link").attr("href",M.error_link.url).text(M.error_link.text).addClass("is-visible"),this.getSettingContainer().velocity({height:`${this.$error.outerHeight()}px`}),this.$confirmation.velocity("transition.slideDownOut",{duration:Ve.DURATION,complete:()=>{this.$error.velocity("transition.slideUpIn",{duration:Ve.DURATION})}})),Me(_).prop("disabled",!1)}containerHeightShouldChange(){return this.heightShouldChange===null&&(this.heightShouldChange=this.$confirmation.outerHeight()!==0),this.heightShouldChange}getSettingContainer(){const d=this.$ctx.find(".cm-setting__preview");return d.length>0?d:this.$ctx}focus(){this.$ctx.find(".js-cm-setting-delete__btn").trigger("click",!0)}serialize(){return{}}delete(){const d=this.$ctx.data("api"),_=this.$ctx.data("data")||{};return d?this.data[this.httpMethod](d,_):Promise.resolve(Me.extend(!0,{},{success:!0}))}enter(){this.mod.leave(this.$ctx)}leave(){super.leave()}}var Ke=i(90166),at=i(5181);class Tt extends w.E{constructor(d,_,M){super(d,_,M),this.$select=this.$ctx.find("select")}elem(d){this.isSetting=d,this.readonly=this.$select.is("[readonly]"),this.expand=this.$ctx.data("expand")||!1,this.nonSelectionAllowed=this.$ctx.data("nonSelection")||!1,this.current=null,this.float=!!this.$ctx.data("float"),this.$select.on("click",_=>_.stopPropagation()),this.initSelect(),this.$ctx.on("focusin",".js-cm-setting__bar",_=>{at(_.currentTarget).addClass("state-active")}).on("focusout",".js-cm-setting__bar",_=>{at(_.currentTarget).removeClass("state-active")})}setting(){this.elem(!0),this.$ctx.find(".ca-dropdown").attr("tabindex","-1"),this.$ctx.on("keydown",d=>{this.active&&d.which===9&&(d.preventDefault(),d.shiftKey?this.mod.prev(this.$ctx):this.mod.next(this.$ctx))}),this.$ctx.on("submit",d=>{d.preventDefault(),this.current!==this.$select.val()?this.save().then(_=>{_.success&&(typeof this.saved=="function"&&this.saved(_),setTimeout(()=>{this.mod.leave(this.$ctx),this.showSuccess()},0))}):this.mod.leave(this.$ctx)}).on("reset",()=>{this.mod.leave(this.$ctx)})}initSelect(){this.$select.dropdown({float:this.float,nonSelection:this.nonSelectionAllowed,changed:function(){typeof this.changed=="function"&&this.changed(this.serialize()),this.isSetting&&this.$ctx.trigger("submit")}.bind(this),open:function(){if(this.expand){const d=this.$ctx.find(".js-ca-dropdown__list"),M=d.offset().top+parseInt(d.outerHeight())+30;this.mod.resize(M)}}.bind(this),close:function(){this.expand&&this.mod.resize()}.bind(this)})}setOptions(d){this.$select.html((0,n.EY)(Ke.g,{non_selection:this.nonSelectionAllowed,options:d})),this.initSelect()}addOptions(d,_){const M=(0,n.EY)(Ke.g,{non_selection:this.nonSelectionAllowed,options:d});_?this.$select.prepend(M):this.$select.append(M),this.initSelect()}enter(){super.enter(),this.current=this.$select.val(),this.readonly?this.mod.leave(this.$ctx):(this.showActions(),this.$ctx.find(".ca-dropdown > .selected").trigger("mouseup"))}leave(){super.leave();const d=this.$ctx;this.hideActions(),d.find(".js-cm-setting__bar").removeClass("state-active"),d.find(".ca-dropdown").trigger("blur")}focus(){const d=this.$ctx;this.readonly||(this.isSetting?this.enter():d.find(".ca-dropdown > .selected").trigger("mouseup"))}unfocus(d){super.unfocus();const _=this.$ctx;this.readonly||(this.mod.leave(_),this.mod.enter(d))}destroy(){this.leave()}serialize(){const d={};d[this.id]=this.$ctx.find("select").val();let _=null;const M=this.$ctx.data("group");return M?_=this.createGroup({},M,d):_=d,_}getValue(){return this.$ctx.find("select").val()}setIndex(d){this.$ctx.find(".js-ca-dropdown__list").find(`li[data-index="${d}"]`).trigger("mouseup")}}var Yt=i(41011),tt=i(72297),qe=i(9786),ot=i(88314),pt=i(74450),mt=i(11485),Xt=i(81178),rs=i(6006);class Qt extends w.E{constructor(d,_,M){super(d,_,M),this.$submitButton=this.$ctx.find(".js-cm-setting__actions button[type=submit]")}setting(){this.value=this.$ctx.dataAsString("value"),this.settings=new rn(this.$ctx,this.mod.sandbox),this.validation(()=>{this.requestEmailChange()},()=>{this.hideDetails(),this.mod.leave(this.$ctx)}),this.$ctx.on("keyup",d=>{this.handleSubmitButtonState(d.target.value)}),this.$ctx.on("paste",d=>{const _=(d.originalEvent||d).clipboardData.getData("text/plain");this.handleSubmitButtonState(_)}),this.handleEmailNotVerifiedState()}handleSubmitButtonState(d){this.value===d?this.$submitButton.attr("disabled","disabled"):this.$submitButton.removeAttr("disabled")}requestEmailChange(){this.save().then(d=>{if(!d.success)return this.showGeneralErrorSwal();this.showSuccess().then(()=>{this.$ctx.trigger("reset"),this.hideDetails(),this.mod.leave(this.$ctx),this.showConfirmEmailModal()})}).catch(()=>{this.showGeneralErrorSwal()})}showGeneralErrorSwal(){(0,S.K)({template:"general-error",closeOnConfirm:!0}),this.$ctx.trigger("reset"),this.hideLoader()}showConfirmEmailModal(){this.mod.fire("swal",{template:"confirm-changed-email-address",closeOnConfirm:!0,email:this.email})}serialize(){return this.email=this.$ctx.find("#email").val(),{email:this.email}}enter(){super.enter();const d=this.$ctx.find("#email");this.email=d.val(),this.handleSubmitButtonState(this.email),this.showDetails().then(()=>{d.select()})}handleEmailNotVerifiedState(){const d=this.$ctx.find(".js-cm-setting__user-email-verification-state").get(0);this.isUserEmailVerified()?this.renderUserEmailVerificationStateBadge(d):this.renderUserEmailVerificationStateButton(d)}isUserEmailVerified(){var d;return((d=(0,Xt.vD)())==null?void 0:d.email_verified_at)!==null}renderUserEmailVerificationStateButton(d){const _={onClick:()=>this.sendVerificationEmail(),style:Yt.in.Secondary,hugWidth:!0,size:Yt.Mp.Small,icon:(0,o.jsx)(tt.default,{}),children:window.translate("UserVerifyEmail_profileButtonText")};(0,n.Cc)(qe.$,d,_)}renderUserEmailVerificationStateBadge(d){const _={style:ot.$l.Positive,emphasis:ot.Wl.None,size:"m",icon:(0,o.jsx)(pt.default,{}),children:window.translate("UserVerifyEmail_profileBadgeText")};(0,n.Cc)(mt.E,d,_)}sendVerificationEmail(){(0,rs.kH)(this.mod.sandbox.getConfigParam("user")).then(d=>{d.success?this.showVerifyYourUserEmailSwal():this.showGeneralErrorSwal()}).catch(()=>{this.showGeneralErrorSwal()})}showVerifyYourUserEmailSwal(){(0,S.K)({template:"verify-your-user-email",closeOnConfirm:!0})}}var ls=i(4957);const Ts=(0,h.I)(N=>(0,o.jsx)("div",{className:"cm-setting-folderlist__message",children:N.isCurrentProject?window.translate("Legacy_txt_folder_add",{query:N.query}):window.translate("Legacy_medialibrary_search_no_results")}));var As=i(93791),Qs=i(78149);const bs=(0,h.I)(N=>{var d,_;return(0,o.jsxs)("li",{className:"cm-tree__branch js-cm-tree__branch",children:[(0,o.jsxs)("div",{className:"cm-tree__item js-cm-tree__item","data-id":N.item.id,children:[N.item[N.childVariable].length>0?(0,o.jsx)("span",{className:"cm-tree__state-indicator js-cm-tree__icon-show",tabIndex:0,children:(0,o.jsx)("i",{className:"icon-angle-right"})}):(0,o.jsx)("span",{className:"cm-tree__state-indicator js-cm-tree__icon-show",tabIndex:-1}),(0,o.jsx)("div",{className:"cm-tree__icon",children:(0,o.jsx)(Qs.V,{icon:(d=N.item.icon)!=null?d:"folder",size:As.l.SIZE_SMALL})}),(0,o.jsx)("span",{className:"cm-tree__name js-cm-tree__name",children:N.item.name})]}),N.item[N.childVariable].length>0?(0,o.jsx)("ul",{className:"cm-tree__list",children:(_=N.item[N.childVariable])==null?void 0:_.map((M,oe)=>(0,o.jsx)(bs,{item:M,childVariable:N.childVariable},oe))}):null]})});var qs=Object.defineProperty,ks=Object.defineProperties,ei=Object.getOwnPropertyDescriptors,an=Object.getOwnPropertySymbols,Na=Object.prototype.hasOwnProperty,ys=Object.prototype.propertyIsEnumerable,$t=(N,d,_)=>d in N?qs(N,d,{enumerable:!0,configurable:!0,writable:!0,value:_}):N[d]=_,fn=(N,d)=>{for(var _ in d||(d={}))Na.call(d,_)&&$t(N,_,d[_]);if(an)for(var _ of an(d))ys.call(d,_)&&$t(N,_,d[_]);return N},ka=(N,d)=>ks(N,ei(d));const cn=(0,h.I)(N=>{var d;return(0,o.jsx)("div",ka(fn({className:"mod mod-c-tree cm-tree"},N.tpl.renderDataAttributesAsObject(N)),{children:(0,o.jsx)("ul",{className:"cm-tree__list",children:(d=N.dataset)==null?void 0:d.map((_,M)=>(0,o.jsx)(bs,{item:_,childVariable:"child_sets"},M))})}))});var di=i(5181);class La extends w.E{constructor(d,_,M){super(d,_,M),this.$searchContainer=_.find(".js-cm-setting-folderlist__search"),this.$itemsContainer=_.find(".js-cm-setting-folderlist__items"),this.$createMessage=_.find(".js-cm-setting-folderlist__folder-create"),this.$currentItem=null}elem(){const d=this.$ctx;this.api=d.data("api"),this.project=d.data("project"),this.isCurrentProject=this.mod.sandbox.getConfigParam("router").getUrlParam("project")==this.project,this.readonly=d.data("readonly"),this.folders=[],this.settings=new rn(this.$searchContainer,this.mod.sandbox),this.query=this.settings.getElem(`${this.id}_query`),this.initFolders(this.project),this.bindQuery(),this.bindElementClick(),this.bindKeyboardEvents(),this.bindTreeComponent()}bindQuery(){this.query.changed=d=>{const _=this.$itemsContainer.find("li");_.toggleClass("state-in-search",!1),d===""?(_.toggleClass("state-hidden",!1),this.$createMessage.html("")):_.each((M,oe)=>{const Se=di(oe),Ze=Se.text().search(new RegExp(d,"i"))<0;Se.toggleClass("state-hidden",Ze),Se.toggleClass("state-in-search",!Ze)}),this.$itemsContainer.find("li:visible").length===0?this.$createMessage.html((0,n.EY)(Ts,{isCurrentProject:this.isCurrentProject,query:d})):this.$createMessage.html(""),this.$currentItem&&!this.$currentItem.is(":visible")&&(this.$currentItem.removeClass("state-active"),this.$currentItem=null,this.$ctx.find(".js-cm-setting-folderlist__move").attr("disabled","disabled"))}}bindElementClick(){this.$ctx.on("click",".js-cm-setting-folderlist__move",d=>{var _;this.showLoadingMoveButton(d),this.move((_=this.$currentItem)==null?void 0:_.data("id"))})}bindTreeComponent(){this.$ctx.on("elementSelected",d=>{this.selectFolder(d.detail.element)})}bindKeyboardEvents(){this.$ctx.on("keydown",d=>{d.which===13&&(d.preventDefault(),this.$currentItem&&this.$currentItem.is(":visible")?this.move(this.$currentItem.data("id")):this.$itemsContainer.find("li:visible").length===0&&this.isCurrentProject&&this.createFolder(this.query.getValue()).then(_=>{this.folders.push(_.folder),this.move(_.folder.id)}))})}showLoadingMoveButton(d){const _=di(d.currentTarget);_.attr("disabled","disabled").find(".js-cm-setting__btn-label").hide(),_.find(".js-cm-setting__btn-icon--loading").css("display","inline-block")}serialize(){const d={},_=this.$ctx.data("group");return d[this.id]=this.getValue(),_?this.createGroup({},_,d):d}selectFolder(d){d&&(this.$currentItem=d,this.$ctx.find(".js-cm-setting-folderlist__move").removeAttr("disabled"))}move(d){if(typeof this.folderSelected=="function"){const _=this.getFolderSelected(this.folders,d);_&&this.folderSelected(_,this.project)}}getFolderSelected(d,_){if(d)for(let M=0;M<d.length;M++){if(d[M].id===_)return d[M];const oe=this.getFolderSelected(d[M].child_sets,_);if(oe)return oe}return null}initFolders(d){const _=di(".js-co-settings__select--project option:selected").text();this.$itemsContainer.html((0,n.EY)(ls.T)),this.data.get(`/api/project/${d}/set`).then(M=>{this.folders=[{name:_,icon:this.getProjectIcon(),id:0,child_sets:M.data}],this.$itemsContainer.html((0,n.EY)(cn,{dataset:this.folders,childVariable:"child_sets"})),this.$itemsContainer.find("li:visible").first().addClass("state-open"),this.mod.sandbox.addModules(this.$ctx.find(".cm-tree")),this.$createMessage.html("")})}getProjectIcon(){let d=null;switch(di(".js-co-settings__select--project option:selected").attr("data-project_type")){case"ICONLIBRARY":d="icons";break;case"MEDIALIBRARY":d="image-library";break;case"DOCUMENTLIBRARY":d="document-library";break;case"TEXTLIBRARY":d="text-library";break;case"LOGOLIBRARY":d="logo";break;case"TEMPLATELIBRARY":d="templates";break;case"PATTERNLIBRARY":d="pattern-library";break;case"BRANDUPDATELIBRARY":d="rocket";break;default:d="projects";break}return d}setProject(d){this.project=d,this.isCurrentProject=this.mod.sandbox.getConfigParam("router").getUrlParam("project")==d,this.initFolders(d),this.query.setValue(""),this.query.changed(""),this.$ctx.find(".js-cm-setting-folderlist__move").attr("disabled","disabled")}createFolder(d){const _={name:d,parent:this.mod.sandbox.getConfigParam("router").getUrlParam("set"),color:"#EEEEEE"};return this.data.post(`/api/set/create/${this.project}`,_)}}var Vs=i(5181);class Re extends w.E{constructor(d,_,M){super(d,_,M)}elem(d){this.settings=new rn(this.$ctx.find(".js-cm-setting-frame__values"),this.mod.sandbox),this.top=this.settings.getElem(`${this.id}_top`),this.right=this.settings.getElem(`${this.id}_right`),this.bottom=this.settings.getElem(`${this.id}_bottom`),this.left=this.settings.getElem(`${this.id}_left`),this.readonly=this.$ctx.data("readonly"),this.fields=["top","right","bottom","left"];const _=function(){typeof this.changed=="function"&&this.changed(this.serialize(!0)[this.id]),d&&this.$ctx.trigger("submit")}.bind(this);this.top.changed=Vs.debounce(100,()=>_()),this.right.changed=Vs.debounce(100,()=>_()),this.bottom.changed=Vs.debounce(100,()=>_()),this.left.changed=Vs.debounce(100,()=>_())}setting(){this.elem(!0);const d=this.$ctx;this.validation(()=>this.saveFrame(),()=>{}),d.on("keydown",_=>{_.which===9&&(_.shiftKey&&Vs(_.target).is(this.top.$ctx.find(`#${this.id}_top`))?(_.preventDefault(),this.mod.prev(d)):!_.shiftKey&&Vs(_.target).is(this.left.$ctx.find(`#${this.id}_left`))&&(_.preventDefault(),this.mod.next(d)))})}saveFrame(){this.save().then(d=>{d.success&&typeof this.saved=="function"&&this.saved(d)})}getValue(){return{top:this.top.getValue()||0,right:this.right.getValue()||0,bottom:this.bottom.getValue()||0,left:this.left.getValue()||0}}serialize(){const d={};d[this.id]=this.getValue();let _=null;const M=this.$ctx.data("group");return M?_=this.createGroup({},M,d):_=d,_}enter(){this.mod.leave(this.$ctx)}leave(){super.leave()}setValue(d){const _=this.tpl.unit(d.top,!0);(_||_>-1)&&this.top.setValue(d.top);const M=this.tpl.unit(d.right,!0);(M||M>-1)&&this.right.setValue(d.right);const oe=this.tpl.unit(d.bottom,!0);(oe||oe>-1)&&this.bottom.setValue(d.bottom);const Se=this.tpl.unit(d.left,!0);(Se||Se>-1)&&this.left.setValue(d.left)}disableFields(d){for(let _=0,M=this.fields.length;_<M;_++){const oe=this.fields[_];d.includes(oe)?this[oe].setReadonly(!0):this[oe].setReadonly(!1)}}unfocus(){super.unfocus(),this.readonly||(this.$details.velocity("callout.pulse",{duration:300}),Vs(this.bottom).trigger("focus"))}}var et=i(5181);class yt extends w.E{constructor(d,_,M){super(d,_,M)}elem(){this.$ctx.on("change",".js-cm-setting-groups__checkbox input",d=>{et(d.target).is(":checked")?et(d.target).closest(".js-cm-setting-groups__checkbox").addClass("selected"):et(d.target).closest(".js-cm-setting-groups__checkbox").removeClass("selected"),this.isSetting&&this.save({val:et(d.target).val(),checked:et(d.target).is(":checked")}).then(_=>{_.success&&typeof this.saved=="function"&&this.saved(_)})}),this.$ctx.on("click",".js-cm-setting-groups__select",()=>{const d=this.$ctx.find(".js-cm-setting-groups__checkbox");et.each(d,(_,M)=>{et(M).addClass("selected"),et(M).find("input").attr("checked",!0)})})}setting(){this.elem(),this.$ctx.find(".js-cm-setting-groups__checkbox input").each((d,_)=>{et(_).is(":checked")&&et(_).closest(".js-cm-setting-groups__checkbox").addClass("selected")})}serialize(){const _=this.$ctx.find('input[type="checkbox"]:checked');return{group_ids:et.map(_,oe=>et(oe)[0].value)}}}var Ns=i(5181);class hn extends w.E{constructor(d,_,M){super(d,_,M)}elem(){}setting(){this.$ctx.on("click",".js-cm-setting-headersize__size",d=>{const _=Ns(d.currentTarget);this.$ctx.find(".js-cm-setting-headersize__size",this.$ctx).removeClass("state-selected"),_.addClass("state-selected"),this.save().then(M=>{M.success&&typeof this.saved=="function"&&this.saved(M)})})}enter(){this.mod.leave(this.$ctx)}leave(){super.leave()}serialize(){const d=this.$ctx,_={};_[this.id]=d.find(".js-cm-setting-headersize__size.state-selected").data("size");let M=null;const oe=d.data("group");return oe?M=this.createGroup({},oe,_):M=_,M}}class At extends w.E{constructor(d,_,M){super(d,_,M)}elem(){}serialize(){const d={};d[this.id]=this.$ctx.attr("value");let _=null;return this.$ctx.data("group")?(_={},_[this.$ctx.data("group")]=d):_=d,_}setValue(d){this.$ctx.attr("value",d)}}var Us=i(60435),as=i(5181);class Qn extends w.E{constructor(d,_,M){super(d,_,M)}elem(){this.settings=new rn(this.$ctx.find(".js-cm-setting-hotspot__values"),this.mod.sandbox),this.x=this.settings.getElem(`${this.id}_x`),this.y=this.settings.getElem(`${this.id}_y`),this.width=this.settings.getElem(`${this.id}_width`),this.height=this.settings.getElem(`${this.id}_height`),this.readonly=this.$ctx.data("readonly"),this.fields=["x","y","width","height"];const d=function(){this._updateAspectRatio(),typeof this.changed=="function"&&this.changed(this.serialize(!0)[this.id])}.bind(this);this.x.changed=as.debounce(100,()=>d()),this.y.changed=as.debounce(100,()=>d()),this.width.changed=as.debounce(100,()=>d()),this.height.changed=as.debounce(100,()=>d())}_updateAspectRatio(){if(this.$ctx.data("lockAspectRatio")){const d=this.id,_=this.serialize(!0),M=_[d].width,oe=_[d].height;if(this.widthBeforeChange!==M){const Se=M/this.ratio;this.setValue({width:M,height:Se},!0)}else if(this.heightBeforeChange!==oe){const Se=oe*this.ratio;this.setValue({width:Se,height:oe},!0)}this.widthBeforeChange=M,this.heightBeforeChange=oe}}setting(){this.elem(),this.validation(()=>{this._updateAspectRatio(),this.saveHotspot()},()=>{this.hideDetails().then(()=>{this.hideActions()}),this.mod.leave(this.$ctx)}),this.$ctx.on("keydown",d=>{this.active&&d.which===9&&as(d.target).is('button[type="reset"]')&&(d.preventDefault(),this.mod.next(this.$ctx))})}saveHotspot(){this.save().then(d=>{if(d.success){const _=this.serialize(!0)[this.id];this.$ctx.find(".js-cm-setting-hotspot__value").html((0,n.EY)(Us.W,{value:_})),this.width.$text.attr("value",_.width),this.height.$text.attr("value",_.height),this.x.$text.attr("value",_.x),this.y.$text.attr("value",_.y),typeof this.saved=="function"&&this.saved(d),this.showSuccess().then(()=>{this.hideDetails()}),this.mod.leave(this.$ctx)}})}serialize(d){const _={};_[this.id]={x:Math.round(parseFloat(this.x.getValue())),y:Math.round(parseFloat(this.y.getValue())),width:Math.round(parseFloat(this.width.getValue())),height:Math.round(parseFloat(this.height.getValue()))};let M=null;const oe=this.$ctx.data("group");return oe&&!d?M=this.createGroup({},oe,_):M=_,M}enter(){super.enter(),this.widthBeforeChange=parseInt(this.width.getValue(),10),this.heightBeforeChange=parseInt(this.height.getValue(),10),this.ratio=this.widthBeforeChange/this.heightBeforeChange,this.readonly?this.mod.leave(this.$ctx):this.showDetails().then(()=>{this.width.focus()})}leave(){super.leave()}setValue(d,_){d.x>-1?(d.x=Math.round(parseFloat(d.x)),this.x.setValue(d.x)):d.x=Math.round(parseFloat(this.x.getValue())),d.y>-1?(d.y=Math.round(parseFloat(d.y)),this.y.setValue(d.y)):d.y=Math.round(parseFloat(this.y.getValue())),d.width>-1?(d.width=Math.round(parseFloat(d.width)),this.width.setValue(d.width)):d.width=Math.round(parseFloat(this.width.getValue())),d.height>-1?(d.height=Math.round(parseFloat(d.height)),this.height.setValue(d.height)):d.height=Math.round(parseFloat(this.height.getValue())),_||this.$ctx.find(".js-cm-setting-hotspot__value").html((0,n.EY)(Us.W,{value:d}))}disableFields(d){for(let _=0,M=this.fields.length;_<M;_++){const oe=this.fields[_];d.includes(oe)?this[oe].setReadonly(!0):this[oe].setReadonly(!1)}}unfocus(){super.unfocus(),this.readonly||this.$details.velocity("callout.pulse",{duration:300})}}var wa=Object.defineProperty,na=Object.defineProperties,Xn=Object.getOwnPropertyDescriptors,Oi=Object.getOwnPropertySymbols,xi=Object.prototype.hasOwnProperty,ui=Object.prototype.propertyIsEnumerable,Ka=(N,d,_)=>d in N?wa(N,d,{enumerable:!0,configurable:!0,writable:!0,value:_}):N[d]=_,_o=(N,d)=>{for(var _ in d||(d={}))xi.call(d,_)&&Ka(N,_,d[_]);if(Oi)for(var _ of Oi(d))ui.call(d,_)&&Ka(N,_,d[_]);return N},no=(N,d)=>na(N,Xn(d));const xa=(0,h.I)(N=>(0,o.jsx)("div",{className:"cm-setting-image__crop js-cm-setting-image__crop",children:(0,o.jsx)("img",no(_o({className:"cm-setting-image__crop-image js-cm-setting-image__crop-image"},N.id?{"data-id":N.id}:{}),{src:N.original||""}))}));var ja=i(74819),aa=i(5181);class Ls extends w.E{static get REFERENCE_WIDTH(){return 800}static usesMigratedEndpoint(d){return[/\/api\/asset\/\d+\/preview/].some(M=>M.test(d))}constructor(d,_,M){super(d,_,M),this.$cropper=this.$ctx.find(".js-cm-setting-image__cropper"),this.$preview=this.$ctx.find(".js-cm-setting-image__image")}setting(){this.image_property=this.$ctx.data("imageProperty"),this.file_id=this.$ctx.data("fileId"),this.accept_only=!1,this.api_processing_payload=null,this.$ctx.data("accept")&&(this.accept_only=this.$ctx.data("accept").split(",").map(d=>`.${d}`).join(",")),this.acceptOnlyImages=this.$ctx.data("acceptOnlyImages"),this.maxFileSize=this.$ctx.dataAsNumber("maxFileSize"),this.$ctx.data("circle")&&this.$ctx.addClass("state-circle"),this.$ctx.find(".js-cm-setting-image__input").upload({accept:this.accept_only,acceptOnlyImages:this.acceptOnlyImages,dropZone:aa(".js-cm-setting-image__image-wrap",this.$ctx),fileType:this.$ctx.data("filetype"),add:(d,_)=>{const M=_.files.reduce((oe,Se)=>oe+=Se.size,0);!this.maxFileSize||M<this.maxFileSize?(this.$ctx.data("brand")>0&&(_.formData.brand_id=this.$ctx.data("brand")),this.$ctx.data("screen-id")>0&&(_.formData.screen_id=parseInt(this.$ctx.data("screen-id"))),this.$ctx.data("project")>0&&(_.formData.project_id=this.$ctx.data("project")),this.$ctx.data("dashboard")>0&&(_.formData.dashboard_id=this.$ctx.data("dashboard")),_.submit()):M>this.maxFileSize&&this.mod.fire("swal",{template:"block-upload-file-too-big",closeOnConfirm:!0})},done:(d,_)=>{if(_.result&&_.result[0]){const M=_.result[0].generic_url;this.api_processing_payload=_.result[0].payload||null,this.file_id=_.result[0].file_id||null,this.$ctx.find(".js-cm-setting-image__image").attr("data-original",M),this.renderDetails({id:_.result[0].id,original:M}),this.showDetails().then(()=>{this.mod.enter(this.$ctx),this.showCropper(!0),this.$ctx.find(".js-cm-setting__actions button[type=submit]").trigger("focus")})}}}),this.$ctx.on("submit",d=>{d.preventDefault(),this.showLoader(),this.save().then(_=>{_.success&&this.done(_)}).catch(()=>{this.$ctx.trigger("reset")})}).on("reset",()=>{this.mod.leave(this.$ctx)}),this.$ctx.on("click",".js-cm-setting-image__choose",d=>{d.stopPropagation(),typeof this.choose=="function"&&this.choose()}),this.$ctx.on("click",".js-cm-setting-image__upload",d=>{d.stopPropagation(),typeof this.upload=="function"&&this.upload()}),this.$ctx.on("click",".js-cm-setting-image__edit",d=>{d.stopPropagation();const _=aa(d.currentTarget),M=_.data("callbackUrl"),oe=_.data("asset");page(`/screens/${oe}/publishing?callback_url=${M}`)}),this.$ctx.on("click",".js-cm-setting-image__replace",()=>{var d;this.mod.fire("closeDropdown",this.$ctx.find(".js-cm-btn-dropdown__toggle"));const _=this.$ctx.find(".js-cm-setting-image__image");_.removeAttr("data-original"),_.removeClass("state-available"),(d=this.$cropImage)==null||d.removeAttr("data-id"),this.$ctx.find(".js-cm-setting-image__input").trigger("click.image"),this.mod.leave(this.$ctx)}),this.$ctx.on("click",".js-cm-setting-image__delete",d=>{if(typeof this.delete=="function"){d.stopPropagation();const oe=this.$ctx.data("id");this.delete(oe);return}this.mod.fire("closeDropdown",this.$ctx.find(".js-cm-btn-dropdown__toggle")),this.$ctx.find(".js-cm-setting-image__image").attr("src",this.$ctx.data("placeholder"));const _=this.serialize();_.file_id=null,this.showLoader();const M=this.$ctx.dataAsString("api");Ls.usesMigratedEndpoint(M)?this.data.delete(M).then(oe=>{oe.success&&this.done(oe)}):this.data.post(M,_).then(oe=>{oe.success&&this.done(oe)})}),this.$ctx.on("keydown",d=>{this.active&&d.which===9&&(d.shiftKey&&aa(d.target).is('button[type="submit"]')?(d.preventDefault(),this.mod.prev(this.$ctx)):aa(d.target).is('button[type="reset"]')&&(d.preventDefault(),this.mod.next(this.$ctx)))}),this.$preview.attr("tabindex")!=="-1"&&this.$preview.on("keydown",d=>{["Enter","Space"].includes(d.code)&&(d.preventDefault(),this.enter())})}renderDetails(d){this.$cropper.html((0,n.EY)(xa,{id:d.id,original:d.original.replace("{width}",Ls.REFERENCE_WIDTH)})),this.$cropImage=this.$ctx.find(".js-cm-setting-image__crop-image")}enter(){if(super.enter(),!this.$details.hasClass("state-open")){const d=this.$ctx.find(".js-cm-setting-image__image");d.hasClass("state-available")?(this.renderDetails({original:d.attr("data-original")}),this.showDetails().then(()=>{this.showCropper(),this.$ctx.find(".js-cm-setting__actions button[type=submit]").trigger("focus")})):(this.$ctx.find(".js-cm-setting-image__input").trigger("click.image"),this.mod.leave(this.$ctx))}}leave(){super.leave(),this.hideDetails().then(()=>{this.hideCropper(),this.hideActions()})}unfocus(){super.unfocus(),this.$details.velocity("callout.pulse",{duration:300}),this.$ctx.find(".js-cm-setting__actions button[type=submit]").trigger("focus")}serialize(){const d={},_=this.$ctx.find(".js-cm-setting-image__image").attr("src");d[this.id]=_!==this.$ctx.data("placeholder")?_:"",d.i18n=(0,ja.YZ)();let M=null;const oe=this.$ctx.data("group");return oe?M=this.createGroup({},oe,d):M=d,M}save(){const d={};d.i18n=(0,ja.YZ)();const _=this.$cropImage,M=_==null?void 0:_.cropper("getData"),oe=_==null?void 0:_.cropper("getImageData");if(d[this.id]=_.attr("src").replace(`width=${Ls.REFERENCE_WIDTH}`,"width={width}"),d[`${this.id}_crop`]=this.getSaveCropValues(M,oe),d[`${this.id}_isWorkspaceAsset`]=!1,this.$ctx.data("areaWidth",M.width),this.$ctx.data("areaHeight",M.height),this.$ctx.data("areaX",M.x),this.$ctx.data("areaY",M.y),this.cropperSettings){const _t=this.cropperSettings.serialize();d[`${this.id}_ratio`]=_t.ratio,this.$ctx.data("ratio",_t.ratio)}_!=null&&_.data("id")&&(d[`${this.id}_id`]=_.data("id")),this.$ctx.find(".js-cm-setting-image__data").each((_t,Ft)=>{const Rs=aa(Ft);d[Rs.attr("id")]=Rs.val()});let Se=null;const Ze=this.$ctx.data("group");Ze?Se=this.createGroup({},Ze,d):Se=d,this.api_processing_payload&&(Se.payload=this.api_processing_payload,this.api_processing_payload=null),this.file_id&&(Se.file_id=this.file_id);const Qe=this.$ctx.data("api");if(Qe){const _t=this.$ctx.data("method")||"post";return this.data[_t](Qe,Se)}else return Promise.resolve(aa.extend(!0,{},{success:!0},Se))}getSaveCropValues(d,_){return d.x=Math.max(0,d.x),d.y=Math.max(0,d.y),d.width=Math.max(0,d.width),d.height=Math.max(0,d.height),d.width=Math.min(_.naturalWidth,d.width),d.height=Math.min(_.naturalHeight,d.height),d.x=d.x<1?0:d.x,d.y=d.y<1?0:d.y,d.width=d.width<1?0:d.width,d.height=d.height<1?0:d.height,d.x===0&&d.y===0&&d.width===_.naturalWidth&&d.height===_.naturalHeight?null:{x:d.x,y:d.y,width:d.width,height:d.height,reference_width:_.naturalWidth}}showCropper(d=!1){var _,M;this.$loader=aa((0,n.EY)(ls.T)),(_=this.$cropImage)==null||_.before(this.$loader);let oe=this.getAspectRatio("custom");this.$ctx.data("ratio")&&(oe=this.$ctx.data("ratio")),this.cropperSettings&&this.cropperSettings.destroy(),this.cropperSettings=new rn(this.$ctx.find(".js-cm-setting-image__settings"),this.mod.sandbox);const Se=this.cropperSettings.getElem("ratio");aa.isEmptyObject(Se)||(Se.changed=Qe=>{var _t;(_t=this.$cropImage)==null||_t.cropper("setAspectRatio",this.getAspectRatio(Qe.ratio))},oe=this.getAspectRatio(Se.serialize().ratio));let Ze={};this.$ctx.data("disableCropping")&&(Ze={movable:!1,scalable:!1,rotatable:!1,zoomable:!1,cropBoxMovable:!1,cropBoxResizable:!1}),(M=this.$cropImage)==null||M.cropper(aa.extend(!0,{},{viewMode:1,aspectRatio:oe,autoCropArea:1,dragMode:"none",checkCrossOrigin:!1,cropBoxResizable:!0,cropBoxMoveable:!0,zoomOnWheel:!1,guides:!0,ready:()=>{var Qe,_t;if((Qe=this.$loader)==null||Qe.remove(),!d){const Ft=this.getCropBoxData();(_t=this.$cropImage)==null||_t.cropper("setCropBoxData",Ft)}}},Ze))}getCropBoxData(){var d;if(!this.$ctx.data("areaWidth"))return null;const _=(d=this.$cropImage)==null?void 0:d.cropper("getImageData"),M={width:this.$ctx.data("areaWidth"),height:this.$ctx.data("areaHeight"),x:this.$ctx.data("areaX"),y:this.$ctx.data("areaY")},oe=this.$cropper.height()||0,Se=this.$cropper.width()||0,Ze=_.width/_.naturalWidth,Qe={};Qe.width=M.width*Ze,Qe.height=M.height*Ze;let _t=0,Ft=0;return _.width>_.height?(_t=(oe-_.height)/2,Qe.top=_t+M.y*Ze,Qe.left=M.x*Ze):(Ft=(Se-_.width)/2,Qe.top=M.y*Ze,Qe.left=Ft+M.x*Ze),Qe.left=Math.ceil(Qe.left*1e4)/1e4,Qe.top=Math.ceil(Qe.top*1e4)/1e4,Qe.width=Math.floor(Qe.width*1e4)/1e4,Qe.height=Math.floor(Qe.height*1e4)/1e4,Qe}getAspectRatio(d){let _="";switch(d){case"original":{const M=parseInt(this.$ctx.data("areaWidth")),oe=parseInt(this.$ctx.data("areaHeight"));_=M/oe;break}case"16:9":_=16/9;break;case"4:3":_=4/3;break;case"square":_=1;break;case"custom":_=null;break;default:return}return _}hideCropper(){this.$loader&&this.$loader.remove(),this.$cropImage&&this.$cropImage.cropper("destroy")}setValue(d){d=d||this.$ctx.data("placeholder"),this.$ctx.find(".js-cm-setting-image__image").attr("src",d).removeClass("state-available")}done(d){var _;const M=this.$ctx.data("group");if(typeof this.saved=="function"&&this.saved(d),M){const Ze=(_t,Ft)=>{const Rs=Ft.split("."),ta=Rs.shift();return Rs.length>0?Ze(_t[ta],Rs.join(".")):_t[ta]},Qe=Ze(d,M);Qe&&(d=Qe)}const oe=this.$ctx.find(".js-cm-setting-image__image"),Se=d[this.image_property]||d[this.id]||((_=d==null?void 0:d.data)==null?void 0:_[this.image_property]);!Se||Se===this.$ctx.data("placeholder")?(this.image_property?d[this.image_property]=this.$ctx.data("placeholder"):d[this.id]=this.$ctx.data("placeholder"),d.placeholder=!0,oe.removeClass("state-available")):(d.placeholder=!1,oe.attr("src",Se).addClass("state-available")),this.showSuccess().then(()=>{this.mod.leave(this.$ctx)})}}var xn=i(75736),vo=i(9862),Ba=i(57915),kn=i(5181);class Oa extends w.E{constructor(d,_,M){super(d,_,M),this.$input=this.$ctx.find(".js-cm-setting__input"),this.$linkChooser=this.$ctx.find(".js-cm-setting__link-addons-item-linkchooser"),this.$templateChooser=this.$ctx.find(".js-cm-setting__link-addons-item-templatechooser")}elem(d){this.mod.sandbox.subscribe("events",this.mod),this.readonly=this.$ctx.data("readonly"),this.autofocus=this.$ctx.dataAsBoolean("autofocus"),this.portalId=this.$ctx.dataAsNumber("portalId"),this.isSetting=d||!1,this.bindLinkChooser(),this.bindInput(),(0,vo.R)("LINK_TEMPLATE_CHOOSER")&&this.bindTemplateChooser(),this.autofocus&&this.$input.focus()}bindInput(){this.$ctx.on("focusin",".js-cm-setting__bar",d=>{this.readonly||kn(d.currentTarget).addClass("state-active"),this.$input.select()}).on("focusout",".js-cm-setting__bar",d=>{this.readonly||kn(d.currentTarget).removeClass("state-active")})}bindTemplateChooser(){this.$templateChooser.on("click",()=>this.openTemplateChooser())}bindLinkChooser(){this.$linkChooser.on("click",()=>this.openLinkChooser())}setting(){this.elem(!0),this.$input.on("keyup",kn.debounce(800,()=>{this.save().then(d=>{d.success&&typeof this.saved=="function"&&this.saved(d)})})).on("keydown",d=>{d.which===13&&(d.preventDefault(),this.save().then(_=>{_.success&&typeof this.saved=="function"&&this.saved(_)}))})}autoSave(){this.$ctx.trigger("submit")}openLinkChooser(){const d=new Ba.R(this.mod.sandbox,this.getValue());d.saved=_=>{this.$input.val(_.url),this.isSetting?this.save().then(M=>{typeof this.saved=="function"&&this.saved(M)}):typeof this.changed=="function"&&this.changed(_)},d.open()}openTemplateChooser(){const d=(0,n.EY)(xn.N,{associatedBlockId:this.blockId,styleguideId:this.projectId,newPublication:!1});this.mod.fire("openModal",{modifier:"flex",$content:d},["events"])}onTemplateChooserTemplateChosen(d){console.log(d)}enter(){this.mod.leave(this.$ctx)}leave(){super.leave()}getValue(){const d={url:this.$input.val()};return this.portalId>0&&(d.hub=this.portalId),d}setReadonly(d){d?(this.readonly=!0,this.$input.prop("readonly","readonly")):(this.readonly=!1,this.$input.prop("readonly",!1))}serialize(){const d={};d[this.id]=this.getValue(),!/^\//.test(d[this.id].url)&&!/^(https?|frontify|sketch|msteams|aa):\/\/|^(mailto|tel):|^$/i.test(d[this.id].url)&&(d[this.id].url=`https://${d[this.id].url}`);let _=null;const M=this.$ctx.data("group");return M?_=this.createGroup({},M,d):_=d,_}}var ma=i(78484),Pn=i(4219),ao=i(64602),On=i(85620),en=i(26285),ia=i(79749),ki=i(8370),io=i(36970),Is=i(82209),qn=i(29430),zn=i(5410),Ji=i(74083),vn=i(70524),hi=i(39364),oo=i(83367),Bs=i(8753),ji=i(24033),sn=i(20214),Bn=i(58921),Ga=i(97822),_n=i(60525),Hn=i(92610),Si=i(56754),Sa=i(83147),Li=i(44318),ro=i(97866),lo=i(28147),ge=i(5181);class Q extends w.E{constructor(d,_,M){super(d,_,M),this.$add=_.find(".js-cm-setting-list__add-input"),this.$list=_.find(".js-cm-setting-list__items")}elem(d){const _=this.$ctx;this.settings=new rn(_,this.mod.sandbox),this.isSetting=d||!1,this.valueProperty=this.$ctx.data("valueProperty")||"value",this.items=_.data("items").items,this.additionalData=_.data("data")||{},this.$add.on("keydown",oe=>{if(oe.keyCode===13)return this.add(this.$add.val()),!1});const M=this.$list.get(0);if(!M)throw new Error("Element not found.");ma.Ay.create(M,{animation:100,handle:".js-cm-setting-list__move",draggable:".js-cm-setting-list__item",onSort:oe=>{if(oe.oldDraggableIndex!==oe.newDraggableIndex){const Se=this.items[oe.oldDraggableIndex];this.items.splice(oe.oldDraggableIndex,1),this.items.splice(oe.newDraggableIndex,0,Se),this.isSetting&&this.data.put(`${this.$ctx.data("api")}/position`,this.items)}}}),_.on("click",".js-cm-setting-list__remove",oe=>{oe.preventDefault();const Se=ge(oe.currentTarget),Ze=Se.closest(".js-cm-setting-list__item").dataAsString(this.valueProperty),Qe=Se.closest(".js-cm-setting-list__item").dataAsNumber("id");if(this.isSetting){let _t=this.$ctx.data("delete-api")||this.$ctx.data("api");_t&&(_t=`${_t}/${Qe||Ze}`,this.data.delete(_t).then(Rs=>{var ta;Rs.success?(this.items=this.items.filter(Fa=>Fa[this.valueProperty].toString()!==Ze),this.renderList(this.items)):typeof this.itemDeletionFailed=="function"&&this.itemDeletionFailed((ta=Rs.errors)!=null?ta:Rs.error)}))}else this.items=this.items.filter(_t=>_t[this.valueProperty].toString()!==Ze),this.renderList(this.items)}),_.on("click",".js-cm-setting-list__add",oe=>{oe.preventDefault(),this.renderAddForm(this.additionalData)}),_.on("clicked",".js-cm-setting-list__add-section",oe=>{oe.preventDefault(),this.renderAddForm(this.additionalData)}),_.on("keypress",".js-cm-setting-list__edit",oe=>{oe.key==="Enter"&&ge(oe.currentTarget).trigger("click")}),_.on("keypress",".js-cm-setting-list__remove",oe=>{oe.key==="Enter"&&ge(oe.currentTarget).trigger("click")}),_.on("click",".js-cm-setting-list__edit",oe=>{oe.preventDefault(),oe.stopPropagation();const Se=ge(oe.currentTarget).closest(".js-cm-setting-list__item").dataAsString(this.valueProperty),Ze=this.items.find(Ft=>Ft[this.valueProperty].toString()===Se),Qe=_.find(".js-cm-setting-list__form-container");this.$details=ge(this.getTemplateComponent(_.data("templateEdit"),{data:this.additionalData,item:Ze})),this.tpl.addAndActivate(Qe,this.$details);const _t=new rn(this.$details,this.mod.sandbox);typeof this.processEditSettings=="function"&&this.processEditSettings(_t),_t.validation(()=>{let Ft;if(typeof this.extendFormData=="function"?Ft=this.extendFormData(_t.serialize()):Ft=_t.serialize(),this.items=this.items.map(Rs=>Rs[this.valueProperty].toString()===Ze[this.valueProperty].toString()?Ft:Rs),this.isSetting){let Rs=_.data("api");if(Rs)Rs=`${Rs}/${Ft.id}`,this.data.put(Rs,Ft).then(ta=>{if(ta.success){const Fa=ta.savedEntry||ta.data||null;Fa!==null&&(this.items=this.items.map(yi=>parseInt(yi.id)===Fa.id?Fa:yi),typeof this.itemUpdated=="function"&&this.itemUpdated(Fa)),this.renderList(this.items),this.$details.remove()}});else return Promise.resolve(ge.extend(!0,{},{success:!0},Ft))}else this.renderList(this.items),this.$details.remove()},()=>{this.$details.remove()}),this.$details.addClass("state-open").velocity("fadeIn",{complete:()=>{_t.getFirstElem().getType()==="text"&&_t.getFirstElem().focus()}})}),_.on("click",".js-cm-setting-list__actions-item",oe=>{const Ze=ge(oe.currentTarget).dataAsString("itemProcessor");if(!Ze)throw new Error("Item processor name not defined:");const Qe=`process${Ze[0].toUpperCase()}${Ze.slice(1)}`;typeof this[Qe]=="function"&&(this.items=this[Qe](oe,this.items))}),_.on("click",".js-cm-setting-list__set-display",oe=>{const Se=ge(oe.currentTarget),Ze=Se.attr("value"),Qe=this.items.find(Ft=>Ft[this.valueProperty].toString()===Ze);Qe.display=Se.prop("checked");const _t=this.items.filter(Ft=>Ft.display===void 0?!0:Ft.display).length===1;this.renderList(this.items,_t)}),this.$add.on("focusout",()=>{this.unfocus()}),_.on("click",".js-cm-setting-list__details-delete",()=>{const oe=_.find(".js-cm-setting-list__details-delete-container"),Se=oe.dataAsString("value"),Ze=ge((0,n.EY)(l.H,{id:"delete_approval",type:"menu",label:oe.data("delete"),description:oe.data("delete-confirmation"),api:`/api/approvalrequestpreset/${Se}`,method:"delete"}));oe.html(Ze),oe.on("click",Ft=>{Ft.stopPropagation()});const _t=new rn(oe,this.mod.sandbox).getSetting("delete_approval");_t.deleted=Ft=>{Ft.success&&(this.items=this.items.filter(Rs=>Rs[this.valueProperty].toString()!==Se),this.renderList(this.items),typeof this.itemDeleted=="function"&&this.itemDeleted(Se),this.hideDetails())},_t.cancelled=()=>{this.mod.fire("closeDropdown",oe,["events"])}})}setting(){this.elem(!0)}getTemplateComponent(d,_){switch(d){case"facette-setting-list-tags-add":return(0,n.EY)(Bn.p,_);case"facette-setting-list-tags-edit":return(0,n.EY)(Ga.w,_);case"facette-setting-list-filetypes-add":return(0,n.EY)(ji.D,_);case"facette-setting-list-filetypes-edit":return(0,n.EY)(sn.O,_);case"facette-setting-list-conditions-add-edit":return(0,n.EY)(oo.i,_);case"facette-setting-list-conditions-list":return(0,n.EY)(Bs.x,_);case"c-settingsaccessrequest-setting-list-fields-add":return(0,n.EY)(ao.E,_);case"c-settingsaccessrequest-setting-list-edit":return(0,n.EY)(Pn.c,_);case"c-settings-approval-request-preset-list":return(0,n.EY)(en.s,_);case"c-settings-approval-request-preset-dialog":return(0,n.EY)(On.a,_);case"c-settings-approval-request-preset-wrap":return(0,n.EY)(ia.G,_);case"c-settings-library-usage-download-formbuilder-add":return(0,n.EY)(ki.h,_);case"c-settings-library-usage-download-formbuilder-edit":return(0,n.EY)(io.g,_);case"c-settingstextlibrary-setting-list-i18n-add":return(0,n.EY)(Ji.S,_);case"c-settingstextlibrary-setting-list-i18n-edit":return(0,n.EY)(vn.Z,_);case"c-settingstextlibrary-setting-list-i18n-list":return(0,n.EY)(hi.B,_);case"c-settingsproject-setting-list-licenses-add":return(0,n.EY)(Is.L,_);case"c-settingsproject-setting-list-licenses-edit":return(0,n.EY)(qn.U,_);case"c-settingsproject-setting-list-licenses-list":return(0,n.EY)(zn.K,_);case"c-setting-elem-list-list":return(0,n.EY)(x.J,_);case"c-setting-elem-list-list-display":return(0,n.EY)(Sa.N,_);case"c-setting-elem-list-list-default":return(0,n.EY)(Si.Q,_);case"c-setting-elem-list-wrap":return(0,n.EY)(Li.B,_);case"c-setting-elem-list-wrap-none":return(0,n.EY)(lo.P,_);case"c-setting-elem-list-wrap-default":return(0,n.EY)(ro.i,_);case"c-setting-elem-list-actions":return(0,n.EY)(_n.M,_);case"c-setting-elem-list-actions-conditional":return(0,n.EY)(Hn.u,_);default:return console.error(`Template ${d} not found.`),""}}add(d){if(d.length>0){const _=d.split(","),M=[];for(const oe of _)if(!this.items.find(Ze=>Ze[this.valueProperty].toString()===oe)){const Ze={default:!1};Ze[this.valueProperty]=ge.trim(oe),this.items.push(Ze),M.push(Ze[this.valueProperty])}if(this.$add.val(""),M.length>0&&this.isSetting){const oe=this.$ctx.data("api"),Se={};Se[this.id]=M,oe&&this.data.post(oe,Se)}this.renderList(this.items),this.scrollDown()}}renderAddForm(d){const _=this.$ctx;this.additionalData=ge.extend(!0,{},this.additionalData,d);const M=_.find(".js-cm-setting-list__form-container");this.$details.remove(),this.$details=ge(this.getTemplateComponent(_.data("templateAdd"),{data:this.additionalData})),this.tpl.addAndActivate(M,this.$details);const oe=new rn(this.$details,this.mod.sandbox);typeof this.processAddSettings=="function"&&this.processAddSettings(oe),oe.validation(()=>{let Se;if(typeof this.extendFormData=="function"?Se=this.extendFormData(oe.serialize()):Se=oe.serialize(),!Se[this.valueProperty]&&!this.isSetting&&(Se[this.valueProperty]=`${this.items.length+1}_${this.tpl.slug(Se.name)}`),this.isSetting){const Qe=_.data("api");Qe&&this.data.post(Qe,Se).then(_t=>{if(_t.success){const Ft=_t.savedEntry||_t.data;this.items.push(Ft),this.renderList(this.items),this.scrollDown(),this.isSetting&&typeof this.saved=="function"&&this.saved(Ft)}})}else this.items.push(Se),this.renderList(this.items),this.scrollDown();const Ze=this.items.find(Qe=>Qe[this.valueProperty]===Se[this.valueProperty]);this.$details.remove(),!Ze&&!this.isSetting&&(this.items.push(Se),this.renderList(this.items),this.scrollDown(),typeof this.itemAdded=="function"&&this.itemAdded(Se))},()=>{this.$details.remove()}),this.$details.addClass("state-open").velocity("fadeIn",{complete:()=>{oe.getFirstElem().getType()==="text"&&oe.getFirstElem().focus()}})}leave(){super.leave()}enter(){super.enter(),this.readonly||this.$add.focus(),this.mod.leave(this.$ctx)}focus(){this.readonly||this.$add.trigger("focus")}renderList(d,_){const M=this.getTemplateComponent(this.$ctx.data("templateList")||"c-setting-elem-list-list",{data:this.additionalData,items:d,isLast:_,label_none:this.$ctx.data("labelNone")});this.tpl.addAndActivate(this.$list,M)}serialize(d){const _=this.$ctx,M={};d?M[this.id]=d:M[this.id]=this.items;let oe;const Se=_.data("group");return Se?oe=this.createGroup({},Se,M):oe=M,oe}scrollDown(){const d=this.$list[0].scrollHeight;this.$list.scrollTop(d)}}var J=i(63817),we=i(5181);class it extends w.E{constructor(d,_,M){super(d,_,M)}elem(){this.settings=new rn(this.$ctx.find(".js-cm-setting-logo__values"),this.mod.sandbox),this.x=this.settings.getElem(`${this.id}_x`),this.y=this.settings.getElem(`${this.id}_y`),this.width=this.settings.getElem(`${this.id}_width`),this.height=this.settings.getElem(`${this.id}_height`),this.readonly=this.$ctx.data("readonly"),this.fields=["x","y","width","height"];const d=function(){this.$ctx.data("lockAspectRatio")&&this._updateAspectRatio(),typeof this.changed=="function"&&this.changed(this.serialize(!0)[this.id])}.bind(this);this.x.changed=we.debounce(100,()=>d()),this.y.changed=we.debounce(100,()=>d()),this.width.changed=we.debounce(100,()=>d()),this.height.changed=we.debounce(100,()=>d())}_updateAspectRatio(){const d=this.id,_=this.serialize(!0),M=_[d].width,oe=_[d].height;if(M==="auto"||oe==="auto")return!1;if(this.widthBeforeChange!==M){const Se=this.ratio===null?"auto":M/this.ratio;this.setValue({width:M,height:Se},!0)}else if(this.heightBeforeChange!==oe){const Se=this.ratio===null?"auto":oe*this.ratio;this.setValue({width:Se,height:oe},!0)}this.widthBeforeChange=M,this.heightBeforeChange=oe}setting(){this.elem(),this.validation(()=>{this._updateAspectRatio(),this.saveLogo()},()=>{this.mod.leave(this.$ctx)}),this.$ctx.on("keydown",d=>{this.active&&d.which===9&&we(d.target).is('button[type="reset"]')&&(d.preventDefault(),this.mod.next(this.$ctx))})}saveLogo(){const d=this.$ctx;this.save().then(_=>{if(_.success){const M=this.serialize(!0)[this.id];d.find(".js-cm-setting-logo__value").html((0,n.EY)(J._,{value:M})),this.width.$text.attr("value",M.width),this.height.$text.attr("value",M.height),this.x.$text.attr("value",M.x),this.y.$text.attr("value",M.y),typeof this.saved=="function"&&this.saved(_),this.showSuccess().then(()=>{this.mod.leave(d)})}})}serialize(d){const _=this.$ctx;let M=Math.round(parseFloat(this.width.getValue()));isNaN(this.width.getValue())&&(M=this.width.getValue());let oe=Math.round(parseFloat(this.height.getValue()));isNaN(this.height.getValue())&&(oe=this.height.getValue());const Se={};Se[this.id]={x:Math.round(parseFloat(this.x.getValue())),y:Math.round(parseFloat(this.y.getValue())),width:M,height:oe};let Ze=null;const Qe=_.data("group");return Qe&&!d?Ze=this.createGroup({},Qe,Se):Ze=Se,Ze}enter(){super.enter(),this.widthBeforeChange=parseInt(this.width.getValue(),10),this.heightBeforeChange=parseInt(this.height.getValue(),10),this.setRatio(this.widthBeforeChange,this.heightBeforeChange),this.readonly?this.mod.leave(this.$ctx):this.showDetails().then(()=>{this.width.focus()})}leave(){super.leave(),this.hideDetails().then(()=>{this.hideActions()})}setRatio(d,_){isNaN(d)||isNaN(_)?this.ratio=null:this.ratio=d/_}setValue(d,_){d.x>-1?(d.x=Math.round(parseFloat(d.x)),this.x.setValue(d.x)):d.x=Math.round(parseFloat(this.x.getValue())),d.y>-1?(d.y=Math.round(parseFloat(d.y)),this.y.setValue(d.y)):d.y=Math.round(parseFloat(this.y.getValue())),d.width>-1?(d.width=Math.round(parseFloat(d.width)),this.width.setValue(d.width)):d.width==="auto"?this.width.setValue("auto"):d.width=Math.round(parseFloat(this.width.getValue())),d.height>-1?(d.height=Math.round(parseFloat(d.height)),this.height.setValue(d.height)):d.height==="auto"?this.height.setValue("auto"):d.height=Math.round(parseFloat(this.height.getValue())),this.setRatio(d.width,d.height),_||this.$ctx.find(".js-cm-setting-logo__value").html((0,n.EY)(J._,{value:d}))}disableFields(d){for(let _=0,M=this.fields.length;_<M;_++){const oe=this.fields[_];d.includes(oe)?this[oe].setReadonly(!0):this[oe].setReadonly(!1)}}unfocus(){super.unfocus(),this.readonly||this.$details.velocity("callout.pulse",{duration:300})}}var Ds=i(5181);class jn extends w.E{constructor(d,_,M){super(d,_,M)}elem(){this.readonly=this.$ctx.data("readonly"),this.$ctx.on("click",".js-cm-setting-measure__type",d=>{if(!this.readonly){const _=Ds(d.currentTarget);this.$ctx.find(".js-cm-setting-measure__type").removeClass("state-selected"),_.addClass("state-selected");const M=_.data("type");typeof this.changed=="function"&&this.changed({type:M})}return!1})}setting(){this.elem(),this.readonly||this.$ctx.on("click",".js-cm-setting-measure__type",()=>{this.save().then(d=>{d.success&&typeof this.saved=="function"&&this.saved(d)})})}enter(){this.mod.leave(this.$ctx)}leave(){super.leave()}serialize(){const d={};d[this.id]=this.$ctx.find(".js-cm-setting-measure__type.state-selected").data("type");let _=null;return this.$ctx.data("group")&&!nogroup?(_={},_[this.$ctx.data("group")]=d):_=d,_}}var Cs=i(61055),Wt=i(59240),Mn=Object.defineProperty,Ha=Object.defineProperties,Ti=Object.getOwnPropertyDescriptors,Ci=Object.getOwnPropertySymbols,_a=Object.prototype.hasOwnProperty,Dn=Object.prototype.propertyIsEnumerable,ti=(N,d,_)=>d in N?Mn(N,d,{enumerable:!0,configurable:!0,writable:!0,value:_}):N[d]=_,Ta=(N,d)=>{for(var _ in d||(d={}))_a.call(d,_)&&ti(N,_,d[_]);if(Ci)for(var _ of Ci(d))Dn.call(d,_)&&ti(N,_,d[_]);return N},Ho=(N,d)=>Ha(N,Ti(d));const $o=(0,h.I)(N=>{var d,_,M,oe;return(0,o.jsxs)("div",{className:"cm-setting-multivalue__menu js-cm-setting-multivalue__menu",children:[(0,o.jsx)("h3",{className:"cm-setting-multivalue__menu-title",children:"Colors"}),((_=(d=N.settings)==null?void 0:d.allowed)==null?void 0:_.length)>0?(0,o.jsx)("ul",{className:"cm-setting-multivalue__palette-colors clearfix",children:(M=N.settings.allowed)==null?void 0:M.map(Se=>{let Ze=!1;return N.currentColorId?Ze=Se.id===N.currentColorId:Ze=Oe().equals(N.current,Se.css_value),(0,o.jsx)("li",Ho(Ta({"data-color-id":Se.id,"data-color":Se.css_value,className:` cm-setting-multivalue__palette-color ${Se.light?" state-light ":""} ${Ze?" state-active ":""} js-cm-setting-multivalue__palette-color`,style:{background:`${Se.css_value}`}},N.rerender?{"data-rerender":"true"}:{}),{children:(0,o.jsx)("i",{className:"ca-icon--lg ca-icon--check"})}),Se.id)})}):(0,o.jsxs)(o.Fragment,{children:[((oe=N.styleguides)==null?void 0:oe.length)>0?N.styleguides.length>1?(0,o.jsx)(Wt.U,{id:"styleguide_id",classes:"cm-setting__elem--noindent cm-setting-multivalue__palette-colors-dropdown",value:N.styleguides[0].value,options:N.styleguides}):null:(0,o.jsx)("div",{className:"co-settings__blank",children:"There is no styleguide defined yet."}),N.original&&!Oe().equals(N.current,N.original)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h4",{className:"cm-setting-multivalue__palette-title",children:"Original"}),(0,o.jsx)("ul",{className:"cm-setting-multivalue__palette-colors clearfix",children:(0,o.jsx)("li",Ho(Ta({"data-color":N.original,style:{background:`${N.original}`},className:` cm-setting-multivalue__palette-color js-cm-setting-multivalue__palette-color ${Oe().equals(N.current,N.original)?" state-active ":""}`},N.rerender?{"data-rerender":"true"}:{}),{children:(0,o.jsx)("i",{className:"ca-icon--lg ca-icon--check"})}))})]}):null,(0,o.jsx)("div",{className:"js-cm-setting-multivalue__palette-container"})]})]})}),Ca=(0,h.I)(N=>(0,o.jsxs)("div",{className:"cm-setting-multivalue__menu js-cm-setting-multivalue__menu",children:[(0,o.jsx)("h3",{className:"cm-setting-multivalue__menu-title",children:"Allowed colors"}),N.styleguides&&N.styleguides.length>0?N.styleguides.length>1?(0,o.jsx)(Wt.U,{id:"styleguide_define_id",stopCLickPropagation:!0,classes:"cm-setting__elem--noindent",value:N.styleguides[0].value,options:N.styleguides}):null:(0,o.jsx)("div",{className:"co-settings__blank",children:"There is no styleguide defined yet."}),(0,o.jsx)("div",{className:"js-cm-setting-multivalue__palette-container"})]}));var Sn=Object.defineProperty,oa=Object.defineProperties,bo=Object.getOwnPropertyDescriptors,Bi=Object.getOwnPropertySymbols,ar=Object.prototype.hasOwnProperty,co=Object.prototype.propertyIsEnumerable,Mi=(N,d,_)=>d in N?Sn(N,d,{enumerable:!0,configurable:!0,writable:!0,value:_}):N[d]=_,on=(N,d)=>{for(var _ in d||(d={}))ar.call(d,_)&&Mi(N,_,d[_]);if(Bi)for(var _ of Bi(d))co.call(d,_)&&Mi(N,_,d[_]);return N},No=(N,d)=>oa(N,bo(d));const bt=(0,h.I)(N=>{var d;return N.palettes.length>0?(d=N.palettes)==null?void 0:d.map(_=>{var M;return _.colors.length>0?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h4",{className:"cm-setting-multivalue__palette-title",children:_.name||"Palette"}),(0,o.jsx)("ul",{className:"cm-setting-multivalue__palette-colors clearfix",children:(M=_.colors)==null?void 0:M.map(oe=>{let Se=!1;return N.currentColorId?Se=oe.id===N.currentColorId:Se=Oe().equals(N.current,oe.css_value),(0,o.jsx)("li",No(on({"data-color-id":oe.id,"data-color":oe.css_value,style:{background:`${oe.css_value}`},className:`cm-setting-multivalue__palette-color js-cm-setting-multivalue__palette-color ${oe.light?" state-light ":""} ${Se?" state-active ":""}`},N.rerender?{"data-rerender":"true"}:{}),{children:(0,o.jsx)("i",{className:"ca-icon--lg ca-icon--check"})}),oe.id)})})]}):null}):(0,o.jsx)("div",{className:"co-settings__blank",children:"There are no color palettes defined yet."})}),Ma=(0,h.I)(N=>{var d,_,M;let oe=(_=(d=N.settings)==null?void 0:d.allowed)!=null?_:[];return N.palettes.length>0?(0,o.jsxs)(o.Fragment,{children:[(M=N.palettes)==null?void 0:M.map(Se=>{var Ze;return Se.colors.length>0?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h4",{className:"cm-setting-multivalue__palette-title",children:Se.name||"Palette"}),(0,o.jsx)("ul",{className:"cm-setting-multivalue__palette-colors clearfix",children:(Ze=Se.colors)==null?void 0:Ze.map(Qe=>{var _t,Ft;let Rs=!1,ta=!0;return(_t=N.settings)!=null&&_t.allowed&&(ta=!1,Rs=(Ft=N.settings)==null?void 0:Ft.allowed.find(Fa=>Fa.id?Fa.id===Qe.id:Fa.css_value===Qe.css_value),Rs&&(oe=oe.filter(Fa=>Fa.id?Fa.id===Qe.id:Fa.css_value===Qe.css_value))),(0,o.jsx)("li",{"data-color-id":Qe.id,"data-color":Qe.css_value,className:` cm-setting-multivalue__palette-color js-cm-setting-multivalue__palette-color-allow ${Qe.light?"state-light":""} ${Rs?"state-active":""} ${ta?"state-implicit":""}`,style:{background:`${Qe.css_value}`},children:(0,o.jsx)("i",{className:"ca-icon--lg ca-icon--check"})},`color-${Qe.id}`)})})]}):null}),oe.length>0?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h4",{className:"cm-setting-multivalue__palette-title",children:"Other active colors"}),(0,o.jsx)("ul",{className:"cm-setting-multivalue__palette-colors clearfix",children:oe==null?void 0:oe.map(Se=>(0,o.jsx)("li",{"data-color-id":Se.id,"data-color":Se.css_value,className:` cm-setting-multivalue__palette-color state-active js-cm-setting-multivalue__palette-color-allow ${Se.light?"state-light":""}`,style:{background:`${Se.css_value}`},children:(0,o.jsx)("i",{className:"ca-icon--lg ca-icon--check"})},`color-${Se.id}`))})]}):null]}):(0,o.jsx)("div",{className:"co-settings__blank",children:"There are no color palettes defined yet."})});var va=Object.defineProperty,ba=Object.defineProperties,ko=Object.getOwnPropertyDescriptors,uo=Object.getOwnPropertySymbols,Yo=Object.prototype.hasOwnProperty,Jo=Object.prototype.propertyIsEnumerable,yo=(N,d,_)=>d in N?va(N,d,{enumerable:!0,configurable:!0,writable:!0,value:_}):N[d]=_,si=(N,d)=>{for(var _ in d||(d={}))Yo.call(d,_)&&yo(N,_,d[_]);if(uo)for(var _ of uo(d))Jo.call(d,_)&&yo(N,_,d[_]);return N},Kn=(N,d)=>ba(N,ko(d));const Yn=(0,h.I)(N=>{var d;return(0,o.jsxs)("select",Kn(si(Kn(si(si({className:"js-cm-setting-multivalue__dropdown",tabIndex:-1},N.disabled?{disabled:!0}:{}),N.readonly?{readOnly:!0}:{}),{id:N.id,name:N.id,"data-template":N.template?N.template:"c-dropdown"}),N.ariaLabel?{"aria-label":N.ariaLabel}:{}),{children:[N.non_selection==!0?(0,o.jsx)("option",{value:"",className:"ignored"}):null,(d=N.options)==null?void 0:d.map((_,M)=>(0,o.jsx)("option",Kn(si(si({value:_.value},_.value==N.value?{selected:!0}:{}),_.data?N.tpl.renderDataAttributesAsObject(_.data):{}),{children:_.name}),M))]}))});var Ra=i(93898),Hs=i(88398),Ps=i(5181);class pi extends w.E{constructor(d,_,M){super(d,_,M)}setting(){this.connectedHubId=(0,Hs.PL)()?(0,Hs.PL)().connected_hub_id:null,this.popper=null,this.fonts=[],this.group=this.$ctx.data("group"),this.$ctx.on("focus",".js-cm-setting-multivalue__value",_=>{_.preventDefault(),_.stopPropagation()}),this.$ctx.on("click",".js-cm-setting-multivalue__lock",_=>{let M=!1;this.$ctx.find(".js-cm-setting-multivalue__lock-state").hasClass("state-locked")&&(M=!0),_.stopPropagation(),this.lock(!M).then(oe=>{typeof this.saved=="function"&&this.saved(oe,!0)})}),this.$ctx.on("input",".js-cm-setting-multivalue__value",Ps.debounce(1e3,_=>{_.preventDefault(),_.stopPropagation();const M=Ps(_.currentTarget);this.validateMinMaxValue(M),typeof this.changed=="function"&&this.changed(this.serialize());const oe=this.$ctx.find(".js-cm-setting-multivalue__range");oe&&oe.val(M.val()),!M.is("[readonly]")&&!M.is("[disabled]")&&this.save().then(Se=>{typeof this.saved=="function"&&this.saved(Se,M.data("rerender"))})})),this.$ctx.on("change",".js-cm-setting-multivalue__range",_=>{const M=Ps(_.currentTarget).data("model");M&&this.$ctx.find(`#${M}`)&&this.$ctx.find(`#${M}`).val(_.currentTarget.value).trigger("input")}),this.$ctx.on("click",".js-cm-setting-multivalue__color",_=>{const M=Ps(_.currentTarget);M.hasClass("state-readonly")||this.popper||(_.stopPropagation(),_.preventDefault(),this.data.get(`/api/brand/${(0,Ra.M)()}/projects`).then(oe=>{const Se=oe.data.styleguides;if(this.connectedHubId){const Qa=Se.findIndex(to=>to.hub_id==this.connectedHubId);Se.push(...Se.splice(0,Qa))}const Ze=Se.reduce((Qa,to)=>[...Qa,{value:to.id,name:to.name}],[]),Qe=Ze&&Ze.length>0&&Ze[0].value,_t=this.$ctx.data("isTemplate"),Ft=M.data("color"),Rs=M.data("color-id"),ta=M.data("original"),Fa=Qa=>{Qa&&this.data.get(`/api/color/library/${Qa}`).then(to=>{const Or=yi.find(".js-cm-setting-multivalue__palette-container"),fa=Ps((0,n.EY)(bt,{current:Ft,currentColorId:Rs,palettes:to.palettes,rerender:M.data("rerender")}));Or.html(fa)})},yi=Ps((0,n.EY)($o,{isTemplate:_t,current:Ft,currentColorId:Rs,original:ta,settings:M.data("settings")||{},rerender:M.data("rerender"),styleguides:Ze}));yi.data("trigger",M),this.$ctx.append(yi),Fa(Qe);const zo=new rn(yi,this.mod.sandbox).getElem("styleguide_id");zo.changed=()=>{const Qa=zo.serialize();Fa(Qa.styleguide_id)},this.openPopper(M,yi)}),this.data.get(`/api/brand/${(0,Ra.M)()}/projects`).then(oe=>{const Se=oe.data.styleguides;if(this.connectedHubId){const Qa=Se.findIndex(to=>to.hub_id==this.connectedHubId);Se.push(...Se.splice(0,Qa))}const Ze=Se.reduce((Qa,to)=>[...Qa,{value:to.id,name:to.name}],[]),Qe=Ze&&Ze.length>0&&Ze[0].value,_t=this.$ctx.data("isTemplate"),Ft=M.data("color"),Rs=M.data("color-id"),ta=M.data("original"),Fa=Qa=>{Qa&&this.data.get(`/api/color/library/${Qa}`).then(to=>{const Or=yi.find(".js-cm-setting-multivalue__palette-container"),fa=Ps((0,n.EY)(bt,{current:Ft,currentColorId:Rs,palettes:to.palettes,rerender:M.data("rerender")}));Or.html(fa)})},yi=Ps((0,n.EY)($o,{isTemplate:_t,current:Ft,currentColorId:Rs,original:ta,settings:M.data("settings")||{},rerender:M.data("rerender"),styleguides:Ze}));yi.data("trigger",M),this.$ctx.append(yi),Fa(Qe);const zo=new rn(yi,this.mod.sandbox).getElem("styleguide_id");zo.changed=()=>{const Qa=zo.serialize();Fa(Qa.styleguide_id)},this.openPopper(M,yi)}))}),this.$ctx.on("click",".js-cm-setting-multivalue__palette-color",_=>{const M=Ps(_.currentTarget),oe=M.data("color"),Se=M.data("colorId");if(oe){const Ze=M.closest(".js-cm-setting-multivalue__menu").data("trigger");this.updateColorPreview(Ze,oe,Se),this.closePopper(),this.save().then(Qe=>{typeof this.saved=="function"&&this.saved(Qe,M.data("rerender"))})}}),this.$ctx.on("click",".js-cm-setting-multivalue__ruleset-colors",_=>{if(this.popper)return;const M=Ps(_.currentTarget);_.stopPropagation(),_.preventDefault(),this.data.get(`/api/brand/${(0,Ra.M)()}/projects`).then(oe=>{const Se=oe.data.styleguides.reduce((mo,zo)=>[...mo,{value:zo.id,name:zo.name}],[]),Ze=Se&&Se.length>0&&Se[0].value,Qe=this.$ctx.data("isTemplate"),_t=M.data("color"),Ft=M.data("original"),Rs=mo=>{mo&&this.data.get(`/api/color/library/${mo}`).then(zo=>{const Qa=ta.find(".js-cm-setting-multivalue__palette-container"),to=Ps((0,n.EY)(Ma,{current:_t,palettes:zo.palettes,rerender:M.data("rerender"),settings:M.data("settings")||{}}));Qa.html(to)})},ta=Ps((0,n.EY)(Ca,{isTemplate:Qe,current:_t,original:Ft,settings:M.data("settings")||{},rerender:M.data("rerender"),styleguides:Se}));ta.data("trigger",M),this.$ctx.append(ta),Rs(Ze);const yi=new rn(ta,this.mod.sandbox).getElem("styleguide_define_id");yi.changed=()=>{const mo=yi.serialize();Rs(mo.styleguide_define_id)},this.openPopper(M,ta)})}),this.$ctx.on("click",".js-cm-setting-multivalue__palette-color-allow",_=>{_.stopPropagation(),_.preventDefault();const M=Ps(_.currentTarget);M.toggleClass("state-active");const oe=M.closest(".js-cm-setting-multivalue__menu").find(".js-cm-setting-multivalue__palette-color-allow"),Se=[];oe.each((Qe,_t)=>{const Ft=Ps(_t);Ft.hasClass("state-active")&&Se.push({id:Ft.data("color-id"),css_value:Ft.data("color"),light:Ft.hasClass("state-light")})}),Se.length>0?oe.removeClass("state-implicit"):oe.addClass("state-implicit");const Ze={};Ze[this.id]={color:{allowed:Se}},this.save({settings:Ze}).then(Qe=>{this.setPreviewColor(Ze),typeof this.saved=="function"&&this.saved(Qe)})}),this.$ctx.on("click",".js-cm-setting-multivalue__chooser-type",_=>{const M=Ps(_.currentTarget),oe=M.closest(".js-cm-setting-multivalue__chooser");oe.data("multiple")||oe.find(".js-cm-setting-multivalue__chooser-type").removeClass("state-selected"),M.addClass("state-selected"),this.save().then(Ze=>{typeof this.saved=="function"&&this.saved(Ze,M.data("rerender"))})}),this.$ctx.on("click",".js-cm-setting-multivalue__toggle",_=>{const M=Ps(_.currentTarget);this.save().then(oe=>{typeof this.saved=="function"&&this.saved(oe,M.data("rerender"))})});const d=this.$ctx.find(".js-cm-setting-multivalue__fontfamily");d.length>0&&(this.fonts=d.data("fonts"),this.renderFonts(d.data("value"))),this.setPreviewColor()}enter(){this.mod.leave(this.$ctx)}leave(){super.leave()}serialize(d){const _={};this.$ctx.find(".js-cm-setting-multivalue__value").each((oe,Se)=>{const Ze=Ps(Se);let Qe=Ze.val();const _t=Ze.data("settings");_t&&_t.min&&(Qe=Math.max(Qe,_t.min),Ze.val(Qe)),_t&&_t.max&&(Qe=Math.min(Qe,_t.max),Ze.val(Qe)),Ze.is('[data-type="alpha"]')||(_[Ze.attr("id")]=Qe)}),this.$ctx.find(".js-cm-setting-multivalue__color").each((oe,Se)=>{const Ze=Ps(Se);let Qe=Ze.data("color");const _t=Ze.data("original"),Ft=Ze.attr("data-color-id"),Rs=this.$ctx.find('.js-cm-setting-multivalue__value[data-type="alpha"]');Rs.length>0&&(Qe=Oe()(Qe).setAlpha(Number(Rs.val())).toRgbString(),this.updateColorPreview(Ze,Qe,Ft)),_[Ze.data("id")]={original:_t,rgb:Qe,id:Ft==="undefined"?null:Ft}}),this.$ctx.find(".js-cm-setting-multivalue__chooser-type.state-selected").each((oe,Se)=>{const Ze=Ps(Se);_[Ze.data("id")]=Ze.data("value")}),this.$ctx.find("select").each((oe,Se)=>{const Ze=Ps(Se);if(Ze.attr("id")==="fontWeight"){const _t=Ze.val();_.fontFamily=_t}}),this.$ctx.find(".js-cm-setting-multivalue__toggle").each((oe,Se)=>{const Ze=Ps(Se);_[Ze.attr("id")]=Ze.is(":checked")});let M=null;return this.group&&!d?M=this.createGroup({},this.group,_):M=_,M}updateColorPreview(d,_,M){d.data("original")||d.data("original",d.data("color")),d.data("color",_),M?d.attr("data-color-id",M):d.removeAttr("data-color-id"),d.find(".js-cm-setting-multivalue__color-preview").css("backgroundColor",_);const oe=this.$ctx.find('.js-cm-setting-multivalue__value[data-type="alpha"]');oe.length>0&&oe.val(Oe()(_).getAlpha())}lock(d){const _={};return _[this.id]={locked:d},this.save({settings:_})}renderFonts(d){const _=this.$ctx.find(".js-cm-setting-multivalue__fontfamily"),M=this.$ctx.find(".js-cm-setting-multivalue__fontweight"),oe=this.fonts.map(Qe=>{let _t={style:`font-family: '${Qe.family}'`,missing:Qe.missing};return Qe.name_exact&&(_t={style:`font-family: '${Qe.weights[0].font_id}'`,missing:Qe.missing}),{value:Qe.family,name:Qe.name,data:_t}}),Se=this.fonts.find(Qe=>Qe.weights.find(_t=>_t.font_id===d))||{name:"",pseudo:!0,weights:[]};_.html((0,n.EY)(Yn,{id:_.data("id"),options:oe,value:Se.family,non_selection:Se.pseudo,template:"c-dropdown-typeface",ariaLabel:window.translate("Legacy_publisher_setting_typeface_family_aria"),templateReact:Cs.TplCDropdownTypeface}));const Ze=Se.weights.map(Qe=>{let _t="";Qe.weight=Qe.weight||"normal",Se.name_exact?_t="Normal":Qe.weight==="normal"&&Qe.style==="normal"?_t="Regular":Qe.weight==="normal"?_t=b()(Qe.style):Qe.style==="normal"?_t=b()(Qe.weight):_t=`${b()(Qe.weight)} ${b()(Qe.style)}`;let Ft={style:`font-family: '${Se.family}'; font-weight: ${Qe.weight}; font-style:${Qe.style};`,missing:Qe.missing};return Se.name_exact&&(Ft={style:`font-family: '${Qe.font_id}'`,missing:Qe.missing}),{value:Qe.font_id,name:_t,data:Ft}});M.html((0,n.EY)(Yn,{id:M.data("id"),options:Ze,non_selection:Se.pseudo,disabled:Se.pseudo,template:"c-dropdown-typeface",templateReact:Cs.TplCDropdownTypeface,value:d,ariaLabel:window.translate("Legacy_publisher_setting_typeface_weight_aria")})),this.$dropdownFontFamily=_.find(".js-cm-setting-multivalue__dropdown"),this.$dropdownFontFamily.on("click",Qe=>{Qe.stopPropagation()}),this.$dropdownFontFamily.dropdown({changed:function(Qe){const _t=this.fonts.find(Ft=>Qe.value===Ft.family).weights[0].font_id;this.renderFonts(_t),this.save().then(Ft=>{typeof this.saved=="function"&&this.saved(Ft)})}.bind(this)}),this.$dropdownFontWeight=M.find(".js-cm-setting-multivalue__dropdown"),this.$dropdownFontWeight.on("click",Qe=>{Qe.stopPropagation()}),this.$dropdownFontWeight.dropdown({changed:function(){this.save().then(Qe=>{typeof this.saved=="function"&&this.saved(Qe)})}.bind(this)})}openPopper(d,_,M){const oe={placement:"bottom-end",modifiers:[{name:"offset",options:{offset:[0,10]}}]};M=Ps.extend(!0,{},oe,M),this.closePopper();const Se=d.get(0),Ze=_.get(0);if(!Ze||!Se)throw new Error("Element not found.");this.popper=(0,re.n4)(Se,Ze,M),Ps("body").on("click.multivalue",Qe=>{Ps(Qe.target).parents(".js-cm-setting-multivalue__menu").length>0||this.popper&&(this.closePopper(),Ps("body").off("click.multivalue"))})}closePopper(){this.popper&&(this.popper.state.elements.popper.remove(),this.popper.destroy(),this.popper=null)}setPreviewColor(d){const _=this.$ctx.find(".js-cm-setting-multivalue__ruleset-colors"),M=_.find(".js-cm-setting-multivalue__color-preview");let oe="transparent";if(_.length>0&&M.length>0){if(d||(d={},d[this.id]={color:Ps(_[0]).data("settings")}),d[this.id]&&d[this.id].color&&d[this.id].color.allowed){const Se=d[this.id].color.allowed;Se.length>0&&(oe=`linear-gradient(90deg, ${Se.map((Qe,_t)=>{let Ft=`${Qe.css_value} ${100/Se.length*_t}%, `;return Ft=`${Ft+Qe.css_value} ${100/Se.length*(_t+1)}%`,Ft}).join(", ")})`,Ps(_[0]).data("settings",{allowed:Se}))}Ps(M[0]).css("background",oe)}}validateMinMaxValue(d){const _=parseInt(d.val()),M=d.dataAsNumber("minValue"),oe=d.dataAsNumber("maxValue");M&&M>_&&d.val(M),oe&&oe<_&&d.val(oe)}}var Ri=i(5181);class ra extends w.E{constructor(d,_,M){super(d,_,M)}setting(){this.settings=new rn(this.$ctx,this.mod.sandbox),this.currentPassword=this.settings.getElem("password"),this.validation(()=>{this.savePassword()},()=>{this.hideDetails().then(()=>{this.hideActions()}),this.mod.leave(this.$ctx)}),this.$ctx.on("keydown",d=>{this.active&&d.which===9&&(d.shiftKey&&Ri(d.target).is('input[name="password"]')?(d.preventDefault(),this.mod.prev(this.$ctx)):Ri(d.target).is('button[type="reset"]')&&(d.preventDefault(),this.mod.next(this.$ctx)))})}savePassword(){this.save().then(d=>{var _;d.success?(this.showSuccess().then(()=>{this.hideDetails().then(()=>{this.hideActions()})}),this.$ctx.trigger("reset"),this.mod.leave(this.$ctx)):d.error?(this.showErrors({password:d.error}),this.currentPassword.setValue("")):(_=d.error_types)!=null&&_.length&&this.showErrors({password_new:d.error_types[0].message})})}serialize(){const d={password:this.$ctx.find("#password").val(),password_new:this.$ctx.find("#password_new").val()};let _=null;return this.$ctx.data("group")&&!nogroup?(_={},_[this.$ctx.data("group")]=d):_=d,_}enter(){super.enter(),this.showDetails().then(()=>{this.$ctx.find("#password").trigger("focus")})}unfocus(){super.unfocus(),this.$details.velocity("callout.pulse",{duration:300}),this.$ctx.find("#password").trigger("focus")}}var ni=i(5181);class wo extends w.E{constructor(d,_,M){super(d,_,M),this.$role=_.find(`#${this.id}`)}elem(){const d=function(){typeof this.changed=="function"&&this.changed(this.serialize())}.bind(this);this.$role.on("change",ni.debounce(100,()=>{d()}))}serialize(){const d=this.$ctx,_={};_[this.id]=this.$role.val();let M=null;return d.data("group")&&!nogroup?(M={},M[d.data("group")]=_):M=_,M}}var Ya=i(5181);class xo extends w.E{constructor(d,_,M){super(d,_,M)}elem(){const d=this.$ctx;this.readonly=d.data("readonly"),d.on("click",".js-cm-setting-position__item",_=>{const M=Ya(_.currentTarget);return!this.readonly&&!M.hasClass("state-selected")&&(d.find(".js-cm-setting-position__item").removeClass("state-selected"),M.addClass("state-selected"),typeof this.changed=="function"&&this.changed(this.serialize())),!1})}setting(){const d=this.$ctx;this.elem(),d.on("click",".js-cm-setting-position__item",()=>{this.readonly||this.save().then(_=>{_.success&&typeof this.saved=="function"&&this.saved(_)})}),d.on("keydown",_=>{_.which===9&&(_.shiftKey&&Ya(_.target).is(d.find(".js-cm-setting-position__item:first-child"))?(_.preventDefault(),this.mod.prev(d)):!_.shiftKey&&Ya(_.target).is(d.find(".js-cm-setting-position__item:last-child"))&&(_.preventDefault(),this.mod.next(d)))})}enter(){const d=this.$ctx;d.find(".js-cm-setting-position__item:first-child").trigger("focus"),this.mod.leave(d)}leave(){super.leave()}serialize(){const d=this.$ctx,_=Ya.extend(!0,{},d.find(".js-cm-setting-position__item.state-selected").data());let M=null;return d.data("group")?(M={},M[d.data("group")]=_):M=_,M}}var Aa=i(5181);class Lo extends w.E{constructor(d,_,M){super(d,_,M),this.$items=_.find(".js-cm-setting-checkbox__input, .js-cm-setting-radio__input")}elem(d){var _;const M=this.$ctx;this.min=(_=M.data("min"))!=null?_:0;const oe=M.data("max");this.id=this.$ctx.data("id"),this.buttonsEnabled=this.$ctx.data("buttons-enabled"),this.saveSingle=this.$ctx.dataAsBoolean("saveSingle"),this.enableChangedHook=this.$ctx.dataAsBoolean("enableChangedHook"),this.valueIsNumber=this.$ctx.dataAsBoolean("valueIsNumber"),this.mod.sandbox.subscribe("events",this.mod),this.min&&this.$items.filter(":checked").length<=this.min&&this.disableAllChecked(),M.on("click",".js-cm-setting-checkbox__input, .js-cm-setting-radio__input",Se=>{let Ze=0;if(this.$items.each((Qe,_t)=>{Aa(_t).prop("checked")&&Ze++}),this.$items.each((Qe,_t)=>{Aa(_t).prop("disabled",!1)}),this.buttonsEnabled&&this.$items.each((Qe,_t)=>{const Ft=Aa(_t).prop("checked"),Rs=Aa(_t).closest(".js-cm-setting__radio-button");Ft?(Rs.removeClass("cm-btn--grey"),Rs.addClass("cm-btn--primary")):(Rs.removeClass("cm-btn--primary"),Rs.addClass("cm-btn--grey"))}),this.min&&Ze<=this.min?this.disableAllChecked():oe&&Ze>=oe&&this.$items.each((Qe,_t)=>{const Ft=Aa(_t);Ft.prop("checked")||Ft.prop("disabled",!0)}),Aa(Se.currentTarget).removeAttr("data-indeterminate"),!d||this.enableChangedHook)typeof this.changed=="function"&&this.changed(this.serialize(),M.data("payload"));else if(d&&this.saveSingle){if(typeof this.singleChanged=="function"){const Qe=Aa(Se.currentTarget);this.singleChanged({checked:Qe.is(":checked"),name:Qe.attr("name"),value:Qe.attr("value")},M.data("payload"))}}else this.save().then(Qe=>{Qe.success&&typeof this.saved=="function"&&this.saved(Qe,M.data("payload"))})})}checkAll(){this.$ctx.find(".js-cm-setting-checkbox__input").each((d,_)=>{Aa(_).prop("checked",!0)})}uncheckAll(){this.$ctx.find(".js-cm-setting-checkbox__input:checked").each((d,_)=>{this.min&&d+1<=this.min||Aa(_).prop("checked",!1)}),this.min&&this.$items.filter(":checked").length<=this.min&&this.disableAllChecked()}disableAll(){this.$ctx.find(".js-cm-setting-checkbox__input").prop("disabled",!0),this.$ctx.find(".js-ca-checkbox__label").addClass("ca-checkbox__label--disabled")}enableAll(){this.$ctx.find(".js-cm-setting-checkbox__input").removeAttr("disabled"),this.$ctx.find(".js-ca-checkbox__label").removeClass("ca-checkbox__label--disabled")}setPropByOptionValue(d,_,M){this.$ctx.find(`.js-cm-setting-checkbox__input[value="${M}"]`).prop(d,_)}setting(){this.elem(!0)}enter(){const d=this.$ctx;d.find(".js-cm-setting-checkbox__input:eq(0)").trigger("focus"),this.mod.leave(d)}leave(){super.leave()}serialize(){const d=this.$ctx,_={},M=d.find(".js-cm-setting-checkbox__input:checked"),oe=d.find(".js-cm-setting-radio__input:checked");M.length>0&&M.each((Qe,_t)=>{const Ft=Aa(_t),Rs=Ft.attr("name");_[Rs]||(_[Rs]=[]);const ta=this.valueIsNumber?parseInt(Ft.attr("value")):Ft.attr("value");_[Rs].push(ta)}),oe.length>0&&oe.each((Qe,_t)=>{const Ft=Aa(_t),Rs=Ft.attr("name");_[Rs]=Ft.attr("value"),_[Rs].toLowerCase()==="null"&&(_[Rs]=null)});let Se=null;const Ze=d.data("group");return Ze?Se=this.createGroup({},Ze,_):Se=_,Se}disableAllChecked(){this.$items.each((d,_)=>{const M=Aa(_);M.prop("checked")&&M.prop("disabled",!0)})}countChecked(){return this.$items.filter(" :checked").length}checkedAll(){return this.$items.filter(" :not(:checked)").length===0}checkedMoreThanMin(){return this.$items.filter(" :checked").length>this.min}getId(){return this.id}}var Da=i(5181);class Ys extends w.E{constructor(d,_,M){super(d,_,M)}elem(d){const _=this.$ctx;_.on("click",".js-cm-setting-ratio__ratio",M=>{_.find(".js-cm-setting-ratio__ratio").removeClass("state-active"),Da(M.currentTarget).addClass("state-active")}),d||_.on("click",".js-cm-setting-ratio__ratio",()=>{typeof this.changed=="function"&&this.changed(this.serialize())})}setting(){const d=this.$ctx;this.elem(!0),d.on("click",".js-cm-setting-ratio__ratio",()=>{this.save().then(_=>{_.success&&typeof this.saved=="function"&&this.saved(_)})})}enter(){const d=this.$ctx;this.mod.leave(d)}leave(){super.leave()}serialize(){const d=this.$ctx,_={};_[this.id]=d.find(".js-cm-setting-ratio__ratio.state-active").data("ratio");let M=null;return d.data("group")?(M={},M[d.data("group")]=_):M=_,M}}var jo=i(20610),Bo=i(23847);class Ai extends w.E{constructor(d,_,M){super(d,_,M),this.$editor=this.$ctx.find(".js-cm-setting__richtext-editor")}elem(){this.initialValue=this.$ctx.data("value"),(0,jo.A)(this.$editor),this.bindEditor()}setting(){this.elem(),this.$ctx.on("keydown",d=>{this.active&&d.which===9&&(d.preventDefault(),this.$ctx.trigger("submit"),d.shiftKey?this.mod.prev(this.$ctx):this.mod.next(this.$ctx))}),this.validation(()=>{this.saveContent()},()=>{this.editor.setContent(this.initialValue),this.mod.leave(this.$ctx)})}saveContent(){this.save().then(d=>{typeof this.saved=="function"&&this.saved(d),d.success?(this.initialValue=this.getValue(),this.mod.leave(this.$ctx),this.showSuccess()):d.errors&&this.showErrors(d.errors)})}enter(){super.enter(),this.readonly?this.mod.leave(this.$ctx):(this.showActions(),this.editor.focus())}leave(){super.leave(),this.readonly||this.hideActions()}focus(){return this.isSetting?this.enter():this.editor.focus(),this}unfocus(d){super.unfocus(),this.readonly||(this.mod.leave(this.$ctx),this.mod.enter(d))}getValue(){return this.editor.getContentAsHtml()}bindEditor(){this.editor=new Bo.j(this.$editor,this.mod.sandbox,{placeholder:this.$ctx.data("placeholder"),toolbar:this.$ctx.data("toolbar"),style:this.$ctx.data("style")||"inline",set:this.$ctx.data("set")}),this.editor.leave=()=>{this.save().then(d=>{typeof this.saved=="function"&&this.saved(d)})},this.editor.enable()}serialize(){return{[this.id]:this.getValue()}}}var Ii=i(42505),Ui=i.n(Ii),la=i(51728),Zo=i(69086),Zi=i(42735),Ua=i(35914),Fi=i(96838),Di=i(68864),Ja=i(24735),Vi=i(66847),mi=i(60067),Co=i(96604),Mo=i(15143),Ro=i(89354),$i=i(24073),$a=i(53557),ir=i(16021);const Io=(0,h.I)(N=>(0,o.jsxs)("form",{className:"js-cm-setting-search__create-form",children:[(0,o.jsx)("div",{className:"cm-setting-search__create-form-fields",children:typeof N.template=="function"?(0,o.jsx)(N.template,{}):null}),(0,o.jsx)(ir.h,{})]}));var gi=i(5181);class ca extends w.E{constructor(d,_,M){super(d,_,M),this.$text=_.find(".js-cm-setting-search__input"),this.$preview=_.find(".js-cm-setting-search__preview"),this.$chooser=_.find(".js-cm-setting-search__chooser"),this.$value=_.find(".js-cm-setting-search__value"),this.$currentSelection=null,this.$create=null}getTemplateComponent(d,_){switch(d){case"appearance-font-search-item":return(0,n.EY)(Di.r,_);case"appearance-font-search-content":return(0,n.EY)(Fi.N,_);case"layermodule-search-item":return(0,n.EY)($a.z,_);case"layermodule-search-content":return(0,n.EY)($i.t,_);case"layercolor-search-item":return(0,n.EY)(Vi.i,_);case"layercolor-search-content":return(0,n.EY)(Ja.m,_);case"layerinteraction-search-item":return(0,n.EY)(mi.P,_);case"layerinteraction-search-template-item":return(0,n.EY)(Ro.$,_);case"layerinteraction-search-template-content":return(0,n.EY)(Co.r,_);case"layerinteraction-search-template-create":return(0,n.EY)(Mo.A,_);case"c-createproject-search-project-template":return(0,n.EY)(la.g,_);case"c-createproject-search-project-template-item":return(0,n.EY)(Zo.n,_);case"c-settingstextlibrary-setting-list-i18n-search-content":return(0,n.EY)(Zi.M,_);case"c-settingstextlibrary-setting-list-i18n-search-item":return(0,n.EY)(Ua.k,_);default:return console.error(`Template ${d} not found, fallback to default rendering.`),""}}getTemplate(d){switch(d){case"appearance-font-search-item":return Di.r;case"appearance-font-search-content":return Fi.N;case"layermodule-search-item":return $a.z;case"layermodule-search-content":return $i.t;case"layercolor-search-item":return Vi.i;case"layercolor-search-content":return Ja.m;case"layerinteraction-search-item":return mi.P;case"layerinteraction-search-template-item":return Ro.$;case"layerinteraction-search-template-content":return Co.r;case"layerinteraction-search-template-create":return Mo.A;default:return console.error(`Template ${d} not found.`),()=>null}}elem(){const d=this.$ctx;this.settings=null,this.readonly=d.data("readonly"),this.clearSearch=d.data("clearSearch"),this.apiSearch=d.data("api-search")===!0,this.apiSearchResults={},this.apiSearchCurrentInput=void 0,this.apiCurrentResults=[],this.searchItems=d.find(".js-cm-setting-search__items"),this.itemTemplate=d.data("template-item")||!1,this.keySelectedResult=null,this.initialize(),this.$value.val(this.$preview.find(".js-cm-setting-search__item").data("value")),d.on("focusin",".js-cm-setting__bar",_=>{gi(_.currentTarget).addClass("state-active")}).on("focusout",".js-cm-setting__bar",_=>{gi(_.currentTarget).removeClass("state-active")}),this.$chooser.on("click",".js-cm-setting-search__item",_=>{_.stopPropagation();const M=gi(_.currentTarget);this.$currentSelection=M,this.$value.val(M.data("value"));const oe=M.data();!this.readonly&&typeof this.itemSelected=="function"&&this.itemSelected(M.data("value"),oe),this.apiSearch&&(this.apiSearchResults={},this.apiSearchCurrentInput=void 0,this.searchItems.html(""),this.$value.val(""),this.$text.val("")),this.save().then(Se=>{Se.success&&(typeof this.saved=="function"&&this.saved(Se),this.hideDetails(),this.isSetting&&this.mod.leave(d),this.clearSearch&&(this.destroy(),this.$text.val(""),this.initializeJets()))}),this.$preview.find(".js-cm-setting-search__preview-content").html(M.clone())}),d.on("buttonGroupCancelClicked",".js-cm-setting__actions",()=>{this.hideDetails(),this.isSetting&&this.mod.leave(d),this.clearSearch&&(this.destroy(),this.$text.val(""),this.initializeJets())}),d.on("click",".js-cm-setting-search__preview",()=>{this.showDetails().then(()=>{this.$text.trigger("focus")})}),d.on("buttonGroupCreateClicked",".js-cm-setting__actions",_=>{const M=gi(_.currentTarget);this.hideDetails().then(()=>{this.hideActions(),this.$chooser.hide();const oe=M.data("template");this.$create=gi((0,n.EY)(Io,{template:this.getTemplate(oe)})),this.$details.append(this.$create),this.settings=new rn(this.$create,this.mod.sandbox),this.showDetails().then(()=>{const Se=this.settings.getFirstElem();typeof Se.focus=="function"&&Se.focus()}),this.validation(()=>{const Se=this.settings.serialize();this.add(Se).then(Ze=>{const Qe=gi(this.getTemplateComponent(d.data("templatePreview"),Ze));this.$preview.find(".js-cm-setting-search__preview-content").html(Qe),this.$value.val(Qe.data("value")),d.find(".js-cm-setting-search__items").append(Qe.clone()),this.showSuccess().then(()=>{this.hideDetails().then(()=>{var _t;this.hideActions(),this.$chooser.show(),(_t=this.$create)==null||_t.hide()})})})},()=>{this.hideDetails().then(()=>{var Se;this.hideActions(),this.$chooser.show(),(Se=this.$create)==null||Se.hide(),this.showDetails()})},this.$create)})})}initialize(){this.apiSearch?this.initializeApiSearch():this.initializeJets()}initializeApiSearch(){this.$text.on("input",()=>{const d=this.$text.val();if(d!==this.apiSearchCurrentInput){if(this.apiSearchCurrentInput=d,this.apiSearchResults[d]){this.addSearchResults(this.apiSearchResults[d]);return}d?this.performApiSearch(d):this.searchItems.html("")}}),this.$text.on("keydown",d=>{if(d.key==="ArrowDown"||d.key==="ArrowUp"){this.handleArrowKeysClick(d.key==="ArrowUp"),d.preventDefault();return}else if(d.key==="Enter"&&this.keySelectedResult!==null){d.preventDefault(),this.searchItems.find(`.js-cm-setting-search__item[data-index=${this.keySelectedResult}]`).trigger("click");return}this.keySelectedResult=null})}handleArrowKeysClick(d){const _=this.apiCurrentResults.length;let M=this.keySelectedResult;if(this.searchItems.find(".js-cm-setting-search__item.state-active").removeClass("state-active"),_!==0&&!(d&&M===null)){if(M===null?M=0:M+=d?-1:1,M<0){this.keySelectedResult=null;return}else M>_-1&&(M=_-1);this.keySelectedResult=M,this.searchItems.find(`.js-cm-setting-search__item[data-index=${this.keySelectedResult}]`).addClass("state-active"),M>7?this.searchItems.scrollTop(this.searchItems[0].scrollHeight):M<4&&this.searchItems.scrollTop(0)}}initializeJets(){this.jets=new(Ui())({searchTag:`#search-${this.id}-search`,contentTag:`#search-${this.id}-content`})}performApiSearch(d){this.apiCurrentResults=[],this.searchItems.html(""),this.keySelectedResult=null,this.search(d).then(_=>{this.apiSearchResults[d]=_,this.addSearchResults(_)})}addSearchResults(d){let _="";this.apiCurrentResults=[];for(const[M,oe]of d.entries())oe.index=M,_+=this.getTemplateComponent(this.itemTemplate,oe),this.apiCurrentResults.push(oe);this.searchItems.html(_)}setting(){const d=this.$ctx;this.elem(!0),d.on("submit",_=>{_.preventDefault()}),d.on("reset",()=>{this.hideDetails(),this.mod.leave(d),this.clearSearch&&(this.destroy(),this.$text.val(""),this.initializeJets())}),d.on("keydown",_=>{this.active&&_.which===9&&_.shiftKey&&gi(_.target).is(this.$text)&&(_.preventDefault(),this.mod.prev(d))})}serialize(){const d=this.$ctx;let _={};_[this.id]=this.$value.val()||"",this.$currentSelection&&(_=gi.extend(!0,{},_,this.$currentSelection.data()));let M=null;return d.data("group")?(M={},M[d.data("group")]=_):M=_,M}enter(){super.enter(),this.readonly?this.mod.leave(this.$ctx):this.showDetails().then(()=>{this.$text.trigger("focus")})}leave(){super.leave()}setValue(d){const _=this.$ctx,M=gi(this.getTemplateComponent(_.data("templatePreview"),d));this.$preview.find(".js-cm-setting-search__preview-content").html(M),this.$value.val(M.data("value"))}focus(){this.readonly||this.$text.trigger("focus")}unfocus(){super.unfocus(),this.readonly||(this.$details.velocity("callout.pulse",{duration:300}),this.$text.trigger("focus"))}destroy(){this.jets&&this.jets.destroy()}}var Qi=i(5181);class da extends w.E{constructor(d,_,M){super(d,_,M),this.$text=this.$ctx.find(".js-cm-setting__input")}elem(){this.initialValue=this.$text.val(),this.readonly=this.$text.is("[readonly]"),(0,jo.A)(this.$text),this.$text.on("lazybeforeunveil",()=>{jo.A.update(this.$text)}),this.$text.on("change",d=>{!this.readonly&&typeof this.changed=="function"&&this.changed(Qi(d.currentTarget).val())}),this.$text.on("focus",()=>{!this.readonly&&typeof this.focus=="function"&&this.focus()}),this.$text.on("keyup",Qi.debounce(800,d=>{!this.readonly&&typeof this.changed=="function"&&(this.autoSave(),this.changed(Qi(d.currentTarget).val()))})),this.$ctx.on("focusin",".js-cm-setting__bar",d=>{this.readonly||Qi(d.currentTarget).addClass("state-active")}).on("focusout",".js-cm-setting__bar",d=>{this.readonly||Qi(d.currentTarget).removeClass("state-active")})}setting(){this.elem(),this.hasChanged=!1,this.$text.on("keyup change",()=>{this.hasChanged=this.initialValue!==this.$text.val()}),this.$ctx.on("keydown",d=>{this.active&&d.which===9&&(d.preventDefault(),this.$ctx.trigger("submit"),d.shiftKey?this.mod.prev(this.$ctx):this.mod.next(this.$ctx))}),this.$ctx.on("reset",d=>{d.preventDefault(),this.$text.val(this.initialValue),this.hasChanged=!1,typeof this.cancel=="function"&&this.cancel(this.serialize())}),this.validation(()=>{this.mod.fire("textSnippetAutoSaveStarted"),this.hasChanged||this.multipleValues?this.save().then(d=>{d.success?(typeof this.saved=="function"&&this.saved(d),this.initialValue=this.$text.val()):d.errors&&this.showErrors(d.errors)}):(typeof this.notChanged=="function"&&this.notChanged(this.serialize()),this.mod.leave(this.$ctx))},()=>{this.mod.leave(this.$ctx)})}autoSave(){this.$ctx.trigger("submit")}enter(){super.enter(),this.readonly?this.mod.leave(this.$ctx):this.$text.trigger("select")}leave(){super.leave(),this.readonly||this.$text.trigger("blur")}focus(){return this.readonly||(this.isSetting?this.enter():this.$text.trigger("select")),this}unfocus(d){super.unfocus(),this.readonly||(this.validator.form()?this.hasChanged?this.save().then(_=>{typeof this.saved=="function"&&this.saved(_),_.success?(this.initialValue=this.$text.val(),this.mod.leave(this.$ctx),this.mod.enter(d)):_.errors&&this.showErrors(_.errors)}):(this.mod.leave(this.$ctx),this.mod.enter(d)):(this.validator.focusInvalid(),this.$ctx.velocity("callout.pulse",{duration:300})))}setValue(d){return this.$text.attr("type")==="unit"&&(d=this.tpl.unit(d,!0)),this.$text.val(d),this}getValue(){let d=this.$text.val();return this.$text.attr("type")==="unit"&&(d=this.tpl.unit(d,!0)),d}clear(){this.$text.val("")}setReadonly(d){d?(this.readonly=!0,this.$text.prop("readonly","readonly")):(this.readonly=!1,this.$text.prop("readonly",!1))}serialize(){const d={[this.id]:this.getValue()},_=this.$ctx.data("group");let M=null;return _?M=this.createGroup({},_,d):M=d,M}}var Xi=i(5181);class Qo extends w.E{constructor(d,_,M){super(d,_,M),this.$text=_.find(".js-cm-setting__input")}elem(){const d=this.$ctx;if(this.readonly=d.data("readonly"),this.autoSave=d.data("autosave"),this.placeholder=this.$text.data("placeholder"),this.mode=d.data("mode")?d.data("mode"):"WYSIWYG",this.saveDelay=600,d.on("focusin",".js-cm-setting__bar",_=>{this.readonly||Xi(_.currentTarget).addClass("state-active")}).on("focusout",".js-cm-setting__bar",_=>{this.readonly||Xi(_.currentTarget).removeClass("state-active")}),d.on("click",".js-cm-setting-snippet-value__ca-language-badge",_=>{const oe=Xi(_.currentTarget).data("languageCode");typeof this.languageSwitched=="function"&&this.languageSwitched(oe)}),this.mode==="WYSIWYG"&&(this.bindEditor(),this.readonly||(this.editor.enable(),this.editor.quill.container.style.minHeight="32px"),this.editor.saved=function(){this.isSetting&&this.autoSave===!0&&!this.readonly&&(this.mod.fire("textSnippetAutoSaveStarted"),this.$ctx.trigger("submit"))}.bind(this)),this.mode==="SOURCE"&&this.isSetting){let _=null;this.$text.on("change keyup paste",()=>{this.mod.fire("textSnippetAutoSaveStarted"),_!==null&&clearTimeout(_),_=window.setTimeout(()=>{this.$ctx.trigger("submit")},this.saveDelay)})}}bindEditor(){this.editor=new Bo.j(this.$text,this.mod.sandbox,{placeholder:this.placeholder,toolbar:!1,saveDelay:this.saveDelay,plainPaste:this.mode==="WYSIWYG",style:"inline",set:this.$ctx.data("set")})}getValue(){return this.mode==="SOURCE"?this.$text.val():this.editor.getContentAsHtml()}setting(){this.elem();const d=this.$ctx;this.hasChanged=!1,d.on("keydown",_=>{this.active&&_.which===9&&(_.preventDefault(),d.trigger("submit"),_.shiftKey?this.mod.prev(d):this.mod.next(d))}),d.on("reset",_=>{_.preventDefault(),typeof this.cancel=="function"&&this.cancel(this.serialize())}),this.validation(()=>{this.mod.fire("textSnippetAutoSaveStarted"),this.isSetting&&!this.readonly&&this.save().then(_=>{_.success?(typeof this.saved=="function"&&this.saved(_),this.autoSave||(this.mod.leave(d),this.showSuccess())):_.errors&&this.showErrors(_.errors)})},()=>{this.mod.leave(d)})}enter(){super.enter(),this.readonly?this.mod.leave(this.$ctx):(this.mode==="WYSIWYG"&&this.editor.focus(),this.autoSave||this.showActions())}leave(){super.leave(),this.readonly||(this.$text.trigger("blur"),this.autoSave||this.hideActions())}focus(){return!this.isSetting&&this.mode==="WYSIWYG"?this.editor.focus():this.enter(),this}unfocus(d){if(super.unfocus(),!this.readonly){const _=this.$ctx;this.mod.leave(_),this.mod.enter(d)}}setValue(d){return this.$text.attr("type")==="unit"&&(d=this.tpl.unit(d,!0)),this.$text.val(d),this}serialize(){const d=this.$ctx,_={};_[this.id]=this.getValue();let M=null;const oe=d.data("group");return oe?M=this.createGroup({},oe,_):M=_,M}}const Xo=(0,h.I)(()=>(0,o.jsx)("div",{className:"co-settings--overlay",children:(0,o.jsx)("fieldset",{className:"co-settings__fieldset--notitle",children:(0,o.jsx)(l.H,{id:"delete-structure-item",label:window.translate("Legacy_setting_structure_delete_label"),description:window.translate("Legacy_setting_structure_delete_description")})})}));var or=i(49290),Y=i(2728),Pe=i(62878);const $e=(0,h.I)(N=>(0,o.jsxs)("form",{className:"c-setting-elem__edit-details js-c-setting-elem__edit-details co-settings",children:[(0,o.jsx)("div",{className:"c-setting-elem__edit-details-fields",children:(0,o.jsx)(Pe.A,{id:"name",label:window.translate("Legacy_setting_structure_name_label"),value:N.item.name,required:!0,placeholder:null})}),(0,o.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer",children:[(0,o.jsx)(or.t,{}),(0,o.jsx)(Y.b,{})]})]})),pn=(0,h.I)(N=>{var d;const _=N.items.filter(M=>M.parent_id===N.parent_filter);return(0,o.jsx)("ul",{className:`cm-setting-structure__list js-cm-setting-structure__list ${N.parent_filter===null?"cm-setting-structure__list--root":""}`,"data-item-id":N.parent_filter,children:_.length>0?(d=Object.keys(_))==null?void 0:d.map(M=>(0,o.jsxs)("li",{className:"cm-setting-structure__item js-cm-setting-structure__item","data-id":_[M].id,"data-parent-id":_[M].parent_id,children:[(0,o.jsxs)("span",{className:"cm-setting-structure__name",children:[(0,o.jsx)("i",{className:"icon-bars cm-setting-structure__handle js-cm-setting-structure__handle"}),_[M].name]}),(0,o.jsxs)("div",{className:"cm-setting-structure__item-settings",children:[(0,o.jsx)("button",{type:"button",className:"cm-setting-structure__edit-item js-cm-setting-structure__edit-item js-cm-btn-dropdown__toggle","data-id":_[M].id,children:(0,o.jsx)("i",{className:"icon-cog cm-setting-structure__edit-icon"})}),(0,o.jsx)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--right cm-btn-dropdown__menu--below js-cm-btn-dropdown__menu"}),(0,o.jsx)("button",{type:"button",className:"cm-setting-structure__delete-item js-cm-btn-dropdown__toggle js-cm-setting-structure__delete-item","data-id":_[M].id,children:(0,o.jsx)("i",{className:"icon-trash cm-setting-structure__delete-icon"})}),(0,o.jsx)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--right cm-btn-dropdown__menu--below js-cm-btn-dropdown__menu"})]}),(0,o.jsx)(pn,{items:N.items,parent_filter:_[M].id})]},_[M].id)):null})});var Ln=i(5181);class Ia extends w.E{constructor(d,_,M){super(d,_,M)}elem(){const d=this.$ctx;this.api=d.data("api"),this.mod.sandbox.subscribe("events",this.mod),this.brandId=(0,Ra.M)(),this.projectId=(0,Hs.PL)()?(0,Hs.MJ)():null,this.model=null,this.saved=null,this.getModel(),this.render(),this.registerAddItem(),d.on("click",".js-cm-setting-structure__edit-item",_=>{_.preventDefault();const M=Ln(_.currentTarget),oe=M.data("id"),Se=M.next(".js-cm-btn-dropdown__menu");this.openItemSettings(oe,Se)}),d.on("click",".js-cm-setting-structure__delete-item",_=>{_.preventDefault();const M=Ln(_.currentTarget),oe=M.data("id"),Se=M.next(".js-cm-btn-dropdown__menu");this.openItemDelete(oe,Se)})}setting(){this.elem()}getModel(){this.model=this.$ctx.data("model")}getModelEntry(d){return this.model.find(_=>_.id==d)}updateStructure(d){d.success===!0&&d.categories?this.model=d.categories:console.error("Error on update Structure"),this.render()}registerAddItem(){const _=this.$ctx.find(".js-cm-setting-structure__add-item"),oe=new rn(_,this.mod.sandbox).getElem("structureadditem");_.on("keydown",".js-cm-setting__input",Se=>{if(Se.keyCode===13){Se.preventDefault();const Ze={name:oe.getValue()};this.addItem(Ze),oe.clear()}})}initSortable(){this.$ctx.find(".js-cm-setting-structure__list").each((M,oe)=>{ma.Ay.create(oe,{group:"structure",draggable:".js-cm-setting-structure__item",handle:".js-cm-setting-structure__handle",ghostClass:"cm-setting-structure__item--ghost",chosenClass:"cm-setting-structure__item--choosen",dragClass:"cm-setting-structure__item--drag",animation:60,put:!0,pull:!0,onEnd:function(Se){const Ze=Ln(Se.item).data("id");this.updateItem(Ze,{parent_id_from:Ln(Se.from).data("itemId"),parent_id_to:Ln(Se.to).data("itemId"),sort:Se.newIndex})}.bind(this)})})}openItemDelete(d,_){const M=Ln((0,n.EY)(Xo,{id:d})),oe=new rn(M,this.mod.sandbox);_.html(M);const Se=oe.getSetting("delete-structure-item");Se.focus(),Se.deleted=function(){this.deleteItem(d),this.mod.fire("closeDropdown",_,["events"])}.bind(this),Se.cancelled=function(){this.mod.fire("closeDropdown",_,["events"])}.bind(this)}openItemSettings(d,_){const M=this.getModelEntry(d);if(M){const oe=Ln((0,n.EY)($e,{item:M}));_.html(oe);const Se=_.find(".js-c-setting-elem__edit-details"),Ze=new rn(Se,this.mod.sandbox);Ze.validation(()=>{const Qe=Ze.serialize();this.updateItem(M.id,Qe)},()=>this.mod.fire("closeDropdown",_))}}addItem(d){this.handleUpdate("add",null,d)}updateItem(d,_){this.handleUpdate("update",d,_)}deleteItem(d){this.handleUpdate("delete",d)}handleUpdate(d,_,M){if(this.api)switch(d){case"update":M.brand_id=this.brandId,M.project_id=this.projectId,this.data.put(`${this.api}/${_}`,M).then(oe=>{this.updateStructure(oe),this.handleSavedHook(d,_,M)});break;case"add":M.brand_id=this.brandId,M.project_id=this.projectId,this.data.post(this.api,M).then(oe=>{this.updateStructure(oe),this.handleSavedHook(d,_,M)});break;case"delete":this.data.delete(`${this.api}/${_}`).then(oe=>{this.updateStructure(oe),this.handleSavedHook(d,_,M)});break}}handleSavedHook(d,_,M){if(typeof this.saved=="function"){const oe={type:d};_&&(oe.id=_),M&&(oe.item=M),this.saved(oe)}}cleanUpEmptyLists(){this.$ctx.find(".js-cm-setting-structure__list").each((_,M)=>{const oe=Ln(M);oe.children().length===0&&oe.html("")})}render(){const _=this.$ctx.find(".js-cm-setting-structure__content"),M=this.model;M.sort((Se,Ze)=>parseInt(Se.sort)-parseInt(Ze.sort));const oe=Ln((0,n.EY)(pn,{items:M,parent_filter:null}));_.html(oe),this.initSortable(),this.cleanUpEmptyLists()}serialize(d){const _=this.$ctx,M={};M[this.id]={items:this.model};let oe=null;const Se=_.data("group");return Se&&!d?oe=this.createGroup({},Se,M):oe=M,oe}}var fi=i(75573);const Ni=(0,h.I)(N=>{var d;const _=N.items.filter(M=>M.parent_id===N.parent_filter);return(0,o.jsx)("ul",{className:`cm-setting-structure-chooser__list js-cm-setting-structure-chooser__list ${N.parent_filter===null?"cm-setting-structure-chooser__list--root":""}`,"data-item-id":N.parent_filter,children:_&&_.length>0?(d=Object.keys(_))==null?void 0:d.map(M=>(0,o.jsxs)("li",{className:"cm-setting-structure-chooser__item js-cm-setting-structure-chooser__item","data-id":_[M].id,"data-parent-id":_[M].parent_id,children:[(0,o.jsx)("span",{children:(0,o.jsx)(fi.z,{classes:"js-cm-setting-structure-chooser__checkbox",name:_[M].name,disabled:!1,checked:_[M].selected&&_[M].selected===!0,value:_[M].id,label:_[M].name})}),(0,o.jsx)(Ni,{items:N.items,parent_filter:_[M].id})]},_[M].id)):null})});var ai=i(5181);class ea extends w.E{constructor(d,_,M){super(d,_,M),this.$listContainer=_.find(".js-cm-setting-structure-chooser__container")}elem(){const d=this.$ctx;this.model=[],this.isOpen=!1,this.isRendered=!1,this.changed=!1,this.getModel(),this.updateSummary(),d.on("click",".js-cm-setting-structure-chooser__checkbox",_=>{const M=ai(_.currentTarget),oe=M.val(),Se=M.is(":checked");this.updateEntry(oe,Se)}),d.on("click",".js-cm-setting-structure-chooser__dropdown",()=>{this.toggle()})}getModel(){this.model=this.$ctx.data("model"),this.model.sort((d,_)=>parseInt(d.sort)-parseInt(_.sort))}updateEntry(d,_){const M=this.getEntry(d);M.selected=_,this.updateSummary(),typeof this.changed=="function"&&this.changed(this.serialize())}updateSummary(){const d=this.$ctx.find(".js-cm-setting-structure-chooser__summary"),_=this.getActiveEntries().map(M=>M.name);_.length>0?d.html(_.join(", ")):d.html(d.data("description"))}getEntry(d){return this.model.find(_=>_.id==d)}getActiveEntries(){return this.model.filter(d=>d.selected&&d.selected===!0)}toggle(){this.isOpen===!1?this.open():this.close()}open(){var d;const _=this.$listContainer;this.isOpen=!0,this.$ctx.find(".js-cm-setting__bar").addClass("state-active"),this.isRendered===!1&&this.renderList(),_.addClass("state-open");const oe=((d=_.offset())==null?void 0:d.top)||0,Se=_.outerHeight()||0,Ze=oe+Se+30;this.mod.resize(Ze),ai("html").on("mousedown.structurechooser",Qe=>{ai(Qe.target).closest(".js-cm-setting-structure-chooser").length===0&&this.close()})}close(){this.isOpen=!1,this.$ctx.find(".js-cm-setting__bar").removeClass("state-active"),this.$listContainer.removeClass("state-open"),this.mod.resize(),ai("html").off(".structurechooser")}renderList(){const d=ai((0,n.EY)(Ni,{items:this.model,parent_filter:null}));this.$listContainer.html(d),this.isRendered=!0}serialize(d){const _=this.getActiveEntries().map(Qe=>Qe.id),M=this.$ctx,oe={};oe[this.id]=_;let Se=null;const Ze=M.data("group");return Ze&&!d?Se=this.createGroup({},Ze,oe):Se=oe,Se}}const _i=(0,h.I)(N=>N.apply==="ALL"?(0,o.jsxs)("button",{className:`ca-badge ca-badge__tag-item ca-badge__tag-item--used ${N.source==="AUTO"?"ca-badge__tag-item--autotag":"ca-badge__tag-item--manual"}`,"data-tag":N.tag,"data-source":N.source,"data-engine":N.engine,children:[(0,o.jsx)("i",{className:"ca-icon--check"}),N.tag]}):N.apply==="PARTIAL"?(0,o.jsxs)("button",{className:`ca-badge ca-badge__tag-item ca-badge__tag-item--partial ${N.source==="AUTO"?"ca-badge__tag-item--autotag":"ca-badge__tag-item--manual"}`,"data-tag":N.tag,"data-source":N.source,"data-engine":N.engine,children:[(0,o.jsx)("i",{className:"ca-icon--check"}),N.tag]}):(0,o.jsxs)("button",{className:`ca-badge ca-badge__tag-item ca-badge__tag-item--unused ${N.source==="AUTO"?"ca-badge__tag-item--autotag":"ca-badge__tag-item--manual"}`,"data-tag":N.tag,"data-source":N.source,"data-engine":N.engine,children:[(0,o.jsx)("i",{className:"ca-icon--add"}),N.tag]}));var Wi=Object.defineProperty,Za=Object.getOwnPropertySymbols,qi=Object.prototype.hasOwnProperty,qo=Object.prototype.propertyIsEnumerable,Uo=(N,d,_)=>d in N?Wi(N,d,{enumerable:!0,configurable:!0,writable:!0,value:_}):N[d]=_,zi=(N,d)=>{for(var _ in d||(d={}))qi.call(d,_)&&Uo(N,_,d[_]);if(Za)for(var _ of Za(d))qo.call(d,_)&&Uo(N,_,d[_]);return N};const Fo=(0,h.I)(N=>{var d;return(0,o.jsxs)(o.Fragment,{children:[N.query?(0,o.jsxs)("div",{className:"js-cm-setting-tags__tag-new cm-setting__label cm-setting-tags__lbl-message",children:[window.translate("Legacy_txt_tag_add"),' "',(0,o.jsx)("span",{children:N.query}),'"']}):null,N.tags.length>0?(0,o.jsxs)(o.Fragment,{children:[(d=N.tags)==null?void 0:d.map((_,M)=>(0,o.jsx)(_i,zi({},typeof _=="object"?_:{tag:_}),M)),N.hasMoreResults?(0,o.jsx)("div",{className:"cm-setting__label cm-setting-tags__more-message",children:window.translate("Legacy_medialibrary_sidebar_refine_search_message")}):null]}):N.query?null:(0,o.jsx)("div",{className:"co-settings__blank",children:N.label_none||window.translate("Legacy_medialibrary_sidebar_no_tags_message")})]})});var Eo=i(5181);class Ei extends w.E{static get FILTER_BY_PROJECT(){return"PROJECT"}static get FILTER_BY_ASSETS(){return"ASSETS"}constructor(d,_,M){super(d,_,M),this.account=this.mod.sandbox.getConfigParam("account"),this.$searchContainer=this.$ctx.find(".js-cm-setting-tags__search"),this.$resultsContainer=this.$ctx.find(".js-cm-setting-tags__results"),this.$autoTagResultsContainer=this.$ctx.find(".js-cm-setting-tags__results--autotags")}elem(d){this.tags=this.transformTags(this.$ctx.data("tags")),this.api=this.$ctx.data("api"),this.searchApi=this.$ctx.data("searchApi"),this.searchFilteredBy=this.$ctx.dataAsString("searchFilteredBy"),this.template=this.$ctx.data("template"),this.projectId=this.$ctx.dataAsNumber("projectId"),this.screens=this.$ctx.data("screens"),this.sets=this.$ctx.data("sets"),this.autoTagTypes=this.$ctx.data("autoTagTypes"),this.readonly=this.$ctx.data("readonly"),this.filter=this.screens.length===0,this.currentQuery="",this.settings=new rn(this.$searchContainer,this.mod.sandbox),this.query=this.settings.getElem(`${this.id}_query`),this.query.changed=_=>{this.currentQuery!==_&&(this.currentQuery=_,this.search(_))},this.$ctx.on("click",".ca-badge__tag-item",_=>{if(_.stopPropagation(),this.readonly)return!1;const M=Eo(_.currentTarget),oe={tag:M.dataAsString("tag"),source:M.data("source"),engine:M.data("engine"),screens:this.screens,sets:this.sets};M.hasClass("ca-badge__tag-item--used")?(this.mod.fire("editAssetTag",{action:"remove"}),oe.type="remove",this.tags=this.tags.filter(Ze=>Ze.tag!==oe.tag)):(this.mod.fire("editAssetTag",{action:"assign"}),this.tags.push({tag:oe.tag,apply:"ALL"}));const Se=oe.type==="remove"?"NONE":"ALL";M.replaceWith((0,n.EY)(_i,{tag:oe.tag,source:oe.source,engine:oe.engine,apply:Se})),d&&this.data.post(this.api,oe).then(Ze=>{Ze.success&&typeof this.saved=="function"&&this.saved(Ze)})}),this.$ctx.on("click",".js-cm-setting-tags__toggle",this.toggleAutoTagAppearance.bind(this)),d?this.search():(this.query.$ctx.on("keydown",_=>{if(_.which===13){_.preventDefault();const M=this.query.getValue();this.addTag(M),this.query.setValue(""),this.renderResults()}}),this.renderResults())}toggleAutoTagAppearance(d){Eo(d.currentTarget).toggleClass("cm-setting-tags__toggle--open"),this.$ctx.find(".cm-setting-tags__results--autotags").toggleClass("cm-setting-tags__results--open")}search(d){if(!this.searchApi)return;let _;const M={},oe=d!=null?d:"";this.searchFilteredBy===Ei.FILTER_BY_ASSETS?(_=this.searchApi,M.search_term=oe,M.asset_ids=this.screens,M.set_ids=this.sets,M.include_applied_auto_tags=this.$ctx.dataAsBoolean("includeAppliedAutoTags"),this.data.post(_,M).then(Se=>{this.renderResults({query:d,tags:this.filterTags(Se.tags,d),autoTags:Se.autoTags,hasMoreResults:Se.hasMoreResults})})):this.searchFilteredBy===Ei.FILTER_BY_PROJECT&&(_=this.$ctx.dataAsBoolean("includeAllAutoTags")?`${this.searchApi}?search_term=${oe}&project_id=${this.projectId}&include_auto_tags`:`${this.searchApi}?search_term=${oe}&project_id=${this.projectId}`,this.data.get(_).then(Se=>{this.renderResults({query:d,tags:this.filterTags(Se.tags,d),autoTags:Se.autoTags,hasMoreResults:Se.hasMoreResults})}))}filterTags(d,_){return this.filter&&Array.isArray(d)&&d.length>0&&(d=d.filter(M=>!this.tags.find(oe=>oe.tag===M.tag)),_===""?d=this.tags.concat(d):d=this.tags.filter(M=>{var oe;return(oe=M.tag)==null?void 0:oe.includes(_)}).concat(d)),d}renderResults(d){d=d||{},(!Eo.isArray(d.tags)||d.tags.length===0)&&(d.tags=this.tags);const _={label_none:this.$ctx.data("labelNone"),query:d.query||"",tags:d.tags,hasMoreResults:d.hasMoreResults||!1};this.$resultsContainer.html((0,n.EY)(Fo,_));const M={tags:d.autoTags||[],hasMoreResults:!1};this.$autoTagResultsContainer.html((0,n.EY)(Fo,M))}transformTags(d){return d.map(_=>typeof _=="string"||typeof _=="number"?{tag:String(_),apply:"ALL"}:_)}setting(){this.elem(!0),this.$ctx.on("keydown",d=>{this.active&&d.which===9&&(d.preventDefault(),d.shiftKey?this.mod.prev(this.$ctx):this.mod.next(this.$ctx)),d.which===13&&(this.mod.fire("editAssetTag",{action:"assign"}),d.preventDefault(),d.stopPropagation(),this.$ctx.trigger("submit"))}),this.validation(()=>{const d=this.query.getValue();this.save({tag:d,screens:this.screens,sets:this.sets}).then(_=>{if(_.success)this.query.setValue(""),this.search(),typeof this.saved=="function"&&this.saved(_);else if(_.error){const M={};M[`${this.id}_query`]=_.error,this.showErrors(M)}})},()=>this.mod.leave(this.$ctx))}addTag(d){d=Eo.trim(d),d!==""&&(this.tags.find(M=>M.tag===d)||this.tags.push({tag:d,apply:"ALL"}))}focus(){return this.query.focus(),this}serialize(){const d=this.tags.filter(Se=>Se.apply!=="NONE"),_={};_[this.id]=d;let M=null;const oe=this.$ctx.data("group");return oe?M=this.createGroup({},oe,_):M=_,M}}var ua=i(5181);class ga extends w.E{constructor(d,_,M){super(d,_,M),this.$text=this.$ctx.find(".js-cm-setting__input"),this.$textGrow=this.$ctx.find(".js-cm-setting__textarea--grow"),this.$prefix=this.$ctx.find(".js-cm-setting__group-prefix"),this.initialValue=this.$text.val(),this.readonly=this.$text.is("[readonly]")}elem(){if(this.$text.is("textarea")){const d=`${this.$text.val()}`;d.length>0&&this.textGrowUpdate(d),this.$text.on("input",_=>{const M=_.target;this.textGrowUpdate(M.value)})}this.$text.is("[data-mask]")&&(this.$text.addClass(`js-cm-setting__input-${this.id}`),this.$ctx.find(`.js-cm-setting__input-${this.id}`).mask(this.$text.dataAsString("mask"))),this.$text.on("change",d=>{!this.readonly&&typeof this.changed=="function"&&this.changed(ua(d.currentTarget).val())}),this.$text.on("focus",()=>{!this.readonly&&typeof this.changed=="function"&&this.focus()}),this.$ctx.data("nolive")||this.$text.on("input",ua.debounce(200,d=>{!this.readonly&&typeof this.changed=="function"&&this.changed(ua(d.currentTarget).val())})),this.$ctx.on("click",".js-cm-setting__clear-btn",()=>{this.clear(),this.$text.focus(),this.$text.trigger("change"),this.tpl.fireCustomEvent(this.$text,"settingTextCleared",{})}),this.$ctx.on("focusin",".js-cm-setting__bar",d=>{this.readonly||ua(d.currentTarget).addClass("state-active")}).on("focusout",".js-cm-setting__bar",d=>{this.readonly||ua(d.currentTarget).removeClass("state-active")})}setting(){this.elem(),this.hasChanged=!1,this.$text.on("keyup change",()=>{this.hasChanged=this.initialValue!==this.$text.val()}),this.$ctx.on("keydown",d=>{this.active&&d.which===9&&(d.preventDefault(),this.$ctx.trigger("submit"),d.shiftKey?this.mod.prev(this.$ctx):this.mod.next(this.$ctx))}),this.$ctx.on("reset",d=>{d.preventDefault(),this.$text.val(this.initialValue),this.textGrowUpdate(this.initialValue),this.hasChanged=!1,typeof this.cancel=="function"&&this.cancel(this.serialize())}),this.validation(()=>{this.hasChanged||this.multipleValues?this.save().then(d=>{typeof this.saved=="function"&&this.saved(d),d.success?(this.initialValue=this.$text.val(),this.mod.leave(this.$ctx),this.showSuccess()):d.errors&&this.showErrors(d.errors)}).catch(d=>{const _={};_[this.id]=window.translate(d.responseJSON.error),this.showErrors(_)}):(typeof this.notChanged=="function"&&this.notChanged(this.serialize()),this.mod.leave(this.$ctx))},()=>{this.mod.leave(this.$ctx)})}enter(){super.enter(),this.readonly?this.mod.leave(this.$ctx):(this.showActions(),this.$text.trigger("select"))}leave(){super.leave(),this.readonly||(this.$text.trigger("blur"),this.hideActions())}focus(){return this.readonly||(this.isSetting?this.enter():this.$text.trigger("select")),this}unfocus(d){var _,M;super.unfocus(),this.readonly||((_=this.validator)!=null&&_.form()?this.hasChanged?this.save().then(oe=>{typeof this.saved=="function"&&this.saved(oe),oe.success?(this.initialValue=this.$text.val(),this.mod.leave(this.$ctx),this.showSuccess(),this.mod.enter(d)):oe.errors&&this.showErrors(oe.errors)}):(this.mod.leave(this.$ctx),this.mod.enter(d)):((M=this.validator)==null||M.focusInvalid(),this.$ctx.velocity("callout.pulse",{duration:300})))}setValue(d){return this.$text.attr("type")==="unit"&&(d=this.tpl.unit(d,!0)),this.$text.val(d),this}getValue(){let d=this.$text.val();return this.$text.attr("type")==="unit"&&(d=this.tpl.unit(d,!0)),d}updatePrefix(d){this.$prefix.html(d)}clear(){this.$text.val(""),this.textGrowUpdate("")}setReadonly(d){d?(this.readonly=!0,this.$text.prop("readonly","readonly")):(this.readonly=!1,this.$text.prop("readonly",!1))}setDisabled(d){d?this.$text.prop("disabled","disabled"):this.$text.prop("disabled",!1)}serialize(){const d={[this.id]:this.getValue()},_=this.$ctx.data("group");let M;return _?M=this.createGroup({},_,d):M=d,M}textGrowUpdate(d){const _=this.$textGrow.get(0);_&&(_.innerHTML=`${this.tpl.escape(d).replaceAll(`
`,"<br/>")}&nbsp;`)}}var Be=i(5181);class rr extends w.E{constructor(d,_,M){super(d,_,M),this.$timeValue=this.$ctx.find(".js-cm-setting__hidden-input"),this.$timeDisplay=this.$ctx.find(".js-cm-setting__input")}elem(){this.initialValue=this.$timeValue.val()||0,this.setTimeDisplay(this.initialValue),this.maxValueInSeconds=this.$timeValue.dataAsNumber("maxValueInSeconds")||0,this.readonly=this.$timeDisplay.is("[readonly]"),this.applyMask(),this.$timeValue.on("change",d=>{typeof this.changed=="function"&&this.changed(Be(d.currentTarget).val())}),this.$timeDisplay.on("change",d=>{const _=this.getValueInSeconds(Be(d.currentTarget).val());this.setValue(_)}),this.$timeDisplay.on("focus",()=>{!this.readonly&&typeof this.changed=="function"&&this.focus()}),this.$ctx.data("nolive")||this.$timeDisplay.on("keyup",Be.debounce(200,d=>{const _=this.getValueInSeconds(Be(d.currentTarget).val());this.setValue(_)})),this.$ctx.on("focusin",".js-cm-setting__bar",d=>{this.readonly||Be(d.currentTarget).addClass("state-active")}).on("focusout",".js-cm-setting__bar",d=>{this.readonly||Be(d.currentTarget).removeClass("state-active")}),this.$timeDisplay.on("keydown",d=>{if(d.key==="Enter"){const _=this.getValueInSeconds(Be(d.currentTarget).val());this.setValue(_),typeof this.send=="function"&&this.send()}})}setting(){this.elem(),this.hasChanged=!1,this.$timeDisplay.on("keyup change",()=>{this.hasChanged=this.initialValue!==this.$timeDisplay.val()}),this.$ctx.on("keydown",d=>{this.active&&d.which===9&&(d.preventDefault(),this.$ctx.trigger("submit"),d.shiftKey?this.mod.prev(this.$ctx):this.mod.next(this.$ctx))}),this.$ctx.on("reset",d=>{d.preventDefault(),this.$timeDisplay.val(this.initialValue),this.hasChanged=!1,typeof this.cancel=="function"&&this.cancel(this.serialize())}),this.validation(()=>{this.hasChanged||this.multipleValues?this.save().then(d=>{typeof this.saved=="function"&&this.saved(d),d.success?(this.initialValue=this.$timeDisplay.val(),this.mod.leave(this.$ctx),this.showSuccess()):d.errors&&this.showErrors(d.errors)}):(typeof this.notChanged=="function"&&this.notChanged(this.serialize()),this.mod.leave(this.$ctx))},()=>{this.mod.leave(this.$ctx)})}enter(){super.enter(),this.readonly?this.mod.leave(this.$ctx):(this.showActions(),this.$timeDisplay.trigger("select"))}leave(){super.leave(),this.readonly||(this.$timeDisplay.trigger("blur"),this.hideActions())}focus(){return this.readonly||(this.isSetting?this.enter():this.$timeDisplay.trigger("select")),this}unfocus(d){super.unfocus(),this.readonly||(this.validator.form()?this.hasChanged?this.save().then(_=>{typeof this.saved=="function"&&this.saved(_),_.success?(this.initialValue=this.$timeDisplay.val(),this.mod.leave(this.$ctx),this.showSuccess(),this.mod.enter(d)):_.errors&&this.showErrors(_.errors)}):(this.mod.leave(this.$ctx),this.mod.enter(d)):(this.validator.focusInvalid(),this.$ctx.velocity("callout.pulse",{duration:300})))}setValue(d){let _=d;return this.maxValueInSeconds>0&&d>this.maxValueInSeconds&&(_=this.maxValueInSeconds),this.$timeValue.val(_),this.setTimeDisplay(_),typeof this.changed=="function"&&this.changed(d),this}getValue(){return this.$timeValue.val()}clear(){this.$timeDisplay.val("")}setReadonly(d){d?(this.readonly=!0,this.$timeDisplay.prop("readonly","readonly")):(this.readonly=!1,this.$timeDisplay.prop("readonly",!1))}setDisabled(d){d?(this.disabled=!0,this.$timeDisplay.prop("disabled","disabled")):(this.disabled=!1,this.$timeDisplay.prop("disabled",!1))}serialize(){const d=this.$ctx,_={};_[this.id]=this.getValue();let M;const oe=d.data("group");return oe?M=this.createGroup({},oe,_):M=_,M}applyMask(){const d=this.maxValueInSeconds>3600?"00:00:00":"00:00";this.$timeDisplay.addClass(`js-cm-setting__input-${this.id}`),this.$ctx.find(`.js-cm-setting__input-${this.id}`).mask(`${d}`)}setTimeDisplay(d){this.$timeDisplay.val(this.getValueFormatted(d))}getValueInSeconds(d){const _=d.split(":").map(Number);let M;return _.length===3?M=_[0]*60*60+_[1]*60+_[2]:_.length===2?M=_[0]*60+_[1]:M=_[0],M}getValueFormatted(d){const _=this.$ctx.dataAsNumber("postDecimalDigits")||0,M=this.getMultiplierByPostDecimalDigits(_),oe=Math.floor(d/60/60),Se=Math.floor(d/60)-oe*60,Ze=Math.round(d%60*M)/M;let Qe;return oe>0?Qe=`${oe}:${this.padNumberToTwoDigitString(Se)}:${this.padNumberToTwoDigitString(Ze)}`:Qe=`${this.padNumberToTwoDigitString(Se)}:${this.padNumberToTwoDigitString(Ze)}`,this.$timeDisplay.attr("size",Qe.length),Qe}getMultiplierByPostDecimalDigits(d){switch(d){case 1:return 10;case 2:return 100;case 3:return 1e3;default:return 1}}padNumberToTwoDigitString(d){return(d<10?"0":"")+d}setInactiveLook(d){d?this.$timeDisplay.addClass("cm-setting-time__badge-input--inactive"):this.$timeDisplay.removeClass("cm-setting-time__badge-input--inactive")}}var Ea=i(5181);class Vo extends w.E{constructor(d,_,M){super(d,_,M),this.readonly=this.$ctx.find(".js-cm-setting-toggle").is("[readonly]")}elem(){this.$ctx.on("click",".js-cm-setting-toggle",d=>{typeof this.changed=="function"&&this.changed(this.serialize(),d.currentTarget),this.$ctx.dataAsBoolean("lockStyle")&&this.updateLockIconAndLabel()})}setting(){this.readonly=this.$ctx.find(".js-cm-setting-toggle").is("[readonly]"),this.$ctx.on("keypress",".js-cm-setting-toggle",d=>{(d.key==="Enter"||d.key===" ")&&this.$ctx.find(".js-cm-setting-toggle").trigger("click")}),this.$ctx.on("click",".js-cm-setting-toggle",d=>{if(!this.readonly){if(!Ea(d.target).is("input")){d.stopPropagation();return}typeof this.changed=="function"&&this.changed(this.serialize()),this.save().then(_=>{_.success&&typeof this.saved=="function"&&this.saved(_)})}})}enter(){this.mod.leave(this.$ctx)}leave(){super.leave()}serialize(){const d=this.$ctx.find(".js-cm-setting-toggle"),_=this.$ctx.data("mappingFalse"),M=this.$ctx.data("mappingTrue");let oe={},Se=d.is(":checked");M!==void 0&&_!==void 0&&(Se=Se?M:_),this.$ctx.data("key")&&(oe[this.$ctx.data("key")]=Se),oe[this.id]=Se,oe=Ea.extend(!0,{},oe,d.data());const Ze=this.$ctx.data("group");return Ze?this.createGroup({},Ze,oe):oe}setValue(d){const _=this.$ctx.find(".js-cm-setting-toggle");_.attr("data-indeterminate","false"),d?_.prop("checked","checked"):_.prop("checked",!1)}isChecked(){return this.$ctx.find(".js-cm-setting-toggle").is(":checked")}updateLockIconAndLabel(){const d=this.$ctx.find(".js-cm-setting-toggle__lock-icon"),_=this.$ctx.find(".js-cm-setting-toggle__lock-label"),M=this.$ctx.dataAsObject("translations");if(this.isChecked()){const oe=(0,n.EY)(Qs.V,{icon:As.l.ICON_LOCK,size:As.l.SIZE_MEDIUM});d.html(oe),_.attr("data-tooltip",M.tooltipLocked),_.text(M.labelLocked),_.removeClass("cm-setting-toggle__lock-label--color-default")}else{const oe=(0,n.EY)(Qs.V,{icon:As.l.ICON_OPEN_LOCK_FILLED,size:As.l.SIZE_MEDIUM,classes:"ca-icon--color-dark-blue"});d.html(oe),_.attr("data-tooltip",M.tooltipUnlocked),_.text(M.labelUnlocked),_.addClass("cm-setting-toggle__lock-label--color-default")}}}var Ki=i(5181);class vi extends w.E{static get TITLE_TYPE_LABEL(){return"label"}static get TITLE_TYPE_BANNER(){return"banner"}static get TITLE_TYPES(){return[vi.TITLE_TYPE_LABEL,vi.TITLE_TYPE_BANNER]}constructor(d,_,M){super(d,_,M),this.$links=this.$ctx.find(".js-cm-setting-tree__link")}elem(){this.mod.sandbox.subscribe("events",this.mod),this.tpl.bindDataAttributes(this,{titleType:{type:String,allowed:vi.TITLE_TYPES,default:vi.TITLE_TYPE_LABEL}}),this.$ctx.find(".js-cm-setting-tree__icon-show").on("click",_=>{_.preventDefault(),_.stopPropagation(),this._toggleTree(Ki(_.currentTarget))}),this.$ctx.find(".js-cm-setting-tree__branch--level-2").on("click",_=>{_.preventDefault(),_.stopPropagation(),Ki(_.currentTarget).parent().toggleClass("state-open")}),this.$ctx.find(".js-cm-setting-tree__icon-show").on("keypress",_=>{_.which===13&&(_.preventDefault(),_.stopPropagation(),this._toggleTree(Ki(_.currentTarget)))}),this.$links.on("click",_=>{_.preventDefault();const M=Ki(_.target);this.select(M)});const d=this.$ctx.data("value");if(d){const _=this.$ctx.find(`.js-cm-setting-tree__link[href="${d}"]`);this.select(_),_.parents(".js-cm-setting-tree__branch").addClass("state-open"),_.closest(".js-cm-setting-tree__tree").addClass("state-open")}}select(d){d.children(".js-cm-setting-tree__input").prop("checked",!0),this.$links.removeClass("state-selected"),d.addClass("state-selected")}setting(){this.elem()}enter(){super.enter()}leave(){super.leave()}_toggleTree(d){d.parent("a, span").parent("li").toggleClass("state-open")}serialize(){const d=this.$ctx.find(".js-cm-setting-tree__input:checked"),_=d.val();(0,vo.R)("LINK_INTERNAL_LINK_NAME")&&(console.log(d.siblings(".cm-setting-tree__name")),console.log(d.parents()));const M={};return _&&(M[this.id]=_),M}}var Pi=i(5181);class ho extends w.E{constructor(d,_,M){super(d,_,M),this.$r=_.find(".js-cm-setting-color__r"),this.$g=_.find(".js-cm-setting-color__g"),this.$b=_.find(".js-cm-setting-color__b"),this.$a=_.find(".js-cm-setting-color__a"),this.$size=_.find(`#${this.id}_size`)}elem(d){this.initialized=!1,d||this.setup()}setting(){this.elem(!0);const d=this.$ctx;this.validation(()=>{this.saveTypostyle()},()=>{for(const _ of this.settings.elems)typeof _.item.reset=="function"&&_.item.reset();this.mod.leave(d)}),d.on("keydown",_=>{this.active&&_.which===27&&this.mod.leave(d),this.active&&_.which===9&&Pi(_.target).is('button[type="reset"]')&&(_.preventDefault(),this.mod.next(d))})}setup(){if(!this.initialized){this.initialized=!0;const d=this.$ctx;this.optional_settings={margin:d.find(".js-setting-margin-enabled").length>0},this.settings=new rn(d.find(".js-cm-setting__details"),this.mod.sandbox),this.elemFont=this.settings.getElem(`${this.id}_search`),this.elemWeight=this.settings.getElem(`${this.id}_weight`),this.elemSize=this.settings.getElem(`${this.id}_size`),this.elemLineHeight=this.settings.getElem(`${this.id}_line_height`),this.elemColor=this.settings.getElem(`${this.id}_color`),this.elemUppercase=this.settings.getElem(`${this.id}_uppercase`),this.elemItalic=this.settings.getElem(`${this.id}_italic`),this.elemUnderline=this.settings.getElem(`${this.id}_underline`),this.elemLetterSpacing=this.settings.getElem(`${this.id}_letter_spacing`),this.optional_settings.margin&&(this.elemMarginTop=this.settings.getElem(`${this.id}_margin_top`),this.elemMarginBottom=this.settings.getElem(`${this.id}_margin_bottom`)),this.elemFont.saved=function(){this.updatePreview(!0)}.bind(this),this.elemWeight.changed=function(){this.updatePreview(!0)}.bind(this),this.elemSize.changed=function(){this.updatePreview()}.bind(this),this.elemLineHeight.changed=function(){this.updatePreview()}.bind(this),this.elemColor.changed=function(){this.updatePreview()}.bind(this),this.elemUppercase.changed=function(){this.updatePreview()}.bind(this),this.elemItalic.changed=function(){this.updatePreview(!0)}.bind(this),this.elemUnderline.changed=function(){this.updatePreview()}.bind(this),this.elemLetterSpacing.changed=function(){this.updatePreview()}.bind(this)}}setColor(d){this.initialized||this.setup(),this.elemColor.setColor(d)}updatePreview(d){const _=this.$ctx.find(".js-cm-setting-typostyle__preview"),M=this.serialize(!0)[this.id],oe=M.uppercase===!0?"uppercase":"initial",Se=M.italic===!0?"italic":"initial",Ze=M.underline===!0?"underline":"initial",Qe=M.letterspacing?M.letterspacing:"normal";if(M.family==="inherit"&&(M.family_css=Pi("body").data("mainFontCss")),d===!0&&M.provider==="google"){const _t=M.italic===!0?"i":"",Ft=M.weight==="400"?`400${_t}`:`${M.weight+_t},400${_t}`,Rs={google:{families:[`${M.family}:${Ft}`]}};try{window.WebFont.load(Rs)}catch(ta){Pi.getScript("//ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js",()=>{window.WebFont.load(Rs)})}}_.css("font-family",M.family_css).css("font-weight",M.weight).css("font-size",M.size).css("letter-spacing",Qe).css("color",M.color).css("text-transform",oe).css("font-style",Se).css("text-decoration",Ze)}saveTypostyle(){const d=this.$ctx;this.save().then(_=>{_.success&&(typeof this.saved=="function"&&this.saved(_),this.showSuccess().then(()=>{this.mod.leave(d)}))})}serialize(d){const _=this.id,M=this.$ctx,oe=Pi(".js-cm-setting-search__item",M).data("css"),Se=Pi(".js-cm-setting-search__item",M).data("family"),Ze=Pi(".js-cm-setting-search__item",M).data("provider"),Qe={};Qe[this.id]={family_css:oe,family:Se,provider:Ze.toLowerCase(),weight:this.elemWeight.serialize()[`${_}_weight`],size:this.tpl.unit(this.elemSize.serialize()[`${_}_size`]),line_height:this.elemLineHeight.serialize()[`${_}_line_height`],color:this.elemColor.serialize()[`${_}_color`],uppercase:this.elemUppercase.serialize()[`${_}_uppercase`],italic:this.elemItalic.serialize()[`${_}_italic`],underline:this.elemUnderline.serialize()[`${_}_underline`],letterspacing:this.tpl.unit(this.elemLetterSpacing.serialize()[`${_}_letter_spacing`])},this.optional_settings.margin&&(Qe[this.id].margin_top=this.tpl.unit(this.elemMarginTop.serialize()[`${_}_margin_top`]),Qe[this.id].margin_bottom=this.tpl.unit(this.elemMarginBottom.serialize()[`${_}_margin_bottom`]));let _t=null;const Ft=M.data("group");return Ft&&!d?_t=this.createGroup({},Ft,Qe):_t=Qe,_t}enter(){super.enter(),this.initialized||this.setup(),this.updatePreview(),this.showDetails().then(()=>{this.settings.getElem(`${this.id}_size`).focus()})}leave(){super.leave(),this.hideDetails().then(()=>{this.hideActions()})}unfocus(){super.unfocus(),this.$details.velocity("callout.pulse",{duration:300}),this.settings.getElem(`${this.id}_size`).focus()}}var $n=i(5181);class Po extends w.E{static get TAB_KEY_CODE(){return 27}static get SHIFT_KEY_CODE(){return 9}constructor(d,_,M){super(d,_,M)}elem(d){this.initialized=!1,this.activeTabId="default",d||this.setup()}setting(){this.elem(!0);const d=this.$ctx;this.validation(()=>this.saveTypostyle(),()=>{for(const _ of this.settings.elems)typeof _.item.reset=="function"&&_.item.reset();this.mod.leave(d)}),d.on("keydown",_=>{this.active&&_.which===Po.TAB_KEY_CODE&&this.mod.leave(d),this.active&&_.which===Po.SHIFT_KEY_CODE&&$n(_.target).is('button[type="reset"]')&&(_.preventDefault(),this.mod.next(d))})}setup(){if(!this.initialized){this.initialized=!0,this.mod.sandbox.subscribe("tabs",this.mod);const d=this.$ctx;this.$size=d.find(`#${this.id}_size`),this.optional_settings={margin:d.find(".js-setting-margin-enabled").length>0},this.$r=d.find(".js-cm-setting-color__r"),this.$g=d.find(".js-cm-setting-color__g"),this.$b=d.find(".js-cm-setting-color__b"),this.$a=d.find(".js-cm-setting-color__a"),this.settings=new rn(d.find(".js-cm-setting__details"),this.mod.sandbox),this.elemFont=this.settings.getElem(`${this.id}_search`),this.elemWeight=this.settings.getElem(`${this.id}_weight`),this.elemSize=this.settings.getElem(`${this.id}_size`),this.elemLineHeight=this.settings.getElem(`${this.id}_line_height`),this.elemColor=this.settings.getElem(`${this.id}_color`),this.elemUppercase=this.settings.getElem(`${this.id}_uppercase`),this.elemItalic=this.settings.getElem(`${this.id}_italic`),this.elemUnderline=this.settings.getElem(`${this.id}_underline`),this.elemLetterSpacing=this.settings.getElem(`${this.id}_letter_spacing`),this.optional_settings.margin&&(this.elemMarginTop=this.settings.getElem(`${this.id}_margin_top`),this.elemMarginBottom=this.settings.getElem(`${this.id}_margin_bottom`)),this.elemFont.saved=()=>this.updatePreview(!0),this.elemWeight.changed=()=>this.updatePreview(!0),this.elemSize.changed=()=>this.updatePreview(),this.elemLineHeight.changed=()=>this.updatePreview(),this.elemColor.changed=()=>this.updatePreview(),this.elemUppercase.changed=()=>this.updatePreview(),this.elemItalic.changed=()=>this.updatePreview(!0),this.elemUnderline.changed=()=>this.updatePreview(),this.elemLetterSpacing.changed=()=>this.updatePreview(),this.elemFontHover=this.settings.getElem(`${this.id}_search_hover`),this.elemWeightHover=this.settings.getElem(`${this.id}_weight_hover`),this.elemSizeHover=this.settings.getElem(`${this.id}_size_hover`),this.elemLineHeightHover=this.settings.getElem(`${this.id}_line_height_hover`),this.elemColorHover=this.settings.getElem(`${this.id}_color_hover`),this.elemBackgroundColorHover=this.settings.getElem(`${this.id}_background_color_hover`),this.elemUppercaseHover=this.settings.getElem(`${this.id}_uppercase_hover`),this.elemItalicHover=this.settings.getElem(`${this.id}_italic_hover`),this.elemUnderlineHover=this.settings.getElem(`${this.id}_underline_hover`),this.elemLetterSpacingHover=this.settings.getElem(`${this.id}_letter_spacing_hover`),this.optional_settings.margin&&(this.elemMarginTopHover=this.settings.getElem(`${this.id}_margin_top_hover`),this.elemMarginBottomHover=this.settings.getElem(`${this.id}_margin_bottom_hover`)),this.elemFontHover.saved=()=>this.updatePreview(!0),this.elemWeightHover.changed=()=>this.updatePreview(!0),this.elemSizeHover.changed=()=>this.updatePreview(),this.elemLineHeightHover.changed=()=>this.updatePreview(),this.elemColorHover.changed=()=>this.updatePreview(),this.elemBackgroundColorHover.changed=()=>this.updatePreview(),this.elemUppercaseHover.changed=()=>this.updatePreview(),this.elemItalicHover.changed=()=>this.updatePreview(!0),this.elemUnderlineHover.changed=()=>this.updatePreview(),this.elemLetterSpacingHover.changed=()=>this.updatePreview(),this.elemFontActive=this.settings.getElem(`${this.id}_search_active`),this.elemWeightActive=this.settings.getElem(`${this.id}_weight_active`),this.elemSizeActive=this.settings.getElem(`${this.id}_size_active`),this.elemLineHeightActive=this.settings.getElem(`${this.id}_line_height_active`),this.elemColorActive=this.settings.getElem(`${this.id}_color_active`),this.elemBackgroundColorActive=this.settings.getElem(`${this.id}_background_color_active`),this.elemUppercaseActive=this.settings.getElem(`${this.id}_uppercase_active`),this.elemItalicActive=this.settings.getElem(`${this.id}_italic_active`),this.elemUnderlineActive=this.settings.getElem(`${this.id}_underline_active`),this.elemLetterSpacingActive=this.settings.getElem(`${this.id}_letter_spacing_active`),this.optional_settings.margin&&(this.elemMarginTopActive=this.settings.getElem(`${this.id}_margin_top_active`),this.elemMarginBottomActive=this.settings.getElem(`${this.id}_margin_bottom_active`)),this.elemFontActive.saved=()=>this.updatePreview(!0),this.elemWeightActive.changed=()=>this.updatePreview(!0),this.elemSizeActive.changed=()=>this.updatePreview(),this.elemLineHeightActive.changed=()=>this.updatePreview(),this.elemColorActive.changed=()=>this.updatePreview(),this.elemBackgroundColorActive.changed=()=>this.updatePreview(),this.elemUppercaseActive.changed=()=>this.updatePreview(),this.elemItalicActive.changed=()=>this.updatePreview(!0),this.elemUnderlineActive.changed=()=>this.updatePreview(),this.elemLetterSpacingActive.changed=()=>this.updatePreview()}}setColor(d){this.initialized||this.setup(),this.elemColor.setColor(d)}updatePreview(d){const _=this.$ctx.find(".js-cm-setting-typostyle__preview-wrap"),M=this.activeTabId==="default"?"":`_${this.activeTabId}`,oe=this.serialize(!0)[this.id],Se=oe[`uppercase${M}`]===!0?"uppercase":"initial",Ze=oe[`italic${M}`]===!0?"italic":"initial",Qe=oe[`underline${M}`]===!0?"underline":"initial",_t=oe[`letterspacing${M}`]?oe[`letterspacing${M}`]:"normal";if(oe.family==="inherit"&&(oe.family_css=$n("body").data("mainFontCss")),d===!0&&oe[`provider${M}`]==="google"){const Ft=oe[`italic${M}`]===!0?"i":"",Rs=oe[`weight${M}`]==="400"?`400${Ft}`:`${oe.weight}${M}${Ft},400${Ft}`,ta={google:{families:[`${oe.family}:${Rs}`]}};try{window.WebFont.load(ta)}catch(Fa){$n.getScript("//ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js",()=>{window.WebFont.load(ta)})}}_.css("font-family",oe[`family_css${M}`]).css("font-weight",oe[`weight${M}`]).css("font-size",oe[`size${M}`]).css("letter-spacing",_t).css("color",oe[`color${M}`]).css("text-transform",Se).css("font-style",Ze).css("text-decoration",Qe).css("background",oe[`background_color${M}`]||"none")}saveTypostyle(){const d=this.$ctx;this.save().then(_=>{_.success&&(typeof this.saved=="function"&&this.saved(_),this.showSuccess().then(()=>{this.mod.leave(d)}))})}serialize(d){const _=this.id,M=this.$ctx,oe=$n(".js-cm-setting-search__item",M).data("css"),Se=$n(".js-cm-setting-search__item",M).data("family"),Ze=$n(".js-cm-setting-search__item",M).data("provider"),Qe={};Qe[this.id]={family_css:oe,family:Se,provider:Ze.toLowerCase(),weight:this.elemWeight.serialize()[`${_}_weight`],weight_hover:this.elemWeightHover.serialize()[`${_}_weight_hover`],weight_active:this.elemWeightActive.serialize()[`${_}_weight_active`],size:this.tpl.unit(this.elemSize.serialize()[`${_}_size`]),size_hover:this.tpl.unit(this.elemSizeHover.serialize()[`${_}_size_hover`]),size_active:this.tpl.unit(this.elemSizeActive.serialize()[`${_}_size_active`]),line_height:this.elemLineHeight.serialize()[`${_}_line_height`],line_height_hover:this.elemLineHeightHover.serialize()[`${_}_line_height_hover`],line_height_active:this.elemLineHeightActive.serialize()[`${_}_line_height_active`],color:this.elemColor.serialize()[`${_}_color`],color_hover:this.elemColorHover.serialize()[`${_}_color_hover`],color_active:this.elemColorActive.serialize()[`${_}_color_active`],background_color_hover:this.elemBackgroundColorHover.serialize()[`${_}_background_color_hover`],background_color_active:this.elemBackgroundColorActive.serialize()[`${_}_background_color_active`],uppercase:this.elemUppercase.serialize()[`${_}_uppercase`],uppercase_hover:this.elemUppercaseHover.serialize()[`${_}_uppercase_hover`],uppercase_active:this.elemUppercaseActive.serialize()[`${_}_uppercase_active`],italic:this.elemItalic.serialize()[`${_}_italic`],italic_hover:this.elemItalicHover.serialize()[`${_}_italic_hover`],italic_active:this.elemItalicActive.serialize()[`${_}_italic_active`],underline:this.elemUnderline.serialize()[`${_}_underline`],underline_hover:this.elemUnderlineHover.serialize()[`${_}_underline_hover`],underline_active:this.elemUnderlineActive.serialize()[`${_}_underline_active`],letterspacing:this.tpl.unit(this.elemLetterSpacing.serialize()[`${_}_letter_spacing`]),letterspacing_hover:this.tpl.unit(this.elemLetterSpacingHover.serialize()[`${_}_letter_spacing_hover`]),letterspacing_active:this.tpl.unit(this.elemLetterSpacingActive.serialize()[`${_}_letter_spacing_active`])},this.optional_settings.margin&&(Qe[this.id].margin_top=this.tpl.unit(this.elemMarginTop.serialize()[`${_}_margin_top`]),Qe[this.id].margin_bottom=this.tpl.unit(this.elemMarginBottom.serialize()[`${_}_margin_bottom`]));let _t=null;const Ft=M.data("group");return Ft&&!d?_t=this.createGroup({},Ft,Qe):_t=Qe,_t}enter(){super.enter(),this.initialized||this.setup(),this.updatePreview(),this.showDetails().then(()=>{this.settings.getElem(`${this.id}_size`).focus()})}leave(){super.leave(),this.hideDetails().then(()=>this.hideActions())}unfocus(){super.unfocus(),this.$details.velocity("callout.pulse",{duration:300}),this.settings.getElem(`${this.id}_size`).focus()}onTabSwitched(d){this.activeTabId=d.id,this.updatePreview()}}var lr=i(43915);const mr=(0,h.I)(N=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"cm-setting-userlist__button cm-setting-userlist__button--cancel",children:(0,o.jsx)(or.t,{label_cancel:N.labelCancel})}),(0,o.jsx)("div",{className:"cm-setting-userlist__button cm-setting-userlist__button--submit",children:(0,o.jsx)(Y.b,{label_submit:N.labelSubmit,disabled:!N.submitEnabled})})]}));var po=i(93277),cr=i(87053);const Oo=(0,h.I)(N=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"cm-setting-userlist__blankslate",children:[N.showBlankSlateImage?(0,o.jsxs)("div",{className:"cm-setting-userlist__blank-image-container",children:[(0,o.jsx)("img",{className:"cm-setting-userlist__blank-image",src:"/img/blankslate/chooser/blankslate-3.svg",alt:N.labelAdd}),(0,o.jsx)("div",{className:"cm-setting-userlist__validation-error js-cm-setting-userlist__validation-error"})]}):(0,o.jsxs)("div",{className:"cm-setting-userlist__blank-text-container",children:[N.blankSlateMessage,(0,o.jsx)("div",{className:"cm-setting-userlist__validation-error js-cm-setting-userlist__validation-error"})]}),(0,o.jsx)("div",{className:"cm-setting-userlist__add-container js-cm-setting-userlist__add-container",children:(0,o.jsx)(cr.S,{label:N.labelAdd,size:po.Q.SIZE_MEDIUM,style:po.Q.STYLE_PRIMARY,icon:"add",background:po.Q.BACKGROUND_WHITE})})]}),N.required?(0,o.jsx)("input",{type:"hidden",name:"validateUserlist",className:"cm-setting-userlist__selected-users-count js-cm-setting-userlist__selected-users-count validate-userlist-required","data-msg":N.msg,value:"blank"}):null]}));var dr=i(77345),gr=i(23245),Jn=i(57266);const Wo=(0,h.I)(N=>{var d;let _="";return N.modifierType==="MODIFIER_TYPE_CROSS_ACCOUNT"&&(_="cm-setting-userlist__user--cross-account-group"),(d=N.users)==null?void 0:d.map(M=>(0,o.jsxs)("div",{className:`cm-setting-userlist__user ${_} js-cm-setting-userlist__user`,"data-jets":`${(M.name||"").toLowerCase()} ${(M.email||"").toLowerCase()}`,"data-identifier":`${N.type}-${M.id}`,children:[(0,o.jsx)("div",{className:"cm-setting-userlist__avatar",children:(0,o.jsx)(gr.p,{imageUrl:M.preview_url_without_placeholder||M.image,gravatarHash:M.gravatar_hash,name:M.name,size:dr.Z.SIZE_24})}),(0,o.jsxs)("div",{className:"cm-setting-userlist__name-and-email",children:[M.name?(0,o.jsxs)("div",{className:"cm-setting-userlist__name",children:[M.name||"",(N.type==="group"||N.type==="cross-account-group")&&M.user_ids?(0,o.jsx)("span",{className:"ca-badge ca-badge--grey cm-setting-userlist__group-count",children:M.user_ids.length}):null]}):null,(0,o.jsx)("div",{className:`cm-setting-userlist__email ${M.name?"":"cm-setting-userlist__email--email-only"}`,children:M.email||""})]}),N.readOnly?null:(0,o.jsx)(Jn.m,{identifier:M.id,type:N.type,stickIconRight:!0,classes:"cm-setting-userlist__trash js-cm-setting-userlist__trash"})]},`${N.type}-${M.id}`))}),So=(0,h.I)(N=>{var d;return(d=N.groupedItems)==null?void 0:d.map(_=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"cm-setting-userlist__item-group-title",children:_.account_name?(0,o.jsxs)(o.Fragment,{children:[_.account_name,window.translate("Legacy_settings_userlist_groups")]}):window.translate("Legacy_settings_userlist_unnamed_organization_groups")}),(0,o.jsx)(Wo,{users:_.groups,type:N.type,readOnly:N.readOnly,modifierType:"MODIFIER_TYPE_CROSS_ACCOUNT"})]}))}),fr=(0,h.I)(N=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"cm-setting-userlist__search",children:[(0,o.jsx)("i",{className:"cm-setting-userlist__search-icon ca-icon--search ca-icon--sm"}),(0,o.jsx)("input",{id:"cm-setting-userlist__search",className:"cm-setting-userlist__search-query js-cm-setting-userlist__search-query",type:"text",placeholder:window.translate("Legacy_placeholder_search")})]}),(0,o.jsxs)("div",{id:"cm-setting-userlist__list",className:`cm-setting-userlist__list ${N.unlimitedListHeight?"cm-setting-userlist__list--unlimited-height":""}`,children:[N.groups?(0,o.jsx)(Wo,{users:N.groups,type:"group",readOnly:N.readOnly}):null,N.utils.account.hasFeature("CROSS_ACCOUNT_GROUPS")&&N.groupedGroups?(0,o.jsx)(So,{groupedItems:N.groupedGroups,type:"cross-account-group",readOnly:N.readOnly}):null,N.users?(0,o.jsx)(Wo,{users:N.users,type:"user",readOnly:N.readOnly}):null]}),(0,o.jsx)("div",{className:"cm-setting-userlist__search-not-found js-cm-setting-userlist__search-not-found"}),N.readOnly?null:(0,o.jsx)("div",{className:"cm-setting-userlist__add-container js-cm-setting-userlist__add-container",children:(0,o.jsx)(cr.S,{label:N.labelAdd,size:po.Q.SIZE_MEDIUM,style:po.Q.STYLE_PRIMARY,icon:"add",background:po.Q.BACKGROUND_WHITE})})]}));var To=i(13833),Gi=i(87080),_r=i(29928),er=i(82296),Ao=Object.defineProperty,eo=Object.getOwnPropertySymbols,tr=Object.prototype.hasOwnProperty,vr=Object.prototype.propertyIsEnumerable,Ir=(N,d,_)=>d in N?Ao(N,d,{enumerable:!0,configurable:!0,writable:!0,value:_}):N[d]=_,Er=(N,d)=>{for(var _ in d||(d={}))tr.call(d,_)&&Ir(N,_,d[_]);if(eo)for(var _ of eo(d))vr.call(d,_)&&Ir(N,_,d[_]);return N};const $r=(0,h.I)(N=>{const d={id:`${N.id}-users`,users:N.users||[],searchEnabled:!0,modifier:"modal",selectAllEnabled:!0,notFoundLabel:N.notFoundLabel},_={id:`${N.id}-groups`,users:N.groups||[],searchEnabled:!0,modifier:"modal",selectAllEnabled:!0,notFoundLabel:N.notFoundLabel},M={id:`${N.id}-cross-account-groups`,users:[],groupedGroups:N.groupedGroups,searchEnabled:!0,modifier:"modal",selectAllEnabled:!0,notFoundLabel:N.notFoundLabel},oe=[{id:"users",active:!0,title:`${window.translate("Legacy_settings_users_label_users_tab")} <span class="ca-badge ca-badge--black-10 js-cm-setting-userlist__count-users"></span>`,content:(0,n.EY)(Gi.b,d)},{id:"groups",title:`${window.translate("Legacy_settings_users_label_groups_tab")} <span class="ca-badge ca-badge--black-10 js-cm-setting-userlist__count-groups"></span>`,content:(0,n.EY)(Gi.b,_)}];return N.utils.account.hasFeature("CROSS_ACCOUNT_GROUPS")&&oe.push({id:"cross-account-groups",title:`${window.translate("Legacy_settings_users_label_cross_account_groups_tab")} <span class="ca-badge ca-badge--black-10 js-cm-setting-userlist__count-cross-account-groups"></span>`,content:(0,n.EY)(er.m,M)}),(0,o.jsxs)("form",{children:[N.modalTitle?(0,o.jsx)("div",{className:"cm-setting-userlist__add-users-title",children:(0,o.jsx)("h2",{className:"ca-h2",children:N.modalTitle})}):null,(0,o.jsxs)("div",{className:"cm-setting-userlist__add-users-container",children:[(0,o.jsx)(To.X,{}),N.showUsersTab&&N.showGroupsTab?(0,o.jsx)(_r.y,{items:oe,border:{bottom:!0},shadow:!0,transparent:!1}):N.showUsersTab?(0,o.jsx)(Gi.b,Er({},d)):N.showGroupsTab?(0,o.jsx)(Gi.b,Er({},_)):null,(0,o.jsx)("div",{className:"cm-setting__actions cm-btn-bar cm-btn-bar--right cm-setting__actions--form state-visible cm-setting-userlist__actions js-cm-setting__actions"})]})]})});var ue=i(5181);class te extends w.E{static get MODIFIER_TYPE_CROSS_ACCOUNT(){return"MODIFIER_TYPE_CROSS_ACCOUNT"}constructor(d,_,M){super(d,_,M),this.account=this.mod.sandbox.getConfigParam("account")}elem(d){this.isSetting=d||!1,this.modal=null,this.usersElem=null,this.groupsElem=null;const _=this.$ctx.data();this.translations=_.translations,this.apiAllUsers=_.apiAllUsers,this.apiAllGroups=_.apiAllGroups,this.excludeCurrentUser=_.excludeCurrentUser,this.showBlankSlateImage=_.showBlankSlateImage,this.showUsersTab=_.apiAllUsers!=="",this.showGroupsTab=_.apiAllGroups!=="",this.showCrossAccountGroupsTab=this.account.hasFeature("CROSS_ACCOUNT_GROUPS"),this.selection=_.initialSelectionIds,this.readOnly=_.readOnly,this.userData=this.getFormattedUserData(_.initialSelectionData.users),this.groupData=this.getFormattedGroupData(_.initialSelectionData.groups),this.organizations=_.organizations||null,this.userListModalId=`${this.id}-modal`,this.currentAccountId=this.mod.sandbox.getConfigParam("context").account.id,this.resetSelectionDelta(),this.render(),this.bindAddUsersEvent(),this.bindTrashButtonEvent(),this.validatorErrorPlacement=M=>{M.addClass("cm-setting__error--relative"),this.$ctx.find(".js-cm-setting-userlist__validation-error").append(M).show()}}addUserListModal(){this.$userListAddModal||(this.$userListAddModal=ue((0,n.EY)(lr.b,{id:this.userListModalId})),ue("body").append(this.$userListAddModal),this.mod.sandbox.addModules(this.$userListAddModal))}removeUserListModal(){var d,_;(d=this.$userListAddModal)!=null&&d.length&&this.mod.sandbox.removeModules(this.$userListAddModal),(_=this.$userListAddModal)==null||_.remove(),this.$userListAddModal=null}setting(){this.elem(!0)}getFormattedUserData(d){return d=this.renameArrayElementsProperty(d,"user_id","id"),this.castArrayElementsIdPropertyToInteger(d)}getFormattedGroupData(d){return d=this.renameArrayElementsProperty(d,"group_id","id"),this.castArrayElementsIdPropertyToInteger(d)}renameArrayElementsProperty(d,_,M){return d.map(oe=>(Object.hasOwnProperty.call(oe,M)===!1&&Object.hasOwnProperty.call(oe,_)===!0&&(oe[M]=oe[_],delete oe[_]),oe)),d}castArrayElementsIdPropertyToInteger(d){return d.map(_=>(Object.prototype.hasOwnProperty.call(_,"id")&&(_.id=parseInt(_.id)),_))}openAddUserModal(){this.addUserListModal(),Promise.all([this.getAllUsersPromise(),this.getAllGroupsPromise()]).then(()=>{const d=this.getUnselectedUserData();let _=this.getUnselectedGroupData(this.groupData);const M=_.length;let oe=[];if(this.account.hasFeature("CROSS_ACCOUNT_GROUPS")&&(oe=this.groupCrossAccountGroupsByAccount(_,this.currentAccountId),_=this.getCurrentAccountGroups(_,this.currentAccountId)),this.modal=ue((0,n.EY)($r,{id:this.id,users:d,groups:_,groupedGroups:oe,excludeCurrentUser:this.excludeCurrentUser,showUsersTab:this.showUsersTab,showGroupsTab:this.showGroupsTab,modalTitle:this.translations.modalTitle,notFoundLabel:this.translations.notFoundLabel})),this.mod.fire("openModal",{id:this.userListModalId,modifier:"functional",closeable:!1,$content:this.modal},["events"]),this.showUsersTab&&this.updateSelectableUserAmount(),this.showGroupsTab){const Se=_.length,Ze=M-_.length;this.updateSelectableGroupAmount(Se,Ze)}this.bindSettings(),this.bindValidation(),this.setupActionButtonRerendering(),this.renderActionButtons({users:[],groups:[]})})}getCurrentAccountGroups(d,_){return d.filter(M=>M.account_id===_)}groupCrossAccountGroupsByAccount(d,_){return d.reduce((M,oe)=>{if(oe.account_id===_)return M;const Se=M.find(Ze=>Ze.account_id===oe.account_id);return Se?Se.groups.push(oe):M.push({account_id:oe.account_id,account_name:this.findOrganizationName(oe.account_id),groups:[oe]}),M},[])}findOrganizationName(d){return this.organizations?this.organizations.find(_=>_.account_id===d).name:null}getAllUsersPromise(){return this.showUsersTab?this.data.get(this.apiAllUsers).then(d=>{d.collaborators?this.userData=this.getFormattedUserData(d.collaborators):d.data&&(this.userData=this.getFormattedUserData(d.data))}):!1}getAllGroupsPromise(){return this.showGroupsTab?this.data.get(this.apiAllGroups).then(d=>{if(d.data||(d.data=d.groups||[]),typeof d.data=="object"){const _=[];for(const M in d.data)Object.prototype.hasOwnProperty.call(d.data,M)&&_.push(d.data[M]);d.data=_}this.groupData=this.getFormattedGroupData(d.data)}):!1}bindSettings(){this.settings=new rn(this.modal,this.mod.sandbox),this.showUsersTab&&(this.usersElem=this.settings.getElem(`${this.id}-users`)),this.showGroupsTab&&(this.groupsElem=this.settings.getElem(`${this.id}-groups`)),this.showCrossAccountGroupsTab&&(this.crossAccountGroupsElem=this.settings.getElem(`${this.id}-cross-account-groups`))}bindValidation(){this.settings.validation(()=>{const d=this.usersElem?this.usersElem.getValue():[],_=[...this.groupsElem?this.groupsElem.getValue():[],...this.crossAccountGroupsElem?this.crossAccountGroupsElem.getValue():[]];this.addToSelection(d,_),typeof this.changed=="function"&&this.changed(this.serialize()),this.render(),this.scrollToFirstAddedItem({users:d,groups:_}),this.saveIfSetting().then(()=>{this.mod.fire("closeModal",{id:this.userListModalId},["events"]),this.removeUserListModal()}).catch(()=>{Tc.Setting.Base.prototype.showError.apply(this.settings)})},()=>{this.mod.fire("closeModal",{id:this.userListModalId},["events"]),this.removeUserListModal()})}bindAddUsersEvent(){this.readOnly||this.$ctx.on("clicked",".js-cm-setting-userlist__add-container",d=>{d.preventDefault(),d.stopPropagation(),this.openAddUserModal()})}bindTrashButtonEvent(){this.readOnly||this.$ctx.on("click.trash",".js-cm-setting-userlist__trash",d=>{d.preventDefault();const _=ue(d.currentTarget).data("type"),M=ue(d.currentTarget).data("identifier");let oe=[],Se=[];_==="user"?oe=[M]:(_==="group"||_==="cross-account-group")&&(Se=[M]),this.removeFromSelection(oe,Se),typeof this.changed=="function"&&this.changed(this.serialize()),this.saveIfSetting(),this.render()})}saveIfSetting(){return this.isSetting!==!0?new Promise(d=>{d({success:!0})}):this.save().then(d=>{d.success&&(typeof this.saved=="function"&&this.saved(d),this.resetSelectionDelta())})}setupActionButtonRerendering(){this.usersElem&&(this.usersElem.changed=()=>{this.renderActionButtons()}),this.groupsElem&&(this.groupsElem.changed=()=>{this.renderActionButtons()}),this.crossAccountGroupsElem&&(this.crossAccountGroupsElem.changed=()=>this.renderActionButtons())}resetSelectionDelta(){this.selectionDelta={add:{users:[],groups:[]},remove:{users:[],groups:[]}}}addToSelection(d,_){d.length>0&&(this.selection.users=this.selection.users.concat(d),this.selectionDelta.add.users=this.selectionDelta.add.users.concat(d)),_.length>0&&(this.selection.groups=this.selection.groups.concat(_),this.selectionDelta.add.groups=this.selectionDelta.add.groups.concat(_))}removeFromSelection(d,_){d.length>0&&(this.selection.users=this.selection.users.filter(M=>!d.includes(M)),this.selectionDelta.remove.users=this.selectionDelta.remove.users.concat(d)),_.length>0&&(this.selection.groups=this.selection.groups.filter(M=>!_.includes(M)),this.selectionDelta.remove.groups=this.selectionDelta.remove.groups.concat(_))}sortArrayByName(d){d.length>0&&d.sort((_,M)=>{var oe;const Se=M.name?(oe=_.name)==null?void 0:oe.localeCompare(M.name):-1;return _.name||M.name?_.name?Se:1:0})}getSelectedUserData(){const d=this.userData.filter(({id:_})=>this.selection.users.includes(_));return this.sortArrayByName(d),d}getUnselectedUserData(){const d=this.excludeCurrentUser?this.userData.filter(({id:_})=>!this.selection.users.includes(_)&&_!==(0,Xt.F6)()):this.userData.filter(({id:_})=>!this.selection.users.includes(_));return this.sortArrayByName(d),d}getSelectedGroupData(){const d=this.groupData.filter(({id:_})=>this.selection.groups.includes(_));return this.sortArrayByName(d),d}getUnselectedGroupData(d){const _=d.filter(({id:M})=>!this.selection.groups.includes(M));return this.sortArrayByName(_),_}countCheckedUsers(){let d=[],_=[],M=[],oe=[],Se=[];return this.usersElem&&(d=this.usersElem.serialize()[`${this.id}-users`]),this.groupsElem&&(_=this.groupsElem.serialize()[`${this.id}-groups`],M=this.crossAccountGroupsElem?this.crossAccountGroupsElem.serialize()[`${this.id}-cross-account-groups`]:[],oe=this.groupData.filter(({id:Qe})=>_.includes(Qe)||M.includes(Qe)),Se=oe.map(Qe=>Qe.users).reduce((Qe,_t)=>Qe.concat(_t),[])),[...d,...Se].length}updateSelectableUserAmount(){ue(this.modal).find(".js-cm-setting-userlist__count-users").text(this.getUnselectedUserData().length)}updateSelectableGroupAmount(d,_){ue(this.modal).find(".js-cm-setting-userlist__count-groups").text(d),ue(this.modal).find(".js-cm-setting-userlist__count-cross-account-groups").text(_)}render(){this.selection.users.length===0&&this.selection.groups.length===0?this.renderBlankSlate():this.renderList()}renderBlankSlate(){const d=(0,n.EY)(Oo,{labelAdd:this.translations.openModalButton,blankSlateMessage:this.translations.blankSlateMessage,showBlankSlateImage:this.showBlankSlateImage,required:this.$ctx.dataAsBoolean("required"),msg:this.translations.requiredError});this.tpl.addAndActivate(this.$ctx,d)}renderList(){let d=this.getSelectedGroupData(),_=[];this.account.hasFeature("CROSS_ACCOUNT_GROUPS")&&(_=this.groupCrossAccountGroupsByAccount(d,this.currentAccountId),d=this.getCurrentAccountGroups(d,this.currentAccountId));const M=(0,n.EY)(fr,{users:this.getSelectedUserData(),groups:d,groupedGroups:_,labelAdd:this.translations.openModalButton,showGroupCount:this.showGroupCount,readOnly:this.readOnly,unlimitedListHeight:this.$ctx.dataAsBoolean("unlimitedListHeight")});this.tpl.addAndActivate(this.$ctx,M),this.enableJets()}renderActionButtons(){let d;const _=this.countCheckedUsers();_>1?d=this.translations.addUserButtonPlural.replace("$1$",_):_===1?d=this.translations.addUserButtonSingular.replace("$1$",_):d=this.translations.addUserButtonInitial;const M=this.settings.$ctx.find(".js-cm-setting__actions"),oe=(0,n.EY)(mr,{labelCancel:this.translations.cancelButton,labelSubmit:d,submitEnabled:_>0});M.html(oe)}scrollToFirstAddedItem(d){let _;if(d.groups.length>0){const M=d.groups[0];_=this.$ctx.find(`.js-cm-setting-userlist__user[data-identifier="group-${M}"]`)}else{const M=d.users[0];_=this.$ctx.find(`.js-cm-setting-userlist__user[data-identifier="user-${M}"]`)}_.length>0&&_[0].scrollIntoView()}enableJets(){this.destroyJets();const d=this.$ctx.find(".js-cm-setting-userlist__search-not-found"),_=this.translations.notFoundLabel;this.jets=new(Ui())({searchTag:"#cm-setting-userlist__search",contentTag:"#cm-setting-userlist__list",didSearch:M=>this.$ctx.find(".js-cm-setting-userlist__user:visible").length>0?d.removeClass("state-visible"):d.text(_.replace("$1$",M)).addClass("state-visible")})}destroyJets(){this.jets&&this.jets.destroy()}getValue(){return{selection:this.selection,selectionDelta:this.selectionDelta}}serialize(){const d={};d[this.id]=this.getValue();let _=null;const M=this.$ctx.data("group");return M?_=this.createGroup({},M,d):_=d,_}leave(){super.leave()}enter(){super.enter(),this.mod.leave(this.$ctx)}onModalClosed({id:d}){d===this.userListModalId&&(this.modal=null,this.showUsersTab&&this.destroyJets(),this.showGroupsTab&&this.destroyJets())}}const pe=Ii;pe.prototype.clearStyleSheet=function(N){const d=document.styleSheets;for(let _=d.length;_>0;_--){const M=d[_];if(M&&M.title===N){this.styleTag=M.ownerNode;break}}},pe.prototype._addStyleTag=function(){const N="jets_style";this.clearStyleSheet(N),this.styleTag||(this.styleTag=document.createElement("style"),this.styleTag.setAttribute("title",N),document.head.appendChild(this.styleTag))};var Xe=i(5181);class ut extends w.E{constructor(d,_,M){super(d,_,M)}elem(){this.id=this.$ctx.data("id"),this.bindEvents(this.$ctx),this.disableSelectAllIfEmpty(this.$ctx),this.validatorErrorPlacement=d=>{this.$ctx.find(".js-cm-setting-users__validation-error").append(d).show()},this.$ctx.data("searchEnabled")&&(this.enableJets(),this.fixUsersHeight()),this.formatUsernames()}setting(){this.elem()}formatUsernames(){this.$ctx.find(".js-cm-setting-users__item-checkbox-input").not(":checked").closest(".js-cm-setting-users__user").find(".js-cm-setting-users__name").removeClass("selected"),this.$ctx.find(".js-cm-setting-users__item-checkbox-input:checked").closest(".js-cm-setting-users__user").find(".js-cm-setting-users__name").addClass("selected")}bindEvents(){const d=_=>{const M=Xe(_.currentTarget).find(".js-cm-setting-users__item-checkbox-input");M.prop("checked",!M.prop("checked")),M.trigger("change"),typeof this.changed=="function"&&this.changed()};this.$ctx.on("change",".js-cm-setting-users__item-checkbox-input",_=>{typeof this.changed=="function"&&this.changed(),this.formatUsernames(),this.saveSetting(_)}),this.$ctx.on("click",".js-cm-setting-users__checkbox",_=>{_.preventDefault(),_.stopPropagation(),d(_)}),this.$ctx.on("click",".js-cm-setting-users__item-checkbox-input",_=>{_.preventDefault(),_.stopPropagation()}),this.$ctx.on("change",".js-cm-setting-users__select-all-checkbox",_=>{const M=Xe(_.target),oe=M.siblings(".ca-checkbox__label");M.is(":checked")?(this.checkAll(),oe.text(this.$ctx.data("label-unselectall"))):(this.unCheckAll(),oe.text(this.$ctx.data("label-selectall"))),typeof this.changed=="function"&&this.changed(),this.saveSetting(_)}),this.$ctx.on("click",".js-cm-setting-users__user",_=>{d(_)})}saveSetting(d){this.isSetting&&this.save({val:Xe(d.target).val(),checked:Xe(d.target).is(":checked")}).then(_=>{_.success&&typeof this.saved=="function"&&this.saved(_)})}disableSelectAllIfEmpty(){this.$ctx.find(".js-cm-setting-users__item-checkbox-input:enabled").length===0&&this.$ctx.find(".js-cm-setting-users__select-all-checkbox").prop("disabled",!0)}fixUsersHeight(){const d=this.$ctx.find(`.js-cm-setting-users__list-${this.id}`),_=d.css("height");d.height(_),this.$ctx.find(`.js-cm-setting-users__not-found-${this.id}`).css("line-height",_)}enableJets(){const d=this.$ctx.find(`.js-cm-setting-users__not-found-${this.id}`),_=this.$ctx.data("not-found-label");this.jets=new pe({searchTag:`.js-cm-setting-users__filter-query-${this.id}`,contentTag:`.js-cm-setting-users__search-container-${this.id}`,didSearch:M=>this.$ctx.find(".js-cm-setting-users__user:visible").length>0?d.removeClass("state-visible"):d.text(_.replace("$1$",M)).addClass("state-visible")})}serialize(){const d={};d[this.id]=this.getValue();let _=null;const M=this.$ctx.data("group");return M?_=this.createGroup({},M,d):_=d,_}enter(){this.mod.leave(this.$ctx)}leave(){super.leave()}checkAll(){const d=this.$ctx.find(".js-cm-setting-users__item-checkbox-input:enabled");Xe.each(d,(_,M)=>{Xe(M).parent().is(":visible")&&Xe(M).prop("checked",!0)}),this.formatUsernames()}unCheckAll(){const d=this.$ctx.find(".js-cm-setting-users__item-checkbox-input:enabled");Xe.each(d,(_,M)=>{Xe(M).parent().is(":visible")&&Xe(M).prop("checked",!1)}),this.formatUsernames()}setValue(d){this.$ctx.attr("value",d)}getValue(){const d=[],_=this.$ctx.find(".js-cm-setting-users__item-checkbox-input:checked");return Xe.each(_,(M,oe)=>{const Se=parseInt(Xe(oe).val());d.push(Se)}),d}}var zt=i(18216),fs=i(5181),js=i.n(fs);let Ss="idle";const Ms=async()=>{Ss==="loaded"||Ss==="loading"||(Ss="loading",await window.languageBundleLoaded,js().extend(js().validator.messages,{required:window.translate("SettingsValidator_required"),maxlength:js().validator.format(window.translate("SettingsValidator_maxlength")),minlength:js().validator.format(window.translate("SettingsValidator_minlength")),rangelength:js().validator.format(window.translate("SettingsValidator_rangelength")),email:window.translate("SettingsValidator_email"),url:window.translate("SettingsValidator_url"),date:window.translate("SettingsValidator_date"),number:window.translate("SettingsValidator_number"),digits:window.translate("SettingsValidator_digits"),equalTo:window.translate("SettingsValidator_equalTo"),range:js().validator.format(window.translate("SettingsValidator_range")),max:js().validator.format(window.translate("SettingsValidator_max")),min:js().validator.format(window.translate("SettingsValidator_min")),users:window.translate("SettingsValidator_users"),link:window.translate("SettingsValidator_link"),https:window.translate("SettingsValidator_https")}))};var Ws=i(5181);const Rn={AssetChooserList:v,Attachments:B,Border:k,Button:K,Chooser:q,Color:Te,Colorlabel:se,Colorlist:ee,Date:Ue,Delete:Ve,Dropdown:Tt,Emailchange:Qt,Folderlist:La,Frame:Re,Groups:yt,Headersize:hn,Hidden:At,Hotspot:Qn,Image:Ls,Link:Oa,List:Q,Logo:it,Measure:jn,Multivalue:pi,Password:ra,Permission:wo,Position:xo,Radioandcheckbox:Lo,Ratio:Ys,Richtext:Ai,Search:ca,SnippetTextarea:da,SnippetValue:Qo,Structure:Ia,StructureChooser:ea,Tags:Ei,Text:ga,Time:rr,Toggle:Vo,Tree:vi,Typostyle:ho,TypostyleLink:Po,Userlist:te,Users:ut},bi=class lv extends zt.j{constructor(d,_){super(d,_,`c-settings-${lv.count++}`),this.settings=[],this.elems=[],this.active=!1,this.$active=null,this.validator=null,this.on()}on(){Ms(),this.sandbox.subscribe("events",this),this.sandbox.subscribe("tabs",this);const d=this.$ctx.data("settings");d&&d.destroy(),this.setup(),this.$ctx.off(".settings"),this.$ctx.on("click.settings",".js-co-settings__setting",_=>{const M=Ws(_.currentTarget);this.enter(M)}),this.$ctx.on("click.settings",".js-co-settings__accordion-open",_=>{const M=Ws(_.currentTarget),oe=M.next(".js-co-settings__accordion-content");M.find(".icon").toggleClass("icon-angle-down icon-angle-up"),oe.toggleClass("state-open")})}setup(){let d=!1;this.$ctx.find(".js-co-settings__setting").each((M,oe)=>{d=!0;const Se=Ws(oe),Ze=Se.data("id");if(Se.data("setting")){this.settings.push({id:Ze,item:Se.data("setting")});return}const Qe=b()(u()(Se.data("type"))),_t=new Rn[Qe](this,Se,!0);_t.setting(),Se.data("setting",_t),this.settings.push({id:Ze,item:_t})}),d||this.$ctx.find(".js-co-settings__elem").each((oe,Se)=>{const Ze=Ws(Se),Qe=Ze.data("id");if(Ze.data("elem")){this.elems.push({id:Qe,item:Ze.data("elem")});return}const _t=b()(u()(Ze.data("type"))),Ft=new Rn[_t](this,Ze,!1);Ft.elem(!1),Ze.data("elem",Ft),this.elems.push({id:Qe,item:Ft})}),this.$ctx.data("settings",this)}validation(d,_,M,oe){this.$ctx.on("reset",()=>{this.$ctx.validate().resetForm(),typeof _=="function"?_():w.E.prototype.hideDetails.apply(this).then(()=>{w.E.prototype.hideActions.apply(this,[this.$actions])})});const Se=this,Ze={onfocusout:!1,submitHandler(){w.E.prototype.showLoader.apply(Se),typeof d=="function"&&d()},invalidHandler(Qe,_t){typeof M=="function"&&M(Qe,_t)},errorPlacement:w.E.prototype.errorPlacement.bind(this),showErrors:function(){const Qe=this;Qe.numberOfInvalids()>0&&w.E.prototype.showError.apply(Se),Qe.defaultShowErrors()}};oe&&(Ze.messages=oe),this.$ctx.length>0&&this.$ctx.dataAsBoolean("hiddenFieldsValidated")?this.validator=this.$ctx.validate(Ze).settings.ignore=[]:this.validator=this.$ctx.validate(Ze)}showErrors(d){this.validator?(this.validator.showErrors(d),this.validator.focusInvalid()):console.log("Validation not enabled for this settings instance"),w.E.prototype.hideLoader.apply(this)}hideLoader(){w.E.prototype.hideLoader.apply(this)}enter(d){this.active?this.$active&&!d.is(this.$active)&&(this.$active.addClass("state-focus"),this.getSetting(this.$active.data("id")).unfocus(d)):(this.active=!0,this.$active=d,d.removeClass("state-focus").addClass("state-active"),this.getSetting(d.data("id")).enter())}leave(d){const _=d||this.$active;this.active&&(_==null||_.removeClass("state-focus state-active"),this.getSetting(_==null?void 0:_.data("id")).leave(),this.active=!1,this.$active=null)}next(d){const _=d.data("id"),M=this.settings.findIndex(oe=>oe.id===_);if(this.settings[M+1]){const oe=this.settings[M+1].item;oe.multipleValues?this.next(oe.$ctx):this.enter(oe.$ctx)}}prev(d){const _=d.data("id"),M=this.settings.findIndex(oe=>oe.id===_);if(this.settings[M-1]){const oe=this.settings[M-1].item;oe.multipleValues?this.prev(oe.$ctx):this.enter(oe.$ctx)}}serialize(){let d={};for(const _ of this.elems)d=Ws.extend(!0,{},d,_.item.serialize());for(const _ of this.settings)d=Ws.extend(!0,{},d,_.item.serialize());return this.removeBrowserPluginDataAttributes(d),d}removeBrowserPluginDataAttributes(d){delete d["com.agilebits.onepassword.userEdited"]}destroy(){for(const d of this.elems)typeof d.item.destroy=="function"&&d.item.destroy();for(const d of this.settings)typeof d.item.destroy=="function"&&d.item.destroy()}destroyValidator(){this.validator&&this.validator.destroy()}resize(d){const _=this.$ctx;if(d){const M=parseInt(_.height()),oe=_.offset().top;M+oe<d&&_.height(d-oe)}else _.css("height","auto")}get(d){let _=this.getSetting(d);return Ws.isEmptyObject(_)&&(_=this.getElem(d)),_}getSettings(d){return this.settings.filter(_=>Array.isArray(d)?d.includes(_.id):!0).map(_=>_.item)}getActive(){if(this.$active){const d=this.$active.data("id");let _=this.getSetting(d);return Ws.isEmptyObject(_)&&(_=this.getElem(d)),Ws.isEmptyObject(_)?null:_}return null}getSetting(d){const _=this.settings.find(M=>M.id===d);return _?_.item:{}}getElems(d){return this.elems.filter(_=>Array.isArray(d)?d.includes(_.id):!0).map(_=>_.item)}getElem(d){const _=this.elems.find(M=>M.id===d);return _?_.item:{}}getFirstElem(){return this.elems[0]?this.elems[0].item:{}}onModalClosed(d){for(const _ of this.getSettings())typeof _.onModalClosed=="function"&&_.onModalClosed(d);for(const _ of this.getElems())typeof _.onModalClosed=="function"&&_.onModalClosed(d)}onTabSwitched(d){const _=this.getActive();_&&typeof _.onTabSwitched=="function"&&_.onTabSwitched(d)}getFirstSetting(){return this.settings[0]?this.settings[0].item:{}}};bi.count=0;let rn=bi},84090:function(fe,F,i){"use strict";i.d(F,{p:function(){return b}});var e=i(86070),u=i(95376),f=i(14154);const b=(0,f.I)(y=>(0,e.jsxs)("div",{className:`co-settings__divider co-settings__divider--${y.size} ${y.hasNegativeMargin?"co-settings__divider--negative-margin":""}`,children:[y.size==="large"&&y.title?(0,e.jsx)("div",{className:"co-settings__divider-title",children:y.title}):null,y.size==="large"&&y.setting?(0,e.jsx)("div",{className:"co-settings__divider-setting",children:(0,u.Ay)(y.setting)}):null]}))},4219:function(fe,F,i){"use strict";i.d(F,{c:function(){return C}});var e=i(86070),u=i(49290),f=i(2728),b=i(59240),y=i(29083),n=i(62878),w=i(90307),E=i(14154),x=i(5181);const C=(0,E.I)(v=>{const m=[{value:"Text",name:"Text"},{value:"Email",name:"Email"},{value:"Textarea",name:"Textarea"},{value:"Country",name:"Country"}];return(0,e.jsxs)("form",{className:"cm-setting__details cm-setting-list__details",children:[(0,e.jsxs)("div",{className:"cm-setting__details-fields",children:[x.isNumeric(v.item.id)?(0,e.jsx)(b.U,{id:"type",label:"Type",required:!0,readonly:!0,value:v.item.type,options:m}):(0,e.jsx)(n.A,{id:"type",label:"Type",required:!0,disabled:!0,readonly:!0,value:v.item.type,placeholder:""}),(0,e.jsx)(n.A,{id:"label",label:"Label",required:!0,value:v.item.label,placeholder:"eg. Your Name"}),(0,e.jsx)(n.A,{id:"placeholder",label:"Placeholder",value:v.item.placeholder,placeholder:"e.g. John Doe"}),(0,e.jsxs)("a",{className:"co-settings__accordion-open js-co-settings__accordion-open",href:"javascript:;",children:[(0,e.jsx)("i",{className:"icon icon-angle-down"})," Advanced"]}),(0,e.jsx)("div",{className:"co-settings__accordion-content js-co-settings__accordion-content state-closed",children:(0,e.jsx)(w.f,{id:"required",label:"Required",disabled:!x.isNumeric(v.item.id),checked:!!v.item.required})}),(0,e.jsx)(y.f,{id:"id",value:v.item.id}),(0,e.jsx)(y.f,{id:"value",value:v.item.id})]}),(0,e.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer js-cm-setting__actions cm-setting__actions cm-setting__actions--flyout js-cm-setting-list__actions",children:[(0,e.jsx)(u.t,{}),(0,e.jsx)(f.b,{})]})]})})},64602:function(fe,F,i){"use strict";i.d(F,{E:function(){return E}});var e=i(86070),u=i(49290),f=i(2728),b=i(59240),y=i(62878),n=i(90307),w=i(14154);const E=(0,w.I)(()=>{const x=[{value:"Text",name:"Text"},{value:"Email",name:"Email"},{value:"Textarea",name:"Textarea"},{value:"Country",name:"Country"}];return(0,e.jsxs)("form",{className:"cm-setting__details cm-setting-list__details",children:[(0,e.jsxs)("div",{className:"cm-setting__details-fields",children:[(0,e.jsx)(b.U,{id:"type",label:"Type",required:!0,readonly:!0,value:null,options:x}),(0,e.jsx)(y.A,{id:"label",label:"Label",required:!0,placeholder:"eg. Your Name"}),(0,e.jsx)(y.A,{id:"placeholder",label:"Placeholder",placeholder:"e.g. John Doe"}),(0,e.jsx)(n.f,{id:"required",label:"Required",disabled:!1,checked:!0})]}),(0,e.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer js-cm-setting__actions cm-setting__actions cm-setting__actions--flyout js-cm-setting-list__actions",children:[(0,e.jsx)(u.t,{}),(0,e.jsx)(f.b,{})]})]})})},85762:function(fe,F,i){"use strict";i.d(F,{u:function(){return f}});var e=i(86070),u=i(14154);const f=(0,u.I)(b=>(0,e.jsxs)("div",{className:"co-settings__blank",children:[b.text,"\xA0"," ",b.cname&&b.domain?(0,e.jsxs)(e.Fragment,{children:[b.cname," to ",b.domain]}):null]}))},78639:function(fe,F,i){"use strict";i.d(F,{o:function(){return h}});var e=i(23245),u=i(86070),f=i(14154),b=Object.defineProperty,y=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,E=(g,j,$)=>j in g?b(g,j,{enumerable:!0,configurable:!0,writable:!0,value:$}):g[j]=$,x=(g,j)=>{for(var $ in j||(j={}))n.call(j,$)&&E(g,$,j[$]);if(y)for(var $ of y(j))w.call(j,$)&&E(g,$,j[$]);return g};const C=(0,f.I)(g=>(0,u.jsx)("div",x({className:"mod mod-m-avatar-multiple cm-avatar-multiple"},g.tpl.renderDataAttributesAsObject(g))));var v=i(50427),m=i(18216),c=i(38291),o=i(77345),l=i(39232);class h extends m.j{static get REQUIREMENT_NO_REJECTIONS(){return"NO_REJECTIONS"}static get REQUIREMENT_FIRST_RESPONSE(){return"FIRST"}static get REQUIREMENT_UNANIMOUS(){return"UNANIMOUS"}static get REQUIREMENT_MAJORITY_APPROVES(){return"MAJORITY_APPROVES"}static get DEFAULT_DURATION_VALUE(){return 14}on(j){this.tpl.bindDataAttributes(this,{projectId:{type:Number},approvalRequestPresets:{type:Object,changed:()=>this.renderAvatars()}}),this.renderAvatars(),this.registerSettings(),j()}renderAvatars(){for(const j of this.approvalRequestPresets){const S=this.$ctx.find(`.js-cm-setting-list__item[data-id="${j.id}"]`).find(".js-cm-setting-list__avatar"),T=this.getAvatarByPreset(j);this.tpl.addAndActivate(S,T)}}getAvatarByPreset(j){let $=null,S=null;if(j.review_groups&&j.review_groups.length>0){const T=j.review_groups.reduce((A,B)=>{for(const R of B.users)A.includes(R)||A.push(R);return A},[]);$=T[0]?T[0]:null,S=T[1]?T[1]:null}return $===null&&($=j.review_users!==null?j.review_users[0]:null),S===null&&(S=j.review_users!==null&&j.review_users.length>=2?j.review_users[1]:null),S===null?(0,v.EY)(e.p,{name:($==null?void 0:$.name)||"",imageUrl:($==null?void 0:$.image)||"",gravatarHash:($==null?void 0:$.gravatar_hash)||"",size:o.Z.SIZE_24||""}):(0,v.EY)(C,{avatarFront:$,avatarBack:S})}registerSettings(){this.settings=new l.D(this.$ctx,this.sandbox),this.approvalRequestPresetSetting=this.settings.getSetting("approvalRequestPreset"),this.approvalRequestPresetSetting.extendFormData=j=>this.extendFormData(j),this.approvalRequestPresetSetting.processAddSettings=j=>{this.handleFormDependencies(j)},this.approvalRequestPresetSetting.processEditSettings=j=>{this.handleFormDependencies(j)},this.approvalRequestPresetSetting.saved=j=>{var $;const S=this.$ctx.dataAsObject("approvalRequestPresets");S.push(j),this.$ctx.dataAsObject("approvalRequestPresets",S);const T={approval_preset_id:j.id,single_reviewers:(($=j.review_users)==null?void 0:$.length)||0,group_reviewers:this.countGroupReviewers(j),name:j.name,requirements:j.requirement_to_approve,cancel_if_modified:j.cancel_on_publication_modified,wait_for_due_date:j.wait_for_due_date,request_details_locked:j.request_details_locked,message:j.default_message,default_duration:j.default_duration/60/60/24};(0,c.s)("create approval preset",T)},this.approvalRequestPresetSetting.itemUpdated=j=>{const S=this.$ctx.dataAsObject("approvalRequestPresets").map(T=>T.id===parseInt(j.id)?j:T);this.$ctx.dataAsObject("approvalRequestPresets",S)},this.approvalRequestPresetSetting.itemDeleted=j=>{const S=this.$ctx.dataAsObject("approvalRequestPresets").filter(T=>T.id!==parseInt(j));this.$ctx.dataAsObject("approvalRequestPresets",S)}}extendFormData(j){const $={id:j.approvalPresetId||null,project_id:this.projectId,name:j.name||null,default_message:j.defaultMessage,default_duration:parseInt(j.defaultDuration)*24*60*60,requirement_to_approve:j.requirementToApprove,reviewers_locked:!0,settings_locked:!0,request_details_locked:j.requestDetailsLocked,review_user_ids:j.reviewerUsersAndGroups.selection.users,review_group_ids:j.reviewerUsersAndGroups.selection.groups};return $.cancel_on_publication_modified=Object.prototype.hasOwnProperty.call(j,"cancelOnPublicationModified"),$.wait_for_due_date=Object.prototype.hasOwnProperty.call(j,"waitForDueDate"),$}handleFormDependencies(j){const $=j.getElem("waitForDueDate"),S=j.getElem("requirementToApprove");S.changed=T=>{T.requirementToApprove===h.REQUIREMENT_FIRST_RESPONSE?($.uncheckAll(),$.disableAll()):$.enableAll()}}countGroupReviewers(j){var $;const S=($=j.review_groups)==null?void 0:$.reduce((T,A)=>{const B=A.users.map(R=>R.id);for(const R of B)T.includes(R)||T.push(R);return T},[]);return(S==null?void 0:S.length)||0}}},85620:function(fe,F,i){"use strict";i.d(F,{a:function(){return h}});var e=i(86070),u=i(49290),f=i(2728),b=i(38020),y=i(59240),n=i(29083),w=i(14154);const E=(0,w.I)(g=>(0,e.jsxs)("div",{className:"cm-settings-detail__delete cm-btn-dropdown cm-btn--right js-cm-setting-list__details-delete",children:[(0,e.jsx)("button",{type:"button",className:"cm-actions__action js-cm-btn-dropdown__toggle",title:window.translate("Legacy_btn_actions"),children:(0,e.jsx)("i",{className:"ca-icon--actions ca-icon--md"})}),(0,e.jsx)("div",{className:" cm-btn-dropdown__menu cm-btn-dropdown__menu--right js-cm-btn-dropdown__menu",children:(0,e.jsx)("div",{className:" cm-btn-dropdown__items js-cm-setting-list__details-delete-container","data-value":g.value,"data-delete":window.translate("Legacy_btn_delete"),"data-delete-confirmation":window.translate("Legacy_workspace_settings_publishing_approvals_delete_confirmation")})})]}));var x=i(62878),C=i(87349),v=i(90307),m=i(83858),c=i(50427),o=i(84090),l=i(78639);const h=(0,w.I)(g=>{let j=!1;g.item&&g.item.requirement_to_approve===l.o.REQUIREMENT_FIRST_RESPONSE&&(j=!0);const $=(0,c.EY)(v.f,{id:"requestDetailsLocked",checked:g.item?g.item.request_details_locked:!1,lockStyle:!0,tooltipLocked:window.translate("Legacy_workspace_approval_preset_details_locked_tooltip"),tooltipUnlocked:window.translate("Legacy_workspace_approval_preset_details_unlocked_tooltip")});return(0,e.jsxs)("form",{className:"cm-setting__details cm-setting__details--no-padding-top cm-setting-list__details","data-hidden-fields-validated":"true",children:[(0,e.jsx)(n.f,{id:"approvalPresetId",value:g.item?g.item.id:null}),(0,e.jsxs)("div",{className:"cm-setting__details-fields",children:[(0,e.jsx)(o.p,{size:"large",title:window.translate("Legacy_workspace_settings_publishing_approvals_divider_reviewers"),hasNegativeMargin:!0}),(0,e.jsx)(m.u,{id:"reviewerUsersAndGroups",apiAllUsers:`/api/collaborator/feedback-list/${g.data.projectId}?groups=true`,apiAllGroups:"/api/groups/list",value:{id:{users:g.item&&g.item.review_users!==null?g.item.review_users.map(S=>S.id):[],groups:g.item&&g.item.review_groups!==null?g.item.review_groups.map(S=>S.id):[]},data:{users:g.item&&g.item.review_users!==null?g.item.review_users:[],groups:g.item&&g.item.review_groups!==null?g.item.review_groups:[]}},excludeCurrentUser:!1,noIndent:!0,required:!0,showBlankSlateImage:!1,unlimitedListHeight:!0,translations:{openModalButton:window.translate("Legacy_workspace_approval_create_add_reviewer_initial"),addUserButtonInitial:window.translate("Legacy_workspace_approval_create_add_reviewer_initial"),addUserButtonSingular:window.translate("Legacy_workspace_approval_create_add_reviewer_singular"),addUserButtonPlural:window.translate("Legacy_workspace_approval_create_add_reviewer_other"),blankSlateMessage:window.translate("Legacy_workspace_settings_publishing_approvals_blankslate_message"),requiredError:window.translate("Legacy_workspace_approval_create_approval_error_reviewer")}})]}),(0,e.jsxs)("div",{className:"cm-setting__details-fields",children:[(0,e.jsx)(o.p,{size:"large",title:window.translate("Legacy_workspace_settings_publishing_approvals_divider_settings"),hasNegativeMargin:!0}),(0,e.jsx)(x.A,{id:"name",label:window.translate("Legacy_workspace_settings_publishing_approvals_label_name"),value:g.item?g.item.name:"",border:!0,placeholder:window.translate("Legacy_workspace_settings_publishing_approvals_placeholder_name"),required:!0}),(0,e.jsx)(y.U,{id:"requirementToApprove",label:window.translate("Legacy_workspace_settings_publishing_approvals_label_approval_requirement"),value:g.item?g.item.requirement_to_approve:l.o.REQUIREMENT_NO_REJECTIONS,options:[{value:l.o.REQUIREMENT_NO_REJECTIONS,name:window.translate("Legacy_workspace_settings_publishing_approvals_label_no_rejections")},{value:l.o.REQUIREMENT_FIRST_RESPONSE,name:window.translate("Legacy_workspace_settings_publishing_approvals_label_first_response")},{value:l.o.REQUIREMENT_MAJORITY_APPROVES,name:window.translate("Legacy_workspace_settings_publishing_approvals_label_majority")},{value:l.o.REQUIREMENT_UNANIMOUS,name:window.translate("Legacy_workspace_settings_publishing_approvals_label_unanimous")}]}),(0,e.jsx)(b.k,{id:"waitForDueDate",checkboxModifier:"md",disable_label:!0,options:[{value:"waitForDueDate",label:window.translate("Legacy_workspace_settings_publishing_approvals_label_wait_due_date"),checked:g.item?g.item.wait_for_due_date:!1,disabled:j}]}),(0,e.jsx)(b.k,{id:"cancelOnPublicationModified",checkboxModifier:"md",options:[{value:"cancelOnPublicationModified",label:window.translate("Legacy_workspace_settings_publishing_approvals_label_cancel_on_publication_modified"),checked:g.item?g.item.cancel_on_publication_modified:!0}]})]}),(0,e.jsxs)("div",{className:"cm-setting__details-fields",children:[(0,e.jsx)(o.p,{size:"large",title:window.translate("Legacy_workspace_settings_publishing_approvals_divider_request_details"),hasNegativeMargin:!0,setting:$}),(0,e.jsx)(C.D,{id:"defaultMessage",label:window.translate("Legacy_workspace_settings_publishing_approvals_label_message"),placeholder:window.translate("Legacy_workspace_settings_publishing_approvals_placeholder_message"),value:g.item?g.item.default_message:""}),(0,e.jsx)(x.A,{id:"defaultDuration",label:window.translate("Legacy_workspace_settings_publishing_approvals_label_duration"),type:"number",value:g.item?g.item.default_duration/60/60/24:l.o.DEFAULT_DURATION_VALUE,suffix:window.translate("Legacy_workspace_settings_publishing_approvals_label_day_singular")})]}),(0,e.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer cm-setting__actions cm-setting__actions--flyout js-cm-setting__actions js-cm-setting-list__actions",children:[(0,e.jsx)(u.t,{}),(0,e.jsx)(f.b,{}),g.item?(0,e.jsx)(E,{value:g.item.id}):null]})]})})},26285:function(fe,F,i){"use strict";i.d(F,{s:function(){return y}});var e=i(86070),u=i(93791),f=i(78149),b=i(14154);const y=(0,b.I)(n=>{var w;return n.items&&n.items.length>0?(w=n.items)==null?void 0:w.map(E=>(0,e.jsxs)("div",{className:"cm-setting-list__item cm-setting-list__item--extended-padding cm-setting-list__item--border js-cm-setting-list__item","data-id":E.id,children:[(0,e.jsxs)("div",{className:"cm-setting-list__col cm-setting-list__col--value",children:[(0,e.jsx)("div",{className:"cm-setting-list__avatar js-cm-setting-list__avatar"}),(0,e.jsx)("div",{className:"cm-setting-list__text-value cm-setting-list__text-value--black",children:E.name})]}),(0,e.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings cm-setting-list__col--no-padding cm-setting-list__col--opacity-0",children:(0,e.jsx)("button",{className:"cm-actions__action",children:(0,e.jsx)(f.V,{icon:"settings",size:u.l.SIZE_MEDIUM,classes:"js-cm-setting-list__edit"})})})]},E.id)):(0,e.jsxs)("div",{className:"co-settings__blank cm-setting-list__blank",children:[(0,e.jsx)("div",{className:"co-settings__blank--title",children:n.title_none}),(0,e.jsx)("div",{className:"co-settings__blank--placeholder",children:n.label_none})]})})},79749:function(fe,F,i){"use strict";i.d(F,{G:function(){return v}});var e=i(86070),u=i(93277),f=i(87053),b=i(14154),y=Object.defineProperty,n=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,x=(m,c,o)=>c in m?y(m,c,{enumerable:!0,configurable:!0,writable:!0,value:o}):m[c]=o,C=(m,c)=>{for(var o in c||(c={}))w.call(c,o)&&x(m,o,c[o]);if(n)for(var o of n(c))E.call(c,o)&&x(m,o,c[o]);return m};const v=(0,b.I)(m=>(0,e.jsxs)(e.Fragment,{children:[m.label?(0,e.jsx)("label",{className:"cm-setting__label cm-setting-list__label",children:m.label}):null,(0,e.jsxs)("div",{className:"cm-setting-list__wrapper",children:[(0,e.jsx)("div",{className:"js-cm-setting-list__items cm-setting-list__items cm-setting-list__items--no-max-height cm-setting-list__items--no-padding",children:typeof m.templates.listReact=="function"?(0,e.jsx)(m.templates.listReact,C({},m)):null}),(0,e.jsxs)("div",{className:"cm-setting-list__add-section cm-setting-list__add-section--bottom js-cm-setting-list__add-section",children:[(0,e.jsx)("div",{className:"cm-setting-list__btn-bar",children:(0,e.jsx)(f.S,{label:m.label_add,size:u.Q.SIZE_SMALL,style:u.Q.STYLE_SECONDARY,background:u.Q.BACKGROUND_BLACK_05,icon:"add"})}),(0,e.jsx)("div",{className:"cm-setting-list__form-container js-cm-setting-list__form-container"})]})]})]}))},8370:function(fe,F,i){"use strict";i.d(F,{h:function(){return v}});var e=i(86070),u=i(49290),f=i(2728),b=i(59240),y=i(61447),n=i(56754),w=i(97866),E=i(62878),x=i(90307),C=i(14154);const v=(0,C.I)(m=>{const c=[{value:"Text",name:"Text"},{value:"Email",name:"Email"},{value:"Textarea",name:"Textarea"},{value:"Dropdown",name:"Dropdown"},{value:"Date",name:"Date"}];return(0,e.jsxs)("form",{className:"cm-setting__details cm-setting-list__details",children:[(0,e.jsxs)("div",{className:"cm-setting__details-fields",children:[(0,e.jsx)(b.U,{id:"type",label:"Type",required:!0,readonly:!0,value:m.data.type?m.data.type:null,options:c}),(0,e.jsx)(E.A,{id:"label",label:"Label",maxlength:60,required:!0,placeholder:"eg. Your Name"}),m.data.type==="Dropdown"?(0,e.jsx)(y.v,{id:"values",templates:{list:"c-setting-elem-list-list-default",listReact:n.Q,wrap:"c-setting-elem-list-wrap-default",wrapReact:w.i},classes:"state-border",label:"Values",items:m.data.values||[]}):(0,e.jsx)(E.A,{id:"placeholder",label:"Placeholder",maxlength:40,placeholder:"e.g. John Doe"}),(0,e.jsx)(x.f,{id:"required",label:"Required",disabled:!1,checked:!0})]}),(0,e.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer js-cm-setting__actions cm-setting__actions cm-setting__actions--flyout js-cm-setting-list__actions",children:[(0,e.jsx)(u.t,{}),(0,e.jsx)(f.b,{})]})]})})},36970:function(fe,F,i){"use strict";i.d(F,{g:function(){return v}});var e=i(86070),u=i(49290),f=i(2728),b=i(29083),y=i(61447),n=i(56754),w=i(97866),E=i(62878),x=i(90307),C=i(14154);const v=(0,C.I)(m=>(0,e.jsxs)("form",{className:"cm-setting__details cm-setting-list__details",children:[(0,e.jsxs)("div",{className:"cm-setting__details-fields",children:[(0,e.jsx)(E.A,{id:"type",label:"Type",required:!0,disabled:!0,readonly:!0,value:m.item.type,placeholder:""}),(0,e.jsx)(E.A,{id:"label",label:"Label",required:!0,value:m.item.label,maxlength:60,placeholder:"eg. Your Name"}),m.item.type==="Dropdown"?(0,e.jsx)(y.v,{id:"values",templates:{list:"c-setting-elem-list-list-default",listReact:n.Q,wrap:"c-setting-elem-list-wrap-default",wrapReact:w.i},classes:"state-border",label:"Values",items:m.item.values||[]}):(0,e.jsx)(E.A,{id:"placeholder",label:"Placeholder",maxlength:40,value:m.item.placeholder,placeholder:"e.g. John Doe"}),(0,e.jsxs)("a",{className:"co-settings__accordion-open js-co-settings__accordion-open",href:"javascript:;",children:[(0,e.jsx)("i",{className:"icon icon-angle-down"})," Advanced"]}),(0,e.jsx)("div",{className:"co-settings__accordion-content js-co-settings__accordion-content state-closed",children:(0,e.jsx)(x.f,{id:"required",label:"Required",disabled:m.item.removable===!1,checked:!!m.item.required})}),(0,e.jsx)(b.f,{id:"id",value:m.item.id}),(0,e.jsx)(b.f,{id:"value",value:m.item.id}),(0,e.jsx)(b.f,{id:"removable",value:m.item.removable})]}),(0,e.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer js-cm-setting__actions cm-setting__actions cm-setting__actions--flyout js-cm-setting-list__actions",children:[(0,e.jsx)(u.t,{}),(0,e.jsx)(f.b,{})]})]}))},82209:function(fe,F,i){"use strict";i.d(F,{L:function(){return x}});var e=i(86070),u=i(49290),f=i(2728),b=i(29083),y=i(5944),n=i(62878),w=i(90307),E=i(14154);const x=(0,E.I)(C=>(0,e.jsxs)("form",{className:"cm-setting__details cm-setting-list__details",children:[(0,e.jsxs)("div",{className:"cm-setting__details-fields",children:[(0,e.jsx)(n.A,{id:"title",label:window.translate("Legacy_txt_license_title"),placeholder:window.translate("Legacy_txt_license_title_placeholder"),required:!0}),(0,e.jsx)(y.O,{id:"license",label:window.translate("Legacy_txt_license_license"),placeholder:window.translate("Legacy_txt_license_license_placeholder"),value:"",toolbar:{bold:!0,italic:!0,link:!0,color:!0}}),(0,e.jsx)(w.f,{id:"add_by_default",label:window.translate("Legacy_powerbar_menu_settings_medialibrary_licenses_by_defeault")}),(0,e.jsx)(w.f,{id:"require_consensus",label:window.translate("Legacy_powerbar_menu_settings_medialibrary_licenses_consensus_required")}),(0,e.jsx)(b.f,{id:"project_id",value:C.data.project})]}),(0,e.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer js-cm-setting__actions cm-setting__actions cm-setting__actions--flyout js-cm-setting-list__actions",children:[(0,e.jsx)(u.t,{}),(0,e.jsx)(f.b,{})]})]}))},29430:function(fe,F,i){"use strict";i.d(F,{U:function(){return x}});var e=i(86070),u=i(49290),f=i(2728),b=i(29083),y=i(5944),n=i(62878),w=i(90307),E=i(14154);const x=(0,E.I)(C=>(0,e.jsxs)("form",{className:"cm-setting__details cm-setting-list__details",children:[(0,e.jsxs)("div",{className:"cm-setting__details-fields",children:[(0,e.jsx)(b.f,{id:"id",value:C.item.id}),(0,e.jsx)(n.A,{id:"title",label:window.translate("Legacy_txt_license_title"),value:C.item.title}),(0,e.jsx)(y.O,{id:"license",label:window.translate("Legacy_txt_license_license"),placeholder:window.translate("Legacy_txt_license_license_placeholder"),value:C.item.license,toolbar:{bold:!0,italic:!0,link:!0,color:!0}}),(0,e.jsx)(w.f,{id:"add_by_default",label:window.translate("Legacy_powerbar_menu_settings_medialibrary_licenses_by_defeault"),checked:C.item.add_by_default,required:!1}),(0,e.jsx)(w.f,{id:"require_consensus",label:window.translate("Legacy_powerbar_menu_settings_medialibrary_licenses_consensus_required"),checked:C.item.require_consensus})]}),(0,e.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer js-cm-setting__actions cm-setting__actions cm-setting__actions--flyout js-cm-setting-list__actions",children:[(0,e.jsx)(u.t,{}),(0,e.jsx)(f.b,{})]})]}))},5410:function(fe,F,i){"use strict";i.d(F,{K:function(){return y}});var e=i(86070),u=i(46223),f=i(45924),b=i(14154);const y=(0,b.I)(n=>{var w;return n.items&&n.items.length>0?(w=n.items)==null?void 0:w.map(E=>(0,e.jsxs)("div",{className:"js-cm-setting-list__item cm-setting-list__item","data-id":E.id,role:"listitem",children:[(0,e.jsxs)("div",{className:"cm-setting-list__col cm-setting-list__col--value",children:[(0,e.jsx)("i",{className:"icon-bars cm-setting-list__move js-cm-setting-list__move cm-setting-list__icon"}),(0,e.jsx)("div",{className:"cm-setting-list__text-value",children:E.title})]}),(0,e.jsx)("button",{className:(0,u.h)(["cm-setting-list__col cm-setting-list__col--settings js-cm-setting-list__edit",f.OA]),"aria-label":"Edit",children:(0,e.jsx)("i",{className:"ca-icon--settings cm-setting-list__icon"})}),(0,e.jsx)("button",{className:(0,u.h)(["cm-setting-list__col cm-setting-list__col--settings js-cm-setting-list__remove",f.OA]),"aria-label":"Delete",children:(0,e.jsx)("i",{className:"ca-icon--trash cm-setting-list__remove cm-setting-list__icon","data-confirm":"true"})})]},E.id)):(0,e.jsx)("div",{className:"co-settings__blank cm-setting-list__blank",children:n.label_none})})},1505:function(fe,F,i){"use strict";i.d(F,{T:function(){return y}});var e=i(86070),u=i(93791),f=i(78149),b=i(14154);const y=(0,b.I)(n=>{var w;return n.items&&n.items.length>0?(w=n.items)==null?void 0:w.map(E=>E.screenId?(0,e.jsx)("div",{className:"js-cm-setting-list__item cm-setting-asset-chooser-list__item","data-id":E.screenId,"data-screen-id":E.screenId,children:(0,e.jsxs)("div",{className:"cm-setting-asset-chooser-list__col cm-setting__label--inline",style:{display:"flex",alignItems:"center",width:"100%"},children:[(0,e.jsx)("span",{style:{marginRight:"12px"},children:(0,e.jsx)(f.V,{icon:"text-snippet",size:u.l.SIZE_LARGE})}),(0,e.jsx)("div",{style:{width:"100%"},children:E.screenName}),(0,e.jsx)("div",{className:"cm-setting-multivalue__setting",children:(0,e.jsx)("div",{className:"js-cm-setting-multivalue__chooser",children:(0,e.jsx)("i",{className:"ca-icon--trash cm-setting-asset-chooser-list__remove js-cm-setting-list__remove cm-setting-asset-chooser-list__icon","data-confirm":"true"})})})]})},E.screenId):null):(0,e.jsx)("div",{className:"co-settings__blank cm-setting-list__blank",children:n.label_none})})},73795:function(fe,F,i){"use strict";i.d(F,{O:function(){return h}});var e=i(86070),u=i(14154),f=i(91080);const b=(0,u.I)(g=>{const j=!g.data.has_selected_targets&&g.data.disabled.length===0,$=g.data.disabled.length>0,S=g.data.targets.length+g.data.disabled.length<8?"":"two-cols";return(0,e.jsxs)(e.Fragment,{children:[g.isInBlock?(0,e.jsxs)("div",{className:"co-targetsoptions__mode_slider_label cm-setting__label cm-setting__label--space-bottom",children:[" ","Targets"," "]}):null,(0,e.jsx)("div",{className:"js-co-targetsoptions__mode_slider_wrapper co-targetsoptions__mode_slider_wrapper","data-all-viewers":j,"data-disabled":$}),(0,e.jsxs)("div",{className:`js-co-targetsoptions__targets_settings co-targetsoptions__mode_slider_results--overflow-scroll  co-targetsoptions__targets_settings${j?" state-hidden ":""}${g.borderBottom?" co-targetsoptions__targets_settings--bordered":""}`,children:[g.data.targets.length>0?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"js-co-targetsoptions__targets_select_deselect_all-wrapper"}),(0,e.jsx)(f.R,{id:"targets",name:"targets",options:g.data.targets,modifier:S,disable_label:!0,class:$?"cm-setting--borderless":!1})]}):null,$?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(f.R,{id:"group-targets",name:"disabled-targets",options:g.data.disabled,modifier:S,disable_label:!0,label:window.translate("Legacy_targets_unavailable_targets"),class:"cm-setting--borderless",readonly:!0}),(0,e.jsx)("div",{className:"co-settings__blank co-targetsoptions__higher-level-text",children:(0,e.jsx)("p",{children:window.translate("Legacy_targets_inherited_restriction")})})]}):null]})]})});var y=i(82110);const n=(0,u.I)(g=>{const $=g.data.disabled.length>0;return(0,e.jsxs)(e.Fragment,{children:[g.isInBlock?(0,e.jsxs)("div",{className:"co-targetsoptions__mode_slider_label cm-setting__label cm-setting__label--space-bottom",children:[" ","Targets"," "]}):null,(0,e.jsx)("div",{className:"js-co-targetsoptions__mode_slider_wrapper co-targetsoptions__mode_slider_wrapper","data-all-viewers":!0,"data-disabled":$}),(0,e.jsx)("div",{className:`js-co-targetsoptions__targets_blankslate co-targetsoptions__targets_blankslate state-hidden${g.borderBottom?" co-targetsoptions__targets_settings--bordered":""}`,children:(0,e.jsxs)("p",{children:[window.translate("Legacy_targets_chooser_no_available_targets_title"),"."," ",(0,y.Np)()?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("br",{}),(0,e.jsx)("a",{className:"ca-link",href:"/usage",title:"Usage page",children:window.translate("Legacy_targets_none_click_here")}),` ${window.translate("Legacy_targets_no_targets_define_here")}`]}):null]})})]})});var w=Object.defineProperty,E=Object.defineProperties,x=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,c=(g,j,$)=>j in g?w(g,j,{enumerable:!0,configurable:!0,writable:!0,value:$}):g[j]=$,o=(g,j)=>{for(var $ in j||(j={}))v.call(j,$)&&c(g,$,j[$]);if(C)for(var $ of C(j))m.call(j,$)&&c(g,$,j[$]);return g},l=(g,j)=>E(g,x(j));const h=(0,u.I)(g=>(0,e.jsx)("div",l(o({className:"mod mod-c-settings-target-options co-targetsoptions js-co-targetsoptions","data-type":g.type,"data-asset-ids":JSON.stringify(g.ids),"data-select-all-enabled":"true"},g.simulationMode?{"data-simulation-mode":"1"}:{}),{children:g.data.targets.length===0&&g.data.disabled.length===0?(0,e.jsx)(n,o({},g)):(0,e.jsx)(b,o({},g))})))},74083:function(fe,F,i){"use strict";i.d(F,{S:function(){return E}});var e=i(86070),u=i(49290),f=i(2728),b=i(85131),y=i(14154),n=i(42735),w=i(35914);const E=(0,y.I)(x=>(0,e.jsxs)("form",{className:"cm-setting__details cm-setting-list__details",children:[(0,e.jsx)("div",{className:"cm-setting__details-fields",children:(0,e.jsx)(b.j,{id:"language",clear_search:!0,placeholder:"e.g. language name, ISO 639-1 code",templates:{content:"c-settingstextlibrary-setting-list-i18n-search-content",contentReact:n.M,preview:"c-settingstextlibrary-setting-list-i18n-search-item",previewReact:w.k},required:!0,previewData:{label:"",language:"",default:""},msg:"Please choose an existing language",label:window.translate("Legacy_textlibrary_settings_project_languages_language_field_label"),data:x.utils.iso.getLanguagesAsArray()})}),(0,e.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer js-cm-setting__actions cm-setting__actions cm-setting__actions--flyout js-cm-setting-list__actions",children:[(0,e.jsx)(u.t,{}),(0,e.jsx)(f.b,{})]})]}))},70524:function(fe,F,i){"use strict";i.d(F,{Z:function(){return x}});var e=i(86070),u=i(49290),f=i(2728),b=i(29083),y=i(85131),n=i(14154),w=i(42735),E=i(35914);const x=(0,n.I)(C=>(0,e.jsxs)("form",{className:"cm-setting__details cm-setting-list__details",children:[(0,e.jsxs)("div",{className:"cm-setting__details-fields",children:[(0,e.jsx)(y.j,{id:"language",placeholder:"e.g. language name, ISO 639-1 code",clear_search:!0,templates:{content:"c-settingstextlibrary-setting-list-i18n-search-content",contentReact:w.M,preview:"c-settingstextlibrary-setting-list-i18n-search-item",previewReact:E.k},required:!0,previewData:{label:C.item.label,language:C.item.language,default:C.item.default},msg:"Please choose a valid language",label:window.translate("Legacy_textlibrary_settings_project_languages_language_field_label"),data:C.utils.iso.getLanguagesAsArray()}),(0,e.jsx)(b.f,{id:"id",value:C.data.project}),(0,e.jsx)(b.f,{id:"default",value:C.item.default})]}),(0,e.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer js-cm-setting__actions cm-setting__actions cm-setting__actions--flyout js-cm-setting-list__actions",children:[(0,e.jsx)(u.t,{}),(0,e.jsx)(f.b,{})]})]}))},39364:function(fe,F,i){"use strict";i.d(F,{B:function(){return f}});var e=i(86070),u=i(14154);const f=(0,u.I)(b=>{var y;return b.items&&b.items.length>0?(y=b.items)==null?void 0:y.map(n=>n.language?(0,e.jsxs)("div",{className:"js-cm-setting-list__item cm-setting-list__item","data-language":n.language,children:[(0,e.jsxs)("div",{className:"cm-setting-list__col cm-setting-list__col--value",children:[n.label," - ",n.language]}),(0,e.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,e.jsx)("i",{className:"ca-icon--trash cm-setting-list__remove js-cm-setting-list__remove cm-setting-list__icon","data-confirm":"true"})})]},n.language):null):(0,e.jsx)("div",{className:"co-settings__blank cm-setting-list__blank",children:b.label_none})})},42735:function(fe,F,i){"use strict";i.d(F,{M:function(){return b}});var e=i(86070),u=i(14154),f=i(35914);const b=(0,u.I)(y=>{var n;return(n=y.data)==null?void 0:n.map(w=>(0,e.jsx)(f.k,{language:w.isoCode,label:w.name},w.isoCode))})},35914:function(fe,F,i){"use strict";i.d(F,{k:function(){return f}});var e=i(86070),u=i(14154);const f=(0,u.I)(b=>(0,e.jsx)("div",{className:"co-settings-textlibrary__search-item js-cm-setting-search__item","data-language":`${b.language?`${b.language}`:""}`,"data-value":`${b.language?`${b.language}`:""}`,"data-label":`${b.label?`${b.label}`:""}`,"data-default":`${b.default?`${b.default}`:""}`,children:(0,e.jsxs)("div",{className:"co-settings-textlibrary__search-item__sb-title",children:[(0,e.jsx)("span",{className:"co-settings-textlibrary__sb-name",children:b.label?b.label:null}),(0,e.jsx)("span",{className:"co-settings-textlibrary__sb-opacity",children:b.label?"":b.placeholder?b.placeholder:" e.g. language name, ISO 639-1 code "}),(0,e.jsx)("span",{className:"co-settings-textlibrary__sb-value",children:(0,e.jsx)("span",{className:"hex",children:b.language?b.language:null})})]})}))},2231:function(fe,F,i){"use strict";i.d(F,{D:function(){return f}});var e=i(86070),u=i(14154);const f=(0,u.I)(b=>{var y;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{className:"co-swal__text",children:b.error_message}),(0,e.jsx)("ul",{className:"co-swal__list",children:(y=b.reference_list)==null?void 0:y.map((n,w)=>(0,e.jsx)("li",{className:"co-swal__list-item",children:(0,e.jsxs)("a",{href:n.url,target:"_blank",className:"co-swal__link",children:[n.url_title,(0,e.jsx)("i",{className:"icon-external-link"})]})},w))})]})})},82296:function(fe,F,i){"use strict";i.d(F,{m:function(){return j}});var e=i(86070),u=i(75573),f=i(93791),b=i(78149),y=i(14154),n=i(77345),w=i(23245);const E=(0,y.I)($=>{const S=$.selectionRequired?"validate-multiselect":"";return(0,e.jsxs)("div",{className:"cm-setting-users__user js-cm-setting-users__user","data-jets":`${($.group.name||"").toLowerCase()} ${($.group.email||"").toLowerCase()}`,children:[(0,e.jsx)("div",{className:"cm-setting-users__avatar",children:(0,e.jsx)(w.p,{imageUrl:$.group.avatar_preview_url||$.group.preview_url_without_placeholder,gravatarHash:$.group.gravatar_hash,name:$.group.name,size:n.Z.SIZE_24,state:n.Z.STATE_DEFAULT})}),(0,e.jsxs)("div",{className:"cm-setting-users__name-and-email",children:[$.group.name?(0,e.jsx)("div",{className:"cm-setting-users__name js-cm-setting-users__name",children:$.group.name||""}):null,(0,e.jsx)("div",{className:`cm-setting-users__email ${$.group.name?"":"cm-setting-users__email--email-only"}`,children:$.group.email||""})]}),$.group.name?null:(0,e.jsx)("span",{className:"ca-badge ca-badge--grey cm-setting-users__invitation-pending",children:window.translate("Legacy_group_add_users_invitation_pending")}),(0,e.jsx)(u.z,{id:`${$.id}-${$.group.id}`,name:`${$.id}-${$.group.id}`,value:$.group.id,checked:$.group.checked,modifier:"sm",disabled:$.group.name===null,indeterminate:$.group.name===null,classes:`js-cm-setting-users__item-checkbox-input ${S}`,label_classes:"cm-setting-users__checkbox js-cm-setting-users__checkbox",data:{name:$.group.name,"user-id":$.group.id,msg:$.error_message||window.translate("Legacy_settings_users_validation_error")}})]})});var x=Object.defineProperty,C=Object.defineProperties,v=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=($,S,T)=>S in $?x($,S,{enumerable:!0,configurable:!0,writable:!0,value:T}):$[S]=T,h=($,S)=>{for(var T in S||(S={}))c.call(S,T)&&l($,T,S[T]);if(m)for(var T of m(S))o.call(S,T)&&l($,T,S[T]);return $},g=($,S)=>C($,v(S));const j=(0,y.I)($=>{var S,T;return(0,e.jsx)("div",{className:"js-co-settings__elem cm-setting__elem cm-setting-groups","data-id":$.id,"data-type":"users","data-label-selectall":window.translate("Legacy_settings_users_selectall"),"data-label-unselectall":window.translate("Legacy_settings_users_unselectall"),"data-not-found-label":$.notFoundLabel,"data-search-enabled":$.searchEnabled,children:(0,e.jsxs)("div",{className:"cm-setting__preview cm-setting__bar js-cm-setting__bar",children:[$.label?(0,e.jsx)("label",{htmlFor:"users",className:"cm-setting__label",children:$.label}):null,(0,e.jsx)("div",{className:"cm-setting-users__validation-error js-cm-setting-users__validation-error"}),$.searchEnabled?(0,e.jsxs)("div",{className:`cm-setting-users__filter ${$.modifier?`cm-setting-users__filter--${$.modifier}`:""}`,children:[(0,e.jsx)(b.V,{icon:"search",size:f.l.SIZE_SMALL,classes:"cm-setting-users__filter-icon"}),(0,e.jsx)("input",{className:`cm-setting-users__filter-query js-cm-setting-users__filter-query-${$.id}`,type:"text",placeholder:`${$.searchPlaceholder?`${$.searchPlaceholder}`:`${window.translate("Legacy_placeholder_search")}`}`})]}):null,$.selectAllEnabled?(0,e.jsx)("div",{className:"cm-setting-users__select",children:(0,e.jsx)(u.z,{id:`select-${$.id}`,name:`select-${$.id}`,label:window.translate("Legacy_settings_users_selectall"),modifier:"sm",disabled:!1,classes:"js-cm-setting-users__select-all-checkbox",label_classes:"cm-setting-users__select-label js-cm-setting-users__select-label"})}):null,(0,e.jsxs)("div",{className:`cm-setting-users__list ${$.modifier?`cm-setting-users__list--${$.modifier}`:""} ${$.maxShowUsers?`cm-setting-users__list--max-users-height-${$.maxShowUsers}`:""} js-cm-setting-users__list-${$.id}`,children:[(0,e.jsx)("div",{className:`cm-setting-users__search-container js-cm-setting-users__search-container-${$.id}`,children:(S=$.groups)==null?void 0:S.map((A,B)=>(0,e.jsx)(E,g(h({},$),{group:A}),B))}),(T=$.groupedGroups)==null?void 0:T.map((A,B)=>{var R;return(0,e.jsxs)("div",{className:"co-team__foreign-group-container",children:[(0,e.jsx)("div",{className:"co-team__foreign-group-title",children:A.account_name?(0,e.jsxs)(e.Fragment,{children:[A.account_name,(0,e.jsx)(e.Fragment,{children:window.translate("Legacy_settings_team_groups")})]}):window.translate("Legacy_settings_team_unnamed_organization_groups")}),(0,e.jsx)("div",{className:`cm-setting-users__search-container js-cm-setting-users__search-container-${$.id}`,children:(R=A.groups)==null?void 0:R.map((k,V)=>(0,e.jsx)(E,g(h({},$),{group:k}),V))})]},B)}),$.searchEnabled?(0,e.jsx)("div",{className:`cm-setting-users__not-found js-cm-setting-users__not-found${`-${$.id}`}`}):null]})]})})})},75736:function(fe,F,i){"use strict";i.d(F,{N:function(){return y}});var e=i(86070),u=i(78149),f=i(4957),b=i(14154);const y=(0,b.I)(n=>{var w;return(0,e.jsxs)("div",{className:"mod mod-c-template-chooser co-templatechooser","data-associated-block-id":n.associatedBlockId,"data-project-id":n.projectId,"data-styleguide-id":n.styleguideId,"data-set-id":n.setId,"data-new-publication":n.newPublication,"data-is-storyteq":n.isStoryteq,children:[(0,e.jsxs)("div",{className:"co-sidebarchooser co-templatechooser__sidebar js-co-templatechooser__sidebar",children:[(0,e.jsx)("div",{className:"co-templatechooser__sidebar-tree js-co-templatechooser__sidebar-tree"}),n.appearance&&n.appearance.createpublication?(0,e.jsxs)("div",{className:"co-templatechooser__sidebar-help",children:[n.appearance.createpublication.help.title?(0,e.jsx)("div",{className:"co-templatechooser__sidebar-help-title",children:n.appearance.createpublication.help.title}):null,(w=n.appearance.createpublication.help.contacts)==null?void 0:w.map((E,x)=>(0,e.jsx)("div",{className:"co-templatechooser__sidebar-help-contact",children:E==null?void 0:E.map((C,v)=>(0,e.jsx)("div",{className:"co-templatechooser__sidebar-help-info",children:C},v))},x))]}):null]}),(0,e.jsxs)("div",{className:"co-templatechooser__main",children:[(0,e.jsx)("div",{className:"co-templatechooser__browser js-co-templatechooser__browser",children:(0,e.jsx)("div",{className:"js-co-templatechooser__loader co-templatechooser__loader",children:(0,e.jsx)(f.T,{})})}),(0,e.jsxs)("div",{className:"co-templatechooser__footer js-co-templatechooser__footer",children:[(0,e.jsx)("div",{className:" co-templatechooser__footer-selected-template-container js-co-templatechooser__footer-selected-template-container"}),(0,e.jsxs)("div",{className:"co-templatechooser__footer-actions",children:[(0,e.jsx)("button",{type:"button",className:"cm-btn cm-btn--default co-templatechooser__cancel-button js-co-templatechooser__cancel-button",children:window.translate("TemplateChooser_buttonCancel")}),(0,e.jsxs)("button",{type:"button",className:"cm-btn cm-btn--primary co-templatechooser__choose-button js-co-templatechooser__choose-button",disabled:!0,children:[(0,e.jsx)(u.V,{icon:"arrow-right"})," ",(0,e.jsx)("span",{className:"co-templatechooser__choose-button-label",children:window.translate("TemplateChooser_buttonUseThisTemplate")})]})]})]})]})]})})},70690:function(fe,F,i){"use strict";i.d(F,{o:function(){return f}});var e=i(86070),u=i(14154);const f=(0,u.I)(b=>(0,e.jsxs)("div",{className:"mod mod-c-viewer co-viewer reactify-asset-detail-view","data-theme":b.theme,children:[(0,e.jsx)("div",{className:"co-viewer__bg js-co-viewer__bg"}),(0,e.jsxs)("div",{className:"co-viewer__window js-co-viewer__window",children:[(0,e.jsx)("a",{href:"javascript:;",className:"co-viewer__close js-co-viewer__close",title:window.translate("FrontendAssetViewer_close"),"aria-label":window.translate("FrontendAssetViewer_close")}),(0,e.jsx)("div",{className:"co-viewer__left-sidebar js-co-viewer__left-sidebar"}),(0,e.jsxs)("div",{className:"co-viewer__content js-co-viewer__content",children:[(0,e.jsx)("div",{className:"co-viewer__wrap js-co-viewer__wrap"}),(0,e.jsx)("div",{className:"co-viewer__stepper js-co-viewer__stepper"}),(0,e.jsx)("div",{className:"js-co-viewer__related-images-wrap"})]}),(0,e.jsx)("div",{className:"co-viewer__sidebar js-co-viewer__sidebar reactify-asset-detail-view"})]})]}))},17220:function(fe,F,i){"use strict";i.d(F,{E:function(){return m}});var e=i(16021),u=i(86070),f=i(14154);const b=(0,f.I)(()=>(0,u.jsxs)("div",{className:"cm-setting__actions js-cm-setting__actions",children:[(0,u.jsx)("button",{type:"reset",className:"cm-setting__cancel",children:(0,u.jsx)("i",{className:"ca-icon--reject ca-icon--sm"})}),(0,u.jsx)("button",{type:"submit",className:"cm-setting__save",children:(0,u.jsx)("i",{className:"ca-icon--check ca-icon--sm"})})]})),y=(0,f.I)(()=>(0,u.jsx)("div",{className:"cm-setting__block"})),n=(0,f.I)(c=>c.success?(0,u.jsx)("p",{className:"cm-setting__message-success",children:(0,u.jsx)("i",{className:"icon-check"})}):(0,u.jsx)("p",{className:"cm-setting__message-error",children:(0,u.jsx)("i",{className:"icon-exclamation-triangle"})})),w=(0,f.I)(()=>(0,u.jsx)("div",{className:"cm-setting__meta"})),E=(0,f.I)(()=>(0,u.jsx)("div",{className:"cm-setting__block cm-setting__block--multiple-values",children:(0,u.jsxs)("button",{type:"button",className:"cm-btn cm-btn--xs cm-btn--default js-cm-setting__enter-multiple-values",children:[(0,u.jsx)("i",{className:"ca-icon--pen"}),window.translate("Legacy_settings_multiple_values_label")]})}));var x=i(50427),C=i(74819),v=i(5181);class m{constructor(o,l,h){this.mod=o,this.tpl=o.sandbox.getConfigParam("tpl"),this.data=o.sandbox.getConfigParam("data"),this.$ctx=l,this.$details=v(this.$ctx.find(".js-cm-setting__details").eq(0)),this.$message=v(),this.id=this.$ctx.data("id"),this.animating=!1,this.validator=null,this.isSetting=h,this.$block=v(),this.instant=this.$ctx.data("instant"),this.multipleValues=this.$ctx.data("multipleValues"),this.$multipleValuesBlock=null,this.method=this.$ctx.data("method")?this.$ctx.data("method").toLowerCase():"post",this.saved=void 0,this.changed=void 0,this.$ctx.find(".js-cm-setting__actions").length===0&&this.$details.append(v((0,x.EY)(e.h))),h&&(this.active=!1,this.instant||(this.$details.length===0&&(this.$meta=v((0,x.EY)(w)),this.$meta.append(v((0,x.EY)(b))),this.$ctx.append(this.$meta)),this.$block=v((0,x.EY)(y)),this.$ctx.append(this.$block)),this.multipleValues&&(this.$multipleValuesBlock=v((0,x.EY)(E)),this.$ctx.append(this.$multipleValuesBlock),this.$ctx.addClass("state-multiple-values"),this.$multipleValuesBlock.on("click",g=>{g.stopPropagation()}),this.$multipleValuesBlock.on("click",".js-cm-setting__enter-multiple-values",()=>{var g;(g=this.$multipleValuesBlock)==null||g.hide(),this.$ctx.removeClass("state-multiple-values"),this.mod.enter(this.$ctx)})))}elem(o){}setting(){}enter(){this.$multipleValuesBlock&&(this.$ctx.removeClass("state-multiple-values"),this.$multipleValuesBlock.hide()),this.$block.hide(),this.active=!0,this.$message.remove()}leave(){this.$multipleValuesBlock&&(this.$ctx.addClass("state-multiple-values"),this.$multipleValuesBlock.show()),this.$block.show(),this.active=!1}unfocus(o){}focus(){}clear(){}cancel(o){}serialize(){}getType(){return this.$ctx.data("type")}save(o){const l=this.$ctx.data("api");return this.$multipleValuesBlock&&(this.$multipleValuesBlock.remove(),this.$ctx.removeClass("state-multiple-values"),this.$multipleValuesBlock=null,this.multipleValues=!1),o||(o=this.serialize()),o.i18n=(0,C.YZ)(),l?this.data[this.method](l,o):Promise.resolve(v.extend(!0,{},{success:!0},o))}showDetails(){return new Promise(o=>{var l;if(this.$details&&!this.$details.hasClass("state-open")){const h=this.$ctx.find(".js-cm-setting__label").clone().removeClass("state-hidden");if(this.$details.prepend(h),this.$details.addClass("state-open"),!this.mod.$ctx.hasClass("js-cm-setting__details")){const g=((l=this.$details.offset())==null?void 0:l.top)||0,j=this.$details.outerHeight()||0,$=g+j;this.mod.resize($)}this.$details.velocity("fadeIn",{visibility:"visible",display:"block",complete:()=>o()})}else o()})}hideDetails(){return new Promise(o=>{this.$details&&this.$details.hasClass("state-open")?this.$details.velocity("fadeOut",{duration:1,display:"none",visibility:"hidden",complete:()=>{this.$details.removeClass("state-open"),this.$details.find(".js-cm-setting__label").remove(),this.mod.resize(),o()}}):o()})}showActions(o){return new Promise(l=>{o||(o=this.$ctx.find(".js-cm-setting__actions"),o=o.filter((h,g)=>v(g).parentsUntil(this.$ctx,".js-co-settings__elem, .js-co-settings__setting").length===0),o=v(o.eq(0))),o.velocity("stop"),this.$details&&this.$details.length===0?o.velocity("transition.slideRightIn",{visibility:"visible",duration:300,complete:()=>l()}):o.hasClass("state-open")?l():(o.addClass("state-open"),o.velocity("transition.slideUpIn",{visibility:"visible",duration:300,complete:()=>l()}))})}hideActions(o){return new Promise(l=>{o||(o=this.$ctx.find(".js-cm-setting__actions")),o.velocity("stop"),this.$details&&this.$details.length===0?o.velocity("reverse",{visibility:"hidden",duration:300,complete:()=>{o==null||o.removeAttr("style"),l()}}):o.hasClass("state-open")?(o.removeClass("state-open"),o.velocity("reverse",{visibility:"hidden",duration:300,complete:()=>l()})):l()})}showSuccess(o){let l=[];return new Promise(h=>{var g;if(o||(o=this.$ctx.find(".js-cm-setting__actions")),this.$details&&this.$details.length===0)this.$message.remove(),this.$message=v((0,x.EY)(n,{success:!0})),o.velocity("transition.slideRightOut",{duration:100}),this.$meta&&(this.$ctx.append(this.$meta),(g=this.$meta)==null||g.append(this.$message)),l=[{e:this.$message,p:"transition.slideRightIn",o:{duration:300}},{e:this.$message,p:"reverse",o:{duration:300,delay:700,complete:()=>h()}}],v.Velocity.RunSequence(l);else{const j=o.find('button[type="reset"]'),$=o.find('button[type="submit"]'),S=$.find(".js-cm-setting__btn-label"),T=$.find(".js-cm-setting__btn-icon--success"),A=$.find(".js-cm-setting__btn-icon--loading"),B=$.data("width")||$.outerWidth();j.velocity("stop"),$.velocity("stop"),S.velocity("stop"),T.velocity("stop"),A.velocity("stop");let R=[];j.length>0&&R.push({e:j,p:"transition.slideUpIn",o:{duration:1,display:"block"}}),R=R.concat([{e:T,p:"fadeOut",o:{duration:1,display:"none"}},{e:S,p:{opacity:1},o:{duration:1,display:"block"}},{e:$,p:{width:B},o:{duration:1,sequenceQueue:!1}}]),j.length>0&&l.push({e:j,p:"transition.slideDownOut",o:{duration:100}}),l=l.concat([{e:S,p:{opacity:0},o:{duration:100,display:"none"}},{e:A,p:"fadeOut",o:{duration:1,display:"none"}},{e:$,p:{width:47,height:"100%"},o:{duration:150,sequenceQueue:!1}},{e:T,p:"fadeIn",o:{duration:100,complete:()=>{setTimeout(()=>{v.Velocity.RunSequence(R),h()},300)},sequenceQueue:!1}}]),v.Velocity.RunSequence(l)}})}showError(o){if(o||(o=this.$ctx.find(".js-cm-setting__actions")),!this.animating){this.animating=!0;let l;if(this.$details&&this.$details.length===0)o.velocity("transition.slideRightOut",{duration:100}),this.$message.remove(),this.$message=v((0,x.EY)(n,{success:!1})),this.$meta&&(this.$ctx.append(this.$meta),this.$meta.append(this.$message)),l=[{e:this.$message,p:"transition.slideRightIn",o:{duration:100}},{e:this.$message,p:"reverse",o:{duration:300,delay:700}},{e:o,p:"reverse",o:{duration:100,display:"block",complete:()=>{this.animating=!1}}}],v.Velocity.RunSequence(l);else{const h=o.find('button[type="reset"]'),g=o.find('button[type="submit"]'),j=g.find(".js-cm-setting__btn-label"),$=g.find(".js-cm-setting__btn-icon--error"),S=g.find(".js-cm-setting__btn-icon--loading"),T=g.outerWidth();T&&g.css({width:T}),h.velocity("stop"),g.velocity("stop"),j.velocity("stop"),$.velocity("stop"),S.velocity("stop");const A=[{e:$,p:"reverse",o:{duration:100,display:"none",complete:()=>{g.removeClass("cm-btn--danger")}}},{e:g,p:"reverse",o:{duration:150,sequenceQueue:!1}},{e:j,p:{opacity:1},o:{duration:100,display:"block"}},{e:h,p:"transition.slideUpIn",o:{duration:1,display:"block",complete:()=>{this.animating=!1}}}];l=[{e:h,p:"transition.slideDownOut",o:{duration:100}},{e:j,p:{opacity:0},o:{duration:100,display:"none"}},{e:g,p:{width:[47,g.outerWidth()],height:"100%"},o:{duration:150,sequenceQueue:!1,complete:()=>{g.addClass("cm-btn--danger")}}},{e:$,p:"fadeIn",o:{duration:100,complete:()=>{setTimeout(()=>{v.Velocity.RunSequence(A)},300)}}}],v.Velocity.RunSequence(l)}}}showErrors(o){this.validator?this.hideLoader().then(()=>{var l,h;(l=this.validator)==null||l.showErrors(o),(h=this.validator)==null||h.focusInvalid()}):console.log("Validation not enabled for this setting")}validation(o,l,h){h||(h=this.$ctx);const g=this.showError.bind(this);h.on("reset",()=>{h==null||h.validate().resetForm(),typeof l=="function"&&l()}),this.validator=h.validate({onfocusout:!1,submitHandler:()=>{this.$details.length>0&&this.showLoader(),typeof o=="function"&&o()},errorPlacement:this.errorPlacement.bind(this),showErrors:function(){this.numberOfInvalids()>0&&g(),this.defaultShowErrors()}})}showLoader(o){o||(o=this.$ctx.find(".js-cm-setting__actions"));const l=o.find('button[type="reset"]'),h=o.find('button[type="submit"]'),g=h.find(".js-cm-setting__btn-label"),j=h.find(".js-cm-setting__btn-icon--loading");l.velocity("stop"),h.velocity("stop"),g.velocity("stop"),j.velocity("stop"),h.data("width",h.outerWidth());let $=[];l.length>0&&$.push({e:l,p:"transition.slideDownOut",o:{duration:100}}),$=$.concat([{e:g,p:{opacity:0},o:{duration:100,display:"none"}},{e:h,p:{width:47,height:"100%"},o:{duration:150,sequenceQueue:!1}},{e:j,p:"fadeIn",o:{duration:100,display:"inline-block"}}]),v.Velocity.RunSequence($)}hideLoader(o){return new Promise(l=>{this.$details&&this.$details.length===0&&l(),o||(o=this.$ctx.find(".js-cm-setting__actions"));const h=o.find('button[type="reset"]'),g=o.find('button[type="submit"]'),j=g.find(".js-cm-setting__btn-label"),$=g.find(".js-cm-setting__btn-icon--loading");h.velocity("stop"),g.velocity("stop"),j.velocity("stop"),$.velocity("stop");const S=[{e:$,p:"fadeOut",o:{duration:100,display:"none"}},{e:g,p:"reverse",o:{duration:150}},{e:j,p:{opacity:1},o:{duration:100,display:"block",sequenceQueue:!1}}];h.length>0?S.push({e:h,p:"transition.slideUpIn",o:{duration:100,display:"block",complete:()=>l()}}):l(),v.Velocity.RunSequence(S)})}hide(){this.$ctx.hide()}show(){this.$ctx.show()}errorPlacement(o,l){o.addClass("cm-setting__error");const h=l.closest(".js-co-settings__elem").data("id"),g=typeof this.getElem=="function"?this.getElem(h):null;g&&!v.isEmptyObject(g)&&typeof g.validatorErrorPlacement=="function"?g.validatorErrorPlacement(o):l.parent().append(o),o.velocity("transition.slideDownIn",{duration:100})}createGroup(o,l,h){const g=l.split("."),j=g.shift();return o[j]={},g.length>0?o[j]=this.createGroup(o[j],g.join("."),h):o[j]=h,o}}},36523:function(fe,F,i){"use strict";i.d(F,{w:function(){return w}});var e=i(82110),u=i(34933),f=i(88398),b=i(58095),y=i(62479),n=i(62768);class w{isVideoAsset(x){return(0,y.WA)(x)}static isSupportedFilenameForAssetInCurrentProject(x){var C;const v=(C=(0,n.Q)(x))!=null?C:"";switch((0,f.Xv)()){case b.g.MediaLibrary:case b.g.DocumentLibrary:case b.g.Workspace:return!(0,f.ah)().includes(v);case b.g.LogoLibrary:return(0,u.Jw)().includes(v);case b.g.IconLibrary:return(0,u.t3)().includes(v);default:return!0}}static isSupportedFilenameForAssetInCurrentAccount(x){var C;const v=(C=(0,n.Q)(x))!=null?C:"";return!(0,e.fA)().includes(v)}static isSupportedFilenameForAttachmentInCurrentProject(x){var C;const v=(C=(0,n.Q)(x))!=null?C:"";switch((0,f.Xv)()){case b.g.MediaLibrary:case b.g.DocumentLibrary:case b.g.Workspace:case b.g.LogoLibrary:return!(0,f.ah)().includes(v);default:return!0}}}},95772:function(fe,F,i){"use strict";i.d(F,{n:function(){return e}});class e{static get OS_MAC(){return"Mac OS"}static get OS_IOS(){return"iOS"}static get OS_WINDOWS(){return"Windows"}static get OS_ANDROID(){return"Android"}static get OS_LINUX(){return"Linux"}static getOs(){const f=window.navigator.userAgent,b=window.navigator.platform,y=["Macintosh","MacIntel","MacPPC","Mac68K"],n=["Win32","Win64","Windows","WinCE"],w=["iPhone","iPad","iPod"];return y.includes(b)?e.OS_MAC:w.includes(b)?e.OS_IOS:n.includes(b)||/Android/.test(f)?e.OS_WINDOWS:/Linux/.test(b)?e.OS_LINUX:"Unknown OS"}}},77007:function(fe,F,i){"use strict";i.d(F,{y:function(){return c}});var e=i(46588),u=i(5181),f=i.n(u),b=i(82110),y=i(74819),n=i(8947),w=Object.defineProperty,E=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,v=(o,l,h)=>l in o?w(o,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):o[l]=h,m=(o,l)=>{for(var h in l||(l={}))x.call(l,h)&&v(o,h,l[h]);if(E)for(var h of E(l))C.call(l,h)&&v(o,h,l[h]);return o};class c{constructor(){this.v1ApiEnabled=!1,this.requests=[]}static get STORAGE_UNIT_BASE(){return 1024}static get EMAIL_REGEX(){return/^(([^\s"(),.:;<>@[\\\]]+(\.[^\s"(),.:;<>@[\\\]]+)*)|(".+"))@((\[(?:\d{1,3}\.){3}\d{1,3}])|(([\dA-Za-z\-]+\.)+[A-Za-z]{2,}))$/}static get API_ACCESS_TOKEN_REGEX(){return/^[\dA-Za-z]+$/}static get STATUS_UNAUTHORIZED(){return 401}static get STATUS_FORBIDDEN(){return 403}static get STATUS_INTERNAL_SERVER_ERROR(){return 500}static get ERROR_INVALID_CSRF_TOKEN(){return"Invalid CSRF token"}static get ERROR_NEEDS_PASSWORD_RESET(){return"NEEDS_PASSWORD_RESET"}getBlockInfo(l){const h=l.closest("section").data("id");return{pageId:f()(".page").data("id"),sectionId:h<1?0:h,blockId:l.data("block")}}reconfigureRequestToUseV1(l,h){l.url=l.url.replace("/api/","/v1/"),l.headers.Authorization=`Bearer ${h}`}rewriteRequestsToUseStatelessApiV1(l){l&&c.API_ACCESS_TOKEN_REGEX.test(l)&&(this.authorizationBearerToken=l,this.v1ApiEnabled=!0)}get(l,h={}){return this.handle(m({url:l},h))}post(l,h,g={}){return this.handle(m({url:l,data:JSON.stringify(h),method:"post"},g))}delete(l,h){return this.handle({url:l,data:JSON.stringify(h),method:"delete"})}put(l,h){return this.handle({url:l,data:JSON.stringify(h),method:"put"})}patch(l,h){return this.handle({url:l,data:JSON.stringify(h),method:"patch"})}flush(l){this.requests=this.requests.filter(h=>{let g=!1;return l?l.urlPattern&&l.urlPattern instanceof RegExp?l.urlPattern.test(h.options.url)&&(g=!0):l.url&&l.url===h.options.url&&(g=!0):g=!0,g?(h.request.abort(),!1):!0})}download(l){window.open(l,"_self")}getCsrfToken(){var l;if(typeof this.csrfToken=="undefined"){const h=document.querySelector("meta[name=x-csrf-token]");this.csrfToken=(l=h==null?void 0:h.getAttribute("content"))!=null?l:void 0}return this.csrfToken||console.error("No CSRF token provided."),this.csrfToken}handle(l){const h={method:"GET",dataType:"json",contentType:"application/json; charset=utf-8",url:"",headers:{"X-CSRF-TOKEN":this.getCsrfToken()}},g=m(m({},h),l);this.v1ApiEnabled&&g.url.indexOf("/api/")===0&&this.authorizationBearerToken&&this.reconfigureRequestToUseV1(g,this.authorizationBearerToken);const j=f().ajax(g);return j.done($=>(this.requests=this.requests.filter(S=>S.options!==g),$)).fail($=>{this.reportError(`Unrecoverable Ajax Error: ${g.url}`,g,$)}),this.requests.push({request:j,options:g}),j}isJson(l){try{return JSON.parse(l),!0}catch(h){return!1}}getErrorMessage(l){return this.isJson(l.responseText)?JSON.parse(l.responseText):l.responseText}isPasswordResetError(l){return l===c.ERROR_NEEDS_PASSWORD_RESET}reportError(l,h,g){var j,$;const S=this.getErrorMessage(g);if(S==="Permission denied")return!1;if(g.status===c.STATUS_UNAUTHORIZED&&!this.v1ApiEnabled||g.status===c.STATUS_FORBIDDEN&&S===c.ERROR_INVALID_CSRF_TOKEN){const T=window.application.sandbox.getConfigParam("router");return this.isPasswordResetError(S.error)?!1:(window.location.href=`/auth/?referer=${encodeURIComponent(((j=T==null?void 0:T.ctx)==null?void 0:j.path)||location.pathname)}`,!0)}return g.readyState<4||g.status===c.STATUS_FORBIDDEN||g.status>=c.STATUS_INTERNAL_SERVER_ERROR||(($=window.APPLICATION_CONFIG)!=null&&$.sentryClientDsn?e.wd(l,{level:"error",extra:{options:h,response:g}}):console.error(l,{options:h,response:g})),!1}serializeForm(l){const h={},g=l.serializeArray();for(const j of g)h[j.name]?h[j.name]+=`,${j.value}`:h[j.name]=j.value;return h}isEmail(l){return!!(l&&c.EMAIL_REGEX.test(l))}async getBlock(l){const h=await this.get(`/api/document/block/${l}`,{data:{settings_only:!0,lang:(0,y.YZ)()||void 0}});if(!h.success)throw new Error(`Unable to get block settings. Reason: ${h}`);return{settings:h.data.settings,targets:{enabled:h.data.targets?h.data.targets.targets:[],inherited:h.data.targets?h.data.targets.disabled:[]}}}async updateBlock(l,h){const g=this.getBlockInfo(l),j=(0,y.YZ)();j&&(h.language=j);const $=await this.post(`/api/document/block/${g.pageId}/${g.sectionId}/${g.blockId}`,h);return $.success&&n.C.getInstance().refreshWindowBlockSettingsForBlock(g.blockId).catch(()=>{}),$}updateBlockTargets(l,h,g){const j=S=>this.post("/api/target/bytype",{type:"documentblock",ids:[l],data:S&&S.length>0?S:null});h==="target-choices"&&(S=>j(S))(g)}async updateSectionTargets(l,h,g){const j=async S=>await this.post("/api/target/bytype",{type:"documentsection",ids:[l],data:S&&S.length>0?S:null});h==="target-choices"&&await(async S=>await j(S))(g)}async checkStorageLimit(l){if(l=Math.round(l/c.STORAGE_UNIT_BASE),(0,b.kA)())return Promise.resolve();const h=await this.getStorageUsage();if(l+h.storage.current>=h.storage.max&&h.storage.max>0)return window.application.connectors.events.notify(null,"onSwal",{template:"storage-limit",closeOnConfirm:!0,callback:()=>{window.application.connectors.events.notify(null,"onOpenPayment",{feature:"CORE_STORAGE_LIMIT"})}}),Promise.reject("Storage limit exceeded.")}async getStorageUsage(){return this.get("/api/account/usage/storage").then(l=>{if(l.success)return l.usage;throw new Error("Loading Storage usage failed.")})}stripTrailingSlash(l){return l.substr(-1)==="/"&&(l=l.substring(0,l.length-1)),l}deepCopyObject(l){return JSON.parse(JSON.stringify(l))}removeFromArray(l,h){const g=l.indexOf(h);g>-1&&l.splice(g,1)}generateRandomString(l){let h="";const g="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",j=g.length;for(let $=0;$<l;$++)h+=g.charAt(Math.floor(Math.random()*j));return h}setCookie(l,h,g){let j="";if(g){const $=new Date;$.setTime($.getTime()+g*24*60*60*1e3),j=`; expires=${$.toUTCString()}`}document.cookie=`${l}=${h||""}${j}; path=/`}getCookie(l){const h=`${l}=`,g=document.cookie.split(";");for(let j=0;j<g.length;j++){let $=g[j];for(;$.charAt(0)===" ";)$=$.substring(1,$.length);if($.indexOf(h)===0)return $.substring(h.length,$.length)}return null}validateParameters(l){const h={},g=Object.keys(l);for(const j of g){const $=l[j];if(!c.isString(j)){console.warn("Validate Parameters - No valid parameter name");continue}if(j.length===0){console.warn("Validate Parameters - Empty parameter name");continue}if(!$){console.warn(`Validate Parameters '${j}' - Empty mapping`);continue}const{default:S=null,value:T=null,type:A=null,allowed:B=null}=$;let R,k;switch(A){case Boolean:R=c.isBoolean(S)?S:!1,k=c.isBoolean(T)?T:R,T!==null&&!c.isBoolean(T)&&console.warn(`Validate Parameters '${j}' - Expected 'Boolean' got '${typeof T}'`);break;case Array:R=c.isArray(S)?S:[],k=c.isArray(T)?T:R,T!==null&&!c.isArray(T)&&console.warn(`Validate Parameters '${j}' - Expected 'Array' got '${typeof T}'`);break;case String:R=c.isString(S)?S:"",c.isArray(B)?(k=this.getValueFromListOrDefault(j,T,B,R),k=c.isString(k)?k:R):k=c.isString(T)?T:R,T!==null&&!c.isString(T)&&console.warn(`Validate Parameters '${j}' - Expected 'String' got '${typeof T}'`);break;case Number:R=c.isNumber(R)?R:0,c.isArray(B)?(k=this.getValueFromListOrDefault(j,T,B,R),k=c.isNumber(k)?k:R):k=c.isNumber(T)?T:R,T!==null&&!c.isNumber(T)&&console.warn(`Validate Parameters '${j}' - Expected 'Number' got '${typeof T}'`);break;default:console.warn(`Validate Parameters '${j}' - Unsupported type '${A}' used`);continue}h[j]=k}return h}getValueFromListOrDefault(l,h,g=[],j=null){return Array.isArray(g)?h===null?j:g.includes(h)?h:(console.warn(`Validate Parameters '${l}' - Got not allowed parameter '${h}'`),j):(console.warn(`Validate Parameters '${l}' - No valid list provided`),j)}static humanFileSize(l,h=0){l=parseInt((l==null?void 0:l.toString())||"0",10);const g=Math.floor((l.toString().length-1)/3),j=["B","KB","MB","GB","TB","PB","EB","ZB","YB"][g];return h===0?`${Math.ceil(parseFloat((l/1024**g).toFixed()))} ${j}`:`${(l/1024**g).toFixed(h)} ${j}`}static formatNumber(l){return Intl.NumberFormat().format(l)}static isString(l){return typeof l=="string"}static isBoolean(l){return typeof l=="boolean"}static isNumber(l){return typeof l=="number"}static isArray(l){return Array.isArray(l)}static isFunction(l){return typeof l=="function"}static isStringAndNotEmpty(l){return c.isString(l)&&l.length>0}static removeAccents(l=""){return l.normalize("NFD").replaceAll(/[\u0300-\u036F]/g,"").normalize("NFC")}}},93593:function(fe,F,i){"use strict";i.d(F,{I:function(){return m}});var e=i(12882),u=i(5181),f=Object.defineProperty,b=Object.defineProperties,y=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,x=(c,o,l)=>o in c?f(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,C=(c,o)=>{for(var l in o||(o={}))w.call(o,l)&&x(c,l,o[l]);if(n)for(var l of n(o))E.call(o,l)&&x(c,l,o[l]);return c},v=(c,o)=>b(c,y(o));class m{constructor(){this.writeDefaultTypedDataAttributeIfUndefined=(o,l,h,g)=>{g===void 0||o.data(l)!==void 0||this.writeTypedDataAttributeValue(o,l,h,g)}}static isReservedTemplateDataKey(o){return["utils","tpl","id"].includes(o)}bindDataAttribute(o,l,h={type:String,changed:()=>{}}){o.__mutationObserver||(this.addMutationObserverToModule(o),this.observeModuleContext(o)),this.addBindingToObserveAttributes(o,l,h)}insertTextFromClipboard(o){o.preventDefault();const l=(o.originalEvent||o).clipboardData.getData("text/plain");document.execCommand("insertText",!1,l)}addMutationObserverToModule(o){o.__mutationObserver=new MutationObserver(l=>{for(const h in l){const g=l[h],j=o.__mutationObservedAttributes[g.attributeName];if(g.type!=="attributes"||!j)continue;const $=this.dataAttributeNameToAttributeName(g.attributeName),S=this.readTypedDataAttributeValue(o.$ctx,$,j.type);!this.isAllowedAttribute($,S,j.allowed)||(typeof o[$]=="object"?JSON.stringify(o[$])===JSON.stringify(S):o[$]===S)||(g.previousValue=o[$],g.currentValue=S,o[$]=S,typeof j.changed=="function"&&j.changed(g))}})}observeModuleContext(o){o.__mutationObserver.observe(o.$ctx.get(0),{attributes:!0})}addBindingToObserveAttributes(o,l,h){const g=this.attributeNameToDataAttributeName(l);o.__mutationObservedAttributes=o.__mutationObservedAttributes||{},o.__mutationObservedAttributes[g]=o.__mutationObservedAttributes[g]||h}readTypedDataAttributeValue(o,l,h){switch(h){case Number:return o.dataAsNumber(l);case String:return o.dataAsString(l);case Boolean:return o.dataAsBoolean(l);case Object:return o.dataAsObject(l);case Date:return o.dataAsDate(l);default:return null}}writeTypedDataAttributeValue(o,l,h,g){switch(h){case Number:o.dataAsNumber(l,g);break;case String:o.dataAsString(l,g);break;case Boolean:o.dataAsBoolean(l,g);break;case Object:o.dataAsObject(l,g);break;case Date:o.dataAsDate(l,g);break}}isAllowedAttribute(o,l,h){return Array.isArray(h)&&!h.includes(l)?(console.warn(`Attribute '${o}' not in allowed values: ${JSON.stringify(h)}`),!1):!0}getSourceContext(o){return o instanceof u?o.get(0):o.$ctx instanceof u?o.$ctx.get(0):o}dashCaseToLowerCamelCase(o=""){return o.toLowerCase().replaceAll(/-(.)/g,(l,h)=>h.toUpperCase())}lowerCamelCaseToDashCase(o=""){return o.replaceAll(/[A-Z]/g,l=>`-${l.toLowerCase()}`)}attributeNameToDataAttributeName(o){return`data-${this.lowerCamelCaseToDashCase(o)}`}dataAttributeNameToAttributeName(o){return this.dashCaseToLowerCamelCase(o.replace(/^data-/,""))}removeAndDestroyChildElements(o){return!o||(o instanceof u||(o=u(o)),o.children().length===0)||(window.application.sandbox.removeModules(o.children()),o.empty()),o}addOrReplaceAndActivate(o,l,h){if(!(o instanceof u))return;const g=o.find(l),j=h instanceof u?h:u(h);g.length===0?(o.append(j),window.application.sandbox.addModules(j)):this.replaceAndActivate(g,j)}replaceAndActivate(o,l){o instanceof u&&l instanceof u&&(window.application.sandbox.removeModules(o),o.replaceWith(l),window.application.sandbox.addModules(l))}addAndActivate(o,l,h=!0){if(!o)return o;h&&this.removeAndDestroyChildElements(o);const g=o.children();return l instanceof u||Array.isArray(l)?o.append(l):o.html(o.html()+l),window.application.sandbox.addModules(o.children().not(g)),o}fireCustomEvent(o,l,h={}){const g=this.getSourceContext(o);g||console.error("fireCustomEvent: sourceContextOrElement is not a valid source context"),g==null||g.dispatchEvent(new CustomEvent(l,{bubbles:!0,cancelable:!0,composed:!0,detail:h}))}bindDataAttributes(o,l={}){for(const h in l){const g=l[h];typeof g.changed=="function"&&this.bindDataAttribute(o,h,g),this.writeDefaultTypedDataAttributeIfUndefined(o.$ctx,h,g.type,g.default);const j=this.readTypedDataAttributeValue(o.$ctx,h,g.type);o[h]=this.isAllowedAttribute(h,j,g.allowed)?j:null}}renderDataAttributesAsObject(o={}){const l={};for(const h in o){if(m.isReservedTemplateDataKey(h)){h==="id"&&console.warn("The data attribute 'id' is ignored.");continue}const g=o[h];let j;g===null||typeof g=="undefined"?j="":typeof g=="object"?j=JSON.stringify(g):j=g,l[this.attributeNameToDataAttributeName(h)]=j}return l}mapModifiers(o="",l=""){return l.split(" ").map(h=>o+h).join(" ")}truncate(o="",l=6,h=20,g=26){return o.length<g?o:`${o.substring(0,h)}...${o.substring(o.length-l)}`}slug(o){return o.toString().toLowerCase().replaceAll(/\s+/g,"-").replaceAll(/[^\w-]+/g,"").replaceAll(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}translate(o="",l){if(l=Array.isArray(l)?l:[],l.length>0)for(let h=0,g=l.length;h<g;h++)o=o.replace(`$${h+1}$`,l[h]);return o}unit(o,l,h,g){if((o===""||o==="auto"||o===void 0)&&!h)return"auto";if(!o)return o||0;const j=["px","em","rem","%","vw","vh","vmax","vmin"],$=`${o}`.trim().match(/(\d+\.?\d*)\s?([\w%|]*)$/);let S;if($){const T=parseFloat($[1]);if(T)return o=T,$[2]&&j.includes($[2])?(S=$[2],o+=S):l||(S="px",o+=S),g===!0?{value:T,unit:S}:o}return 0}isEmpty(o){return!(o&&u.trim(o.replaceAll(/<\/?[^>]+(>|$)/g,""))!=="")}escape(o){return o==null?"":String(o).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}escapeRegex(o){return o.replaceAll(/[$()*+.?[\\\]^{|}]/g,"\\$&")}highlightMatches(o,l){if(l.length<=0)return this.escape(o);const h=new RegExp(`(${this.escapeRegex(l)})`,"gi");let g;const j=[];let $="";for(;g=h.exec(o);)j.push(g.index);for(let S=0;S<j.length;S++)$+=S===0?o.substring(0,j[S]):o.substring(j[S-1]+l.length,j[S]),$+=`<mark>${o.substring(j[S],j[S]+l.length)}</mark>`;return j.length>0&&($+=o.substring(j[j.length-1]+l.length)),$=this.escape($).replaceAll("&lt;mark&gt;","<mark>").replaceAll("&lt;/mark&gt;","</mark>"),$}getConditionalClasses(o){const l=[];for(const h of o)h[1]===!0&&l.push(h[0]);return l.join(" ")}round(o,l){l=l||l===0?l:1;const h=10**l;return Math.round(o*h)/h}roundHalf(o){return Math.round(o*2)/2}getCanvasStylesAsObject(o,l){const h=this.getCanvasStyles(o,l);return(j=>typeof j=="string"?j.split(";").reduce(($,S)=>{const T=S.indexOf(":");if(T===-1)return $;const A=S.substr(0,T).trim().replace(/^-ms-/,"ms-").replaceAll(/-./g,R=>R.substr(1).toUpperCase()),B=S.substr(T+1).trim();return B?v(C({},$),{[A]:B}):$},{}):{})(h)}getCanvasStyles(o,l){let h="";const g=["col","tr","td","table"],j={lineHeight:"line-height",fontFamily:"font-family",fontSize:"font-size",textDecoration:"text-decoration",textDecorationColor:"text-decoration-color",textDecorationSkipInk:"text-decoration-skip-ink",textUnderlineOffset:"text-underline-offset",textUnderlinePosition:"text-underline-position",background:"background",backgroundImage:"background-image",backgroundColor:"background-color",letterSpacing:"letter-spacing",fontKerning:"font-kerning",textTransform:"text-transform",textStrokeColor:"-webkit-text-stroke-color",textStrokeWidth:"-webkit-text-stroke-width",margin:"margin",marginTop:"margin-top",marginRight:"margin-right",marginBottom:"margin-bottom",marginLeft:"margin-left",padding:"padding",paddingTop:"padding-top",paddingRight:"padding-right",paddingBottom:"padding-bottom",paddingLeft:"padding-left",justification:"text-align",justificationLastLine:"text-align-last",listStyleType:"list-style-type",objectFit:"object-fit",objectPosition:"object-position",transformOrigin:"transform-origin",borderRadius:"border-radius",borderTopLeftRadius:"border-top-left-radius",borderTopRightRadius:"border-top-right-radius",borderBottomLeftRadius:"border-bottom-left-radius",borderBottomRightRadius:"border-bottom-right-radius",border:"border",borderWidth:"border-width",borderColor:"border-color",borderStyle:"border-style",visibility:"visibility",opacity:"opacity",filter:"filter",overflow:"overflow",textAlign:"text-align",boxShadow:"box-shadow",stroke:"stroke",fill:"fill",strokeWidth:"stroke-width",pointerEvents:"pointer-events",display:"display",width:"width",minWidth:"min-width",height:"height",minHeight:"min-height",top:"top",left:"left",bottom:"bottom",right:"right",color:"color",transform:"transform",textShadow:"text-shadow",mixBlendMode:"mix-blend-mode",flexDirection:"flex-direction",justifyContent:"justify-content",columnCount:"column-count",columnGap:"column-gap",whiteSpace:"white-space",borderRightColor:"border-right-color",borderRightWidth:"border-right-width",borderRightStyle:"border-right-style",borderLeftColor:"border-left-color",borderLeftWidth:"border-left-width",borderLeftStyle:"border-left-style",borderTopColor:"border-top-color",borderTopWidth:"border-top-width",borderTopStyle:"border-top-style",borderBottomColor:"border-bottom-color",borderBottomWidth:"border-bottom-width",borderBottomStyle:"border-bottom-style",textIndent:"text-indent",hyphens:"hyphens",hyphenateLimitChars:"hyphenate-limit-chars",hyphenateLimitLines:"hyphenate-limit-lines"};let $=["width","minWidth","height","minHeight","top","left","bottom","right","borderWidth","fontSize"],S=["hyphens","hyphenateLimitChars","hyphenateLimitLines"],T=["fontFamily"],A=[];for(const k in j)[...$,...S,...T].includes(k)||A.push(k);const B=["display","width","height","top","left","bottom","right","margin","marginTop","marginBottom","transform","transformOrigin"];if((o==null?void 0:o.frameOnly)===!0){const k=V=>B.includes(V);A=A.filter(k),$=$.filter(k),S=S.filter(k),T=T.filter(k)}const R=(k,V)=>{const K=o.excludes;return K?!!K.find(q=>q.value?q.property===k&&q.value===V:q.property===k):!1};for(const k of A)if(!(!o.styles[k]&&o.styles[k]!==0)&&!R(j[k],o.styles[k])){if(o.overwriteColor&&k==="color"){h+=`${j[k]}: ${o.overwriteColor};`;continue}h+=`${j[k]}: ${o.styles[k]};`}for(const k of $){if(!o.styles[k]&&o.styles[k]!==0)continue;let V=o.styles[k],K="px";if(o.frameOnly||(k==="width"&&o.styles.widthAuto===!0&&(V="max-content"),k==="height"&&o.styles.heightAuto===!0&&(V="max-content")),parseFloat(V)){const q=`${V}`.trim().match(/(-?\d+\.?\d*)\s?([\w%|]*)$/);q!=null&&q[2]&&(V=parseFloat(q[1]))}else["auto","max-content"].includes(V)?K="":V=0;R(j[k],V+K)||(h+=`${j[k]}: ${V}${K};`)}for(const k of S){if(!o.styles[k]||R(j[k],o.styles[k]))continue;const V=o.styles[k],K=j[k];h+=`-ms-${K}: ${V};`,h+=`-moz-${K}: ${V};`,h+=`-webkit-${K}: ${V};`,h+=`${K}: ${V};`}for(const k of T)o.styles[k]&&(R(j[k],o.styles[k])||(h+=`${j[k]}: '${o.styles[k]}';`));if(!o.frameOnly){if(o.styles.boxShadowColor){const k={color:o.styles.boxShadowColor||"rgba(0,0,0,0.2)",x:parseFloat(o.styles.boxShadowX)||1,y:parseFloat(o.styles.boxShadowY)||1,b:parseFloat(o.styles.boxShadowBlur)||5,s:parseFloat(o.styles.boxShadowSpread)||0};h+=`box-shadow: ${this.unit(k.x)} ${this.unit(k.y)} ${this.unit(k.b)} ${this.unit(k.s)} ${k.color};`}o.styles.verticalAlign&&(l&&g.includes(l)?h+=`vertical-align: ${o.styles.verticalAlign}`:h+=`
                        display: flex;
                        flex-direction: column;
                        justify-content: ${{top:"flex-start",middle:"center",bottom:"flex-end"}[o.styles.verticalAlign]};
                    `)}return h}getCroppedImageUrl(o,l,h={},g){var j;const $=h!=null?h:{},S=(j=o[l])==null?void 0:j.generic_url;if(!S)return"";const T=S.split("?");let A={};T.length>1&&(A=(0,e.j)(T[1]),delete A.width),($.focalPointX!==void 0&&$.focalPointY!==void 0&&$.width!==void 0&&$.height!==void 0)===!0?(A.crop="fp",A.fp=[$.focalPointX,$.focalPointY].join(","),A.width=Math.min(2400,Math.round($.width*2)),A.height=Math.min(2400,Math.round($.height*2)),$.focalPointZoom!==void 0&&(A.fp_zoom=$.focalPointZoom)):(g&&(A.width=Math.min(2400,Math.round(g*2))),($.x!==void 0&&$.y!==void 0&&$.width!==void 0&&$.height!==void 0)===!0&&(A.rect=[$.x,$.y,$.width,$.height].join(","),$.reference_width!==void 0&&(A.reference_width=$.reference_width)));const R=decodeURIComponent(u.param(A));return`${T[0]}?${R}`}getBackgroundImageProperty(o,l,h){const g=[];if(Array.isArray(l))for(const j of l){const $=this.getCroppedImageUrl(o,j.asset,j.crop,h);g.push(`url(${$})`)}return g.join(",")}enableSanitizationOnPasting(o,l){o.on("paste",l,this.insertTextFromClipboard)}disableSanitizationOnPasting(o,l){o.off("paste",l,this.insertTextFromClipboard)}appendPx(o){return typeof o!="string"&&typeof o!="number"||(typeof o=="string"&&(o=parseFloat(o)),isNaN(o))?"":`${o}px`}}},14154:function(fe,F,i){"use strict";i.d(F,{I:function(){return m}});var e=i(86070),u=i(68699),f=i(58095),b=i(93593),y=Object.defineProperty,n=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,x=(c,o,l)=>o in c?y(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,C=(c,o)=>{for(var l in o||(o={}))w.call(o,l)&&x(c,l,o[l]);if(n)for(var l of n(o))E.call(o,l)&&x(c,l,o[l]);return c};const v=new b.I,m=c=>l=>(0,e.jsx)(c,C({constants:{projectType:f.g,feature:u.h},tpl:v,utils:{account:window.application.sandbox.config.account,money:window.application.sandbox.config.money,data:window.application.sandbox.config.data,asset:window.application.sandbox.config.asset,assetDownload:window.application.sandbox.config.assetDownload,iso:window.application.sandbox.config.iso}},l))},71338:function(fe,F,i){"use strict";i.d(F,{x:function(){return l}});var e=i(86070),u=i(95376),f=i(14154),b=i(74684),y=i(10440),n=Object.defineProperty,w=Object.defineProperties,E=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,m=(h,g,j)=>g in h?n(h,g,{enumerable:!0,configurable:!0,writable:!0,value:j}):h[g]=j,c=(h,g)=>{for(var j in g||(g={}))C.call(g,j)&&m(h,j,g[j]);if(x)for(var j of x(g))v.call(g,j)&&m(h,j,g[j]);return h},o=(h,g)=>w(h,E(g));const l=(0,f.I)(h=>{var g,j;return typeof h.settings.retina=="boolean"&&(h.settings.retina={enabled:h.settings.retina}),typeof h.settings.border=="boolean"&&(h.settings.border={enabled:h.settings.border}),(0,e.jsxs)("div",o(c(o(c({className:`mod block js-cm-blockmanager__block mod-block-annotations b-annotations${h.settings.asset>0||h.settings.src?" state-available":""} ${h.reference_token?"referenced":""}`},h.translation?{"data-translation-state":h.translation.state}:{}),{"data-asset":h.settings.asset,"data-block":h.id,"data-asset-data":JSON.stringify(h.settings.asset_data),"data-help":"https://docs.frontify.com/d/2MwJ9kHF57Sc/frontify-style-guide#/product/smart-blocks/annotations-block","data-editable":`${h.editable===!0?"1":"0"}`,"data-image-and-video-downloads-enabled":h.settings.downloadable}),h.reference_token?{"data-reference-token":h.reference_token,"data-reference-url":h.reference_url}:{}),{children:[(0,e.jsx)("style",{className:"js-b-annotations__styles","data-bubble":`${h.settings.bubble?`${h.settings.bubble}`:"#FFF"}`}),(0,e.jsx)("div",{className:"b-annotations__constrain",children:(0,e.jsxs)("div",{className:`b-annotations__wrapper js-b-annotations__mode-wrap${h.settings.mode?` state-mode-${h.settings.mode}`:" state-mode-figure"}`,children:[(0,e.jsxs)("div",{className:`b-annotations__container js-b-annotations__mode-wrap${h.settings.mode?` state-mode-${h.settings.mode}`:" state-mode-figure"}`,children:[(0,e.jsx)("div",{className:"inline-actions js-b-annotations__actions",children:(0,e.jsx)("a",o(c({title:window.translate("Annotations_download_label"),"aria-label":window.translate("Annotations_download_label")},h.settings.asset_data?{href:`/api/screen/download/${h.settings.asset_data.token}?track`,"data-filename":h.settings.asset_data.filename}:{}),{className:`btn btn-icon btn-download js-b-annotations__download-link ${h.settings.downloadable==!1?"btn-download--hidden":""}`,children:(0,e.jsx)("i",{className:"icon-download"})}))}),(0,e.jsxs)("div",{className:`b-annotations__image-wrap js-b-annotations__image-wrap${h.settings.border&&h.settings.border.enabled?" state-border":""}${h.settings.retina&&h.settings.retina.enabled?" state-retina":""}`,children:[(0,e.jsx)("figure",o(c({className:"b-annotations__figure js-b-annotations__figure"},h.settings.asset_data?{"data-href":h.settings.asset_data.download_url}:{}),{children:(0,e.jsx)("div",o(c({style:c({},h.settings.background_color?{backgroundColor:`${h.settings.background_color}`}:{}),className:"b-annotations__canvas js-b-annotations__canvas"},h.settings.asset_data?{"data-preview-url":h.settings.asset_data.preview_url,"data-alt":h.settings.asset_data.filename,"data-width":h.settings.asset_data.width,"data-height":h.settings.asset_data.height}:{}),{children:(0,e.jsxs)("div",{className:"b-annotations__bubbles",children:[(0,e.jsx)("div",{className:"b-annotations__details js-b-annotations__details"}),(g=h.settings.annotations)==null?void 0:g.map(($,S)=>{var T;return $.bubbles?(T=$.bubbles)==null?void 0:T.filter(Boolean).map((A,B)=>(0,e.jsxs)("div",{className:"b-annotations__bubble js-b-annotations__bubble",style:{top:`${A.top}%`,left:`${A.left}%`},"data-annotation-id":S+1,"data-offset-top":A.top,"data-offset-left":A.left,children:[(0,e.jsx)("span",{className:"b-annotations__bubble-number js-b-annotations__bubble-number co-editor",children:S+1}),(0,e.jsx)("button",{className:"b-annotations__bubble-delete-btn js-b-annotations__bubble-delete-btn",children:(0,e.jsx)("i",{className:"b-annotations__bubble-delete-icon ca-icon--reject"})})]},B)):(0,e.jsxs)("div",{className:"b-annotations__bubble js-b-annotations__bubble",style:{top:`${$.top}%`,left:`${$.left}%`},"data-annotation-id":S+1,"data-offset-top":$.top,"data-offset-left":$.left,children:[(0,e.jsx)("span",{className:"b-annotations__bubble-number js-b-annotations__bubble-number co-editor",children:S+1}),(0,e.jsx)("button",{className:"b-annotations__bubble-delete-btn js-b-annotations__bubble-delete-btn",children:(0,e.jsx)("i",{className:"b-annotations__bubble-delete-icon ca-icon--reject"})})]},S)})]})}))})),h.settings.asset>0?h.asset_translation_allowed?(0,e.jsx)(y.K,{project:h.settings.project}):(0,e.jsxs)("div",{className:"m-dropzone js-m-dropzone",children:[(0,e.jsx)("i",{className:"m-dropzone__icon ca-icon--image ca-icon--xl"}),(0,e.jsx)("span",{children:window.translate("Annotations_placeholder")}),(0,e.jsx)("input",{className:"m-dropzone__upload js-m-dropzone__upload",type:"file",name:"files_replace[]","aria-label":window.translate("Annotations_placeholder")})]}):(0,e.jsxs)("div",{className:"b-annotations__add-image-actions-container",children:[(0,e.jsx)(y.K,{project:h.settings.project}),(0,e.jsx)(b.t,{hasDatatype:!1,iconClass:"ca-icon--image-library ca-icon--xl",assetschooseropenerTranslation:"AssetChooser_text_default"})]})]})]}),(0,e.jsxs)("div",{className:`b-annotations__annotations js-b-annotations__mode-wrap${h.settings.mode?` state-mode-${h.settings.mode}`:" state-mode-figure"}`,children:[(0,e.jsxs)("div",{className:"b-annotations__list",children:[(j=h.settings.annotations)==null?void 0:j.map(($,S)=>(0,e.jsxs)("div",{className:"b-annotations__item js-b-annotations__item co-editor","data-annotation-id":S+1,children:[(0,e.jsx)("div",{className:"b-annotations__item-editor js-b-annotations__item-editor co-editor co-editor--default",children:(0,u.Ay)($.content)}),h.editable?(0,e.jsx)("button",{className:"btn-delete-annotation cm-actions__action-wrap",title:window.translate("Annotations_action_remove"),"aria-label":window.translate("Annotations_action_remove"),children:(0,e.jsx)("i",{className:"ca-icon--trash ca-icon--md cm-actions__action"})}):null]},S)),h.editable?(0,e.jsx)("div",{className:"b-annotations__new js-b-annotations__new",children:(0,e.jsx)("span",{children:window.translate("Annotations_placeholder")})}):null]}),(0,e.jsxs)("span",{className:"b-annotations__duplication-hint js-b-annotations__duplication-hint",children:[window.translate("Annotations_action_hold"),(0,e.jsx)("span",{className:"b-annotations__duplication-key js-b-annotations__duplication-key-windows",children:"\xA0ALT\xA0"}),(0,e.jsx)("span",{className:"b-annotations__duplication-key js-b-annotations__duplication-key-mac",children:"\xA0\u2325\xA0"}),window.translate("Annotations_while_dragging")]})]})]})})]}))})},24760:function(fe,F,i){"use strict";i.d(F,{p:function(){return y}});var e=i(86070),u=i(56905),f=i(16829),b=i(14154);const y=(0,b.I)(()=>(0,e.jsx)("div",{className:"delete-color-button-container","data-event":"sectionDeleteMenu",children:(0,e.jsx)(f.$n,{"aria-label":window.translate("Guideline_blocks_colorScaleBlock_delete_color"),style:"default",emphasis:"default",type:"button",hugWidth:!0,size:"small",aspect:"square",title:window.translate("Guideline_blocks_colorScaleBlock_delete_color"),children:(0,e.jsx)(u.default,{})})}))},88994:function(fe,F,i){"use strict";i.d(F,{n:function(){return o}});var e=i(86070),u=i(95376),f=i(14154),b=i(57209),y=Object.defineProperty,n=Object.defineProperties,w=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,v=(l,h,g)=>h in l?y(l,h,{enumerable:!0,configurable:!0,writable:!0,value:g}):l[h]=g,m=(l,h)=>{for(var g in h||(h={}))x.call(h,g)&&v(l,g,h[g]);if(E)for(var g of E(h))C.call(h,g)&&v(l,g,h[g]);return l},c=(l,h)=>n(l,w(h));const o=(0,f.I)(l=>(0,e.jsxs)("div",c(m({className:`mod block js-cm-blockmanager__block mod-block-icons ${l.settings.library>0?`icons-available icons-block-${l.settings.library}`:""} ${l.reference_token?"referenced":""}`,"data-block":l.id,"data-library":l.settings.library,"data-project":l.settings.project,"data-attachments":l.settings.attachments,"data-asset":l.settings.asset,"data-help":"https://docs.frontify.com/d/2MwJ9kHF57Sc/frontify-style-guide#/product/smart-blocks/icons-block","data-feedback":"https://frontify.typeform.com/to/Dj3Utn?block=Icons%20Block","data-ready":"true"},l.reference_token?{"data-reference-token":l.reference_token,"data-reference-url":l.reference_url}:{}),{children:[(0,e.jsxs)("div",{className:"icons-provider",children:[(0,e.jsxs)("ul",{className:"nav row",children:[(0,e.jsx)("a",{href:"javascript:;","data-tab":"icomoon",children:(0,e.jsx)("li",{className:"active",children:(0,e.jsx)("span",{children:"IcoMoon"})})}),(0,e.jsx)("a",{href:"javascript:;","data-tab":"fontello",children:(0,e.jsx)("li",{children:(0,e.jsx)("span",{children:"Fontello"})})}),(0,e.jsx)("a",{href:"javascript:;","data-tab":"fontastic",children:(0,e.jsx)("li",{children:(0,e.jsx)("span",{children:"Fontastic"})})}),(0,e.jsx)("a",{href:"javascript:;","data-tab":"custom",children:(0,e.jsx)("li",{children:(0,e.jsx)("span",{children:(0,u.Ay)(window.translate("IconsBlock_tab_custom"))})})}),(0,e.jsx)("a",{href:"javascript:;","data-tab":"svg",children:(0,e.jsx)("li",{children:(0,e.jsx)("span",{children:"SVG"})})})]}),(0,e.jsx)("div",{className:"provider-content tab-icomoon active","data-provider":"icomoon",children:(0,e.jsxs)("div",{className:"dropzone btn-upload btn-upload-icons",children:[(0,e.jsx)("i",{className:"icon-cube"}),(0,e.jsx)("span",{children:(0,u.Ay)(window.translate("IconsBlock_icomoon_placeholder"))})]})}),(0,e.jsx)("div",{className:"provider-content tab-fontello","data-provider":"fontello",children:(0,e.jsxs)("div",{className:"dropzone btn-upload btn-upload-icons",children:[(0,e.jsx)("i",{className:"icon-cube"}),(0,e.jsx)("span",{children:(0,u.Ay)(window.translate("IconsBlock_fontello_placeholder"))})]})}),(0,e.jsx)("div",{className:"provider-content tab-fontastic","data-provider":"fontastic",children:(0,e.jsxs)("div",{className:"dropzone btn-upload btn-upload-icons",children:[(0,e.jsx)("i",{className:"icon-cube"}),(0,e.jsx)("span",{children:(0,u.Ay)(window.translate("IconsBlock_fontastic_placeholder"))})]})}),(0,e.jsxs)("div",{className:"provider-content tab-custom","data-provider":"custom",children:[(0,e.jsxs)("div",{className:"dropzone btn-upload btn-upload-icons",children:[(0,e.jsx)("i",{className:"icon-cube"}),(0,e.jsxs)("span",{children:[(0,u.Ay)(window.translate("IconsBlock_custom_placeholder")),(0,e.jsx)("br",{})]})]}),(0,e.jsx)("div",{className:"icon-example",children:(0,e.jsx)("a",{className:"ffy-lnk",href:"/files/frontify_icon_example.zip",children:(0,u.Ay)(window.translate("IconsBlock_custom_action_example"))})})]}),(0,e.jsx)("div",{className:"provider-content tab-svg","data-provider":"svg",children:(0,e.jsxs)("div",{className:"dropzone btn-upload btn-upload-icons",children:[(0,e.jsx)("i",{className:"icon-cube"}),(0,e.jsx)("span",{children:(0,u.Ay)(window.translate("IconsBlock_svg_placeholder"))})]})}),(0,e.jsx)("input",{className:"fileupload",type:"file",name:"files[]","aria-label":window.translate("IconsBlock_general_upload"),multiple:!0})]}),(0,e.jsx)("div",{className:"placeholder js-placeholder",children:(0,e.jsxs)("div",{className:"placeholder-icons",children:[(0,e.jsx)("div",{className:"row font",children:(0,e.jsx)("h3",{className:"library-title",children:window.translate("IconsBlock_placeholder_title")})}),(0,e.jsxs)("div",{className:"icons row",children:[(0,e.jsxs)("ul",{className:"col-left",children:[(0,e.jsxs)("li",{className:"row item",children:[(0,e.jsx)("span",{className:"library-icon-preview",children:(0,e.jsx)("i",{className:"icon-envelope"})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{className:"library-icon-name",children:"icon-mail"}),(0,e.jsxs)("span",{className:"library-icon-character",children:[window.translate("IconsBlock_character_label"),":"," ",(0,e.jsx)("span",{className:"value",children:"k"})]})]})]}),(0,e.jsxs)("li",{className:"row item",children:[(0,e.jsx)("span",{className:"library-icon-preview",children:(0,e.jsx)("i",{className:"icon-google"})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{className:"library-icon-name",children:"icon-google"}),(0,e.jsxs)("span",{className:"library-icon-character",children:[window.translate("IconsBlock_character_label"),":"," ",(0,e.jsx)("span",{className:"value",children:"i"})]})]})]})]}),(0,e.jsxs)("ul",{className:"col-middle",children:[(0,e.jsxs)("li",{className:"row item",children:[(0,e.jsx)("span",{className:"library-icon-preview",children:(0,e.jsx)("i",{className:"icon-search"})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{className:"library-icon-name",children:"icon-search"}),(0,e.jsxs)("span",{className:"library-icon-character",children:[window.translate("IconsBlock_character_label"),":"," ",(0,e.jsx)("span",{className:"value",children:"p"})]})]})]}),(0,e.jsxs)("li",{className:"row item",children:[(0,e.jsx)("span",{className:"library-icon-preview",children:(0,e.jsx)("i",{className:"icon-twitter"})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{className:"library-icon-name",children:"icon-twitter"}),(0,e.jsxs)("span",{className:"library-icon-character",children:[window.translate("IconsBlock_character_label"),":"," ",(0,e.jsx)("span",{className:"value",children:"t"})]})]})]})]}),(0,e.jsxs)("ul",{className:"col-right",children:[(0,e.jsxs)("li",{className:"row item",children:[(0,e.jsx)("span",{className:"library-icon-preview",children:(0,e.jsx)("i",{className:"icon-print"})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{className:"library-icon-name",children:"icon-print"}),(0,e.jsxs)("span",{className:"library-icon-character",children:[window.translate("IconsBlock_character_label"),":"," ",(0,e.jsx)("span",{className:"value",children:"o"})]})]})]}),(0,e.jsxs)("li",{className:"row item",children:[(0,e.jsx)("span",{className:"library-icon-preview",children:(0,e.jsx)("i",{className:"icon-facebook"})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{className:"library-icon-name",children:"icon-facebook"}),(0,e.jsxs)("span",{className:"library-icon-character",children:[window.translate("IconsBlock_character_label"),":"," ",(0,e.jsx)("span",{className:"value",children:"g"})]})]})]})]})]})]})}),(0,e.jsxs)("div",{className:"library",children:[(0,e.jsx)("h3",{className:"library-title js-library-title","data-editable":"true","data-field":"name"}),(0,e.jsx)("div",{className:"downloads",children:(0,e.jsx)("a",{href:`/api/icon/download/${l.settings.token}`,className:"row download btn-download-library",children:(0,e.jsxs)("div",{children:[(0,e.jsx)("i",{className:"ca-icon--download ca-icon--lg"}),(0,e.jsxs)("div",{className:"meta",children:[(0,e.jsx)("h4",{children:window.translate("IconsBlock_download_title")}),(0,e.jsx)("div",{className:"desc",children:window.translate("IconsBlock_download_description")})]})]})})}),(0,e.jsx)("style",{type:"text/css"}),(0,e.jsx)("div",{className:"svg-wrapper"}),(0,e.jsxs)("div",{className:"icons row",children:[(0,e.jsx)("ul",{className:"col-left"}),(0,e.jsx)("ul",{className:"col-middle"}),(0,e.jsx)("ul",{className:"col-right"})]})]}),(0,e.jsx)("aside",{children:(0,e.jsx)(b.$,m({},l))})]})))},98288:function(fe,F,i){"use strict";i.d(F,{W:function(){return h}});var e=i(86070),u=i(95376),f=i(14154),b=i(74684),y=i(57209),n=i(10440),w=Object.defineProperty,E=Object.defineProperties,x=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,c=(g,j,$)=>j in g?w(g,j,{enumerable:!0,configurable:!0,writable:!0,value:$}):g[j]=$,o=(g,j)=>{for(var $ in j||(j={}))v.call(j,$)&&c(g,$,j[$]);if(C)for(var $ of C(j))m.call(j,$)&&c(g,$,j[$]);return g},l=(g,j)=>E(g,x(j));const h=(0,f.I)(g=>{var j;return(0,e.jsxs)("div",l(o(o(l(o({className:` mod block js-cm-blockmanager__block mod-block-image b-image js-co-viewer__setting-module ${g.settings.asset>0||g.settings.src?" state-available ":""} ${g.reference_token?" referenced ":""}`,"data-attachments":g.settings.attachments,"data-asset":g.settings.asset,"data-mode":g.settings.mode,"data-block":g.id,"data-image-and-video-downloads-enabled":g.settings.downloadable},g.settings.asset_data?{"data-asset-data":JSON.stringify(g.settings.asset_data),"data-status":g.settings.asset_data.status,"data-download-request":g.settings.asset_data.download_request,"data-filename":g.settings.asset_data.filename,"data-generic-url":g.settings.asset_data.generic_url,"data-copyright-download-consensus":g.settings.asset_data.copyright_download_consensus,"data-copyright-notice":g.settings.asset_data.meta_copyright_notice,"data-license-token":g.settings.asset_data.license_token,"data-licenses":JSON.stringify(g.settings.asset_data.licenses),"data-download-url":`/api/screen/download/${g.settings.asset_data.token}?track`}:{}),{"data-help":"https://docs.frontify.com/d/2MwJ9kHF57Sc/frontify-style-guide#/product/smart-blocks/image-block","data-feedback":"https://frontify.typeform.com/to/Dj3Utn?block=Image%20Block"}),g.translation?{"data-translation-state":g.translation.state}:{}),g.reference_token?{"data-reference-token":g.reference_token,"data-reference-url":g.reference_url}:{}),{children:[(0,e.jsxs)("div",{className:"b-image__container",children:[(0,e.jsx)("div",{className:` b-image__wrap js-b-image__wrap ${g.settings.mode=="figure"?" mode-figure ":`${g.settings.mode=="text-left"?" mode-text-left ":`${g.settings.mode=="text-top"?" mode-text-top ":" mode-original "}`}`} ${g.settings.alignment=="left"?" align-image-left ":`${g.settings.alignment=="right"?" align-image-right ":""}`} ${g.settings.ratio==25?" text-ratio-25 ":`${g.settings.ratio==50?" text-ratio-50 ":`${g.settings.ratio==75?" text-ratio-75 ":""}`}`} `,children:g.settings.asset>0?(0,e.jsxs)("figure",{className:"b-image__figure js-b-image__figure clearfix","data-href":`/api/screen/download/${g.settings.asset}?track`,children:[(0,e.jsxs)("div",l(o({className:` b-image__canvas js-b-image__canvas ${g.settings.border?" bordered ":""} ${g.settings.asset_viewer_enabled?" js-co-viewer__open ":""} ${g.settings.retina!=!1?" retina ":""} `},g.settings.asset_data?{"data-o-viewer-token":g.settings.asset_data.token,"data-src":g.settings.asset_data.preview_url,"data-width":g.settings.asset_data.width?g.settings.asset_data.width:null,"data-height":g.settings.asset_data.height?g.settings.asset_data.height:null}:{}),{"data-alt":g.settings.caption||" ",style:{backgroundColor:`${g.settings.background?`${g.settings.background}`:"#FFFFFF"}`,padding:`${g.settings.padding?`${g.tpl.appendPx(g.settings.padding)}`:"0px"}`},children:[(0,e.jsx)("a",l(o(o({},(j=g.settings.link)!=null&&j.link?{href:g.settings.link.link}:g.settings.url?{href:g.settings.url}:{href:"javascript:;"}),g.settings.newWindow?{target:"_blank",rel:"noopener"}:{}),{className:` b-image__link js-b-image__link ${g.settings.url?` ${g.settings.url!="javascript:;"?" state-active ":""} `:""}`,"aria-label":`${g.settings.url?`${window.translate("ImageBlock_followLink")}`:`${window.translate("ImageBlock_displayImage")}`}`,children:(0,e.jsx)("div",{className:`b-image__overlay ${g.settings.asset_viewer_enabled?" b-image--pointer ":""}`})})),(0,e.jsx)("div",{className:"inline-actions js-b-image__actions",children:(0,e.jsx)("button",{title:window.translate("ImageBlock_actionDownload"),"aria-label":window.translate("ImageBlock_actionDownload"),className:`btn btn-icon btn-download js-b-image__download-link btn-editor ${g.settings.downloadable!=!0||g.settings.asset_data&&g.settings.asset_data.download_request==!0?"state-hidden":""}`,children:(0,e.jsx)("i",{className:"icon-download"})})})]})),(0,e.jsx)("figcaption",{className:`b-image__caption a-image-caption js-b-image__caption ${g.translation&&g.settings.caption==""&&g.translation.state=="NEW"?" state-orig-empty ":""}`,children:g.settings.caption?(0,u.Ay)(g.settings.caption):null})]}):null}),g.reference_token?"":g.settings.asset>0?g.asset_translation_allowed?(0,e.jsx)(n.K,{allowedExtensions:g.allowed_extensions,project:g.settings.project}):(0,e.jsxs)("div",{className:"m-dropzone js-m-dropzone",children:[(0,e.jsx)("i",{className:"m-dropzone__icon ca-icon--image ca-icon--xl"}),(0,e.jsx)("span",{children:window.translate("ImageBlock_placeholder")}),(0,e.jsx)("input",{className:"m-dropzone__upload js-m-dropzone__upload",type:"button",name:"files_replace[]",accept:g.allowed_extensions,"data-url":`/api/screen/replace/${g.settings.asset}/`,"aria-label":window.translate("ImageBlock_placeholder")})]}):(0,e.jsxs)("div",{className:"b-image__add-image-actions-container",children:[(0,e.jsx)(n.K,{allowedExtensions:g.allowed_extensions,project:g.settings.project}),(0,e.jsx)(b.t,{hasDatatype:!1,iconClass:"ca-icon--image-library ca-icon--xl",assetschooseropenerTranslation:"AssetChooser_text_default"})]})]}),(0,e.jsx)("aside",{className:"b-image__attachments",children:(0,e.jsx)(y.$,o({},g))})]}))})},62964:function(fe,F,i){"use strict";i.d(F,{q:function(){return l}});var e=i(86070),u=i(95376),f=i(14154),b=i(74684),y=i(10440),n=Object.defineProperty,w=Object.defineProperties,E=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,m=(h,g,j)=>g in h?n(h,g,{enumerable:!0,configurable:!0,writable:!0,value:j}):h[g]=j,c=(h,g)=>{for(var j in g||(g={}))C.call(g,j)&&m(h,j,g[j]);if(x)for(var j of x(g))v.call(g,j)&&m(h,j,g[j]);return h},o=(h,g)=>w(h,E(g));const l=(0,f.I)(h=>{var g;return typeof h.settings.border=="boolean"&&(h.settings.border={enabled:h.settings.border}),(0,e.jsxs)("div",o(c(c(c({className:` mod block js-cm-blockmanager__block mod-block-imagegrid b-imagegrid js-co-viewer__setting-module ${h.reference_token?" referenced ":""}`,"data-block":h.id,"data-help":"https://docs.frontify.com/d/2MwJ9kHF57Sc/frontify-style-guide#/product/smart-blocks/image-grid-block","data-feedback":"https://frontify.typeform.com/to/Dj3Utn?block=Image%20Grid%20Block","data-image-and-video-downloads-enabled":h.settings.downloadable,"data-asset-viewer-enabled":h.settings.asset_viewer_enabled},h.translation?{"data-translation-state":h.translation.state}:{}),h.reference_token?{"data-reference-token":h.reference_token}:{}),h.reference_token?{"data-reference-url":h.reference_url}:{}),{children:[(0,e.jsx)("ul",{className:` js-co-viewer__asset-list js-b-imagegrid__grid b-imagegrid__grid grid-${h.settings.columns>0?`${h.settings.columns}`:"3"} ${h.settings.border&&h.settings.border.enabled?" state-border ":""}`,"data-sortable":"true",children:(g=h.settings.assets)==null?void 0:g.map(j=>j.asset>0?(0,e.jsx)("li",{className:"b-imagegrid__item js-b-imagegrid__item","data-asset":j.asset,"data-id":j.id,"data-asset-data":JSON.stringify(j.asset_data),"data-download-request":j.asset_data.download_request,"data-retina":`${j.retina?"true":"false"}`,"data-original-width":j.asset_data.width,"data-original-height":j.asset_data.height,"data-token":j.asset_data.token,"data-filename":j.asset_data.filename,"data-generic-url":j.asset_data.generic_url,"data-preview-url":j.asset_data.preview_url,"data-copyright-download-consensus":j.asset_data.copyright_download_consensus,"data-copyright-notice":j.asset_data.meta_copyright_notice,"data-license-token":j.asset_data.license_token,"data-licenses":JSON.stringify(j.asset_data.licenses),"data-download-url":`/api/screen/download/${j.asset_data.token}?track`,"data-is-workspace-asset":j.isWorkspaceAsset,"data-status":j.asset_data.status,children:(0,e.jsxs)("figure",{className:"b-imagegrid__figure","data-href":j.asset_data.download_url,children:[(0,e.jsxs)("div",{className:"b-imagegrid__image-wrap js-b-imagegrid__image-wrap js-co-viewer__open",style:c(c({},j.padding?{padding:`${j.padding}px`}:{}),j.background?{backgroundColor:`${j.background}`}:{}),"data-o-viewer-token":j.asset_data.token,"data-src":j.asset_data.preview_url,"data-alt":j.title,children:[h.settings.asset_viewer_enabled||j.url?(0,e.jsx)("a",o(c({href:`${j.url?`${j.url}`:"javascript:;"}`},j.newWindow?{target:"_blank",rel:"noopener"}:{}),{className:" b-imagegrid__link js-b-imagegrid__link","aria-label":`${j.url?`${window.translate("ImageGrid_image_followLink")}`:`${window.translate("ImageGrid_image_display")}`}`})):null,(0,e.jsxs)("div",{className:"inline-actions b-imagegrid__actions js-b-imagegrid__actions",children:[(0,e.jsx)("button",{"data-download-request":j.asset_data.download_request,"data-href":`/api/screen/download/${j.asset_data.token}?track`,"data-filename":j.asset_data.filename,className:`btn btn-icon btn-download js-b-imagegrid__download ${h.settings.downloadable!=!0||j.asset_data.download_request==!0?"state-hidden":""}`,children:(0,e.jsx)("i",{className:"icon-download"})}),h.editable||h.asset_translation_allowed?(0,e.jsxs)("div",{className:"cm-btn-dropdown",children:[(0,e.jsx)("button",{className:" btn btn-icon btn-editor js-cm-btn-dropdown__toggle js-b-imagegrid__settings","data-event":"imagegridSettings",children:(0,e.jsx)("i",{className:"icon-angle-down"})}),(0,e.jsx)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--fixed-width js-cm-btn-dropdown__menu"})]}):null]})]}),(0,e.jsx)("div",{className:"b-imagegrid__title-wrapper a-image-title",children:(0,e.jsx)("div",{className:"b-imagegrid__title js-b-imagegrid__title",placeholder:window.translate("ImageGrid_setting_title_placeholder"),children:j.title?(0,u.Ay)(j.title):null})}),(0,e.jsx)("div",{className:"b-imagegrid__desc-wrapper a-image-caption",children:(0,e.jsx)("figcaption",{className:"b-imagegrid__desc js-b-imagegrid__desc",placeholder:window.translate("ImageGrid_setting_description_placeholder"),children:j.caption!==void 0&&j.caption!=="<p><br /></p>"?(0,u.Ay)(j.caption):null})})]})},j.id):null)}),h.editable||h.asset_translation_allowed?(0,e.jsxs)("form",{className:"js-b-imagegrid__replace-form",style:{display:"none"},action:"#",method:"POST",encType:"multipart/form-data",children:[(0,e.jsx)("input",{type:"hidden",className:"js-b-imagegrid__asset-id",name:"asset",value:"0"}),(0,e.jsx)("input",{type:"file",name:"files[]",className:"js-b-imagegrid__replace",accept:h.allowed_extensions})]}):null,h.editable&&h.reference_token==null?(0,e.jsxs)("div",{className:"b-imagegrid__add-image-actions-container",children:[(0,e.jsx)(y.K,{allowMultiselection:!0,allowedExtensions:h.allowed_extensions,project:h.settings.project}),(0,e.jsx)(b.t,{hasDatatype:!1,iconClass:"ca-icon--image-library ca-icon--xl",assetschooseropenerTranslation:"AssetChooser_text_default"})]}):null]}))})},76480:function(fe,F,i){"use strict";i.d(F,{o:function(){return o}});var e=i(86070),u=i(14154),f=i(74684),b=i(10440),y=Object.defineProperty,n=Object.defineProperties,w=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,v=(l,h,g)=>h in l?y(l,h,{enumerable:!0,configurable:!0,writable:!0,value:g}):l[h]=g,m=(l,h)=>{for(var g in h||(h={}))x.call(h,g)&&v(l,g,h[g]);if(E)for(var g of E(h))C.call(h,g)&&v(l,g,h[g]);return l},c=(l,h)=>n(l,w(h));const o=(0,u.I)(l=>(0,e.jsx)("div",c(m(m(m(m(c(m({className:`mod block js-cm-blockmanager__block mod-block-video b-video js-co-viewer__setting-module ${l.reference_token?"referenced":""}`,"data-ready":"true","data-block":l.id},l.reference_token?{"data-reference-token":l.reference_token,"data-reference-url":l.reference_url}:{}),{"data-asset-data":JSON.stringify(l.settings.asset_data),"data-video-id":l.settings.video_id,"data-image-and-video-downloads-enabled":l.settings.downloadable,"data-viewer-enabled":l.settings.asset_viewer_enabled,"data-txt-placeholder":window.translate("VideoBlock_placeholder"),"data-txt-processing":window.translate("VideoBlock_processing"),"data-txt-processing-error-title":window.translate("VideoBlock_processingErrorTitle"),"data-txt-processing-error-description":window.translate("VideoBlock_processingErrorDescription")}),l.settings.asset_data?{"data-video-status":l.settings.asset_data.status,"data-video-preview-url":l.settings.asset_data.preview_url,"data-video-generic-url":l.settings.asset_data.generic_url,"data-video-width":l.settings.asset_data.width,"data-video-filename":l.settings.asset_data.filename,"data-copyright-download-consensus":l.settings.asset_data.copyright_download_consensus,"data-copyright-notice":l.settings.asset_data.meta_copyright_notice,"data-license-token":l.settings.asset_data.license_token,"data-licenses":JSON.stringify(l.settings.asset_data.licenses),"data-download-url":`/api/screen/download/${l.tpl.escape(l.settings.asset_data.token)}`}:{}),l.settings.autoplay?{"data-video-autoplay":"true"}:{}),l.settings.loop?{"data-video-loop":"true"}:{}),l.settings.width?{"data-settings-width":l.settings.width}:{}),{children:(0,e.jsx)("div",{className:"b-video__container",children:l.settings.asset_data&&l.settings.asset_data.generic_url&&l.settings.status==="FINISHED"?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"b-video__hidden-formfields",children:l.asset_translation_allowed?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("input",{className:"m-dropzone__upload js-m-dropzone__upload",type:"file",name:"files[]",accept:l.allowed_extensions,"aria-label":window.translate("VideoBlock_placeholder")}),(0,e.jsx)("div",{className:"m-dropzone__progress-container js-m-dropzone__progress-container",children:(0,e.jsx)("div",{className:"m-dropzone__progress-bar js-m-dropzone__progress-bar"})})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("input",{className:"m-dropzone__upload js-m-dropzone__upload",type:"file",name:"files_replace[]",accept:l.allowed_extensions,"aria-label":window.translate("VideoBlock_placeholder")}),(0,e.jsx)("div",{className:"m-dropzone__progress-container js-m-dropzone__progress-container",children:(0,e.jsx)("div",{className:"m-dropzone__progress-bar js-m-dropzone__progress-bar"})})]})}),(0,e.jsx)("div",{className:"inline-actions js-b-video__actions",children:(0,e.jsxs)("div",{className:"cm-btn-dropdown",children:[l.settings.asset_viewer_enabled?(0,e.jsx)("button",{className:"btn btn-icon js-co-viewer__open","data-o-viewer-token":l.settings.asset_data.token,children:(0,e.jsx)("i",{className:"m-attachments__toggle-icon icon-info"})}):null,(0,e.jsx)("button",{title:window.translate("VideoBlock_actionDownload"),"aria-label":window.translate("VideoBlock_actionDownload"),className:`btn btn-icon btn-download js-b-video__download-link ${l.settings.downloadable!=!0||l.settings.asset_data.download_request==!0?"state-hidden":""}`,children:(0,e.jsx)("i",{className:"icon-download"})})]})}),(0,e.jsx)("div",{className:"b-video__wrapper-size js-b-video__wrapper-size",style:m({maxWidth:`${l.settings.video_width}px`},l.settings.width?{width:`${l.settings.width}px`}:{})})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(b.K,{allowedExtensions:l.allowed_extensions,icon:"upload-alternative",label:"VideoBlock_placeholder",noDataUrl:!0,project:l.settings.project}),(0,e.jsx)(f.t,{hasDatatype:!0,datatype:"donts",iconClass:"ca-icon--video ca-icon--xl",assetschooseropenerTranslation:"VideoBlock_assetchooserPlaceholder"})]})})})))},29201:function(fe,F,i){"use strict";i.d(F,{r:function(){return m}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.defineProperties,y=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,x=(c,o,l)=>o in c?f(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,C=(c,o)=>{for(var l in o||(o={}))w.call(o,l)&&x(c,l,o[l]);if(n)for(var l of n(o))E.call(o,l)&&x(c,l,o[l]);return c},v=(c,o)=>b(c,y(o));const m=(0,u.I)(c=>(0,e.jsx)("div",{className:"pb-divider__content js-pb-divider__content",style:C(C({},c.settings.padding?{padding:`${c.tpl.unit(c.settings.padding.top)} ${c.tpl.unit(c.settings.padding.right)} ${c.tpl.unit(c.settings.padding.bottom)} ${c.tpl.unit(c.settings.padding.left)}`}:{}),c.settings.containerBackground?{backgroundColor:`${c.settings.containerBackground}`}:{}),children:(0,e.jsx)("hr",{className:"pb-divider__line","data-test-id":"cover-page-divider-block-line",style:C(v(C({},c.settings.background?{background:`${c.settings.background}`}:{}),{height:`${c.settings.height?`${c.tpl.unit(c.settings.height)}`:"1px"}`}),c.settings.width?{maxWidth:`${c.tpl.unit(c.settings.width)}`}:{})})}))},76746:function(fe,F,i){"use strict";i.d(F,{O:function(){return v}});var e=i(86070),u=i(21348),f=i(14154),b=i(29201),y=Object.defineProperty,n=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,x=(m,c,o)=>c in m?y(m,c,{enumerable:!0,configurable:!0,writable:!0,value:o}):m[c]=o,C=(m,c)=>{for(var o in c||(c={}))w.call(c,o)&&x(m,o,c[o]);if(n)for(var o of n(c))E.call(c,o)&&x(m,o,c[o]);return m};const v=(0,f.I)(m=>(0,e.jsxs)("div",{className:"mod mod-pb-divider pb-divider cm-blockmanager__block js-cm-blockmanager__block","data-block":m.teaser,"data-type":"DIVIDER","data-test-id":"cover-page-divider-block",children:[!m.translation&&m.utils.account.hasPermission("edit")?(0,e.jsx)(u.f,{type:"DIVIDER",translation:!1}):null,(0,e.jsx)(b.r,C({},m))]}))},57819:function(fe,F,i){"use strict";i.d(F,{M:function(){return x}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,w=(C,v,m)=>v in C?f(C,v,{enumerable:!0,configurable:!0,writable:!0,value:m}):C[v]=m,E=(C,v)=>{for(var m in v||(v={}))y.call(v,m)&&w(C,m,v[m]);if(b)for(var m of b(v))n.call(v,m)&&w(C,m,v[m]);return C};const x=(0,u.I)(C=>(0,e.jsx)("div",{className:`pb-iframe__content js-pb-iframe__content ${C.settings.url?"":"state-empty"}`,style:E(E({},C.settings.padding?{padding:`${C.tpl.unit(C.settings.padding.top)} ${C.tpl.unit(C.settings.padding.right)} ${C.tpl.unit(C.settings.padding.bottom)} ${C.tpl.unit(C.settings.padding.left)}`}:{}),C.settings.border&&C.settings.border.width?{border:`${C.tpl.unit(C.settings.border.width)} solid ${C.settings.border.color}`,borderRadius:`${C.tpl.unit(C.settings.border.radius)}`}:{}),children:C.settings.url?(0,e.jsx)("iframe",{className:"pb-iframe__iframe",style:E({},C.settings.height?{height:`${C.tpl.unit(C.settings.height)||"150px"}`}:{}),src:C.settings.url,frameBorder:"0","aria-label":"Embedded content",title:"Embedded content"}):null}))},96840:function(fe,F,i){"use strict";i.d(F,{f:function(){return v}});var e=i(86070),u=i(21348),f=i(14154),b=i(57819),y=Object.defineProperty,n=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,x=(m,c,o)=>c in m?y(m,c,{enumerable:!0,configurable:!0,writable:!0,value:o}):m[c]=o,C=(m,c)=>{for(var o in c||(c={}))w.call(c,o)&&x(m,o,c[o]);if(n)for(var o of n(c))E.call(c,o)&&x(m,o,c[o]);return m};const v=(0,f.I)(m=>(0,e.jsxs)("div",{className:"mod mod-pb-iframe pb-iframe js-cm-blockmanager__block cm-blockmanager__block","data-block":m.teaser,"data-type":m.block_type,children:[m.utils.account.hasPermission("edit")||m.translation&&m.utils.account.hasPermission("translate")?(0,e.jsx)(u.f,{type:m.block_type,translation:m.translation}):null,(0,e.jsx)(b.M,C({},m))]}))},83893:function(fe,F,i){"use strict";i.d(F,{C:function(){return c}});var e=i(86070),u=i(95376),f=i(14154),b=Object.defineProperty,y=Object.defineProperties,n=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,C=(o,l,h)=>l in o?b(o,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):o[l]=h,v=(o,l)=>{for(var h in l||(l={}))E.call(l,h)&&C(o,h,l[h]);if(w)for(var h of w(l))x.call(l,h)&&C(o,h,l[h]);return o},m=(o,l)=>y(o,n(l));const c=(0,f.I)(o=>{var l,h;return(0,e.jsx)("div",{className:`pb-media__content js-pb-media__content ${o.settings.media&&o.settings.media.html?"":"state-empty"}`,style:v(v(v({},o.settings.padding?{padding:`${o.tpl.unit(o.settings.padding.top)} ${o.tpl.unit(o.settings.padding.right)} ${o.tpl.unit(o.settings.padding.bottom)} ${o.tpl.unit(o.settings.padding.left)}`}:{}),o.settings.border&&o.settings.border.width?{border:`${o.tpl.unit(o.settings.border.width)} solid ${o.settings.border.color}`,borderRadius:`${o.tpl.unit(o.settings.border.radius)}`}:{}),o.settings.background?{background:`${o.settings.background}`}:{}),children:(0,e.jsx)("div",m(v({className:"pb-media__media js-pb-media__media"},(l=o.settings.media)!=null&&l.height&&((h=o.settings.media)!=null&&h.width)?{style:{height:"0",paddingBottom:`${o.settings.media.height/o.settings.media.width*100}%`}}:{}),{children:o.settings.media&&o.settings.media.html?(0,u.Ay)(o.settings.media.html):null}))})})},14860:function(fe,F,i){"use strict";i.d(F,{T:function(){return v}});var e=i(86070),u=i(21348),f=i(14154),b=i(83893),y=Object.defineProperty,n=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,x=(m,c,o)=>c in m?y(m,c,{enumerable:!0,configurable:!0,writable:!0,value:o}):m[c]=o,C=(m,c)=>{for(var o in c||(c={}))w.call(c,o)&&x(m,o,c[o]);if(n)for(var o of n(c))E.call(c,o)&&x(m,o,c[o]);return m};const v=(0,f.I)(m=>(0,e.jsxs)("div",{className:"mod mod-pb-media pb-media cm-blockmanager__block js-cm-blockmanager__block","data-block":m.teaser,"data-type":m.block_type,"data-text-error-title":window.translate("BrandportalMedia_errorTitle"),"data-text-error-description":window.translate("BrandportalMedia_errorDescription"),children:[m.utils.account.hasPermission("edit")||m.translation&&m.utils.account.hasPermission("translate")?(0,e.jsx)(u.f,{type:m.block_type,translation:m.translation}):null,(0,e.jsx)(b.C,C({},m))]}))},25100:function(fe,F,i){"use strict";i.d(F,{B:function(){return f}});var e=i(86070),u=i(14154);const f=(0,u.I)(b=>(0,e.jsx)("div",{className:"mod mod-pb-none pb-none cm-blockmanager__block js-cm-blockmanager__block","data-block":b.teaser,"data-type":b.block_type,children:(0,e.jsx)("div",{className:"pb-none__add-block js-pb-none__add-block",children:b.translation?null:(0,e.jsxs)("div",{className:"cm-btn-dropdown",children:[(0,e.jsx)("button",{className:"js-cm-btn-dropdown__toggle cm-btn cm-btn--default","data-event":"blockChooser",children:window.translate("BrandportalNone_addContent")}),(0,e.jsx)("div",{className:"js-cm-btn-dropdown__menu cm-btn-dropdown__menu cm-btn-dropdown__menu--center cm-btn-dropdown__menu--below pb-none__menu "})]})})}))},55337:function(fe,F,i){"use strict";i.d(F,{s:function(){return De}});var e=i(86070),u=i(95376),f=i(49198),b=i.n(f),y=i(14154);const n=(0,y.I)(Ie=>(0,e.jsxs)("div",{className:`cm-image-legacy__assetchooser ${Ie.enabled?"state-enabled":""}`,children:[(0,e.jsx)("div",{className:"cm-image-legacy__assetchooser-overlay js-cm-image-legacy__assetchooser-overlay"}),(0,e.jsx)("i",{className:"cm-image-legacy__assetchooser-icon ca-icon--image-library ca-icon--lg"}),(0,e.jsx)("span",{className:"cm-image-legacy__assetchooser-label",children:"Add existing"})]}));var w=i(53460),E=Object.defineProperty,x=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,m=(Ie,Te,he)=>Te in Ie?E(Ie,Te,{enumerable:!0,configurable:!0,writable:!0,value:he}):Ie[Te]=he,c=(Ie,Te)=>{for(var he in Te||(Te={}))C.call(Te,he)&&m(Ie,he,Te[he]);if(x)for(var he of x(Te))v.call(Te,he)&&m(Ie,he,Te[he]);return Ie};const o=(0,y.I)(Ie=>{let Te,he;return Ie.preview_image_background&&(Te=b()(Ie.preview_image_background),Te.setAlpha(.8),he=b()(Ie.preview_image_background),he.setAlpha(.6)),(0,e.jsxs)("div",{className:"cm-image-legacy__dropzone-assetchooser-container",children:[(0,e.jsx)(w.B,c({},Ie)),(0,e.jsx)(n,c({},Ie)),Ie.preview_image_background?(0,e.jsx)("div",{className:"cm-image-legacy__dropzone-assetchooser-overlay",style:{backgroundImage:`linear-gradient(to bottom, ${Te==null?void 0:Te.toRgbString()} 0%, ${he==null?void 0:he.toRgbString()} 100%)`}}):null]})});var l=i(8394),h=Object.defineProperty,g=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable,S=(Ie,Te,he)=>Te in Ie?h(Ie,Te,{enumerable:!0,configurable:!0,writable:!0,value:he}):Ie[Te]=he,T=(Ie,Te)=>{for(var he in Te||(Te={}))j.call(Te,he)&&S(Ie,he,Te[he]);if(g)for(var he of g(Te))$.call(Te,he)&&S(Ie,he,Te[he]);return Ie};const A=(0,y.I)(Ie=>Ie.image?(0,e.jsx)(l.x,T({},Ie)):(0,e.jsx)(o,T({},Ie)));var B=i(5181),R=Object.defineProperty,k=Object.defineProperties,V=Object.getOwnPropertyDescriptors,K=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,re=(Ie,Te,he)=>Te in Ie?R(Ie,Te,{enumerable:!0,configurable:!0,writable:!0,value:he}):Ie[Te]=he,ve=(Ie,Te)=>{for(var he in Te||(Te={}))z.call(Te,he)&&re(Ie,he,Te[he]);if(K)for(var he of K(Te))q.call(Te,he)&&re(Ie,he,Te[he]);return Ie},Oe=(Ie,Te)=>k(Ie,V(Te));const De=(0,y.I)(Ie=>{Ie.settings.image=Ie.settings.image||{},Ie.settings.image.image=Ie.file_url;const Te=Ie.tpl.unit(Ie.settings.image_width),he=Ie.settings.cover&&(Ie.settings.layout==="leftright"||Ie.settings.layout==="rightleft"||Ie.settings.layout==="image"),se=!Ie.settings.image||!Ie.settings.image.image;let de=(Ie.settings.layout==="leftright"||Ie.settings.layout==="rightleft")&&!(!Te.toString().includes("%")&&Te!=="auto"&&Te!=="")?50:null;return de!==null&&Te!=="auto"&&Te!==""&&(de=parseFloat(Te)),(0,e.jsxs)("div",Oe(ve({className:`
                pb-text-image__content
                js-pb-text-image__content
                ${Ie.settings.layout?`layout-${Ie.settings.layout}`:"layout-topleft"}
                ${Ie.settings.cover&&Ie.settings.cover_mode==="contain"?"pb-text-image__content--cover-mode-contain":""}
            `,style:ve({},Ie.settings.border&&Ie.settings.border.width?{border:`${Ie.tpl.unit(Ie.settings.border.width)} solid ${Ie.settings.border.color}`,borderRadius:Ie.tpl.unit(Ie.settings.border.radius)}:{})},Ie.settings.link?ve(ve({},Ie.settings.link.url?{"data-link":Ie.settings.link.url}:{}),Ie.settings.new_window?{"data-link-new-window":Ie.settings.new_window}:{}):{}),{children:[(0,e.jsx)("a",{className:`
                    pb-text-image__image
                    ${se?" state-empty":""}
                    ${se&&Ie.settings.big_empty_state?" state-empty-big":""}
                `,href:Ie.settings.image_link&&Ie.settings.image_link.url.length>0?Ie.settings.image_link.url:Ie.settings.link&&Ie.settings.link.url.length>0?Ie.settings.link.url:null,"data-href":Ie.settings.image_link&&Ie.settings.image_link.url.length>0?Ie.settings.image_link.url:Ie.settings.link&&Ie.settings.link.url.length>0?Ie.settings.link.url:null,target:Ie.settings.image_link&&Ie.settings.image_link.url.length>0&&Ie.settings.image_new_window||Ie.settings.link&&Ie.settings.link.url.length>0&&Ie.settings.new_window?"_blank":"_self",style:ve(ve(ve({},Ie.settings.image_background?{background:Ie.settings.image_background}:Ie.settings.image&&Ie.settings.image.background_color?{background:Ie.settings.image.background_color}:{}),Ie.settings.image_padding&&{padding:`${Ie.tpl.unit(Ie.settings.image_padding.top)} ${Ie.tpl.unit(Ie.settings.image_padding.right)} ${Ie.tpl.unit(Ie.settings.image_padding.bottom)} ${Ie.tpl.unit(Ie.settings.image_padding.left)}`}),Ie.settings.layout==="leftright"||Ie.settings.layout==="rightleft"?!Te.toString().includes("%")&&Te!=="auto"&&Te!==""?{flex:"1 auto"}:{flex:`1 ${de}%`}:{}),rel:"noreferrer",children:(0,e.jsxs)("div",{className:`pb-text-image__image-inner ${Ie.settings.image_position?`state-${Ie.settings.image_position}`:"state-topleft"} ${he?"state-cover":""}`,style:ve(ve({},Te?{width:Te==="auto"?"100%":Te}:{}),Ie.settings.layout==="leftright"||Ie.settings.layout==="rightleft"?Te.toString().includes("%")||Te==="auto"||Te===""?{width:"100%"}:{}:{}),children:[(0,e.jsx)("div",{className:"js-pb-text-image__image pb-text-image__image-container",children:(0,e.jsx)(A,ve({},B.extend(!0,{},Ie.settings.image,{id:Ie.teaser,crop:!1,cover:he,cover_mode:Ie.settings.cover_mode||void 0,modifier_dropzone:Ie.settings.initial_editing?"small":null})))}),(0,e.jsx)("div",{className:"js-pb-text-image__image-overlay pb-text-image__image-overlay",style:ve({},Ie.settings.image_overlay?{background:Ie.settings.image_overlay}:{})})]})}),(0,e.jsx)("div",{className:`pb-text-image__text ${Ie.settings.initial_editing===!0?"pb-text-image__text--initial-editing":""} ${Ie.settings.content?"":"state-empty"}`,style:ve(ve({},de?{flex:`1 ${100-de}%`}:{}),Ie.settings.content_background?{background:Ie.settings.content_background}:{}),"data-test-id":"cover-page-column-content",children:(0,e.jsx)("div",{className:`pb-text-image__text-inner js-pb-text-image__editor ${Ie.settings.image&&Ie.settings.image.image?"state-visible":""} ${Ie.settings.content_position?`state-${Ie.settings.content_position}`:"state-topleft"}`,style:ve(ve(ve({},Ie.settings.content_width&&(Ie.settings.layout==="textover"?Ie.tpl.unit(Ie.settings.content_width)!=="auto"?{maxWidth:Ie.tpl.unit(Ie.settings.content_width)}:{maxWidth:"50%"}:{maxWidth:Ie.tpl.unit(Ie.settings.content_width)})),Ie.settings.content_background_text?{background:Ie.settings.content_background_text}:{}),Ie.settings.content_padding?{padding:`${Ie.tpl.unit(Ie.settings.content_padding.top)} ${Ie.tpl.unit(Ie.settings.content_padding.right)} ${Ie.tpl.unit(Ie.settings.content_padding.bottom)} ${Ie.tpl.unit(Ie.settings.content_padding.left)}`}:{}),"data-test-id":"cover-page-column-content",children:(0,u.Ay)(Ie.settings.content||Ie.settings.preview_content||"")})})]}))})},5188:function(fe,F,i){"use strict";i.d(F,{J:function(){return v}});var e=i(86070),u=i(21348),f=i(14154),b=i(55337),y=Object.defineProperty,n=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,x=(m,c,o)=>c in m?y(m,c,{enumerable:!0,configurable:!0,writable:!0,value:o}):m[c]=o,C=(m,c)=>{for(var o in c||(c={}))w.call(c,o)&&x(m,o,c[o]);if(n)for(var o of n(c))E.call(c,o)&&x(m,o,c[o]);return m};const v=(0,f.I)(m=>(0,e.jsxs)("div",{className:"mod mod-pb-text-image pb-text-image cm-blockmanager__block js-cm-blockmanager__block","data-block":m.teaser,"data-type":m.block_type,children:[m.utils.account.hasPermission("edit")||m.translation&&m.utils.account.hasPermission("translate")?(0,e.jsx)(u.f,{type:m.block_type,translation:m.translation}):null,(0,e.jsx)(b.s,C({},m))]}))},95878:function(fe,F,i){"use strict";i.d(F,{O:function(){return l}});var e=i(86070),u=i(21348),f=i(60801),b=i(73260),y=i(14154),n=Object.defineProperty,w=Object.defineProperties,E=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,m=(h,g,j)=>g in h?n(h,g,{enumerable:!0,configurable:!0,writable:!0,value:j}):h[g]=j,c=(h,g)=>{for(var j in g||(g={}))C.call(g,j)&&m(h,j,g[j]);if(x)for(var j of x(g))v.call(g,j)&&m(h,j,g[j]);return h},o=(h,g)=>w(h,E(g));const l=(0,y.I)(h=>(0,e.jsxs)("div",{className:"mod mod-pb-video pb-video js-pb-video cm-blockmanager__block js-cm-blockmanager__block","data-block":h.teaser,"data-type":h.block_type,children:[h.utils.account.hasPermission("edit")||h.translation&&h.utils.account.hasPermission("translate")?(0,e.jsx)(u.f,{type:h.block_type,translation:h.translation}):null,(0,e.jsx)("div",{className:`pb-video__container js-pb-video__container ${h.file_url?"":"state-empty"}`,style:c(c({},h.settings.border&&h.settings.border.width?{border:`${h.tpl.unit(h.settings.border.width)} solid ${h.settings.border.color}`,borderRadius:`${h.tpl.unit(h.settings.border.radius)}`}:{}),h.settings.background?{background:`${h.settings.background}`}:{}),children:(0,e.jsx)(b.L,o(c({},h.settings),{previewUrl:h.file_url,hideControlsOnLeaveAndIdle:!0,hideSpecialControls:h.blockWidth<f.h.SPECIAL_CONTROLS_BREAKPOINT,spaceBarToggleOnlyAfterInteraction:!0,allowedExtensions:h.allowedVideoExtensions}))})]}))},74684:function(fe,F,i){"use strict";i.d(F,{t:function(){return m}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.defineProperties,y=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,x=(c,o,l)=>o in c?f(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,C=(c,o)=>{for(var l in o||(o={}))w.call(o,l)&&x(c,l,o[l]);if(n)for(var l of n(o))E.call(o,l)&&x(c,l,o[l]);return c},v=(c,o)=>b(c,y(o));const m=(0,u.I)(c=>(0,e.jsxs)("div",v(C({className:"m-assetchooserplaceholder js-m-assetchooser-placeholder"},c.hasDatatype?{"data-type":c.datatype}:{}),{children:[(0,e.jsx)("i",{className:`m-assetchooserplaceholder__icon ca-icon--image-library ca-icon--xl ${c.iconClass}`}),(0,e.jsx)("span",{children:window.translate(c.assetschooseropenerTranslation)})]})))},57209:function(fe,F,i){"use strict";i.d(F,{$:function(){return b}});var e=i(86070),u=i(95376),f=i(14154);const b=(0,f.I)(y=>(0,e.jsx)("div",{className:"mod mod-attachments m-attachments","data-editable":y.editable,"data-block-type":y.type,children:(0,e.jsxs)("div",{className:"cm-btn-dropdown m-attachments__dropdown js-m-attachments__dropdown",children:[(0,e.jsxs)("button",{className:"cm-btn m-btn--secondary m-btn--round js-cm-btn-dropdown__toggle",title:window.translate("AttachmentsPattern_title"),"aria-label":window.translate("AttachmentsPattern_title"),children:[(0,e.jsx)("i",{className:"m-attachments__toggle-icon icon-paperclip"}),(0,e.jsx)("span",{className:"m-attachments__count js-m-attachments__count"}),(0,e.jsx)("i",{className:"m-attachments__toggle-caret icon-angle-down"})]}),(0,e.jsxs)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--below cm-btn-dropdown__menu--right m-attachments__menu js-cm-btn-dropdown__menu",children:[(0,e.jsx)("ul",{className:"m-attachments__list clearfix js-m-attachments__list"}),y.editable?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"m-attachments__dropzone js-m-attachments__dropzone",children:[(0,e.jsxs)("span",{className:"m-attachments__btn",id:"m-attachments__btn",children:[(0,e.jsx)("i",{className:"m-attachments__btn-icon icon-paperclip"}),(0,u.Ay)(window.translate("AttachmentsPattern_add_attachments"))]}),(0,e.jsx)("input",{className:"m-attachments__files js-m-attachments__files","aria-labelledby":"m-attachments__btn",type:"file",name:"files[]","data-url":`/api/attachment/upload/${y.id}/${y.settings.asset}/`,multiple:!0})]}),(0,e.jsxs)("form",{className:"m-attachments__replace-form js-m-attachments__replace-form",action:"#",method:"POST",encType:"multipart/form-data",children:[(0,e.jsx)("input",{type:"hidden",className:"js-m-attachments__replace-id",name:"asset",value:"0"}),(0,e.jsx)("input",{type:"file",name:"files[]",className:"js-m-attachments__replace-input","data-url":`/api/attachment/upload/${y.id}/${y.settings.asset}/`,"aria-label":window.translate("AttachmentsPattern_replace_attachment")})]})]}):null]})]})}))},10440:function(fe,F,i){"use strict";i.d(F,{K:function(){return x}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,w=(C,v,m)=>v in C?f(C,v,{enumerable:!0,configurable:!0,writable:!0,value:m}):C[v]=m,E=(C,v)=>{for(var m in v||(v={}))y.call(v,m)&&w(C,m,v[m]);if(b)for(var m of b(v))n.call(v,m)&&w(C,m,v[m]);return C};const x=(0,u.I)(C=>(0,e.jsxs)("div",{className:"m-dropzone js-m-dropzone",children:[(0,e.jsx)("i",{className:`m-dropzone__icon ca-icon--${C.icon?`${C.icon}`:"image"} ca-icon--xl`}),(0,e.jsx)("span",{children:C.label?window.translate(C.label):window.translate("Dropzone_Text")}),(0,e.jsx)("input",E(E(E({className:"m-dropzone__upload m-dropzone__upload--visible js-m-dropzone__upload",type:"file",name:"files[]","aria-label":`${C.label?`${window.translate(C.label)}`:`${window.translate("Dropzone_Text")}`}`},C.project&&C.noDataUrl==null?{"data-url":`/api/screen/upload/${C.project}/`}:{}),C.allowedExtensions?{accept:C.allowedExtensions}:{}),C.allowMultiselection?{multiple:!0}:{})),(0,e.jsx)("div",{className:"m-dropzone__progress-container js-m-dropzone__progress-container",children:(0,e.jsx)("div",{className:"m-dropzone__progress-bar js-m-dropzone__progress-bar"})})]}))},83367:function(fe,F,i){"use strict";i.d(F,{i:function(){return n}});var e=i(86070),u=i(49290),f=i(2728),b=i(59240),y=i(14154);const n=(0,y.I)(w=>{let E=[];if(!w.item&&w.data.facettes.length>0)E=w.data.facettes[0].values;else if(w.item&&w.data.facettes.length>0){const x=w.data.facettes.find(C=>C.value==w.item.key);x&&(E=x.values)}return(0,e.jsxs)("form",{className:"cm-setting__details cm-setting-list__details",children:[(0,e.jsx)(b.U,{id:"key",label:window.translate("Legacy_medialibrary_facette_field_conditions_field"),value:w.item?w.item.key:null,options:w.data.facettes||[]}),(0,e.jsx)(b.U,{id:"value",label:window.translate("Legacy_medialibrary_facette_field_conditions_value"),value:w.item?w.item.value:null,options:E}),(0,e.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer cm-setting__actions cm-setting__actions--flyout js-cm-setting__actions js-cm-setting-list__actions",children:[(0,e.jsx)(f.b,{label_submit:window.translate("Legacy_medialibrary_facette_field_conditions_save")}),(0,e.jsx)(u.t,{})]})]})})},8753:function(fe,F,i){"use strict";i.d(F,{x:function(){return f}});var e=i(86070),u=i(14154);const f=(0,u.I)(b=>{var y;let n=0;return b.items&&b.items.length>0?(0,e.jsxs)(e.Fragment,{children:[(y=b.items)==null?void 0:y.map(w=>{const E=b.data.facettes.find(v=>v.value===w.key),x=E==null?void 0:E.values.find(v=>v.value===w.key),C=E==null?void 0:E.values.find(v=>v.value===w.value);return w.value!==void 0&&w.value!==null&&E===void 0&&n++,w.value!==void 0&&w.value!==null?E!==void 0?(0,e.jsxs)("div",{className:"js-cm-setting-list__item cm-setting-list__item","data-value":w.value,children:[(0,e.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--value",children:E.type==="tags"?(0,e.jsxs)(e.Fragment,{children:[E.name," = ",x?x.name:"Tag group does not exists anymore"]}):(0,e.jsxs)(e.Fragment,{children:[E.name," = ",C?C.name:w.value]})}),(0,e.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,e.jsx)("i",{className:"ca-icon--settings js-cm-setting-list__edit cm-setting-list__icon"})}),(0,e.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,e.jsx)("i",{className:"ca-icon--trash cm-setting-list__remove js-cm-setting-list__remove cm-setting-list__icon"})})]}):(0,e.jsxs)("div",{className:"js-cm-setting-list__item cm-setting-list__item","data-value":w.value,children:[(0,e.jsxs)("div",{className:"cm-setting-list__col cm-setting-list__col--value",children:[w.value," = ","Facet does not exists anymore"]}),(0,e.jsx)("div",{className:"cm-setting-list__col cm-setting-list__col--settings",children:(0,e.jsx)("i",{className:"ca-icon--trash cm-setting-list__remove js-cm-setting-list__remove cm-setting-list__icon"})})]}):null}),b.items.length===n?(0,e.jsx)("div",{className:"co-settings__blank cm-setting-list__blank",children:window.translate("Legacy_medialibrary_facette_field_conditions_none")}):null]}):(0,e.jsx)("div",{className:"co-settings__blank cm-setting-list__blank",children:window.translate("Legacy_medialibrary_facette_field_conditions_none")})})},24033:function(fe,F,i){"use strict";i.d(F,{D:function(){return w}});var e=i(86070),u=i(49290),f=i(2728),b=i(30543),y=i(62878),n=i(14154);const w=(0,n.I)(()=>(0,e.jsxs)("form",{className:"cm-setting__details cm-setting-list__details",children:[(0,e.jsx)(y.A,{id:"name",label:window.translate("Legacy_medialibrary_facette_field_filetypes_title"),placeholder:"",required:!0}),(0,e.jsx)(b.e,{id:"types",placeholder:window.translate("Legacy_medialibrary_facette_field_filetypes_placeholder"),label:window.translate("Legacy_medialibrary_facette_field_filetypes"),label_none:window.translate("Legacy_medialibrary_facette_field_filetypes_none"),tags:[]}),(0,e.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer cm-setting__actions cm-setting__actions--flyout js-cm-setting__actions js-cm-setting-list__actions",children:[(0,e.jsx)(f.b,{}),(0,e.jsx)(u.t,{})]})]}))},20214:function(fe,F,i){"use strict";i.d(F,{O:function(){return E}});var e=i(86070),u=i(49290),f=i(2728),b=i(29083),y=i(30543),n=i(62878),w=i(14154);const E=(0,w.I)(x=>(0,e.jsxs)("form",{className:"cm-setting__details cm-setting-list__details",children:[(0,e.jsx)(b.f,{id:"value",value:x.item.value}),(0,e.jsx)(n.A,{id:"name",label:window.translate("Legacy_medialibrary_facette_field_filetypes_title"),placeholder:"",value:x.item.name,required:!0}),(0,e.jsx)(y.e,{id:"types",placeholder:window.translate("Legacy_medialibrary_facette_field_filetypes_placeholder"),label:window.translate("Legacy_medialibrary_facette_field_filetypes"),label_none:window.translate("Legacy_medialibrary_facette_field_filetypes_none"),tags:x.item.types}),(0,e.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer cm-setting__actions cm-setting__actions--flyout js-cm-setting__actions js-cm-setting-list__actions",children:[(0,e.jsx)(f.b,{}),(0,e.jsx)(u.t,{})]})]}))},58921:function(fe,F,i){"use strict";i.d(F,{p:function(){return E}});var e=i(86070),u=i(49290),f=i(2728),b=i(30543),y=i(62878),n=i(90307),w=i(14154);const E=(0,w.I)(x=>(0,e.jsxs)("form",{className:"cm-setting__details cm-setting-list__details",children:[(0,e.jsx)(y.A,{id:"name",label:window.translate("Legacy_medialibrary_facette_field_filters_title"),placeholder:"",required:!0}),(0,e.jsx)(n.f,{id:"and_conjunction",label:window.translate("Legacy_medialibrary_facette_field_filter_combined"),checked:!0}),(0,e.jsx)(b.e,{id:"tags",projectId:x.data.project,searchApi:"/api/tag",searchFilteredBy:"PROJECT",placeholder:window.translate("Legacy_medialibrary_facette_field_tags_placeholder"),label:window.translate("Legacy_medialibrary_facette_field_tags"),tags:[]}),(0,e.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer cm-setting__actions cm-setting__actions--flyout js-cm-setting__actions js-cm-setting-list__actions",children:[(0,e.jsx)(f.b,{}),(0,e.jsx)(u.t,{})]})]}))},97822:function(fe,F,i){"use strict";i.d(F,{w:function(){return x}});var e=i(86070),u=i(49290),f=i(2728),b=i(29083),y=i(30543),n=i(62878),w=i(90307),E=i(14154);const x=(0,E.I)(C=>(0,e.jsxs)("form",{className:"cm-setting__details cm-setting-list__details",children:[(0,e.jsx)(b.f,{id:"value",value:C.item.value}),(0,e.jsx)(n.A,{id:"name",label:window.translate("Legacy_medialibrary_facette_field_filters_title"),placeholder:"",value:C.item.name,required:!0}),(0,e.jsx)(w.f,{id:"and_conjunction",label:window.translate("Legacy_medialibrary_facette_field_filter_combined"),checked:!("and_conjunction"in C.item)||C.item.and_conjunction==!0}),(0,e.jsx)(y.e,{id:"tags",projectId:C.data.project,searchApi:"/api/tag",searchFilteredBy:"PROJECT",placeholder:window.translate("Legacy_medialibrary_facette_field_tags_placeholder"),label:window.translate("Legacy_medialibrary_facette_field_tags"),tags:C.item.tags}),(0,e.jsxs)("div",{className:"cm-btn-bar cm-btn-bar--footer cm-setting__actions cm-setting__actions--flyout js-cm-setting__actions js-cm-setting-list__actions",children:[(0,e.jsx)(f.b,{}),(0,e.jsx)(u.t,{})]})]}))},96838:function(fe,F,i){"use strict";i.d(F,{N:function(){return C}});var e=i(86070),u=i(14154),f=i(68864),b=Object.defineProperty,y=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,E=(v,m,c)=>m in v?b(v,m,{enumerable:!0,configurable:!0,writable:!0,value:c}):v[m]=c,x=(v,m)=>{for(var c in m||(m={}))n.call(m,c)&&E(v,c,m[c]);if(y)for(var c of y(m))w.call(m,c)&&E(v,c,m[c]);return v};const C=(0,u.I)(v=>{var m;return(m=v.data)==null?void 0:m.map((c,o)=>v.hideInheritValue===!0&&c.family_name==="inherit"?null:(0,e.jsx)(f.r,x({},c),o))})},68864:function(fe,F,i){"use strict";i.d(F,{r:function(){return m}});var e=i(86070),u=i(14154),f=Object.defineProperty,b=Object.defineProperties,y=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,x=(c,o,l)=>o in c?f(c,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[o]=l,C=(c,o)=>{for(var l in o||(o={}))w.call(o,l)&&x(c,l,o[l]);if(n)for(var l of n(o))E.call(o,l)&&x(c,l,o[l]);return c},v=(c,o)=>b(c,y(o));const m=(0,u.I)(c=>(0,e.jsx)("div",v(C({className:"js-cm-setting-search__item o-appearance__font-search-item","data-provider":c.provider,"data-family":c.family_name,"data-value":c.family_name},c.display_name?{"data-display_name":c.display_name}:{}),{"data-css":`${c.css?`${c.css}`:`${c.family_name}`}`,children:(0,e.jsxs)("div",{className:"o-appearance__fsi-title",children:[(0,e.jsx)("span",{className:"o-appearance__fsi-name js-o-appearance__fsi-name",children:c.display_name||c.family_name}),(0,e.jsx)("span",{className:"o-appearance__fsi-value js-o-appearance__fsi-source",children:c.provider})]})})))},88196:function(fe,F,i){"use strict";i.d(F,{Q:function(){return b}});var e=i(86070),u=i(14154),f=i(99170);const b=(0,u.I)(y=>(0,e.jsx)(f.O,{withFloatingButton:!0,children:(0,e.jsxs)("div",{className:"mod mod-brandportal po-brandportal js-po-brandportal","data-hub":y.hubId,"data-project":y.projectId,children:[y.utils.account.hasPermission("edit")&&y.usingThemes===void 0?(0,e.jsxs)("div",{className:"mod mod-p-control pm-control",children:[(0,e.jsxs)("div",{className:"cm-btn-dropdown",children:[(0,e.jsx)("button",{className:"js-co-tour__highlight-layout-settings pm-control__toggle js-pm-control__toggle js-cm-btn-dropdown__toggle","data-event":"settingsPmControl",children:window.translate("Brandportal_layoutSettings")}),(0,e.jsx)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--center cm-btn-dropdown__menu--above cm-btn-dropdown__menu--fixed-width js-cm-btn-dropdown__menu js-pm-control__menu pm-control__menu"})]}),(0,e.jsx)("button",{className:"pm-control__toggle pm-control__cancel js-pm-control__cancel",children:window.translate("Brandportal_cancel")})]}):null,(0,e.jsx)("div",{className:"po-brandportal__grid js-po-brandportal__grid",children:(0,e.jsx)("div",{className:"js-po-brandportal__row po-brandportal__add-row-container po-brandportal__add-row-container-initial js-po-brandportal__add-row-container-initial",children:(0,e.jsxs)("div",{className:"po-brandportal__blank-slate",children:[(0,e.jsx)("h2",{className:"a-h1",children:window.translate("Brandportal_blankSlate_title")}),(0,e.jsx)("p",{className:"a-p po-brandportal__blank-slate-text",children:window.translate("Brandportal_blankSlate_text")}),(0,e.jsx)("img",{className:"po-brandportal__blank-slate-arrow",src:"/img/brandportal/blankslate/arrow.svg",alt:"arrow down"}),(0,e.jsx)("div",{className:"po-brandportal__blank-slate-addsection js-po-brandportal__blank-slate-addsection"})]})})})]})}))},30105:function(fe,F,i){"use strict";i.d(F,{v:function(){return c}});var e=i(86070),u=i(4957),f=i(14154),b=Object.defineProperty,y=Object.defineProperties,n=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,C=(o,l,h)=>l in o?b(o,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):o[l]=h,v=(o,l)=>{for(var h in l||(l={}))E.call(l,h)&&C(o,h,l[h]);if(w)for(var h of w(l))x.call(l,h)&&C(o,h,l[h]);return o},m=(o,l)=>y(o,n(l));const c=(0,f.I)(o=>(0,e.jsx)("div",m(v({className:"mod mod-changelog o-changelog"},o.id?{"data-id":o.id}:{}),{children:(0,e.jsx)(u.T,{})})))},63083:function(fe,F,i){"use strict";i.d(F,{n:function(){return b}});var e=i(86070),u=i(14154),f=i(99170);const b=(0,u.I)(({libraryDocument:y,libraryPageTemplateSettings:n,libraryProjectTargetsEnabled:w})=>(0,e.jsx)(f.O,{children:(0,e.jsx)("div",{className:"mod mod-library o-library js-o-library","data-library-document":JSON.stringify(y),"data-library-page-template-settings-flattened":JSON.stringify(n),"data-library-project-targets-enabled":w})}))},34958:function(fe,F,i){"use strict";var e=i(50427),u=i(18216),f=i(38291),b=i(88398),y=i(39232),n=i(86070),w=i(16021),E=i(84090),x=i(14154),C=i(59240),v=i(64584),m=Object.defineProperty,c=Object.defineProperties,o=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,j=(s,t,a)=>t in s?m(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,$=(s,t)=>{for(var a in t||(t={}))h.call(t,a)&&j(s,a,t[a]);if(l)for(var a of l(t))g.call(t,a)&&j(s,a,t[a]);return s},S=(s,t)=>c(s,o(t));const T=(0,x.I)(s=>(0,n.jsx)("div",S($(S($({className:`js-co-settings__elem cm-setting__elem ${s.addIndent?"":"cm-setting__elem--noindent"}${s.classes?` ${s.classes}`:""}`},s.readonly?{"data-readonly":s.readonly}:{}),{"data-id":s.id,"data-type":"frame"}),s.group?{"data-group":s.group}:{}),{children:(0,n.jsx)(v.H,$({},s))})));var A=i(85131),B=i(62878),R=i(90307),k=i(29928),V=i(96838),K=i(68864),z=i(64182);const q=(0,x.I)(s=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(z.g,{id:`${s.id}_background_color`,type:"simple",picker:!0,label:window.translate("Legacy_setting_button_background_color"),group:s.group,palette:s.project,value:s.value.background_color||"#5bc0de"}),(0,n.jsx)(z.g,{id:`${s.id}_border_color`,type:"simple",picker:!0,label:window.translate("Legacy_setting_button_border_color"),group:s.group,palette:s.project,value:s.value.border_color||"#5bc0de"}),(0,n.jsx)(z.g,{id:`${s.id}_color`,type:"simple",picker:!0,label:window.translate("Legacy_setting_button_font_color"),group:s.group,palette:s.project,value:s.value.color||"#5bc0de"})]})),re=(0,x.I)(s=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(z.g,{id:`${s.id}_background_color_hover`,type:"simple",picker:!0,label:window.translate("Legacy_setting_button_background_color_hover"),group:s.group,palette:s.project,value:s.value.background_color_hover||"#5bc0de"}),(0,n.jsx)(z.g,{id:`${s.id}_border_color_hover`,type:"simple",picker:!0,label:window.translate("Legacy_setting_button_border_color_hover"),group:s.group,palette:s.project,value:s.value.border_color_hover||"#5bc0de"}),(0,n.jsx)(z.g,{id:`${s.id}_color_hover`,type:"simple",picker:!0,label:window.translate("Legacy_setting_button_font_color_hover"),group:s.group,palette:s.project,value:s.value.color_hover||"#5bc0de"})]})),ve=(0,x.I)(s=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.j,{id:`${s.id}_search`,placeholder:window.translate("Legacy_settings_font_selector_family_placeholder"),templates:{preview:"appearance-font-search-item",previewReact:K.r,content:"appearance-font-search-content",contentReact:V.N},label:window.translate("Legacy_settings_font_selector_family"),allowEmpty:!0,searchlabel:"\xA0",previewData:{family_name:s.value.family,provider:s.value.provider,css:s.value.family_css||""},data:s.font_options}),(0,n.jsxs)("div",{className:"co-settings__row",children:[(0,n.jsx)("div",{className:"g-col-xs-4 co-settings__col",children:(0,n.jsx)(C.U,{id:`${s.id}_weight`,group:s.group,label:window.translate("Legacy_settings_font_selector_weight"),options:[{name:"100",value:"100"},{name:"200",value:"200"},{name:"300",value:"300"},{name:window.translate("Legacy_settings_font_selector_weight_normal"),value:"400"},{name:"500",value:"500"},{name:"600",value:"600"},{name:"bold",value:"700"},{name:"800",value:"800"},{name:"900",value:"900"}],value:s.value.weight})}),(0,n.jsx)("div",{className:"g-col-xs-4 co-settings__col",children:(0,n.jsx)(B.A,{id:`${s.id}_size`,group:s.group,type:"unit",label:window.translate("Legacy_settings_font_selector_size"),value:s.value.size})}),(0,n.jsx)("div",{className:"g-col-xs-4 co-settings__col",children:(0,n.jsx)(C.U,{id:`${s.id}_line_height`,group:s.group,label:window.translate("Legacy_settings_font_selector_line_height"),options:s.line_height_options||[{name:"1.0",value:"1.0"},{name:"1.1",value:"1.1"},{name:"1.2",value:"1.2"},{name:"1.3",value:"1.3"},{name:"1.4",value:"1.4"},{name:"1.5",value:"1.5"},{name:"1.6",value:"1.6"},{name:"1.7",value:"1.7"},{name:"1.8",value:"1.8"},{name:"1.9",value:"1.9"},{name:"2.0",value:"2.0"}],value:s.value.line_height})})]}),(0,n.jsx)(R.f,{id:`${s.id}_uppercase`,label:window.translate("Legacy_setting_font_uppercase"),checked:!!s.value.uppercase}),(0,n.jsx)(R.f,{id:`${s.id}_italic`,label:window.translate("Legacy_setting_font_italic"),checked:!!s.value.italic}),(0,n.jsxs)("div",{className:"co-settings__row",children:[(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(B.A,{id:`${s.id}_border_width`,group:s.group,type:"unit",label:window.translate("Legacy_settings_border_width"),value:s.value.border_width?s.tpl.unit(s.value.border_width,!0):0})}),(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(B.A,{id:`${s.id}_border_radius`,group:s.group,type:"unit",label:window.translate("Legacy_settings_border_radius"),value:s.value.border_radius?s.tpl.unit(s.value.border_radius,!0):0})})]}),(0,n.jsx)(T,{id:`${s.id}_frame`,group:s.group,classes:"cm-setting__elem--borderless",addIndent:!0,value:s.value.frame,inputClasses:"cm-setting__input--text-left"}),(0,n.jsx)(E.p,{size:"medium",hasNegativeMargin:!0}),(0,n.jsx)("div",{className:"cm-setting__elem",children:(0,n.jsx)(k.y,{items:[{id:"default",title:window.translate("Legacy_settings_button_tab_default"),content:(0,e.EY)(q,s),active:!0},{id:"hover",title:window.translate("Legacy_settings_button_tab_hover"),content:(0,e.EY)(re,s)}],border:{bottom:!0}})})]}));var Oe=Object.defineProperty,De=Object.defineProperties,Ie=Object.getOwnPropertyDescriptors,Te=Object.getOwnPropertySymbols,he=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,de=(s,t,a)=>t in s?Oe(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,je=(s,t)=>{for(var a in t||(t={}))he.call(t,a)&&de(s,a,t[a]);if(Te)for(var a of Te(t))se.call(t,a)&&de(s,a,t[a]);return s},_e=(s,t)=>De(s,Ie(t));const Ce=(0,x.I)(s=>(0,n.jsxs)("form",_e(je({className:"js-co-settings__setting cm-setting","data-id":s.id,"data-type":"button"},s.group?{"data-group":s.group}:{}),{children:[(0,n.jsxs)("div",{className:"cm-setting__preview cm-setting__preview--center",children:[(0,n.jsx)("label",{className:`cm-setting-button__label cm-setting-button__label--${s.id}`,children:s.label}),(0,n.jsx)("button",{className:`cm-setting-button__button cm-setting-button__button--${s.id}`,children:s.label})]}),(0,n.jsxs)("div",{className:"cm-setting__details js-cm-setting__details",children:[(0,n.jsx)("div",{className:"cm-setting__title cm-setting-button__instant-preview",children:(0,n.jsx)("button",{className:`cm-setting-button__instant-preview-button cm-setting-button__instant-preview-button--${s.id} js-cm-setting-button__instant-preview-button--${s.id}`,children:s.previewLabel?s.previewLabel:s.label})}),(0,n.jsx)(E.p,{size:"medium",hasNegativeMargin:!0}),(0,n.jsx)(ve,je({},s)),(0,n.jsx)(w.h,je({},s))]})]})));var ee=i(15917),H=i(14587),le=i(92960);const ke=(0,x.I)(s=>(0,n.jsxs)("div",{className:"cm-setting-typostyle__fields",children:[(0,n.jsx)("div",{className:"co-settings__row",children:(0,n.jsx)("div",{className:"g-col-xs-12 co-settings__col",children:(0,n.jsx)(A.j,{id:`${s.id}_search`,placeholder:window.translate("Legacy_settings_font_selector_family_placeholder"),templates:{preview:"appearance-font-search-item",previewReact:K.r,content:"appearance-font-search-content",contentReact:V.N},label:window.translate("Legacy_settings_font_selector_family"),allowEmpty:!0,searchlabel:"\xA0",previewData:{family_name:s.value.family,provider:s.value.provider,css:s.value.family_css||"",display_name:s.value.display_name||s.value.family},data:s.font_options})})}),(0,n.jsxs)("div",{className:"co-settings__row",children:[(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(C.U,{id:`${s.id}_weight`,label:window.translate("Legacy_settings_font_selector_weight"),options:[{name:"100",value:"100"},{name:"200",value:"200"},{name:"300",value:"300"},{name:window.translate("Legacy_settings_font_selector_weight_normal"),value:"400"},{name:"500",value:"500"},{name:"600",value:"600"},{name:"bold",value:"700"},{name:"800",value:"800"},{name:"900",value:"900"}],value:s.value.weight})}),(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(B.A,{id:`${s.id}_size`,type:"unit",label:window.translate("Legacy_settings_font_selector_size"),value:s.value.size})})]}),(0,n.jsxs)("div",{className:"co-settings__row",children:[(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(B.A,{id:`${s.id}_letter_spacing`,type:"unit",label:window.translate("Legacy_settings_font_letter_spacing"),value:s.value.letterspacing?s.value.letterspacing:"normal"})}),(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(C.U,{id:`${s.id}_line_height`,label:window.translate("Legacy_settings_font_selector_line_height"),options:s.line_height_options||[{name:"0.5",value:"0.5"},{name:"0.6",value:"0.6"},{name:"0.7",value:"0.7"},{name:"0.8",value:"0.8"},{name:"0.9",value:"0.9"},{name:"1.0",value:"1.0"},{name:"1.1",value:"1.1"},{name:"1.2",value:"1.2"},{name:"1.3",value:"1.3"},{name:"1.4",value:"1.4"},{name:"1.5",value:"1.5"},{name:"1.6",value:"1.6"},{name:"1.7",value:"1.7"},{name:"1.8",value:"1.8"},{name:"1.9",value:"1.9"},{name:"2.0",value:"2.0"}],value:s.value.line_height})})]}),s.optional_settings&&s.optional_settings.margin===!0?(0,n.jsxs)("div",{className:"co-settings__row js-setting-margin-enabled",children:[(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(B.A,{id:`${s.id}_margin_top`,type:"unit",label:window.translate("Legacy_settings_font_margin_top"),value:s.value.margin_top||"0"})}),(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(B.A,{id:`${s.id}_margin_bottom`,type:"unit",label:window.translate("Legacy_settings_font_margin_bottom"),value:s.value.margin_bottom||"0"})})]}):null,(0,n.jsx)(R.f,{id:`${s.id}_uppercase`,label:window.translate("Legacy_setting_font_uppercase"),checked:!!s.value.uppercase}),(0,n.jsx)(R.f,{id:`${s.id}_italic`,label:window.translate("Legacy_setting_font_italic"),checked:!!s.value.italic}),(0,n.jsx)(R.f,{id:`${s.id}_underline`,label:window.translate("Legacy_setting_font_underline"),checked:!!s.value.underline}),(0,n.jsx)(z.g,{id:`${s.id}_color`,type:"simple",picker:!0,label:window.translate("Legacy_setting_font_color"),palette:s.project,value:s.value.color||"#5bc0de"})]}));var Ue=Object.defineProperty,Ge=Object.defineProperties,Me=Object.getOwnPropertyDescriptors,Ve=Object.getOwnPropertySymbols,Ke=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable,Tt=(s,t,a)=>t in s?Ue(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,Yt=(s,t)=>{for(var a in t||(t={}))Ke.call(t,a)&&Tt(s,a,t[a]);if(Ve)for(var a of Ve(t))at.call(t,a)&&Tt(s,a,t[a]);return s},tt=(s,t)=>Ge(s,Me(t));const qe=(0,x.I)(s=>(0,n.jsxs)("form",tt(Yt(tt(Yt({className:`js-co-settings__setting cm-setting cm-setting-typostyle ${s.isWithinTabs===!0?"cm-setting-typostyle--tabs":""}`,"data-id":s.id},s.api?{"data-api":s.api}:{}),{"data-type":"typostyle"}),s.group?{"data-group":s.group}:{}),{children:[(0,n.jsx)("div",{className:"cm-setting__preview clearfix",children:(0,n.jsx)("label",{className:`cm-setting__label--inline cm-setting-typostyle__label cm-setting-typostyle__label--${s.id}`,children:s.label})}),(0,n.jsxs)("div",{className:"cm-setting__details js-cm-setting__details",children:[(0,n.jsx)("div",{className:`cm-setting-typostyle__preview cm-setting-typostyle__preview--${s.id} js-cm-setting-typostyle__preview`,children:s.previewLabel?s.previewLabel:s.label}),(0,n.jsx)(E.p,{size:"medium",hasNegativeMargin:!0}),(0,n.jsx)(ke,Yt({},s)),(0,n.jsx)(w.h,Yt({},s))]})]}))),ot=(0,x.I)(s=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"co-settings__row",children:[(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(C.U,{id:`${s.id}_weight_active`,label:window.translate("Legacy_settings_font_selector_weight"),options:[{name:"100",value:"100"},{name:"200",value:"200"},{name:"300",value:"300"},{name:window.translate("Legacy_settings_font_selector_weight_normal"),value:"400"},{name:"500",value:"500"},{name:"600",value:"600"},{name:"bold",value:"700"},{name:"800",value:"800"},{name:"900",value:"900"}],value:s.value.weight_active})}),(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(B.A,{id:`${s.id}_size_active`,type:"unit",label:window.translate("Legacy_settings_font_selector_size"),value:s.value.size_active})})]}),(0,n.jsxs)("div",{className:"co-settings__row",children:[(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(B.A,{id:`${s.id}_letter_spacing_active`,type:"unit",label:window.translate("Legacy_settings_font_letter_spacing"),value:s.value.letterspacing_active?s.value.letterspacing_active:"normal"})}),(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(C.U,{id:`${s.id}_line_height_active`,label:window.translate("Legacy_settings_font_selector_line_height"),options:s.line_height_options||[{name:"0.5",value:"0.5"},{name:"0.6",value:"0.6"},{name:"0.7",value:"0.7"},{name:"0.8",value:"0.8"},{name:"0.9",value:"0.9"},{name:"1.0",value:"1.0"},{name:"1.1",value:"1.1"},{name:"1.2",value:"1.2"},{name:"1.3",value:"1.3"},{name:"1.4",value:"1.4"},{name:"1.5",value:"1.5"},{name:"1.6",value:"1.6"},{name:"1.7",value:"1.7"},{name:"1.8",value:"1.8"},{name:"1.9",value:"1.9"},{name:"2.0",value:"2.0"}],value:s.value.line_height_active})})]}),s.optional_settings&&s.optional_settings.margin===!0?(0,n.jsxs)("div",{className:"co-settings__row js-setting-margin-enabled",children:[(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(B.A,{id:`${s.id}_margin_top_active`,type:"unit",label:window.translate("Legacy_settings_font_margin_top"),value:s.value.margin_top_active||"0"})}),(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(B.A,{id:`${s.id}_margin_bottom_active`,type:"unit",label:window.translate("Legacy_settings_font_margin_bottom"),value:s.value.margin_bottom_active||"0"})})]}):null,(0,n.jsx)(R.f,{id:`${s.id}_uppercase_active`,label:window.translate("Legacy_setting_font_uppercase"),checked:!!s.value.uppercase_active}),(0,n.jsx)(R.f,{id:`${s.id}_italic_active`,label:window.translate("Legacy_setting_font_italic"),checked:!!s.value.italic_active}),(0,n.jsx)(R.f,{id:`${s.id}_underline_active`,label:window.translate("Legacy_setting_font_underline"),checked:!!s.value.underline_active}),(0,n.jsx)(z.g,{id:`${s.id}_background_color_active`,resettable:!0,type:"simple",picker:!0,label:window.translate("Legacy_label_background_color"),palette:s.project,value:s.value.background_color_active}),(0,n.jsx)(z.g,{id:`${s.id}_color_active`,resettable:!0,type:"simple",picker:!0,label:window.translate("Legacy_setting_font_color"),palette:s.project,value:s.value.color_active||"#5bc0de"})]})),pt=(0,x.I)(s=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"co-settings__row",children:[(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(C.U,{id:`${s.id}_weight`,label:window.translate("Legacy_settings_font_selector_weight"),options:[{name:"100",value:"100"},{name:"200",value:"200"},{name:"300",value:"300"},{name:window.translate("Legacy_settings_font_selector_weight_normal"),value:"400"},{name:"500",value:"500"},{name:"600",value:"600"},{name:"bold",value:"700"},{name:"800",value:"800"},{name:"900",value:"900"}],value:s.value.weight})}),(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(B.A,{id:`${s.id}_size`,type:"unit",label:window.translate("Legacy_settings_font_selector_size"),value:s.value.size})})]}),(0,n.jsxs)("div",{className:"co-settings__row",children:[(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(B.A,{id:`${s.id}_letter_spacing`,type:"unit",label:window.translate("Legacy_settings_font_letter_spacing"),value:s.value.letterspacing?s.value.letterspacing:"normal"})}),(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(C.U,{id:`${s.id}_line_height`,label:window.translate("Legacy_settings_font_selector_line_height"),options:s.line_height_options||[{name:"0.5",value:"0.5"},{name:"0.6",value:"0.6"},{name:"0.7",value:"0.7"},{name:"0.8",value:"0.8"},{name:"0.9",value:"0.9"},{name:"1.0",value:"1.0"},{name:"1.1",value:"1.1"},{name:"1.2",value:"1.2"},{name:"1.3",value:"1.3"},{name:"1.4",value:"1.4"},{name:"1.5",value:"1.5"},{name:"1.6",value:"1.6"},{name:"1.7",value:"1.7"},{name:"1.8",value:"1.8"},{name:"1.9",value:"1.9"},{name:"2.0",value:"2.0"}],value:s.value.line_height})})]}),s.optional_settings&&s.optional_settings.margin===!0?(0,n.jsxs)("div",{className:"co-settings__row js-setting-margin-enabled",children:[(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(B.A,{id:`${s.id}_margin_top`,type:"unit",label:window.translate("Legacy_settings_font_margin_top"),value:s.value.margin_top||"0"})}),(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(B.A,{id:`${s.id}_margin_bottom`,type:"unit",label:window.translate("Legacy_settings_font_margin_bottom"),value:s.value.margin_bottom||"0"})})]}):null,(0,n.jsx)(R.f,{id:`${s.id}_uppercase`,label:window.translate("Legacy_setting_font_uppercase"),checked:!!s.value.uppercase}),(0,n.jsx)(R.f,{id:`${s.id}_italic`,label:window.translate("Legacy_setting_font_italic"),checked:!!s.value.italic}),(0,n.jsx)(R.f,{id:`${s.id}_underline`,label:window.translate("Legacy_setting_font_underline"),checked:!!s.value.underline}),(0,n.jsx)(z.g,{id:`${s.id}_color`,resettable:!0,type:"simple",picker:!0,label:window.translate("Legacy_setting_font_color"),palette:s.project,value:s.value.color||"#5bc0de"})]})),mt=(0,x.I)(s=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"co-settings__row",children:[(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(C.U,{id:`${s.id}_weight_hover`,label:window.translate("Legacy_settings_font_selector_weight"),options:[{name:"100",value:"100"},{name:"200",value:"200"},{name:"300",value:"300"},{name:window.translate("Legacy_settings_font_selector_weight_normal"),value:"400"},{name:"500",value:"500"},{name:"600",value:"600"},{name:"bold",value:"700"},{name:"800",value:"800"},{name:"900",value:"900"}],value:s.value.weight_hover})}),(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(B.A,{id:`${s.id}_size_hover`,type:"unit",label:window.translate("Legacy_settings_font_selector_size"),value:s.value.size_hover})})]}),(0,n.jsxs)("div",{className:"co-settings__row",children:[(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(B.A,{id:`${s.id}_letter_spacing_hover`,type:"unit",label:window.translate("Legacy_settings_font_letter_spacing"),value:s.value.letterspacing_hover?s.value.letterspacing_hover:"normal"})}),(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(C.U,{id:`${s.id}_line_height_hover`,label:window.translate("Legacy_settings_font_selector_line_height"),options:s.line_height_options||[{name:"0.5",value:"0.5"},{name:"0.6",value:"0.6"},{name:"0.7",value:"0.7"},{name:"0.8",value:"0.8"},{name:"0.9",value:"0.9"},{name:"1.0",value:"1.0"},{name:"1.1",value:"1.1"},{name:"1.2",value:"1.2"},{name:"1.3",value:"1.3"},{name:"1.4",value:"1.4"},{name:"1.5",value:"1.5"},{name:"1.6",value:"1.6"},{name:"1.7",value:"1.7"},{name:"1.8",value:"1.8"},{name:"1.9",value:"1.9"},{name:"2.0",value:"2.0"}],value:s.value.line_height_hover})})]}),s.optional_settings&&s.optional_settings.margin===!0?(0,n.jsxs)("div",{className:"co-settings__row js-setting-margin-enabled",children:[(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(B.A,{id:`${s.id}_margin_top_hover`,type:"unit",label:window.translate("Legacy_settings_font_margin_top"),value:s.value.margin_top_hover_hover||"0"})}),(0,n.jsx)("div",{className:"g-col-xs-6 co-settings__col",children:(0,n.jsx)(B.A,{id:`${s.id}_margin_bottom_hover`,type:"unit",label:window.translate("Legacy_settings_font_margin_bottom"),value:s.value.margin_bottom_hove_hover||"0"})})]}):null,(0,n.jsx)(R.f,{id:`${s.id}_uppercase_hover`,label:window.translate("Legacy_setting_font_uppercase"),checked:!!s.value.uppercase_hover}),(0,n.jsx)(R.f,{id:`${s.id}_italic_hover`,label:window.translate("Legacy_setting_font_italic"),checked:!!s.value.italic_hover}),(0,n.jsx)(R.f,{id:`${s.id}_underline_hover`,label:window.translate("Legacy_setting_font_underline"),checked:!!s.value.underline_hover}),(0,n.jsx)(z.g,{id:`${s.id}_background_color_hover`,resettable:!0,type:"simple",picker:!0,label:window.translate("Legacy_label_background_color"),palette:s.project,value:s.value.background_color_hover||"rgba(255,255,255,0)"}),(0,n.jsx)(z.g,{id:`${s.id}_color_hover`,resettable:!0,type:"simple",picker:!0,label:window.translate("Legacy_setting_font_color"),palette:s.project,value:s.value.color_hover||s.value.color||"#5bc0de"})]})),Xt=(0,x.I)(s=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"co-settings__row",children:(0,n.jsx)("div",{className:"g-col-xs-12 co-settings__col",children:(0,n.jsx)(A.j,{id:`${s.id}_search`,placeholder:window.translate("Legacy_settings_font_selector_family_placeholder"),templates:{preview:"appearance-font-search-item",previewReact:K.r,content:"appearance-font-search-content",contentReact:V.N},label:window.translate("Legacy_settings_font_selector_family"),allowEmpty:!0,searchlabel:"\xA0",previewData:{family_name:s.value.family,provider:s.value.provider,css:s.value.family_css||"",display_name:s.value.display_name||s.value.family},data:s.font_options})})}),(0,n.jsx)(k.y,{items:[{id:"default",title:window.translate("Legacy_settings_typostyle_link_default"),content:(0,e.EY)(pt,s),active:!0},{id:"hover",title:window.translate("Legacy_settings_typostyle_link_hover"),content:(0,e.EY)(mt,s)},{id:"active",title:window.translate("Legacy_settings_typostyle_link_active"),content:(0,e.EY)(ot,s)}],border:{bottom:!0}})]}));var rs=Object.defineProperty,Qt=Object.defineProperties,ls=Object.getOwnPropertyDescriptors,Ts=Object.getOwnPropertySymbols,As=Object.prototype.hasOwnProperty,Qs=Object.prototype.propertyIsEnumerable,bs=(s,t,a)=>t in s?rs(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,qs=(s,t)=>{for(var a in t||(t={}))As.call(t,a)&&bs(s,a,t[a]);if(Ts)for(var a of Ts(t))Qs.call(t,a)&&bs(s,a,t[a]);return s},ks=(s,t)=>Qt(s,ls(t));const ei=(0,x.I)(s=>(0,n.jsxs)("form",ks(qs(ks(qs({className:`js-co-settings__setting cm-setting cm-setting-typostyle ${s.isWithinTabs===!0?"cm-setting-typostyle--tabs":""}`,"data-id":s.id},s.api?{"data-api":s.api}:{}),{"data-type":"typostyle-link"}),s.group?{"data-group":s.group}:{}),{children:[(0,n.jsx)("div",{className:"cm-setting__preview clearfix",children:(0,n.jsx)("label",{className:`cm-setting__label--inline cm-setting-typostyle__label cm-setting-typostyle__label--${s.id}`,children:s.label})}),(0,n.jsxs)("div",{className:"cm-setting__details js-cm-setting__details",children:[(0,n.jsx)("div",{className:"cm-setting-typostyle__preview",children:(0,n.jsx)("span",{className:"cm-setting-typostyle__preview-wrap js-cm-setting-typostyle__preview-wrap",children:s.previewLabel?s.previewLabel:s.label})}),(0,n.jsx)(E.p,{size:"medium",hasNegativeMargin:!0}),(0,n.jsx)(Xt,qs({},s)),(0,n.jsx)(w.h,qs({},s))]})]}))),an=(0,x.I)(s=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"co-settings__fieldset",children:[(0,n.jsx)("span",{className:"co-settings__fieldset-title",children:window.translate("Legacy_styleguide_settings_design_main_font")}),(0,n.jsx)(le._,{id:"main_font",placeholder:window.translate("Legacy_settings_font_selector_family_placeholder"),templates:{preview:"appearance-font-search-item",previewReact:K.r,content:"appearance-font-search-content",contentReact:V.N},label:window.translate("Legacy_settings_font_selector_family"),allowEmpty:!1,searchlabel:"\xA0",hideInheritValue:!0,previewData:{family_name:s.main_font.family||"default",provider:s.main_font.provider||"system",display_name:s.main_font.display_name||s.main_font.family||window.translate("Legacy_setting_font_selector_default")},data:s.font_data})]}),!s.hasTheme&&(0,n.jsxs)("div",{className:"co-settings__fieldset",children:[(0,n.jsx)("span",{className:"co-settings__fieldset-title",children:window.translate("Legacy_styleguide_settings_design_secondarynavigation")}),(0,n.jsx)(qe,{id:"categories",group:"navigation",value:{family:s.navigation.categories.family||"Helvetica",display_name:s.navigation.categories.display_name||null,provider:s.navigation.categories.provider||"Google",weight:s.navigation.categories.weight||700,size:s.navigation.categories.size||"11px",line_height:s.navigation.categories.line_height||1.3,color:s.navigation.categories.color||"rgba(0,0,0,0.3)",uppercase:s.navigation.categories.uppercase||!1,italic:s.navigation.categories.italic||!1,underline:s.navigation.categories.underline||!1,letterspacing:s.navigation.categories.letterspacing||"normal"},font_options:s.font_data,label:window.translate("Legacy_styleguide_settings_design_category_navigation"),project:s.project}),(0,n.jsx)(ei,{id:"pages",group:"navigation",value:{family:s.navigation.pages.family||"Lato",display_name:s.navigation.pages.display_name||null,provider:s.navigation.pages.provider||"Google",weight:s.navigation.pages.weight||400,weight_hover:s.navigation.pages.weight_hover||400,weight_active:s.navigation.pages.weight_active||400,size:s.navigation.pages.size||"13px",size_hover:s.navigation.pages.size_hover||"13px",size_active:s.navigation.pages.size_active||"13px",line_height:s.navigation.pages.line_height||1.3,line_height_hover:s.navigation.pages.line_height_hover||1.3,line_height_active:s.navigation.pages.line_height_active||1.3,color:s.navigation.pages.color||"rgb(85, 85, 85)",color_hover:s.navigation.pages.color_hover||"rgb(85, 85, 85)",color_active:s.navigation.pages.color_active||"rgb(85, 85, 85)",background_color_hover:s.navigation.pages.background_color_hover||"rgba(248, 248, 248, 1)",background_color_active:s.navigation.pages.background_color_active||"rgba(0, 0, 0, 0)",uppercase:s.navigation.pages.uppercase||!1,uppercase_hover:s.navigation.pages.uppercase_hover||!1,uppercase_active:s.navigation.pages.uppercase_active||!1,italic:s.navigation.pages.italic||!1,italic_hover:s.navigation.pages.italic_hover||!1,italic_active:s.navigation.pages.italic_active||!1,underline:s.navigation.pages.underline||!1,underline_hover:s.navigation.pages.underline_hover||!1,underline_active:s.navigation.pages.underline_active||!1,letterspacing:s.navigation.pages.letterspacing||"normal",letterspacing_hover:s.navigation.pages.letterspacing_hover||"normal",letterspacing_active:s.navigation.pages.letterspacing_active||"normal"},font_options:s.font_data,label:window.translate("Legacy_styleguide_settings_design_page_navigation"),project:s.project}),(0,n.jsx)(qe,{id:"sections",group:"navigation",value:{family:s.navigation.sections.family||"Lato",display_name:s.navigation.sections.display_name||null,provider:s.navigation.sections.provider||"Google",weight:s.navigation.sections.weight||400,size:s.navigation.sections.size||"13px",line_height:s.navigation.sections.line_height||1.3,color:s.navigation.sections.color||"rgb(136, 136, 136)",uppercase:s.navigation.sections.uppercase||!1,italic:s.navigation.sections.italic||!1,underline:s.navigation.sections.underline||!1,letterspacing:s.navigation.sections.letterspacing||"normal"},font_options:s.font_data,label:window.translate("Legacy_styleguide_settings_design_section_navigation"),project:s.project})]}),(0,n.jsxs)("div",{className:"co-settings__fieldset",children:[(0,n.jsx)("span",{className:"co-settings__fieldset-title",children:window.translate("Legacy_styleguide_settings_design_content")}),(0,n.jsx)(qe,{id:"heading1",value:{family:s.heading1.family||"Lato",display_name:s.heading1.display_name||null,provider:s.heading1.provider||"Google",weight:s.heading1.weight||400,size:s.heading1.size||"30px",line_height:s.heading1.line_height||1.3,color:s.heading1.color||"#000000",uppercase:s.heading1.uppercase||!1,italic:s.heading1.italic||!1,underline:s.heading1.underline||!1,margin_top:s.heading1.margin_top||"0",margin_bottom:s.heading1.margin_bottom||"10px",letterspacing:s.heading1.letterspacing||"normal"},optional_settings:{margin:!0},font_options:s.font_data,label:window.translate("Legacy_styleguide_settings_design_heading1"),project:s.project}),(0,n.jsx)(qe,{id:"heading2",value:{family:s.heading2.family||"Lato",display_name:s.heading2.display_name||null,provider:s.heading2.provider||"Google",weight:s.heading2.weight||700,size:s.heading2.size||"22px",line_height:s.heading2.line_height||1.3,color:s.heading2.color||"#000000",uppercase:s.heading2.uppercase||!1,italic:s.heading2.italic||!1,underline:s.heading2.underline||!1,margin_top:s.heading2.margin_top||"0",margin_bottom:s.heading2.margin_bottom||"10px",letterspacing:s.heading2.letterspacing||"normal"},optional_settings:{margin:!0},font_options:s.font_data,label:window.translate("Legacy_styleguide_settings_design_heading2"),project:s.project}),(0,n.jsx)(qe,{id:"heading3",value:{family:s.heading3.family||"Lato",display_name:s.heading3.display_name||null,provider:s.heading3.provider||"Google",weight:s.heading3.weight||700,size:s.heading3.size||"18px",line_height:s.heading3.line_height||1.3,color:s.heading3.color||"#000000",uppercase:s.heading3.uppercase||!1,italic:s.heading3.italic||!1,underline:s.heading3.underline||!1,margin_top:s.heading3.margin_top||"0",margin_bottom:s.heading3.margin_bottom||"10px",letterspacing:s.heading3.letterspacing||"normal"},optional_settings:{margin:!0},font_options:s.font_data,label:window.translate("Legacy_styleguide_settings_design_heading3"),project:s.project}),(0,n.jsx)(qe,{id:"heading4",value:{family:s.heading4.family||"Lato",display_name:s.heading4.display_name||null,provider:s.heading4.provider||"Google",weight:s.heading4.weight||700,size:s.heading4.size||"16px",line_height:s.heading4.line_height||1.3,color:s.heading4.color||"#000000",uppercase:s.heading4.uppercase||!1,italic:s.heading4.italic||!1,underline:s.heading4.underline||!1,margin_top:s.heading4.margin_top||"0",margin_bottom:s.heading4.margin_bottom||"10px",letterspacing:s.heading4.letterspacing||"normal"},optional_settings:{margin:!0},font_options:s.font_data,label:window.translate("Legacy_styleguide_settings_design_heading4"),project:s.project}),(0,n.jsx)(qe,{id:"custom1",value:{family:s.custom1.family||"Lato",display_name:s.custom1.display_name||null,provider:s.custom1.provider||"Google",weight:s.custom1.weight||700,size:s.custom1.size||"16px",line_height:s.custom1.line_height||1.3,color:s.custom1.color||"#000000",uppercase:s.custom1.uppercase||!1,italic:s.custom1.italic||!1,underline:s.custom1.underline||!1,margin_top:s.custom1.margin_top||"0",margin_bottom:s.custom1.margin_bottom||"10px",letterspacing:s.custom1.letterspacing||"normal"},optional_settings:{margin:!0},font_options:s.font_data,label:window.translate("Legacy_styleguide_settings_design_custom1"),project:s.project}),(0,n.jsx)(qe,{id:"custom2",value:{family:s.custom2.family||"Lato",display_name:s.custom2.display_name||null,provider:s.custom2.provider||"Google",weight:s.custom2.weight||700,size:s.custom2.size||"16px",line_height:s.custom2.line_height||1.3,color:s.custom2.color||"#000000",uppercase:s.custom2.uppercase||!1,italic:s.custom2.italic||!1,underline:s.custom2.underline||!1,margin_top:s.custom2.margin_top||"0",margin_bottom:s.custom2.margin_bottom||"10px",letterspacing:s.custom2.letterspacing||"normal"},optional_settings:{margin:!0},font_options:s.font_data,label:window.translate("Legacy_styleguide_settings_design_custom2"),project:s.project}),(0,n.jsx)(qe,{id:"custom3",value:{family:s.custom3.family||"Lato",display_name:s.custom3.display_name||null,provider:s.custom3.provider||"Google",weight:s.custom3.weight||700,size:s.custom3.size||"16px",line_height:s.custom3.line_height||1.3,color:s.custom3.color||"#000000",uppercase:s.custom3.uppercase||!1,italic:s.custom3.italic||!1,underline:s.custom3.underline||!1,margin_top:s.custom3.margin_top||"0",margin_bottom:s.custom3.margin_bottom||"10px",letterspacing:s.custom3.letterspacing||"normal"},optional_settings:{margin:!0},font_options:s.font_data,label:window.translate("Legacy_styleguide_settings_design_custom3"),project:s.project}),(0,n.jsx)(qe,{id:"body",value:{family:s.body.family||"Lato",display_name:s.body.display_name||null,provider:s.body.provider||"Google",weight:s.body.weight||400,size:s.body.size||"15px",line_height:s.body.line_height||1.3,color:s.body.color||"rgb(103, 103, 103)",uppercase:s.body.uppercase||!1,italic:s.body.italic||!1,underline:s.body.underline||!1,letterspacing:s.body.letterspacing||"normal"},font_options:s.font_data,label:window.translate("Styleguide_designSettingsBodyText"),project:s.project}),(0,n.jsx)(qe,{id:"link",value:{family:s.link.family||"Lato",display_name:s.link.display_name||null,provider:s.link.provider||"Google",weight:s.link.weight||400,size:s.link.size||"15px",line_height:s.link.line_height||1.3,color:s.link.color||"rgb(74, 144, 226)",uppercase:s.link.uppercase||!1,italic:s.link.italic||!1,underline:s.link.underline||!1,letterspacing:s.link.letterspacing||"normal"},font_options:s.font_data,label:"Link",project:s.project}),(0,n.jsx)(qe,{id:"quote",value:{family:s.quote.family||"Lato",display_name:s.quote.display_name||null,provider:s.quote.provider||"Google",weight:s.quote.weight||400,size:s.quote.size||"24px",line_height:s.quote.line_height||1.3,color:s.quote.color||"rgb(103, 103, 103)",uppercase:s.quote.uppercase||!1,italic:s.quote.italic||!1,underline:s.quote.underline||!1,letterspacing:s.quote.letterspacing||"normal"},font_options:s.font_data,label:window.translate("Legacy_styleguide_settings_design_quote"),project:s.project}),(0,n.jsx)(qe,{id:"image-title",value:{family:s["image-title"].family||"Lato",display_name:s["image-title"].display_name||null,provider:s["image-title"].provider||"Google",weight:s["image-title"].weight||400,size:s["image-title"].size||"24px",line_height:s["image-title"].line_height||1.3,color:s["image-title"].color||"rgb(103, 103, 103)",uppercase:s["image-title"].uppercase||!1,italic:s["image-title"].italic||!1,underline:s["image-title"].underline||!1,margin_top:s["image-title"].margin_top||"0",margin_bottom:s["image-title"].margin_bottom||"3px",letterspacing:s["image-title"].letterspacing||"normal"},font_options:s.font_data,label:window.translate("Styleguide_designSettingsImageTitle"),project:s.project}),(0,n.jsx)(qe,{id:"image-caption",value:{family:s["image-caption"].family||"Lato",display_name:s["image-caption"].display_name||null,provider:s["image-caption"].provider||"Google",weight:s["image-caption"].weight||400,size:s["image-caption"].size||"24px",line_height:s["image-caption"].line_height||1.3,color:s["image-caption"].color||"rgb(103, 103, 103)",uppercase:s["image-caption"].uppercase||!1,italic:s["image-caption"].italic||!1,underline:s["image-caption"].underline||!1,letterspacing:s["image-caption"].letterspacing||"normal"},font_options:s.font_data,label:window.translate("Styleguide_designSettingsImageCaption"),project:s.project})]}),(0,n.jsxs)("div",{className:"co-settings__fieldset",children:[(0,n.jsx)("span",{className:"co-settings__fieldset-title",children:window.translate("Legacy_styleguide_settings_design_colors")}),(0,n.jsx)(H.X,{id:"info",label:window.translate("Legacy_styleguide_settings_content_info"),group:"callout",picker:!0,palette:s.project,value:s.callout.info||"#5bc0de"}),(0,n.jsx)(H.X,{id:"note",label:window.translate("Legacy_styleguide_settings_content_note"),group:"callout",picker:!0,palette:s.project,value:s.callout.note||"#f0ad4e"}),(0,n.jsx)(H.X,{id:"tip",label:window.translate("Legacy_styleguide_settings_content_tip"),group:"callout",picker:!0,palette:s.project,value:s.callout.tip||"#5cb85c"}),(0,n.jsx)(H.X,{id:"warning",label:window.translate("Legacy_styleguide_settings_content_warning"),group:"callout",picker:!0,palette:s.project,value:s.callout.warning||"#d9534f"})]}),(0,n.jsxs)("div",{className:"co-settings__fieldset",children:[(0,n.jsx)("span",{className:"co-settings__fieldset-title",children:window.translate("Legacy_styleguide_settings_design_buttons")}),(0,n.jsx)(Ce,{id:"button_primary",value:{family:s.button_primary.family||"Lato",provider:s.button_primary.provider||"Google",weight:s.button_primary.weight||400,size:s.button_primary.size||"20px",line_height:s.button_primary.line_height||1.3,uppercase:s.button_primary.uppercase||!1,italic:s.button_primary.italic||!1,border_width:s.button_primary.border_width||"2px",border_radius:s.button_primary.border_radius||"5px",frame:s.button_primary.frame,color:s.button_primary.color||"rgba(0,0,0,0.5)",color_hover:s.button_primary.color_hover||"rgba(0,0,0,1)",background_color:s.button_primary.background_color||"rgba(133,133,133,0.5)",background_color_hover:s.button_primary.background_color_hover||"rgba(133,133,133,1)",border_color:s.button_primary.border_color||"rgba(0,0,0,0.5)",border_color_hover:s.button_primary.border_color_hover||"rgba(0,0,0,1)"},font_options:s.font_data,label:window.translate("Legacy_styleguide_settings_design_button_primary"),project:s.project}),(0,n.jsx)(Ce,{id:"button_secondary",value:{family:s.button_secondary.family||"Lato",provider:s.button_secondary.provider||"Google",weight:s.button_secondary.weight||400,size:s.button_secondary.size||"20px",line_height:s.button_secondary.line_height||1.3,uppercase:s.button_secondary.uppercase||!1,italic:s.button_secondary.italic||!1,border_width:s.button_secondary.border_width||"2px",border_radius:s.button_secondary.border_radius||"5px",frame:s.button_secondary.frame||{top:0,right:0,bottom:0,left:0},color:s.button_secondary.color||"rgba(0,0,0,0.5)",color_hover:s.button_secondary.color_hover||"rgba(0,0,0,1)",background_color:s.button_secondary.background_color||"rgba(133,133,133,0.5)",background_color_hover:s.button_secondary.background_color_hover||"rgba(133,133,133,1)",border_color:s.button_secondary.border_color||"rgba(0,0,0,0.5)",border_color_hover:s.button_secondary.border_color_hover||"rgba(0,0,0,1)"},font_options:s.font_data,label:window.translate("Legacy_styleguide_settings_design_button_secondary"),project:s.project}),(0,n.jsx)(Ce,{id:"button_tertiary",value:{family:s.button_tertiary.family||"Lato",provider:s.button_tertiary.provider||"Google",weight:s.button_tertiary.weight||400,size:s.button_tertiary.size||"20px",line_height:s.button_tertiary.line_height||1.3,uppercase:s.button_tertiary.uppercase||!1,italic:s.button_tertiary.italic||!1,border_width:s.button_tertiary.border_width||"2px",border_radius:s.button_tertiary.border_radius||"5px",frame:s.button_tertiary.frame||{top:0,right:0,bottom:0,left:0},color:s.button_tertiary.color||"rgba(0,0,0,0.5)",color_hover:s.button_tertiary.color_hover||"rgba(0,0,0,1)",background_color:s.button_tertiary.background_color||"rgba(133,133,133,0.5)",background_color_hover:s.button_tertiary.background_color_hover||"rgba(133,133,133,1)",border_color:s.button_tertiary.border_color||"rgba(0,0,0,0.5)",border_color_hover:s.button_tertiary.border_color_hover||"rgba(0,0,0,1)"},font_options:s.font_data,label:window.translate("Legacy_styleguide_settings_design_button_tertiary"),project:s.project})]}),!s.hasTheme&&s.utils.account.hasFeature("STYLEGUIDE_SETTING_SEARCH_ICON")?(0,n.jsxs)("div",{className:"co-settings__fieldset",children:[(0,n.jsx)("span",{className:"co-settings__fieldset-title",children:window.translate("Legacy_styleguide_settings_design_search_icon")}),(0,n.jsx)(ee.J,{id:"search_icon",value:s.search_icon||"icon-search2",options:[{value:"icon-search2",iconclass:"icon-search2"},{value:"icon-search",iconclass:"icon-search"},{value:"icon-search4",iconclass:"icon-search4"}]})]}):null]})),Na=(0,x.I)(()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"co-settings__fieldset",children:[(0,n.jsx)("span",{className:"co-settings__fieldset-title",children:"Presets"})," ..."]}),(0,n.jsxs)("div",{className:"co-settings__fieldset",children:[(0,n.jsx)("span",{className:"co-settings__fieldset-title",children:"Download Sizes"})," ..."]})]}));var ys=i(23189),$t=i(71460);const fn=(0,x.I)(s=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"co-settings__fieldset",children:[(0,n.jsx)("span",{className:"co-settings__fieldset-title",children:window.translate("Legacy_styleguide_settings_navigation_side")}),(0,n.jsx)($t.I,{id:"sticky_navigation",label:window.translate("Legacy_styleguide_settings_navigation_sticky"),checked:s.navigation.sticky==="enabled"}),(0,n.jsx)($t.I,{id:"collapsible_navigation",label:window.translate("Legacy_styleguide_settings_navigation_collabsible"),checked:s.navigation.collapsible==="enabled"})]}),(0,n.jsxs)("div",{className:"co-settings__fieldset",children:[(0,n.jsx)("span",{className:"co-settings__fieldset-title",children:window.translate("Legacy_styleguide_settings_navigation_home_section")}),(0,n.jsx)(ys.t,{id:"home_link",label:window.translate("Legacy_styleguide_settings_navigation_home_label_link"),api:`/api/hub/settings/${s.hub}`,placeholder:window.translate("Legacy_styleguide_settings_navigation_home_placeholder_link"),value:s.navigation.home_link||""}),(0,n.jsx)($t.I,{id:"home_link_target",label:window.translate("Legacy_styleguide_settings_navigation_home_label_window"),api:`/api/hub/settings/${s.hub}`,checked:s.navigation.home_link_target})]})]})),ka=(0,x.I)(s=>(0,n.jsxs)("div",{className:"co-settings__fieldset js-o-appearance__settings",children:[(0,n.jsx)("span",{className:"co-settings__fieldset-title",children:"Images"}),(0,n.jsx)(R.f,{id:"image_downloads",label:"Allow image downloads",checked:s.privacy.image.download==="enable"})]}));var cn=i(5181);const di=class cv extends u.j{constructor(t,a,r){const p=r!=="undefined";r||(r=`appearance-${cv.count++}`),t||(t=cn()),super(t,a,r),p||this.on()}on(t){var a,r;this.sandbox.subscribe("events",this);const p=this.$ctx,O=cn(document.body);p&&(this.key=p.data("view")),this.hub=(0,b._j)(),this.url="/api/hub/settings/",this.document=(r=(a=O.data("document"))!=null?a:cn(".document").data("document"))!=null?r:null,this.key&&(this.key==="navigation"?(0,f.s)("open guideline navigation settings"):this.key==="design"&&(0,f.s)("open guideline design settings"),(0,f.s)("open guideline appearance settings",{type:this.key}),this.load()),typeof t=="function"&&t()}load(){var t;this.data.get(`${this.url+this.hub}/${(t=this.document)!=null?t:""}`).then(a=>{a.success&&this.render(a.hub)})}render({appearance:t,marketplace_app_id:a}){t.project=(0,b.MJ)(),t.hub=this.hub,t.hasTheme=a!==null;const r=cn(".js-o-appearance__content",this.$ctx);let p=null;switch(this.key){case"design":p=an;break;case"medialibrary":p=Na;break;case"navigation":p=fn;break;case"privacy":p=ka;break;default:console.error(`Unknown appearance settings key: ${this.key}`);break}if(!p){console.error(`No appearance settings component found for key: ${this.key}`);return}this.tpl.addAndActivate(r,(0,e.EY)(p,t)),this.$actions=this.$ctx.find(".js-o-appearance__actions"),this.bindSettings(r)}bindSettings(t){this.settings&&this.settings.destroy(),this.settings=new y.D(t,this.sandbox),this.key==="navigation"?this.bindNavigationSettings():this.key==="design"&&this.bindDesignSettings()}bindNavigationSettings(){const t=this.settings.getSetting("sticky_navigation");t.saved=function(O){const L=O.sticky_navigation?"enabled":"disabled";this.data.post(this.url+this.hub,{sticky_navigation:L}).then(W=>{const X=cn(document.body),ie=X.find(".document-sidebar");if(W.appearance.navigation.sticky==="enabled"){if(X.attr("data-sticky","enabled"),ie.length>0){const xe=ie.offset().top,Ae=function(){cn(window).scrollTop()>=xe?ie.addClass("sticky"):ie.removeClass("sticky")};Ae(),cn(window).on("scroll",()=>{Ae()})}}else X.attr("data-sticky","disabled"),ie.removeClass("sticky"),cn(window).off("scroll")})}.bind(this);const a=this.settings.getSetting("collapsible_navigation");a.saved=function(O){const L=O.collapsible_navigation?"enabled":"disabled";this.data.post(this.url+this.hub,{collapsible_navigation:L}).then(W=>{const X=cn(document.body);X.data("collapsible",W.appearance.navigation.collapsible);const ie=X.find(".nav-pages");W.appearance.navigation.collapsible==="enabled"?ie.addClass("state-collapsible"):ie.removeClass("state-collapsible")})}.bind(this);const r=this.settings.getSetting("home_link");r.saved=function(O){O.success&&(O.home_link==""?cn(".js-o-header .js-o-header__logo-link").attr("href",`/hub/${this.hub}`):cn(".js-o-header .js-o-header__logo-link").attr("href",O.home_link))}.bind(this);const p=this.settings.getSetting("home_link_target");p.saved=function(O){O.success&&(O.home_link_target=="1"?cn(".js-o-header .js-o-header__logo-link").attr("target","_blank"):cn(".js-o-header .js-o-header__logo-link").removeAttr("target"))}}bindDesignSettings(){const t=["heading1","heading2","heading3","heading4","custom1","custom2","custom3","body","link","quote","image-title","image-caption","categories","pages","sections","info","note","tip","warning","button_primary","button_secondary","button_tertiary"];for(const p of t){const O=this.settings.getSetting(p);O.saved=function(L){this.saveAppearanceSettings(L)}.bind(this)}const a=this.settings.getSetting("main_font");a.saved=function(p){if(cn(document.body).data("mainFontCss",p.css),p.provider.toLowerCase()==="google"){const W={google:{families:[`${p.family}:100,200,300,400,500,600,700,800,900`]}};try{window.WebFont.load(W)}catch(X){cn.getScript("//ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js",()=>{window.WebFont.load(W)})}}const O={main_font:{family:p.family,family_css:p.css,provider:p.provider,display_name:p.display_name||null}},L=this.document?this.document:null;this.saveAppearanceSettings(O,L)}.bind(this);const r=this.settings.getSetting("search_icon");Object.keys(r).length>0&&(r.saved=function(p){this.saveAppearanceSettings(p,null,O=>{if(O.success===!0){const L=cn(".js-m-nav-search__icon-element"),W=O.appearance.search_icon;W&&(L.removeClass("icon-search icon-search2 icon-search3 icon-search4"),L.addClass(W))}})}.bind(this))}saveAppearanceSettings(t,a,r){let p=this.url+this.hub;a&&(p=`${p}/${a}`),this.data.post(p,t).then(O=>{O.success&&(this.updateHubAppearanceStyle(O),O.brandhome_appearance_style&&this.updateDocumentAppearanceStyle(O.brandhome_appearance_style),O.document_appearance_style&&this.updateDocumentAppearanceStyle(O.document_appearance_style),typeof r=="function"&&r(O))})}updateHubAppearanceStyle(t){cn(".hub-appearance-css").html(t.appearance_style),window.emitter.emit("HubAppearanceUpdated",t)}updateDocumentAppearanceStyle(t){cn(".document-appearance-css").html(t)}};di.count=0;let La=di;var Vs=i(78484),Re=i(85379),et=i(93898),yt=i(11097),Ns=i(9890);const hn=async(s,t)=>{const{result:a}=await Ns.J.post("/api/block-attachment",{block_id:s,file_id:t});return a.data};var At=i(88133);const Us=(0,x.I)(s=>(0,n.jsxs)("li",{className:"m-attachments__item js-m-attachments__item","data-id":s.id,"data-name":s.name,"data-ext":s.ext,children:[(0,n.jsxs)("div",{className:"js-m-attachments__link m-attachments__link","data-download-url":s.link,children:[(0,n.jsx)("i",{className:`ico ico-${s.ext_class}`}),s.editable?(0,n.jsx)("span",{className:"m-attachments__drag-handle js-m-attachments__drag-handle",children:(0,n.jsx)("i",{className:"icon-bars"})}):null,(0,n.jsxs)("div",{className:"m-attachments__meta",children:[(0,n.jsx)("div",{title:s.name,className:"js-m-attachments__title m-attachments__title","data-editable":"true",children:s.name}),(0,n.jsxs)("span",{className:"m-attachments__size",children:[s.filesize_human," - ",s.ext]})]})]}),s.editable?(0,n.jsxs)("div",{className:"m-attachments__settings-wrap js-m-attachments__settings-wrap",children:[(0,n.jsx)("button",{type:"button",className:"m-attachments__settings-btn js-m-attachments__settings-btn","aria-label":window.translate("AttachmentsPattern_openDropdown"),"aria-pressed":"false",children:(0,n.jsx)("i",{className:"m-attachments__settings-icon icon-angle-down"})}),(0,n.jsxs)("ul",{className:"m-attachments__settings-list js-m-attachments__settings-list",children:[(0,n.jsx)("li",{className:"m-attachments__settings-item",children:(0,n.jsx)("button",{type:"button",className:"m-attachments__settings-link js-m-attachments__replace",children:window.translate("AttachmentsPattern_replace")})}),(0,n.jsx)("li",{className:"m-attachments__settings-item",children:(0,n.jsx)("button",{type:"button",className:"m-attachments__settings-link m-attachments__settings-link--danger js-m-attachments__delete",children:window.translate("AttachmentsPattern_delete")})})]})]}):null]}));var as=i(5181);class Qn extends u.j{on(t){this.segmentAnalytics=this.sandbox.getConfigParam("segmentAnalytics"),this.$block=this.$ctx.closest(".block"),this.$count=this.$ctx.find(".js-m-attachments__count"),this.editable=this.$ctx.data("editable"),this.sandbox.subscribe("events",this),this.$block.hasClass("block")&&this.$block.hasClass("referenced")&&this.$ctx.addClass("referenced"),this.updateAttachments(),this.bindAttachmentUpload(),this.bindAttachmentReplace(),this.bindAttachmentDownload(),this.bindInlineEditing(),this.bindSorting(),this.bindTracking(),t()}updateAttachments(){const t=this.$block.data("block");this.$block.attr("data-attachments")!==void 0||this.$ctx.toggleClass("state-hidden",!0),this.$block.data("attachments")&&this.data.get(`/api/attachment/list/${t}`).then(r=>{if(r.success){const p=r.attachments.length;this.$count.text(p),p>0&&this.$ctx.find(".js-m-attachments__dropdown").addClass("state-visible"),as.each(r.attachments,(O,L)=>{L.editable=this.editable;const W=as((0,e.EY)(Us,L));as(".js-m-attachments__list",this.$ctx).append(W)})}})}bindAttachmentUpload(){const t=as(".document").data("hub"),a=this.$block.data("block"),r=as(".document").data("document");this.$ctx.find(".js-m-attachments__files").upload({dataType:"json",dropZone:this.$ctx.find(".js-m-attachments__dropzone"),add:(p,O)=>{O.formData.portal_id=t,O.formData.document_id=r,O.formData.block_id=a,this.data.checkStorageLimit(O.files[0].size).then(()=>{O.submit()})},done:async(p,O)=>{if(O.result&&O.result[0]){const L=await hn(O.formData.block_id,O.result[0].file_id),W=Object.assign({},L,{editable:this.editable,ext_class:L.ext});this.$ctx.find(".js-m-attachments__list").append(as((0,e.EY)(Us,W))),this.$count.text(this.$ctx.find(".js-m-attachments__item").length),as('[data-editable="true"]',this.$ctx).attr("contenteditable",!0),this.tpl.enableSanitizationOnPasting(this.$ctx,".js-m-attachments__title[contenteditable]"),this.$ctx.find(".js-m-attachments__dropdown").addClass("state-visible"),this.$block.data("attachments")||this.data.updateBlock(this.$block,{settings:{attachments:!0}}),this.$block.data("attachments",!0),this.bindTracking()}}})}bindAttachmentReplace(){const t=as(".document").data("hub"),a=this.$block.data("block"),r=as(".document").data("document");this.$ctx.find(".js-m-attachments__replace-input").upload({dataType:"json",add:(p,O)=>{if(O.formData){const W=as(".js-m-attachments__replace-form",this.$ctx).find(".js-m-attachments__replace-id").val();if(typeof W=="undefined"||W===0||W==="0")return!1;O.formData.portal_id=t,O.formData.document_id=r,O.formData.block_id=a,O.assetId=W,this.data.checkStorageLimit(O.files[0].size).then(()=>{O.submit()})}},done:async(p,O)=>{if(O.result&&O.result[0]){const L=await hn(O.formData.block_id,O.result[0].file_id);await this.data.post(`/api/attachment/update/${L.id}`,{doReplace:!0,oldId:O.assetId});const W=this.$ctx.find(`.js-m-attachments__item[data-id="${O.assetId}"]`),X=Object.assign({},L,{editable:this.editable,ext_class:L.ext});W.after(as((0,e.EY)(Us,X))).remove(),as('[data-editable="true"]',this.$ctx).attr("contenteditable",!0),this.$ctx.find(".js-m-attachments__dropdown").addClass("state-visible"),this.bindTracking()}}})}bindAttachmentDownload(){this.$ctx.on("click",".js-m-attachments__link",t=>{const a=as(t.currentTarget).data("downloadUrl");this.data.download(a)})}bindTracking(){this.$ctx.on("click",".js-m-attachments__link",t=>{const a=as(t.currentTarget);this.platformAnalyticsTrackAttachmentDownload(a),(0,f.s)("download attachment",{attachment_id:a.closest(".js-m-attachments__item").dataAsNumber("id"),via:"GUIDELINE_ATTACHMENTS"});const r=a.closest(".js-m-attachments__item").data(),p=`${r.name}.${r.ext}`,O=this.$ctx.data("blockType");this.segmentAnalytics.trackDownload(`styleguide block ${O}`,p,O,null,a.attr("href"),null,!1,!0,p,null,null)})}platformAnalyticsTrackAttachmentDownload(t){try{const a={attachment_id:t.closest(".js-m-attachments__item").dataAsNumber("id"),attachment_extension:t.closest(".js-m-attachments__item").data("ext"),block_id:this.$block.dataAsNumber("block"),document_id:parseInt(as(".document").data("document"),10),asset_id:null,project_id:(0,b.MJ)(),project_type:(0,b.Xv)(),guideline_id:(0,b._j)(),page_id:Re.e.documentPageId,via:(0,b.Xv)(),via_id:(0,b._j)(),download_type:"SINGLE"};yt.w.track([{type:"attachment:download",brandId:(0,et.M)(),properties:a}])}catch(a){console.error(a)}}bindInlineEditing(){as(".document").data("editor")&&(this.$ctx.on("click",".js-m-attachments__link",t=>{if(as(document.body).hasClass("editor-enabled")&&!this.$ctx.hasClass("referenced"))return t.stopPropagation(),!1}),this.$ctx.on("blur",'.js-m-attachments__title[data-editable="true"]',t=>{const a=as(t.currentTarget),r=a.closest(".js-m-attachments__item").data("id"),p=a.text();return this.data.post(`/api/attachment/update/${r}`,{title:p}),a.attr({title:p}),!1}),this.$ctx.on("keydown","[contenteditable]",t=>{if(t.keyCode===13)return as(t.currentTarget).trigger("blur"),window.getSelection().removeAllRanges(),!1}))}bindSorting(){as.each(this.$ctx.find(".js-m-attachments__list"),(t,a)=>{this.sortable=Vs.Ay.create(a,{group:"attachment",ghostClass:"sortable-ghost",handle:".js-m-attachments__drag-handle",forceFallback:!0,onUpdate:r=>{if(r.oldIndex!==r.newIndex){if(!as(document.body).hasClass("editor-enabled"))return!1;this.data.post(`/api/attachment/update/${as(r.item).data("id")}`,{sort:r.newIndex+1})}}})})}bindAttachmentSettings(){this.$ctx.on("click",".js-m-attachments__settings-btn",t=>{const a=as(t.currentTarget).closest(".js-m-attachments__settings-wrap");return a.hasClass("state-open")?(this.$ctx.find(".js-m-attachments__settings-btn").attr("aria-pressed","false"),a.removeClass("state-open")):(this.$ctx.find(".js-m-attachments__settings-btn").attr("aria-pressed","true"),this.$ctx.find(".js-m-attachments__settings-wrap").removeClass("state-open"),a.addClass("state-open")),!1}),this.$ctx.on("click",".js-m-attachments__delete",t=>{const a={type:"warning",title:"Are you sure?",text:"You are about to delete this download item",confirmButtonText:"Yes, delete it!",confirmButtonColor:"#c93b3e",showCancelButton:!0,closeOnConfirm:!0};return(0,At.K)(a,()=>{const r=as(t.currentTarget).closest(".js-m-attachments__item");this.data.delete(`/api/block-attachment/${r.attr("data-id")}`),r.remove();const p=this.$ctx.find(".js-m-attachments__item").length;this.$count.text(p),p===0&&this.$ctx.find(".js-m-attachments__dropdown").removeClass("state-visible")}),!1}),this.$ctx.on("click",".js-m-attachments__replace",t=>{const a=this.$ctx.find(".js-m-attachments__replace-form"),r=as(t.currentTarget).closest(".js-m-attachments__item");a.find(".js-m-attachments__replace-id").val(r.attr("data-id")),a.find(".js-m-attachments__replace-input").trigger("click")})}unbindEvents(){this.$ctx.off("click",".js-m-attachments__settings-btn"),this.$ctx.off("click",".js-m-attachments__replace"),this.$ctx.off("click",".js-m-attachments__delete")}onEditingEnabled(){this.$ctx.toggleClass("state-hidden",!1),!this.$ctx.hasClass("referenced")&&this.editable&&(as('[data-editable="true"]',this.$ctx).attr("contenteditable",!0),this.tpl.enableSanitizationOnPasting(this.$ctx,".js-m-attachments__title[contenteditable]"),this.bindAttachmentSettings())}onEditingDisabled(){if(!this.$ctx.hasClass("referenced")&&this.editable){const t=this.$ctx.find(".js-m-attachments__settings-wrap");t.hasClass("state-open")&&t.removeClass("state-open"),this.tpl.disableSanitizationOnPasting(this.$ctx,".js-m-attachments__title[contenteditable]"),as('[data-editable="true"]',this.$ctx).removeAttr("contenteditable"),this.unbindEvents()}}}var wa=i(18361),na=i(49198),Xn=i.n(na),Oi=Object.defineProperty,xi=Object.getOwnPropertySymbols,ui=Object.prototype.hasOwnProperty,Ka=Object.prototype.propertyIsEnumerable,_o=(s,t,a)=>t in s?Oi(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,no=(s,t)=>{for(var a in t||(t={}))ui.call(t,a)&&_o(s,a,t[a]);if(xi)for(var a of xi(t))Ka.call(t,a)&&_o(s,a,t[a]);return s};const xa=(0,x.I)(s=>{const t=`data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${s.originalWidth} ${s.originalHeight}"%3E%3C/svg%3E`;return(0,n.jsx)("img",no(no({className:"mod mod-c-image c-image",src:t,alt:s.alt},s.tpl.renderDataAttributesAsObject(s)),s.allowShrinkingToIncreaseDensity?{style:{width:`${s.originalWidth/s.pixelDensity||1}px`}}:{}))});var ja=i(8609),aa=i(37522),Ls=i(95636),xn=i(51800),vo=i(57682);const Ba=s=>{if(!s)return null;const t=r=>typeof r=="object"&&["red","green","blue"].every(O=>O in r),a=r=>typeof r=="string"&&(r.startsWith("rgba")||r.startsWith("rgb"));if(t(s))return(0,vo.j)(s);if(a(s)){const r=s.split("(")[1].split(")")[0].split(",");return{r:parseFloat(r[0]),g:parseFloat(r[1]),b:parseFloat(r[2]),a:parseFloat(r==null?void 0:r[3])||1}}return s};var kn=i(34933),Oa=i(11469),ma=i(11920),Pn=i(23847),ao=i(95772),On=i(71338),en=i(30935),ia=i(42201);const ki={red:255,green:255,blue:255,alpha:1,name:"White"},io=(0,en.hD)({basics:[{id:"asset",type:"legacyAssetInput",label:"Asset",extensions:[...ia.vB.Images,...ia.vB.Templates,ia.Cq.Pdf],objectTypes:[ia.VZ.ImageVideo,ia.VZ.Canvas],showForTranslations:!0},{id:"retina",label:"2x",type:"switch",defaultValue:!1}],layout:[{id:"mode",label:"Positioning",type:"segmentedControls",defaultValue:"figure",choices:[{value:"full",icon:"MediaObjectTextBottom"},{value:"text-top",icon:"MediaObjectTextTop"},{value:"figure",icon:"MediaObjectTextRight"},{value:"text-left",icon:"MediaObjectTextLeft"}]}],style:[{id:"bubble",label:"Bubble Color",type:"colorInput",defaultValue:ki},{id:"border",label:"Border",type:"switch",defaultValue:!1}],security:[{id:"useGlobalSecuritySettings",type:"segmentedControls",defaultValue:"yes",choices:[{value:"yes",label:"Global Settings"},{value:"no",label:"Custom"}]},{id:"downloadable",type:"switch",defaultValue:!1,label:"Downloadable",show:s=>{var t;return((t=s.getBlock("useGlobalSecuritySettings"))==null?void 0:t.value)==="no"}}]});var Is=i(5181),qn=Object.defineProperty,zn=Object.defineProperties,Ji=Object.getOwnPropertyDescriptors,vn=Object.getOwnPropertySymbols,hi=Object.prototype.hasOwnProperty,oo=Object.prototype.propertyIsEnumerable,Bs=(s,t,a)=>t in s?qn(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,ji=(s,t)=>{for(var a in t||(t={}))hi.call(t,a)&&Bs(s,a,t[a]);if(vn)for(var a of vn(t))oo.call(t,a)&&Bs(s,a,t[a]);return s},sn=(s,t)=>zn(s,Ji(t));class Bn extends u.j{static get DEFAULT_X_POSITION(){return 50}static get DEFAULT_Y_POSITION(){return 50}static get KEY_CODE_ALT(){return 18}on(t){this.annotationCount=this.$ctx.find(".js-b-annotations__item").length,this.$duplicationHint=this.$ctx.find(".js-b-annotations__duplication-hint"),this.$dragging=null,this.draggingOriginOffsets=null,this.$duplicateGhost=null,this.editable=this.$ctx.data("editable"),this.editing=Is(document.body).hasClass("editor-enabled"),this.blockId=this.$ctx.data("block"),this.sectionId=this.$ctx.data("sectionId"),this.assetDownload=this.sandbox.getConfigParam("assetDownload"),this.segmentAnalytics=this.sandbox.getConfigParam("segmentAnalytics"),this.selection=null,this.started=!1,this.$body=Is(document.body),this.$canvas=this.$ctx.find(".js-b-annotations__canvas"),this.$css=this.$ctx.find(".js-b-annotations__styles"),this.$details=this.$ctx.find(".js-b-annotations__details"),this.$loader=Is((0,e.EY)(ja.$,{id:this.blockId})),this.$editorHint=Is(".js-b-annotations__duplication-hint",this.$ctx),this.displayName="Annotations",this.isTranslator=this.$body.dataAsNumber("translator")===1,this.sandbox.addModules(this.$loader),this.sandbox.subscribe("events",this),this.changeBubble(this.$css.data("bubble")),this.bindTracking(),t()}after(){const t=Is(".document");this.enableImageUpload(),this.updateImage(),(this.editable||this.isTranslator)&&(this.$ctx.on("click",".js-b-annotations__item-editor",a=>{if(this.editing){const r=Is(a.currentTarget),p=r.closest(".js-b-annotations__item").data("annotationId");this.enableEditor(r,p)}}),this.$ctx.on("click",".js-b-annotations__item-editor a",a=>{this.editing&&a.preventDefault()}),this.$ctx.on("click",".js-b-annotations__replace-image-upload",()=>{Is(".js-m-dropzone__upload",this.$ctx).trigger("click")}),this.$ctx.on("click",".js-m-assetchooser-placeholder",()=>{this.openAssetChooser()}),this.$ctx.on("click",".js-b-annotations__replace-image-choose",()=>{this.openAssetChooser()})),this.editable&&(this.$ctx.on("click",".js-b-annotations__canvas",a=>{if(this.editing){const r=this.calculateOffsets(a.currentTarget,a);this.addAnnotation(r.x,r.y)}}),this.$ctx.on("click",".js-b-annotations__new",()=>{this.editing&&this.addAnnotation(Bn.DEFAULT_X_POSITION,Bn.DEFAULT_Y_POSITION)}),this.$ctx.on("click",".js-b-annotations__bubble",a=>{a.stopPropagation()}),this.$ctx.on("click",".btn-delete-annotation",a=>{const p=Is(a.currentTarget).closest(".js-b-annotations__item").data("annotationId");this.removeAnnotation(p)}),this.$ctx.on("mousedown",".js-b-annotations__bubble",Is.debounce(50,a=>{const r=Is(a.currentTarget);if(this.editing&&!r.hasClass("js-b-annotations__bubble-delete-btn")){const p=this.calculateOffsets(this.$canvas.get(0),a);this.$dragging=r,this.draggingOriginOffsets={x:p.x,y:p.y},r.addClass("state-dragging"),this.$duplicationHint.addClass("state-highlighted")}})),this.$ctx.on("mousemove",".js-b-annotations__image-wrap",a=>{if(this.$dragging){const r=this.calculateOffsets(this.$canvas.get(0),a);a.altKey&&!this.$duplicateGhost?this.addDuplicateGhost(this.draggingOriginOffsets.x,this.draggingOriginOffsets.y,this.$dragging.data("annotationId")):!a.altKey&&this.$duplicateGhost&&this.removeDuplicateGhost(this.$duplicateGhost),this.$dragging.css({left:`${r.x}%`,top:`${r.y}%`})}}),this.$ctx.on("mouseup",".js-b-annotations__image-wrap",a=>{if(this.$dragging){const r=this.calculateOffsets(this.$canvas.get(0),a),p={x:this.draggingOriginOffsets.x,y:this.draggingOriginOffsets.y},O=this.$dragging.data("annotationId");this.$dragging.data("offsetLeft",r.x),this.$dragging.data("offsetTop",r.y),!a.altKey&&this.$duplicateGhost?this.removeDuplicateGhost(this.$duplicateGhost):a.altKey&&this.$duplicateGhost&&(this.addBubbleToImage(p.x,p.y,O),this.removeDuplicateGhost(this.$duplicateGhost));const L=this.getBubbleDataByAnnotationId(O),W={settings:{[`annotations[${O-1}]`]:{bubbles:L}}};this.data.updateBlock(this.$ctx,W),this.$dragging.removeClass("state-dragging"),this.$duplicationHint.removeClass("state-highlighted"),this.$dragging=null,this.draggingOriginOffsets=null}}),t.on("keyup",a=>{a.which===Bn.KEY_CODE_ALT&&this.$dragging&&this.$duplicateGhost&&this.removeDuplicateGhost(this.$duplicateGhost)}),t.on("keydown",a=>{a.which===Bn.KEY_CODE_ALT&&this.$dragging&&this.addDuplicateGhost(this.draggingOriginOffsets.x,this.draggingOriginOffsets.y,this.$dragging.data("annotationId"))}),this.$ctx.on("click",".js-b-annotations__bubble-delete-btn",a=>{if(this.editing){const r=Is(a.currentTarget.closest(".js-b-annotations__bubble")),p=r.data("annotationId");Is(`.js-b-annotations__bubble[data-annotation-id="${p}"]`,this.$ctx).length<=1?this.removeAnnotation(r.data("annotationId")):this.removeBubble(r)}}),this.$ctx.on("click",".btn-download",a=>{a.stopPropagation()})),this.$ctx.on("mouseenter",".js-b-annotations__item",a=>{const p=Is(a.currentTarget).data("annotationId"),O=Is(".js-b-annotations__bubble",this.$ctx),L=Is(`.js-b-annotations__bubble[data-annotation-id="${p}"]`,this.$ctx);O.addClass("state-hidden"),L.removeClass("state-hidden")}),this.$ctx.on("mouseleave",".js-b-annotations__item",()=>{Is(".js-b-annotations__bubble",this.$ctx).removeClass("state-hidden")}),this.$ctx.on("mouseenter",".js-b-annotations__bubble",a=>{const r=Is(a.currentTarget),p=r.data("annotationId"),O=".js-b-annotations__item",L=Is(O,this.$ctx),W=Is(`${O}[data-annotation-id="${p}"]`,this.$ctx),X=W.find("div");if(L.addClass("state-hidden"),W.removeClass("state-hidden"),X.is(":not(:empty)")){const ie=r.position().left,xe=20,Ae=40,Ne=10,He=this.$canvas.width()-Ne,Je=this.$canvas.innerHeight()-Ne,vt=(He-Ae)/2-xe;if(ie>vt+(xe+Ae/2)+Ne/2?this.$details.css("left",-vt-(Ae+xe)/2):this.$details.css("left",(xe+Ae)/2),this.$details.css("width",vt),this.$details.css("overflow","hidden"),this.$details.css("top",0),this.$details.html(X.html()),r.append(this.$details),r.position().top<10&&this.$details.css("top",20),r.position().top>Je-10){const Dt=this.$details.innerHeight();this.$details.css("top",-Dt)}this.$details.velocity("fadeIn",{duration:10})}}),this.$ctx.on("mouseleave",".js-b-annotations__bubble",()=>{this.$details.velocity("reverse",()=>{this.$details.remove()}),this.$dragging||Is(".js-b-annotations__item",this.$ctx).removeClass("state-hidden")})}setRetina(t){const a=this.$ctx.find(".js-b-annotations__image-wrap");t?a.addClass("state-retina"):a.removeClass("state-retina"),this.updateImage(),this.data.updateBlock(this.$ctx,{settings:{retina:t}})}setDownloadable(t,a){const r=this.$ctx.find(".btn-download");this.$ctx.find(".js-b-annotations__inherited").remove(),t?r.removeClass("btn-editor"):r.addClass("btn-editor"),this.data.updateBlock(this.$ctx,{settings:{downloadable:a===!0?null:t,downloadable_inherited:a}})}setMode(t){const a=this.$ctx.find(".js-b-annotations__mode-wrap");a.removeClass("state-mode-full state-mode-text-top state-mode-figure state-mode-text-left"),a.addClass(`state-mode-${t}`),this.updateImage(),this.data.updateBlock(this.$ctx,{settings:{mode:t}})}setBorder(t){const a=this.$ctx.find(".js-b-annotations__image-wrap");t?a.addClass("state-border"):a.removeClass("state-border"),this.updateImage(),this.data.updateBlock(this.$ctx,{settings:{border:t}})}setBubble(t){this.changeBubble(t),this.data.updateBlock(this.$ctx,{settings:{bubble:t}})}changeBubble(t){const a=Ba(t),r=a?Xn()(a):null;let p="#363D4A",O="0 0 0 1px rgba(54, 61, 74, 0.25)";r!=null&&r.isValid()&&(r!=null&&r.isDark())&&(p="#FFFFFF",O="0 0 0 1px rgba(255, 255, 255, 0.8)"),this.$css.text(`.b-annotations[data-block="${this.blockId}"] .b-annotations__bubble, .b-annotations[data-block="${this.blockId}"] .b-annotations__item:before {
                    background-color: ${t};
                }

                .b-annotations[data-block="${this.blockId}"] .b-annotations__bubble .b-annotations__bubble-number, .b-annotations[data-block="${this.blockId}"] .b-annotations__item:before {
                    color: ${p};
                }

                .b-annotations[data-block="${this.blockId}] .b-annotations__bubble {
                    box-shadow: ${O};
                }`)}enableEditor(t,a){if(this.editor&&this.editor.destroy(),!this.editing)return!1;this.editor=new Pn.j(t,this.sandbox,{set:"caption",placeholder:"Add a description...",project:(0,b.MJ)(),saveDelay:1e3}),this.editor.enable(),this.editor.focus(),this.editor.saved=r=>{const p={settings:{[`annotations[${a-1}]`]:{content:r}}};this.data.updateBlock(this.$ctx,p)},this.editor.keydown=r=>{var p;r.key==="tab"&&((p=this.editor)==null||p.save(!0),this.addAnnotation(Bn.DEFAULT_X_POSITION,Bn.DEFAULT_Y_POSITION))}}disableEditor(){this.editor&&this.editor.destroy()}enableImageUpload(){Is(".js-m-dropzone__upload",this.$ctx).upload({dataType:"json",dropZone:Is(".js-m-dropzone",this.$ctx),add:(t,a)=>{a.submit()},start:()=>{Is(".js-m-dropzone",this.$ctx).find(".fi-image").replaceWith(this.$loader)},progress:(t,a)=>{const r=parseInt(a.loaded/a.total*100,10);this.fire("progress",{id:this.blockId,progress:r})},done:async(t,a)=>{var r;if((r=a==null?void 0:a.result[0])!=null&&r.file_id){const p=await(0,Oa.Vq)(a.result[0].file_id,Is(".document").data("project"));this.setImage(p.id,!1)}}})}setImage(t,a){this.data.get(`/api/screen/styleguide/${t}/${(0,b.MJ)()}`).then(r=>{const p=r.data;this.$ctx.data("asset",t);const O={settings:{asset:p.id,caption:p.title,background_color:p.background_color||"transparent",isWorkspaceAsset:a}};if(this.editable&&this.showEditorHints(),!this.isTranslator){const ie=Is(".js-m-dropzone__upload",this.$ctx);ie.attr("name","files_replace"),ie.upload()}this.data.updateBlock(this.$ctx,O);const L=p.id;Is(".btn-download",this.$ctx).attr("href",`/api/screen/download/${p.token}`);const X=Is(".js-b-annotations__figure",this.$ctx);X.data("id",L),X.data("href",`/api/screen/download/${p.token}`),this.$canvas.dataAsString("previewUrl",p.generic_url),this.$canvas.css("background-color",p.background_color||"transparent"),this.$canvas.dataAsNumber("width",p.width),this.$canvas.dataAsNumber("height",p.height),this.$ctx.addClass("state-available"),this.updateImage()})}onEditingEnabled(){if(this.$ctx.hasClass("referenced"))return!1;this.editable&&this.showEditorHints(),this.editing=!0}onEditingDisabled(){this.editing=!1,this.disableEditor(),this.fire("closeDropdown",this.$ctx.find(".js-b-annotations__settings")),this.editable&&this.hideEditorHints()}addAnnotation(t,a){if(!this.$ctx.hasClass("state-available"))return;const r={settings:{"annotations[]":{bubbles:[{left:t,top:a}],content:""}}};this.data.updateBlock(this.$ctx,r),this.annotationCount++;const p=this.addAnnotationToList();this.addBubbleToImage(t,a,this.annotationCount),this.enableEditor(p.$listItemEditor,p.id)}removeAnnotation(t){const a=Is(".js-b-annotations__item",this.$ctx),r=Is(`.js-b-annotations__bubble[data-annotation-id="${t}"]`,this.$ctx),p=Is(`.js-b-annotations__item[data-annotation-id="${t}"]`,this.$ctx),O={settings:{[`annotations[${t-1}]`]:null}};this.data.updateBlock(this.$ctx,O),r.remove(),p.remove(),Is.each(a,(L,W)=>{const X=Is(W),ie=X.dataAsNumber("annotationId");if(ie>t){const Ae=Is(`.js-b-annotations__bubble[data-annotation-id="${ie}"]`,this.$ctx);Is(Ae.find(".js-b-annotations__bubble-number")).text(ie-1),Ae.data("annotationId",ie-1),Ae.attr("data-annotation-id",ie-1),X.data("annotationId",ie-1),X.attr("data-annotation-id",ie-1)}}),this.$ctx.find(`.js-b-annotations__item[data-annotation-id="${t-1}"] span`).trigger("focus"),this.annotationCount--}addAnnotationToList(){const t=this.annotationCount,a=Is(".js-b-annotations__new",this.$ctx),r=Is(`<div class="b-annotations__item js-b-annotations__item" data-annotation-id="${t}">
                    <div class="js-b-annotations__item-editor">
                        <p><br></p>
                    </div>
                    <button class="btn-delete-annotation cm-actions__action-wrap">
                        <i class="ca-icon--trash ca-icon--md cm-actions__action"></i>
                    </button>
                </div>`);return a.before(r),{id:t,$listItem:r,$listItemEditor:r.find(".js-b-annotations__item-editor")}}getBubbleDataByAnnotationId(t){return Is(`.js-b-annotations__bubble[data-annotation-id="${t}"]`,this.$ctx).toArray().map(a=>({left:Is(a).data("offsetLeft"),top:Is(a).data("offsetTop")}))}addBubbleToImage(t,a,r){const p=Is(`<div class="b-annotations__bubble js-b-annotations__bubble" data-annotation-id="${r}" data-offset-top="${a}" data-offset-left="${t}">
                    <span class="b-annotations__bubble-number js-b-annotations__bubble-number co-editor">
                        ${r}
                    </span>
                    <button class="b-annotations__bubble-delete-btn js-b-annotations__bubble-delete-btn">
                        <i class="b-annotations__bubble-delete-icon ca-icon--reject"></i>
                    </button>
                </div>`);p.data("annotationId",r),p.css({left:`${t}%`,top:`${a}%`}),this.$canvas.append(p)}removeBubble(t){t.remove();const a=t.dataAsNumber("annotationId"),r=this.getBubbleDataByAnnotationId(a),p={settings:{[`annotations[${a-1}]`]:{bubbles:r}}};this.data.updateBlock(this.$ctx,p)}addDuplicateGhost(t,a,r){const p=Is(`<div class="b-annotations__bubble">
                    <span class="b-annotations__bubble-number">
                        ${r}
                    </span>
                </div>`);p.data("annotationId",r),p.css({left:`${t}%`,top:`${a}%`}),this.$canvas.append(p),this.$duplicateGhost=p}removeDuplicateGhost(t){t.remove(),this.$duplicateGhost=null}updateImage(){var t,a,r,p,O;if(!this.$canvas.dataAsString("previewUrl"))return this.fire("BlockReady",{block:this.$ctx.data("block")},["events"]),!1;const L=this.$ctx.find(".js-b-annotations__image-wrap"),W=this.$ctx.find(".js-b-annotations__figure"),X=this.$canvas.find(".mod-c-image"),ie=(t=this.$canvas.dataAsNumber("width"))!=null?t:"",xe=(a=this.$canvas.dataAsNumber("height"))!=null?a:"",Ae=(r=this.$canvas.dataAsString("previewUrl"))!=null?r:"",Ne=L.hasClass("state-retina")?ma.t.PIXEL_DENSITY_2:ma.t.PIXEL_DENSITY_1,He=(O=(p=this.$canvas.dataAsString("alt"))==null?void 0:p.replaceAll('"',""))!=null?O:"",Je=L.hasClass("state-border"),vt=ma.t.ALIGNMENT_CENTER,Dt=Is((0,e.EY)(xa,{originalWidth:ie,originalHeight:xe,previewUrl:Ae,pixelDensity:Ne,alt:He,roundedCorners:Je,alignment:vt}));X.length>0?(this.sandbox.removeModules(X),X.replaceWith(Dt)):this.$canvas.prepend(Dt),W.css({maxWidth:ie/Ne}),this.sandbox.addModules(Dt),this.fire("BlockReady",{block:this.$ctx.data("block")},["events"])}calculateOffsets(t,a){const r=t.getBoundingClientRect();return{x:(a.clientX-r.left)*100/(r.right-r.left),y:(a.clientY-r.top)*100/(r.bottom-r.top)}}bindTracking(){this.$ctx.on("click",".js-b-annotations__download-link",t=>{var a,r;t.preventDefault(),window.open(t.currentTarget.href,"_self");const p=Is(t.currentTarget),O="annotations",L=(a=p.data("filename"))!=null?a:"";this.segmentAnalytics.trackDownload(`styleguide block ${O}`,L,O,null,(r=p.attr("href"))!=null?r:"",null,!1,!1,L,null,null),this.trackAssetDownloadForPlatformAnalytics(this.$ctx.data("asset-data"))})}trackAssetDownloadForPlatformAnalytics(t){try{yt.w.track([{type:"asset:download",brandId:(0,et.M)(),properties:{asset_ext:t.ext,asset_id:t.id,download_type:"SINGLE",project_id:t.project,project_type:t.project_type,revision_id:t.revision,via:(0,b.Xv)(),via_id:(0,b._j)(),block_id:this.blockId}}])}catch(a){console.error(a)}}onImageAndVideoDownloadsConfigured(){this.reloadAndReplaceSelf()}async reloadAndReplaceSelf(){await this.data.get(`/api/document/block/${this.$ctx.data("block")}`).then(t=>{var a;const r=t.data;if(!r)return;const p=Is((0,e.EY)(On.x,sn(ji({},r),{settings:JSON.parse(JSON.stringify((a=r.settings)!=null?a:"{}")),editable:!0,has_translator_settings:!0})));this.sandbox.addModules(p),this.sandbox.removeModules([this]),this.$ctx.after(p),this.$ctx.remove()})}openAssetChooser(){const t=[{key:"ext",values:(0,kn.F6)()}],a=this.$ctx.data("asset");a&&t.push({key:"id",values:[a],inverted:!0});const r=(0,e.EY)(aa.l,{externalData:{id:this.blockId},multiSelectionAllowed:!1,filters:t});this.fire("openModal",{modifier:"flex",$content:r},["events"])}onAssetChooserAssetChosen(t){t&&t.externalData&&t.externalData.id===this.blockId&&(this.fire("closeModal",["events"]),t.screenIds&&t.screenIds.length>0&&this.setImage(t.screenIds[0],!0))}showEditorHints(){this.$editorHint.addClass("state-visible"),this.showOsSpecificKey()}hideEditorHints(){this.$editorHint.removeClass("state-visible")}showOsSpecificKey(){ao.n.getOs()===ao.n.OS_MAC?Is(".js-b-annotations__duplication-key-mac",this.$ctx).addClass("state-visible"):Is(".js-b-annotations__duplication-key-windows",this.$ctx).addClass("state-visible")}async openSettingsInSidebar(){var t;const a=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"annotations"}),{settings:r,targets:p}=await this.data.getBlock(this.blockId);r.mode=`${r.mode}`,(t=r.bubble)!=null||(r.bubble=ki),r.useGlobalSecuritySettings=`${r.downloadable_inherited}`=="true"?"yes":"no";const O=(L,W,X)=>{var ie,xe,Ae;if(X==="targets"){this.data.updateBlockTargets(this.blockId,L,W);return}switch(L){case"asset":this.setImage(W.value,W.source===wa._.Library);break;case"bubble":{const Ne=Ba(W);this.setBubble(Ne?Xn()(Ne).toRgbString():"");break}case"mode":this.setMode(W);break;case"border":this.setBorder(W);break;case"useGlobalSecuritySettings":{const Ne=((Ae=(xe=(ie=this.context.appearance)==null?void 0:ie.privacy)==null?void 0:xe.image)==null?void 0:Ae.download)==="enable";this.setDownloadable(W==="yes"?Ne:r.downloadable,W==="yes");break}case"downloadable":this.setDownloadable(W,!1);break;case"retina":this.setRetina(W);break}};window.emitter.emit("Guideline:setBlockSettingsSidebar",{settings:r,settingsStructure:io,targets:p,onSettingChanged:O,appBridge:a,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName)})}}const Ga=(0,en.hD)({});var _n=i(5181);class Hn extends u.j{static get BACKSPACE_KEY_CODE(){return 8}static get TABULATOR_KEY_CODE(){return 9}static get TABLE_COLUMN_COUNT(){return 4}on(t){this.sandbox.subscribe("events",this),this.blockId=this.$ctx.data("block"),this.sectionId=this.$ctx.data("sectionId"),this.displayName="Attributes";const a=_n("tbody td",this.$ctx);_n.each(a,(r,p)=>{_n(p).wrapInner('<div class="js-cell" data-editable="true"></div>')}),_n(document.body).hasClass("editor-enabled")&&this.onEditingEnabled(),t()}after(){this.$ctx.on("blur","td > [contenteditable]",()=>this.save()),this.$ctx.on("keydown","td > [contenteditable]",t=>{const a=_n(t.currentTarget);t.keyCode===Hn.BACKSPACE_KEY_CODE&&this.deleteEmptyRow(a),t.keyCode===Hn.TABULATOR_KEY_CODE&&!t.shiftKey&&this.addNewRow(a)})}deleteEmptyRow(t){const a=t.closest("tr");let r=0;_n(a).find("td").each((p,O)=>{_n(O).find("> div").html()===""&&r++,r===Hn.TABLE_COLUMN_COUNT&&(_n(a).remove(),r=0,this.save())})}addNewRow(t){const a=_n("tr",this.$ctx).length,r=_n("th",this.$ctx).length,p=t.parent().get(0).cellIndex,O=t.closest("tr").get(0).rowIndex;if(a===O+1&&r===p+1){const L=_n(`<tr>
                            <td><div class="js-cell" data-editable="true" contenteditable></div></td>
                            <td><div class="js-cell" data-editable="true" contenteditable></div></td>
                            <td><div class="js-cell" data-editable="true" contenteditable></div></td>
                            <td><div class="js-cell" data-editable="true" contenteditable></div></td>
                        </tr>`);_n("table",this.$ctx).append(L)}}save(){const t=[],a=[],r=_n("thead th",this.$ctx);_n.each(r,(O,L)=>{const W=_n(L);t[O]=W.data("field")});const p=_n("tbody tr",this.$ctx);_n.each(p,(O,L)=>{const W={};_n(L).children("td").each((X,ie)=>{W[t[X]]=_n(ie).find("> div").text()}),a.push(W)}),this.data.updateBlock(this.$ctx,{settings:{data:a}})}onEditingEnabled(){this.$ctx.hasClass("referenced")||(_n('.js-tbl-attributes [data-editable="true"]',this.$ctx).attr("contenteditable",!0),this.tpl.enableSanitizationOnPasting(this.$ctx,".js-cell[contenteditable]"))}onEditingDisabled(){this.$ctx.hasClass("referenced")||(this.tpl.disableSanitizationOnPasting(this.$ctx,".js-cell[contenteditable]"),_n('.js-tbl-attributes [data-editable="true"]',this.$ctx).removeAttr("contenteditable"))}async openSettingsInSidebar(){const t=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"attributes"}),{targets:a}=await this.data.getBlock(this.blockId),r=(p,O,L)=>{L==="targets"&&this.data.updateBlockTargets(this.blockId,p,O)};window.emitter.emit("Guideline:setBlockSettingsSidebar",{settingsStructure:Ga,settings:{},targets:a,onSettingChanged:r,appBridge:t,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName)})}}const Si=(0,x.I)(s=>(0,n.jsxs)("div",{className:"m-email",children:[(0,n.jsxs)("h5",{className:"m-email__title",children:[window.translate("ChecklistBlock_settingAssignAndNotifyViaMail"),s.name]}),(0,n.jsx)("a",{className:"m-email__notify",children:window.translate("ChecklistBlock_settingsYes")}),(0,n.jsx)("a",{className:"m-email__cancel",children:window.translate("ChecklistBlock_settingNoThanks")})]}));var Sa=i(77345),Li=i(23245);const ro=(0,x.I)(s=>{var t;return(0,n.jsx)("div",{className:"m-members",children:(0,n.jsx)("ul",{children:(t=s.collaborators)==null?void 0:t.map((a,r)=>(0,n.jsxs)("li",{className:"member-item","data-id":a.user_id,"data-name":a.name,"data-avatar":a.image,children:[(0,n.jsx)("div",{className:"member-avatar",children:(0,n.jsx)(Li.p,{imageUrl:a.preview_url_without_placeholder,gravatarHash:a.gravatar_hash,name:a.name,size:Sa.Z.SIZE_24})}),(0,n.jsx)("span",{className:"member-name",children:a.name})]},r))})})}),lo=(0,x.I)(s=>(0,n.jsxs)("li",{className:"b-checklist__item item-dirty",children:[(0,n.jsx)("div",{className:"col b-checklist__item__status js-item-status",children:(0,n.jsx)("i",{className:"icon-square-o"})}),(0,n.jsx)("div",{className:`col b-checklist__item--avater ${s.visible==1?"state-hide":""}`,"data-avatar":"https://secure.gravatar.com/avatar/6170702e66726f6e746966792e636f6d?d=mm&s=40","data-tooltip":"Unassigned",children:(0,n.jsx)("img",{src:"https://secure.gravatar.com/avatar/6170702e66726f6e746966792e636f6d?d=mm&s=40","aria-hidden":"true",alt:"avatar"})}),(0,n.jsxs)("div",{className:"col b-checklist__item--actions",children:[(0,n.jsx)("i",{className:"ca-icon--trash ca-icon--sm js-item-delete"}),(0,n.jsx)("i",{className:"ca-icon--move ca-icon--sm drag-handle","aria-hidden":"true"})]}),(0,n.jsx)("div",{className:"col b-checklist__item__content",children:(0,n.jsx)("span",{contentEditable:!0,"data-editable":"true",placeholder:window.translate("ChecklistBlock_taskPlaceholder")})})]})),ge=(0,x.I)(s=>(0,n.jsxs)("div",{className:"visibility__status",children:[(0,n.jsx)("i",{className:`${s.visible==0?" ca-icon--view-slash":" ca-icon--view"}`})," ",(0,n.jsx)("span",{className:"visibility__desc",children:s.visible==0?window.translate("ChecklistBlock_settingVisibilityEditors"):window.translate("ChecklistBlock_settingVisibilityEveryone")})]})),Q=(0,en.hD)({security:[{id:"visibility",type:"segmentedControls",label:"Visible for",info:"Switch between Block visibility permissions",defaultValue:"public",choices:[{value:"public",label:"Everyone"},{value:"private",label:"Editors only"}]}]});var J=i(5181);class we extends u.j{on(t){this.sandbox.subscribe("events",this),this.blockId=this.$ctx.data("block"),this.sectionId=this.$ctx.data("sectionId"),this.displayName="Checklist",J(document.body).hasClass("editor-enabled")&&this.onEditingEnabled(),this.registerEvents(),t()}registerEvents(){const t=J(document.body).data("project");this.$ctx.on("click",".js-item-status",a=>{const r=J(a.currentTarget),p=r.find("i"),O=r.closest(".b-checklist__item");if(!J(document.body).hasClass("editor-enabled")||this.$ctx.hasClass("referenced")||O.hasClass("item-dirty"))return!1;const L=new Date,W=Date.UTC(L.getUTCFullYear(),L.getUTCMonth(),L.getUTCDate(),L.getUTCHours(),L.getUTCMinutes(),L.getUTCSeconds(),L.getUTCMilliseconds());O.hasClass("state-checked")?(p.addClass("icon-square-o"),p.removeClass("icon-check-square-o"),O.removeClass("state-checked"),O.find(".b-checklist__item__content > span:not(.meta)").attr("contenteditable","true"),O.find(".b-checklist__item__content .meta").remove(),O.removeAttr("data-checked")):O.find("span").text().length>0&&(p.removeClass("icon-square-o"),p.addClass("icon-check-square-o"),O.addClass("state-checked"),O.find(".b-checklist__item__content > span:not(.meta)").removeAttr("contenteditable"),O.find(".b-checklist__item__content").append('<span class="meta">a few seconds ago</span>'),O.attr("data-checked",W)),this.update()}),this.$ctx.on("click",".b-checklist__item--avater > img",a=>{const r=J(a.currentTarget),p=r.closest(".b-checklist__item");if(!J(document.body).hasClass("editor-enabled")||this.$ctx.hasClass("referenced")||p.hasClass("item-dirty")||p.hasClass("state-checked"))return!1;const O=r.closest(".b-checklist__item--avater");let W=this.$ctx.find(".m-members");W.length>0?W.remove():this.loadCollaborators(t,X=>{X.tpl=this.tpl,W=J((0,e.EY)(ro,X)),O.append(W),W.velocity("slideDown",{duration:200})})}),this.$ctx.on("click",".member-item",a=>{const r=J(a.currentTarget),p=r.closest(".b-checklist__item .b-checklist__item--avater"),O={name:r.data("name"),id:r.data("id"),avatar:r.data("avatar")};p.data("name",O.name).data("id",O.id).data("avatar",O.avatar),p.attr("data-tooltip",`Assigned to ${O.name}`),p.find("img").attr("src",O.avatar),this.update();const L={name:O.name};p.find(".m-members").empty();const W=J((0,e.EY)(Si,L));p.find(".m-members").append(W)}),this.$ctx.on("blur",".b-checklist__item.item-dirty .b-checklist__item__content > span",a=>{const r=J(a.currentTarget);return r.text().length>0&&(r.closest(".b-checklist__item").removeClass("item-dirty"),r.closest(".b-checklist__item").addClass("b-checklist__draggable"),this.update(),this.renderTemplate(),setTimeout(()=>{this.$ctx.find(".b-checklist__item.item-dirty .b-checklist__item__content > span").trigger("focus")},10)),!1}),this.$ctx.on("blur",".b-checklist__item .b-checklist__item__content > span",a=>(J(a.currentTarget).text().length>0&&this.update(),!1)),this.$ctx.on("click",".js-item-delete",a=>{const r=J(a.currentTarget);if(r.closest(".b-checklist__item").hasClass("item-dirty"))return!1;r.closest(".b-checklist__item").remove(),this.update()}),this.$ctx.on("keypress",".b-checklist__item__content > span, .b-checklist__head h3",a=>{const r=J(a.currentTarget);if(a.keyCode===13)return r.trigger("blur"),window.getSelection().removeAllRanges(),!1}),this.$ctx.on("blur",".b-checklist__head h3",a=>{J(a.currentTarget).text().length>0&&this.update()}),this.$ctx.on("click",".visibility",()=>{const a=this.$ctx.attr("data-visibility")==="public";this.setEditorVisibility(!a)}),this.$ctx.on("click",".m-email__notify",a=>{const r=J(a.currentTarget),p={block_id:this.blockId,item_id:r.closest(".b-checklist__item").attr("data-element"),url:J(document.body).attr("share-url-default")};this.data.post("/api/task/notify/",p).then(O=>{O.success?this.$ctx.find(".m-email__cancel").trigger("click"):this.displayError("Error","Something went wrong. Please contact support@frontify.com!")})}),this.$ctx.on("click",".m-email__cancel",()=>this.$ctx.find(".m-members").remove())}loadCollaborators(t,a){return this.data.get(`/api/collaborator/list/${t}`).then(r=>{r.success&&(J.each(r.collaborators,(p,O)=>{O.name||(O.name=O.email)}),a(r))}),!1}enableSorting(t){this.sortable=Vs.Ay.create(t,{group:`checklist-${this.blockId}`,ghostClass:"sortable-ghost",handle:".drag-handle",draggable:".b-checklist__draggable",onUpdate:()=>{if(!J(document.body).hasClass("editor-enabled")||this.$ctx.hasClass("referenced"))return!1;this.update()}})}after(){const t=this.$ctx.find('[data-sortable="true"]');J.each(t,(a,r)=>{this.enableSorting(r)}),this.renderVisibility(),this.renderTemplate(),this.reOrderItems()}update(){if(this.reOrderItems(),!J(document.body).hasClass("editor-enabled"))return!1;const t=[],a=this.$ctx.find(".item-list .b-checklist__item");J.each(a,(p,O)=>{const L=J(O);if(L.hasClass("item-dirty"))return!1;const W={status:L.hasClass("state-checked"),content:L.find(".b-checklist__item__content > span:not(.meta)").text(),date_checked:L.attr("data-checked")?L.attr("data-checked"):null,user:{name:L.find(".b-checklist__item--avater").data("name"),id:L.find(".b-checklist__item--avater").data("id"),avatar:L.find(".b-checklist__item--avater").data("avatar")}};t.push(W)});const r={settings:{title:this.$ctx.find(".b-checklist__head h3").text(),visible:this.$ctx.attr("data-visibility")==="public",items:t}};this.data.updateBlock(this.$ctx,r)}onEditingEnabled(){J('[data-editable="true"]',this.$ctx).attr("contenteditable","true"),this.tpl.enableSanitizationOnPasting(this.$ctx,"[contenteditable]")}onEditingDisabled(){this.tpl.disableSanitizationOnPasting(this.$ctx,"[contenteditable]"),J('[data-editable="true"]',this.$ctx).removeAttr("contenteditable")}renderVisibility(){const t=this.$ctx.find(".visibility"),a=this.$ctx.attr("data-visibility")==="public";t.html((0,e.EY)(ge,{visible:a}))}renderTemplate(){const t=this.$ctx.attr("data-visibility")==="public";this.$ctx.find(".item-list").append((0,e.EY)(lo,{visible:t}))}reOrderItems(){const t=this.$ctx.find(".item-list li");J.each(t,(a,r)=>{J(r).attr("data-element",a+1)})}displayError(t,a){(0,At.K)({title:t,text:a,type:"error",showCancelButton:!1,confirmButtonText:"OK",closeOnConfirm:!0},()=>null)}setEditorVisibility(t){t?(this.$ctx.attr("data-visibility","public"),this.$ctx.find(".b-checklist__item--avater").addClass("state-hide")):(this.$ctx.attr("data-visibility","private"),this.$ctx.find(".b-checklist__item--avater").removeClass("state-hide")),this.$ctx.find(".visibility").html((0,e.EY)(ge,{visible:t})),this.renderVisibility(),this.update()}async openSettingsInSidebar(){const t=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"checklist"}),{settings:a,targets:r}=await this.data.getBlock(this.blockId);a.visibility=a.visible?"public":"private";const p=(O,L,W)=>{if(W==="targets"){this.data.updateBlockTargets(this.blockId,O,L);return}O==="visibility"&&this.setEditorVisibility(L==="public")};window.emitter.emit("Guideline:setBlockSettingsSidebar",{settings:a,settingsStructure:Q,targets:r,onSettingChanged:p,appBridge:t,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName)})}}var it=i(84309),Ds=i.n(it),jn=i(49589),Cs=i(81178),Wt=i(74819),Mn=i(93791),Ha=i(50448),Ti=i(26725);const Ci=(0,x.I)(()=>(0,n.jsx)("div",{"data-tooltip":window.translate("ColorBlock_adobe_creative_cloud_add_color_palette"),children:(0,n.jsx)(Ti.t,{icon:Mn.l.ICON_ADOBECREATIVECLOUD,size:Ha.t.ICON_BUTTON_SIZE_MEDIUM,style:Ha.t.STYLE_DEFAULT,background:Ha.t.BACKGROUND_WHITE})}));var _a=Object.defineProperty,Dn=Object.defineProperties,ti=Object.getOwnPropertyDescriptors,Ta=Object.getOwnPropertySymbols,Ho=Object.prototype.hasOwnProperty,$o=Object.prototype.propertyIsEnumerable,Ca=(s,t,a)=>t in s?_a(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,Sn=(s,t)=>{for(var a in t||(t={}))Ho.call(t,a)&&Ca(s,a,t[a]);if(Ta)for(var a of Ta(t))$o.call(t,a)&&Ca(s,a,t[a]);return s},oa=(s,t)=>Dn(s,ti(t));const bo=(0,x.I)(s=>(0,n.jsxs)("li",{className:`color js-b-color-item js-b-color-item__sortable${s.opacity<100?" color-transparent":""}`,"data-id":s.id,"data-color-opaque":`rgb(${s.r},${s.g},${s.b})`,"data-color":s.css_value,children:[(0,n.jsx)("div",{className:"color-preview-wrapper",children:(0,n.jsx)("div",{className:"color-preview js-b-color-item__trigger",children:s.opacity<100?(0,n.jsx)("div",{className:"color-preview-transparent"}):null})}),(0,n.jsxs)("div",{className:"b-color__name__wrapper js-b-color-item__name-tooltip",children:[(0,n.jsx)("span",oa(Sn({className:"color-name","data-field":"name","data-editable":"true"},s.contenteditable?{contentEditable:"true"}:{}),{title:s.name,children:s.name})),s.opacity<100?(0,n.jsxs)("span",{className:"color-opacity",children:["@",s.opacity,"%"]}):null]}),(0,n.jsxs)("ul",{className:"list-colorspaces js-b-color__list-colorspaces",children:[(0,n.jsx)("li",{className:"state-is-visible js-state-is-visible",children:(0,n.jsxs)("span",{className:"color-value color-value-hex",children:[(0,n.jsx)("span",{className:"color-mode",children:"HEX"}),(0,n.jsxs)("span",{"data-field":"hex","data-prefix":"#",children:["#",s.hex]})]})}),(0,n.jsx)("li",{className:"state-is-visible js-state-is-visible",children:(0,n.jsxs)("span",{className:"color-value color-value-rgb",children:[(0,n.jsxs)("span",{className:"color-mode",children:["RGB",s.opacity<100?"A":null]}),(0,n.jsxs)("span",{className:"color__wrapper",children:[(0,n.jsx)("span",{className:"r","data-field":"r",children:s.r}),","," ",(0,n.jsx)("span",{className:"g","data-field":"g",children:s.g}),","," ",(0,n.jsx)("span",{className:"b","data-field":"b",children:s.b}),s.opacity<100?(0,n.jsxs)(n.Fragment,{children:[", ",(0,n.jsx)("span",{className:"a",children:s.opacity_css})]}):null]})]})}),(0,n.jsx)("li",oa(Sn({},s.field_cmyk?{className:"state-is-visible js-state-is-visible"}:{}),{children:(0,n.jsxs)("span",{className:"color-value color-value-cmyk",children:[(0,n.jsx)("span",{className:"color-mode",children:"CMYK"}),s.opacity==100?(0,n.jsxs)("span",{className:"color__wrapper",children:[(0,n.jsx)("span",{"data-editable":"true",className:"c","data-field":"c",children:s.c?s.c:"0"}),","," ",(0,n.jsx)("span",{"data-editable":"true",className:"m","data-field":"m",children:s.m?s.m:"0"}),","," ",(0,n.jsx)("span",{"data-editable":"true",className:"y","data-field":"y",children:s.y?s.y:"0"}),","," ",(0,n.jsx)("span",{"data-editable":"true",className:"k","data-field":"k",children:s.k?s.k:"0"})]}):null,!s.cmyk||s.cmyk==" "?(0,n.jsx)("span",{className:"b-color-tooltip js-b-color-tooltip","data-tooltip":window.translate("ColorBlockComponent_cmyk_tooltip"),children:(0,n.jsx)("i",{className:"ca-icon--callout"})}):null]})})),(0,n.jsx)("li",oa(Sn({},s.field_variable?{className:"state-is-visible js-state-is-visible"}:{}),{children:(0,n.jsxs)("span",{className:"color-value color-value-variable","data-prefix":s.prefix,title:`${s.prefix}${s.name_css}`,children:[(0,n.jsx)("span",{className:"color-mode",children:s.prefix=="$"?"SCSS":"LESS"}),(0,n.jsxs)("span",{"data-editable":"true","data-field":"name_css","data-prefix":s.prefix,children:[s.prefix,s.name_css]})]})})),(0,n.jsx)("li",oa(Sn({},s.field_ral?{className:"state-is-visible js-state-is-visible"}:{}),{children:(0,n.jsxs)("span",{className:"color-value color-value-ral",children:[(0,n.jsx)("span",{className:"color-mode",children:"RAL"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"ral",children:s.ral?s.ral:null}),!s.ral||s.ral==" "?(0,n.jsx)("span",{className:"b-color-tooltip js-b-color-tooltip","data-tooltip":`${window.translate("ColorBlockComponent_missingAutomaticConversion")}
${window.translate("ColorBlockComponent_enterManualValue")}`,children:(0,n.jsx)("i",{className:"ca-icon--callout"})}):null]})})),(0,n.jsx)("li",oa(Sn({},s.field_oracal?{className:"state-is-visible js-state-is-visible"}:{}),{children:(0,n.jsxs)("span",{className:"color-value color-value-oracal",children:[(0,n.jsx)("span",{className:"color-mode",children:"ORA"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"oracal",children:s.oracal?s.oracal:null}),!s.oracal||s.oracal==" "?(0,n.jsx)("span",{className:"b-color-tooltip js-b-color-tooltip","data-tooltip":`${window.translate("ColorBlockComponent_missingAutomaticConversion")}
${window.translate("ColorBlockComponent_enterManualValue")}`,children:(0,n.jsx)("i",{className:"ca-icon--callout"})}):null]})})),(0,n.jsx)("li",oa(Sn({},s.field_pantone?{className:"state-is-visible js-state-is-visible"}:{}),{children:(0,n.jsxs)("span",{className:"color-value color-value-pantone",children:[(0,n.jsx)("span",{className:"color-mode",children:"PMS"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"pantone",children:s.pantone?s.pantone:null}),!s.pantone||s.pantone==" "?(0,n.jsx)("span",{className:"b-color-tooltip js-b-color-tooltip","data-tooltip":`${window.translate("ColorBlockComponent_missingAutomaticConversion")}
${window.translate("ColorBlockComponent_enterManualValue")}`,children:(0,n.jsx)("i",{className:"ca-icon--callout"})}):null]})})),(0,n.jsx)("li",oa(Sn({},s.field_pantone_coated?{className:"state-is-visible js-state-is-visible"}:{}),{children:(0,n.jsxs)("span",{className:"color-value color-value-pantone_coated",children:[(0,n.jsx)("span",{className:"color-mode",children:"PMS-C"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"pantone_coated",children:s.pantone_coated?s.pantone_coated:null}),!s.pantone_coated||s.pantone_coated==" "?(0,n.jsx)("span",{className:"b-color-tooltip js-b-color-tooltip","data-tooltip":`${window.translate("ColorBlockComponent_missingAutomaticConversion")}
${window.translate("ColorBlockComponent_enterManualValue")}`,children:(0,n.jsx)("i",{className:"ca-icon--callout"})}):null]})})),(0,n.jsx)("li",oa(Sn({},s.field_pantone_uncoated?{className:"state-is-visible js-state-is-visible"}:{}),{children:(0,n.jsxs)("span",{className:"color-value color-value-pantone_uncoated",children:[(0,n.jsx)("span",{className:"color-mode",children:"PMS-U"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"pantone_uncoated",children:s.pantone_uncoated?s.pantone_uncoated:null}),!s.pantone_uncoated||s.pantone_uncoated==" "?(0,n.jsx)("span",{className:"b-color-tooltip js-b-color-tooltip","data-tooltip":`${window.translate("ColorBlockComponent_missingAutomaticConversion")}
${window.translate("ColorBlockComponent_enterManualValue")}`,children:(0,n.jsx)("i",{className:"ca-icon--callout"})}):null]})})),(0,n.jsx)("li",oa(Sn({},s.field_pantone_cp?{className:"state-is-visible js-state-is-visible"}:{}),{children:(0,n.jsxs)("span",{className:"color-value color-value-pantone_cp",children:[(0,n.jsx)("span",{className:"color-mode",children:"PMS-CP"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"pantone_cp",children:s.pantone_cp?s.pantone_cp:null}),!s.pantone_cp||s.pantone_cp==" "?(0,n.jsx)("span",{className:"b-color-tooltip js-b-color-tooltip","data-tooltip":`${window.translate("ColorBlockComponent_missingAutomaticConversion")}
${window.translate("ColorBlockComponent_enterManualValue")}`,children:(0,n.jsx)("i",{className:"ca-icon--callout"})}):null]})})),(0,n.jsx)("li",oa(Sn({},s.field_pantone_plastics?{className:"state-is-visible js-state-is-visible"}:{}),{children:(0,n.jsxs)("span",{className:"color-value color-value-pantone_plastics",children:[(0,n.jsx)("span",{className:"color-mode",children:"PMS-PQ"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"pantone_plastics",children:s.pantone_plastics?s.pantone_plastics:null}),!s.pantone_plastics||s.pantone_plastics==" "?(0,n.jsx)("span",{className:"b-color-tooltip js-b-color-tooltip","data-tooltip":`${window.translate("ColorBlockComponent_missingAutomaticConversion")}
${window.translate("ColorBlockComponent_enterManualValue")}`,children:(0,n.jsx)("i",{className:"ca-icon--callout"})}):null]})})),(0,n.jsx)("li",oa(Sn({},s.field_pantone_textile?{className:"state-is-visible js-state-is-visible"}:{}),{children:(0,n.jsxs)("span",{className:"color-value color-value-pantone_textile",children:[(0,n.jsx)("span",{className:"color-mode",children:"PMS-TCX"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"pantone_textile",children:s.pantone_textile?s.pantone_textile:null}),!s.pantone_textile||s.pantone_textile==" "?(0,n.jsx)("span",{className:"b-color-tooltip js-b-color-tooltip","data-tooltip":`${window.translate("ColorBlockComponent_missingAutomaticConversion")}
${window.translate("ColorBlockComponent_enterManualValue")}`,children:(0,n.jsx)("i",{className:"ca-icon--callout"})}):null]})})),(0,n.jsx)("li",oa(Sn({},s.field_cmyk_coated?{className:"state-is-visible js-state-is-visible"}:{}),{children:(0,n.jsxs)("span",{className:"color-value color-value-cmyk_coated",children:[(0,n.jsx)("span",{className:"color-mode",children:"CMYK-C"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"cmyk_coated",children:s.cmyk_coated?s.cmyk_coated:null}),!s.cmyk_coated||s.cmyk_coated==" "?(0,n.jsx)("span",{className:"b-color-tooltip js-b-color-tooltip","data-tooltip":`${window.translate("ColorBlockComponent_missingAutomaticConversion")}
${window.translate("ColorBlockComponent_enterManualValue")}`,children:(0,n.jsx)("i",{className:"ca-icon--callout"})}):null]})})),(0,n.jsx)("li",oa(Sn({},s.field_cmyk_uncoated?{className:"state-is-visible js-state-is-visible"}:{}),{children:(0,n.jsxs)("span",{className:"color-value color-value-cmyk_uncoated",children:[(0,n.jsx)("span",{className:"color-mode",children:"CMYK-U"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"cmyk_uncoated",children:s.cmyk_uncoated?s.cmyk_uncoated:null}),!s.cmyk_uncoated||s.cmyk_uncoated==" "?(0,n.jsx)("span",{className:"b-color-tooltip js-b-color-tooltip","data-tooltip":`${window.translate("ColorBlockComponent_missingAutomaticConversion")}
${window.translate("ColorBlockComponent_enterManualValue")}`,children:(0,n.jsx)("i",{className:"ca-icon--callout"})}):null]})})),(0,n.jsx)("li",oa(Sn({},s.field_cmyk_newspaper?{className:"state-is-visible js-state-is-visible"}:{}),{children:(0,n.jsxs)("span",{className:"color-value color-value-cmyk_newspaper",children:[(0,n.jsx)("span",{className:"color-mode",children:"CMYK-N"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"cmyk_newspaper",children:s.cmyk_newspaper?s.cmyk_newspaper:null}),!s.cmyk_newspaper||s.cmyk_newspaper==" "?(0,n.jsx)("span",{className:"b-color-tooltip js-b-color-tooltip","data-tooltip":`${window.translate("ColorBlockComponent_missingAutomaticConversion")}
${window.translate("ColorBlockComponent_enterManualValue")}`,children:(0,n.jsx)("i",{className:"ca-icon--callout"})}):null]})})),(0,n.jsx)("li",oa(Sn({},s.field_ncs?{className:"state-is-visible js-state-is-visible"}:{}),{children:(0,n.jsxs)("span",{className:"color-value color-value-ncs",children:[(0,n.jsx)("span",{className:"color-mode",children:"NCS"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"ncs",children:s.ncs?s.ncs:null}),!s.ncs||s.ncs==" "?(0,n.jsx)("span",{className:"b-color-tooltip js-b-color-tooltip","data-tooltip":`${window.translate("ColorBlockComponent_missingAutomaticConversion")}
${window.translate("ColorBlockComponent_enterManualValue")}`,children:(0,n.jsx)("i",{className:"ca-icon--callout"})}):null]})})),(0,n.jsx)("li",oa(Sn({},s.field_hks?{className:"state-is-visible js-state-is-visible"}:{}),{children:(0,n.jsxs)("span",{className:"color-value color-value-hks",children:[(0,n.jsx)("span",{className:"color-mode",children:"HKS"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"hks",children:s.hks?s.hks:null}),!s.hks||s.hks==" "?(0,n.jsx)("span",{className:"b-color-tooltip js-b-color-tooltip","data-tooltip":`${window.translate("ColorBlockComponent_missingAutomaticConversion")}
${window.translate("ColorBlockComponent_enterManualValue")}`,children:(0,n.jsx)("i",{className:"ca-icon--callout"})}):null]})})),(0,n.jsx)("li",oa(Sn({},s.field_three_m?{className:"state-is-visible js-state-is-visible"}:{}),{children:(0,n.jsxs)("span",{className:"color-value color-value-three_m",children:[(0,n.jsx)("span",{className:"color-mode",children:"3M"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"three_m",children:s.three_m?s.three_m:null}),!s.three_m||s.three_m==" "?(0,n.jsx)("span",{className:"b-color-tooltip js-b-color-tooltip","data-tooltip":`${window.translate("ColorBlockComponent_missingAutomaticConversion")}
${window.translate("ColorBlockComponent_enterManualValue")}`,children:(0,n.jsx)("i",{className:"ca-icon--callout"})}):null]})})),(0,n.jsx)("li",oa(Sn({},s.field_lab?{className:"state-is-visible js-state-is-visible"}:{}),{children:(0,n.jsxs)("span",{className:"color-value color-value-lab",children:[(0,n.jsx)("span",{className:"color-mode",children:"LAB"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"lab",children:s.lab?s.lab:null}),!s.lab||s.lab==" "?(0,n.jsx)("span",{className:"b-color-tooltip js-b-color-tooltip","data-tooltip":`${window.translate("ColorBlockComponent_missingAutomaticConversion")}
${window.translate("ColorBlockComponent_enterManualValue")}`,children:(0,n.jsx)("i",{className:"ca-icon--callout"})}):null]})}))]}),s.editable?(0,n.jsx)("button",{className:"btn-delete-color cm-actions__action-wrap",title:window.translate("ColorBlock_delete_color"),"aria-label":window.translate("ColorBlock_delete_color"),children:(0,n.jsx)("i",{className:"ca-icon--trash ca-icon--md cm-actions__action"})}):null,(0,n.jsx)("div",{className:"b-color__picker-edit-wrapper js-b-color__picker-edit-wrapper"})]})),Bi=(0,x.I)(()=>(0,n.jsx)("ul",{className:"row colors b-color__colors-add js-b-color__colors","data-sortable":"false",children:(0,n.jsxs)("li",{className:"color b-color__add js-b-color__add",children:[(0,n.jsx)("div",{className:"color-preview-wrapper",children:(0,n.jsx)("div",{className:"color-preview",children:"+"})}),(0,n.jsx)("div",{className:"b-color__name__wrapper",children:(0,n.jsx)("span",{className:"color-name",children:"Green"})}),(0,n.jsxs)("ul",{className:"list-colorspaces",children:[(0,n.jsx)("li",{children:(0,n.jsxs)("span",{className:"color-value color-value-hex",children:[(0,n.jsx)("span",{className:"color-mode",children:"HEX"}),(0,n.jsx)("span",{"data-field":"hex","data-prefix":"#",children:"#00ff00"})]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("span",{className:"color-value color-value-rgb",children:[(0,n.jsx)("span",{className:"color-mode",children:"RGB"}),(0,n.jsxs)("span",{className:"color__wrapper",children:[(0,n.jsx)("span",{className:"r","data-field":"r",children:"0"}),","," ",(0,n.jsx)("span",{className:"g","data-field":"g",children:"255"}),","," ",(0,n.jsx)("span",{className:"b","data-field":"b",children:"0"})]})]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("span",{className:"color-value color-value-cmyk",children:[(0,n.jsx)("span",{className:"color-mode",children:"CMYK"}),(0,n.jsxs)("span",{className:"wrapper",children:[(0,n.jsx)("span",{"data-editable":"true",className:"c","data-field":"c",children:"0"}),","," ",(0,n.jsx)("span",{"data-editable":"true",className:"m","data-field":"m",children:"0"}),","," ",(0,n.jsx)("span",{"data-editable":"true",className:"y","data-field":"y",children:"0"}),","," ",(0,n.jsx)("span",{"data-editable":"true",className:"k","data-field":"k",children:"0"})]})]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("span",{className:"color-value color-value-variable","data-prefix":"$",title:"$green",children:[(0,n.jsx)("span",{className:"color-mode",children:"SCSS"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"name_css",contentEditable:"true",children:"$green"})]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("span",{className:"color-value color-value-ral",children:[(0,n.jsx)("span",{className:"color-mode",children:"RAL"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"ral",children:"Ral"})]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("span",{className:"color-value color-value-oracal",children:[(0,n.jsx)("span",{className:"color-mode",children:"ORA"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"oracal",children:"Oracal"})]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("span",{className:"color-value color-value-pantone",children:[(0,n.jsx)("span",{className:"color-mode",children:"PMS"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"pantone",children:"Pantone"})]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("span",{className:"color-value color-value-pantone_coated",children:[(0,n.jsx)("span",{className:"color-mode",children:"PMS-C"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"pantone_coated",children:"PMS-C"})]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("span",{className:"color-value color-value-pantone_uncoated",children:[(0,n.jsx)("span",{className:"color-mode",children:"PMS-U"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"pantone_uncoated",children:"PMS-U"})]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("span",{className:"color-value color-value-pantone_cp",children:[(0,n.jsx)("span",{className:"color-mode",children:"PMS-CP"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"pantone_cp",children:"PMS-CP"})]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("span",{className:"color-value color-value-pantone_plastics",children:[(0,n.jsx)("span",{className:"color-mode",children:"PMS-PQ"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"pantone_plastics",children:"PMS-PQ"})]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("span",{className:"color-value color-value-pantone_textile",children:[(0,n.jsx)("span",{className:"color-mode",children:"PMS-TCX"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"pantone_textile",children:"PMS-TCX"})]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("span",{className:"color-value color-value-cmyk_coated",children:[(0,n.jsx)("span",{className:"color-mode",children:"CMYK-C"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"cmyk_coated",children:"CMYK-C"})]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("span",{className:"color-value color-value-cmyk_uncoated",children:[(0,n.jsx)("span",{className:"color-mode",children:"CMYK-U"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"cmyk_uncoated",children:"CMYK-U"})]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("span",{className:"color-value color-value-cmyk_newspaper",children:[(0,n.jsx)("span",{className:"color-mode",children:"CMYK-N"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"cmyk_newspaper",children:"CMYK-N"})]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("span",{className:"color-value color-value-ncs",children:[(0,n.jsx)("span",{className:"color-mode",children:"NCS"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"ncs",children:"NCS"})]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("span",{className:"color-value color-value-hks",children:[(0,n.jsx)("span",{className:"color-mode",children:"HKS"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"hks",children:"HKS"})]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("span",{className:"color-value color-value-three_m",children:[(0,n.jsx)("span",{className:"color-mode",children:"3M"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"three_m",children:"3M"})]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("span",{className:"color-value color-value-lab",children:[(0,n.jsx)("span",{className:"color-mode",children:"LAB"}),(0,n.jsx)("span",{"data-editable":"true","data-field":"lab",children:"LAB"})]})})]})]})})),ar=(0,x.I)(()=>(0,n.jsx)(H.X,{id:"color",label:window.translate("ColorBlock_settings_color"),picker:!0,closeOnClickOutsidePicker:!0,preview_template:Bi,value:"#407f7f"})),co=(0,x.I)(()=>(0,n.jsx)(H.X,{id:"color",label:"",picker:!0,closeOnClickOutsidePicker:!0,value:"#407f7f"})),Mi=(0,en.hD)({main:[{id:"view",type:"dropdown",choices:[{label:"Drops",value:"grid",icon:"Drops"},{label:"List",value:"list",icon:"ListBullet"},{label:"Cards",value:"card",icon:"Card"}],defaultValue:"grid",size:"large"}],basics:[{id:"colorspaces",type:"checklist",choices:[],label:"Colorspaces",defaultValue:["hex","rgb"],showClearAndSelectAllButtons:!0,columns:2}]});var on=i(5181);class No extends u.j{constructor(){super(...arguments),this.$items=null,this.$placeholder=null,this.sortable=null,this.clip=null,this.colorspaces=[],this.editing=!1,this.availableColorSpaces=[{name:"variable",displayName:"SCSS/LESS"},{name:"ral",displayName:"RAL"},{name:"pantone",displayName:"Pantone"},{name:"pantone_coated",displayName:"Pantone Coated"},{name:"pantone_uncoated",displayName:"Pantone Uncoated"},{name:"pantone_cp",displayName:"Pantone CP"},{name:"pantone_plastics",displayName:"Pantone Plastics"},{name:"pantone_textile",displayName:"Pantone Textile"},{name:"oracal",displayName:"Oracal"},{name:"cmyk",displayName:"CMYK",tooltip:{content:window.translate("ColorBlockComponent_cmyk_tooltip")}},{name:"cmyk_coated",displayName:"CMYK Coated"},{name:"cmyk_uncoated",displayName:"CMYK Uncoated"},{name:"cmyk_newspaper",displayName:"CMYK Newspaper"},{name:"ncs",displayName:"NCS"},{name:"hks",displayName:"HKS"},{name:"three_m",displayName:"3M"},{name:"lab",displayName:"LAB"}]}on(t){const a=on(document.body),r=on(".document");this.isReferenced=this.$ctx.data("reference-token")!==void 0,this.sandbox.subscribe("events",this),this.$items=on(".data .colors",this.$ctx),this.$placeholder=on(".placeholder",this.$ctx),this.$paletteActions=this.$ctx.find(".js-palette-actions"),this.adobeCreativeCloudLibrariesIntegrationEnabled=a.data("adobeCreativeCloudLibrariesIntegrationEnabled")===1,this.blockId=this.$ctx.data("block"),this.sectionId=this.$ctx.data("sectionId"),this.displayName="Colors",r.data("editing")&&a.hasClass("editor-enabled")&&(on('[data-editable="true"]',this.$ctx).attr("contenteditable",!0),this.$ctx.find(".js-b-color-cloak-in-edit").hide()),this.$ctx.on("blur",'.js-palette-title[data-editable="true"]',p=>{const O=on(p.currentTarget),L={name:O.text(),language:(0,Wt.YZ)()||void 0},W=L.name===""?"true":"false";O.attr("data-empty",W),this.data.patch(`/api/project-color-palette/${this.$ctx.data("palette")}`,L)}),this.$ctx.on("blur",'.js-palette-description[data-editable="true"]',p=>{const O=on(p.currentTarget),L={description:O.text(),language:(0,Wt.YZ)()||void 0},W=L.description===""?"true":"false";O.attr("data-empty",W),this.data.patch(`/api/project-color-palette/${this.$ctx.data("palette")}`,L)}),this.$ctx.on("focus",'.js-palette-title[data-empty="true"], .js-palette-description[data-empty="true"]',p=>{on(p.currentTarget).text("").attr("data-empty","false")}),this.$ctx.on("blur",'.colors [data-editable="true"]',p=>{const O=on(p.currentTarget),L=O.parents(".color"),W=O.data("field");if(W){const X={language:(0,Wt.YZ)()||void 0};X[W]=O.text(),this.data.post(`/api/color/update/${L.data("id")}`,X).then(ie=>{if(ie.success){O.attr("data-empty",!1);const xe=ie.color[W],Ae=O.data("prefix"),Ne=Ae?`${Ae}${xe}`:xe;O.text(Ne),W==="hex"&&(L.find(".color-value-rgb .r").text(ie.color.r),L.find(".color-value-rgb .g").text(ie.color.g),L.find(".color-value-rgb .b").text(ie.color.b),L.find(".color-preview").css("background",`#${ie.color.hex}`))}else console.error("color update failed")})}}),this.$ctx.on("keydown",'[data-editable="true"]',p=>{if(p.keyCode===13)return on(p.currentTarget).trigger("blur"),!1}),this.$ctx.on("click",".js-b-color-item__trigger",p=>{if(!a.hasClass("editor-enabled")||this.isReferenced)return!1;const O=on(p.currentTarget).parents(".js-b-color-item"),L=O.find('[data-field="name_css"]'),W=L.data("prefix");this.$ctx.find(".js-b-color__picker-edit-wrapper").html(""),O.find(".js-b-color__picker-edit-wrapper").html((0,e.EY)(co)),this.fixPickerAlignment(),O.find(".js-co-settings__setting").data("color",O.data("color"));const X=new y.D(O,this.sandbox);X.enter(X.getFirstSetting().$ctx),X.getSetting("color").saved=ie=>{const xe=Xn()(Ba(ie.color)),Ae=xe.toRgb(),Ne={palette:this.$ctx.data("palette"),hex:xe.toHex(),r:Ae.r,g:Ae.g,b:Ae.b,alpha:parseInt(Ae.a*255)};this.data.post(`/api/color/update/${O.data("id")}`,Ne).then(He=>{const Je=He.color;if(He.success){Je.name=O.find('[data-field="name"]').text(),Je.prefix=W,Je.name_css=L.text().replace(W,""),Je.id=Je.color,Je.contenteditable=!0;const vt=on((0,e.EY)(bo,Je)),Dt=Je.opacity<100?".color-preview-transparent":".color-preview";vt.find(Dt).css({backgroundColor:xe.toRgbString()}),O.replaceWith(vt)}else console.error("color update failed")})}}),t()}showColorTooltips(t){t.find(".js-b-color-item__name-tooltip").each((a,r)=>{const p=on(r),O=p.find(".color-name").text();p.attr("data-tooltip",O)})}hideColorTooltips(t){t.find(".js-b-color-item__name-tooltip").removeAttr("data-tooltip")}enableSorting(t){this.sortable=Vs.Ay.create(t,{group:`colors-${this.$ctx.data("palette")}`,ghostClass:"sortable-ghost",handle:".color-preview",onStart:()=>{this.$add=this.$ctx.find(".js-b-color__colors:visible .js-b-color__add-wrapper"),this.$add.detach()},onEnd:()=>{this.$add.appendTo(this.$ctx.find(".js-b-color__colors:visible"))},onUpdate:a=>{if(!on(document.body).hasClass("editor-enabled")||this.isReferenced)return!1;this.data.post(`/api/color/update/${on(a.item).data("id")}`,{sort:a.newIndex+1})}})}after(){const t=this.$ctx.data("project"),a=this.$ctx.data("palette"),r=this.$ctx.data("referenceToken"),p=this.$ctx.data("block"),O=(0,Wt.YZ)();this.colorspaces=[],!(t<1)&&(Promise.all([this.data.get(`/api/project-color-palette/${a}`,{data:{language:O&&O.length>0?O:void 0,reference_token:r!=null?r:void 0}}),this.data.get(`/api/project-color?project_color_palette_id=${a}`,{data:{language:O&&O.length>0?O:void 0,reference_token:r!=null?r:void 0}})]).then(async L=>{!L[0].success||!L[1].success||(this.displayProjectColorPalette(L[0].data),await this.displayProjectColors(L[1].data),on(document.body).hasClass("editor-enabled")&&this.initializeEditingMode(),this.fire("BlockReady",{block:p},["events"]))}),this.$ctx.on("click",".btn-delete-color",L=>{const W=on(L.currentTarget).closest(".color");return this.fire("swal",{template:"block-color-delete",closeOnConfirm:!0,callback:()=>{this.data.delete(`/api/color/removeall/${W.data("id")}`).then(()=>{W.remove(),this.fire("colorPaletteColorRemoved")})}}),!1}),this.initializeAdobeCreativeCloudIntegrationIfActivated())}displayProjectColorPalette(t){const a=this.$ctx.find(".js-palette-title"),r=this.$ctx.find(".js-palette-description");a.text(t.name),a.attr("data-empty",!t.name),a.attr("aria-hidden",!t.name),r.text(t.description),r.attr("data-empty",!t.description),(!t.name||t.name==="")&&a.text(a.data("placeholder")),t.description||r.text(r.data("placeholder"))}async displayProjectColors(t){var a;const{settings:r}=await this.data.getBlock(this.blockId);if(this.colorspaces=(a=r.colorspaces)!=null?a:[],t.length>0?this.showPaletteActions():this.hidePaletteActions(),t=Ds()(t,["sort","created","hue","saturation","lightness","alpha"],["desc","asc","asc","asc","asc","desc"]),on.each(t,(p,O)=>{this.colorspaces&&on.each(this.colorspaces,(xe,Ae)=>{O[`field_${Ae}`]=!0}),O.editable=on(".document").data("editing");const L=this.$ctx.data("cssPrecompiler");O.prefix=L==="LESS"?"@":"$";const W=on((0,e.EY)(bo,O)),X=W.find(".color-preview");this.editing||this.showColorTooltips(W);const ie=W.data("color");this.$items.prepend(W),O.alpha<255?(W.find(".color-preview-opaque").css({backgroundColor:W.data("colorOpaque")}),W.find(".color-preview-transparent").css({backgroundColor:ie})):X.css({backgroundColor:ie})}),t.length>0){const p=this.$ctx.find(".js-palette-title");on(".data .colors",this.$ctx).addClass("state-is-visible"),this.$ctx.removeClass("block-empty"),p.attr("data-empty")==="true"&&!on(document.body).hasClass("editor-enabled")&&p.text("")}else on(".data .colors",this.$ctx).hide(),this.$ctx.addClass("block-empty")}initializeAdobeCreativeCloudIntegrationIfActivated(){if(this.account.hasFeature("ADOBE_CREATIVE_CLOUD_LIBRARIES_INTEGRATION")&&(0,Cs.wR)()&&this.adobeCreativeCloudLibrariesIntegrationEnabled){const t=on((0,e.EY)(Ci));t.on("iconButtonClicked",()=>{this.fire("openModal",{$content:(0,e.EY)(jn.E,{id:this.$ctx.data("palette"),type:"COLOR_PALETTE"}),modifier:"default"},["events"])}),this.$paletteActions.append(t),this.sandbox.addModules(this.$paletteActions)}}drawAddPlaceholder(){const a=this.$ctx.find(".js-b-color-item").first().height(),r=this.$ctx.find(".js-b-color__list-colorspaces").first(),p=r.find(".js-state-is-visible"),O=[];this.$ctx.find(".js-b-color__add-wrapper:visible").height(a),p.each((L,W)=>{O.push(r.find("li").index(W))}),on.each(O,(L,W)=>{this.$ctx.find(".js-b-color__add li").eq(W).addClass("state-is-visible")}),this.$ctx.on("click.align",".js-co-settings__setting",this.fixPickerAlignment)}fixPickerAlignment(){if(!this.$ctx)return;const t=this.$ctx.find(".js-cm-setting__details");t.offset().left+t.outerWidth()>on(window).width()?t.addClass("b-color__settings--align-right"):t.removeClass("b-color__settings--align-right")}initSettings(){if(this.$add){this.$add.appendTo(this.$ctx.find(".js-b-color__colors:visible"));return}this.$ctx.find(".js-b-color__colors:visible .js-b-color__picker-wrapper").html((0,e.EY)(ar)),this.blockSettings=new y.D(this.$ctx.find(".js-b-color__picker-wrapper"),this.sandbox);const t=this.blockSettings.getSetting("color");this.drawAddPlaceholder(),t.saved=a=>{const r=Xn()(Ba(a.color)),p=r.toRgb();this.data.post("/api/project-color",{project_color_palette_id:this.$ctx.data("palette"),red:p.r,green:p.g,blue:p.b,alpha:parseInt(p.a*255)}).then(O=>{if(!O.success)return;on.each(this.colorspaces,(ie,xe)=>O.data[`field_${xe}`]=!0),O.data.editable=!0;const L=on((0,e.EY)(bo,O.data));L.find(".color-preview").css({background:r.toRgbString()}),on('[data-editable="true"]',L).attr("contenteditable",!0),t.hide(),L.data("color",O.data.css_value),L.insertBefore(this.$ctx.find(".js-b-color__add-wrapper")),this.$items.show();const W=this.$ctx.find(".js-b-color__empty-placeholder .js-b-color__picker-wrapper");W.detach(),this.$ctx.find(".js-b-color__empty-placeholder").hide(),W.appendTo(this.$ctx.find(".js-b-color__colors:visible .js-b-color__add-wrapper")),this.drawAddPlaceholder();const X=this.$ctx.find('[data-sortable="true"]');on.each(X,(ie,xe)=>this.enableSorting(xe))})}}initializeEditingMode(){if(this.clip&&this.clip.destroy(),this.sortable)this.sortable.option("disabled",!1);else if(on(".document").data("editor")&&!this.isReferenced&&on(".document").data("editing")){const r=this.$ctx.find('[data-sortable="true"]');on.each(r,(p,O)=>{this.enableSorting(O)})}const t=this.$ctx.find(".js-palette-title"),a=this.$ctx.find(".js-palette-description");t.attr("data-empty")=="true"&&(t.text(t.data("placeholder")),t.attr("aria-hidden",!0)),a.attr("data-empty")=="true"&&a.text(a.data("placeholder")),this.initSettings(),this.$ctx.find(".js-b-color-cloak-in-edit").hide(),this.$ctx.find(".js-b-color-tooltip").show(),this.isReferenced||(on('[data-editable="true"]',this.$ctx).attr("contenteditable",!0),this.tpl.enableSanitizationOnPasting(this.$ctx,"[contenteditable]")),this.hideColorTooltips(this.$ctx)}onEditingEnabled(){this.initializeEditingMode()}onEditingDisabled(){this.sortable&&this.sortable.option("disabled",!0),this.editing=!1;const t=this.$ctx.find(".js-palette-title"),a=this.$ctx.find(".js-palette-description");t.attr("data-empty")=="true"&&(t.text(""),t.attr("aria-hidden",!0)),a.attr("data-empty")=="true"&&a.text(""),this.$ctx.off("click.align"),this.$add=this.$ctx.find(".js-b-color__colors:visible .js-b-color__add-wrapper"),this.$add.detach(),this.$ctx.find(".js-b-color-cloak-in-edit").show(),this.$ctx.find(".js-b-color-tooltip").hide(),this.isReferenced||(this.tpl.disableSanitizationOnPasting(this.$ctx,"[contenteditable]"),on('[data-editable="true"]',this.$ctx).removeAttr("contenteditable")),this.showColorTooltips(this.$ctx)}arrayDiff(t,a){const r=t.filter(O=>!a.includes(O)),p=a.filter(O=>!t.includes(O));return{remove:r,add:p}}async openSettingsInSidebar(){const t=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"color"}),{settings:a,targets:r}=await this.data.getBlock(this.blockId),p=Mi.basics.find(L=>L.id==="colorspaces");p&&(p.choices=this.availableColorSpaces.map(L=>({label:L.displayName,tooltip:L.tooltip,id:L.name})));const O=(L,W,X)=>{if(X==="targets"){this.data.updateBlockTargets(this.blockId,L,W);return}switch(L){case"view":this.updateView(W);break;case"colorspaces":for(const ie of["hex","rgb"])W.includes(ie)||W.push(ie);this.updateColors(W);break}};window.emitter.emit("Guideline:setBlockSettingsSidebar",{settingsStructure:Mi,settings:a,targets:r,onSettingChanged:O,appBridge:t,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName)})}updateColors(t){const a=this.arrayDiff(this.colorspaces,t);if(a.add)for(const r of a.add){const p=this.$ctx.find(`.color-value-${r}`);p.closest("li").css("display","block"),p.find("> div").attr("contenteditable",!0),p.find("> div").focus()}if(a.remove)for(const r of a.remove)this.$ctx.find(`.color-value-${r}`).closest("li").hide();for(const r of["hex","rgb"]){const p=t.indexOf(r);p!==-1&&t.splice(p,1)}this.colorspaces=t,this.data.updateBlock(this.$ctx,{settings:{colorspaces:t.length===0?null:t}})}updateView(t){this.$items.removeClass("view-list"),this.$items.removeClass("view-grid"),this.$items.removeClass("view-card"),this.$items.addClass(`view-${t}`),this.$placeholder.find(".colors").removeClass("view-list"),this.$placeholder.find(".colors").removeClass("view-grid"),this.$placeholder.find(".colors").removeClass("view-card"),this.$placeholder.find(".colors").addClass(`view-${t}`),this.data.updateBlock(this.$ctx,{settings:{view:t}})}showPaletteActions(){this.$paletteActions.addClass("visible")}hidePaletteActions(){this.$paletteActions.removeClass("visible")}}var bt=i(88615),Ma=i(88804),va=i(28645);const ba=({language:s,blockSettings:t,blockId:a,allPalettes:r})=>{const p=()=>{switch(s){case"de":return"Farbpaletten";case"cn":return"\u989C\u8272\u8272\u677F";case"en":default:return"Color Swatches"}},O=()=>{switch(s){case"cn":return"ASE\u3001 LESS\u3001 SCSS";case"de":case"en":default:return"ASE, LESS, SCSS"}},L=()=>`/api/color/export/${t.token}/zip/`,W=()=>`${L()}${X().map(xe=>xe.id).join(",")}`,X=()=>r.filter(xe=>{var Ae;return((Ae=t.palettes)==null?void 0:Ae.find(Ne=>parseInt(Ne)===parseInt(xe.id)))!==void 0}),ie=()=>{(0,f.s)(va.U.DownloadColors,{block_id:a});const xe=window.application.sandbox.getConfigParam("segmentAnalytics"),Ae="colordownload",Ne=`colordownload-blockid-${a}`;xe.trackDownload(`styleguide block ${Ae}`,Ne,Ae,null,L(),null,!1,!1,Ne,null,null,!1,null,null)};return(0,n.jsx)("div",{className:"tw-flex print:tw-break-inside-avoid",children:(0,n.jsxs)("a",{className:"tw-flex tw-no-underline tw-p-5 tw-transition-all tw-ease-in-out tw-border tw-border-black-5 tw-bg-black-5 tw-text-text tw-w-full hover:tw-border hover:tw-border-solid hover:tw-border-line hover:tw-shadow-[0_10px_10px_-5px_rgba(45,50,50,0.1)]",target:"_blank",href:W(),rel:"noreferrer",onClick:ie,children:[(0,n.jsx)("div",{className:"tw-flex tw-items-center tw-justify-center tw-mr-3",children:(0,n.jsx)(bt.default,{size:Ma.l.Size24})}),(0,n.jsxs)("div",{className:"tw-w-[200px]",children:[(0,n.jsx)("h4",{className:"tw-text-sm !tw-mb-[3px]",children:p()}),(0,n.jsx)("div",{className:"tw-text-black-50 tw-text-xs",children:O()})]}),(0,n.jsx)("ul",{className:"tw-flex tw-box-content tw-w-[500px] tw-min-h-10 tw-flex-wrap tw-pl-5 tw-border-l tw-border-line [@media(max-width:400px)]:tw-pt-2.5 [@media(max-width:400px)]:tw-pl-0 [@media(max-width:400px)]:tw-border-none [@media(max-width:400px)]:tw-border-t-2 [@media(max-width:400px)]:tw-mt-[15px]",children:X().map((xe,Ae)=>{var Ne;return(Ne=xe.colors)==null?void 0:Ne.map((He,Je)=>(0,n.jsx)("li",{className:"tw-list-none",children:(0,n.jsx)("div",{className:"tw-w-5 tw-h-5 tw-bg-line-weak",style:{background:He.css_value}})},`${Ae}-${Je}`))})})]})})},ko=(0,en.hD)({basics:[{id:"palettes",type:"checklist",label:"Color palettes",choices:[],defaultValue:[],showClearAndSelectAllButtons:!0}]});class uo extends u.j{on(t){this.blockSettings=this.$ctx.data("settings"),this.blockId=this.$ctx.data("block"),this.sectionId=this.$ctx.data("sectionId"),this.language=(0,Cs.$5)(),this.referenceToken=this.$ctx.data("referenceToken"),this.$reactContainer=this.$ctx.find(".react-container").get(0),this.allPalettes=[],this.displayName="Color Swatch",t()}after(){this.getPalettes().then(t=>{this.allPalettes=t,this.render()}).catch(t=>console.error(`Unable to get color palettes. Reason: ${t}`))}render(){(0,e.Cc)(ba,this.$reactContainer,{allPalettes:this.allPalettes,blockSettings:this.blockSettings,blockId:this.blockId,language:this.language})}getPalettes(){return new Promise((t,a)=>{this.data.get(`/api/color/library/${this.blockSettings.project}`,{headers:{ReferenceToken:this.referenceToken}}).then(r=>r.success?t(r.palettes):a(r.error)).catch(r=>a(r))})}async updatePalettes(t){this.blockSettings.palettes=t,(await this.data.updateBlock(this.$ctx,{settings:{palettes:t||null}})).success||this.renderErrorMsg(),this.render()}renderErrorMsg(){this.$ctx.find(".b-colordownload__error-msg").show()}async openSettingsInSidebar(){const t=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"color-download"}),{settings:a,targets:r}=await this.data.getBlock(this.blockId);a.palettes=a.palettes?Array.from(a.palettes):[];const p=(O,L,W)=>{if(W==="targets"){this.data.updateBlockTargets(this.blockId,O,L);return}O==="palettes"&&this.updatePalettes(L)};for(const O of ko.basics)O.id==="palettes"&&(O.choices=this.allPalettes.map(L=>({id:L.id,label:L.name||"Unnamed Palette"})));window.emitter.emit("Guideline:setBlockSettingsSidebar",{settingsStructure:ko,settings:a,targets:r,onSettingChanged:p,appBridge:t,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName)})}}var Yo=i(24760);const Jo=(0,x.I)(()=>(0,n.jsxs)("div",{className:"color color-temporary",style:{background:"#EEE"},children:[(0,n.jsx)("div",{className:"delete-color-button-container","data-event":"sectionDeleteMenu"}),(0,n.jsx)("div",{className:"handle",children:(0,n.jsx)("i",{className:"icon-angle-down"})})]})),yo=(0,x.I)(s=>{var t;return(0,n.jsx)("div",{className:"tooltip color-chooser",children:(t=s.palettes)==null?void 0:t.map(a=>{var r;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h5",{children:a.name}),(0,n.jsx)("ul",{className:"colors row",children:(r=a.colors)==null?void 0:r.map(p=>{const O={};for(const L of p.css.split(";")){if(L==="")continue;const[W,X]=L.split(":");O[W.trim().replaceAll(/-([a-z])/g,ie=>ie[1].toUpperCase())]=X.trim()}return(0,n.jsx)("li",{title:p.name,className:`color ${p.light?"color-light":""}`,style:O,"data-id":p.id,"data-name":p.name,"data-hex":`#${p.hex}`},p.id)})})]})})})});var si=i(76033);const Kn=(0,en.hD)({layout:[{id:"useCustomSize",type:"switch",label:"Height",switchLabel:"Custom",defaultValue:!1,on:[{id:"sizeCustom",type:"input",defaultValue:"72",placeholder:"e.g. 72px",rules:[si.o]}],off:[{id:"sizeSimple",type:"segmentedControls",choices:[{label:"S",value:"48"},{label:"M",value:"72"},{label:"L",value:"96"}],defaultValue:"72"}]}]});var Yn=i(5181);class Ra extends u.j{static get SCALE_ROW_WIDTH(){return 796}static get SIZES(){return{S:48,M:72,L:96}}static get DEFAULT_SIZE(){return Ra.SIZES.M}static get LEGACY_SIZES(){return{small:24,tall:80}}on(t){this.sandbox.subscribe("events",this),this.blockId=this.$ctx.data("block"),this.sectionId=this.$ctx.data("sectionId"),this.dragStarted=!1,this.$draggedColor=null,this.draggedColorWidth=null,this.draggedColorWidthAvailable=1/0,this.$chooser=null,this.displayName="Color Scale",this.editing=!1,Yn(document.body).hasClass("editor-enabled")?this.onEditingEnabled():this.onEditingDisabled();const a=this.$ctx.data("settings");this.containsNewSettingsSizeKeys(a)?this.applySize(a[a.useCustomSize?"sizeCustom":"sizeSimple"]):this.applySize(a.size),this.toggleDeleteButtonVisibility(this.editing),this.$ctx.on("mousedown",".handle",r=>{const p=Yn(r.currentTarget).parent();this.$draggedColor=p,this.draggedColorWidth=p.width(),this.draggedColorWidthAvailable=this.getMaxPossibleWidthForNode(p[0]),this.dragStarted=!0}),this.$ctx.on("dblclick",".handle",r=>{const p=Yn(r.currentTarget).parent();return this.dragStarted=!1,p.css("flexBasis",this.getMaxPossibleWidthForNode(p[0])),this.enableAddingColorIfPossible(),this.save(),!1}),this.$ctx.on("mousemove",r=>{if(this.dragStarted){const p=Math.min(parseInt(r.clientX-this.$draggedColor.offset().left),this.draggedColorWidthAvailable);this.$draggedColor.css("flexBasis",p),p<24?this.$draggedColor.find(".delete-color-button-container").addClass("tw-right-[-2px]").removeClass("tw-right-2"):p<32?this.$draggedColor.find(".delete-color-button-container").addClass("tw-right-[-4px]").removeClass("tw-right-2"):this.$draggedColor.find(".delete-color-button-container").removeClass("tw-right-[-4px] tw-right-[-2px]").addClass("tw-right-2"),this.enableAddingColorIfPossible()}}),this.$ctx.on("mouseup",()=>{this.dragStarted&&(this.save(),this.dragStarted=!1)}),this.$ctx.find(".js-add-color-button-container button").on("click",()=>{const r=Yn((0,e.EY)(Jo));r.css("flexBasis",Math.min(this.getMaxPossibleWidthForNode(),40)),this.$ctx.find(".scale").append(r),this.$ctx.find(".color-chooser").hide(),r.append(this.$chooser.clone()),this.disableAddButton()}),this.$ctx.on("click",".color-chooser .color",r=>{const p=Yn(r.currentTarget),O=p.data("hex"),L=p.data("name"),W=Yn(p.closest(".color-chooser").parent());W.css("background",p.data("hex")),W.data("id",p.data("id")),W.removeClass("color-temporary"),W.attr("aria-label",window.translate("Guideline_blocks_colorScaleBlock_color_label",{name:L!=null?L:"N/A",hex:O})),this.$ctx.find(".color-chooser").detach();const X=Yn((0,e.EY)(Yo.p));return W.append(X),this.setDeleteButtonEventListener(),this.enableAddingColorIfPossible(),this.save(),!1}),this.setDeleteButtonEventListener(),t()}setDeleteButtonEventListener(){this.$ctx.find(".delete-color-button-container").off("click").on("click",t=>(Yn(t.currentTarget).parent().detach(),this.enableAddingColorIfPossible(),this.save(),!1))}toggleDeleteButtonVisibility(t){t?this.$ctx.find(".delete-color-button-container").show():this.$ctx.find(".delete-color-button-container").hide()}getMaxPossibleWidthForNode(t){let a=Ra.SCALE_ROW_WIDTH;return Yn.each(this.$ctx.find(".scale > .color"),(r,p)=>{var O;const W=(O=Yn(p).width())!=null?O:0;p!==t&&(a-=W)}),a}enableAddButton(){this.$ctx.find(".js-add-color-button-container button").removeAttr("disabled")}disableAddButton(){this.$ctx.find(".js-add-color-button-container button").attr("disabled","disabled")}enableAddingColorIfPossible(){this.getMaxPossibleWidthForNode()<1||this.$ctx.find(".color-temporary").length>0?this.disableAddButton():this.enableAddButton()}after(){this.data.get(`/api/color/library/${this.$ctx.data("project")}`).then(t=>{this.$chooser=Yn((0,e.EY)(yo,t))})}save(){const t={settings:{colors:[]}};Yn.each(this.$ctx.find(".scale > .color"),(a,r)=>{const p=Yn(r).data("id");p>0&&t.settings.colors.push({id:p,width:Yn(r).width()})}),this.data.updateBlock(this.$ctx,t)}updateSize(t){t=this.convertLegacySizeToNewSizeIfNeeded(t),this.data.updateBlock(this.$ctx,{settings:{size:t}}),this.applySize(t)}applySize(t){const a=this.convertLegacySizeToNewSizeIfNeeded(t)||Ra.DEFAULT_SIZE;this.$ctx.find(".scale").css({height:`${a}px`})}convertLegacySizeToNewSizeIfNeeded(t){var a;return(a=Ra.LEGACY_SIZES[t])!=null?a:t}containsNewSettingsSizeKeys(t){return Object.keys(t).some(a=>["sizeCustom","sizeSimple","useCustomSize"].includes(a))}async openSettingsInSidebar(){const t=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"color-scale"}),{settings:a,targets:r}=await this.data.getBlock(this.blockId);this.containsNewSettingsSizeKeys(a)||(a.useCustomSize=!0,a.sizeCustom=this.convertLegacySizeToNewSizeIfNeeded(a.size));const p=W=>{a.useCustomSize?(a.sizeCustom=W,this.data.updateBlock(this.$ctx,{settings:{sizeCustom:W}})):(a.sizeSimple=W,this.data.updateBlock(this.$ctx,{settings:{sizeSimple:W}})),this.$ctx.find(".scale").css({height:`${W}px`})},O=W=>{a.useCustomSize=W,W&&a.sizeCustom?p(a.sizeCustom):!W&&a.sizeSimple?p(a.sizeSimple):!W&&a.sizeSimple===void 0&&p(Ra.DEFAULT_SIZE),this.data.updateBlock(this.$ctx,{settings:{useCustomSize:W}})},L=(W,X,ie)=>{if(ie==="targets"){this.data.updateBlockTargets(this.blockId,W,X);return}switch(W){case"useCustomSize":O(X);break;case"sizeSimple":case"sizeCustom":p(X);break}};window.emitter.emit("Guideline:setBlockSettingsSidebar",{settingsStructure:Kn,settings:a,targets:r,onSettingChanged:L,appBridge:t,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName)})}onEditingEnabled(){this.$ctx.find(".js-add-color-button-container").show(),this.enableAddingColorIfPossible(),this.editing=!0,this.toggleDeleteButtonVisibility(!0)}onEditingDisabled(){this.$ctx.find(".color-temporary").detach(),this.$ctx.find(".js-add-color-button-container").hide(),this.editing=!1,this.toggleDeleteButtonVisibility(!1)}}var Hs=i(95376),Ps=i(78149);const pi=(0,x.I)(s=>(0,n.jsxs)("li",{className:"block-dosanddonts-images__grid__item","data-id":s.data.id,children:[(0,n.jsx)("figure",{className:"block-dosanddonts-images__grid__item__figure",children:(0,n.jsx)("img",{alt:"preview",src:s.url,width:"400"})}),(0,n.jsxs)("div",{className:"block-dosanddonts-images__title-container js-block-dosanddonts-images__title-container",children:[(0,n.jsx)("i",{className:`block-dosanddonts-images__grid__item__icon ${s.type==="dos"?"block-dosanddonts-images__icon-do ca-icon--approve":"block-dosanddonts-images__icon-dont ca-icon--reject-circle"}`}),(0,n.jsx)("h3",{className:"a-h3 block-dosanddonts-images__grid__item__title placeholder js-block-dosanddonts-images__grid__item__title",contentEditable:"true",children:s.title})]}),(0,n.jsx)("div",{className:"block-dosanddonts-images__grid__item__description placeholder js-block-dosanddonts-images__editor co-editor co-editor--default",children:(0,Hs.Ay)(s.description)}),(0,n.jsx)("button",{className:"block-dosanddonts-images__grid__item__delete",children:(0,n.jsx)(Ps.V,{icon:"trash"})})]})),Ri=(0,en.hD)({main:[{id:"type",type:"dropdown",defaultValue:"icon",choices:[{value:"icon",label:"Icons",icon:"DoAndDont"},{value:"strikethrough",label:"Strikethrough",icon:"StrikethroughBox"},{value:"none",label:"Text",icon:"TextAlignmentLeft"}],size:"large"}],layout:[{id:"cols",label:"Columns",type:"segmentedControls",defaultValue:"3",onChange:s=>{var t,a;const r=(t=s.getBlock("sidebyside"))==null?void 0:t.value,p=(a=s.getBlock("cols"))==null?void 0:a.value;Number(p)!==2&&r&&s.setBlockValue("sidebyside",!1)},choices:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"}]},{id:"sidebyside",label:"Display side by side",type:"switch",info:"Keep image sizes consistent to avoid unsightly gaps. Or use separate blocks.",defaultValue:!1,show:s=>{var t;return((t=s.getBlock("cols"))==null?void 0:t.value)==="2"}}]});var ra=i(5181);class ni extends u.j{on(t){this.defaults={title:"",description:""},this.editing=!1,this.editor=null,this.sandbox.subscribe("events",this),this.blockId=this.$ctx.data("block"),this.sectionId=this.$ctx.data("sectionId"),this.projectId=(0,b.MJ)(),this.displayName="Image Dos & Don'ts",this.bem_namespace="block-dosanddonts-images",this.pollExecutionAmount=0;const a=this.$ctx,r=a.find(".block-dosanddonts-images__grid"),p=r.get(0),O=r.get(1);if(!p||!O)throw new Error("Element not found.");this.sortableDos=Vs.Ay.create(p,{group:`images-dos-${this.blockId}`,handle:".block-dosanddonts-images__grid__item",ghostClass:"sortable-ghost",onUpdate:()=>{this.saveChanges()}}),this.sortableDonts=Vs.Ay.create(O,{group:`images-donts-${this.blockId}`,handle:".block-dosanddonts-images__grid__item",ghostClass:"sortable-ghost",onUpdate:()=>{this.saveChanges()}}),this.setEditable(ra(document.body).hasClass("editor-enabled")),this.type=a.attr("data-type"),this.cols=a.attr("data-cols"),this.sidebyside=a.attr("data-sidebyside")==="1",this.defaults.description=a.attr("data-default-description"),this.defaults.title=a.attr("data-default-title"),this.$ctx.find(`.${this.bem_namespace}__dropdown__btn[data-style=${this.type}]`).addClass("active"),this.$ctx.find(`.${this.bem_namespace}__dropdown__btn[data-cols=${this.cols}]`).addClass("active"),this.$ctx.on("click",".js-m-assetchooser-placeholder",L=>{const W=ra(L.currentTarget).data("type");this.openAssetChooser(W)}),this.createBindings(this.$ctx),t()}after(){this.$ctx.on("click",".js-block-dosanddonts-images__editor",t=>{this.isEditorEnabled()&&(this.removeEditorFromImageDescription(),this.initEditorIntoImageDescription(ra(t.currentTarget)))})}createBindings(){const t=this.$ctx,a=(0,kn.F6)();t.find(".block-dosanddonts-images__dropzone__dos").upload({dataType:"json",dropZone:t.find(".block-dosanddonts-images__dropzone__dos"),add:(r,p)=>{const O=p.name.split(".").pop().toLowerCase();a.includes(O)?this.data.checkStorageLimit(p.files[0].size).then(()=>{p.submit()}):this.fire("swal",{template:"block-upload-unsupported-format",closeOnConfirm:!0})},done:async(r,p)=>this.handleUploadedDone(p,"dos")}),t.find(".block-dosanddonts-images__dropzone__donts").upload({dataType:"json",dropZone:t.find(".block-dosanddonts-images__dropzone__donts"),add:(r,p)=>{const O=p.name.split(".").pop().toLowerCase();a.includes(O)?this.data.checkStorageLimit(p.files[0].size).then(()=>{p.submit()}):this.fire("swal",{template:"block-upload-unsupported-format",closeOnConfirm:!0})},done:async(r,p)=>this.handleUploadedDone(p,"donts")}),this.bindImageElement(t.find(`.${this.bem_namespace}__grid__item`))}initEditorIntoImageDescription(t){this.removePlaceholder("description",t),this.editor=new Pn.j(t,this.sandbox,{set:"block",removeExtraneous:!1,placeholder:this.defaults.description,project:this.projectId}),this.editor.enable(),this.editor.setCursorToEnd(),this.editor.saved=()=>{this.saveChanges()}}removeEditorFromImageDescription(){this.$ctx.find(".ql-container").removeClass("ql-container"),this.editor&&(this.editor.destroy(),this.addPlaceholder("description",this.editor.$ctx),this.editor=null)}createAndAppendImageElement(t,a){this.$ctx.find(`.block-dosanddonts-images__grid--${a}`).append((0,e.EY)(pi,{data:t,title:this.defaults.title,description:this.defaults.description,url:t.preview_url,type:a}))}bindImageElement(t){const a=this.$ctx;a.on("click",".block-dosanddonts-images__grid__item__delete",this.removeImageElement.bind(this)),a.on("blur",".block-dosanddonts-images__grid__item__title",this.saveChanges.bind(this)).on("blur",".block-dosanddonts-images__grid__item__title",r=>this.addPlaceholder("title",ra(r.currentTarget))).on("focus",".block-dosanddonts-images__grid__item__title",r=>this.removePlaceholder("title",ra(r.currentTarget))),t&&(t.find(".block-dosanddonts-images__grid__item__title").each((r,p)=>{this.addPlaceholder("title",ra(p))}),t.find(".block-dosanddonts-images__grid__item__description").each((r,p)=>{this.addPlaceholder("description",ra(p))}))}addPlaceholder(t,a){a.text()||(a.text(this.defaults[t]),a.addClass("placeholder"))}removePlaceholder(t,a){switch(a.text()){case this.defaults.title:a.html("").removeClass("placeholder");break;case this.defaults.description:a.html("<p><br></p>").removeClass("placeholder");break}}async handleUploadedDone(t,a){var r;if((r=t==null?void 0:t.result[0])!=null&&r.file_id){const p=await(0,Oa.Vq)(t.result[0].file_id,ra(".document").data("project"));this.performImageProcessingStatusCheck(p.id,a)}}recalculateCssRepeat(){const t=this.$ctx.find(".block-dosanddonts-images__grid--dos > .block-dosanddonts-images__grid__item").length,a=this.$ctx.find(".block-dosanddonts-images__grid--donts > .block-dosanddonts-images__grid__item").length,r=Math.max(t,a);this.$ctx.find(".block-dosanddonts-images__grid").css("grid-template-rows",`repeat(${r}, 1fr)`)}setCols(t){this.$ctx.removeClass(`${this.bem_namespace}--${this.cols}cols`),this.cols=t,this.$ctx.addClass(`${this.bem_namespace}--${this.cols}cols`),this.saveChanges()}setStyle(t){this.$ctx.removeClass(`${this.bem_namespace}--${this.type}`),this.type=t,this.$ctx.addClass(`${this.bem_namespace}--${this.type}`),this.saveChanges()}setSideBySide(t,a){this.sidebyside=t,this.$ctx.find(".js-b-dosanddonts-images__container").toggleClass("block-dosanddonts-images--sidebyside",this.sidebyside),t?this.recalculateCssRepeat():this.$ctx.find(".block-dosanddonts-images__grid").css("grid-template-rows",""),a||this.saveChanges()}removeImageElement(t){ra(t.currentTarget).closest(".block-dosanddonts-images__grid__item").remove(),this.recalculateCssRepeat(),this.saveChanges()}mapImageItem(t,a,r){let p=r.querySelector(".block-dosanddonts-images__grid__item__title").textContent;p===this.defaults.title&&(p="");let O=r.querySelector(".block-dosanddonts-images__grid__item__description .ql-editor")?r.querySelector(".block-dosanddonts-images__grid__item__description .ql-editor").innerHTML:r.querySelector(".block-dosanddonts-images__grid__item__description").innerHTML;O===this.defaults.description&&(O=""),t.push({id:r.getAttribute("data-id"),title:p,description:O})}getRequest(){const t=[],a=[];return this.$ctx.find(`.${this.bem_namespace}__grid--dos > .block-dosanddonts-images__grid__item`).each(this.mapImageItem.bind(this,t)),this.$ctx.find(`.${this.bem_namespace}__grid--donts > .block-dosanddonts-images__grid__item`).each(this.mapImageItem.bind(this,a)),{settings:{type:this.type,cols:this.cols,sidebyside:this.sidebyside,asset_map:{dos:t,donts:a}}}}saveChanges(){this.data.updateBlock(this.$ctx,this.getRequest())}hideEmptyTitles(){const t=this.$ctx.find(".js-block-dosanddonts-images__grid__item__title").toArray().map(a=>ra(a)).filter(a=>a.html()===this.defaults.title).map(a=>a.closest(".js-block-dosanddonts-images__title-container"));for(let a=0;a<t.length;a++)t[a].hide()}setEditable(t){this.editing=t,this.sortableDos.option("disabled",!t),this.sortableDonts.option("disabled",!t),t?this.tpl.enableSanitizationOnPasting(this.$ctx,".js-block-dosanddonts-images__grid__item__title[contenteditable]"):this.tpl.disableSanitizationOnPasting(this.$ctx,".js-block-dosanddonts-images__grid__item__title[contenteditable]"),this.$ctx.find(".js-block-dosanddonts-images__grid__item__title").attr("contenteditable",t),t?this.$ctx.find(".js-block-dosanddonts-images__title-container").closest(".js-block-dosanddonts-images__title-container").show():(this.hideEmptyTitles(),this.removeEditorFromImageDescription()),this.$ctx.toggleClass(`${this.bem_namespace}--editing`,this.editing)}isEditorEnabled(){return this.editing}onEditingEnabled(){this.setEditable(!0)}onEditingDisabled(){this.setEditable(!1)}openAssetChooser(t){const a=[{key:"ext",values:(0,kn.F6)()}],r=this.$ctx.data("asset");r&&a.push({key:"id",values:[r],inverted:!0});const p=(0,e.EY)(aa.l,{externalData:{id:this.blockId,type:t},multiSelectionAllowed:!0,filters:a});this.fire("openModal",{modifier:"flex",$content:p},["events"])}onAssetChooserAssetChosen(t){if(t&&t.externalData&&t.externalData.id===this.blockId&&(this.fire("closeModal",["events"]),t.screenIds&&t.screenIds.length>0))for(const a of t.screenIds)this.performImageProcessingStatusCheck(a,t.externalData.type)}performImageProcessingStatusCheck(t,a){const r=setInterval(()=>{this.data.get(`/api/screen/styleguide/${t}/${this.projectId}`).then(p=>{p.data.generic_url&&p.data.status==="FINISHED"&&(clearInterval(r),this.addNewImage(t,a))}),this.pollExecutionAmount++,this.pollExecutionAmount>60&&(this.pollExecutionAmount=0,clearInterval(r))},1500)}addNewImage(t,a){this.data.get(`/api/screen/styleguide/${t}/${this.projectId}`).then(r=>{if(r.success){const p={id:r.data.id,preview_url:r.data.preview_url};this.createAndAppendImageElement(p,a),this.recalculateCssRepeat(),this.saveChanges()}})}async openSettingsInSidebar(){const t=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"dos-and-donts-images"}),{settings:a,targets:r}=await this.data.getBlock(this.blockId),p=(O,L,W)=>{if(W==="targets"){this.data.updateBlockTargets(this.blockId,O,L);return}switch(O){case"type":return this.setStyle(L);case"cols":return this.setCols(L);case"sidebyside":return this.setSideBySide(L);default:return}};window.emitter.emit("Guideline:setBlockSettingsSidebar",{settingsStructure:Ri,settings:a,targets:r,onSettingChanged:p,appBridge:t,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName)})}}const wo=(0,en.hD)({main:[{id:"type",type:"dropdown",defaultValue:"underline",choices:[{value:"icon",label:"Icons",icon:"DoAndDont"},{value:"underline",label:"Underline",icon:"TextFormatUnderline"},{value:"text",label:"Text",icon:"TextAlignmentLeft"}],size:"large"}],layout:[{id:"showDos",label:"Show Dos",type:"switch",defaultValue:!0,on:[],off:[]},{id:"showDonts",label:"Show Don'ts",type:"switch",defaultValue:!0,on:[],off:[]}]});var Ya=i(5181);class xo extends u.j{on(t){this.sandbox.subscribe("events",this),this.blockId=this.$ctx.data("block"),this.sectionId=this.$ctx.data("sectionId"),this.displayName="Do's & Don'ts",this.defaults={title:"",description:""},this.editorDos=!1,this.textDos="",this.editorDonts=!1,this.textDonts="",this.bem_namespace="block-dosanddonts-text",this.editableTitleElements=this.$ctx.find(`.${this.bem_namespace}__title`),this.defaults.description=this.$ctx.attr("data-default-description"),this.defaults.title=this.$ctx.attr("data-default-title"),this.dos=this.$ctx.attr("data-showdos")==="1",this.donts=this.$ctx.attr("data-showdonts")==="1",this.type=this.$ctx.attr("data-type"),this.placeholder=[],this.insertPlaceholderText(),this.createBindings(this.$ctx),this.isReferenced=!!this.$ctx.data("referenceToken"),t()}after(){this.textDos=this.$ctx.find(".block-dosanddonts-text__dos-editor").html(),this.textDonts=this.$ctx.find(".block-dosanddonts-text__donts-editor").html(),this.bindEditors(),Ya(document.body).hasClass("editor-enabled")&&this.onEditingEnabled()}createBindings(t){t.find(`.${this.bem_namespace}__modes-btn`).on("click",a=>this.handleModes(a)),this.editableTitleElements.on("blur",async()=>await this.saveChanges())}bindEditors(){if(this.$editorDos=this.$ctx.find(".block-dosanddonts-text__dos-editor"),this.$editorDonts=this.$ctx.find(".block-dosanddonts-text__donts-editor"),this.isReferenced){this.$editorDos.addClass("co-editor co-editor--default"),this.$editorDonts.addClass("co-editor co-editor--default");return}this.editorDos&&this.editorDos.destroy(),this.editorDos=new Pn.j(this.$editorDos,this.sandbox,{set:"block",placeholder:this.defaults.description,project:(0,b.MJ)()}),this.editorDos.saved=async t=>{this.textDos=t,await this.saveChanges()},this.editorDonts&&this.editorDonts.destroy(),this.editorDonts=new Pn.j(this.$editorDonts,this.sandbox,{set:"block",placeholder:this.defaults.description,project:(0,b.MJ)()}),this.editorDonts.saved=async t=>{this.textDonts=t,await this.saveChanges()}}handleModes(t){t.preventDefault();const a=Ya(t.currentTarget),r=a.attr("data-handler");this[r]&&this[r](a)}insertPlaceholderText(){this.editableTitleElements.each((t,a)=>{const r=Ya(a);r.html().trim()===""&&(r.addClass("placeholder"),r.html(this.defaults.title),r.on("focus",()=>this.clearPlaceholder(r)),r.is_placeholder=!0)})}clearPlaceholder(t){(t.text()===this.defaults.title||t.text()===this.defaults.description)&&(t.html("<br>"),t.removeClass("placeholder"))}toggleDropdown(){this.dropdown=!this.dropdown,Ya(".block-dosanddonts-text__dropdown").toggle(this.dropdown)}async toggleDos(t){this.dos=!(this.dos&&this.donts),this.$ctx.find(".block-dosanddonts-text__dos").toggle(this.dos),t.toggleClass("active",this.dos),await this.saveChanges()}async toggleDonts(t){this.donts=!(this.dos&&this.donts),this.$ctx.find(".block-dosanddonts-text__donts").toggle(this.donts),t.toggleClass("active",this.donts),await this.saveChanges()}setUnderline(t){this.setType("underline",t)}setIcon(t){this.setType("icon",t)}setText(t){this.setType("text",t)}async saveChanges(){const t={settings:{show:{dos:this.dos,donts:this.donts},text:{dos:this.textDos,donts:this.textDonts},title:{dos:this.editableTitleElements[0].classList.contains("placeholder")?"":this.editableTitleElements[0].innerHTML.trim(),donts:this.editableTitleElements[1].classList.contains("placeholder")?"":this.editableTitleElements[1].innerHTML.trim()},type:this.type}};(await this.sandbox.getConfigParam("data").updateBlock(this.$ctx,t)).success||this.renderErrorMsg()}onEditingEnabled(){this.isReferenced||(this.editableTitleElements.attr("contenteditable",!0),this.tpl.enableSanitizationOnPasting(this.$ctx,"[contenteditable]"),this.$ctx.toggleClass(`${this.bem_namespace}--editing`,!0),this.editorDos&&this.editorDos.enable(),this.editorDonts&&this.editorDonts.enable())}onEditingDisabled(){this.tpl.disableSanitizationOnPasting(this.$ctx,"[contenteditable]"),this.editableTitleElements.attr("contenteditable",!1),this.$ctx.toggleClass(`${this.bem_namespace}--editing`,!1),this.editorDos&&this.editorDos.disable(),this.editorDonts&&this.editorDonts.disable()}async toggleDisplay(t,a){this[t]=a,t==="dos"&&this.$ctx.find(".block-dosanddonts-text__dos").toggle(a),t==="donts"&&this.$ctx.find(".block-dosanddonts-text__donts").toggle(a),await this.saveChanges()}async setType(t){this.$ctx.removeClass(`${this.bem_namespace}--${this.type}`),this.$ctx.addClass(`${this.bem_namespace}--${t}`),this.type=t,await this.saveChanges()}async openSettingsInSidebar(){var t,a;const r=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"dos-and-donts-text"}),{settings:p,targets:O}=await this.data.getBlock(this.blockId);p.showDos=typeof((t=p.show)==null?void 0:t.dos)=="boolean"?p.show.dos:!0,p.showDonts=typeof((a=p.show)==null?void 0:a.donts)=="boolean"?p.show.donts:!0;const L=async(W,X,ie)=>{if(ie==="targets"){this.data.updateBlockTargets(this.blockId,W,X);return}switch(W){case"type":await this.setType(X);break;case"showDos":await this.toggleDisplay("dos",X);break;case"showDonts":await this.toggleDisplay("donts",X);break}};window.emitter.emit("Guideline:setBlockSettingsSidebar",{settings:p,settingsStructure:wo,targets:O,onSettingChanged:L,appBridge:r,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName)})}renderErrorMsg(){this.$ctx.find(".block-dosanddonts-text__error-msg").removeClass("block-dosanddonts-text__error-msg--hidden")}}var Aa=i(77007);const Lo=(0,x.I)(()=>(0,n.jsxs)("li",{className:"download js-download","data-id":"0",children:[(0,n.jsxs)("a",{href:"#",className:"clearfix js-download-link","data-filename":!0,children:[(0,n.jsx)("i",{className:"ico js-ico"}),(0,n.jsx)("span",{className:"drag-handle js-drag-handle",children:(0,n.jsx)("i",{className:"icon-bars"})}),(0,n.jsxs)("div",{className:"meta",children:[(0,n.jsx)("span",{className:"downloads-title","data-editable":"true",contentEditable:"true"}),(0,n.jsx)("span",{className:"downloads-size"})]})]}),(0,n.jsxs)("div",{className:"settings-wrapper js-settings-wrapper",children:[(0,n.jsx)("button",{className:"js-settings settings",children:(0,n.jsx)("i",{className:"icon-angle-down"})}),(0,n.jsxs)("ul",{className:"settings-list js-settings-list",children:[(0,n.jsx)("li",{children:(0,n.jsx)("button",{className:"js-action-replace",children:(0,Hs.Ay)(window.translate("AttachmentsBlock_settingsReplace"))})}),(0,n.jsx)("li",{children:(0,n.jsx)("button",{className:"red js-action-delete",children:(0,Hs.Ay)(window.translate("AttachmentsBlock_settingsDelete"))})})]})]})]})),Da=(0,en.hD)({});var Ys=i(5181);class jo extends u.j{constructor(t,a,r){super(t,a,r),this.$body=null,this.$document=null}on(t){this.sortable=null,this.segmentAnalytics=this.sandbox.getConfigParam("segmentAnalytics"),this.$body=Ys(document.body),this.$document=Ys(".document"),this.blockId=this.$ctx.data("block"),this.sectionId=this.$ctx.data("sectionId"),this.displayName="Attachments",this.sandbox.subscribe("events",this),this.$body.hasClass("editor-enabled")&&this.onEditingEnabled();const a=p=>{var O;if((O=this.$body)!=null&&O.hasClass("editor-enabled"))return p.stopPropagation(),!1};this.$ctx.on("click",".download:not(.btn-upload)",p=>a(p));const r=this.$ctx.find('[data-sortable="true"]');Ys.each(r,(p,O)=>this.enableSorting(O)),(this.$document.data("editor")||this.$document.data("translator"))&&(this.$ctx.on("click",".js-download > a",p=>a(p)),this.$ctx.on("blur",'span[data-editable="true"]',p=>{const O=Ys(p.target),W=O.closest(".download").data("id"),X={settings:{}};return X.settings[`downloads[attachment=${W}]`]={title:O.text()},this.data.updateBlock(this.$ctx,X),!1}),this.$ctx.on("keydown","[contenteditable]",p=>{if(p.keyCode===13)return Ys(p.target).trigger("blur"),window.getSelection().removeAllRanges(),!1})),Ys(document).on("click",()=>Ys(".js-settings-wrapper").removeClass("state-open")),this.bindTracking(),t()}after(){this.$ctx.on("click",".js-settings",t=>{const a=Ys(t.target).closest(".js-settings-wrapper");a.hasClass("state-open")?a.removeClass("state-open"):(Ys(".js-settings-wrapper").removeClass("state-open"),a.addClass("state-open"))}),this.$ctx.on("click",".js-action-delete",t=>{const a=Ys(t.target);return this.fire("swal",{template:"block-downloads-delete",closeOnConfirm:!0,callback:async()=>{const r=a.closest(".js-download"),p={settings:{}};p.settings[`downloads[attachment=${r.attr("data-id")}]`]=null,this.data.updateBlock(this.$ctx,p),(0,Wt.YZ)()||await this.deleteAttachment(r.attr("data-id")),r.remove()}}),!1}),this.$ctx.on("click",".js-action-replace",t=>{const a=Ys(".js-file-replace-form",this.$ctx),r=Ys(t.target).closest(".js-download"),p=r.data("id");a.find(".js-asset-id",this.$ctx).data("attachmentId",p),a.find(".js-asset-id",this.$ctx).val(r.data("translationId")),a.find(".js-replace-file-field",this.$ctx).trigger("click")}),Ys(".js-replace-file-field",this.$ctx).upload({dataType:"json",dropZone:Ys(".upload-dropzone-replacer",this.$ctx),add:(t,a)=>{const r=this.$ctx.find(".js-file-replace-form .js-asset-id"),p=Number(r.val());if(typeof p=="undefined"||p===0)return!1;a.formData.block_id=this.blockId,a.formData.attachment_id=r.data("attachmentId"),a.assetId=p;const O=Ys((0,e.EY)(Lo,a.originalFiles));this.data.checkStorageLimit(a.files[0].size).then(()=>{O.append(Ys('<div class="loading"><div class="progress"></div></div>'));const L=a.name;O.find(".downloads-title").text(L),O.find(".ico").addClass(`ico-${L.split(".").pop()}`),O.find(".meta .downloads-size").text(`${Aa.y.humanFileSize(a.files[0].size)} - ${L.split(".").pop()}`),Ys(`.js-downloads li[data-translation-id="${a.assetId}"]`,this.$ctx).after(O),Ys(`.js-downloads li[data-translation-id="${a.assetId}"]`,this.$ctx).remove(),a.context=O,a.submit()})},progress:(t,a)=>{const r=parseInt(a.loaded/a.total*100,10);Ys(".progress",a.context).css("width",`${r}%`)},done:async(t,a)=>{(0,Wt.YZ)()||await this.deleteAttachment(a.formData.attachment_id),a.result&&a.result[0]&&await this.replaceAttachment(a.formData.block_id,a.result[0].file_id,a.assetId,a.context)}}),Ys(".fileupload-download",this.$ctx).upload({dataType:"json",dropZone:Ys(".upload-dropzone",this.$ctx),add:(t,a)=>{a.formData.block_id=this.blockId;const r=Ys((0,e.EY)(Lo,a.originalFiles));this.data.checkStorageLimit(a.files[0].size).then(()=>{r.find(".js-ico").after(Ys('<div class="loading"><div class="progress"></div></div>'));const p=a.name;r.find(".downloads-title").text(p);const O=`${Aa.y.humanFileSize(a.files[0].size)} - ${p.split(".").pop()}`;r.find(".meta .downloads-size").text(O),Ys(".js-downloads",this.$ctx).append(r),a.context=r,a.submit()})},progress:(t,a)=>{const r=parseInt(a.loaded/a.total*100,10);Ys(".progress",a.context).css("width",`${r}%`)},done:async(t,a)=>{a.result&&a.result[0]&&await this.createAttachment(a.formData.block_id,a.result[0].file_id,a.context)}})}async replaceAttachment(t,a,r,p){const O=await hn(t,a),L=O.filename,W={settings:{}},X={attachment:O.id,title:L};(0,Wt.YZ)()&&(X.translated=!0),W.settings[`downloads[id=${r}]`]=X,this.data.updateBlock(this.$ctx,W),p.find(".loading").remove(),p.find(".js-download-link").attr("href",`/api/attachment/download/${O.id}`),p.find(".js-download-link").attr("data-filename",L),p.find(".js-action-download").attr("href",`/api/attachment/download/${O.id}`),p.attr("data-id",O.id),p.attr("data-translation-id",r)}async createAttachment(t,a,r){const p=await hn(t,a);this.data.updateBlock(this.$ctx,{settings:{"downloads[]":{attachment:p.id,title:p.filename,id:p.id}}}),r.find(".loading").remove(),r.find(".js-download-link").attr("href",`/api/attachment/download/${p.id}`),r.find(".js-download-link").attr("data-filename",p.filename),r.find(".js-action-download").attr("href",`/api/attachment/download/${p.id}`),r.find(".js-ico").addClass(`ico-${p.ext}`),r.attr("data-id",p.id),r.attr("data-translation-id",p.id)}async deleteAttachment(t){await this.data.delete(`/api/block-attachment/${t}`)}enableSorting(t){this.sortable=Vs.Ay.create(t,{group:`download-${this.blockId}`,ghostClass:"sortable-ghost",handle:".js-drag-handle",onUpdate:a=>{if(a.oldIndex!==a.newIndex){const r=[];Ys.each(this.$ctx.find(".js-downloads > li"),(p,O)=>{const L=Ys(O),W={attachment:L.data("id"),title:L.find(".downloads-title").text(),id:L.data("translationId")?L.data("translationId"):L.data("id")};r.push(W)}),this.data.updateBlock(this.$ctx,{settings:{downloads:r}})}}})}bindTracking(){this.$ctx.on("click",".js-b-downloads__download-link, .js-download-link",t=>{const a=Ys(t.currentTarget),r="downloads",p=a.data("filename");a.closest(".js-download").dataAsNumber("id")!==0&&(this.platformAnalyticsTrackAttachmentDownload(a),(0,f.s)("download attachment",{attachment_id:a.closest(".js-download").dataAsNumber("id"),via:"BLOCK",block_id:this.$ctx.dataAsNumber("block")}),this.segmentAnalytics.trackDownload(`styleguide block ${r}`,p,r,null,a.attr("href"),null,!1,!1,p,null,null))})}platformAnalyticsTrackAttachmentDownload(t){try{const a={attachment_id:t.closest(".js-download").dataAsNumber("id"),attachment_extension:t.closest(".js-download").data("attachment-extension"),block_id:this.$ctx.dataAsNumber("block"),document_id:Ys(".document").dataAsNumber("document"),asset_id:null,project_id:(0,b.MJ)(),project_type:(0,b.Xv)(),guideline_id:(0,b._j)(),page_id:Re.e.documentPageId,via:(0,b.Xv)(),via_id:(0,b._j)(),download_type:"SINGLE"};yt.w.track([{type:"attachment:download",brandId:(0,et.M)(),properties:a}])}catch(a){console.error(a)}}onEditingEnabled(){this.$ctx.data("editable")&&(Ys('[data-editable="true"]',this.$ctx).attr("contenteditable",!0),this.tpl.enableSanitizationOnPasting(this.$ctx,"[contenteditable]"))}onEditingDisabled(){this.$ctx.data("editable")&&(this.tpl.disableSanitizationOnPasting(this.$ctx,"[contenteditable]"),Ys('[data-editable="true"]',this.$ctx).removeAttr("contenteditable"))}async openSettingsInSidebar(){const t=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"downloads"}),{targets:a}=await this.data.getBlock(this.blockId),r=(p,O,L)=>{L==="targets"&&this.data.updateBlockTargets(this.blockId,p,O)};window.emitter.emit("Guideline:setBlockSettingsSidebar",{settingsStructure:Da,settings:{},targets:a,onSettingChanged:r,appBridge:t,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName)})}}var Bo=i(72327),Ai=i(49976),Ii=i(54954),Ui=(s=>(s.Small="Small",s.Medium="Medium",s.Large="Large",s))(Ui||{});const la={Small:"300px",Medium:"500px",Large:"700px"},Zo=500,Zi={red:213,green:214,blue:214,alpha:1,name:"Light Grey"},Ua=la.Small,Fi="url",Di="asset",Ja="customHeight",Vi="presetHeight",mi="isCustomHeight",Co=(s,t,a,r)=>{var p,O;const L=(p=s.getBlock(t))==null?void 0:p.value,W=(O=s.getBlock(a))==null?void 0:O.value,X=Object.keys(r).find(Ae=>r[Ae]===W);(L&&X||L&&!W)&&s.setBlockValue(a,L)},Mo=[{value:la.Small,label:"S"},{value:la.Medium,label:"M"},{value:la.Large,label:"L"}],Ro=(0,en.hD)({main:[{id:"type",type:"dropdown",defaultValue:Fi,choices:[{value:Fi,label:"URL",icon:"CodeFrame"},{value:Di,label:"Asset",icon:"Image"}],size:"large"}],basics:[{id:Fi,label:"Link",type:"input",placeholder:"Paste link, or type to search",show:s=>{var t;return((t=s.getBlock("type"))==null?void 0:t.value)===Fi}},{id:Di,label:"Asset",type:"legacyAssetInput",projectTypes:[ia.t.Workspace],objectTypes:[ia.VZ.Url],mode:Ai.F.BrowseOnly,show:s=>{var t;return((t=s.getBlock("type"))==null?void 0:t.value)===Di}}],layout:[{id:mi,label:"Height",type:"switch",switchLabel:"Custom",defaultValue:!1,onChange:s=>Co(s,Vi,Ja,la),on:[{id:Ja,type:"input",placeholder:`e.g. ${la.Small}`,defaultValue:la.Small,rules:[si.o],onChange:s=>(0,Ii.j)(s,Ja)}],off:[{id:Vi,type:"segmentedControls",defaultValue:la.Small,choices:Mo,onChange:s=>(0,Ii.j)(s,Ja)}]}],style:[{id:"borderSwitch",type:"switch",defaultValue:!1,label:"Border",on:[{id:"borderColorObject",type:"colorInput",defaultValue:Zi}]}]});var $i=i(5181);class $a extends u.j{static get OBJECT_TYPE_URL(){return"URL"}static get INPUT_MODE_URL(){return"url"}static get INPUT_MODE_ASSET(){return"asset"}static get TRANSPARENT_COLOR(){return{r:0,g:0,b:0,a:0,name:"Transparent"}}on(t){this.sandbox.subscribe("events",this),this.displayName="Embed",this.blockId=this.$ctx.dataAsNumber("block"),this.sectionId=this.$ctx.data("sectionId"),this.assetId=this.$ctx.dataAsNumber("assetId"),this.projectId=this.$ctx.dataAsNumber("projectId"),this.$inputForm=this.$ctx.find(".js-b-embed__create-form"),this.$inputUrl=this.$ctx.find(".js-b-embed__create-url"),this.$asset=this.$ctx.find(".js-b-embed__asset"),this.$actionsContainer=this.$ctx.find(".js-b-embed__add-asset-container"),this.editing=$i(document.body).hasClass("editor-enabled"),this.resizableIsInitialized=!1,this.isNativeIframeComponent=!1,this.editing&&this.onEditingEnabled(),this.assetId&&this.getAsset(this.blockId).then(a=>{this.assetUrl=a.external_url,this.renderEmbeddedAsset(a)}),this.bindEvents(),t()}bindEvents(){this.$ctx.on("click",".js-m-assetchooser-placeholder, .js-b-embed__replace-asset-choose-option",()=>{this.openAssetChooser()}),this.$inputForm.on("paste",t=>{setTimeout(()=>{this.processInput(t.target.value)},0)}),this.$inputForm.on("submit",t=>{t.preventDefault(),this.processInput(this.$inputUrl.val())}),this.$ctx.on("click",".js-b-embed__create",()=>{this.$inputUrl.focus()}),this.$inputUrl.on("focus",()=>{this.$actionsContainer.addClass("b-embed__add-asset-container--input-selected")}),this.$inputUrl.on("blur",()=>{this.$actionsContainer.removeClass("b-embed__add-asset-container--input-selected")})}getAsset(t){const a=t?`block_id=${t}`:"";return this.data.get(`/api/asset/${this.assetId}?${a}`).then(r=>r.success?r.data:this.displayError("Asset not found","Error while loading the asset. Please try again."))}processAssetChooser(t){this.assetId=t,this.getAsset().then(a=>{this.assetUrl=a.external_url,this.addEmbeddedAssetToBlock(!0).then(()=>{this.renderEmbeddedAsset(a),this.removeActionsContainer()})})}processInput(t){if(!t)return;let a=t.startsWith("<iframe")?t.split("src=")[1].split(/[ >]/)[0].replaceAll(/["']+/g,""):t;a=a.startsWith("http")?a:`https://${a}`,this.createEmbeddedAsset(a).then(r=>{this.assetId=r.id,this.assetUrl=r.external_url,this.addEmbeddedAssetToBlock().then(()=>{this.renderEmbeddedAsset(r),this.removeActionsContainer()})}).catch(()=>{this.displayError("Something went wrong.","Please enter an https:// url"),this.$inputUrl.val("")})}bindResizing(){this.$ctx.resizable({handles:"s",start:()=>{this.tpl.fireCustomEvent(this,"startBlockResize")},stop:()=>{this.tpl.fireCustomEvent(this,"stopBlockResize"),this.data.updateBlock(this.$ctx,{settings:{height:this.$ctx.height()}})}})}openAssetChooser(){const t=[{key:"id",values:[this.assetId],inverted:!0},{key:"object_type",values:[$a.OBJECT_TYPE_URL]}],a=(0,e.EY)(aa.l,{externalData:{id:this.blockId},multiSelectionAllowed:!1,filters:t,projectTypes:["WORKSPACE"]});this.fire("openModal",{modifier:"flex",$content:a},["events"])}onAssetChooserAssetChosen(t){var a,r;((a=t.externalData)==null?void 0:a.id)===this.blockId&&(this.fire("closeModal",["events"]),(r=t.screenData[0])!=null&&r.id&&this.processAssetChooser(t.screenData[0].id))}createEmbeddedAsset(t){return new Promise((a,r)=>{this.data.get(`/api/embed?url=${encodeURIComponent(t)}`).then(p=>{const O={object_type:$a.OBJECT_TYPE_URL,project_id:this.projectId,external_url:t,oembed_provider_id:p.data.id,title:p.data.title||"Embedded Asset",allow_interactions:!0};this.data.post("/api/asset",O).then(L=>{L.success&&((0,f.s)("create asset",{asset_id:L.data.id,asset_ext:"url",asset_url:O.external_url,via:"STYLEGUIDE_EMBED"}),a(L.data))})}).catch(p=>r(p))})}addEmbeddedAssetToBlock(t=!1){return this.$ctx.dataAsNumber("assetId",this.assetId),this.data.updateBlock(this.$ctx,{settings:{assetId:this.assetId,isWorkspaceAsset:t}})}renderEmbeddedAsset(t){this.cleanIframelyStyles(),t.external_url_is_embeddable||!t.oembed_provider_id?this.data.get(`/api/asset/${t.id}/embeddable-url?block_id=${this.blockId}`).then(a=>{var r;this.isNativeIframeComponent=!0,this.$ctx.attr("style")||this.$ctx.height(Zo);const p={src:((r=a.data)==null?void 0:r.url)||t.external_url,pointerEvents:t.allow_interactions?null:Bo.H.None,onLoad:()=>this.fire("BlockReady",{block:this.blockId},["events"]),title:"",allowFullScreen:!0};(0,e.Cc)(Bo.vL,this.$asset.get(0),p)}):this.data.get(`/api/embed/${t.oembed_provider_id}`).then(a=>{a.success&&(this.isNativeIframeComponent=!1,this.$asset.html(a.data.html))}),this.$asset.removeClass("b-embed__asset--hidden")}cleanIframelyStyles(){const t=document.getElementById("iframely-styles");t&&t.remove()}removeActionsContainer(){this.$actionsContainer.remove()}setIframeHeight(t,a=!0){let r=null;Aa.y.isNumber(t)?r=t:t!=null&&t.includes("px")&&(r=t.replace("px","")),this.data.updateBlock(this.$ctx,{settings:{height:r}}),a&&this.$ctx.height(this.isNativeIframeComponent&&!r?Zo:r)}toggleInputMode(t,a){const r=a.find(".js-b-embed__replace-asset-create-option"),p=a.find(".js-b-embed__replace-asset-choose-option");t===$a.INPUT_MODE_URL?(this.$replaceInputUrl.val(this.assetUrl),r.removeClass("b-embed__replace-asset-create-option--hidden"),p.addClass("b-embed__replace-asset-choose-option--hidden")):(r.addClass("b-embed__replace-asset-create-option--hidden"),p.removeClass("b-embed__replace-asset-choose-option--hidden"))}displayError(t,a){(0,At.K)({title:t,text:a,type:"error",showCancelButton:!1,confirmButtonText:"OK",closeOnConfirm:!0})}onEditingEnabled(){this.editing=!0,this.resizableIsInitialized||(this.bindResizing(),this.resizableIsInitialized=!0)}onEditingDisabled(){this.editing=!1}async openSettingsInSidebar(){const t=async(O,L,W,X)=>{var ie;const{settings:xe}=await this.data.getBlock(this.blockId);if(this.prepareSidebarSettings(xe),W==="targets"){this.data.updateBlockTargets(this.blockId,O,L);return}const Ae=(He,Je)=>Je.getBlock(He?Ja:Vi).value,Ne=!!xe.url&&xe.url.trim().length>0;switch(O){case"asset":this.processAssetChooser(L.value);break;case"borderSwitch":{if(!L)this.setBorderColor(Xn()($a.TRANSPARENT_COLOR).toRgbString());else{const He=Ba((ie=xe.borderColor)!=null?ie:Zi);this.setBorderColor(He?Xn()(He).toRgbString():null)}break}case"borderColorObject":{const He=Ba(L);this.setBorderColor(He?Xn()(He).toRgbString():null);break}case Ja:case Vi:this.setIframeHeight(L,Ne);break;case mi:this.setIframeHeight(Ae(L,X),Ne);break;case"url":this.processInput(L),this.setIframeHeight(Ae(xe[mi],X));break}},a=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"embed"}),{settings:r,targets:p}=await this.data.getBlock(this.blockId);this.prepareSidebarSettings(r),window.emitter.emit("Guideline:setBlockSettingsSidebar",{settings:r,settingsStructure:Ro,targets:p,onSettingChanged:t,appBridge:a,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName)})}prepareSidebarSettings(t){var a;if(this.assetId){const p=!t.isWorkspaceAsset;t.type=p?Fi:Di,p?t.url=p?this.assetUrl:null:t.asset=this.assetId}t.borderSwitch=t.borderColor!==null&&t.borderColor!==void 0;const r=Ba((a=t.borderColor)!=null?a:Zi);t.borderColorObject=r?Xn()(r).toRgb():null,t.height=t.height?this.getPixelValue(t.height):Ua,t[mi]=!Object.values(la).includes(t.height),t[Ja]=t[mi]?t.height:Ua,t[Vi]=t[mi]?Ua:t.height}setBorderColor(t){this.data.updateBlock(this.$ctx,{settings:{borderColor:t}}),this.$asset.css({borderColor:t})}getPixelValue(t){return`${t}`.includes("px")?t:`${t}px`}}const ir=(0,en.hD)({});var Io=i(5181);class gi extends u.j{on(t){this.bindTracking(),this.blockId=this.$ctx.data("block"),this.sectionId=this.$ctx.data("sectionId"),this.displayName="Font Kit",this.segmentAnalytics=this.sandbox.getConfigParam("segmentAnalytics"),t()}bindTracking(){this.$ctx.on("click",".js-b-fontdownload__download-link",t=>{const a=Io(t.currentTarget),r="fontdownload",p=a.data("filename");(0,f.s)("download fonts",{block_id:a.dataAsNumber("blockId")}),this.segmentAnalytics.trackDownload(`styleguide block ${r}`,p,r,null,a.attr("href"),null,!1,!1,p,null,null)})}async openSettingsInSidebar(){const t=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"font-download"}),{targets:a}=await this.data.getBlock(this.blockId),r=(p,O,L)=>{L==="targets"&&this.data.updateBlockTargets(this.blockId,p,O)};window.emitter.emit("Guideline:setBlockSettingsSidebar",{settings:{},settingsStructure:ir,targets:a,onSettingChanged:r,appBridge:t,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName)})}}var ca=i(4957),Qi=Object.defineProperty,da=Object.defineProperties,Xi=Object.getOwnPropertyDescriptors,Qo=Object.getOwnPropertySymbols,Xo=Object.prototype.hasOwnProperty,or=Object.prototype.propertyIsEnumerable,Y=(s,t,a)=>t in s?Qi(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,Pe=(s,t)=>{for(var a in t||(t={}))Xo.call(t,a)&&Y(s,a,t[a]);if(Qo)for(var a of Qo(t))or.call(t,a)&&Y(s,a,t[a]);return s},$e=(s,t)=>da(s,Xi(t));const pn=(0,x.I)(s=>(0,n.jsxs)("div",$e(Pe({className:"mod mod-collection-area o-collection-area js-o-collection-area"},s.tpl.renderDataAttributesAsObject(s)),{children:[(0,n.jsxs)("button",{className:"o-collection-area__back-button js-o-collection-area__back-button cm-btn",tabIndex:0,children:[(0,n.jsx)("i",{className:"ca-icon--arrow-left","aria-hidden":!0}),window.translate("Legacy_btn_back")]}),(0,n.jsxs)("div",{className:"o-collection-area__header js-o-collection-area__header",children:[(0,n.jsx)("h2",{className:"o-collection-area__area-heading js-o-collection-area__area-heading a-h2"}),(0,n.jsx)("div",{className:"js-o-collection-area__collection-heading-container"}),(0,n.jsxs)("div",{className:"o-collection-area__actions cm-actions",children:[(0,n.jsx)("div",{className:"js-o-collection-area__sorting-container"}),(0,n.jsx)("div",{className:"o-collection-area__action-buttons-container js-o-collection-area__action-buttons-container"})]})]}),(0,n.jsx)("div",{className:`o-collection-area__row js-o-collection-area__row ${s.rowModifier?`o-collection-area__row--${s.rowModifier}`:""}`})]})));var Ln=Object.defineProperty,Ia=Object.getOwnPropertySymbols,fi=Object.prototype.hasOwnProperty,Ni=Object.prototype.propertyIsEnumerable,ai=(s,t,a)=>t in s?Ln(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,ea=(s,t)=>{for(var a in t||(t={}))fi.call(t,a)&&ai(s,a,t[a]);if(Ia)for(var a of Ia(t))Ni.call(t,a)&&ai(s,a,t[a]);return s};const _i=(0,x.I)(s=>(0,n.jsx)("div",ea(ea(ea(ea(ea(ea(ea(ea(ea(ea(ea(ea(ea(ea(ea({className:"mod mod-icon-download o-icon-download"},s.available_formats?{"data-available-formats":JSON.stringify(s.available_formats)}:{}),s.available_sizes?{"data-available-sizes":JSON.stringify(s.available_sizes)}:{}),s.available_colors?{"data-available-colors":JSON.stringify(s.available_colors)}:{}),s.format?{"data-format":s.format}:{}),s.size?{"data-size":s.size}:{}),s.icon_id?{"data-icon-id":s.icon_id}:{}),s.revision_id?{"data-revision-id":s.revision_id}:{}),s.collection_id?{"data-collection-id":s.collection_id}:{}),s.collection_token?{"data-collection-token":s.collection_token}:{}),s.document_id?{"data-document-id":s.document_id}:{}),s.show_counts?{"data-show-counts":s.show_counts}:{}),s.asset_token?{"data-asset-token":s.asset_token}:{}),s.document_token?{"data-document-token":s.document_token}:{}),s.project_token?{"data-project-token":s.project_token}:{}),s.asset_project_id?{"data-asset-project-id":s.asset_project_id}:{})));var Wi=i(13833),Za=i(2728);const qi=(0,x.I)(s=>(0,n.jsx)("div",{className:"b-iconlibrary__connection",children:(0,n.jsxs)("form",{className:"b-iconlibrary__connection-form js-b-iconlibrary__connection-form",children:[(0,n.jsx)(Wi.X,{}),(0,n.jsxs)("div",{className:"b-iconlibrary__connection-header",children:[(0,n.jsx)("h2",{className:"ca-h2",children:window.translate("Legacy_styleguide_block_iconlibrary_connection_title")}),(0,n.jsx)("p",{className:"ca-p",children:window.translate("Legacy_styleguide_block_iconlibrary_connection_text")})]}),(0,n.jsxs)("div",{className:"iconlibrary__connection-settings",children:[(0,n.jsx)(C.U,{id:"library",label:window.translate("Legacy_styleguide_block_iconlibrary_connection_library_label"),options:s.libraries,value:s.libraryValue}),(0,n.jsx)(C.U,{id:"collection",label:window.translate("Legacy_styleguide_block_iconlibrary_connection_collection_label"),options:s.collections,value:s.collectionValue}),(0,n.jsx)("div",{className:"cm-btn-bar cm-btn-bar--centered cm-btn-bar--section js-cm-setting__actions",children:(0,n.jsx)(Za.b,{label_submit:window.translate("Legacy_styleguide_block_iconlibrary_connection_submit")})})]})]})})),qo=(0,x.I)(s=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"b-iconlibrary__header",children:[(0,n.jsxs)("div",{className:"b-iconlibrary__search-container",children:[(0,n.jsx)(Ps.V,{icon:"search",classes:"b-iconlibrary__search-icon",size:"lg"}),(0,n.jsx)("input",{type:"text",className:"b-iconlibrary__search js-b-iconlibrary__search",placeholder:window.translate("Legacy_styleguide_block_iconlibrary_search_icons"),"aria-label":window.translate("Legacy_styleguide_block_iconlibrary_search_icons")})]}),(0,n.jsx)("div",{className:"b-iconlibrary__actions",children:(0,n.jsxs)("div",{className:"cm-btn-dropdown",children:[(0,n.jsx)("button",{className:"cm-btn cm-btn--default js-cm-btn-dropdown__toggle","data-event":"iconlibraryBlockDownloadOptions",children:window.translate("Legacy_styleguide_block_iconlibrary_download")}),(0,n.jsx)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--below cm-btn-dropdown__menu--right js-cm-btn-dropdown__menu"})]})})]}),s.load_collections?(0,n.jsx)("div",{className:"b-iconlibrary__collection-area js-b-iconlibrary__collection-area"}):null,(0,n.jsx)("div",{className:"b-iconlibrary__results js-b-iconlibrary__results"})]}));var Uo=Object.defineProperty,zi=Object.getOwnPropertySymbols,Fo=Object.prototype.hasOwnProperty,Eo=Object.prototype.propertyIsEnumerable,Ei=(s,t,a)=>t in s?Uo(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,ua=(s,t)=>{for(var a in t||(t={}))Fo.call(t,a)&&Ei(s,a,t[a]);if(zi)for(var a of zi(t))Eo.call(t,a)&&Ei(s,a,t[a]);return s};const ga=(0,x.I)(s=>{var t;return s.assets.length>0?(0,n.jsx)("div",{className:"b-iconlibrary__search-result",children:(t=s.assets)==null?void 0:t.map(a=>(0,n.jsxs)("figure",{className:"b-iconlibrary__result-item js-b-iconlibrary__open-viewer","data-o-viewer-token":a.token,children:[a.is_new?(0,n.jsx)("div",{className:"b-iconlibrary__new-flag",children:window.translate("Legacy_iconlibrary_new_flag")}):null,(0,n.jsx)("img",ua({alt:"icon",title:a.title,className:"b-iconlibrary__result-image lazyload","data-src":s.utils.assetDownload.getSizedUrl(a,64)},a.background_color?{style:{background:`${a.background_color}`}}:{})),(0,n.jsx)("figcaption",{className:"b-iconlibrary__result-caption",children:a.title})]},a.token))}):(0,n.jsx)("div",{className:"b-iconlibrary__noresult",children:window.translate("Legacy_styleguide_block_iconlibrary_search_noresults")})}),Be=(0,x.I)(s=>(0,n.jsx)("div",{className:`b-iconlibrary__unconnected ${s.librariesAvailable===!0?"b-iconlibrary__unconnected--clickable js-b-iconlibrary__unconnected":""}`,"data-translation-all-items":window.translate("Legacy_styleguide_block_iconlibrary_all_items"),children:s.librariesAvailable===!0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"b-iconlibrary__unconnected-upper",children:(0,n.jsx)(Ps.V,{classes:"",icon:"icons",size:"xl"})}),(0,n.jsx)("div",{className:"b-iconlibrary__unconnected-lower",children:"Select Icon Library or Collection"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"b-iconlibrary__unconnected-upper",children:(0,n.jsxs)("div",{className:"b-iconlibrary__unconnected-icon",children:[(0,n.jsx)(Ps.V,{classes:"",icon:"icons",size:"xl"}),(0,n.jsx)("div",{className:"b-iconlibrary__unconnected-questionmark",children:(0,n.jsx)(Ps.V,{classes:"",icon:"unknown",size:"md"})})]})}),(0,n.jsxs)("div",{className:"b-iconlibrary__unconnected-lower",children:[window.translate("Legacy_styleguide_block_iconlibrary_no_library_text"),"\xA0",(0,n.jsxs)("a",{className:"a-link",href:s.librariesUrl,children:[window.translate("Legacy_styleguide_block_iconlibrary_no_library_text_link"),"."]})]})]})})),rr=(0,en.hD)({});var Ea=i(5181);class Vo extends u.j{on(t){this.sandbox.subscribe("events",this),this.$container=this.$ctx.find(".js-b-iconlibrary__container"),this.brandId=(0,et.M)(),this.librariesUrl=`/brands/${this.brandId}/${(0,et.L)().slug}/libraries`,this.pageId=Re.e.documentPageId,this.documentId=parseInt(Ea(".document").data("document"),10),this.connectionElems=null,this.filters={},this.DEFAULT_ASSET_LIMIT=2e3,this.translations={},this.token=null,this.collectionTemplateSettings={collectionLayout:"slider",collectionType:"small",collectionStyle:"tile",collectionAssetFit:"contain",collectionAssetCountEnabled:!1,collectionBorderEnabled:!0},this.blockId=this.$ctx.data("block"),this.sectionId=this.$ctx.data("sectionId"),this.displayName="Icon Library",this.projectToken=this.$ctx.data("projectToken"),this.editing=Ea(document.body).hasClass("editor-enabled"),this.blockSettings={library:this.$ctx.data("iconlibrary")||null,projectToken:this.$ctx.data("projectToken")||null,collection:this.$ctx.data("collection")||null,collectionToken:this.$ctx.data("collectionToken")||null},this.$ctx.on("click",".js-b-iconlibrary__unconnected",()=>this.showConnectionModal()),this.$ctx.on("click",".js-b-iconlibrary__open-viewer",a=>{const r=Ea(a.currentTarget);this.token=r.data("oViewerToken"),this.fire("showAssetInViewer",{$assetList:this.$ctx,$settingsModule:this.$ctx,token:this.token,theme:"light",linkTags:!1},["events"])}),this.render(),t()}render(){if(this.blockSettings.library===null){if(!this.editing){this.$container.empty();return}return this.renderUnconnected(),!1}const t=this.account.hasFeature("COLLECTIONS")&&this.blockSettings.collection===null;this.$container.html((0,e.EY)(qo,{load_collections:t})),this.search(),t&&this.loadCollections(),this.initSearchField()}renderUnconnected(){this.data.get(`/api/block/setup?types=iconlibrary&brand=${this.brandId}`).then(t=>{if(t.success){const a=Ea((0,e.EY)(Be,{librariesUrl:this.librariesUrl,librariesAvailable:t.iconlibraries&&t.iconlibraries.length>0}));this.translations.allItems=a.data("translationAllItems"),this.$container.html(a)}this.fire("BlockReady",{block:this.$ctx.data("block")},["events"])})}initSearchField(){this.$container.find(".js-b-iconlibrary__search").on("keyup",Ea.debounce(500,t=>this.search(t.currentTarget.value)))}resetSearchFilter(){this.$container.find(".js-b-iconlibrary__search").val(""),delete this.filters.q}loadCollections(){const t=Ea((0,e.EY)(pn,{api:`/api/collection?document_id=${this.documentId}&block_id=${this.blockId}`,documentMode:"ICONLIBRARY",rowModifier:"plane",collectionTemplateSettings:this.collectionTemplateSettings,filters:{}}));this.sandbox.addModules(t),this.$container.find(".js-b-iconlibrary__collection-area").html(t)}search(t){this.renderLoader(),this.filters.project_id=this.blockSettings.library,t!==void 0&&t.length>0?this.filters.q=t:delete this.filters.q,this.blockSettings.collection!==null&&(this.filters.collections=this.blockSettings.collection),this.query=new URLSearchParams(this.filters).toString(),this.data.get(`/api/assets/search/${this.documentId}/?limit=${this.DEFAULT_ASSET_LIMIT}&${this.query}`).then(a=>{if(a.success){this.fire("facettesChanged",{filters:this.filters,facettes:a.facettes});const r=a.data.sort((p,O)=>{var L,W;const X=p.title,ie=O.title,[,xe,Ae]=(L=X.match(/^(\d*)(.*)/))!=null?L:["","",""],[,Ne,He]=(W=ie.match(/^(\d*)(.*)/))!=null?W:["","",""],Je=Number(xe),vt=Number(Ne);return xe!==""&&Ne!==""?Je!==vt?Je-vt:Ae.localeCompare(He):xe!==""?-1:Ne!==""?1:X.localeCompare(ie)});this.renderSearchResults(r),this.fire("libraryAssetsSearched",{filters:this.filters})}this.fire("BlockReady",{block:this.$ctx.data("block")},["events"])})}enterCollection(t){this.filters.collections=t.id,this.renderLoader(),this.resetSearchFilter(),this.data.get(`/api/collection?collection_token=${t.token}`).then(a=>{a.success&&(this.renderSearchResults(a.assets),this.fire("collectionLoaded",a))})}leaveCollection(){delete this.filters.collections,this.resetSearchFilter(),this.search()}renderSearchResults(t){this.$container.find(".js-b-iconlibrary__results").html((0,e.EY)(ga,{assets:t}))}renderLoader(){this.$container.find(".js-b-iconlibrary__results").html(Ea((0,e.EY)(ca.T)))}showConnectionModal(){this.data.get(`/api/block/setup?types=iconlibrary&collections=true&brand=${this.brandId}`).then(t=>{const a=t.iconlibraries.map(r=>(r.value=r.id,delete r.id,r.collections&&r.collections.length>0&&(r.collections=r.collections.map(p=>(p.value=p.id,delete p.id,delete p.project_id,p))),r));this.fire("openModal",{modifier:"default",$content:this.getConnectionModalContend(a),closeable:!0})})}getConnectionModalContend(t){const a=t[0]?t[0].value:null,r=t[0]&&t[0].collections?this.addNoSelectionOption(t[0].collections):[],p=r[0]?r[0].value:null,O=Ea((0,e.EY)(qi,{libraries:t,libraryValue:a,collections:r,collectionValue:p}));this.connectionElems=new y.D(O.find(".js-b-iconlibrary__connection-form"),this.sandbox);const L=this.connectionElems.getElem("library"),W=this.connectionElems.getElem("collection");return r.length===0&&W.$ctx.hide(),L.changed=X=>{const ie=t.find(xe=>parseInt(xe.value)===parseInt(X.library));W.setOptions(this.addNoSelectionOption(ie.collections)),ie.collections&&ie.collections.length>0?W.$ctx.show():W.$ctx.hide()},this.connectionElems.validation(()=>this.saveConnection(this.connectionElems.serialize())),O}addNoSelectionOption(t){return[{name:this.translations.allItems,value:null}].concat(t)}saveConnection(t){let a=this.$ctx.closest("section").data("id");a<1&&(a=0);const r={settings:{library:parseInt(t.library)}};t.collection!==null&&t.collection!=="null"&&(r.settings.collection=parseInt(t.collection)),this.data.post(`/api/document/block/${this.pageId}/${a}/${this.blockId}`,r).then(p=>{p.success&&(this.blockSettings=Ea.extend(this.blockSettings,r.settings),this.fire("closeModal",["events"]),this.render())})}getViewerInfo(t,a){return Ea.extend({},a,{show_download_sizes:!1})}onViewerClosed(){this.fire("setViewerTheme",{theme:"dark"},["events"])}onCollectionDisplayRequested(t){this.enterCollection(t)}onCollectionClosed(){this.leaveCollection()}onIconlibraryBlockDownloadOptionsOpened(t){t.$toggle.closest(".mod-block-iconlibrary").is(this.$ctx)&&(t.$menu.html((0,e.EY)(_i,{collection_id:this.blockSettings.collection,show_counts:!0,asset_token:this.assetToken,document_id:this.documentId,collection_token:this.blockSettings.collectionToken,project_token:this.blockSettings.projectToken})),this.sandbox.addModules(t.$menu))}onIconlibraryBlockDownloadOptionsClosed(t){t.$toggle.closest(".mod-block-iconlibrary").is(this.$ctx)&&(this.sandbox.removeModules(t.$menu),t.$menu.html(""))}onEditingEnabled(){this.editing=!0,this.render()}onEditingDisabled(){this.editing=!1,this.render()}async openSettingsInSidebar(){const t=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"icon-library"}),{settings:a,targets:r}=await this.data.getBlock(this.blockId),p=(O,L,W)=>{W==="targets"&&this.data.updateBlockTargets(this.blockId,O,L)};window.emitter.emit("Guideline:setBlockSettingsSidebar",{settingsStructure:rr,settings:a,targets:r,onSettingChanged:p,appBridge:t,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName)})}}const Ki=(0,x.I)(s=>(0,n.jsxs)("li",{className:"row item",children:[(0,n.jsx)("span",{className:"library-icon-preview",children:(0,n.jsx)("i",{className:`icon ${s.class}`})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"library-icon-name",children:s.class}),(0,n.jsxs)("span",{className:"library-icon-character",children:["Character: ",(0,n.jsx)("span",{className:"value",children:s.character?s.character:"&nbsp;"})]})]})]})),vi=(0,x.I)(s=>(0,n.jsxs)("li",{className:"icon row",children:[(0,n.jsx)("span",{className:"library-icon-preview",children:(0,n.jsx)("svg",{className:"icon svg-icon",children:(0,n.jsx)("use",{xlinkHref:`#${s.class}`})})}),(0,n.jsx)("div",{children:(0,n.jsxs)("span",{className:"library-icon-name library-icon-name-svg",children:["#",s.class]})})]}));var Pi=i(88994);const ho=(0,en.hD)({});var $n=i(5181),Po=Object.defineProperty,lr=Object.defineProperties,mr=Object.getOwnPropertyDescriptors,po=Object.getOwnPropertySymbols,cr=Object.prototype.hasOwnProperty,Oo=Object.prototype.propertyIsEnumerable,dr=(s,t,a)=>t in s?Po(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,gr=(s,t)=>{for(var a in t||(t={}))cr.call(t,a)&&dr(s,a,t[a]);if(po)for(var a of po(t))Oo.call(t,a)&&dr(s,a,t[a]);return s},Jn=(s,t)=>lr(s,mr(t));class Wo extends u.j{static get KEY_CODE_ENTER(){return 13}on(t){this.blockId=this.$ctx.data("block"),this.projectId=this.$ctx.data("project"),this.sectionId=this.$ctx.data("sectionId"),this.displayName="Icon Webfont",this.sandbox.subscribe("events",this),this.templates={item:Ki,item_svg:vi},this.$items=this.$ctx.find(".library .icons"),$n(document.body).hasClass("editor-enabled")&&this.onEditingEnabled(),this.bindEvents(),t()}bindEvents(){this.$ctx.on("blur",".js-library-title",t=>{if(!this.editing)return;const a=$n(t.currentTarget),r=this.$ctx.data("library"),p=a.data("field");if(p){const O=a.text(),L={id:r};if(L[p]=O,this.titleLastSaved===O)return;this.data.post(`/api/icon/library/${r}`,L),this.titleLastSaved=O}}),this.$ctx.on("keydown",".js-library-title",t=>{if(this.editing&&t.keyCode===Wo.KEY_CODE_ENTER)return $n(t.currentTarget).trigger("blur"),window.getSelection().removeAllRanges(),!1}),this.$ctx.on("click",".dropzone",()=>this.$ctx.find(".fileupload").trigger("click")),this.$ctx.on("click",".icons-provider .nav a",t=>{const a=$n(t.currentTarget),r=a.data("tab");this.$ctx.find(".icons-provider .nav li.active").removeClass("active"),a.find("li").addClass("active"),this.$ctx.find(".provider-content.active").removeClass("active"),this.$ctx.find(`.tab-${r}`).addClass("active")})}loadLibraryWhenIdGiven(){const t=this.$ctx.data("library");t&&this.data.get(`/api/icon/library/${t}`).then(a=>{a.success&&this.renderIcons(a)})}renderIcons(t){const a=this.$items.find(".col-left"),r=this.$items.find(".col-middle"),p=this.$items.find(".col-right");if(a.empty(),r.empty(),p.empty(),t.icons){const O=t.icons.length;this.$ctx.find(".placeholder").hide();let L="item";t.svg_support&&(L="item_svg",this.$ctx.find(".svg-wrapper").html(t.html)),$n.each(t.icons,(W,X)=>{const ie=$n((0,e.EY)(this.templates[L],X));W>O/3*2?p.append(ie):W>O/3?r.append(ie):a.append(ie)})}else this.$ctx.find(".placeholder").show(),this.editing&&this.$ctx.find(".icons-provider").show();t.library&&(this.$ctx.find(".js-library-title").text(t.library.name),this.titleLastSaved=t.library.name,this.$ctx.find("style").text(t.css_live))}after(){this.loadLibraryWhenIdGiven(),this.$ctx.find(".fileupload").upload({dataType:"json",dropZone:this.$ctx.find(".dropzone"),add:(t,a)=>{var r;((r=a==null?void 0:a.files[0])==null?void 0:r.type)==="application/zip"&&a.submit()},done:(t,a)=>{const r=(a==null?void 0:a.result[0])||{};r.success?this.createIconLibraryAndAddToBlock(r.file_id):this.displayError()}})}createIconLibraryAndAddToBlock(t){return this.createIconLibraryFromFileId(t).then(a=>this.createIconBlockFromLibraryId(a.library_id)).then(()=>this.reloadBlock()).catch(()=>this.displayError())}displayError(){this.fire("swal",{template:"general-error",closeOnConfirm:!0})}createIconLibraryFromFileId(t){return this.data.post("/api/icon/library",{project_id:this.projectId,file_id:t}).then(a=>a!=null&&a.success?a:Promise.reject("Icon library creation failed."))}createIconBlockFromLibraryId(t){return this.data.updateBlock(this.$ctx,{settings:{library:t}}).then(a=>a.success?a:Promise.reject("Icon block update failed."))}reloadBlock(){const t=this.$ctx.dataAsNumber("block");this.data.get(`/api/document/block/${t}`).then(a=>{var r;const p=a.data;if(!p)return;const O=$n((0,e.EY)(Pi.n,Jn(gr({},p),{settings:JSON.parse(JSON.stringify((r=p.settings)!=null?r:"{}")),editable:!0})));this.sandbox.addModules(O),this.sandbox.removeModules([this]),this.$ctx.after(O),this.$ctx.remove()})}onEditingEnabled(){this.editing=!0,this.$ctx.hasClass("icons-available")||this.$ctx.find(".icons-provider").show(),this.tpl.enableSanitizationOnPasting(this.$ctx,'[data-editable="true"]'),this.$ctx.find('[data-editable="true"]').attr("contenteditable",!0)}onEditingDisabled(){this.editing=!1,this.$ctx.find(".icons-provider").hide(),this.tpl.disableSanitizationOnPasting(this.$ctx,'[data-editable="true"]'),this.$ctx.find('[data-editable="true"]').removeAttr("contenteditable")}async openSettingsInSidebar(){const t=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"icons"}),{targets:a}=await this.data.getBlock(this.blockId),r=(p,O,L)=>{L==="targets"&&this.data.updateBlockTargets(this.blockId,p,O)};window.emitter.emit("Guideline:setBlockSettingsSidebar",{settings:{},settingsStructure:ho,targets:a,onSettingChanged:r,appBridge:t,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName)})}}var So=i(26359),fr=Object.defineProperty,To=Object.getOwnPropertySymbols,Gi=Object.prototype.hasOwnProperty,_r=Object.prototype.propertyIsEnumerable,er=(s,t,a)=>t in s?fr(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,Ao=(s,t)=>{for(var a in t||(t={}))Gi.call(t,a)&&er(s,a,t[a]);if(To)for(var a of To(t))_r.call(t,a)&&er(s,a,t[a]);return s};const eo=(0,x.I)(s=>(0,n.jsxs)("figure",{className:"b-image__figure js-b-image__figure clearfix","data-href":s.download_url,children:[(0,n.jsx)("div",{className:`js-co-viewer__open b-image__canvas js-b-image__canvas${s.retina?" retina":""}${s.border?" bordered":""}`,"data-o-viewer-token":s.token,"data-src":s.preview_url,"data-alt":" ","data-width":`${s.width?`${s.width}`:""}`,"data-height":`${s.height?`${s.height}`:""}`,style:Ao({backgroundColor:`${s.background?`${s.background}`:"transparent"}`},s.padding?{padding:`${s.padding}px`}:{}),children:(0,n.jsx)("a",{href:"javascript:;",className:"b-image__link js-b-image__link",children:(0,n.jsx)("div",{className:"b-image__overlay b-image--pointer"})})}),(0,n.jsx)("figcaption",{className:"b-image__caption a-image-caption js-b-image__caption",children:(0,Hs.Ay)(s.caption)})]}));var tr=Object.defineProperty,vr=Object.defineProperties,Ir=Object.getOwnPropertyDescriptors,Er=Object.getOwnPropertySymbols,$r=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable,te=(s,t,a)=>t in s?tr(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,pe=(s,t)=>{for(var a in t||(t={}))$r.call(t,a)&&te(s,a,t[a]);if(Er)for(var a of Er(t))ue.call(t,a)&&te(s,a,t[a]);return s},Xe=(s,t)=>vr(s,Ir(t));const ut=(0,x.I)(s=>(0,n.jsx)("a",Xe(pe({href:`${s.settings.url?`${s.settings.url}`:"javascript:;"}`},s.settings.newWindow?{target:"_blank",rel:"noopener"}:{}),{className:`b-image__link js-b-image__link${s.settings.url!=="javascript:;"?" state-active":""}`,children:(0,n.jsx)("div",{className:"b-image__overlay b-image--pointer"})})));var zt=i(98288);const fs=()=>{var s,t,a,r,p,O,L;return((L=(O=(p=(r=(a=(t=(s=window.application)==null?void 0:s.sandbox)==null?void 0:t.config)==null?void 0:a.context)==null?void 0:r.appearance)==null?void 0:p.privacy)==null?void 0:O.image)==null?void 0:L.download)==="enable"},js={red:255,green:255,blue:255,alpha:1,name:"White"},Ss="hasLink",Ms="link",Ws=(0,en.hD)({basics:[{id:"asset",type:"legacyAssetInput",label:"Image",extensions:[...ia.vB.Images,...ia.vB.Templates,ia.Cq.Pdf],objectTypes:[ia.VZ.ImageVideo,ia.VZ.Canvas],showForTranslations:!0},{id:"retina",label:"2x",type:"switch",defaultValue:!1},{id:Ss,label:"Link",type:"switch",defaultValue:!1,onChange:s=>{var t;return!((t=s.getBlock(Ss))!=null&&t.value)&&s.setBlockValue(Ms,{link:null,openInNewTab:!1})},on:[{id:Ms,type:"linkChooser",clearable:!0,placeholder:"https://example.com"}]}],layout:[{id:"mode",label:"Positioning",type:"segmentedControls",defaultValue:"original",choices:[{value:"original",icon:"MediaObjectTextBottom",label:"Bottom"},{value:"text-top",icon:"MediaObjectTextTop",label:"Top"},{value:"figure",icon:"MediaObjectTextRight",label:"Right"},{value:"text-left",icon:"MediaObjectTextLeft",label:"Left"}]},{id:"alignment",label:"Alignment",type:"segmentedControls",defaultValue:"center",choices:[{value:"left",icon:"ArrowAlignLeft",label:"Left"},{value:"center",icon:"ArrowAlignVerticalCentre",label:"Center"},{value:"right",icon:"ArrowAlignRight",label:"Right"}]},{id:"ratio",label:"Ratio",type:"segmentedControls",defaultValue:"25",choices:[{value:"25",icon:"MediaObjectRatio3To1",label:"25"},{value:"50",icon:"MediaObjectRatio1To1",label:"50"},{value:"75",icon:"MediaObjectRatio1To3",label:"75"}],show:s=>{var t,a;return((t=s.getBlock("mode"))==null?void 0:t.value)==="figure"||((a=s.getBlock("mode"))==null?void 0:a.value)==="text-left"}},{id:"padding",label:"Padding",type:"input",clearable:!0,placeholder:"10px",info:"The spacing between UI elements (e.g. 60px)",onChange:s=>(0,Ii.j)(s,"padding"),rules:[si.o]}],style:[{id:"background",label:"Background",type:"colorInput",defaultValue:js},{id:"border",label:"Border",type:"switch",defaultValue:!1}],security:[{id:"useGlobalSecuritySettings",type:"segmentedControls",defaultValue:"yes",choices:[{value:"yes",label:"Global Settings"},{value:"no",label:"Custom"}],onChange:s=>{var t;((t=s.getBlock("useGlobalSecuritySettings"))==null?void 0:t.value)==="yes"&&s.setBlockValue("downloadable",fs())}},{id:"downloadable",type:"switch",defaultValue:!1,label:"Downloadable",show:s=>{var t;return((t=s.getBlock("useGlobalSecuritySettings"))==null?void 0:t.value)==="no"}}]});var Rn=i(5181),bi=Object.defineProperty,rn=Object.defineProperties,N=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,oe=(s,t,a)=>t in s?bi(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,Se=(s,t)=>{for(var a in t||(t={}))_.call(t,a)&&oe(s,a,t[a]);if(d)for(var a of d(t))M.call(t,a)&&oe(s,a,t[a]);return s},Ze=(s,t)=>rn(s,N(t));class Qe extends u.j{static get STATUS_FINISHED(){return"FINISHED"}on(t){const a=this.$ctx,r=Rn(document.body);this.assetDownload=this.sandbox.getConfigParam("assetDownload"),this.segmentAnalytics=this.sandbox.getConfigParam("segmentAnalytics"),this.$loader=Rn((0,e.EY)(ja.$,{id:this.id})),this.isTranslator=r.dataAsNumber("translator")===1,this.isEditor=!!r.data("editor"),this.projectId=(0,b.MJ)(),this.blockId=this.$ctx.data("block"),this.sectionId=this.$ctx.data("sectionId"),this.displayName="Image",this.sandbox.addModules(this.$loader),this.sandbox.subscribe("events",this),this.editing=Rn(document.body).hasClass("editor-enabled"),this.isReferenced=this.$ctx.data("reference-token")!==void 0,this.assetId=a.data("asset"),this.filename=a.data("filename"),this.genericUrl=a.data("genericUrl"),this.statusOnMount=a.data("status"),this.copyrightDownloadConsensus=a.data("copyrightDownloadConsensus"),this.copyrightNotice=a.data("copyrightNotice"),this.licenses=a.data("licenses"),this.licenseToken=a.data("licenseToken"),this.downloadUrl=a.data("downloadUrl"),this.$caption=a.find(".js-b-image__caption"),this.emptyCaptionsHandled=!1,this.$canvas=this.$ctx.find(".js-b-image__canvas"),this.printView=r.data("printview"),this.pollRegister=new So.B,this.$dropzoneProgressContainer=null,this.appBridge=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"image"}),a.on("click",".js-b-image__replace-image-upload",()=>{a.find(".js-m-dropzone__upload").trigger("click")}),a.on("click",".js-m-assetchooser-placeholder, .js-b-image__replace-image-choose",()=>{this.openAssetChooser()}),a.on("click",".js-b-image__actions",p=>{p.stopPropagation()}),this.bindDownload(),t(),a.on("click",".js-co-viewer__open",p=>{Rn(p.currentTarget).find(".js-b-image__link").attr("href")!=="javascript:;"&&!this.editing&&p.stopPropagation()})}after(){const t=this.$ctx,a=t.find(".js-m-dropzone");this.$dropzoneProgressContainer=a.find(".js-m-dropzone__progress-container"),this.handleEmptyCaptions(!1),this.updateImage(),this.statusOnMount!==Qe.STATUS_FINISHED&&this.assetId&&this.performImageProcessingStatusCheck(this.assetId,this.workspaceAssetOnMount),t.find(".js-m-dropzone__upload").upload({dataType:"json",dropZone:a,add:(r,p)=>{const O=(0,kn.F6)(),L=p.name.split(".").pop().toLowerCase();O.includes(L)?this.data.checkStorageLimit(p.files[0].size).then(()=>{p.submit()}):this.fire("swal",{template:"block-upload-unsupported-format",closeOnConfirm:!0})},start:()=>{a.find(".icon-image").replaceWith(this.$loader),this.$dropzoneProgressContainer.addClass("visible")},progress:(r,p)=>{const O=parseInt(p.loaded/p.total*100,10);a.find(".js-m-dropzone__progress-bar").css("width",`${O}%`),this.fire("progress",{id:this.id,progress:O})},done:async(r,p)=>{var O;if((O=p==null?void 0:p.result[0])!=null&&O.file_id){const L=await(0,Oa.Vq)(p.result[0].file_id,this.projectId);this.setImageAndUpdateSettings(L.id,!1),L.status!==Qe.STATUS_FINISHED&&this.performImageProcessingStatusCheck(L.id)}}})}performImageProcessingStatusCheck(t){this.pollRegister.register(t,(a,r)=>{this.data.get(`/api/screen/styleguide/${t}/${this.projectId}`).then(p=>{p.data.generic_url&&p.data.status===Qe.STATUS_FINISHED?(this.$dropzoneProgressContainer.removeClass("visible"),this.renderImage(p.data),r()):a()})})}handleEmptyCaptions(t){Rn.each(this.$caption,(a,r)=>{const p=Rn(r);if(t)return this.emptyCaptionsHandled=!0,p.show();p.html().trim()==="<p><br></p>"&&!t&&p.hide()})}updateImage(t){const a=this.$ctx.find(".js-b-image__canvas");if(!a.data("src"))return this.fire("BlockReady",{block:this.$ctx.data("block")},["events"]),!1;const r=a.find(".mod-c-image"),p=this.$ctx.find(".js-b-image__wrap"),O=a.hasClass("retina")?ma.t.PIXEL_DENSITY_2:ma.t.PIXEL_DENSITY_1,L=a.data("src"),W=a.data("alt").toString().replaceAll('"',""),X=a.hasClass("bordered"),ie=a.dataAsNumber("width"),xe=a.dataAsNumber("height");let Ae=ma.t.ALIGNMENT_CENTER;if(p.hasClass("align-image-left")?Ae=ma.t.ALIGNMENT_LEFT:p.hasClass("align-image-right")&&(Ae=ma.t.ALIGNMENT_RIGHT),r.length>0){if(r.dataAsNumber("originalWidth",ie),r.dataAsNumber("originalHeight",xe),r.dataAsString("previewUrl",L),r.dataAsNumber("pixelDensity",O),r.dataAsString("alt",W),r.dataAsBoolean("roundedCorners",X),r.dataAsString("alignment",Ae),t===!0){const Ne=new Date().getTime();r.dataAsNumber("forceSrcUpdate",Ne)}}else{const Ne=Rn((0,e.EY)(xa,{allowShrinkingToIncreaseDensity:!this.isPrintView(),originalWidth:ie,originalHeight:xe,previewUrl:L,pixelDensity:O,alt:W,roundedCorners:X,alignment:Ae}));this.sandbox.addModules(Ne),a.append(Ne)}this.fire("BlockReady",{block:this.$ctx.data("block")},["events"]),this.bindEditor(),this.editing&&this.enableEditor()}bindDownload(){this.$ctx.on("click",".js-b-image__download-link",()=>{this.assetDownload.downloadAsset({id:this.assetId,filename:this.filename,generic_url:this.genericUrl,licenses:this.licenses,license_token:this.licenseToken,copyright_download_consensus:this.copyrightDownloadConsensus,meta_copyright_notice:this.copyrightNotice},this.downloadUrl),this.segmentAnalytics.trackDownload("styleguide block image",this.filename,"image",null,this.genericUrl,null,!1,!1,this.filename,null,null),this.trackAssetDownloadForPlatformAnalytics(this.$ctx.data("asset-data"))})}trackAssetDownloadForPlatformAnalytics(t){try{yt.w.track([{type:"asset:download",brandId:(0,et.M)(),properties:{asset_ext:t.ext,asset_id:t.id,download_type:"SINGLE",project_id:t.project,project_type:t.project_type,revision_id:t.revision,via:(0,b.Xv)(),via_id:(0,b._j)(),block_id:this.blockId}}])}catch(a){console.error(a)}}bindEditor(){if(this.isReferenced||!this.isEditor&&!this.isTranslator)return!1;this.richtextEditor&&this.richtextEditor.destroy();const t=this.$ctx.find(".js-b-image__caption");this.richtextEditor=new Pn.j(t,this.sandbox,{theme:"image-caption",set:"caption",placeholder:"Add a description...",project:(0,b.MJ)()});const a=!this.richtextEditor.empty||t.html().trim()!=="<p><br></p>";this.toggleCaptionVisibility(a),this.richtextEditor.saved=r=>{this.data.updateBlock(this.$ctx,{settings:{caption:r}})}}enableEditor(){if(!this.editing||!this.richtextEditor)return!1;!this.richtextEditor.empty&&!this.emptyCaptionsHandled&&this.handleEmptyCaptions(!0),this.toggleCaptionVisibility(!0),this.richtextEditor.enable()}disableEditor(){if(!this.richtextEditor)return!1;this.richtextEditor.empty&&this.toggleCaptionVisibility(!1),this.richtextEditor.disable()}onEditingEnabled(){this.editing=!0,this.enableEditor()}onEditingDisabled(){this.editing=!1,this.disableEditor()}getDownloadability(){return this.$ctx.dataAsBoolean("imageAndVideoDownloadsEnabled")}getViewerInfo(t,a){const r=Rn.extend({},a);a.caption&&(r.description=a.caption),r.background=this.$ctx.find(".js-b-image__canvas").css("background-color"),r.tracking={blockType:"image"};const p=this.getDownloadability();return r.downloadEnabled=p,r.show_download_sizes=p,r.hide_attachments=!p,r}onImageAndVideoDownloadsConfigured(){this.reloadAndReplaceSelf()}onAssetViewerConfigured(){this.reloadAndReplaceSelf()}reloadAndReplaceSelf(){this.data.get(`/api/document/block/${this.$ctx.data("block")}`).then(t=>{var a;const r=t.data;if(!r)return;const p=Rn((0,e.EY)(zt.W,Ze(Se({},r),{settings:JSON.parse(JSON.stringify((a=r.settings)!=null?a:"{}")),editable:!0,has_translator_settings:!0})));this.sandbox.addModules(p),this.sandbox.removeModules([this]),this.$ctx.after(p),this.$ctx.remove()})}setImageAndUpdateSettings(t,a){const r=this.$ctx.data("asset");r&&this.pollRegister.isRegistered(r)&&this.pollRegister.unregister(r),this.data.get(`/api/screen/styleguide/${t}/${(0,b.MJ)()}`).then(p=>{const O=p.data;this.renderImage(O),this.updateSettings(O,a)})}getOriginalFileDimensions(t){return new Promise((a,r)=>{const p=new Image;p.onload=()=>a({height:p.naturalHeight,width:p.naturalWidth}),p.onerror=r,p.src=t})}updateSettings(t,a){var r,p,O;const L=this.$ctx.find(".js-b-image__figure").length>0,W=this.$ctx.find(".js-b-image__canvas");let X=null;const ie={settings:{asset:t.id,retina:L&&W?W.hasClass("retina"):((r=t.filename)==null?void 0:r.indexOf("2x"))>0,background:(p=t.background_color)!=null?p:"transparent",isWorkspaceAsset:a}};!L&&!this.isTranslator&&(X=(O=t.filename)==null?void 0:O.replace(/(<([^>]+)>)|["'/\\‘“]/g,""),ie.settings.caption=X),this.data.updateBlock(this.$ctx,ie)}async renderImage(t){var a,r,p,O,L;this.$ctx.data("asset",t.id);const W=this.$ctx.find(".js-b-image__figure"),X=W.length>0;let ie=null,xe=null;const Ae=W.find(".js-b-image__canvas"),Ne=X?Ae.hasClass("retina"):((a=t.filename)==null?void 0:a.indexOf("2x"))>0;X||this.isTranslator?xe=this.richtextEditor?(r=this.richtextEditor)==null?void 0:r.getContentAsHtml():null:(ie=(p=t.filename)==null?void 0:p.replace(/(<([^>]+)>)|["'/\\‘“]/g,""),Rn(".js-m-dropzone__upload",this.$ctx).attr("name","files_replace"),this.$ctx.data("asset",t.id)),this.$ctx.find(".btn-download").attr("href",`/api/screen/download/${t.token}`);const He=Ae.css("background-color"),Je=this.$ctx.find(".js-b-image__wrap");this.sandbox.removeModules(Je);let vt=t.height,Dt=t.width;if(t.status!==Qe.STATUS_FINISHED||vt===null&&Dt===null){const Lt=await this.getOriginalFileDimensions(t.preview_url);vt=Lt.height,Dt=Lt.width}Je.html((0,e.EY)(eo,{id:t.id,preview_url:t.preview_url,caption:ie||xe||"",retina:Ne,border:Ae.hasClass("bordered"),padding:parseInt(Ae.css("padding")),token:t.token,height:vt,width:Dt,background:(L=(O=t.background_color)!=null?O:He)!=null?L:"transparent"})),this.$ctx.addClass("state-available"),this.updateImage()}setRetina(t){const a=this.$ctx.find(".js-b-image__canvas");t?a.addClass("retina"):a.removeClass("retina"),this.updateImage(),this.data.updateBlock(this.$ctx,{settings:{retina:t}})}setBorder(t){const a=this.$ctx.find(".js-b-image__canvas"),r=this.$ctx.find(".mod-c-image");t?(a.addClass("bordered"),r.addClass("c-image--rounded-corners")):(a.removeClass("bordered"),r.removeClass("c-image--rounded-corners")),this.updateImage(),this.data.updateBlock(this.$ctx,{settings:{border:t}})}setShouldInheritDownloadSettings(t){return t?this.$ctx.addClass("js-b-imagegrid__inherited"):this.$ctx.removeClass("js-b-imagegrid__inherited"),this.data.updateBlock(this.$ctx,{settings:{downloadable_inherited:t}})}setDownloadable(t){const a=this.$ctx.find(".js-b-image__download-link");return t?a.removeClass("state-hidden"):a.addClass("state-hidden"),this.$ctx.attr("data-image-and-video-downloads-enabled",t?"true":"false"),this.data.updateBlock(this.$ctx,{settings:{downloadable:t}})}setBackground(t){this.$ctx.find(".js-b-image__canvas").css({"background-color":t}),this.data.updateBlock(this.$ctx,{settings:{background:t}})}setPadding(t){var a;const r=(a=parseInt(t))!=null?a:0;this.$ctx.find(".js-b-image__canvas").css({padding:`${r}px`}),this.data.updateBlock(this.$ctx,{settings:{padding:t}})}setMode(t){const a=this.$ctx.find(".js-b-image__wrap"),r=t==="original"||t==="text-top";return a.toggleClass("mode-original",t==="original"),a.toggleClass("mode-figure",t==="figure"),a.toggleClass("mode-text-left",t==="text-left"),a.toggleClass("mode-text-top",t==="text-top"),this.$ctx.find(".cm-setting-chooser--ratio").toggleClass("cm-setting-chooser--ratio--hidden",r),this.updateImage(!0),this.data.updateBlock(this.$ctx,{settings:{mode:t}}),!1}setAlignment(t){const a=this.$ctx.find(".js-b-image__wrap");return a.toggleClass("align-image-center",t==="center"),a.toggleClass("align-image-left",t==="left"),a.toggleClass("align-image-right",t==="right"),this.updateImage(),this.data.updateBlock(this.$ctx,{settings:{alignment:t}}),!1}setRatio(t){const a=this.$ctx.find(".js-b-image__wrap");return a.toggleClass("text-ratio-25",t===25),a.toggleClass("text-ratio-50",t===50),a.toggleClass("text-ratio-75",t===75),this.updateImage(!0),this.data.updateBlock(this.$ctx,{settings:{ratio:t}}),!1}setLink(t,a){const r=typeof t=="string"?{settings:{link:{url:t},url:t}}:{settings:{link:t,url:t==null?void 0:t.link}};a!==void 0&&(r.settings.newWindow=a),this.data.updateBlock(this.$ctx,r),this.$ctx.find(".js-b-image__link").replaceWith((0,e.EY)(ut,r))}openAssetChooser(){const t=[{key:"ext",values:(0,kn.F6)()}],a=this.$ctx.data("asset");a&&t.push({key:"id",values:[a],inverted:!0});const r=(0,e.EY)(aa.l,{externalData:{id:this.blockId},multiSelectionAllowed:!1,filters:t});this.fire("openModal",{modifier:"flex",$content:r},["events"])}onAssetChooserAssetChosen(t){t&&t.externalData&&t.externalData.id===this.blockId&&(this.fire("closeModal",["events"]),t.screenIds&&t.screenIds.length>0&&this.setImageAndUpdateSettings(t.screenIds[0],!0))}toggleCaptionVisibility(t){const a=this.$ctx.find(".js-b-image__caption");t?a.toggleClass("state-hidden",!1):a.toggleClass("state-hidden",!0)}isPrintView(){return this.printView===1}async openSettingsInSidebar(){var t,a,r;const{settings:p,targets:O}=await this.data.getBlock(this.blockId);p.ratio=`${p.ratio}`,(t=p.background)!=null||(p.background=js),p.useGlobalSecuritySettings=p.downloadable_inherited?"yes":"no",p.link={link:p.link,openInNewTab:p.newWindow},p.hasLink=((r=(a=p.url)==null?void 0:a.trim)==null?void 0:r.call(a).length)>0,p.downloadable=this.getDownloadability();const L=(W,X,ie,xe)=>{var Ae;if(ie==="targets"){this.data.updateBlockTargets(this.blockId,W,X);return}switch(W){case"asset":this.setImageAndUpdateSettings(X.value,X.source===Ai.j.Library);break;case"mode":this.setMode(X);break;case"alignment":this.setAlignment(X);break;case"ratio":this.setRatio(parseInt(X));break;case"padding":this.setPadding(X);break;case"border":this.setBorder(X);break;case"link":case"hasLink":{const Ne=(Ae=xe.getBlock("link"))==null?void 0:Ae.value;this.setLink(Ne==null?void 0:Ne.link,Ne==null?void 0:Ne.openInNewTab);break}case"background":{const Ne=Ba(X);this.setBackground(Ne?Xn()(Ne).toRgbString():null);break}case"useGlobalSecuritySettings":this.setShouldInheritDownloadSettings(X==="yes");break;case"downloadable":this.setDownloadable(X);break;case"retina":this.setRetina(X,!1);break}};window.emitter.emit("Guideline:setBlockSettingsSidebar",{settings:p,settingsStructure:Ws,targets:O,onSettingChanged:L,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName),appBridge:this.appBridge})}stop(){this.pollRegister.unregisterAll()}}var _t=i(64698);const Ft=(0,x.I)(s=>(0,n.jsx)("img",{className:"b-imagegrid__image js-b-imagegrid__image lazyload","data-src":s.src,alt:s.alt}));var Rs=Object.defineProperty,ta=Object.defineProperties,Fa=Object.getOwnPropertyDescriptors,yi=Object.getOwnPropertySymbols,mo=Object.prototype.hasOwnProperty,zo=Object.prototype.propertyIsEnumerable,Qa=(s,t,a)=>t in s?Rs(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,to=(s,t)=>{for(var a in t||(t={}))mo.call(t,a)&&Qa(s,a,t[a]);if(yi)for(var a of yi(t))zo.call(t,a)&&Qa(s,a,t[a]);return s},Or=(s,t)=>ta(s,Fa(t));const fa=(0,x.I)(s=>(0,n.jsx)("a",Or(to({href:`${s.url?`${s.url}`:"javascript:;"}`},s.newWindow?{target:"_blank",rel:"noopener"}:{}),{className:"b-imagegrid__link js-b-imagegrid__link"})));var so=Object.defineProperty,yl=Object.getOwnPropertySymbols,Tr=Object.prototype.hasOwnProperty,wl=Object.prototype.propertyIsEnumerable,Qr=(s,t,a)=>t in s?so(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,Xr=(s,t)=>{for(var a in t||(t={}))Tr.call(t,a)&&Qr(s,a,t[a]);if(yl)for(var a of yl(t))wl.call(t,a)&&Qr(s,a,t[a]);return s};const Nr=(0,x.I)(s=>!s.asset&&!s.id?(0,n.jsx)("li",{className:"b-imagegrid__item js-b-imagegrid__item"}):(0,n.jsx)("li",{className:"b-imagegrid__item js-b-imagegrid__item","data-asset":s.asset,"data-retina":s.retina,"data-id":s.id,"data-is-workspace-asset":s.isWorkspaceAsset,"data-generic-url":s.asset_data.generic_url,"data-preview-url":s.asset_data.preview_url,"data-status":s.status,children:(0,n.jsxs)("figure",{className:"b-imagegrid__figure","data-href":s.asset_data.download_url,"data-token":s.asset_data.token,"data-filename":s.asset_data.filename,children:[(0,n.jsxs)("div",{className:"b-imagegrid__image-wrap js-b-imagegrid__image-wrap js-co-viewer__open",style:Xr(Xr({},s.padding?{padding:`${s.padding}px`}:{}),s.background?{backgroundColor:`${s.background}`}:{}),"data-o-viewer-token":s.asset_data.token,"data-src":s.asset_data.preview_url,"data-alt":s.title,children:[s.assetViewerEnabled||s.url?(0,n.jsx)(fa,Xr({},s)):null,(0,n.jsxs)("div",{className:"inline-actions b-imagegrid__actions js-b-imagegrid__actions",children:[(0,n.jsx)("button",{"data-href":s.asset_data.download_url,"data-filename":s.asset_data.filename,className:`btn btn-icon btn-download js-b-imagegrid__download ${s.downloadable?"":"state-hidden"}`,children:(0,n.jsx)("i",{className:"icon-download"})}),s.utils.account.hasPermission("translate")?(0,n.jsxs)("div",{className:"cm-btn-dropdown",children:[(0,n.jsx)("button",{className:"btn btn-icon btn-editor js-cm-btn-dropdown__toggle js-b-imagegrid__settings","data-event":"imagegridSettings",children:(0,n.jsx)("i",{className:"icon-angle-down"})}),(0,n.jsx)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--fixed-width js-cm-btn-dropdown__menu"})]}):null]})]}),(0,n.jsx)("div",{className:"b-imagegrid__title-wrapper a-image-title",children:(0,n.jsx)("div",{className:"b-imagegrid__title js-b-imagegrid__title",placeholder:window.translate("Legacy_styleguide_block_imagegrid_setting_title_placeholder"),children:s.title.trim()?(0,Hs.Ay)(s.title.trim()):null})}),(0,n.jsx)("div",{className:"b-imagegrid__desc-wrapper a-image-caption",children:(0,n.jsx)("figcaption",{className:"b-imagegrid__desc js-b-imagegrid__desc",placeholder:window.translate("Legacy_styleguide_block_imagegrid_setting_description_placeholder"),children:s.caption.trim()?(0,Hs.Ay)(s.caption.trim()):null})})]})})),gl=(0,x.I)(()=>(0,n.jsx)("div",{className:"b-imagegrid__loader",children:(0,n.jsx)("div",{className:"b-imagegrid__loader-progress js-b-imagegrid__loader-progress"})}));var fl=i(27833),Ar=i(61872);const qr=(0,x.I)(s=>{const t=s.translator_only?window.translate("Legacy_styleguide_block_imagegrid_action_translate"):window.translate("Legacy_styleguide_block_imagegrid_action_replace");return(0,n.jsxs)("div",{className:"b-imagegrid__settings-overlay js-b-imagegrid__settings-overlay",children:[(0,n.jsxs)("div",{className:"b-imagegrid__settings-fields",children:[(0,n.jsx)(E.p,{size:"large",title:t}),(0,n.jsxs)("div",{className:"b-imagegrid__replace-options",children:[(0,n.jsxs)("div",{className:"b-imagegrid__replace-option js-b-imagegrid__replace-upload",children:[(0,n.jsx)("i",{className:"b-imagegrid__replace-option-icon ca-icon--upload ca-icon--md"}),(0,n.jsx)("span",{className:"b-imagegrid__replace-option-text",children:window.translate("Legacy_btn_upload")})]}),(0,n.jsxs)("div",{className:"b-imagegrid__replace-option js-b-imagegrid__replace-choose",children:[(0,n.jsx)("i",{className:"b-imagegrid__replace-option-icon ca-icon--image-library ca-icon--md"}),(0,n.jsx)("span",{className:"b-imagegrid__replace-option-text",children:window.translate("Legacy_assetchooser_choose_button")})]})]})]}),(0,n.jsxs)("div",{className:"b-imagegrid__settings-fields",children:[(0,n.jsx)(E.p,{size:"large",title:window.translate("Legacy_styleguide_block_imagegrid_settings_image")}),(0,n.jsx)($t.I,{id:"retina",label:window.translate("Legacy_styleguide_block_imagegrid_settings_image_@2x"),checked:s.asset.retina===void 0||s.asset.retina===!0}),(0,n.jsx)(Ar.w,{id:"link",label:window.translate("Legacy_styleguide_block_imagegrid_settings_link"),placeholder:window.translate("Legacy_editor_link_example"),value:{url:s.asset.url}}),(0,n.jsx)($t.I,{modifier:"tooltip",type:"checkbox",id:"newWindow",label:window.translate("Legacy_styleguide_block_text_settings_target_blank"),checked:s.asset.newWindow}),s.utils.account.hasPermission("edit")&&!(0,Wt.YZ)()?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ys.t,{id:"padding",label:`${window.translate("Legacy_styleguide_block_imagegrid_settings_padding")} (px)`,value:s.asset.padding||0}),(0,n.jsx)(H.X,{picker:!0,palette:s.project,id:"background",label:window.translate("Legacy_styleguide_block_imagegrid_settings_background"),value:s.asset.background||"rgba(255,255,255,1)"}),(0,n.jsx)(fl.H,{id:"delete",label:window.translate("Legacy_styleguide_block_imagegrid_settings_delete"),description:window.translate("Legacy_styleguide_block_imagegrid_settings_delete_desc")})]}):null]})]})});var xl=i(62964);const _l=(0,en.hD)({layout:[{id:"columns",label:"Columns",type:"segmentedControls",defaultValue:"2",choices:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"}]}],style:[{id:"border",label:"Border",type:"switch",defaultValue:!1}],security:[{id:"useGlobalSecuritySettings",type:"segmentedControls",defaultValue:"yes",choices:[{value:"yes",label:"Global Settings"},{value:"no",label:"Custom"}],onChange:s=>{var t;((t=s.getBlock("useGlobalSecuritySettings"))==null?void 0:t.value)==="yes"&&s.setBlockValue("downloadable",fs())}},{id:"downloadable",type:"switch",defaultValue:!1,label:"Downloadable",show:s=>{var t;return((t=s.getBlock("useGlobalSecuritySettings"))==null?void 0:t.value)==="no"}}]});var dn=i(5181),U=Object.defineProperty,ce=Object.defineProperties,be=Object.getOwnPropertyDescriptors,Ye=Object.getOwnPropertySymbols,nt=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable,lt=(s,t,a)=>t in s?U(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,wt=(s,t)=>{for(var a in t||(t={}))nt.call(t,a)&&lt(s,a,t[a]);if(Ye)for(var a of Ye(t))rt.call(t,a)&&lt(s,a,t[a]);return s},ct=(s,t)=>ce(s,be(t));class It extends u.j{static get STATUS_FINISHED(){return"FINISHED"}constructor(t,a,r){super(t,a,r),this.$body=null,this.$document=null}on(t){this.$body=dn(document.body),this.$document=dn(".document"),this.isTranslator=this.$body.dataAsNumber("translator")===1,this.editors=[],this.segmentAnalytics=this.sandbox.getConfigParam("segmentAnalytics"),this.assetDownload=this.sandbox.getConfigParam("assetDownload"),this.assetViewerEnabled=this.$ctx.dataAsBoolean("assetViewerEnabled"),this.$loader=dn((0,e.EY)(ja.$,{id:this.id})),this.sandbox.addModules(this.$loader),this.sandbox.subscribe("events",this),this.blockSettings=null,this.isReferenced=this.$ctx.data("reference-token")!==void 0,this.blockId=this.$ctx.data("block"),this.sectionId=this.$ctx.data("sectionId"),this.projectId=(0,b.MJ)(),this.displayName="Image Grid",this.editing=this.$body.hasClass("editor-enabled"),this.allGridImages=0,this.readyGridImages=0,this.pollRegister=new So.B,this.sortable=null,this.$ctx.on("click",".js-m-assetchooser-placeholder",()=>{this.openAssetChooser("add")}),this.removeTrailingNewLineFromAssetTitle(),this.$ctx.on("blur",".js-b-imagegrid__title",a=>{const r=dn(a.currentTarget),p=r.closest(".js-b-imagegrid__item").data("asset");return this.getAsset(p).then(O=>{O.title=r.html();const L={settings:{}};L.settings[`assets[asset=${p}]`]={title:O.title},this.data.updateBlock(this.$ctx,L)}),!1}),this.$ctx.on("keypress",".js-b-imagegrid__title",a=>{a.keyCode===13&&dn(a.currentTarget).trigger("blur")}),(this.$document.data("editor")||this.$document.data("translator"))&&(this.$ctx.find(".js-b-imagegrid__desc").each((a,r)=>{this.editors.push(this.bindEditor(r))}),this.$ctx.on("click",".js-b-imagegrid__desc a",a=>{this.editing&&a.preventDefault()})),this.$ctx.on("click",".js-co-viewer__open",a=>{const r=dn(a.currentTarget),p=dn(a.target),O=p.hasClass("js-b-imagegrid__link")&&(p.attr("href")!=="javascript:;"||!this.assetViewerEnabled)||p.hasClass("js-b-imagegrid__image-wrap")&&!this.assetViewerEnabled,L=this.editing&&r.find(".js-b-imagegrid__actions").hasClass("state-open")&&p.closest(".js-b-imagegrid__settings").length===0;(O||L)&&a.stopPropagation()}),this.bindDownload(),this.updateImages(),this.performMultipleImageProcessingCheck(),dn(document.body).hasClass("editor-enabled")&&this.onEditingEnabled(),t()}removeTrailingNewLineFromAssetTitle(){this.$ctx.on("input",".js-b-imagegrid__title",t=>{t.target.innerHTML==="<br>"&&dn(t.target).html("")})}bindEditor(t){const a=dn(t),r=new Pn.j(a,this.sandbox,{theme:"image-caption",set:"caption",placeholder:a.attr("placeholder"),project:this.projectId,saveDelay:1e3});if(r){const p=r.getContentAsHtml(),O=p==="<p><br></p>"?"":p;r.setContent(O),r.destroy()}return a.on("click",()=>{this.editing&&(r.enable(),r.focus())}),r.saved=p=>{const O=a.closest(".js-b-imagegrid__item").data("asset"),L=p==="<p><br></p>"?"":p;this.getAsset(O).then(W=>{const X={settings:{}};W.caption=L,X.settings[`assets[asset=${O}]`]={caption:L},this.data.updateBlock(this.$ctx,X)})},r}bindDownload(){this.$ctx.on("click",".js-b-imagegrid__download",t=>{t.stopPropagation();const a=dn(t.target).closest(".js-b-imagegrid__item"),r=a.data("filename"),p=a.data("genericUrl");this.assetDownload.downloadAsset({id:a.data("asset"),file_name:r,generic_url:p,licenses:a.data("licenses"),license_token:a.data("licenseToken"),copyright_download_consensus:a.data("copyrightDownloadConsensus"),meta_copyright_notice:a.data("copyrightNotice")},a.data("downloadUrl")),this.segmentAnalytics.trackDownload("styleguide block imagegrid",r,"imagegrid",null,p,null,!1,!1,r,null,null),this.trackAssetDownloadForPlatformAnalytics(a.data("asset-data"))})}performMultipleImageProcessingCheck(){const t=this.$ctx.find(`.js-b-imagegrid__item:not([data-status=${It.STATUS_FINISHED}])`);dn.each(t,(a,r)=>{const p=dn(r).dataAsString("asset");this.performImageProcessingStatusCheck(p)})}updateImages(){const t=this.$ctx,a=t.find(".js-b-imagegrid__item");this.allGridImages=a.length,dn.each(a,(r,p)=>{this.updateImage(dn(p))}),this.fire("BlockReady",{block:t.data("block")},["events"])}getOriginalFileDimensions(t){return new Promise((a,r)=>{const p=new Image;p.onload=()=>a({height:p.naturalHeight,width:p.naturalWidth}),p.onerror=r,p.src=t})}async updateImage(t){const a=t.dataAsString("previewUrl"),r=t.dataAsBoolean("retina")?ma.t.PIXEL_DENSITY_2:ma.t.PIXEL_DENSITY_1;let p=t.dataAsNumber("originalWidth"),O=t.dataAsNumber("originalHeight");if(t.dataAsString("status")!==It.STATUS_FINISHED||Number.isNaN(O)&&Number.isNaN(p)){const Ae=await this.getOriginalFileDimensions(a);O=Ae.height,p=Ae.width}const W=t.find(".js-b-imagegrid__image-wrap"),X=W.find(".mod-c-image"),ie=`${W.data("alt")}`.replaceAll('"',""),xe=dn((0,e.EY)(xa,{originalWidth:p,originalHeight:O,previewUrl:a,pixelDensity:r,alt:ie,allowShrinkingToIncreaseDensity:!1}));X.length>0?(this.sandbox.removeModules(X),X.replaceWith(xe)):W.append(xe),this.sandbox.addModules(xe),this.imageGridReadyCheck()}imageGridReadyCheck(){this.readyGridImages++,this.allGridImages-this.readyGridImages===0&&(this.$ctx.removeAttr("data-ready"),this.fire("BlockReady",{block:this.$ctx.data("block")},["events"]))}getDownloadability(){return this.$ctx.dataAsBoolean("imageAndVideoDownloadsEnabled")}after(){const t=this.$ctx;t.find(".js-b-imagegrid__replace").upload({dataType:"json",add:(a,r)=>{const p=this.$ctx.find(".js-b-imagegrid__replace-form .js-b-imagegrid__asset-id").val();if(typeof p=="undefined"||p==0)return!1;r.asset=p,this.data.checkStorageLimit(r.files[0].size).then(()=>{const O=this.$ctx.find(`.js-b-imagegrid__item[data-asset="${r.asset}"]`);if(this.sandbox.removeModules(O),r.context=dn((0,e.EY)(Nr)),window.File&&window.FileList&&window.FileReader){const L=new FileReader;L.onload=W=>{var X;r.context.append(dn((0,e.EY)(gl))),r.context.append(dn((0,e.EY)(Ft,{src:(X=W.target)==null?void 0:X.result,alt:""}))),O.replaceWith(r.context),r.submit()},L.readAsDataURL(r.files[0])}})},progress:(a,r)=>{const p=parseInt(r.loaded/r.total*100,10);dn(".js-b-imagegrid__loader-progress",r.context).css("width",`${p}%`)},done:async(a,r)=>{var p,O;if((p=r==null?void 0:r.result[0])!=null&&p.file_id){const L=await(0,Oa.Vq)(r.result[0].file_id,(O=this.$document)==null?void 0:O.data("project")),W=this.$ctx.find(".js-b-imagegrid__replace-form .js-b-imagegrid__asset-id").val();this.setImage(W,L.id,r.context,!1)}}}),t.find(".js-m-dropzone__upload").upload({dataType:"json",dropZone:t.find(".js-m-dropzone"),add:(a,r)=>{const p=(0,kn.F6)().concat((0,kn.EA)(),(0,kn.J2)(),["zip","indd","indt"]),O=r.name.split(".").pop().toLowerCase();p.includes(O)?this.data.checkStorageLimit(r.files[0].size).then(()=>{if(r.context=dn((0,e.EY)(Nr)),window.File&&window.FileList&&window.FileReader){const L=new FileReader;L.onload=W=>{r.context.append(dn((0,e.EY)(gl))),r.context.append(dn((0,e.EY)(Ft,{src:W.target.result,alt:""}))),this.$ctx.find(".js-b-imagegrid__grid").append(r.context),r.submit()},L.readAsDataURL(r.files[0])}else this.$ctx.find(".js-b-imagegrid__grid").append(r.context),r.submit()}):this.fire("swal",{template:"block-upload-unsupported-format",closeOnConfirm:!0})},start:()=>{t.find(".dropzone").find(".fi-image").hide().after(this.$loader)},progress:(a,r)=>{const p=parseInt(r.loaded/r.total*100,10);dn(".js-b-imagegrid__loader-progress",r.context).css("width",`${p}%`)},progressall:(a,r)=>{const p=parseInt(r.loaded/r.total*100,10);this.fire("progress",{id:this.id,progress:p})},stop:()=>{this.$loader.detach(),t.find(".dropzone .fi-image").show(),this.fire("progressReset",{id:this.id})},done:async(a,r)=>{var p,O;if((p=r==null?void 0:r.result[0])!=null&&p.file_id){const L=await(0,Oa.Vq)(r.result[0].file_id,(O=this.$document)==null?void 0:O.data("project"));this.setImage(null,L.id,r.context,!1)}}})}performImageProcessingStatusCheck(t){this.pollRegister.register(t,async(a,r)=>{const{data:p}=await this.data.get(`/api/screen/styleguide/${t}/${this.projectId}`);p.generic_url&&p.status===It.STATUS_FINISHED?(this.replaceImage(t,p,null),r()):a()})}async setImage(t,a,r,p){const{data:O}=await this.data.get(`/api/screen/styleguide/${a}/${this.projectId}`);t?this.replaceImage(t,O,r,p):await this.insertImage(O,r,p),O.status!==It.STATUS_FINISHED&&this.performImageProcessingStatusCheck(O.id)}replaceImage(t,a,r,p){if(t===a.id)return;let O=this.$ctx.find(`.js-b-imagegrid__item[data-asset="${t}"]`);this.sandbox.removeModules(O),this.pollRegister.isRegistered(t)&&this.pollRegister.unregister(t),r||(r=dn((0,e.EY)(Nr,{isWorkspaceAsset:!0})),r.append(dn((0,e.EY)(Ft,{src:a.preview_url,alt:a.title}))),O.replaceWith(r)),this.getAsset(t).then(L=>{const W={settings:{}};L.asset=a.id,L.asset_data={token:a.token,filename:a.filename,preview_url:a.preview_url.replace("{width}",800),generic_url:a.generic_url},L.isWorkspaceAsset=p,L.background=a.background_color||"transparent",(0,Wt.YZ)()&&(L.translated=!0),W.settings[`assets[asset=${t}]`]=L,this.data.updateBlock(this.$ctx,W),O=dn((0,e.EY)(Nr,ct(wt({},L),{assetViewerEnabled:this.assetViewerEnabled}))),r.replaceWith(O),this.enableEditableAttributesOnItem(O),this.cleanupEditorArray(),this.updateImage(O)})}async insertImage(t,a,r){a||(a=dn((0,e.EY)(Nr,{isWorkspaceAsset:r}))),this.sandbox.removeModules(a),a.find(".js-b-imagegrid__image").remove(),a.append(dn((0,e.EY)(Ft,{src:t.preview_url,alt:""}))),this.$ctx.find(".js-b-imagegrid__grid").append(a);const p={asset:t.id,title:t.title.replaceAll(/(<([^>]+)>)|["'/\\‘“]/g,""),caption:"",id:t.id,asset_data:{token:t.token,filename:t.filename,generic_url:t.generic_url,preview_url:t.preview_url,download_url:t.download_url},isWorkspaceAsset:r,background:t.background_color||"transparent",downloadable:this.getDownloadability()};await this.data.updateBlock(this.$ctx,{settings:{"assets[]":p}}).then(()=>this.getBlockSettings()).then(O=>{p.asset_data.generic_url=t.generic_url,p.asset_data.preview_url=t.preview_url,p.asset_data.download_url=t.download_url,O.assets.push(p);const L=dn((0,e.EY)(Nr,ct(wt({},p),{assetViewerEnabled:this.assetViewerEnabled})));a.replaceWith(L),this.enableEditableAttributesOnItem(L),this.updateImage(L)})}enableEditableAttributesOnItem(t){t.find(".js-b-imagegrid__title").attr("contenteditable",!0);const a=t.find(".js-b-imagegrid__desc");this.editors.push(this.bindEditor(a))}cleanupEditorArray(){this.editors=this.editors.filter(t=>t.$ctx[0].isConnected?!0:(t.stop(),!1))}bindSettings(t){const a=this.$ctx,r=t.data("asset"),p=t.find(".js-cm-btn-dropdown__menu"),O=dn((0,e.EY)(_t.I,{menu_content:(0,e.EY)(ca.T),show_close_btn:!0}));this.tpl.addAndActivate(p,O),this.getAsset(r).then(L=>{this.$ctx.find(".js-cm-btn-dropdown__content").html((0,e.EY)(qr,{project:this.blockSettings.project,asset:L,isTranslator:this.isTranslator}));const X=O.find(".js-b-imagegrid__settings-overlay");this.individualSettings=new y.D(X,this.sandbox),this.individualSettings.getSetting("retina").saved=ie=>{const xe={settings:{}};xe.settings[`assets[asset=${r}]`]={retina:ie.retina},this.data.updateBlock(a,xe),t.dataAsBoolean("retina",ie.retina),this.updateImage(t)},this.individualSettings.getSetting("background").saved=ie=>{const xe=t.find(".js-b-imagegrid__image-wrap"),Ae={settings:{}};xe.css({"background-color":ie.background}),Ae.settings[`assets[asset=${r}]`]={background:ie.background},this.data.updateBlock(a,Ae)},this.individualSettings.getSetting("padding").saved=ie=>{const xe=t.find(".js-b-imagegrid__image-wrap"),Ae={settings:{}},Ne=parseInt(ie.padding);isNaN(Ne)||(xe.css({padding:`${Ne}px`}),Ae.settings[`assets[asset=${r}]`]={padding:Ne},this.data.updateBlock(a,Ae))},this.individualSettings.getSetting("link").saved=ie=>{const xe={settings:{}};xe.settings[`assets[asset=${r}]`]={url:ie.link.url},dn.extend(!0,L,xe.settings[`assets[asset=${r}]`]),t.find(".js-b-imagegrid__link").replaceWith(dn((0,e.EY)(fa,L))),this.data.updateBlock(a,xe)},this.individualSettings.getSetting("newWindow").saved=ie=>{const xe={settings:{}};xe.settings[`assets[asset=${r}]`]={newWindow:ie.newWindow},dn.extend(!0,L,xe.settings[`assets[asset=${r}]`]),t.find(".js-b-imagegrid__link").replaceWith(dn((0,e.EY)(fa,L))),this.data.updateBlock(a,xe)},this.individualSettings.getSetting("delete").deleted=()=>{const ie=t.data("is-workspace-asset"),xe={settings:{}};xe.settings[`assets[asset=${r}]`]=null,t.remove(),this.data.updateBlock(a,xe),ie||this.deleteItem(r),this.pollRegister.isRegistered(r)&&this.pollRegister.unregister(r)},X.on("click",".js-b-imagegrid__replace-upload",ie=>{ie.stopPropagation();const xe=a.find(".js-b-imagegrid__replace-form");xe.find(".js-b-imagegrid__asset-id").val(r),xe.find(".js-b-imagegrid__replace").trigger("click")}),X.on("click",".js-b-imagegrid__replace-choose",()=>{this.openAssetChooser("replace",r)})})}enableSorting(){const t=this.$ctx,a=t.find(".js-b-imagegrid__grid").get(0);if(!a)throw new Error("Element not found.");this.sortable=Vs.Ay.create(a,{group:`images-${this.blockId}`,handle:".js-b-imagegrid__image-wrap",ghostClass:"sortable-ghost",onUpdate:()=>{const r=[];dn.each(t.find(".js-b-imagegrid__item"),(p,O)=>{r.push(this.getAsset(dn(O).data("asset")))}),Promise.all(r).then(p=>{p=p.map(O=>(delete O.asset_data,O)),this.data.updateBlock(t,{settings:{assets:p}})})}})}onEditingDisabled(){this.editing=!1;for(const t of this.editors)if(t.disable(),t){const a=t.getContentAsHtml(),r=a==="<p><br></p>"?"":a;t.setContent(r),t.destroy()}this.tpl.disableSanitizationOnPasting(this.$ctx,".js-b-imagegrid__title[contenteditable]"),this.$ctx.find(".js-b-imagegrid__title").removeAttr("contenteditable"),this.sortable&&this.sortable.option("disabled",!0),this.fire("closeDropdown",this.$ctx.find(".js-b-imagegrid__settings"))}onEditingEnabled(){this.editing=!0,!this.isReferenced&&(this.tpl.enableSanitizationOnPasting(this.$ctx,".js-b-imagegrid__title[contenteditable]"),dn(".js-b-imagegrid__title",this.$ctx).attr("contenteditable",!0),this.sortable?this.sortable.option("disabled",!1):dn(document.body).data("editor")&&!(0,Wt.YZ)()&&this.enableSorting())}onImagegridSettingsOpened(t){const a=this.$ctx.get(0);if(!a)throw new Error("Element not found.");if(!dn.contains(a,t.$toggle.get(0)))return!1;t.$toggle.closest(".js-b-imagegrid__actions").addClass("state-open"),this.bindSettings(t.$toggle.closest(".js-b-imagegrid__item"))}onImagegridSettingsClosed(t){t.$toggle.closest(".js-b-imagegrid__actions").removeClass("state-open")}onImageAndVideoDownloadsConfigured(){this.reloadAndReplaceSelf()}onAssetViewerConfigured(){this.reloadAndReplaceSelf()}reloadAndReplaceSelf(){this.data.get(`/api/document/block/${this.$ctx.data("block")}`).then(t=>{var a;const r=t.data;if(!r)return;const p=dn((0,e.EY)(xl.q,ct(wt({},r),{settings:JSON.parse(JSON.stringify((a=r.settings)!=null?a:"{}")),editable:!0,has_translator_settings:!1})));this.sandbox.addModules(p),this.sandbox.removeModules([this]),this.$ctx.after(p),this.$ctx.remove()})}getViewerInfo(t,a){const r={};if(r.title=t.title,r.description=t.caption,r.background=t.background,dn.isArray(a.assets)){const O=a.assets.find(L=>parseInt(L.asset)===parseInt(t.id));O&&(r.title=O.title,r.description=O.caption,r.background=O.background)}const p=this.getDownloadability();return r.downloadEnabled=p,r.show_download_sizes=p,r.hide_attachments=!p,r.tracking={blockType:"imagegrid"},r}getAsset(t){return this.getBlockSettings().then(a=>a.assets.find(r=>parseInt(r.asset)===parseInt(t)))}getBlockSettings(){if(this.blockSettings)return Promise.resolve(this.blockSettings);if(this.blockSettingsPromise)return this.blockSettingsPromise;const t=this.$ctx;let a=`/api/document/block/${t.data("block")}`;const r=(0,Wt.YZ)();return r&&(a+=`?lang=${r}`),this.blockSettingsPromise=this.data.get(a).then(p=>{this.blockSettings=p.data.settings;for(const O of this.blockSettings.assets){const L=t.find(`.js-b-imagegrid__item[data-asset="${O.asset}"]`);O.asset_data={token:L.data("token"),filename:L.data("filename")}}return this.blockSettings})}async deleteItem(t){await this.data.delete(`/api/assets/${t}`)}setDownloadable(t){const a=this.$ctx.find(".js-b-imagegrid__download");return t?a.removeClass("state-hidden"):a.addClass("state-hidden"),this.$ctx.attr("data-image-and-video-downloads-enabled",t?"true":"false"),this.data.updateBlock(this.$ctx,{settings:{downloadable:t}})}setShouldInheritDownloadSettings(t){return t?this.$ctx.addClass("js-b-imagegrid__inherited"):this.$ctx.removeClass("js-b-imagegrid__inherited"),this.data.updateBlock(this.$ctx,{settings:{downloadable_inherited:t}})}async setColumns(t){const a=this.$ctx.find(".js-b-imagegrid__grid");a.removeClass("grid-1 grid-2 grid-3 grid-4"),a.addClass(`grid-${t}`),this.updateImages(),await this.data.updateBlock(this.$ctx,{settings:{columns:t}})}async setBorder(t){this.$ctx.find(".js-b-imagegrid__grid").toggleClass("state-border",t),this.updateImages(),await this.data.updateBlock(this.$ctx,{settings:{border:t}})}openAssetChooser(t,a){const p=[{key:"ext",values:(0,kn.F6)().concat((0,kn.EA)(),(0,kn.J2)(),["zip","indd","indt"])}],O=this.$ctx.find(".js-b-imagegrid__item").toArray().map(W=>dn(W).data("asset"));O&&p.push({key:"id",values:O,inverted:!0});const L=(0,e.EY)(aa.l,{externalData:{id:this.blockId,action:t,assetId:a},multiSelectionAllowed:t==="add",filters:p});this.fire("openModal",{modifier:"flex",$content:L},["events"])}async onAssetChooserAssetChosen(t){if(t&&t.externalData&&t.externalData.id===this.blockId&&(this.fire("closeModal",["events"]),t.screenIds&&t.screenIds.length>0)){if(t.externalData.action==="add")for(const a of t.screenIds)await this.setImage(null,a,void 0,!0);else if(t.externalData.action==="replace"){const a=t.externalData.assetId;this.setImage(a,t.screenIds[0],void 0,!0)}}}async openSettingsInSidebar(){const t=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"image-grid"}),{settings:a,targets:r}=await this.data.getBlock(this.blockId);a.columns=`${a.columns}`,a.downloadable=this.getDownloadability(),a.useGlobalSecuritySettings=a.downloadable_inherited?"yes":"no";const p=(O,L,W)=>{if(W==="targets"){this.data.updateBlockTargets(this.blockId,O,L);return}switch(O){case"columns":this.setColumns(L);break;case"border":this.setBorder(L);break;case"useGlobalSecuritySettings":this.setShouldInheritDownloadSettings(L==="yes");break;case"downloadable":this.setDownloadable(L);break}};window.emitter.emit("Guideline:setBlockSettingsSidebar",{settings:a,settingsStructure:_l,targets:r,onSettingChanged:p,appBridge:t,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName)})}trackAssetDownloadForPlatformAnalytics(t){if(t)try{yt.w.track([{type:"asset:download",brandId:(0,et.M)(),properties:{asset_ext:t.ext,asset_id:t.id,download_type:"SINGLE",project_id:t.project,project_type:t.project_type,revision_id:t.revision,via:(0,b.Xv)(),via_id:(0,b._j)(),block_id:this.blockId}}])}catch(a){console.error(a)}}stop(){this.pollRegister.unregisterAll()}}var xt=i(4187),Vt=i(13804),Rt=i(72842),ss=i(42548),Mt=i(71112),ht=i(16829),Le=i(41594);const qt=({defaultPort:s=5600,onFormSubmit:t})=>{const[a,r]=(0,Le.useState)(s.toString()),p=O=>{O.preventDefault(),t(Number(a))};return(0,n.jsx)("form",{onSubmit:p,className:"tw-w-full tw-flex tw-justify-center tw-rounded tw-border tw-border-black-10 tw-py-5",children:(0,n.jsxs)(Rt.W,{padding:"s",spacing:"s",direction:"column",children:[(0,n.jsx)(ss.MJ,{label:{htmlFor:"port-block",children:"Development server port"},children:(0,n.jsx)(Mt.k,{id:"port-block",type:Mt.G.Number,placeholder:s.toString(),value:a,onChange:r})}),(0,n.jsx)(ht.$n,{type:"submit",children:"Connect"})]})})};var Fs=i(93789),Kt=i(46223),ws=i(36763),In=i.n(ws),Gn=i(50928),Xs=i.n(Gn),vs=i(52924),mn=i.n(vs),ha=i(97339),ur=i.n(ha),pa=i(67471),Un=i.n(pa),$s=i(93644),ln=i.n($s),Va=i(5801),ii={};ii.styleTagTransform=ln(),ii.setAttributes=ur(),ii.insert=mn().bind(null,"head"),ii.domAPI=Xs(),ii.insertStyleElement=Un();var kr=In()(Va.Ay,ii),Lr=Va.Ay&&Va.Ay.locals?Va.Ay.locals:void 0;const el={loading:`tw-text-violet-60 ${Va.PQ}`,info:"tw-text-violet-60 tw-border-dashed tw-border-2 tw-border-violet-60",danger:"tw-bg-box-negative tw-text-box-negative-inverse"},tl={connecting:"loading","websocket-closed":"info","no-settings-structure":"danger","wrong-app-type":"danger","cli-not-running":"danger"},Wr={connecting:null,"websocket-closed":(0,n.jsx)(Fs.default,{size:Ma.l.Size24}),"no-settings-structure":(0,n.jsx)(Fs.default,{size:Ma.l.Size24}),"wrong-app-type":(0,n.jsx)(Fs.default,{size:Ma.l.Size24}),"cli-not-running":(0,n.jsx)(Fs.default,{size:Ma.l.Size24})},zr=({type:s})=>(0,n.jsxs)("span",{className:(0,Kt.h)(["tw-p-5 tw-flex tw-gap-4 tw-items-center tw-rounded-sm tw-transition-opacity tw-ease-in-out",el[tl[s]]]),children:[Wr[s],s==="connecting"&&"Connecting to the Frontify CLI...",s==="websocket-closed"&&"The Frontify CLI has been stopped, refresh your page to reconnect.",s==="cli-not-running"&&"Error while loading your local block, is your CLI running?",s==="wrong-app-type"&&"Error while loading your local block, is your CLI serving a block?",s==="no-settings-structure"&&"Error while loading your local block, are you exporting your block settings structure?"]}),sl=()=>(0,n.jsx)("div",{className:"tw-w-full tw-flex tw-flex-col tw-items-center tw-my-2 tw-text-text-weak",children:(0,n.jsxs)("p",{children:["Please ",(0,n.jsx)("a",{href:"#",onClick:s=>{s.preventDefault(),window.location.reload()},className:"tw-text-black-80 tw-underline hover:tw-text-black tw-inline-block",children:"refresh the page"})," ","to enable fast reloading after code changes."]})});var G=i(52795),ae=i(70726),ye=i(92832);const gt=(0,en.hD)({main:[{id:"notificationError",type:"notification",title:"The settings structure of this block could not be loaded",footer:{label:"More information about settings",href:"https://developer.frontify.com/d/XFPCrGNrXQQM/content-blocks#/details-concepts/content-blocks/a-basic-content-block",target:"_blank"},styles:{type:ye.VF.Warning,icon:!0,divider:ye.Jf.Top}}]});class dt extends u.j{constructor(){super(...arguments),this.removeDeleteHandler=()=>{typeof this.currentDeleteHandler=="function"&&window.emitter.off("Block:Deleted",this.currentDeleteHandler)}}static get LOCAL_SCRIPT_IDENTIFIER(){return"local-block-development-scripts"}static get LOCAL_REFRESH_MODULE_IDENTIFIER(){return"local-block-development-refresh-module"}static get LOCAL_CLI_CLIENT_IDENTIFIER(){return"local-block-development-cli-client"}static get LOCAL_STYLE_IDENTIFIER(){return"local-block-development-styles"}static get LOCALSTORAGE_PORT_KEY(){return"local-block-development-port"}async on(t){this.sandbox.subscribe("events",this),this.blockId=this.$ctx.data("block"),this.sectionId=this.$ctx.data("sectionId")||void 0,this.displayName="Dev Block",this.translationState=this.$ctx.data("translationState"),this.$reactContainer=this.$ctx.find(".react-container"),this.$reloadActionContainer=this.$ctx.find(".reload-action-container"),this.port=this.loadSetPort(),this.settingsStructure=void 0,this.currentDeleteHandler=null,this.registerDeleteHandler(),(0,e.Cc)(zr,this.$reactContainer[0],{type:"connecting"});const a=await this.getEntrypointUrl();this.hasPortSet()&&a?await this.renderCustomEsmBlock(a):(this.renderOptions(),this.setDataReady(!0));const p=document.querySelector("script[data-react-mode]");p&&p.getAttribute("data-react-mode")==="production"&&(0,e.Cc)(sl,this.$reloadActionContainer[0]),t()}isNewBlock(){var t;const a=(t=window.blockSettings[this.blockId])!=null?t:{};return Object.keys(a).length===0}stop(){this.removeDeleteHandler()}hasPortSet(){return this.loadSetPort()}renderOptions(){(0,e.Cc)(qt,this.$reactContainer[0],{onFormSubmit:async t=>{this.port=t,this.saveChanges();const a=await this.getEntrypointUrl();a&&await this.renderCustomEsmBlock(a)}})}async renderCustomEsmBlock(t){var a,r;this.removeExistingCustomBlockScriptsAndStyles(),this.loadCliClientFromLocalhost(),this.loadReactRefreshFromLocalhost();let p;try{if(p=await import(t).then(L=>L.default),((r=(a=window.DevCustomBlock)==null?void 0:a.dependencies)!=null&&r.appBridge?(0,xt.Q)(window.DevCustomBlock.dependencies.appBridge):3)===4)this.appBridge=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"local-block-development"});else{const L=await Promise.resolve().then(i.bind(i,69124)).then(W=>W.AppBridge);this.appBridge=new L("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"local-block-development"})}}catch(O){this.registerDeleteHandler(p),(0,e.Cc)(zr,this.$reactContainer[0],{type:"cli-not-running"});return}if(!p.block){this.registerDeleteHandler(p),(0,e.Cc)(zr,this.$reactContainer[0],{type:"wrong-app-type"});return}try{this.settingsStructure=await(0,ae.M)(p.settings),this.isNewBlock()&&await(0,G.N)(p,this.appBridge),this.translationState||await(0,Vt.p)(this.settingsStructure,this.blockId,O=>this.appBridge.updateBlockSettings(O))}catch(O){console.error(O),this.registerDeleteHandler(p),(0,e.Cc)(zr,this.$reactContainer[0],{type:"no-settings-structure"});return}this.registerDeleteHandler(p),(0,e.s4)(this.$reactContainer[0]),(0,e.Cc)(p.block,this.$reactContainer[0],{appBridge:this.appBridge}),this.setDataReady(!0)}registerDeleteHandler(t=null){this.removeDeleteHandler(),this.currentDeleteHandler=async({appBridge:a,callback:r})=>{a.getBlockId()===this.blockId&&(t&&await(0,G.U)(t,a),await r())},window.emitter.on("Block:Deleted",this.currentDeleteHandler)}saveChanges(){localStorage.setItem(`${dt.LOCALSTORAGE_PORT_KEY}-${this.blockId}`,this.port)}loadSetPort(){return localStorage.getItem(`${dt.LOCALSTORAGE_PORT_KEY}-${this.blockId}`)}getBlockIdentifier(t){return`${t}-${this.blockId}`}async getEntrypointUrl(){return this.data.get(`http://localhost:${this.port}/_entrypoint`).then(t=>{var a;return(a=t.url)!=null?a:null}).catch(()=>null)}removeExistingCustomBlockScriptsAndStyles(){for(const t of document.querySelectorAll([`script[name=${this.getBlockIdentifier(dt.LOCAL_SCRIPT_IDENTIFIER)}]`,`script[name=${this.getBlockIdentifier(dt.LOCAL_CLI_CLIENT_IDENTIFIER)}]`,`script[name=${this.getBlockIdentifier(dt.LOCAL_REFRESH_MODULE_IDENTIFIER)}]`,`link[name=${this.getBlockIdentifier(dt.LOCAL_STYLE_IDENTIFIER)}]`].join(",")))t.parentNode&&t.parentNode.removeChild(t)}loadCliClientFromLocalhost(){const t=document.createElement("script");t.setAttribute("src",`http://localhost:${this.port}/@vite/client`),t.setAttribute("type","module"),t.setAttribute("name",this.getBlockIdentifier(dt.LOCAL_CLI_CLIENT_IDENTIFIER)),document.head.appendChild(t)}loadReactRefreshFromLocalhost(){const t=document.createElement("script");t.setAttribute("name",this.getBlockIdentifier(dt.LOCAL_REFRESH_MODULE_IDENTIFIER)),t.setAttribute("type","module"),t.innerText=`
                    import RefreshRuntime from "http://localhost:${this.port}/@react-refresh";
                    RefreshRuntime.injectIntoGlobalHook(window);
                    window.$RefreshReg$ = () => {};
                    window.$RefreshSig$ = () => (type) => type;
                    window.__vite_plugin_react_preamble_installed__ = true;
                `,document.head.appendChild(t)}async openSettingsInSidebar(){var t,a,r;const{settings:p,targets:O}=await this.data.getBlock(this.blockId),L=(W,X)=>{window.blockSettings[this.blockId][W]=X,p[W]=X,this.appBridge.updateBlockSettings({[W]:X}),window.emitter.emit("AppBridge:BlockSettingsUpdated",{blockId:this.blockId,blockSettings:p})};window.emitter.emit("Guideline:setBlockSettingsSidebar",{settingsStructure:(r=(a=this.settingsStructure)!=null?a:(t=window.DevCustomBlock)==null?void 0:t.settings)!=null?r:gt,settings:p,targets:O,onSettingChanged:L,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName),appBridge:this.appBridge})}setDataReady(t){this.$ctx.length>0&&this.$ctx[0].setAttribute("data-ready",t.toString())}}var jt=Object.defineProperty,Ct=Object.defineProperties,St=Object.getOwnPropertyDescriptors,Gt=Object.getOwnPropertySymbols,kt=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable,ts=(s,t,a)=>t in s?jt(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,ms=(s,t)=>{for(var a in t||(t={}))kt.call(t,a)&&ts(s,a,t[a]);if(Gt)for(var a of Gt(t))Pt.call(t,a)&&ts(s,a,t[a]);return s},ns=(s,t)=>Ct(s,St(t));const us=(0,x.I)(s=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h3",{className:"pattern-title","data-field":"name","data-editable":"true",children:s.name}),s.description?(0,n.jsx)("p",{className:"pattern-description","data-field":"description","data-editable":"true",children:s.description}):null,(0,n.jsx)("div",{className:"pattern pattern-main",children:s.snippets.html||s.mode=="CODE"?(0,n.jsx)("div",{className:"preview row",children:(0,n.jsx)("iframe",{title:"preview",sandbox:"allow-scripts allow-pointer-lock allow-same-origin allow-popups allow-forms",src:s.preview_url,frameBorder:"0",scrolling:"no",style:{width:"100%"},allowFullScreen:!0})}):(0,n.jsx)("img",{className:"preview-image",src:s.image,alt:"preview of the pattern"})}),(0,n.jsxs)("div",{className:"code state-collapsed",children:[(0,n.jsxs)("header",{children:[(0,n.jsxs)("ul",{className:"nav row",children:[(0,n.jsx)("li",{className:"active","data-tab":"code-editor-html",children:s.html_mode}),(0,n.jsx)("li",ns(ms({"data-tab":"code-editor-css"},!s.snippets.css||!s.snippets.css.code?{className:"state-hidden"}:{}),{children:s.css_mode=="NONE"?"CSS":s.css_mode})),(0,n.jsx)("li",ns(ms({"data-tab":"code-editor-js"},!s.snippets.js||!s.snippets.js.code?{className:"state-hidden"}:{}),{children:"JS"}))]}),(0,n.jsx)("a",{href:s.builder,className:"lnk-builder",children:window.translate("Pattern_action_editInBuilder")}),(0,n.jsx)("div",{className:"visibility"})]}),(0,n.jsxs)("div",{className:"code-editor code-editor-html active","data-type":"html","data-snippet":`${s.snippets.html?`${s.snippets.html.id}`:""}`,"data-mode":"htmlmixed",children:[(0,n.jsx)("textarea",{"aria-label":"HTML",title:"HTML",children:s.snippets.html?(0,Hs.Ay)(s.snippets.html.code):null}),(0,n.jsx)("div",{className:`code-error ${s.snippets.html&&parseInt(s.snippets.html.error)?"state-error":""}`,children:(0,n.jsx)("i",{className:"icon-exclamation-circle"})})]}),(0,n.jsxs)("div",{className:"code-editor code-editor-css","data-type":"css","data-snippet":`${s.snippets.css?`${s.snippets.css.id}`:""}`,"data-mode":s.css_mode.toLowerCase(),children:[(0,n.jsx)("textarea",{"aria-label":"CSS",title:"CSS",children:s.snippets.css?(0,Hs.Ay)(s.snippets.css.code):null}),(0,n.jsx)("div",{className:`code-error ${s.snippets.css&&parseInt(s.snippets.css.error)?"state-error":""}`,children:(0,n.jsx)("i",{className:"icon-exclamation-circle"})})]}),(0,n.jsxs)("div",{className:"code-editor code-editor-js","data-type":"js","data-snippet":`${s.snippets.js?`${s.snippets.js.id}`:""}`,"data-mode":s.js_mode.toLowerCase(),children:[(0,n.jsx)("textarea",{"aria-label":"JavaScript",title:"JavaScript",children:s.snippets.js?(0,Hs.Ay)(s.snippets.js.code):null}),(0,n.jsx)("div",{className:`code-error ${s.snippets.js&&parseInt(s.snippets.js.error)?"state-error":""}`,children:(0,n.jsx)("i",{className:"icon-exclamation-circle"})})]}),(0,n.jsxs)("div",{className:"b-pattern__expand-collapse",children:[(0,n.jsxs)("button",{className:"b-pattern__expand js-b-pattern__expand",children:[(0,n.jsx)("i",{className:"icon-plus"})," Click to expand"]}),(0,n.jsxs)("button",{className:"b-pattern__collapse js-b-pattern__collapse",children:[(0,n.jsx)("i",{className:"icon-arrow-up"})," Collapse"]})]})]}),(0,n.jsxs)("div",{className:"breakpoints",children:[(0,n.jsx)("div",{className:"btn-change-breakpoint tt-bottom","data-width":`${s.breakpoints.desktop?`${s.breakpoints.desktop}`:"1200"}`,"data-tooltip":`Desktop (${s.breakpoints.desktop?`${s.breakpoints.desktop}`:"1200"}px)`,children:(0,n.jsx)("i",{className:"icon-desktop"})}),(0,n.jsx)("div",{className:"btn-change-breakpoint tt-bottom","data-width":`${s.breakpoints.default?`${s.breakpoints.default}`:"800"}`,"data-tooltip":`Default (${s.breakpoints.default?`${s.breakpoints.default}`:"800"}px)`,children:(0,n.jsx)("i",{className:"icon-tablet"})}),(0,n.jsx)("div",{className:"btn-change-breakpoint tt-bottom","data-width":`${s.breakpoints.mobile?`${s.breakpoints.mobile}`:"400"}`,"data-tooltip":`Mobile (${s.breakpoints.mobile?`${s.breakpoints.mobile}`:"400"}px)`,children:(0,n.jsx)("i",{className:"icon-mobile"})})]})]})),Os=(0,x.I)(s=>(0,n.jsxs)("div",{className:"visibility__status",children:[(0,n.jsx)("i",{className:`${s.visibility==="private"?" ca-icon--view-slash":" ca-icon--view"}`}),(0,n.jsx)("span",{className:"visibility__desc",children:s.visibility==="private"?window.translate("Pattern_visibility_editors"):window.translate("Pattern_visibility_everyone")})]}));var Jt=i(82479);const Nt=(0,en.hD)({layout:[{id:"height",type:"input",label:"Height",placeholder:"auto",rules:[Jt.I],onChange:s=>(0,Ii.j)(s,"height")}]});var Bt=i(5181);class Et extends u.j{static get DEFAULT_MIN_HEIGHT(){return 20}on(t){const a=this.$ctx;this.resizableIsInitialized=!1,this.blockId=this.$ctx.data("block"),this.sectionId=this.$ctx.data("sectionId"),this.displayName="UI Pattern",this.sandbox.subscribe("events",this),this.breakpoints=a.data("breakpoints"),this.errors={},this.codemirror_html=null,this.codemirror_css=null,this.codemirror_js=null,this.editing=Bt(document.body).hasClass("editor-enabled"),this.$items=Bt(".patterns",a),Bt(document.body).hasClass("editor-enabled")&&!a.hasClass("referenced")&&(this.tpl.enableSanitizationOnPasting(this.$ctx,'[data-editable="true"]'),Bt('[data-editable="true"]',a).attr("contenteditable",!0)),a.on("click",".code-error",r=>{const p=Bt(r.currentTarget);p.removeClass("state-error");const O=p.closest(".code-editor").data("type"),L=this.errors[O];L&&(Bt(L.node).removeClass("inline-error-hidden"),this.errors[O].changed())}),a.on("click",".btn-change-breakpoint",r=>{if(Bt(r.currentTarget).data("width")>800){const p=(Bt(r.currentTarget).data("width")-800)/2;Bt("iframe",a).animate({width:Bt(r.currentTarget).data("width"),marginLeft:-p,marginRight:-p},()=>{this.resize()})}else Bt("iframe",a).animate({width:Bt(r.currentTarget).data("width"),marginLeft:0,marginRight:0},()=>{this.resize()})}),a.on("blur",'.pattern-title[data-editable="true"], .pattern-description[data-editable="true"]',r=>{if(Bt(document.body).hasClass("editor-enabled")){const p=Bt(r.currentTarget),O={};O[p.data("field")]=p.text(),this.data.put(`/api/patterns/${a.data("pattern")}`,O)}}),a.on("keydown",'[data-editable="true"]',r=>{if(Bt(document.body).hasClass("editor-enabled")&&r.keyCode===13)return Bt(r.currentTarget).trigger("blur"),window.getSelection().removeAllRanges(),!1}),a.on("click",".visibility",r=>{if(Bt(document.body).hasClass("editor-enabled")){const p=Bt(r.currentTarget).hasClass("state-private")?"public":"private";this.data.updateBlock(a,{settings:{visibility:p}}),this.renderVisibility(p)}}),a.on("click",".nav li",r=>{const p=Bt(r.currentTarget).closest("ul").find("li.active"),O=Bt(r.currentTarget).closest(".code").find(".code-editor.active");p.removeClass("active"),O.removeClass("active"),Bt(r.currentTarget).closest(".code").find(`.code-editor.${Bt(r.currentTarget).data("tab")}`).addClass("active"),Bt(r.currentTarget).addClass("active"),this.codemirror_html.refresh(),this.codemirror_css.refresh(),this.codemirror_js.refresh()}),a.on("mouseenter",".code-editor",r=>{const p=Bt(r.currentTarget);parseInt(p.height())>80&&a.find(".js-b-pattern__expand, .js-b-pattern__collapse").addClass("state-visible")}),a.on("mouseenter",".js-b-pattern__expand, .js-b-pattern__collapse",r=>{Bt(r.currentTarget).addClass("state-visible")}),a.on("mouseleave",".js-b-pattern__expand, .js-b-pattern__collapse",r=>{Bt(r.currentTarget).removeClass("state-visible")}),a.on("mouseleave",".code-editor",()=>{a.find(".js-b-pattern__expand, .js-b-pattern__collapse").removeClass("state-visible")}),a.on("click",".js-b-pattern__expand",r=>{Bt(r.currentTarget).removeClass("state-visible"),this.expand()}),a.on("click",".js-b-pattern__collapse",r=>{Bt(r.currentTarget).removeClass("state-visible"),this.collapse()}),t()}after(){const t=this.$ctx,a=t.data("pattern");if(Bt(".btn-create-pattern",t).on("click",()=>{const r={project:t.data("project"),name:t.data("txtPlaceholderTitle"),granularity:"ATOM",mode:"CODE"};t.addClass("available"),this.data.post("/api/patterns",r).then(p=>{if(p.success){t.data("pattern",p.pattern.id);const O={settings:{id:p.pattern.id}};this.data.updateBlock(t,O),this.loadPattern(p.pattern.id)}})}),a>0)this.initializeCode(),this.fire("BlockReady",{block:t.data("block")},["events"]);else{if(!this.editing)return;const r=Bt(".btn-choose-pattern select",t);this.data.get(`/api/patterns/list/${t.data("project")}`).then(p=>{this.fire("BlockReady",{block:t.data("block")},["events"]),p.success&&Bt.each(p.patterns,(O,L)=>{r.append(`<option value="${L.id}">${L.name}</option>`)})}),r.on("change",()=>{t.addClass("available"),t.data("pattern",r.val());const p={settings:{id:r.val()}};this.data.updateBlock(t,p),this.loadPattern(r.val())})}}loadPattern(){const a=`/api/patterns/${this.$ctx.data("pattern")}`;this.data.get(a).then(r=>{if(r.success){const p=r.pattern;p.breakpoints=this.breakpoints,p.height=parseInt(p.height)+15;const O=Bt((0,e.EY)(us,p));this.$items.append(O),Bt(document.body).hasClass("editor-enabled")&&Bt('[data-editable="true"]',this.$ctx).attr("contenteditable",!0),this.initializeCode(),this.fire("BlockReady",{block:this.$ctx.data("block")},["events"])}})}saveHeight(t){var a;const r=typeof t.height=="number"?`${t.height}px`:t.height;this.data.updateBlock(this.$ctx,{settings:{height:r}}),window.blockSettings[this.blockId].height=r;const p=this.$ctx.find("iframe"),O=p.get(0);O&&(r&&r!=="auto"?(p.css("min-height",r),O.contentWindow.postMessage({iframeHeight:r},window.location.origin)):(p.css("min-height",""),(a=O.contentWindow)==null||a.postMessage({iframeHeight:Et.DEFAULT_MIN_HEIGHT},window.location.origin),setTimeout(this.resize(),100)))}initializeCode(){var t,a;let r=!0;const p=this.$ctx.find("iframe"),O=(a=(t=window.blockSettings)==null?void 0:t[this.blockId].height)!=null?a:p.data("height");if(Bt(document.body).hasClass("editor-enabled")&&!this.$ctx.hasClass("referenced")&&(r=!1),this.$ctx.data("deleted")){this.$ctx.find(".patterns").hide();return}p.iFrameResize({checkOrigin:!1,resizeFrom:"child",minHeight:O!=null?O:Et.DEFAULT_MIN_HEIGHT,resizedCallback:()=>{this.fire("BlockReady",{block:this.$ctx.data("block")},["events"])}}),O&&p.css("min-height",O);const L=this.$ctx.find(".visibility");if(L.length>0){const W=L.hasClass("state-private")?"private":"public";this.renderVisibility(W);const X=this.$ctx.find(".code-editor.code-editor-html"),ie=this.$ctx.find(".code-editor.code-editor-css"),xe=this.$ctx.find(".code-editor.code-editor-js"),Ae=X.find("textarea").val(),Ne=ie.find("textarea").val(),He=xe.find("textarea").val();(!Ae||Ae==="null")&&this.$ctx.find(".code-editor.code-editor-html textarea").val(`<!--${this.$ctx.data("txtPlaceholderCode")}-->`),(!Ne||Ne==="null")&&this.$ctx.find(".code-editor.code-editor-css textarea").val(""),(!He||He==="null")&&this.$ctx.find(".code-editor.code-editor-js textarea").val(""),this.codemirror_html=CodeMirror.fromTextArea(X.find("textarea").get(0),{mode:X.data("mode"),theme:"solarized",lineNumbers:!0,lineWrapping:!1,readOnly:r,viewportMargin:1/0,extraKeys:{"Ctrl-Space":"autocomplete",Tab:Je=>{const vt=Array(Je.getOption("indentUnit")+1).join(" ");Je.replaceSelection(vt,"end","+input")}}}),this.codemirror_css=CodeMirror.fromTextArea(ie.find("textarea").get(0),{mode:"css",theme:"solarized",lineNumbers:!0,lineWrapping:!1,readOnly:r,viewportMargin:1/0,extraKeys:{"Ctrl-Space":"autocomplete",Tab:Je=>{const vt=Array(Je.getOption("indentUnit")+1).join(" ");Je.replaceSelection(vt,"end","+input")}}}),this.codemirror_js=CodeMirror.fromTextArea(xe.find("textarea").get(0),{mode:"javascript",theme:"solarized",lineNumbers:!0,lineWrapping:!1,readOnly:r,viewportMargin:1/0,extraKeys:{"Ctrl-Space":"autocomplete",Tab:Je=>{const vt=Array(Je.getOption("indentUnit")+1).join(" ");Je.replaceSelection(vt,"end","+input")}}}),this.codemirror_html.on("focus",()=>{this.expand()}),this.codemirror_js.on("focus",()=>{this.expand()}),this.codemirror_css.on("focus",()=>{this.expand()}),this.codemirror_html.on("change",Bt.debounce(500,()=>{this.saveHTML()})),this.codemirror_js.on("change",Bt.debounce(2e3,()=>{const Je=this.$ctx.find('[data-tab="code-editor-js"]');this.codemirror_js.getValue()===""?Je.addClass("state-hidden"):Je.removeClass("state-hidden"),this.saveJS()})),this.codemirror_css.on("change",Bt.debounce(500,()=>{const Je=this.$ctx.find('[data-tab="code-editor-css"]');this.codemirror_css.getValue()===""?Je.addClass("state-hidden"):Je.removeClass("state-hidden"),this.saveCSS()}))}}saveHTML(){const t=this.$ctx.find("iframe"),a=this.$ctx.find(".code-editor.code-editor-html"),r=a.data("snippet")||null,p=a.data("saved")||0;if(!r){if(p)return;this.codemirror_html.setOption("readOnly",!0),a.addClass("disabled")}a.data("saved",1);const O={snippets:{html:{id:r,code:this.codemirror_html.getValue()}}};this.data.put(`/api/patterns/${this.$ctx.data("pattern")}`,O).then(L=>{a.hasClass("disabled")&&(a.removeClass("disabled"),this.codemirror_html.setOption("readOnly",!1),this.codemirror_html.focus()),a.data("snippet",L.pattern.snippets.html.id),L.success?(this.clearError("html"),t.contents().find("#ffy-markup").html(L.pattern.snippets.html.compiled),this.resize()):this.displayError(this.codemirror_html,"html",L.errors.html)})}saveJS(){const t=this.$ctx.find("iframe"),a=this.$ctx.find(".code-editor.code-editor-js"),r=a.data("snippet")||null,p=a.data("saved")||0;if(!r){if(p)return;this.codemirror_js.setOption("readOnly",!0),a.addClass("disabled")}a.data("saved",1);const O={snippets:{js:{id:r,code:this.codemirror_js.getValue()}}};this.data.put(`/api/patterns/${this.$ctx.data("pattern")}`,O).then(L=>{a.hasClass("disabled")&&(a.removeClass("disabled"),this.codemirror_js.setOption("readOnly",!1),this.codemirror_js.focus()),a.data("snippet",L.pattern.snippets.js.id),L.success?(this.clearError("js"),t.get(0).contentDocument.location.reload(!0)):this.displayError(this.codemirror_js,"js",L.errors.js)})}saveCSS(){const a=this.$ctx.find("iframe").contents().find("#ffy-styles"),r=this.$ctx.find(".code-editor.code-editor-css"),p=r.data("snippet")||null,O=r.data("saved")||0;if(!p){if(O)return;this.codemirror_css.setOption("readOnly",!0),r.addClass("disabled")}r.data("saved",1);const L={snippets:{css:{id:p,code:this.codemirror_css.getValue()}}};this.data.put(`/api/patterns/${this.$ctx.data("pattern")}`,L).then(W=>{r.hasClass("disabled")&&(r.removeClass("disabled"),this.codemirror_css.setOption("readOnly",!1),this.codemirror_css.focus()),r.data("snippet",W.pattern.snippets.css.id),W.success?(this.clearError("css"),a.text(W.pattern.snippets.css.compiled),this.resize()):this.displayError(this.codemirror_css,"css",W.errors.css)})}renderVisibility(t){const a=this.$ctx.find(".visibility");a.html((0,e.EY)(Os,{visibility:t})),t==="private"?a.addClass("state-private"):a.removeClass("state-private")}clearError(t){this.errors[t]&&(this.errors[t].clear(),delete this.errors[t],this.$ctx.find(`.code-editor-${t} .code-error`).removeClass("state-error"))}displayError(t,a,r){if(r&&r.line>0&&r.message){const p=t.getDoc(),O=r.line-1,L=Bt(`<div class="inline-editor-error inline-error-hidden"><div class="inline-error-message">${r.message}</div></div>`).get(0);this.clearError(a),this.errors[a]=p.addLineWidget(O,L,{coverGutter:!1,noHScroll:!0}),this.$ctx.find(`.code-editor-${a} .code-error`).addClass("state-error")}}expand(){this.$ctx.find(".code").removeClass("state-collapsed")}collapse(){this.$ctx.find(".code").addClass("state-collapsed")}resize(){this.$ctx.find("iframe").get(0).iFrameResizer.resize()}onEditingEnabled(){this.editing=!0;const t=this.$ctx.find(".js-b-pattern-main");this.$ctx.hasClass("referenced")||(this.tpl.enableSanitizationOnPasting(this.$ctx,'[data-editable="true"]'),Bt('[data-editable="true"]',this.$ctx).attr("contenteditable",!0),this.codemirror_html&&this.codemirror_html.setOption("readOnly",!1),this.codemirror_css&&this.codemirror_css.setOption("readOnly",!1),this.codemirror_js&&this.codemirror_js.setOption("readOnly",!1)),this.resizableIsInitialized||(t.resizable({handles:"s",start:()=>{t.addClass("state-resizing")},stop:()=>{t.removeClass("state-resizing");const a={height:t.height()};this.saveHeight(a)}}),this.resizableIsInitialized=!0)}onEditingDisabled(){this.editing=!1,this.tpl.disableSanitizationOnPasting(this.$ctx,'[data-editable="true"]'),Bt('[data-editable="true"]',this.$ctx).removeAttr("contenteditable"),this.codemirror_html&&this.codemirror_html.setOption("readOnly",!0),this.codemirror_css&&this.codemirror_css.setOption("readOnly",!0),this.codemirror_js&&this.codemirror_js.setOption("readOnly",!0)}async openSettingsInSidebar(){const t=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"ui-pattern"}),{settings:a,targets:r}=await this.data.getBlock(this.blockId),p=(O,L,W)=>{if(W==="targets"){this.data.updateBlockTargets(this.blockId,O,L);return}O==="height"&&this.saveHeight({height:L||"auto"})};window.emitter.emit("Guideline:setBlockSettingsSidebar",{settings:a,settingsStructure:Nt,targets:r,onSettingChanged:p,appBridge:t,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName)})}}const cs=(0,x.I)(s=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("a",{href:`/api/project/starterkit/${s.token}`,className:"row download js-b-patterndownload__download-link","data-filename":`patterndownload-starterkit-block-${s.blockId}`,children:(0,n.jsxs)("div",{children:[(0,n.jsx)("i",{className:"icon-download"}),(0,n.jsxs)("div",{className:"meta",children:[(0,n.jsx)("h4",{children:(0,Hs.Ay)(window.translate("PatternDownloadBlock_actionDownloadAll"))}),(0,n.jsx)("div",{className:"caption",children:(0,Hs.Ay)(window.translate("PatternDownloadBlock_actionDownloadAllDescription"))})]})]})}),s.availableTypes.includes("pattern")?(0,n.jsx)("a",{href:`/api/module/zip/${s.token}?from_style_guide`,className:"row download js-b-patterndownload__download-link","data-filename":`patterndownload-patterns-block-${s.blockId}`,children:(0,n.jsxs)("div",{children:[(0,n.jsx)("i",{className:"icon-download"}),(0,n.jsxs)("div",{className:"meta",children:[(0,n.jsx)("h4",{children:(0,Hs.Ay)(window.translate("PatternDownloadBlock_actionDownloadPatterns"))}),(0,n.jsx)("div",{className:"caption",children:(0,Hs.Ay)(window.translate("PatternDownloadBlock_actionDownloadPatternsDescription"))})]})]})}):null,s.availableTypes.includes("typofonts")?(0,n.jsx)("a",{href:`/api/typography/download/${s.token}`,className:"row download js-b-patterndownload__download-link","data-filename":`patterndownload-fonts-block-${s.blockId}`,children:(0,n.jsxs)("div",{children:[(0,n.jsx)("i",{className:"icon-download"}),(0,n.jsxs)("div",{className:"meta",children:[(0,n.jsx)("h4",{children:(0,Hs.Ay)(window.translate("PatternDownloadBlock_actionDownloadFonts"))}),(0,n.jsx)("div",{className:"caption",children:(0,Hs.Ay)(window.translate("PatternDownloadBlock_actionDownloadFontsDescription"))})]})]})}):null,s.availableTypes.includes("icons")?(0,n.jsx)("a",{href:`/api/icon/download/${s.token}`,className:"row download js-b-patterndownload__download-link","data-filename":`patterndownload-icons-block-${s.blockId}`,children:(0,n.jsxs)("div",{children:[(0,n.jsx)("i",{className:"icon-download"}),(0,n.jsxs)("div",{className:"meta",children:[(0,n.jsx)("h4",{children:(0,Hs.Ay)(window.translate("PatternDownloadBlock_actionDownloadIcons"))}),(0,n.jsx)("div",{className:"caption",children:(0,Hs.Ay)(window.translate("PatternDownloadBlock_actionDownloadIconsDescription"))})]})]})}):null,s.availableTypes.includes("color")?(0,n.jsx)("a",{href:`/api/color/export/${s.token}/zip`,className:"row download js-b-patterndownload__download-link","data-filename":`patterndownload-icons-colors-${s.blockId}`,children:(0,n.jsxs)("div",{children:[(0,n.jsx)("i",{className:"icon-download"}),(0,n.jsxs)("div",{className:"meta",children:[(0,n.jsx)("h4",{children:(0,Hs.Ay)(window.translate("PatternDownloadBlock_actionDownloadColors"))}),(0,n.jsx)("div",{className:"caption",children:(0,Hs.Ay)(window.translate("PatternDownloadBlock_actionDownloadColorsDescription"))})]})]})}):null]})),xs=(0,x.I)(()=>(0,Hs.Ay)(window.translate("PatternDownloadBlock_actionNoDownloadsFound"))),es=(0,en.hD)({});var ps=i(5181);class gn extends u.j{on(t){this.blockId=this.$ctx.data("block"),this.sectionId=this.$ctx.data("sectionId"),this.displayName="Developer Kit",this.segmentAnalytics=this.sandbox.getConfigParam("segmentAnalytics"),this.loadContent().then(()=>this.bindTracking()),t()}loadContent(){const t=this.$ctx.find(".js-b-patterndownload__container"),a=ps(".document").data("hub");return t.html((0,e.EY)(ca.T)),this.data.get(`/api/hub/block-types/${a}`).then(r=>{if(r.success)if(r.availableTypes.length>0){const p=r.availableTypes.filter(O=>["pattern","typofonts","icons","color"].includes(O));p.length>0?t.html((0,e.EY)(cs,{availableTypes:p,blockId:this.$ctx.data("block"),token:this.$ctx.data("token")})):t.html((0,e.EY)(xs))}else t.html((0,e.EY)(xs))})}bindTracking(){this.$ctx.on("click",".js-b-patterndownload__download-link",t=>{const a=ps(t.currentTarget);this.segmentAnalytics.trackDownload("styleguide block patterndownload",a.dataAsString("filename"),"patterndownload",null,a.attr("href"),null,!1,!1,a.dataAsString("filename"),null,null)})}async openSettingsInSidebar(){const t=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"pattern-download"}),{targets:a}=await this.data.getBlock(this.blockId),r=(p,O,L)=>{L==="targets"&&this.data.updateBlockTargets(this.blockId,p,O)};window.emitter.emit("Guideline:setBlockSettingsSidebar",{settings:{},settingsStructure:es,targets:a,onSettingChanged:r,appBridge:t,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName)})}}const nn=(0,x.I)(s=>{var t,a,r;return(0,n.jsxs)(n.Fragment,{children:[s.atom?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h4",{className:"pattern-category",children:s.atom.name}),(0,n.jsx)("ul",{children:(t=s.atom.patterns)==null?void 0:t.map((p,O)=>(0,n.jsx)("li",{className:"pattern",children:(0,n.jsx)("a",{href:p.builder,className:"ffy-lnk",children:(0,n.jsx)("span",{className:"pattern-name",children:p.name})})},O))})]}):null,s.molecule?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h4",{className:"pattern-category",children:s.molecule.name}),(0,n.jsx)("ul",{children:(a=s.molecule.patterns)==null?void 0:a.map((p,O)=>(0,n.jsx)("li",{className:"pattern",children:(0,n.jsx)("a",{href:p.builder,className:"ffy-lnk",children:(0,n.jsx)("span",{className:"pattern-name",children:p.name})})},O))})]}):null,s.organism?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h4",{className:"pattern-category",children:s.organism.name}),(0,n.jsx)("ul",{children:(r=s.organism.patterns)==null?void 0:r.map((p,O)=>(0,n.jsx)("li",{className:"pattern",children:(0,n.jsx)("a",{href:p.builder,className:"ffy-lnk",children:(0,n.jsx)("span",{className:"pattern-name",children:p.name})})},O))})]}):null]})});var Zn=i(5181);class zs extends u.j{on(t){this.$items=Zn(".patterns",this.$ctx),t()}after(){const a=`/api/patterns/list/${this.$ctx.data("project")}/?groupby=granularity`;this.data.get(a).then(r=>{if(r.success){const p=Zn((0,e.EY)(nn,r.patterns));this.$items.empty(),this.$items.append(p),this.fire("BlockReady",{block:this.$ctx.data("block")},["events"])}})}}const Tn=(0,x.I)(s=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"b-personalnote__avatar",children:(0,n.jsx)("img",{className:"b-personalnote__avatar-image",src:s.user.image,alt:"user avatar"})}),(0,n.jsxs)("div",{className:"b-personalnote__meta",children:[(0,n.jsx)("span",{className:"b-personalnote__author",children:s.user.name}),(0,n.jsxs)("span",{className:"b-personalnote__date",children:[(0,Hs.Ay)(window.translate("PersonalNoteBlock_date"))," ",s.dateFormatted]})]})]})),Wa=(0,x.I)(s=>s.utils.account.hasPermission("edit")?(0,n.jsxs)("div",{className:"b-personalnote__status js-b-personalnote__toggle-status",children:[(0,n.jsx)("i",{className:`${s.visibility==="private"?" ca-icon--view-slash":" ca-icon--view"}`}),(0,n.jsx)("span",{className:"b-personalnote_status-desc",children:s.visibility==="private"?(0,Hs.Ay)(window.translate("PersonalNoteBlock_visibilityEditors")):(0,Hs.Ay)(window.translate("PersonalNoteBlock_visibilityEveryone"))})]}):null),sa=(0,en.hD)({security:[{id:"visibility",type:"segmentedControls",label:"Visible for",info:"Switch between Block visibility permissions",defaultValue:"public",choices:[{value:"public",label:"Everyone"},{value:"private",label:"Editors only"}]}]});var Ko=i(5181);class go extends u.j{on(t){this.$status=this.$ctx.find(".js-b-personalnote__status-wrap"),this.$content=this.$ctx.find(".js-b-personalnote__content"),this.sandbox.subscribe("events",this),this.blockId=this.$ctx.data("block"),this.sectionId=this.$ctx.data("sectionId"),this.displayName="Personal Note",this.visibility=this.$ctx.data("visibility"),this.creator=this.$ctx.data("creator"),this.render(),Ko(document.body).hasClass("editor-enabled")?this.onEditingEnabled():this.onEditingDisabled(),this.$content.trigger("focus"),this.$ctx.on("blur",".js-b-personalnote__content",async()=>{(await this.data.updateBlock(this.$ctx,{settings:{content:this.$content.html()}})).success||this.renderErrorMsg()}),this.$ctx.on("click",".js-b-personalnote__toggle-status",()=>{const a=this.visibility==="private"?"public":"private";this.setEditorVisibility(a)}),t()}async setEditorVisibility(t){this.visibility=t,(await this.data.updateBlock(this.$ctx,{settings:{visibility:t}})).success||this.renderErrorMsg(),this.$status.html((0,e.EY)(Wa,{visibility:t}))}async render(){const t=new Date().toLocaleString();if(this.$status.html((0,e.EY)(Wa,{visibility:this.visibility})),!this.creator){const a=(0,Cs.vD)();this.$ctx.find(".js-b-personalnote__head").html((0,e.EY)(Tn,{dateFormatted:t,user:a})),(await this.data.updateBlock(this.$ctx,{settings:{creator:a==null?void 0:a.id,created:t,visibility:this.visibility,image:a==null?void 0:a.image,name:a==null?void 0:a.name}})).success||this.renderErrorMsg()}}onEditingEnabled(){this.$ctx.hasClass("referenced")||(this.$content.attr("contenteditable",!0),this.tpl.enableSanitizationOnPasting(this.$ctx,"[contenteditable]")),this.$status.show()}onEditingDisabled(){this.tpl.disableSanitizationOnPasting(this.$ctx,"[contenteditable]"),this.$content.removeAttr("contenteditable"),this.$status.hide()}renderErrorMsg(){this.$ctx.find(".b-personalnote__error-msg").removeClass("b-personalnote__error-msg--hidden")}async openSettingsInSidebar(){const t=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"personal-note"}),{settings:a,targets:r}=await this.data.getBlock(this.blockId),p=(O,L,W)=>{if(W==="targets"){this.data.updateBlockTargets(this.blockId,O,L);return}O==="visibility"&&this.setEditorVisibility(L)};window.emitter.emit("Guideline:setBlockSettingsSidebar",{settings:a,settingsStructure:sa,targets:r,onSettingChanged:p,appBridge:t,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName)})}}const oi=(0,x.I)(()=>(0,n.jsx)("div",{className:"column-action btn-add-column",children:(0,n.jsx)("i",{className:"icon-long-arrow-down"})})),nl=(0,x.I)(()=>(0,n.jsx)("div",{className:"btn-remove-column",children:(0,n.jsx)("i",{className:"icon-trash"})})),wd=(0,x.I)(()=>(0,n.jsx)("div",{className:"column-action resize",children:(0,n.jsx)("i",{className:"icon-caret-down"})})),xd=(0,x.I)(()=>(0,n.jsx)("div",{"data-test-id":"table-add-row",className:"btn-add-row",children:(0,n.jsx)("i",{className:"icon-long-arrow-right"})})),Ql=(0,x.I)(()=>(0,n.jsx)("div",{"data-test-id":"table-remove-row",className:"btn-remove-row",children:(0,n.jsx)("i",{className:"icon-trash"})})),Ec=(0,x.I)(()=>(0,n.jsx)("div",{className:"value co-editor co-editor--default js-b-table__value b-table__value",children:(0,n.jsx)("p",{children:(0,n.jsx)("br",{})})})),Pc=(0,en.hD)({});var An=i(5181);class Oc extends u.j{static get MINIMAL_CELL_SIZE(){return 20}on(t){this.resizing=!1,this.sortable=null,this.editor=null,this.currentCell=null,this.showWarning=!0,this.editing=!1,this.blockId=this.$ctx.data("block"),this.sectionId=this.$ctx.data("sectionId"),this.displayName="Table",this.isReferenced=!!this.$ctx.data("referenceToken"),this.sandbox.subscribe("events",this),this.maximumTableWidth=this.$ctx.find(".js-tbl-wrapper").width(),this.editing=An(document.body).hasClass("editor-enabled")&&!this.isReferenced,t()}after(){if(!this.isReferenced&&((this.isUserEditor()||this.isUserTranslator())&&(this.$ctx.on("click",".js-b-table__value",t=>{this.isEditorEnabled()&&this.initEditorIntoCell(An(t.currentTarget))}),this.$ctx.on("click",".tbl td",t=>{this.isEditorEnabled()&&An(t.currentTarget).find(".js-b-table__value").click()}),this.$ctx.on("click",".js-b-table__value a",t=>{this.isEditorEnabled()&&t.preventDefault()})),this.isUserEditor())){const t=An("html");this.$ctx.on("click",".btn-add-column",a=>{if(this.isEditorEnabled()){const p=An(a.currentTarget).closest("th"),L=p.index()+1;this.addColumn(p,!1),this.save({addColumnNumber:L+1})}}),this.$ctx.on("click",".btn-add-row",a=>{if(this.isEditorEnabled()){let r;if(An(a.currentTarget).closest("tr").parent().get(0).localName==="thead")this.addRow(An("tbody",this.$ctx),!0),r=0;else{const p=An(a.currentTarget).closest("tr");r=p.index()+1,this.addRow(p,!1)}this.save({addRowNumber:r+1})}}),this.$ctx.on("click",".btn-remove-row",a=>{if(this.isEditorEnabled()){const r=An(a.currentTarget);this.fire("swal",{template:"block-table-row-delete",closeOnConfirm:!0,callback:()=>{const p=r.closest("tr"),L=p.index()+1;p.remove(),this.save({deleteRowNumber:L})}})}}),this.$ctx.on("click",".btn-remove-column",a=>{const r=An(a.currentTarget);this.isEditorEnabled()&&this.fire("swal",{template:"block-table-col-delete",closeOnConfirm:!0,callback:()=>{const p=r.closest("th"),L=p.index()+1,X=p.parent().find("th").length===L;if(p.remove(),An(`tbody tr td:nth-child(${L})`,this.$ctx).remove(),this.save({deleteColumnNumber:L}),X){const ie=(0,e.EY)(Ql);An("tbody > tr > td:last-child",this.$ctx).append(ie)}}})}),this.$ctx.on("dblclick",".resize",a=>this.expandColumnToMaxWidth(An(a.currentTarget))),this.$ctx.on("mousedown",".resize",a=>this.startResizing(An(a.currentTarget),a.pageX)),this.$ctx.on("mouseup",".tbl",()=>this.stopResizing()),t.on("mouseup",()=>this.stopResizing()),t.on("mousemove",a=>this.doResizing(a.pageX)),this.registerTableActions(),this.$ctx.on("keydown",".js-b-table__value",a=>{if(this.isEditorEnabled()){if(a.keyCode!==9)return;this.editor&&this.editor.save(!0);const r=An("tbody tr",this.$ctx).length,p=An("thead th",this.$ctx).length,O=An(a.currentTarget).parent().get(0).cellIndex,L=An(a.currentTarget).closest("tr").get(0).rowIndex;r===L&&p===O+1&&!a.shiftKey&&(this.addRow(An("tbody > tr:last-child",this.$ctx),!1),this.save({addRowNumber:r+1}));let W;if(a.shiftKey){if(W=An(a.currentTarget).parent().prev("th,td"),W.length<=0&&(W=An(a.currentTarget).closest("tr").prev().find("td:last-child")),W.length<=0&&(W=An(a.currentTarget).closest("tbody").prev().find("th").last()),W.length<=0)return;this.initEditorIntoCell(W.find(".value"))}else W=An(a.currentTarget).parent().next("th,td"),W.length<=0&&(W=An(a.currentTarget).closest("tr").next().find("td:first-child")),W.length<=0&&(W=An(a.currentTarget).closest("thead").next().find("td").first()),this.initEditorIntoCell(W.find(".value"));return a.stopPropagation(),a.preventDefault(),!1}})}}registerTableActions(){if(this.isUserEditor()){const O=(0,e.EY)(wd);An("thead > tr > th",this.$ctx).append(O)}if(!this.isUserEditor()||!this.$ctx.data("isEditable"))return;const t=(0,e.EY)(nl),a=(0,e.EY)(oi),r=(0,e.EY)(xd),p=(0,e.EY)(Ql);An("tbody > tr > td:first-child",this.$ctx).append(r),An("tbody > tr > td:last-child",this.$ctx).append(p),An("thead > tr > th:first-child",this.$ctx).append(r),An("thead > tr > th",this.$ctx).append(t),An("thead > tr > th",this.$ctx).append(a)}initEditorIntoCell(t){this.editor&&this.editor.destroy(),this.editor=new Pn.j(t,this.sandbox,{set:"block",removeExtraneous:!1,placeholder:"",project:(0,b.MJ)(),saveDelay:1e3});const a=["img","table",'[style*="background"]','[style*="background-color"]','[style*="display"]','[style*="font-family"]','[style*="font-size"]','[style*="font-weight"]','[style*="line-height"]','[style*="text-decoration"]'];this.showWarning&&t.find(a.join(",")).length>0?(this.showWarning=!1,this.editor.warningEnable()):(this.editor.enable(),this.editor.setCursorToEnd()),this.editor.saved=r=>{this.save({$targetColumnElement:t,editorData:r})}}addColumn(t,a){if(!this.isEditorEnabled())return;const r=this.$ctx.find(".tbl"),p=r.find("thead > tr"),O=r.find("tbody"),L=p.find("th").length-1,W=t.index(),X=(0,e.EY)(wd),ie=(0,e.EY)(nl),xe=(0,e.EY)(oi),Ae=(0,e.EY)(Ql),Ne=(0,e.EY)(Ec);let He=`<th>${Ne}${ie}${xe}${X}</th>`;a?t.prepend(He):t.after(He),W===L&&O.find(".btn-remove-row").remove(),He=`<td>${Ne}`,W===L&&(He+=Ae),He+="</td>",O.find(`tr > td:nth-child(${W+1})`).after(He)}addRow(t,a){const r=(0,e.EY)(xd),p=(0,e.EY)(Ql),O=(0,e.EY)(Ec);if(!this.isEditorEnabled())return;const W=this.$ctx.find(".tbl").find("thead > tr");let X='<tr data-test-id="table-row">';for(let ie=1;ie<=W.find("th").length;ie++)X+="<td>",X+=O,ie===1&&(X+=r),ie===W.find("th").length&&(X+=p),X+="</td>";X+="</tr>",a?t.prepend(X):t.after(X)}save({$targetColumnElement:t=null,editorData:a={},deleteColumnNumber:r=0,deleteRowNumber:p=0,addColumnNumber:O=0,addRowNumber:L=0}={}){if(!this.isEditorEnabled())return;const W=[],X=[],ie=An("thead th",this.$ctx),xe=An("tbody tr",this.$ctx);An.each(ie,(Ae,Ne)=>{const He=An(Ne),Je=He.find(".value").html();X.push({label:Je,field:Je,width:parseInt(He.css("width"))})}),An.each(xe,(Ae,Ne)=>{const He={};let Je;An(Ne).children("td").each((vt,Dt)=>{const Lt=An(Dt).find(".value");Je=t&&t.get(0)===Lt.get(0)?a:Lt.html(),He[vt]=Je}),W.push(He)}),this.data.updateBlock(this.$ctx,{settings:{data:W,columns:X},deleteColumnNumber:r,deleteRowNumber:p,addColumnNumber:O,addRowNumber:L})}onEditingEnabled(){this.isReferenced||(this.editing=!0)}onEditingDisabled(){this.editing=!1,!this.isReferenced&&this.editor&&this.editor.destroy()}isEditorEnabled(){return this.editing}isUserEditor(){return An(".document").data("editor")}isUserTranslator(){return An(".document").data("translator")}startResizing(t,a){if(!this.isEditorEnabled()||this.resizing!==!1)return;const r=t.closest("th").first(),p=r.next();r.addClass("resizing");const O=r.width();let L;p&&(L=p.width()),this.resizing={pageX:a,currentColumn:r,currentColumnWidth:O,nextColumn:p,nextColumnWidth:L}}stopResizing(){!this.isEditorEnabled()||this.resizing===!1||(An(".resizing",this.$ctx).removeClass("resizing"),this.resizing=!1,this.save())}doResizing(t){if(!this.isEditorEnabled()||this.resizing===!1)return;const a=t-this.resizing.pageX;this.resizing.currentColumnWidth+a>Oc.MINIMAL_CELL_SIZE&&(this.resizing.nextColumn&&this.resizing.nextColumn.css("width",`${this.resizing.nextColumnWidth-a}px`),this.resizing.currentColumn.css("width",`${this.resizing.currentColumnWidth+a}px`))}expandColumnToMaxWidth(t){const a=t.closest("th").first(),r=a.width(),p=this.$ctx.width(),O=this.$ctx.find("thead").width(),L=p-O;a.css("width",`${r+L}px`)}async openSettingsInSidebar(){const t=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"table"}),{targets:a}=await this.data.getBlock(this.blockId),r=(p,O,L)=>{L==="targets"&&this.data.updateBlockTargets(this.blockId,p,O)};window.emitter.emit("Guideline:setBlockSettingsSidebar",{settings:{},settingsStructure:Pc,targets:a,onSettingChanged:r,appBridge:t,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName)})}}var Eh=i(63766),Ph=i(75736);const Oh=(0,x.I)(s=>(0,n.jsx)("div",{className:"b-template__link",children:(0,n.jsxs)("div",{className:"b-template__content",children:[(0,n.jsxs)("div",{className:"b-template__text-container",children:[(0,n.jsx)("i",{className:"ca-icon--publication ca-icon--md b-template__icon--left"}),(0,n.jsx)("div",{className:"js-b-template__text b-template__text",children:(0,Hs.Ay)(s.text)})]}),(0,n.jsx)("i",{className:"ca-icon--arrow-right ca-icon--md b-template__icon--right"})]})})),Sh=(0,en.hD)({basics:[{id:"template",type:"legacyTemplateInput"}]});var Xl=i(5181);class Th extends u.j{on(t){const a=Xl(document.body);this.blockId=this.$ctx.data("block"),this.sectionId=this.$ctx.data("sectionId"),this.displayName="Template",this.templateId=this.$ctx.data("template-id"),this.brandId=(0,et.M)(),this.projectId=(0,b.MJ)(),this.text=this.$ctx.data("text"),this.editing=a.hasClass("editor-enabled"),this.sandbox.subscribe("events",this),this.blockIsReferenced=this.$ctx.hasClass("referenced"),this.isTranslator=a.dataAsNumber("translator")===1,this.isEditor=!!a.data("editor"),this.bindOpenTemplateChooserClick(),this.bindNewPublicationClick(),this.bindSettingsReplaceTemplateClick(),this.initialize(),t()}bindOpenTemplateChooserClick(){this.$ctx.on("click",".js-m-assetchooser-placeholder",()=>{this.openTemplateChooser()})}bindNewPublicationClick(){this.$ctx.on("click",".b-template__link",()=>{this.editing||this.fetchTemplate().then(()=>this.openNewPublication())})}bindSettingsReplaceTemplateClick(){this.$ctx.on("click",".js-b-template__replace-template-choose",()=>{this.openTemplateChooser()})}initialize(){this.templateId&&this.renderTemplateLink()}fetchTemplate(){return this.data.get(`/api/publishing/template/${this.brandId}?template_id=${this.templateId}`).then(t=>{t.success===!0&&t.templates.length>0?this.template=t.templates[0]:console.error("Fail to load template")})}renderTemplateLink(){Xl(".b-template__container",this.$ctx).html((0,e.EY)(Oh,{text:this.text})),this.bindEditor()}addNewTemplate(){this.data.updateBlock(this.$ctx,{settings:{template:{id:this.template.id,screen_id:this.template.screen_id},text:this.text}}),this.renderTemplateLink(),this.onEditingEnabled()}openTemplateChooser(){const t=(0,e.EY)(Ph.N,{associatedBlockId:this.blockId,newPublication:!1});this.fire("openModal",{modifier:"flex",$content:t},["events"])}onTemplateChooserTemplateChosen(t){t.associatedBlockId===this.blockId&&(this.fire("closeModal",["events"]),t.template&&(this.template=t.template,this.text=`<p>Create ${this.template.name}</p>`,this.addNewTemplate()))}openNewPublication(){const t=Xl((0,e.EY)(Eh.i,{template:this.template,styleguideId:this.projectId,templateAssetId:this.template.screen_id}));this.fire("openModal",{modifier:"flex",$content:t},["events"])}bindEditor(){if(this.blockIsReferenced||!this.isEditor&&!this.isTranslator)return!1;this.richtextEditor&&this.richtextEditor.destroy();const t=this.$ctx.find(".js-b-template__text");this.richtextEditor=new Pn.j(t,this.sandbox,{set:"title"}),this.richtextEditor.saved=a=>{this.data.updateBlock(this.$ctx,{settings:{text:a}})}}enableEditor(){if(!this.editing||!this.richtextEditor)return!1;this.richtextEditor.enable()}disableEditor(){if(!this.richtextEditor)return!1;this.richtextEditor.disable()}onEditingEnabled(){this.editing=!0,this.enableEditor()}onEditingDisabled(){this.editing=!1,this.disableEditor()}async openSettingsInSidebar(){var t;const a=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"template"}),{settings:r,targets:p}=await this.data.getBlock(this.blockId);r.template=(t=r.template)==null?void 0:t.id;const O=async(L,W,X)=>{if(X==="targets"){this.data.updateBlockTargets(this.blockId,L,W);return}else L==="template"&&(this.templateId=W,this.data.updateBlock(this.$ctx,{settings:{template:{id:W}}}),await this.fetchTemplate(),this.text=`Create ${this.template.name}`,this.addNewTemplate())};window.emitter.emit("Guideline:setBlockSettingsSidebar",{settingsStructure:Sh,settings:r,targets:p,onSettingChanged:O,appBridge:a,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName)})}}var jd=i(19204),Cd=i(38485),Ah=i(84927);const Id=[{value:"auto",label:"Auto"},{value:"4px",label:"S"},{value:"8px",label:"M"},{value:"12px",label:"L"}],Sc=(0,en.hD)({layout:[{id:"column_count",label:"Columns",type:"segmentedControls",defaultValue:"1",choices:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"}]},{id:"isColumnGapCustom",label:"Column gap",type:"switch",switchLabel:"Custom",defaultValue:!1,show:s=>{var t;return((t=s.getBlock("column_count"))==null?void 0:t.value)!=="1"},on:[{id:"column_gap_custom",type:"input",defaultValue:"auto",placeholder:"auto",rules:[Jt.I,(0,Cd.y)(0),(0,Ah.Q)(200)],onChange:s=>(0,Ii.j)(s,"column_gap_custom")}],off:[{id:"column_gap_simple",type:"segmentedControls",defaultValue:"auto",choices:Id}]}]});var ql=i(5181);class Ed extends u.j{on(t){this.$body=ql(document.body),this.sandbox.subscribe("events",this),this.isReferenced=!!this.$ctx.data("referenceToken"),this.$editor=null,this.$placeholder=this.$ctx.find(".js-b-text__placeholder"),this.blockId=this.$ctx.data("block"),this.sectionId=this.$ctx.data("sectionId"),this.displayName="Text",this.$text=this.getTextNode(),this.$text.on("copy",()=>this.trackTextCopy()),t()}after(){this.bindEditor(),this.togglePlaceholder(),ql(document.body).hasClass("editor-enabled")&&this.onEditingEnabled()}trackTextCopy(){(0,f.s)("copy text",{block_id:this.$ctx.dataAsNumber("block"),text:window.getSelection().toString()})}togglePlaceholder(){return this.getTextNode().text().length>0?this.$ctx.removeClass("block-empty"):this.$ctx.addClass("block-empty")}bindEditor(){if(this.$editor=this.getTextNode(),this.isReferenced){this.$editor.addClass("co-editor co-editor--default");return}this.editor&&this.editor.destroy();const t=this.getTextNode().data("initialColumnCount");this.editor=new Pn.j(this.$editor,this.sandbox,{set:"block",removeExtraneous:!1,toolbar:{columnbreak:t&&t>1},placeholder:jd.c.EDITOR_PLACEHOLDER_TEXT,project:(0,b.MJ)()}),this.editor.saved=async a=>{(await this.data.updateBlock(this.$ctx,{settings:{content:a}})).success||this.renderErrorMsg(),this.togglePlaceholder()}}afterInsertion(){this.editor.focus()}onEditingEnabled(){this.bindEditor(),!this.isReferenced&&(this.getTextNode().children(jd.c.BLACKLIST_SELECTORS.join(",")).length>0?this.editor.warningEnable():this.editor.enable(),this.togglePlaceholder())}onEditingDisabled(){this.isReferenced||(this.editor.disable(),this.togglePlaceholder())}async openSettingsInSidebar(){const t=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"text"}),{settings:a,targets:r}=await this.data.getBlock(this.blockId);a.isColumnGapCustom=a.column_gap?!Id.some(O=>O.value===a.column_gap):!1,a.column_gap_custom=a.column_gap_simple=a.column_gap,a.column_count=a.column_count?`${a.column_count}`:void 0;const p=(O,L,W)=>{if(W==="targets"){this.data.updateBlockTargets(this.blockId,O,L);return}switch(O){case"column_count":return this.updateColumnCount(Number(L));case"column_gap_simple":case"column_gap_custom":return this.updateColumnGap(this.tpl.unit(L));default:return}};window.emitter.emit("Guideline:setBlockSettingsSidebar",{settingsStructure:Sc,settings:a,targets:r,onSettingChanged:p,appBridge:t,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName)})}updateColumnCount(t){this.$editor.removeClass("state-columns-2 state-columns-3 state-columns-4"),this.$placeholder.removeClass("state-columns-2 state-columns-3 state-columns-4"),t>1?(this.$editor.addClass(`state-columns-${t}`),this.$placeholder.addClass(`state-columns-${t}`),this.editor.addToolbarOption("columnbreak")):this.editor.removeToolbarOption("columnbreak"),this.saveChanges({column_count:t})}updateColumnGap(t){t==="auto"?(this.$editor.css("columnGap","normal"),this.$placeholder.css("columnGap","normal")):(this.$editor.css("columnGap",t),this.$placeholder.css("columnGap",t)),this.saveChanges({column_gap:t})}async saveChanges(t){(await this.data.updateBlock(this.$ctx,{settings:t})).success||this.renderErrorMsg()}renderErrorMsg(){this.$ctx.find(".b-text__error-msg").removeClass("b-text__error-msg--hidden")}getTextNode(){return this.$ctx.find(".js-b-text__text")}}const Dh=(0,x.I)(s=>{var t;return(t=s.fonts)==null?void 0:t.map(a=>{var r;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("h3",{className:"family-name","data-id":a.id,"data-editable":"true","data-field":"family_name",children:[a.family_name,"\xA0",a.fonts[0].usage?(0,n.jsx)("span",{className:"usage-badge",children:a.fonts[0].usage}):null]},a.id),(r=a.fonts)==null?void 0:r.map(p=>(0,n.jsxs)("div",{className:"font","data-id":p.id,children:[(0,n.jsxs)("div",{className:"font-content",children:[(0,n.jsxs)("div",{className:"font-preview-character",style:{fontFamily:`'${p.css_family_name}'`,fontWeight:`${p.font_weight}`,fontStyle:`${p.font_style}`},children:[" ","Aa"," "]}),(0,n.jsxs)("div",{className:"font-preview",style:{fontFamily:`'${p.css_family_name}'`,fontWeight:`${p.font_weight}`,fontStyle:`${p.font_style}`},children:[" ","ABCDEFGHIJKLMNOPQRSTUVWXYZ",(0,n.jsx)("br",{})," abcdefghijklmnopqrstuvwxyz",(0,n.jsx)("br",{})," 1234567890(,.;:?!$&*)"," "]})]}),(0,n.jsxs)("div",{className:"font-controls",children:[(0,n.jsxs)("div",{className:"font-meta",children:[(0,n.jsx)("div",{className:"font-name","data-editable":"true","data-field":"name",children:p.name}),(0,n.jsxs)("div",{className:"font-weight",children:[(0,n.jsx)("span",{className:"label",children:"Weight:"})," ",(0,n.jsx)("span",{"data-editable":"true","data-field":"font_weight",children:p.font_weight})]}),(0,n.jsxs)("div",{className:"font-style",children:[(0,n.jsx)("span",{className:"label",children:"Style:"})," ",(0,n.jsx)("span",{"data-editable":"true","data-field":"font_style",children:p.font_style})]}),s.editable?(0,n.jsx)("button",{className:"btn-delete",children:window.translate("Legacy_btn_delete")}):null]}),(0,n.jsx)("div",{className:"font-drag",children:s.editable?(0,n.jsx)("span",{className:"drag-handle",children:(0,n.jsx)("i",{className:"icon-bars"})}):null})]})]},p.id))]})})}),$h=(0,x.I)(s=>{var t;return(0,n.jsx)("div",{className:"search-results",children:s.results.length>0?(t=s.results)==null?void 0:t.map(a=>(0,n.jsx)("div",{className:"search-result js-b-typofonts__search-result","data-id":a.id,"data-provider":a.provider,"data-name":a.name,children:a.name},a.id)):(0,n.jsx)("div",{className:"search-result-empty",children:"No font families found."})})}),Nh=(0,en.hD)({});var yn=i(5181),kh=i(5181);class Dl extends u.j{static get FONT_FAMILY_PROVIDER(){return{fontscom:"fontscom",google:"google",system:"system"}}on(t){this.blockId=this.$ctx.data("block"),this.projectId=(0,b.MJ)(),this.sectionId=this.$ctx.data("sectionId"),this.sandbox.subscribe("events",this),this.$items=yn(".fonts",this.$ctx),this.displayName="Fonts",this.codemirrorHtml=null,this.codemirrorCss=null,this.typekitToken=null,this.$ctx.on("click",".btn-delete",a=>{const r=yn(a.target).closest(".font"),p=r.data("id");this.fire("swal",{template:"block-typofonts-delete",closeOnConfirm:!0,callback:()=>{this.data.delete(`/api/typography/fonts/${p}`).then(()=>{const O={settings:{}};O.settings[`fonts[=${p}]`]=null,this.data.updateBlock(this.$ctx,O),r.remove()})}})}),this.$ctx.on("click",".cloud-provider .nav a",a=>{const r=yn(a.currentTarget),p=r.data("tab");this.$ctx.find(".cloud-provider .nav li.active").removeClass("active"),r.find("li").addClass("active"),this.$ctx.find(".provider-content.active").removeClass("active"),this.$ctx.find(`.tab-${p}`).addClass("active"),(p==="google"||p==="system")&&this.enableSearch()}),this.$ctx.on("keypress",".tab-typekit input",a=>{const r=yn(a.target);if(a.keyCode===13){const p=r.val();r.attr("disabled","disabled"),this.$ctx.find(".cloud-provider .provider-content.tab-typekit .provider-error").hide(),this.$ctx.find(".cloud-provider .provider-content.tab-typekit input").removeClass("error");const O=this.$ctx.find(".loading-indicator");O.show(),this.data.post("/api/font/import",{provider:"typekit",token:p}).then(L=>{O.hide(),L.success?(this.typekitToken=p,yn.each(L.typekit.kits,(W,X)=>{X.families&&yn(".typekit-result",this.$ctx).append(yn(`<div class="typekit-kit" data-kit="${X.id}"">
                                                <i class="icon-cube"></i>
                                                <span>${X.project}</span>
                                                <span>(${X.families.length} font families)</span>
                                                <button class="btn typekit-activate">Activate</button>
                                                <span class="typekit-loading-indicator">Loading...</span>
                                            </div>`))}),this.$ctx.find(".cloud-provider .tab-typekit .typekit-available-results").css("display","block"),this.$ctx.find(".cloud-provider .typekit-result").show()):(this.$ctx.find(".cloud-provider .provider-content.tab-typekit .provider-error").show(),this.$ctx.find(".cloud-provider .provider-content.tab-typekit input").addClass("error"))})}}),this.$ctx.on("paste",".tab-typekit input",()=>{const a=kh.Event("keypress");a.which=13,a.keyCode=13,setTimeout(()=>yn(".tab-typekit input",this.$ctx).trigger(a),100)}),this.$ctx.on("click",".typekit-activate",a=>{const r=yn(a.target).closest(".typekit-kit").data("kit"),p={provider:"typekit",token:this.typekitToken,kit:r,project:this.projectId};this.data.post("/api/font/activate",p).then(O=>{O.success&&(yn.each(O.id,(L,W)=>yn(".fonts",this.$ctx).append(yn(`<div class="font row" data-id="${W}"></div>`))),this.update(L=>{L?(console.error("FontKit: ",L),this.displayError(window.translate("TypofontBlockComponent_fontLoadingErrorTitle"),window.translate("TypofontBlockComponent_fontLoadingErrorDescription"))):this.save(O.id)}))})}),this.$ctx.on("click",".js-b-typofonts__search-result",a=>{const r=yn(a.target);this.selectFontFamily({id:r.data("id"),provider:r.data("provider"),name:r.data("name")})}),document.addEventListener("click",this.onDocumentClick.bind(this)),t()}update(t){var a;const r=this.projectId,p=[];this.$ctx.find(".fonts > .font").each((O,L)=>p.push(yn(L).data("id"))),p.length>0?(this.$ctx.removeClass("block-empty"),this.data.get(`/api/typography/fonts/${r}`,{data:{groupby:"family",id:p.join(),referenceToken:(a=this.$ctx.data("referenceToken"))!=null?a:void 0}}).then(O=>{this.$items.empty(),O.fonts.length>0?this.$ctx.addClass("fonts-available"):this.$ctx.removeClass("fonts-available"),O.editable=yn(".document").data("editing");const L=yn((0,e.EY)(Dh,O));this.$items.append(L);const W=[];if(yn.each(O.fonts,(Ae,Ne)=>{Ne.provider==="GOOGLE"&&yn.each(Ne.fonts,(He,Je)=>{let vt=":";Je.font_weight!=="normal"&&Je.font_weight!=="regular"&&(vt+=Je.font_weight),Je.font_style==="italic"&&(vt+="italic"),W.push(Ne.css_family_name+vt)})}),O.provider==="SYSTEM"&&yn(".cloud-provider",this.$ctx).hide(),W.length>0&&O.provider==="GOOGLE"&&this.loadWebFont({google:{families:W},active:()=>yn(".cloud-provider",this.$ctx).hide()}),O.provider==="TYPEKIT"){let Ae;this.loadWebFont({typekit:{id:O.provider_id},inactive:()=>{this.$ctx.find(".fonts").empty(),this.$ctx.find(".code").empty(),this.$ctx.find(".font-usage").removeClass("visible"),typeof t=="function"&&(Ae=!0,t(Ae))},active:()=>{yn(".cloud-provider",this.$ctx).hide(),typeof t=="function"&&(Ae=!1,t(Ae))}})}const X=[],ie=[];let xe="";if(yn.each(O.fonts,(Ae,Ne)=>{Ne.fonts[0].usage!=="DESKTOP"&&(Ne.provider==="GOOGLE"&&X.push(Ne.family_name.replaceAll(" ","+")),Ne.provider==="TYPEKIT"&&ie.push(O.provider_id),(Ne.provider==="GOOGLE"||Ne.provider==="SYSTEM"||Ne.provider==="SELFHOSTED")&&(xe+=`font-family: "${Ne.css_family_name}", sans-serif;`),O.fonts.length>Ae+1&&(xe+=`
`))}),xe.length>0){let Ae=`<link href="https://fonts.googleapis.com/css?family=${X.join("|")}" rel="stylesheet" type="text/css">`;yn(".code-css",this.$ctx).addClass("visible"),this.codemirrorCss.refresh(),this.codemirrorCss.setValue(xe),yn(".font-usage",this.$ctx).addClass("visible"),X.length>0?(yn(".code-html",this.$ctx).addClass("visible"),this.codemirrorHtml.refresh(),this.codemirrorHtml.setValue(Ae)):ie.length>0?yn.each(ie,(Ne,He)=>{Ae=`<script src="//use.typekit.net/${He}.js"><\/script>
<script>try{Typekit.load();}catch(e){}<\/script>`,yn(".code-html",this.$ctx).addClass("visible"),this.codemirrorHtml.refresh(),this.codemirrorHtml.setValue(Ae),yn(".code-css",this.$ctx).removeClass("visible")}):yn(".code-html",this.$ctx).removeClass("visible")}this.fire("BlockReady",{block:this.$ctx.data("block")},["events"])})):this.fire("BlockReady",{block:this.$ctx.data("block")},["events"])}after(){const t=[];this.$ctx.find(".fonts > .font").each((r,p)=>t.push(yn(p).data("id"))),t.length>0&&yn(".cloud-provider",this.$ctx).hide(),this.update(),this.enableSearch(),this.codemirrorHtml=CodeMirror.fromTextArea(this.$ctx.find("textarea.usage-html").get(0),{mode:"htmlmixed",theme:"solarized",lineNumbers:!0,lineWrapping:!1,readOnly:!0,viewportMargin:1/0,extraKeys:{Tab:r=>r.replaceSelection([r.getOption("indentUnit")+1].join(" "),"end","+input")}}),this.codemirrorCss=CodeMirror.fromTextArea(this.$ctx.find("textarea.usage-css").get(0),{mode:"css",theme:"solarized",lineNumbers:!0,lineWrapping:!1,readOnly:!0,viewportMargin:1/0,extraKeys:{Tab:r=>r.replaceSelection([r.getOption("indentUnit")+1].join(" "),"end","+input")}}),yn(".fileupload",this.$ctx).upload({dataType:"json",dropZone:yn(".dropzone",this.$ctx),add:(r,p)=>{p.formData.project_id=this.projectId,p.files[0].type==="application/zip"||p.files[0].type==="application/x-zip-compressed"?p.submit():this.displayError(window.translate("TypofontBlockComponent_invalidWebfontPackage"),window.translate("TypofontBlockComponent_onlyZipAccepted"))},done:(r,p)=>{const O=(p==null?void 0:p.result[0])||{};O.success?this.createTypofontsAndAddToBlock(O.file_id):this.displayError(window.translate("TypofontBlockComponent_invalidWebfontPackage"),window.translate("TypofontBlockComponent_incompleteWebfontPackage"))}});const a=this.$ctx.find('[data-sortable="true"]');yn.each(a,(r,p)=>this.enableSorting(p))}createTypofontsAndAddToBlock(t){return this.createTypofontsByFileId(t).then(a=>this.addFontIdsToBlock(a.font_ids)).then(a=>this.reloadPageToRenderBlock(a)).catch(()=>this.displayError(window.translate("TypofontBlockComponent_invalidWebfontPackage"),window.translate("TypofontBlockComponent_incompleteWebfontPackage")))}createTypofontsByFileId(t){return this.data.post("/api/typography/fonts",{project_id:this.projectId,file_id:t}).then(a=>{if(!(a!=null&&a.success))throw new Error("Typography fonts creation from file failed.");return yn.each(a.font_ids,(r,p)=>yn(".fonts",this.$ctx).append(yn(`<div class="font row" data-id="${p}"></div>`))),a})}addFontIdsToBlock(t){return this.data.updateBlock(this.$ctx,{settings:{"fonts[]":t}}).then(a=>a.success?a:Promise.reject("Typography block update failed."))}reloadPageToRenderBlock(){location.reload()}stop(){document.removeEventListener("click",this.onDocumentClick.bind(this))}onDocumentClick(t){const a=this.$ctx.find(".js-b-typofonts__search-results-container").get(0);t.target&&!(a!=null&&a.contains(t.target))&&this.hideSearchResults()}selectFontFamily({id:t,provider:a,name:r}){this.hideSearchResults(),this.data.post(`/api/project/fonts/${this.projectId}`,{font_id:`${t}`,provider:`provider_${a}`,fontname:r}).then(p=>{yn.each(p.font_data,(O,L)=>yn(".fonts",this.$ctx).append(yn(`<div class="font row" data-id="${L}"></div>`))),this.save(p.font_data),this.update(),this.$ctx.find(".cloud-provider").hide()})}displaySearchResults(t){this.$ctx.find(".js-b-typofonts__search-results-container").html((0,e.EY)($h,{results:t})).addClass("visible")}hideSearchResults(){this.$ctx.find(".js-b-typofonts__search-results-container").empty().removeClass("visible")}enableSearch(){const t=this.$ctx.find(".provider-content.active").data("provider"),a=this.$ctx.find(`.provider-content.tab-${t} input`),r=p=>p.provider_fontscom?Dl.FONT_FAMILY_PROVIDER.fontscom:p.provider_google?Dl.FONT_FAMILY_PROVIDER.google:Dl.FONT_FAMILY_PROVIDER.system;a.off(),a.on("keyup",p=>{p.key==="Escape"&&this.hideSearchResults()}),a.on("input",p=>{const O=p.target.value.trim();O.length>0?this.data.get(`/api/font-family?search_term=${O}&provider=${t}`).then(L=>this.displaySearchResults(L.data.map(W=>Object.assign({},W,{provider:r(W)})))):this.hideSearchResults()})}save(t){this.data.updateBlock(this.$ctx,{settings:{"fonts[]":t}})}displayError(t,a){(0,At.K)({title:t,text:a,type:"error",showCancelButton:!1,confirmButtonText:"OK",closeOnConfirm:!0},()=>null)}enableSorting(t){this.sortable=Vs.Ay.create(t,{group:`fonts-${this.blockId}`,ghostClass:"sortable-ghost",handle:".drag-handle",draggable:".font",onUpdate:a=>{if(!yn(document.body).hasClass("editor-enabled")||this.$ctx.hasClass("referenced"))return!1;this.data.patch(`/api/typography/fonts/${yn(a.item).data("id")}`,{sort:a.newIndex+1,block:this.$ctx.data("block")})}})}loadWebFont(t){try{window.WebFont.load(t)}catch(a){yn.getScript("//ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js",()=>window.WebFont.load(t))}}async openSettingsInSidebar(){const t=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"typofonts"}),{targets:a}=await this.data.getBlock(this.blockId),r=(p,O,L)=>{L==="targets"&&this.data.updateBlockTargets(this.blockId,p,O)};window.emitter.emit("Guideline:setBlockSettingsSidebar",{settings:{},settingsStructure:Nh,targets:a,onSettingChanged:r,appBridge:t,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName)})}}var Lh=Object.defineProperty,Bh=Object.defineProperties,Ac=Object.getOwnPropertyDescriptors,Pd=Object.getOwnPropertySymbols,Mh=Object.prototype.hasOwnProperty,Rh=Object.prototype.propertyIsEnumerable,Od=(s,t,a)=>t in s?Lh(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,Dc=(s,t)=>{for(var a in t||(t={}))Mh.call(t,a)&&Od(s,a,t[a]);if(Pd)for(var a of Pd(t))Rh.call(t,a)&&Od(s,a,t[a]);return s},Sd=(s,t)=>Bh(s,Ac(t));const Td=(0,x.I)(s=>(0,n.jsxs)("span",Sd(Dc({className:"spec"},s.field?{"data-field":s.field}:{}),{children:[(0,n.jsx)("span",Sd(Dc({className:"key"},s.editable?{"data-autocomplete-spy":"true","data-editable":"true"}:{}),{children:s.label?s.label:null})),":"," ",(0,n.jsx)("strong",{className:"value js-b-typostyles__value","data-editable":"true",children:s.value?s.value:null}),s.removeable!==!1&&s.editable?(0,n.jsx)("button",{className:"btn-spec-delete",title:window.translate("TypostylesBlock_deleteButton"),"aria-label":window.translate("TypostylesBlock_deleteButton"),children:(0,n.jsx)("i",{className:"ca-icon--trash ca-icon--sm"})}):null]})));var Ad=Object.defineProperty,$c=Object.getOwnPropertySymbols,Uh=Object.prototype.hasOwnProperty,Fh=Object.prototype.propertyIsEnumerable,Dd=(s,t,a)=>t in s?Ad(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,Vh=(s,t)=>{for(var a in t||(t={}))Uh.call(t,a)&&Dd(s,a,t[a]);if($c)for(var a of $c(t))Fh.call(t,a)&&Dd(s,a,t[a]);return s};const Nc=(0,x.I)(s=>{var t,a,r;const p=O=>O.filter(Boolean).reduce((L,W)=>(L[W.prop.replaceAll(/-([a-z])/g,X=>X[1].toUpperCase())]=W.cssValue,L),{});return(0,n.jsx)("div",{className:"row style",children:(0,n.jsxs)("div",{className:"style-spec row","data-id":s.id,children:[(0,n.jsx)("span",{className:"drag-handle",children:(0,n.jsx)("i",{className:"icon-bars"})}),(0,n.jsxs)("div",{className:"style-spec-meta",children:[(0,n.jsx)("h4",{className:"meta","data-field":"name","data-editable":"true",children:s.name}),(0,n.jsxs)("span",{className:"meta-color","data-field":"color",children:[(0,n.jsx)("span",{className:"key",children:s.color}),(0,n.jsxs)("strong",{className:"value",children:[(0,n.jsx)("i",{}),(0,n.jsx)("span",{children:"#000000"})]})]}),(0,n.jsxs)("span",{className:"meta-background","data-field":"background",children:[(0,n.jsx)("span",{className:"key",children:s.background}),(0,n.jsxs)("strong",{className:"value",children:[(0,n.jsx)("i",{}),(0,n.jsx)("span",{children:"#FFFFFF"})]})]}),(t=s.specs)==null?void 0:t.map((O,L)=>O?(0,n.jsx)(Td,Vh({},O),L):null),s.editable?(0,n.jsx)("button",{className:"btn-spec-add cm-actions__action-wrap cm-btn--transparent",title:window.translate("TypostylesBlock_addPropertyButton"),"aria-label":window.translate("TypostylesBlock_addPropertyButton"),children:(0,n.jsx)(Ps.V,{icon:"add",size:"md",classes:"cm-actions__action"})}):null]}),(0,n.jsxs)("div",{className:"style-spec-preview",children:[(0,n.jsx)("span",{className:"meta preview","data-field":"example","data-editable":"true",style:s.specs?p(s.specs):void 0,children:s.example?s.example:s.name}),(0,n.jsx)("div",{className:`meta meta-description ${s.description?"available":""}`,"data-field":"description","data-editable":"true",children:s.description?s.description:(0,n.jsx)("span",{className:"na",children:(0,Hs.Ay)(window.translate("TypostylesBlock_styleDescriptionPlaceholder"))})})]}),(0,n.jsxs)("div",{className:"style-spec-colors",children:[(0,n.jsx)("h5",{children:(0,Hs.Ay)(window.translate("TypostylesBlock_groupTextColors"))}),(0,n.jsxs)("ul",{className:"row foreground",children:[s.colors?(a=s.colors.foreground.list)==null?void 0:a.map(O=>(0,n.jsx)("li",{className:`color ${s.colors_data[O].light?"color-light":""} ${s.colors_data[O].dark?"color-dark":""} ${s.colors_data[O].close_to_red?"color-close-to-red":""}`,style:{background:`${s.colors_data[O].style_value}`},"data-id":O,"data-name":s.colors_data[O].name,"data-style-value":s.colors_data[O].style_value},O)):null,s.editable?(0,n.jsx)("li",{className:"btn-color-add btn-foreground-color-add",children:(0,n.jsx)("i",{className:"icon-pencil"})}):null]}),(0,n.jsx)("h5",{children:(0,Hs.Ay)(window.translate("TypostylesBlock_groupBackgroundColors"))}),(0,n.jsxs)("ul",{className:"row background",children:[s.colors?(r=s.colors.background.list)==null?void 0:r.map(O=>(0,n.jsx)("li",{className:`color ${s.colors_data[O].light?"color-light":""} ${s.colors_data[O].dark?"color-dark":""} ${s.colors_data[O].close_to_red?"color-close-to-red":""}`,style:{background:`${s.colors_data[O].style_value}`},"data-id":O,"data-name":s.colors_data[O].name,"data-style-value":s.colors_data[O].style_value},O)):null,s.editable?(0,n.jsx)("li",{className:"btn-color-add btn-background-color-add",children:(0,n.jsx)("i",{className:"icon-pencil"})}):null]}),s.editable?(0,n.jsx)("button",{className:"btn-delete",children:(0,Hs.Ay)(window.translate("TypostylesBlock_actionRemove"))}):null]})]})})}),Wh=(0,x.I)(s=>{var t;return(0,n.jsxs)("div",{className:"tooltip color-chooser","data-txt-background":window.translate("TypostylesBlock_chooserBackground"),"data-txt-text":window.translate("TypostylesBlock_chooserText"),"data-txt-text-color":window.translate("TypostylesBlock_chooserTextColor"),"data-txt-text-color-all":window.translate("TypostylesBlock_chooserTextColorAll"),"data-txt-text-bg-color":window.translate("TypostylesBlock_chooserTextBackgroundColor"),"data-txt-text-bg-colors":window.translate("TypostylesBlock_chooserHeadingColors"),"data-txt-text-bg-color-all":window.translate("TypostylesBlock_chooserTextBackgroundColorAll"),children:[(0,n.jsx)("div",{className:"context",children:s.empty?(0,n.jsxs)(n.Fragment,{children:[window.translate("TypostylesBlock_chooserNoPalette"),"\xA0",window.translate("TypostylesBlock_chooserNoPaletteDescription")]}):(0,n.jsxs)(n.Fragment,{children:[window.translate("TypostylesBlock_chooserHeadingConfigure"),"\xA0",(0,n.jsx)("span",{className:"what",children:(0,Hs.Ay)(window.translate("TypostylesBlock_chooserText"))}),"\xA0",(0,n.jsx)("span",{className:"colors_for",children:window.translate("TypostylesBlock_chooserHeadingColorsFor")}),"\xA0",(0,n.jsx)("span",{className:"for",children:window.translate("TypostylesBlock_chooserBackground")}),(0,n.jsx)("i",{})]})}),(t=s.palettes)==null?void 0:t.map(a=>{var r;return(0,n.jsxs)(Le.Fragment,{children:[(0,n.jsx)("h5",{children:a.name}),(0,n.jsx)("ul",{className:"colors",children:(r=a.colors)==null?void 0:r.map(p=>(0,n.jsx)("li",{title:p.name,className:`color ${p.light?"color-light":""} ${p.active?"selected":""}`,style:{background:p.css_value},"data-id":p.id,"data-name":p.name,"data-style-value":`${p.opacity_css==1?`${p.css_value_hex}`:`${p.css_value}`}`},`color-${p.id}`))})]},`palette-${a.id}`)})]})}),ec=[{id:"color",type:"input",clearable:!0,label:"Text Color",placeholder:"Text Color"},{id:"background",type:"input",clearable:!0,label:"Background",placeholder:"Background"},{id:"family",type:"input",clearable:!0,label:"Font",placeholder:"Font"},{id:"size",type:"input",clearable:!0,label:"Size",placeholder:"Size"},{id:"line_height",type:"input",clearable:!0,label:"Line Height",placeholder:"Line Height"},{id:"weight",type:"input",clearable:!0,label:"Weight",placeholder:"Weight"},{id:"style",type:"input",clearable:!0,label:"Style",placeholder:"Style"},{id:"transform",type:"input",clearable:!0,label:"Transform",placeholder:"Transform"},{id:"spacing",type:"input",clearable:!0,label:"Spacing",placeholder:"Spacing"},{id:"decoration",type:"input",clearable:!0,label:"Decoration",placeholder:"Decoration"},{id:"border",type:"input",clearable:!0,label:"Border",placeholder:"Border"},{id:"padding",type:"input",clearable:!0,label:"Padding",placeholder:"Padding",info:"The spacing between UI elements (e.g. 60px)"},{id:"align",type:"input",clearable:!0,label:"Alignment",placeholder:"Alignment"}],zh=(0,en.hD)({basics:[{id:"haveCustomLabels",label:"Custom Property Labels",type:"switch",defaultValue:!0,on:ec,off:[],showForTranslations:!0}]});var Es=i(5181),Kh=Object.defineProperty,$d=Object.getOwnPropertySymbols,Nd=Object.prototype.hasOwnProperty,Gh=Object.prototype.propertyIsEnumerable,kd=(s,t,a)=>t in s?Kh(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,kc=(s,t)=>{for(var a in t||(t={}))Nd.call(t,a)&&kd(s,a,t[a]);if($d)for(var a of $d(t))Gh.call(t,a)&&kd(s,a,t[a]);return s};class tc extends u.j{static get CARRIAGE_RETURN_KEY_CODE(){return 13}static get VALUE_INPUT_DEBOUNCE_DELAY(){return 500}on(t){this.sandbox.subscribe("events",this),this.blockId=this.$ctx.data("block"),this.sectionId=this.$ctx.data("sectionId"),this.displayName="Typo Styles",this.labels={color:this.$ctx.data("labelColor"),background:this.$ctx.data("labelBackground"),family:this.$ctx.data("labelFamily"),size:this.$ctx.data("labelSize"),line_height:this.$ctx.data("labelLineHeight"),weight:this.$ctx.data("labelWeight"),style:this.$ctx.data("labelStyle"),transform:this.$ctx.data("labelTransform"),spacing:this.$ctx.data("labelSpacing"),decoration:this.$ctx.data("labelDecoration"),border:this.$ctx.data("labelBorder"),padding:this.$ctx.data("labelPadding"),align:this.$ctx.data("labelAlign")},this.$items=null,this.styles=[],this.colors=[],this.$chooser=null,this.$chooserContainerSelector=null,this.colorPairData=null,this.open=!1,this.activeColors=[],this.specs=[{label:this.labels.family,removable:!1,keys:["font family","family","font-family"],field:"family",prop:"font-family",default:"Helvetica"},{label:this.labels.size,removable:!1,keys:["size","font-size"],field:"size",prop:"font-size",default:"12px"},{label:this.labels.line_height,keys:["line height","height","line-height"],field:"line_height",prop:"line-height",default:"1"},{label:this.labels.weight,keys:["weight","font-weight"],field:"weight",prop:"font-weight",default:"bold"},{label:this.labels.style,keys:["style","font-style"],field:"style",prop:"font-style",default:"italic"},{label:this.labels.transform,keys:["transform","text-transform","upper","lower","uppercase","lowercase"],field:"transform",prop:"text-transform",default:"uppercase"},{label:this.labels.spacing,keys:["spacing","letter-spacing"],field:"spacing",prop:"letter-spacing",default:"1px"},{label:this.labels.decoration,keys:["decoration","text-decoration","underline","dashed"],field:"decoration",prop:"text-decoration",default:"underline"},{label:this.labels.border,keys:["border"],field:"border",prop:"border-bottom",default:"1px solid #ccc"},{label:this.labels.padding,keys:["padding"],field:"padding",prop:"padding",default:"20px"},{label:this.labels.align,keys:["align","alignment","center","right","left"],field:"align",prop:"text-align",default:"left"}],this.$items=Es(".styles",this.$ctx),Es(document).on("mousedown",a=>{if(this.open)return this.$ctx.find(".tooltip").remove(),this.open=!1,this.$chooserContainerSelector=null,this.$chooser=null,a.stopPropagation(),!1}),this.$ctx.on("keydown",'[data-editable="true"]',a=>{if(a.keyCode===tc.CARRIAGE_RETURN_KEY_CODE)return Es(a.currentTarget).trigger("blur"),window.getSelection().removeAllRanges(),!1}),this.$ctx.on("blur",'.meta[data-editable="true"]',a=>{const r=Es(a.currentTarget),O=r.closest(".style-spec").data("id"),L=r.data("field");if(!L)return;const W=r.text(),X={id:O,language:(0,Wt.YZ)()||void 0};X[L]=W,this.data.post(`/api/typography/update/${O}`,X).then(ie=>{ie.success||console.error("Typography meta update failed")})}),this.$ctx.on("autocomplete:request",".spec",(a,r,p)=>{const L=Es(a.currentTarget).closest(".style-spec"),W=[];L.find(".spec").each((ie,xe)=>{W.push(Es(xe).data("field"))});const X=this.specs.map(ie=>{let xe=!1;if(r==="X")xe=!0;else{r=r.toLowerCase();for(const Ae of ie.keys)Ae.includes(r)&&(xe=!0)}if(xe&&Es.inArray(ie.field,W)===-1)return ie.label});p(X)}),this.$ctx.on("autocomplete:select",".spec",(a,r)=>{const p=this.specs.find(L=>L.label===r.label),O=Es(a.currentTarget);O.data("field",p.field),O.find(".key").removeAttr("contenteditable").removeAttr("data-editable"),O.find(".value").text(p.default).trigger("blur").trigger("focus")}),this.$ctx.on("click",".btn-spec-add",a=>{const r=Es(".document").data("editing"),p=Es(a.currentTarget),O=Es((0,e.EY)(Td,{editable:r})),L=O.find(".key");p.before(O),Es('[data-editable="true"]',O).attr("contenteditable",!0),L.trigger("focus"),setTimeout(()=>{L.text("X"),L.trigger("input"),L.text("")},100)}),this.$ctx.on("click",".btn-spec-delete",a=>{const r=Es(a.currentTarget),p=r.closest(".spec"),O=r.closest(".style-spec");p.remove(),this.saveSpecs(O)}),this.$ctx.on("blur",'.spec [data-editable="true"]',a=>{const p=Es(a.currentTarget).closest(".style-spec");this.saveSpecs(p)}),this.$ctx.on("keyup",".js-b-typostyles__value",Es.debounce(tc.VALUE_INPUT_DEBOUNCE_DELAY,a=>{const r=Es(a.currentTarget).closest(".style-spec");this.saveSpecs(r)})),this.$ctx.on("click",".btn-delete",a=>{const r=Es(a.currentTarget).closest(".style-spec"),p=r.data("id");this.fire("swal",{template:"block-typostyles-delete",closeOnConfirm:!0,callback:()=>{this.data.delete(`/api/typography/styles/${p}`).then(()=>{r.closest(".style").remove()})}})}),this.$ctx.on("click",".btn-add",()=>{const a={},r=`/api/typography/styles/${this.$ctx.data("project")}/${this.$ctx.data("group")}`;this.data.post(r,a).then(p=>{const O=Es(".document").data("editing"),L=p.style;L.specs=this.getCompletedSpecs(p.style),L.editable=O,L.color=this.labels.color,L.background=this.labels.background;const W=Es((0,e.EY)(Nc,L));this.$items.append(W),this.styles[p.style.id]=p.style,Es('[data-editable="true"]',W).attr("contenteditable",!0);const X=this.$ctx.find('[data-sortable="true"]');Es.each(X,(ie,xe)=>{this.enableSorting(xe)})})}),Es(document.body).hasClass("editor-enabled")&&this.onEditingEnabled(),this.$ctx.on("blur",'.js-font-group-title[data-editable="true"]',a=>{const p={group_title:Es(a.currentTarget).text()||"null",language:(0,Wt.YZ)()||void 0};this.data.post(`/api/typography/update/0/${this.$ctx.data("group")}`,p)}),this.$ctx.on("blur",'.js-font-group-description[data-editable="true"]',a=>{const p={group_description:Es(a.currentTarget).text()||"null",language:(0,Wt.YZ)()||void 0};this.data.post(`/api/typography/update/0/${this.$ctx.data("group")}`,p)}),t()}enableSorting(t){this.sortable=Vs.Ay.create(t,{group:{name:`styles-${this.blockId}`,pull:!1,put:!1},ghostClass:"sortable-ghost",handle:".drag-handle",onUpdate:a=>{if(!Es(document.body).hasClass("editor-enabled"))return!1;const r=Es(a.item).find(".style-spec").data("id"),p={id:r,sort:a.newIndex+1};this.data.post(`/api/typography/update/${r}`,p)}})}after(){this.renderTypoStyleBlocks(),this.$ctx.on("click",".background > .color",t=>{const a=Es(t.currentTarget),r=a.parents(".style-spec");this.updateForegroundVisualState(r,a)}),this.$ctx.on("click",".foreground > .color",t=>{const a=Es(t.currentTarget),r=a.parents(".style-spec");this.updateBackgroundVisualState(r,a)}),this.$ctx.on("click",".btn-foreground-color-add .color",t=>{const a=Es(t.currentTarget),r=a.data("id"),p=a.parents(".style-spec"),O=p.data("id"),L=this.$ctx.find(p).find(".background > .color.selected").data("id"),W=`/api/typography/color/${O}`,X={background_color_id:L,foreground_color_id:r};this.$chooserContainerSelector=".btn-foreground-color-add",this.colorPairData={mode:"foreground",background:L,foreground:r},this.data.post(W,X).then(ie=>{ie.success&&this.getTypoBlockData(O)})}),this.$ctx.on("click",".btn-background-color-add .color",t=>{const a=Es(t.currentTarget),r=a.data("id"),p=a.parents(".style-spec"),O=p.data("id"),L=this.$ctx.find(p).find(".foreground > .color.selected").data("id"),W=`/api/typography/color/${O}`,X={background_color_id:r,foreground_color_id:L};this.$chooserContainerSelector=".btn-background-color-add",this.colorPairData={mode:"background",foreground:L,background:r},this.data.post(W,X).then(ie=>{ie.success&&this.getTypoBlockData(O)})}),this.$ctx.on("click",".btn-color-add",t=>{const a=Es(t.currentTarget);this.renderTooltip(a)}),this.$ctx.on("click mousedown",".tooltip",t=>(t.stopPropagation(),!1))}updateLabelText(t,a){this.labels[t]=a,this.data.updateBlock(this.$ctx,{settings:{labels:this.labels}}),this.$ctx.find(`[data-field='${t}'] > .key`).text(a)}updateForegroundVisualState(t,a){const r=a.data("id")||"",p=a.data("styleValue"),O=this.styles[t.data("id")],L=O?O.colors:null;let W=null;this.updateBackgroundColor(t,p),Es(".background > .color,.foreground > .color",t).removeClass("clicked"),Es(".background > .color",t).removeClass("selected"),a.addClass("selected clicked"),a.removeClass("disabled"),Es(".background > .color",t).removeClass("disabled"),Es(".foreground > .color",t).addClass("disabled"),L&&Array.isArray(L.background[r])&&Es.each(L.background[r],(ie,xe)=>{Es(`.foreground > .color[data-id="${xe}"]`,t).removeClass("disabled"),W||(W=xe)});const X=Es(".foreground > .color.selected",t);if(X.length===0||X.hasClass("disabled")){X.removeClass("selected");const ie=Es(".foreground > .color:not(.disabled)",t).first();ie.addClass("selected"),this.updateTextColor(t,ie.data("styleValue"))}}updateBackgroundVisualState(t,a){const r=a.data("id")||"",p=a.data("styleValue"),O=this.styles[t.data("id")].colors;let L=null;this.updateTextColor(t,p),Es(".background > .color,.foreground > .color",t).removeClass("clicked"),Es(".foreground > .color",t).removeClass("selected"),a.addClass("selected clicked"),a.removeClass("disabled"),Es(".foreground > .color",t).removeClass("disabled"),Es(".background > .color",t).addClass("disabled"),O&&O.foreground[r]&&Es.each(O.foreground[r],(X,ie)=>{Es(`.background > .color[data-id="${ie}"]`,t).removeClass("disabled"),L||(L=ie)});const W=Es(".background > .color.selected",t);if(W.length===0||W.hasClass("disabled")){W.removeClass("selected");const X=Es(".background > .color:not(.disabled)",t).first();X.addClass("selected"),this.updateBackgroundColor(t,X.data("styleValue"))}}renderTypoStyleBlocks(){let a=`/api/typography/library/${this.$ctx.data("project")}/${this.$ctx.data("group")}`;const r=(0,Wt.YZ)();r&&(a+=`?language=${r}`),this.data.get(a).then(p=>{this.$ctx.find(".js-font-group-title").text(p.font_group.title),this.$ctx.find(".js-font-group-description").text(p.font_group.description),this.$ctx.find(".js-font-group-title").attr("data-empty",!p.font_group.title||p.font_group.title===""),this.$ctx.find(".js-font-group-description").attr("data-empty",!p.font_group.description||p.font_group.description===""),this.$items.empty(),this.colors=p.colors,Es.each(p.styles,(O,L)=>{this.updateTypoBlockData(p,L),L.color=this.labels.color,L.background=this.labels.background;const W=Es((0,e.EY)(Nc,L));this.$items.append(W),Es(".foreground > .color",W).first().trigger("click")})})}getTypoBlockData(t){const a=this.$ctx.data("project"),r=this.$ctx.data("group");this.data.get(`/api/typography/library/${a}/${r}`).then(p=>{let O=p.styles.filter(L=>Number(L.id)===t);O=O[0],this.updateTypoBlockData(p,O),this.renderTypoBlock(t)})}updateTypoBlockData(t,a){const r=Es(".document").data("editing");a.specs=this.getCompletedSpecs(a),a.colors_data=t.colors,a.editable=r,this.colors=t.colors,this.styles[a.id]=a,this.activeColors[a.id]=a.colors}renderTypoBlock(t){this.styles[t].color=this.labels.color,this.styles[t].background=this.labels.background;const a=this.$ctx.find(`.style-spec[data-id="${t}"]`).parent(".row"),r=Es((0,e.EY)(Nc,this.styles[t])),p=Es(this.$chooserContainerSelector,r);a.replaceWith(r),p.append(this.$chooser),this.applyVisualUpdates(r),this.renderTooltip(p),Es('[data-editable="true"]',r).attr("contenteditable",!0)}applyVisualUpdates(t){const a=t.find(".style-spec");let r,p;this.colorPairData&&(r=t.find(`.foreground.row > .color[data-id="${this.colorPairData.foreground}"]`),p=t.find(`.background.row > .color[data-id="${this.colorPairData.background}"]`),r.length===0&&(r=t.find(".foreground.row > .color").first()),p.length===0&&(p=t.find(".background.row > .color").first()),this.colorPairData.mode==="foreground"&&(this.updateBackgroundVisualState(a,r),this.updateForegroundVisualState(a,p)),this.colorPairData.mode==="background"&&(this.updateForegroundVisualState(a,p),this.updateBackgroundVisualState(a,r)),this.colorPairData=null)}renderTooltip(t){const a=t.parents(".style-spec"),r=t.closest(".style-spec").data("id"),O=(t.closest(".row").hasClass("foreground")?"foreground":"background")==="background"?"foreground":"background";let L=Es(`.${O} > .color.selected`,a);const W=L.data("id")||"";this.data.get(`/api/color/library/${this.$ctx.data("project")}`).then(X=>{if(this.activeColors[r]){for(const xe of X.palettes)if(xe.colors)for(const Ae of xe.colors){const Ne=this.activeColors[r][O][W];Ne&&Es.each(Ne,(He,Je)=>{parseInt(Je)===parseInt(Ae.id)&&(Ae.active=!0)})}}X.palettes.length===0&&(X.empty=!0),Es(".color-chooser",this.$ctx).remove(),t.append(Es((0,e.EY)(Wh,X)));const ie=Es(".color-chooser",t);t.hasClass("btn-background-color-add")?(ie.find(".what").text(ie.data("txtBackground")),ie.find(".for").text(ie.data("txtTextColor"))):(ie.find(".what").text(ie.data("txtText")),ie.find(".for").text(ie.data("txtTextBgColor")),L=Es(".background > .color.selected",a)),L.length>0?ie.find("i").css("background",L.data("styleValue")):(ie.find(".colors_for").text(ie.data("txtTextBgColors")),ie.find(".for").text("")),this.$chooser=ie,this.open=!0})}getCompletedSpecs(t){let a;return this.specs.map(r=>{let p=null;switch(r.field){case"family":a=t.family,p=this.copyAndExtend(r,"font-family",a);break;case"size":a=`${parseFloat(t.size)}${t.size_unit||""}`,p=this.copyAndExtend(r,"font-size",a);break;case"line_height":t.line_height&&t.line_height!=="0"&&(a=`${parseFloat(t.line_height)}${t.line_height_unit||""}`,p=this.copyAndExtend(r,"line-height",a));break;case"weight":t.weight&&Es.trim(t.weight)!=="normal"&&(a=t.weight,p=this.copyAndExtend(r,"font-weight",a));break;case"style":t.style&&t.style!=="normal"&&(a=t.style,p=this.copyAndExtend(r,"text-style",a));break;case"transform":t.transform&&t.transform!=="none"&&(a=t.transform,p=this.copyAndExtend(r,"text-transform",a));break;case"spacing":t.spacing&&t.spacing!=="none"&&t.spacing!=="0"&&(a=`${parseFloat(t.spacing)}${t.spacing_unit||""}`,p=this.copyAndExtend(r,"letter-spacing",a));break;case"padding":t.padding&&t.padding!=="0"&&(a=t.padding,p=this.copyAndExtend(r,"padding",a));break;case"decoration":t.decoration&&t.decoration!=="none"&&(a=t.decoration,p=this.copyAndExtend(r,"text-decoration",a));break;case"border":t.border&&(a=t.border,p=this.copyAndExtend(r,"border",a));break;case"align":t.align&&(a=t.align,p=this.copyAndExtend(r,"text-align",a));break}return p})}copyAndExtend(t,a,r){return Es.extend(!0,t,{value:r,cssValue:this.normalizeCssValues(a,r)})}updateTextColor(t,a){t.find(".preview").css("color",a),t.find(".meta-color > .value > span").text(a),t.find(".meta-color > .value > i").css("background",a)}updateBackgroundColor(t,a){t.find(".style-spec-preview").css("background",a),t.find(".meta-background > .value > span").text(a),t.find(".meta-background > .value > i").css("background",a)}saveSpecs(t){const a=t.data("id"),r={id:a};t.find(".spec").each((p,O)=>{const L=Es(O),W=L.data("field");W?(L.removeClass("state-error"),r[W]=L.find(".value").text()):L.addClass("state-error")});for(const p of this.specs)r[p.field]||(r[p.field]=null);this.data.post(`/api/typography/update/${a}`,r).then(p=>{if(p.success){const O=t.find(".preview"),L=this.getCompletedSpecs(p.font),W=[];for(const X of L)X&&W.push(`${X.prop}:${this.normalizeCssValues(X.prop,X.value)}`);W.push(`color:${O.css("color")}`),W.push(`background:${O.css("background-color")}`),O.attr("style","").attr("style",W.join(";"))}else console.error("Typography spec update failed")})}onEditingEnabled(){const t=Es(document.body);if(this.$ctx.hasClass("referenced")||(Es('[data-editable="true"]',this.$ctx).attr("contenteditable",!0),this.tpl.enableSanitizationOnPasting(this.$ctx,"[contenteditable]")),this.sortable)this.sortable.option("disabled",!1);else if(t.data("editor")){const a=this.$ctx.find('[data-sortable="true"]');Es.each(a,(r,p)=>{this.enableSorting(p)})}}onEditingDisabled(){this.$ctx.hasClass("referenced")||(Es('[data-editable="true"]',this.$ctx).removeAttr("contenteditable"),this.tpl.disableSanitizationOnPasting(this.$ctx,"[contenteditable]")),this.sortable&&this.sortable.option("disabled",!0)}onColorPaletteColorRemoved(){this.renderTypoStyleBLocks()}normalizeCssValues(t,a){switch(t){case"font-family":return this.fontFamilyToCss(a);case"font-weight":return this.weightToCss(a);case"text-align":return a.toLowerCase();case"transform":return a.toLowerCase();default:return a}}weightToCss(t){return t?this.isHeavyFontWeight(t)?"800":this.isThinFontWeight(t)?"100":t:"bold"}fontFamilyToCss(t){return t?this.isGenericFontFamily(t)?t.toLowerCase():`'${t}'`:"sans-serif"}isHeavyFontWeight(t){return["black","extra bold","heavy"].includes(t.toLowerCase())}isThinFontWeight(t){return["thin","light"].includes(t.toLowerCase())}isGenericFontFamily(t){return["serif","sans-serif","monospace","cursive","fantasy","system-ui","emoji","math","fangsong"].includes(t.toLowerCase())}async openSettingsInSidebar(){const t=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"typostyles"}),{settings:a,targets:r}=await this.data.getBlock(this.blockId);a.haveCustomLabels=a.labels?!ec.every(W=>W.label===a.labels[W.id]):!1;const p=ec.map(W=>({id:W.id,default:W.label,value:this.labels[W.id]})).filter(W=>W.value!==W.default).reduce((W,X)=>(W[X.id]=X.value,W),{}),O=kc(kc({},a),p),L=(W,X,ie)=>{if(ie==="targets"){this.data.updateBlockTargets(this.blockId,W,X);return}ec.some(xe=>xe.id===W)&&this.updateLabelText(W,X)};window.emitter.emit("Guideline:setBlockSettingsSidebar",{settings:O,settingsStructure:zh,targets:r,onSettingChanged:L,appBridge:t,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName)})}}var $l=i(73260);class Ld{static async assetViewedInBlock(t,a){await Ns.J.post(`/api/document-block/${a}/asset-viewed-event`,{asset_id:t})}}var Bd=i(60801);const Lc=(0,x.I)(s=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{className:"m-dropzone__upload js-m-dropzone__upload",type:"file",name:"files_replace[]","aria-label":window.translate("Legacy_stylebuide_block_video_upload")}),(0,n.jsx)("div",{className:"inline-actions js-b-video__actions",children:(0,n.jsxs)("div",{className:"cm-btn-dropdown",children:[s.viewerEnabled?(0,n.jsx)("button",{className:"btn btn-icon btn-download js-co-viewer__open","data-o-viewer-token":s.video.token,children:(0,n.jsx)("i",{className:"m-attachments__toggle-icon icon-info"})}):null,(0,n.jsx)("div",{className:"cm-btn-dropdown__menu js-cm-btn-dropdown__menu"})]})}),(0,n.jsx)("div",{className:"b-video__wrapper-size js-b-video__wrapper-size",style:{maxWidth:`${s.video.video_width}px`},children:(0,n.jsx)($l.L,{previewUrl:s.video.preview_url,hideControlsOnLeaveAndIdle:!0,hideSpecialControls:s.video.video_width<Bd.h.SPECIAL_CONTROLS_BREAKPOINT,spaceBarToggleOnlyAfterInteraction:!0})})]}));var Nl=i(76480);const Hh=[{label:"Auto",value:"auto"},{label:"S",value:"200px"},{label:"M",value:"400px"},{label:"L",value:"600px"}],Md=!1,Yh="auto",Rd="auto",Jh=(0,en.hD)({basics:[{id:"asset",type:"legacyAssetInput",label:"Video",objectTypes:[ia.VZ.ImageVideo],extensions:ia.vB.Videos,showForTranslations:!0},{id:"autoplay",type:"switch",label:"Autoplay (muted)",defaultValue:!1},{id:"loop",type:"switch",label:"Loop",defaultValue:!1}],layout:[{id:"isCustomWidth",label:"Width",type:"switch",defaultValue:Md,switchLabel:"Custom",on:[{id:"widthCustom",type:"input",placeholder:"200px",defaultValue:"auto",rules:[Jt.I],onChange:s=>(0,Ii.j)(s,"widthSimple")}],off:[{id:"widthSimple",type:"segmentedControls",defaultValue:Rd,choices:Hh}]}]});var br=i(5181),Ud=Object.defineProperty,Zh=Object.defineProperties,Fd=Object.getOwnPropertyDescriptors,Vd=Object.getOwnPropertySymbols,Wd=Object.prototype.hasOwnProperty,Qh=Object.prototype.propertyIsEnumerable,zd=(s,t,a)=>t in s?Ud(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,Xh=(s,t)=>{for(var a in t||(t={}))Wd.call(t,a)&&zd(s,a,t[a]);if(Vd)for(var a of Vd(t))Qh.call(t,a)&&zd(s,a,t[a]);return s},qh=(s,t)=>Zh(s,Fd(t));class sc extends u.j{static get STATUS_FINISHED(){return"FINISHED"}on(t){var a;this.segmentAnalytics=this.sandbox.getConfigParam("segmentAnalytics"),this.$loader=br((0,e.EY)(ja.$,{id:this.id})),this.sandbox.addModules(this.$loader),this.sandbox.subscribe("events",this),this.replace=!1,this.isTranslator=(0,Wt.YZ)()&&br(document.body).data("translator")===1,this.pollExecutionAmount=0,this.blockId=this.$ctx.data("block"),this.sectionId=this.$ctx.data("sectionId"),this.videoUrl=this.$ctx.dataAsString("videoGenericUrl"),this.displayName="Video",this.viewerEnabled=this.$ctx.dataAsBoolean("viewerEnabled"),this.printView=br(document.body).data("printview"),this.assetDownload=this.sandbox.getConfigParam("assetDownload"),this.assetId=this.$ctx.data("videoId"),this.filename=this.$ctx.data("videoFilename"),this.genericUrl=this.$ctx.data("videoGenericUrl"),this.copyrightDownloadConsensus=this.$ctx.data("copyrightDownloadConsensus"),this.copyrightNotice=this.$ctx.data("copyrightNotice"),this.licenses=this.$ctx.data("licenses"),this.licenseToken=this.$ctx.data("licenseToken"),this.downloadUrl=this.$ctx.data("downloadUrl");const r=(a=window.blockSettings)==null?void 0:a[this.blockId];this.printView===1||!this.containsNewSettingsWidthKeys(r)?this.width=this.$ctx.data("settingsWidth"):this.width=r.isCustomWidth?r.widthCustom:r.widthSimple,this.videoUrl&&(this.renderVideoModule(),this.setVideoWidth(this.width)),this.$ctx.on("click",".js-m-assetchooser-placeholder",()=>{this.openAssetChooser("add")}),this.bindDownload(),t()}after(){this.bindFileUploadEvent(),this.displayVideoProcessing(),this.bindTracking()}setVideoAutoplay(t){t&&this.$ctx.find(".js-cm-video__item-video")[0].play(),this.data.updateBlock(this.$ctx,{settings:{autoplay:t}})}setVideoLoop(t){const a=this.$ctx.find(".js-cm-video__item-video");t?a.attr("loop","loop"):a.removeAttr("loop"),this.data.updateBlock(this.$ctx,{settings:{loop:t}})}bindFileUploadEvent(){br(".js-m-dropzone__upload",this.$ctx).upload({dataType:"json",dropZone:br(".js-m-dropzone",this.$ctx),add:(t,a)=>{const r=a.name.split(".").pop();if((0,kn.EA)().includes(r)&&a.files[0].type.includes("video"))a.submit();else{const O=this.$ctx.data("txt-processing-error-title"),L=this.$ctx.data("txt-processing-error-description");this.displayError(O,L),this.$ctx.find(".js-m-dropzone span").text(this.$ctx.data("txt-placeholder"))}this.data.checkStorageLimit(a.files[0].size).then(a.submit)},start:()=>{const t=br(".js-m-dropzone",this.$ctx);t.find(".icon-film").replaceWith(this.$loader),t.find(".js-m-dropzone__progress-container").addClass("visible")},progress:(t,a)=>{const r=br(".js-m-dropzone",this.$ctx),p=parseInt(a.loaded/a.total*100,10);r.find(".js-m-dropzone__progress-bar").css("width",`${p}%`),this.fire("progress",{id:this.id,progress:p})},done:async(t,a)=>{var r;if(br(".js-m-dropzone",this.$ctx).find(".js-m-dropzone__progress-container").removeClass("visible"),(r=a==null?void 0:a.result[0])!=null&&r.file_id){const O=await(0,Oa.Vq)(a.result[0].file_id,br(".document").data("project"));this.$ctx.find(".js-m-dropzone span").text(this.$ctx.data("txtProcessing")),this.$loader.remove(),this.updateAssetFromUpload(O.id)}}})}updateAssetFromUpload(t){this.data.updateBlock(this.$ctx,{settings:{asset:t,isWorkspaceAsset:!1}}),this.performVideoProcessingStatusCheck(t)}displayVideoProcessing(){const t=this.$ctx.data("videoId"),a=this.$ctx.find(".js-m-dropzone");this.$ctx.find("video").length===0&&t&&(a.find(".icon-film").remove(),a.find("span").text(this.$ctx.data("txtProcessing")),this.performVideoProcessingStatusCheck(t))}bindTracking(){this.$ctx.off("CVideoPlayed"),this.$ctx.on("CVideoPlayed",t=>{const a=br(t.target),r=a.dataAsString("filename"),p=a.attr("src");this.segmentAnalytics.trackPlay("styleguide block video",r,"video",p),this.trackVideoPlayed()})}pollVideoConverter(t){let a=`/api/screen/video/${t}`;return this.replace&&(a+="?replace=true",this.replace=!1),this.data.get(a)}displayError(t,a){(0,At.K)({title:t,text:a,type:"error",showCancelButton:!1,confirmButtonText:"OK",closeOnConfirm:!0},()=>{})}getViewerInfo(t,a){const r=br.extend({},a);return r.downloadEnabled=!!this.$ctx.data("imageAndVideoDownloadsEnabled"),r.tracking={blockType:"video"},r}performVideoProcessingStatusCheck(t){const a=setInterval(()=>{this.pollVideoConverter(t).then(r=>{if(r.generic_url&&r.status===sc.STATUS_FINISHED){clearInterval(a);const p=br((0,e.EY)(Lc,{viewerEnabled:this.viewerEnabled,video:r}));r.block=this.$ctx.data("block"),r.screen=t,this.updateAssetId(t),this.tpl.addAndActivate(this.$ctx.find(".b-video__container"),p,!0),this.bindTracking()}}),this.pollExecutionAmount++,this.pollExecutionAmount>60&&clearInterval(a)},1e4)}onImageAndVideoDownloadsConfigured(){this.reloadAndReplaceSelf()}onAssetViewerConfigured(){this.reloadAndReplaceSelf()}reloadAndReplaceSelf(){this.data.get(`/api/document/block/${this.$ctx.data("block")}`).then(t=>{var a;const r=t.data;if(!r)return;const p=br((0,e.EY)(Nl.o,qh(Xh({},r),{settings:JSON.parse(JSON.stringify((a=r.settings)!=null?a:"{}")),editable:!0,has_translator_settings:!0})));this.sandbox.addModules(p),this.sandbox.removeModules([this]),this.$ctx.after(p),this.$ctx.remove()})}renderVideoModule(){const t=this.$ctx.find(".js-b-video__wrapper-size"),a=Bd.h.SPECIAL_CONTROLS_BREAKPOINT;try{const r=new URL(this.videoUrl);r.searchParams.delete("format");const p=(0,e.EY)($l.L,{previewUrl:r.toString(),teaserImage:this.$ctx.dataAsString("videoPreviewUrl"),autoplay:this.$ctx.dataAsBoolean("videoAutoplay"),loop:this.$ctx.dataAsBoolean("videoLoop"),hideControlsOnLeaveAndIdle:!0,hideSpecialControls:this.width<a||this.$ctx.dataAsNumber("videoWidth")<a,spaceBarToggleOnlyAfterInteraction:!0});this.tpl.addAndActivate(t,p)}catch(r){console.error(r)}}updateAssetFromWorkspace(t){this.data.get(`/api/screen/video/${t}`).then(a=>{if(this.$ctx.data("asset",t),a.status===sc.STATUS_FINISHED){const r=br((0,e.EY)(Lc,{viewerEnabled:this.viewerEnabled,video:a}));this.tpl.addAndActivate(this.$ctx.find(".b-video__container"),r,!0);const p={asset:t,isWorkspaceAsset:!0};this.updateAssetId(t),this.data.updateBlock(this.$ctx,{settings:p})}else this.performVideoProcessingStatusCheck(t)})}openAssetChooser(t){const a=[{key:"ext",values:(0,kn.EA)()}],r=this.$ctx.data("videoId");r&&a.push({key:"id",values:[r],inverted:!0});const p=(0,e.EY)(aa.l,{externalData:{id:this.blockId,type:t},multiSelectionAllowed:!1,filters:a});this.fire("openModal",{modifier:"flex",$content:p},["events"])}onAssetChooserAssetChosen(t){t&&t.externalData&&t.externalData.id===this.blockId&&(this.fire("closeModal",["events"]),t.screenIds&&t.screenIds.length>0&&this.updateAssetFromWorkspace(t.screenIds[0]))}setVideoWidth(t){this.$ctx.find(".js-b-video__wrapper-size").css("width",t),this.width=t}updateAssetId(t){this.assetId=t}bindDownload(){this.$ctx.on("click",".js-b-video__download-link",()=>{this.assetDownload.downloadAsset({id:this.assetId,filename:this.filename,generic_url:this.genericUrl,licenses:this.licenses,license_token:this.licenseToken,copyright_download_consensus:this.copyrightDownloadConsensus,meta_copyright_notice:this.copyrightNotice},this.downloadUrl),this.segmentAnalytics.trackDownload("styleguide block video",this.filename,"video",null,this.downloadUrl,null,!1,!1,this.filename,null,null),this.trackAssetDownloadForPlatformAnalytics(this.$ctx.data("asset-data"))})}trackAssetDownloadForPlatformAnalytics(t){try{yt.w.track([{type:"asset:download",brandId:(0,et.M)(),properties:{asset_ext:t.ext,asset_id:t.id,download_type:"SINGLE",project_id:t.project,project_type:t.project_type,revision_id:t.revision,via:(0,b.Xv)(),via_id:(0,b._j)(),block_id:this.blockId}}])}catch(a){console.error(a)}}trackVideoPlayed(){Ld.assetViewedInBlock(this.assetId,this.blockId).catch(console.error)}containsNewSettingsWidthKeys(t){return Object.keys(t).some(a=>["widthCustom","widthSimple","isCustomWidth"].includes(a))}async openSettingsInSidebar(){var t,a;const r=new Ls.T19("block",{blockId:this.blockId,sectionId:this.sectionId,marketplaceServiceAppId:"video"}),{settings:p,targets:O}=await this.data.getBlock(this.blockId);(t=p.widthSimple)!=null||(p.widthSimple=Yh),(a=p.widthCustom)!=null||(p.widthCustom=Rd),this.containsNewSettingsWidthKeys(p)||(p.isCustomWidth=!0,p.widthCustom=p.width);const L=(W,X,ie)=>{if(ie==="targets"){this.data.updateBlockTargets(this.blockId,W,X);return}switch(W){case"asset":{const{source:xe,value:Ae}=X;xe===wa._.Library?this.updateAssetFromWorkspace(Ae):xe===wa._.Upload&&this.updateAssetFromUpload(Ae);break}case"autoplay":this.setVideoAutoplay(X);break;case"loop":this.setVideoLoop(X);break;case"isCustomWidth":p.isCustomWidth=X,this.data.updateBlock(this.$ctx,{settings:{isCustomWidth:X}}),this.setVideoWidth(X?p.widthCustom:p.widthSimple);break;case"widthSimple":case"widthCustom":p[W]=X,this.data.updateBlock(this.$ctx,{settings:{[W]:X}}),this.setVideoWidth(X);break;default:return}};window.emitter.emit("Guideline:setBlockSettingsSidebar",{settingsStructure:Jh,settings:p,targets:O,onSettingChanged:L,appBridge:r,breadcrumbs:(0,xn.w)(this.$ctx.get(0),this.displayName)})}}var ep=i(16483),Kd=i.n(ep);const tp=(0,x.I)(()=>(0,n.jsx)("div",{className:"cm-blockmanager__copy js-cm-blockmanager__copy",children:(0,n.jsx)("button",{className:"cm-blockmanager__copy-insert js-cm-blockmanager__copy-insert",children:(0,n.jsx)("i",{className:"icon-long-arrow-down"})})})),sp=(0,x.I)(()=>(0,n.jsx)("div",{className:"cm-blockmanager__cut js-cm-blockmanager__cut",children:(0,n.jsx)("button",{className:"cm-blockmanager__cut-insert js-cm-blockmanager__cut-insert",children:(0,n.jsx)("i",{className:"icon-long-arrow-down"})})})),Gd=(0,x.I)(()=>(0,n.jsx)("div",{className:"cm-blockmanager__cut--section js-cm-blockmanager__cut",children:(0,n.jsx)("button",{className:"cm-blockmanager__cut-insert--section js-cm-blockmanager__section-cut-insert",children:(0,n.jsx)("i",{className:"icon-long-arrow-right"})})})),np=(0,x.I)(()=>(0,n.jsx)("div",{className:"pm-chooser",children:(0,n.jsx)("div",{className:"js-co-settings__setting cm-setting cm-setting-chooser cm-setting-chooser--blocks","data-id":"template","data-type":"chooser","data-instant":"true",children:(0,n.jsxs)("div",{className:"cm-setting__preview cm-setting-chooser__types",children:[(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"blank_full_width",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/blank_full_width.svg",alt:"blank block full width"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"blank_half",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/blank_half.svg",alt:"blank block half width"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"blank_thirds",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/blank_thirds.svg",alt:"blank block third width"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"blank_quarters",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/blank_quarters.svg",alt:"blank block quarter width"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"blank_4_8",children:(0,n.jsx)("img",{alt:"",className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/blank_4_8.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"blank_8_4",children:(0,n.jsx)("img",{alt:"",className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/blank_8_4.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"blank_3_9",children:(0,n.jsx)("img",{alt:"",className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/blank_3_9.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"blank_2_8_2",children:(0,n.jsx)("img",{alt:"",className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/blank_2_8_2.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"blank_3_6_3",children:(0,n.jsx)("img",{alt:"",className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/blank_3_6_3.svg"})})]})})})),ap=(0,x.I)(()=>(0,n.jsx)("div",{className:"pm-chooser",children:(0,n.jsx)("div",{className:"js-co-settings__setting cm-setting cm-setting-chooser cm-setting-chooser--blocks","data-id":"template","data-type":"chooser","data-instant":"true",children:(0,n.jsxs)("div",{className:"cm-setting__preview cm-setting-chooser__types",children:[(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"mostused_text_on_image",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/mostused_text_on_image.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"mostused_textimage_left",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/mostused_textimage_left.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"mostused_textimage_half",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/mostused_textimage_half.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"mostused_textimage_thirds",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/mostused_textimage_thirds.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"mostused_textimage_quarters",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/mostused_textimage_quarters.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"mostused_text_full_width",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/mostused_text_full_width.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"mostused_text_half",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/mostused_text_half.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"mostused_text_thirds",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/mostused_text_thirds.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"mostused_video",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/mostused_video.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"mostused_media_youtube",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/mostused_media_youtube.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"mostused_media_vimeo",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/mostused_media_vimeo.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"mostused_divider",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/mostused_divider.svg"})})]})})})),Hd=(0,x.I)(()=>(0,n.jsx)("div",{className:"pm-chooser",children:(0,n.jsx)("div",{className:"js-co-settings__setting cm-setting cm-setting-chooser cm-setting-chooser--blocks","data-id":"template","data-type":"chooser","data-instant":"true",children:(0,n.jsxs)("div",{className:"cm-setting__preview cm-setting-chooser__types",children:[(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"text_full_width",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",alt:"block text full width",src:"/img/brandportal/chooser/text_full_width.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"text_half",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",alt:"block text half width",src:"/img/brandportal/chooser/text_half.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"text_thirds",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",alt:"block text third of width",src:"/img/brandportal/chooser/text_thirds.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"text_quarters",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",alt:"block text quarter of width",src:"/img/brandportal/chooser/text_quarters.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"text_3_3_6",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/text_3_3_6.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"text_6_3_3",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/text_6_3_3.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"text_3_6_3",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/text_3_6_3.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"text_marginal",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/text_marginal.svg"})})]})})})),ip=(0,x.I)(()=>(0,n.jsx)("div",{className:"pm-chooser",children:(0,n.jsx)("div",{className:"js-co-settings__setting cm-setting cm-setting-chooser cm-setting-chooser--blocks","data-id":"template","data-type":"chooser","data-instant":"true",children:(0,n.jsxs)("div",{className:"cm-setting__preview cm-setting-chooser__types",children:[(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"textimage_half",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/textimage_half.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"textimage_thirds",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/textimage_thirds.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"textimage_quarters",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/textimage_quarters.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"textimage_left",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/textimage_left.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"textimage_2x_4_8",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/textimage_2x_4_8.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"textimage_12_2x6",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/textimage_12_2x6.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"textimage_leftright_leftright",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/textimage_leftright_leftright.svg"})}),(0,n.jsx)("a",{href:"javascript:;",className:"cm-setting-chooser__type js-cm-setting-chooser__type  cm-setting-chooser__type--icon-only","data-template":"textimage_3_images_1_text",children:(0,n.jsx)("img",{className:"cm-setting-chooser__icon",src:"/img/brandportal/chooser/textimage_3_images_1_text.svg"})})]})})})),op=(0,x.I)(s=>(0,n.jsx)(k.y,{items:[{id:"section-mostused",active:!0,title:window.translate("BrandportalSections_mostused"),content:(0,e.EY)(ap,s)},{id:"section-text-image",active:!1,title:window.translate("BrandportalSections_textimage"),content:(0,e.EY)(ip,s)},{id:"section-text",active:!1,title:window.translate("BrandportalSections_text"),content:(0,e.EY)(Hd,s)},{id:"section-blank",active:!1,title:window.translate("BrandportalSections_blank"),content:(0,e.EY)(np,s)}],border:{bottom:!0},transparent:!0,shadow:!0}));var Sr=i(19356),rp=i(74688),nc=i(25100);const Yd=(0,x.I)(()=>(0,n.jsx)("div",{className:"o-document-targets-indicator js-o-document-targets-indicator",children:(0,n.jsxs)("p",{children:["Simulated Targets",(0,n.jsx)("br",{}),"Editor disabled"]})})),lp=(0,x.I)(s=>(0,n.jsxs)("div",{className:"cm-blockmanager__block-settings",children:[(0,n.jsx)(E.p,{size:"large",title:window.translate("BrandportalSection_settingTitle")}),(0,n.jsx)(ys.t,{label:window.translate("BrandportalSection_settingWidth"),group:"settings",id:"width",type:"unit",value:s.settings.width||s.settings.width===0?s.settings.width:"auto"}),(0,n.jsx)(ys.t,{label:window.translate("BrandportalSection_settingMargin"),group:"settings",id:"margin",type:"unit",value:s.settings.margin||s.settings.margin===0?s.settings.margin:"auto"}),(0,n.jsxs)("div",{className:"co-settings__row",children:[(0,n.jsx)("div",{className:"co-settings__col g-col-xs-6",children:(0,n.jsx)(ys.t,{label:window.translate("BrandportalSection_settingMarginTop"),group:"settings",id:"margin_top",type:"unit",value:s.settings.margin_top||s.settings.margin_top===0?s.settings.margin_top:"auto"})}),(0,n.jsx)("div",{className:"co-settings__col g-col-xs-6",children:(0,n.jsx)(ys.t,{label:window.translate("BrandportalSection_settingMarginBottom"),group:"settings",id:"margin_bottom",type:"unit",value:s.settings.margin_bottom||s.settings.margin_bottom===0?s.settings.margin_bottom:"auto"})})]}),(0,n.jsx)(H.X,{group:"settings",id:"background",label:window.translate("BrandportalSection_settingBackground"),picker:!0,palette:s.project,value:s.settings.background||"transparent"})]}));var cp=i(73795);const Bc=(0,x.I)(s=>(0,n.jsxs)("div",{className:"cm-blockmanager__block-settings",children:[(0,n.jsx)(E.p,{size:"large",title:window.translate("GuidelineActions_targetVisibility")}),(0,n.jsx)(cp.O,{ids:[s.rowId],type:"hubgridrow",data:s.data})]})),dp=(0,x.I)(()=>(0,n.jsx)("div",{className:"cm-blockmanager__toolbar cm-blockmanager__toolbar--section",children:(0,n.jsxs)("div",{className:"cm-blockmanager__toolbar-content cm-blockmanager__toolbar-content--section",children:[(0,n.jsxs)("div",{className:"cm-btn-dropdown js-cm-blockmanager__section-settings",children:[(0,n.jsx)("button",{className:"cm-blockmanager__toolbar-btn js-cm-btn-dropdown__toggle","data-event":"sectionSettings",title:window.translate("Legacy_blockmanager_toolbar_settings"),"aria-label":window.translate("Legacy_blockmanager_toolbar_settings"),children:(0,n.jsx)(Ps.V,{icon:"settings"})}),(0,n.jsx)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--below cm-btn-dropdown__menu--fixed-width js-cm-btn-dropdown__menu js-cm-blockmanager__section-settings-container"})]}),(0,n.jsx)("button",{className:"cm-blockmanager__toolbar-btn js-cm-blockmanager__section-cut",title:window.translate("Legacy_blockmanager_toolbar_cut"),"aria-label":window.translate("Legacy_blockmanager_toolbar_cut"),children:(0,n.jsx)(Ps.V,{icon:"cut"})}),(0,n.jsxs)("div",{className:"cm-btn-dropdown",children:[(0,n.jsx)("button",{className:"cm-blockmanager__toolbar-btn js-cm-blockmanager__section-delete js-cm-btn-dropdown__toggle","data-event":"sectionDeleteMenu",title:window.translate("Legacy_blockmanager_toolbar_delete"),"aria-label":window.translate("Legacy_blockmanager_toolbar_delete"),children:(0,n.jsx)(Ps.V,{icon:"trash"})}),(0,n.jsx)("div",{className:"cm-btn-dropdown__menu cm-btn-dropdown__menu--below cm-btn-dropdown__menu--right js-cm-btn-dropdown__menu js-cm-blockmanager__section-delete-container"})]})]})}));var Jd=i(76746),Zd=i(96840),Qd=i(14860),Xd=i(5188),Mc=i(95878),up=Object.defineProperty,hp=Object.defineProperties,qd=Object.getOwnPropertyDescriptors,eu=Object.getOwnPropertySymbols,pp=Object.prototype.hasOwnProperty,tu=Object.prototype.propertyIsEnumerable,su=(s,t,a)=>t in s?up(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,al=(s,t)=>{for(var a in t||(t={}))pp.call(t,a)&&su(s,a,t[a]);if(eu)for(var a of eu(t))tu.call(t,a)&&su(s,a,t[a]);return s},mp=(s,t)=>hp(s,qd(t));const nu=(0,x.I)(s=>{var t;const a=(r,p)=>{switch(r.toLocaleLowerCase()){case"divider":return(0,n.jsx)(Jd.O,al({settings:{}},p));case"iframe":return(0,n.jsx)(Zd.f,al({},p));case"media":return(0,n.jsx)(Qd.T,al({},p));case"none":return(0,n.jsx)(nc.B,al({},p));case"textimage":return(0,n.jsx)(Xd.J,al({},p));case"video":return(0,n.jsx)(Mc.O,al({},p));default:return null}};return(0,n.jsxs)("div",{className:`po-brandportal__row-container cm-blockmanager__section js-cm-blockmanager__section js-po-brandportal__row ${s.settings.margin!==void 0&&s.settings.margin!==null?`${s.tpl.unit(s.settings.margin)==0?"state-zero-margin":"state-has-margin"}`:""}`,"data-row":s.id,children:[!s.translation&&s.utils.account.hasPermission("edit")?(0,n.jsx)(dp,{}):null,(0,n.jsx)("div",{className:"po-brandportal__row-wrap",children:(0,n.jsx)("div",{className:`p-row ${s.settings.layout?`p-row--${s.settings.layout}`:""}`,children:(t=Object.keys(s.row))==null?void 0:t.map(r=>{const p=a(s.row[r].block_type,mp(al({},s.row[r]),{blockWidth:s.settings.width}));return(0,n.jsx)("div",{className:`p-col ${s.row[r].width?`p-col--${s.row[r].width}`:""} js-po-brandportal__col`,"data-id":s.row[r].grid,"data-test-id":"cover-page-column",children:p},r)})})}),!s.translation&&s.utils.account.hasPermission("edit")?(0,n.jsx)("div",{className:"cm-blockmanager__section-add po-brandportal__add-row-container",children:(0,n.jsxs)("div",{className:"cm-btn-dropdown",children:[(0,n.jsxs)("button",{className:"js-cm-btn-dropdown__toggle po-brandportal__add-row","data-event":"sectionChooser",children:[(0,n.jsx)("i",{className:"po-brandportal__addrow-icon icon-plus"}),(0,n.jsx)("span",{className:"po-brandportal__add-row-text",children:window.translate("BrandportalRow_addSection")})]}),(0,n.jsx)("div",{className:"js-cm-btn-dropdown__menu cm-btn-dropdown__menu cm-btn-dropdown__menu--center cm-btn-dropdown__menu--middle"})]})}):null]})});var Kr=i(5181);class gp extends u.j{async on(t){this.sandbox.subscribe("events",this),this.sandbox.subscribe("brandportalevents",this),this.$grid=this.$ctx.find(".js-po-brandportal__grid"),this.controller=new(Kd()).Controller,this.isThemesContext=!!Kr("body").data("marketplace-app-id"),this.pageTemplateSettingsUpdateHandler=void 0,this.editing=!1,this.colors=[];const a=new rp.i(this.$ctx,this.sandbox,{emptyBlockTemplate:nc.B,cutBlockTemplate:sp,copyBlockTemplate:tp,cutSectionTemplate:Gd});a.deleteBlock=r=>{const p=r.dataAsNumber("block");this.sandbox.getModuleById(r.data("terrificId")).stop(),this.data.post(`/api/hub/teaser/${p}?invocation_source=48`,{block_type:"NONE"});const L=Kr((0,e.EY)(nc.B,{teaser:p,block_type:"NONE"}));r.replaceWith(L),this.sandbox.addModules(L)},a.deleteSection=r=>{const p=r.dataAsNumber("row");this.data.delete(`/api/hub/grid/${this.$ctx.dataAsNumber("hub")}/${p}`),r.remove(),this.$ctx.find(".js-po-brandportal__row").length===1&&this._showBlankSlate(!0)},a.sectionSettings=r=>{const O=r.closest(".js-po-brandportal__row").dataAsNumber("row");this.data.get(`/api/hub/grid/row/${this.$ctx.dataAsNumber("hub")}/${O}`).then(L=>{if(L.success){const W=Kr((0,e.EY)(lp,L.data));this.tpl.addAndActivate(r,W);const X=new y.D(W,this.sandbox),ie=X.getSetting("width");ie.saved=Je=>{this.updateSection(O,Je.settings),this.fire("pbBlockWidthUpdated",Je.settings.width,["events"])};const xe=X.getSetting("margin");xe.saved=Je=>{this.updateSection(O,Je.settings)};const Ae=X.getSetting("margin_top");Ae.saved=Je=>{this.updateSection(O,Je.settings)};const Ne=X.getSetting("margin_bottom");Ne.saved=Je=>{this.updateSection(O,Je.settings)};const He=X.getSetting("background");He.saved=Je=>{this.updateSection(O,Je.settings)},L.data.targets&&(r.append((0,e.EY)(Bc,{rowId:L.data.targets.row_id,data:L.data.targets})),this.sandbox.addModules(r.find(".js-co-targetsoptions")))}})},this.$ctx.on("click",".js-cm-blockmanager__section-cut, .js-cm-blockmanager__block-cut, .js-cm-blockmanager__block-copy",()=>{this.$ctx.addClass("state-cut"),Kr(window).on("keyup.brandportal",r=>{r.which===27&&(this.$ctx.removeClass("state-cut"),Kr(window).off("keyup.brandportal"))})}),this.$ctx.on("click",".js-pm-control__cancel",r=>{r.preventDefault(),this.$ctx.removeClass("state-cut"),this.fire("resetBlocksAndSections")}),this.registerPageTemplateSidebarSettingsEvents(),await this.render(),t()}registerPageTemplateSidebarSettingsEvents(){this.pageTemplateSettingsUpdateHandler=({pageTemplateSettings:t})=>{this.setBrandportalAppearanceSettings(this.translateThemeSettingsToAppearance(t))},window.emitter.on("Guideline:CoverTemplateSettingsLoaded",this.pageTemplateSettingsUpdateHandler)}toggleEditor(){const t=this.$ctx.find(".js-o-document-targets-indicator");t&&t.remove(),this.editing?this.fire("forceEnableEditor"):(this.fire("forceDisableEditor"),this.$ctx.append((0,e.EY)(Yd)))}updateSection(t,a){const r=this.$ctx.find(`.js-po-brandportal__row[data-row="${t}"]`);this.data.post(`/api/hub/grid/row/${this.$ctx.dataAsNumber("hub")}/${t}`,{settings:a}).then(p=>{const O=p.data.settings;if(r.removeClass("state-has-margin state-zero-margin"),O.margin!==void 0&&O.margin!==null){const L=this.tpl.unit(O.margin);parseInt(L)===0?r.addClass("state-zero-margin"):r.addClass("state-has-margin")}this.setBrandportalRowAppearanceSettings(t,O||{})})}translateThemeSettingsToAppearance(t){const a=t.contentAreaBackgroundColor;return{alignment:t.contentAreaAlignmentChoice,width:t.contentAreaWidthCustomEnabled?t.contentAreaWidthCustom:t.contentAreaWidthChoice,margin:t.contentAreaCustomSpacingEnabled?t.contentAreaCustomSpacing:this._getCssValueFromChoice(t.contentAreaSimpleSpacing),margin_top:t.contentAreaMarginTop,margin_bottom:t.contentAreaMarginBottom,background_color:a?(0,Ls.qA5)(a):""}}setBrandportalAppearanceSettings(t){this.updateBrandportalBackgroundColor(t.background_color),this.updateBrandportalMarginBetweenItems(t.margin),this.updateBrandportalMarginTop(t.margin_top),this.updateBrandportalMarginBottom(t.margin_bottom),this.updateBrandportalWidth(t.width),this.updateBrandportalRowAlignment(t.alignment)}setBrandportalRowAppearanceSettings(t,a){this.updateBrandportalRowBackgroundColor(t,a.background),this.updateBrandportalRowMarginBetweenItems(t,a.margin),this.updateBrandportalRowMarginTop(t,a.margin_top),this.updateBrandportalRowMarginBottom(t,a.margin_bottom),this.updateBrandportalRowWidth(t,a.width)}async render(){const t=`/api/portal/${this.$ctx.dataAsNumber("hub")}`;let a=`/api/hub/grid/${this.$ctx.dataAsNumber("hub")}`;const r=(0,Wt.YZ)();r&&(a+=`?lang=${r}`);const[p,O]=await Promise.all([this.data.get(a),this.data.get(t)]);if(O.success){const L=this.isThemesContext?this.translateThemeSettingsToAppearance(O.data.cover_page_template_settings):O.data.brandhome_settings.document_appearance.grid;this.setBrandportalAppearanceSettings(L)}if(p.success){const L=p.rows;if(Object.keys(L).length>0){this._showBlankSlate(!1);for(const W in L)if(Object.hasOwnProperty.call(L,W)){const X=Kr((0,e.EY)(nu,{settings:L[W].settings||{},row:L[W].data,id:L[W].id,translation:L[W].translation}));this.$grid.append(X),this.setBrandportalRowAppearanceSettings(L[W].id,L[W].settings||{})}}else r||this._showBlankSlate(!0);this.editing=p.editing,(0,b.PL)().permissions.edit&&this.toggleEditor(),this.sandbox.addModules(this.$grid)}}after(){setTimeout(()=>{this._animate()},0)}_showBlankSlate(t){const a=this.$ctx.find(".js-po-brandportal__add-row-container-initial");if(t===!0){const r=this.$ctx.find(".js-po-brandportal__blank-slate-addsection"),p={renderSettings:{noCloseButton:!0}};this._renderSectionChooser(r,p),a.addClass("state-visible")}else a.removeClass("state-visible")}_renderSectionChooser(t,a){const r=Kr((0,e.EY)(op,a));t.html(r);const O=new y.D(r,this.sandbox).getSettings();for(const L of O)L.saved=W=>{this._showBlankSlate(!1),this._addRow(t.closest(".js-po-brandportal__row"),W.template),this.fire("closeDropdown",t,["events"]),(0,f.s)("create cover page section",{type:W.template.toUpperCase()})}}_addRow(t,a){const r=t.dataAsNumber("row");this.data.post(`/api/hub/grid/${this.$ctx.dataAsNumber("hub")}`,{row:r,template:a}).then(p=>{if(p.success){const O=p.rows;for(const L in O)if(Object.hasOwnProperty.call(O,L)){const W=Kr((0,e.EY)(nu,{id:L,settings:O[L].settings||{},row:O[L].data,translation:O[L].translation}));t.after(W),this.sandbox.addModules(W),this._animate(W),this._showBlankSlate(!1),t=W}}})}_animate(t){t=t||this.$ctx.find(".js-po-brandportal__row");const a="fadeIn";t.each((r,p)=>{const O=Kr(p),L=O.find(".js-po-brandportal__col");L.css("opacity",0);const W=new(Kd()).Scene({triggerElement:O.get(0),triggerHook:"onEnter",offset:"50"}).addTo(this.controller).on("enter",()=>{W.remove(),L.velocity(`transition.${a}`,{duration:200,display:L.eq(0).css("display"),complete:()=>{L.css({transform:"none"})}})})})}_getCssValueFromChoice(t){return t&&t in Sr.cM?Sr.cM[t]:""}_getCssValueWithUnit(t){return this.isEmpty(t)?"":this.tpl.unit(t)}_getCssMarginsFromAlignment(t){let a="";switch(t){case"left":a="0 auto 0 0";break;case"right":a="0 0 0 auto";break;default:a="0 auto"}return a}updateBrandportalMarginBetweenItems(t){const a=Kr(".js-po-brandportal__grid");this.tpl.unit(t,!0)===0?a.addClass("state-zero-margin"):a.removeClass("state-zero-margin"),this.$ctx.css({"--brandportal-margin":this._getCssValueWithUnit(t)})}updateBrandportalMarginTop(t){this.$ctx.css({"--brandportal-margin-top":this._getCssValueWithUnit(t)})}updateBrandportalMarginBottom(t){this.$ctx.css({"--brandportal-margin-bottom":this._getCssValueWithUnit(t)})}updateBrandportalWidth(t){this.$ctx.css({"--brandportal-width":this._getCssValueWithUnit(t)})}updateBrandportalBackgroundColor(t){this.$ctx.css({"--brandportal-background-color":t})}updateBrandportalRowAlignment(t){this.$ctx.css({"--brandportal-row-alignment":this._getCssMarginsFromAlignment(t)})}updateBrandportalRowBackgroundColor(t,a){const r=this.isEmpty(a)?"":a;this.$ctx.find(`[data-row=${t}]`).css({"--brandportal-background-color":r})}updateBrandportalRowWidth(t,a){this.$ctx.find(`[data-row=${t}]`).css({"--brandportal-width":this._getCssValueWithUnit(a)})}updateBrandportalRowMarginBetweenItems(t,a){this.$ctx.find(`[data-row=${t}]`).css({"--brandportal-margin":this._getCssValueWithUnit(a)})}updateBrandportalRowMarginTop(t,a){this.$ctx.find(`[data-row=${t}]`).css({"--brandportal-margin-top":this._getCssValueWithUnit(a)})}updateBrandportalRowMarginBottom(t,a){this.$ctx.find(`[data-row=${t}]`).css({"--brandportal-margin-bottom":this._getCssValueWithUnit(a)})}onUpdateBrandportalMarginBetweenItems(t){this.updateBrandportalMarginBetweenItems(t)}onUpdateBrandportalMarginTop(t){this.updateBrandportalMarginTop(t)}onUpdateBrandportalMarginBottom(t){this.updateBrandportalMarginBottom(t)}onUpdateBrandportalWidth(t){this.updateBrandportalWidth(t)}onUpdateBrandportalBackgroundColor(t){this.updateBrandportalBackgroundColor(t)}onSectionChooserOpened(t){t.$menu.closest(".po-brandportal__add-row-container").addClass("state-visible"),this._renderSectionChooser(t.$menu)}onSectionChooserClosed(t){const a=t.$menu.closest(".po-brandportal__add-row-container");a.hasClass("po-brandportal__add-row-container-initial")||a.removeClass("state-visible")}onEditingEnabled(){this.editing=!0}onEditingDisabled(){this.editing=!1,this.$ctx.find(".state-settings-open").removeClass("state-settings-open"),window.location.search==="?edit"&&(location.href=window.location.origin+window.location.pathname+window.location.hash)}onBlockInserted(){this.$ctx.removeClass("state-cut")}onSectionInserted(){this.$ctx.removeClass("state-cut")}isEmpty(t){return t==null||t===""||t==="auto"}stop(){this.pageTemplateSettingsUpdateHandler&&window.emitter.off("Guideline:CoverTemplateSettingsLoaded",this.pageTemplateSettingsUpdateHandler)}}var Rc=i(5181);class Uc extends u.j{on(t){this.sandbox.subscribe("events",this),this.offset=300,this.offsetOpacity=1200,this.duration=700,Rc(window).scroll(()=>{this.setVisibility()}),this.$ctx.on("click",a=>{a.preventDefault(),Rc("body").velocity("scroll",{duration:700,offset:0,easing:"easeOutCubic"})}),t()}setVisibility(){const t=Rc(window);t.scrollTop()>this.offset?this.$ctx.addClass("state-visible"):(this.$ctx.removeClass("state-visible"),this.$ctx.find(".btn-top-inner").removeClass("state-fade")),t.scrollTop()>this.offsetOpacity&&this.$ctx.find(".btn-top-inner").addClass("state-fade")}onNavdocumentsMobileOpen(){this.$ctx.removeClass("state-visible")}onNavdocumentsMobileClose(){this.setVisibility()}}const au=(0,x.I)(s=>s.brandPortal.enabled?(0,n.jsx)("div",{className:"nav-brandportal",children:(0,n.jsxs)("a",{className:"nav-brandportal__item",href:s.brandPortal.url,"data-editable":"true",children:[(0,n.jsx)("i",{className:"icon-tiles"}),(0,n.jsx)("span",{className:"nav-brandportal__item-title",children:s.brandPortal.label||window.translate("Legacy_styleguide_navigation_brandportal_label")})]})}):null);class fp extends u.j{on(t){this.sandbox.subscribe("events",this),this.hubId=(0,b._j)();const a=this.data.deepCopyObject(this.sandbox.getConfigParam("documents"));this.renderTemplate(a.brand_portal),window.emitter.on("AppBridge:GuidelineBrandportalLink:Action",()=>this.onBrandPortalSettingsUpdated()),t()}onBrandPortalSettingsUpdated(){this.data.get(`/api/hub/settings/${this.hubId}?lang=${(0,Wt.YZ)()}`).then(t=>{if(!t.success)return this.displayError();this.renderTemplate(t.hub.appearance.brand_portal_link)}).catch(()=>this.displayError())}renderTemplate(t){this.$ctx.html((0,e.EY)(au,{brandPortal:t})),this.fire("brandPortalLoad")}displayError(){this.fire("swal",{template:"general-error",closeOnConfirm:!0})}}const iu=(0,x.I)(s=>(0,n.jsxs)("li",{className:"o-changelog__item clearfix",children:[(0,n.jsx)("div",{className:"o-changelog__item-actions",children:(0,n.jsxs)("label",{className:"cm-btn-toggle cm-btn-toggle--left",children:[(0,n.jsx)("input",{className:"cm-btn-toggle__input",name:"role",value:s.id,type:"checkbox"}),(0,n.jsx)("i",{className:"o-changelog__toggle cm-btn-toggle__toggle"})]})}),(0,n.jsxs)("div",{className:"o-changelog__item-content",children:[(0,n.jsx)("h4",{className:"o-changelog__item-title",children:s.name})," ",(0,n.jsx)("p",{className:"o-changelog__item-meta",children:s.count>0?(0,n.jsxs)(n.Fragment,{children:[s.count," ",window.translate("Legacy_changelog_people_including")]}):null})]})]}));var _p=Object.defineProperty,ou=Object.getOwnPropertySymbols,vp=Object.prototype.hasOwnProperty,bp=Object.prototype.propertyIsEnumerable,ac=(s,t,a)=>t in s?_p(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,yp=(s,t)=>{for(var a in t||(t={}))vp.call(t,a)&&ac(s,a,t[a]);if(ou)for(var a of ou(t))bp.call(t,a)&&ac(s,a,t[a]);return s};const wp=(0,x.I)(s=>{var t;return(0,n.jsxs)("form",{className:"o-changelog__panel js-o-changelog__role-form",children:[(0,n.jsx)("h2",{className:"o-changelog__panel-title",children:window.translate("Legacy_changelog_notify_title")}),(0,n.jsx)("h3",{className:"o-changelog__panel-subtitle",children:window.translate("Legacy_changelog_notify_subtitle")}),(0,n.jsx)("ul",{className:"o-changelog__list",children:(t=Object.keys(s))==null?void 0:t.map((a,r)=>a in s&&a!=="tpl"&&a!=="utils"&&a!=="constants"?(0,n.jsx)(iu,yp({},s[a]),r):null)}),(0,n.jsx)("textarea",{name:"comment",className:"o-changelog__comment-area",rows:5,placeholder:window.trans